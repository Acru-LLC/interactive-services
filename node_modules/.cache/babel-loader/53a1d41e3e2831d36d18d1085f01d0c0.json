{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\organizitional\\components\\gatherViewReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\organizitional\\components\\gatherViewReport.vue","mtime":1674799497814},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCBTZXJ2aWNlIGZyb20gIkAvbW9kdWxlcy9yZXBvcnQvcmVwb3J0U2VydmljZSI7Ci8vIGltcG9ydCB7IGdldE5hbWUsIGRlYyB9IGZyb20gIkAvaGVscGVyIjsKaW1wb3J0IFhMU1ggZnJvbSAieGxzeCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGVyUHJpbnQ6IGZhbHNlLAogICAgICBsb2FkZXJFeGNlbDogZmFsc2UsCiAgICAgIGxvYWRlclFyY29kZTogZmFsc2UsCiAgICAgIGYxSWRzOiBbXSwKICAgICAgZjJJZHM6IFtdLAogICAgICBmUm93SWQ6IG51bGwsCiAgICAgIHRhYmxlSWQ6IG51bGwsCiAgICAgIHJlcG9ydElkOiBudWxsLAogICAgICAvLyBnZXROYW1lOiBnZXROYW1lLAogICAgICBzZWxlY3RlZENvbHVtbnM6IFtdLAogICAgICBzZWxlY3RlZFJvd3M6IFtdLAogICAgICBmaXJzdENvbHVtbnM6IFtdLAogICAgICBzZWNvbmRDb2x1bW5zOiBbXSwKICAgICAgdGhpcmRDb2x1bW5zOiBbXSwKICAgICAgdGhpcmRUcklkRGF0YTogW10sCiAgICAgIGxvYWRlcjogZmFsc2UsCiAgICAgIHJlcG9ydDoge30sCiAgICAgIHRhYmxlOiB7fSwKICAgICAgZm9ybXVsYXM6IFtdLAogICAgICBjdXJyZW50UG9zaXRpb246IHsKICAgICAgICByb3dJbmRleDogbnVsbCwKICAgICAgICBjb2x1bW5JbmRleDogbnVsbCwKICAgICAgICByb3dJZDogbnVsbCwKICAgICAgICBjb2x1bW5JZDogbnVsbAogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcHJpbnQ6IGZ1bmN0aW9uIHByaW50KCkgewogICAgICB0aGlzLmxvYWRlclByaW50ID0gdHJ1ZTsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG15d2luZG93ID0gd2luZG93Lm9wZW4oIiIsICJQUklOVCIsICJoZWlnaHQ9ODAwLHdpZHRoPTEwMDAiKTsKICAgICAgICAvLyBHZXQgYWxsIHN0eWxlc2hlZXRzIEhUTUwKICAgICAgICB2YXIgc3R5bGVzSHRtbCA9ICIiOwogICAgICAgIGZvciAodmFyIF9pID0gMCwgX2FyciA9IF90b0NvbnN1bWFibGVBcnJheShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaW5rW3JlbD0ic3R5bGVzaGVldCJdLCBzdHlsZScpKTsgX2kgPCBfYXJyLmxlbmd0aDsgX2krKykgewogICAgICAgICAgdmFyIG5vZGUgPSBfYXJyW19pXTsKICAgICAgICAgIHN0eWxlc0h0bWwgKz0gbm9kZS5vdXRlckhUTUw7CiAgICAgICAgfQogICAgICAgIG15d2luZG93LmRvY3VtZW50LndyaXRlKCI8aHRtbD48aGVhZD4gPHRpdGxlPiAgUmVwb3J0IDwvdGl0bGU+Iik7CiAgICAgICAgbXl3aW5kb3cuZG9jdW1lbnQud3JpdGUoIjwvaGVhZD48Ym9keT48c3R5bGU+XG4gICAgICBAcGFnZSB7XG4gICAgICAgIHNpemU6IEE0ICFpbXBvcnRhbnQ7XG4gICAgICAgIG1hcmdpbjogMWNtICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgICB0YWJsZXtcbiAgICAgICAgICBmb250LXNpemU6MS4xdndcbiAgICAgIH1cblxuXG4gICAgICAjbm9uZS1kc3Age1xuICAgICAgICBkaXNwbGF5Om5vbmUgIWltcG9ydGFudFxuICAgICAgfVxuICAgICAgI292ZXIge1xuICAgICAgICBvdmVyZmxvdzp2aXNpYmxlICFpbXBvcnRhbnRcbiAgICAgIH1cbiAgICAgIDwvc3R5bGU+XG4gICAgICAiLmNvbmNhdChzdHlsZXNIdG1sKSk7CiAgICAgICAgbXl3aW5kb3cuZG9jdW1lbnQud3JpdGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInByaW50SWQiKS5pbm5lckhUTUwpOwogICAgICAgIG15d2luZG93LmRvY3VtZW50LndyaXRlKCI8L2JvZHk+PC9odG1sPiIpOwogICAgICAgIG15d2luZG93LmRvY3VtZW50LmNsb3NlKCk7IC8vIG5lY2Vzc2FyeSBmb3IgSUUgPj0gMTAKICAgICAgICBteXdpbmRvdy5mb2N1cygpOyAvLyBuZWNlc3NhcnkgZm9yIElFID49IDEwKi8KCiAgICAgICAgbXl3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgbXl3aW5kb3cucHJpbnQoKTsKICAgICAgICAgIG15d2luZG93LmNsb3NlKCk7CiAgICAgICAgICB2bS5sb2FkZXJQcmludCA9IGZhbHNlOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0sIDMwMCk7CiAgICB9LAogICAgZXhjZWxFeHBvcnQ6IGZ1bmN0aW9uIGV4Y2VsRXhwb3J0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmxvYWRlckV4Y2VsID0gdHJ1ZTsKICAgICAgdmFyIGZpbGVOYW1lID0gIlJlcG9ydCI7CiAgICAgIHZhciB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXBvcnRUYWJsZUlkIik7CiAgICAgIHZhciB3YiA9IFhMU1gudXRpbHMudGFibGVfdG9fYm9vayh0YWJsZSwgewogICAgICAgIHNoZWV0OiAic2hlZXQxIgogICAgICB9KTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubG9hZGVyRXhjZWwgPSBmYWxzZTsKICAgICAgfSwgNTAwKTsKICAgICAgcmV0dXJuIFhMU1gud3JpdGVGaWxlKHdiLCAiIi5jb25jYXQoZmlsZU5hbWUsICIueGxzeCIpLCB7fSk7CiAgICB9LAogICAgY2xlYXJBbGw6IGZ1bmN0aW9uIGNsZWFyQWxsKCkgewogICAgICB0aGlzLnNlbGVjdGVkQ29sdW1ucyA9IFtdOwogICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdOwogICAgICB0aGlzLmZpcnN0Q29sdW1ucyA9IFtdOwogICAgICB0aGlzLnNlY29uZENvbHVtbnMgPSBbXTsKICAgICAgdGhpcy50aGlyZENvbHVtbnMgPSBbXTsKICAgICAgdGhpcy50aGlyZFRySWREYXRhID0gW107CiAgICAgIHRoaXMuZm9ybXVsYXMgPSBbXTsKICAgICAgdGhpcy50YWJsZSA9IFtdOwogICAgICB0aGlzLmYxSWRzID0gW107CiAgICAgIHRoaXMuZjJJZHMgPSBbXTsKICAgIH0sCiAgICBzZXRFcnJvcjogZnVuY3Rpb24gc2V0RXJyb3IoZjEsIGYyLCBmcm93SWQpIHsKICAgICAgdGhpcy5mMUlkcyA9IGYxOwogICAgICB0aGlzLmYySWRzID0gZjI7CiAgICAgIHRoaXMuZlJvd0lkID0gZnJvd0lkOwogICAgfSwKICAgIGdldEZvcm11bGFzXzI6IGZ1bmN0aW9uIGdldEZvcm11bGFzXzIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7CiAgICAgICAgaWYgKF90aGlzMi50YWJsZUlkKSB7CiAgICAgICAgICBTZXJ2aWNlLmZvcm11bGFzQnlUYWJsZUlkXzIoX3RoaXMyLnRhYmxlSWQpLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CiAgICAgICAgICAgIF90aGlzMi5mb3JtdWxhcyA9IGRhdGE7CiAgICAgICAgICAgIHJlcyhkYXRhKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiByZWooZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXREYXRhQnlJZDogZnVuY3Rpb24gZ2V0RGF0YUJ5SWQoZm9ybSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7CiAgICAgICAgU2VydmljZS5nZXRHYXRoZXIoZm9ybSkudGhlbihmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTsKICAgICAgICAgIHZhciByZXNkYXRhID0gewogICAgICAgICAgICBkYXRhOiBkYXRhLmRhdGFMaXN0LAogICAgICAgICAgICByZXBvcnQ6IGRhdGEucmVwb3J0TGlzdAogICAgICAgICAgfTsKICAgICAgICAgIHJlcyhyZXNkYXRhKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHJlaihlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2V0VmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHJvd0lkLCB2YWx1ZSwgcm93SW5kZXgsIGluZGV4LCBpZCwgdHlwZUNvZGUpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdID0gewogICAgICAgIHJvd0lkOiByb3dJZCA/IHJvd0lkIDogbnVsbCwKICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgdHlwZUNvZGU6IHR5cGVDb2RlLAogICAgICAgIGNvbHVtbklkOiBpZAogICAgICB9OwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJub19lbnRlcl92YWx1ZV8yIikuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQpIHsKICAgICAgICBpZiAoSlNPTi5wYXJzZShpbnB1dC5pZCkucm93SWQpIHsKICAgICAgICAgIF90aGlzMy5mb3JtdWxhcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmYyLmluZGV4T2YoaWQudG9TdHJpbmcoKSkgPiAtMSAmJiBlLmYxLmluZGV4T2YoSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQpID4gLTEgJiYgSlNPTi5wYXJzZShpbnB1dC5pZCkucm93SWQgPT0gcm93SWQpIHsKICAgICAgICAgICAgICB2YXIgYWxsVmFsID0gMDsKICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpbnB1dF92YWwiKS5mb3JFYWNoKGZ1bmN0aW9uICh2SW5wdXQpIHsKICAgICAgICAgICAgICAgIGlmIChlLmYyLmluZGV4T2YocGFyc2VGbG9hdChKU09OLnBhcnNlKHZJbnB1dC5pZCkuY29sdW1uSWQpKSA+IC0xICYmIEpTT04ucGFyc2UodklucHV0LmlkKS5yb3dJZCA9PSByb3dJZCkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLl9lbXB0eSh2SW5wdXQuaW5uZXJUZXh0KSkge30gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWxsVmFsICs9IHBhcnNlRmxvYXQodklucHV0LmlubmVyVGV4dCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzMy4kc2V0KGlucHV0LCAiaW5uZXJUZXh0IiwgcGFyc2VGbG9hdChhbGxWYWwpKTsKICAgICAgICAgICAgICAgIHZhciBmb3VuZEluZGV4ID0gX3RoaXMzLnRoaXJkVHJJZERhdGEuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlLmNvbHVtbklkID09IEpTT04ucGFyc2UoaW5wdXQuaWQpLmNvbHVtbklkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpczMudGhpcmRUcklkRGF0YVtmb3VuZEluZGV4XS52YWx1ZVtyb3dJbmRleF0gPSB7CiAgICAgICAgICAgICAgICAgIHJvd0lkOiByb3dJZCA/IHJvd0lkIDogbnVsbCwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGFsbFZhbCwKICAgICAgICAgICAgICAgICAgdHlwZUNvZGU6IHR5cGVDb2RlLAogICAgICAgICAgICAgICAgICBjb2x1bW5JZDogSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuZm9ybXVsYXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoZS5mMi5pbmRleE9mKGlkLnRvU3RyaW5nKCkpID4gLTEgJiYgZS5mMS5pbmRleE9mKEpTT04ucGFyc2UoaW5wdXQuaWQpLmNvbHVtbklkKSA+IC0xKSB7CiAgICAgICAgICAgICAgdmFyIGFsbFZhbCA9IDA7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaW5wdXRfdmFsIikuZm9yRWFjaChmdW5jdGlvbiAodklucHV0KSB7CiAgICAgICAgICAgICAgICBpZiAoZS5mMi5pbmRleE9mKHBhcnNlRmxvYXQoSlNPTi5wYXJzZSh2SW5wdXQuaWQpLmNvbHVtbklkKSkgPiAtMSkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMzLl9lbXB0eSh2SW5wdXQuaW5uZXJUZXh0KSkge30gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWxsVmFsICs9IHBhcnNlRmxvYXQodklucHV0LnZhbHVlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX3RoaXMzLiRzZXQoaW5wdXQsICJpbm5lclRleHQiLCBwYXJzZUZsb2F0KGFsbFZhbCkpOwogICAgICAgICAgICAgICAgdmFyIGZvdW5kSW5kZXggPSBfdGhpczMudGhpcmRUcklkRGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuY29sdW1uSWQgPT0gSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzMy50aGlyZFRySWREYXRhW2ZvdW5kSW5kZXhdLnZhbHVlWzBdID0gewogICAgICAgICAgICAgICAgICByb3dJZDogbnVsbCwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGFsbFZhbCwKICAgICAgICAgICAgICAgICAgdHlwZUNvZGU6IHR5cGVDb2RlLAogICAgICAgICAgICAgICAgICBjb2x1bW5JZDogSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICB9LAogICAgZ2V0QnlJZDogZnVuY3Rpb24gZ2V0QnlJZChpZCwgZm9ybSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdGhpcy5jbGVhckFsbCgpOwogICAgICB0aGlzLnRhYmxlSWQgPSBpZDsKICAgICAgLy8gICB0aGlzLnJlcG9ydElkID0gcmVwb3J0SWQ7CiAgICAgIHRoaXMubG9hZGVyID0gdHJ1ZTsKCiAgICAgIC8vICAgU2VydmljZS5yZXBvcnRHZXRCeUlkKHJlcG9ydElkKS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAvLyAgICAgdGhpcy5yZXBvcnQgPSBkYXRhOwogICAgICAvLyAgIH0pOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7CiAgICAgICAgU2VydmljZS5nZXRCeUlkVGFibGUoaWQpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICBpZiAocnMuZGF0YSkgewogICAgICAgICAgICBfdGhpczQuc2V0Q29sdW1ucyhycy5kYXRhLmNvbHVtbnMpOwogICAgICAgICAgICBfdGhpczQuc2V0Um93KHJzLmRhdGEucm93cyk7CiAgICAgICAgICAgIF90aGlzNC50YWJsZSA9IHJzLmRhdGEudGFibGU7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIFByb21pc2UuYWxsKFtfdGhpczQuZ2V0RGF0YUJ5SWQoZm9ybSksIF90aGlzNC5nZXRGb3JtdWxhc18yKCldKS50aGVuKGZ1bmN0aW9uIChfcmVmMykgewogICAgICAgICAgICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpLAogICAgICAgICAgICAgICAgICBfcmVmNCQgPSBfcmVmNFswXSwKICAgICAgICAgICAgICAgICAgZGF0YSA9IF9yZWY0JC5kYXRhLAogICAgICAgICAgICAgICAgICByZXBvcnQgPSBfcmVmNCQucmVwb3J0LAogICAgICAgICAgICAgICAgICBmb3JtdWxhcyA9IF9yZWY0WzFdOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaW5wdXRfdmFsIikuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgZm9ybXVsYXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleF9WID0gSlNPTi5wYXJzZShlbGVtZW50LmYxKS5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09IEpTT04ucGFyc2UoaW5wdXQuaWQpLmNvbHVtbklkOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmIChpbmRleF9WID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJHNldChpbnB1dCwgImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuJHNldChpbnB1dC5zdHlsZSwgImJvcmRlciIsICJub25lIik7CiAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCJub19lbnRlcl92YWx1ZV8yIik7CiAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnBhcnNlKGlucHV0LmlkKS5yb3dJZCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlRmxvYXQoSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQpID09IHBhcnNlRmxvYXQoZS5jb2x1bW5JZCkgJiYgcGFyc2VGbG9hdChKU09OLnBhcnNlKGlucHV0LmlkKS5yb3dJZCkgPT0gcGFyc2VGbG9hdChlLnJvd0lkKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuJHNldChpbnB1dCwgImlubmVyVGV4dCIsIGUudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdChKU09OLnBhcnNlKGlucHV0LmlkKS5jb2x1bW5JZCkgPT0gcGFyc2VGbG9hdChlLmNvbHVtbklkKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuJHNldChpbnB1dCwgImlubmVyVGV4dCIsIGUudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzNC5sb2FkZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJlcyh7CiAgICAgICAgICAgICAgICAgIHJlcG9ydDogcmVwb3J0LAogICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXM0LmxvYWRlciA9IGZhbHNlOwogICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlKTsKICAgICAgICAgIHJlaigiZXJyb3IiKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0QnlXaXRoUmVwb3J0SWQ6IGZ1bmN0aW9uIGdldEJ5V2l0aFJlcG9ydElkKGlkLCBmb3JtKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLmNsZWFyQWxsKCk7CiAgICAgIHRoaXMudGFibGVJZCA9IGlkOwogICAgICAvLyAgIHRoaXMucmVwb3J0SWQgPSByZXBvcnRJZDsKICAgICAgdGhpcy5sb2FkZXIgPSB0cnVlOwoKICAgICAgLy8gICBTZXJ2aWNlLnJlcG9ydEdldEJ5SWQocmVwb3J0SWQpLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgIC8vICAgICB0aGlzLnJlcG9ydCA9IGRhdGE7CiAgICAgIC8vICAgfSk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHsKICAgICAgICBTZXJ2aWNlLmdldEJ5SWRUYWJsZVdpdGhSZXBvcnRJZChpZCwgZm9ybS50YWJsZUlkLmlkKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgICAgaWYgKHJzLmRhdGEpIHsKICAgICAgICAgICAgX3RoaXM1LnNldENvbHVtbnMocnMuZGF0YS5jb2x1bW5zKTsKICAgICAgICAgICAgX3RoaXM1LnNldFJvdyhycy5kYXRhLnJvd3MpOwogICAgICAgICAgICBfdGhpczUudGFibGUgPSBycy5kYXRhLnRhYmxlOwogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBQcm9taXNlLmFsbChbX3RoaXM1LmdldERhdGFCeUlkKGZvcm0pLCBfdGhpczUuZ2V0Rm9ybXVsYXNfMigpXSkudGhlbihmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmNiA9IF9zbGljZWRUb0FycmF5KF9yZWY1LCAyKSwKICAgICAgICAgICAgICAgICAgX3JlZjYkID0gX3JlZjZbMF0sCiAgICAgICAgICAgICAgICAgIGRhdGEgPSBfcmVmNiQuZGF0YSwKICAgICAgICAgICAgICAgICAgcmVwb3J0ID0gX3JlZjYkLnJlcG9ydCwKICAgICAgICAgICAgICAgICAgZm9ybXVsYXMgPSBfcmVmNlsxXTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImlucHV0X3ZhbCIpLmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7CiAgICAgICAgICAgICAgICAgIGZvcm11bGFzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhfViA9IEpTT04ucGFyc2UoZWxlbWVudC5mMSkuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9PSBKU09OLnBhcnNlKGlucHV0LmlkKS5jb2x1bW5JZDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhfViA+IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRzZXQoaW5wdXQsICJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRzZXQoaW5wdXQuc3R5bGUsICJib3JkZXIiLCAibm9uZSIpOwogICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgibm9fZW50ZXJfdmFsdWVfMiIpOwogICAgICAgICAgICAgICAgICAgICAgaW5wdXQuc3R5bGUuZm9udFdlaWdodCA9ICJib2xkIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoSlNPTi5wYXJzZShpbnB1dC5pZCkucm93SWQpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KEpTT04ucGFyc2UoaW5wdXQuaWQpLmNvbHVtbklkKSA9PSBwYXJzZUZsb2F0KGUuY29sdW1uSWQpICYmIHBhcnNlRmxvYXQoSlNPTi5wYXJzZShpbnB1dC5pZCkucm93SWQpID09IHBhcnNlRmxvYXQoZS5yb3dJZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRzZXQoaW5wdXQsICJpbm5lclRleHQiLCBlLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlRmxvYXQoSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQpID09IHBhcnNlRmxvYXQoZS5jb2x1bW5JZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRzZXQoaW5wdXQsICJpbm5lclRleHQiLCBlLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpczUubG9hZGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXMoewogICAgICAgICAgICAgICAgICByZXBvcnQ6IHJlcG9ydCwKICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIF90aGlzNS5sb2FkZXIgPSBmYWxzZTsKICAgICAgICAgIC8vIHRoaXMuY2F0Y2hFcnIoZSk7CiAgICAgICAgICByZWooImVycm9yIik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldENvbHVtbnM6IGZ1bmN0aW9uIHNldENvbHVtbnModikgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdGhpcy5zZWxlY3RlZENvbHVtbnMgPSB2OwogICAgICB0aGlzLmZpcnN0Q29sdW1ucyA9IFtdOwogICAgICB0aGlzLnNlY29uZENvbHVtbnMgPSBbXTsKICAgICAgdGhpcy50aGlyZENvbHVtbnMgPSBbXTsKICAgICAgdi5mb3JFYWNoKGZ1bmN0aW9uIChlbDEpIHsKICAgICAgICBfdGhpczYuZmlyc3RDb2x1bW5zLnB1c2goZWwxKTsKICAgICAgICBlbDEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoZWwyKSB7CiAgICAgICAgICBfdGhpczYuc2Vjb25kQ29sdW1ucy5wdXNoKGVsMik7CiAgICAgICAgICBlbDIuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoZWwzKSB7CiAgICAgICAgICAgIF90aGlzNi50aGlyZENvbHVtbnMucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGVsMyksIHt9LCB7CiAgICAgICAgICAgICAgZklkOiBlbDEuaWQKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyB0aGlzLnRoaXJkVHJJZERhdGEgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UKICAgICAgICAvLyAgIC5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInRoaXJkVHJJZF8yIikpCiAgICAgICAgLy8gICAubWFwKChlKSA9PiB7CiAgICAgICAgLy8gICAgIGxldCBhcnJheSA9IGUuaWQuc3BsaXQoIiwiKTsKICAgICAgICAvLyAgICAgcmV0dXJuIHsKICAgICAgICAvLyAgICAgICBjb2x1bW5JZDogYXJyYXlbMF0sCiAgICAgICAgLy8gICAgICAgdHlwZUNvZGU6IGFycmF5WzFdLAogICAgICAgIC8vICAgICAgIHJvd0lkOiBbXSwKICAgICAgICAvLyAgICAgICB2YWx1ZTogW10sCiAgICAgICAgLy8gICAgIH07CiAgICAgICAgLy8gICB9KTsKICAgICAgICB2YXIgZmlyc3RUclRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZmlyc3RUclRoXzIiKTsKICAgICAgICB2YXIgc2Vjb25kVHJUaCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInNlY29uZFRyVGhfMiIpOwogICAgICAgIHZhciB0aGlyZFRyVGggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ0aGlyZFRyVGhfMiIpOwogICAgICAgIHZhciBjb3VudGVyMiA9IDAsCiAgICAgICAgICBjb3VudGVyMyA9IDA7CiAgICAgICAgZmlyc3RUclRoLmZvckVhY2goZnVuY3Rpb24gKHRoKSB7CiAgICAgICAgICBpZiAodGguY29sU3BhbiA+IDEpIHsKICAgICAgICAgICAgZm9yICh2YXIgaW5kZXgyID0gMDsgaW5kZXgyIDwgdGguY29sU3BhbjsgaW5kZXgyKyspIHsKICAgICAgICAgICAgICBpZiAoc2Vjb25kVHJUaFtjb3VudGVyMl0gJiYgc2Vjb25kVHJUaFtjb3VudGVyMl0uY29sU3BhbiA+IDEpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4MyA9IDA7IGluZGV4MyA8IHNlY29uZFRyVGhbY291bnRlcjJdLmNvbFNwYW47IGluZGV4MysrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHRoaXJkVHJUaFtjb3VudGVyM10uaWQuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IHsKICAgICAgICAgICAgICAgICAgICBjb2x1bW5JZDogYXJyYXlbMF0sCiAgICAgICAgICAgICAgICAgICAgdHlwZUNvZGU6IGFycmF5WzFdLAogICAgICAgICAgICAgICAgICAgIHJvd0lkOiBbXSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW10KICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgX3RoaXM2LnRoaXJkVHJJZERhdGEucHVzaCh0bXApOwogICAgICAgICAgICAgICAgICBjb3VudGVyMysrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY291bnRlcjIrKzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHNlY29uZFRyVGhbY291bnRlcjJdICYmIHNlY29uZFRyVGhbY291bnRlcjJdLmNsYXNzTGlzdC5jb250YWlucygidGhpcmRUcklkXzIiKSkgewogICAgICAgICAgICAgICAgICB2YXIgX2FycmF5ID0gc2Vjb25kVHJUaFtjb3VudGVyMl0uaWQuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgdmFyIF90bXAgPSB7CiAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IF9hcnJheVswXSwKICAgICAgICAgICAgICAgICAgICB0eXBlQ29kZTogX2FycmF5WzFdLAogICAgICAgICAgICAgICAgICAgIHJvd0lkOiBbXSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW10KICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgX3RoaXM2LnRoaXJkVHJJZERhdGEucHVzaChfdG1wKTsKICAgICAgICAgICAgICAgICAgY291bnRlcjIrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRUclRoW2NvdW50ZXIyXSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pbmRleCA9IDA7IF9pbmRleCA8IHNlY29uZFRyVGhbY291bnRlcjJdLmNvbFNwYW47IF9pbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX2FycmF5MiA9IHRoaXJkVHJUaFtjb3VudGVyM10uaWQuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBfdG1wMiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IF9hcnJheTJbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiBfYXJyYXkyWzFdLAogICAgICAgICAgICAgICAgICAgICAgICByb3dJZDogW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXQogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi50aGlyZFRySWREYXRhLnB1c2goX3RtcDIpOwogICAgICAgICAgICAgICAgICAgICAgY291bnRlcjMrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY291bnRlcjIrKzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHRoLmNsYXNzTGlzdC5jb250YWlucygidGhpcmRUcklkXzIiKSkgewogICAgICAgICAgICAgIHZhciBfYXJyYXkzID0gdGguaWQuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICB2YXIgX3RtcDMgPSB7CiAgICAgICAgICAgICAgICBjb2x1bW5JZDogX2FycmF5M1swXSwKICAgICAgICAgICAgICAgIHR5cGVDb2RlOiBfYXJyYXkzWzFdLAogICAgICAgICAgICAgICAgcm93SWQ6IFtdLAogICAgICAgICAgICAgICAgdmFsdWU6IFtdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfdGhpczYudGhpcmRUcklkRGF0YS5wdXNoKF90bXAzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmb3IgKHZhciBfaW5kZXgyID0gMDsgX2luZGV4MiA8IHRoLmNvbFNwYW47IF9pbmRleDIrKykgewogICAgICAgICAgICAgICAgaWYgKHNlY29uZFRyVGhbY291bnRlcjJdLmNvbFNwYW4gPiAxKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pbmRleDMgPSAwOyBfaW5kZXgzIDwgc2Vjb25kVHJUaFtjb3VudGVyMl0uY29sU3BhbjsgX2luZGV4MysrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9hcnJheTQgPSB0aGlyZFRyVGhbY291bnRlcjNdLmlkLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90bXA0ID0gewogICAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IF9hcnJheTRbMF0sCiAgICAgICAgICAgICAgICAgICAgICB0eXBlQ29kZTogX2FycmF5NFsxXSwKICAgICAgICAgICAgICAgICAgICAgIHJvd0lkOiBbXSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LnRoaXJkVHJJZERhdGEucHVzaChfdG1wNCk7CiAgICAgICAgICAgICAgICAgICAgY291bnRlcjMrKzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb3VudGVyMisrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZFRyVGhbY291bnRlcjJdICYmIHNlY29uZFRyVGhbY291bnRlcjJdLmNsYXNzTGlzdC5jb250YWlucygidGhpcmRUcklkXzIiKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBfYXJyYXk1ID0gc2Vjb25kVHJUaFtjb3VudGVyMl0uaWQuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcDUgPSB7CiAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5JZDogX2FycmF5NVswXSwKICAgICAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiBfYXJyYXk1WzFdLAogICAgICAgICAgICAgICAgICAgICAgcm93SWQ6IFtdLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBfdGhpczYudGhpcmRUcklkRGF0YS5wdXNoKF90bXA1KTsKICAgICAgICAgICAgICAgICAgICBjb3VudGVyMisrOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmRUclRoW2NvdW50ZXIyXSkgewogICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2luZGV4NCA9IDA7IF9pbmRleDQgPCBzZWNvbmRUclRoW2NvdW50ZXIyXS5jb2xTcGFuOyBfaW5kZXg0KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hcnJheTYgPSB0aGlyZFRyVGhbY291bnRlcjNdLmlkLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdG1wNiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5JZDogX2FycmF5NlswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlQ29kZTogX2FycmF5NlsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJZDogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNi50aGlyZFRySWREYXRhLnB1c2goX3RtcDYpOwogICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyMysrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgY291bnRlcjIrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwgMzAwKTsKICAgIH0sCiAgICBzZXRSb3c6IGZ1bmN0aW9uIHNldFJvdyh2KSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gdjsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbe31dOwogICAgICB9CiAgICB9LAogICAgcm93c3BhbkZpcnN0OiBmdW5jdGlvbiByb3dzcGFuRmlyc3QoZWwpIHsKICAgICAgcmV0dXJuIGVsLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyAxIDogZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiB0aGlzLnRoaXJkQ29sdW1ucy5sZW5ndGggPiAwID8gMyA6IDM7CiAgICB9LAogICAgY29sc3BhbkZpcnN0OiBmdW5jdGlvbiBjb2xzcGFuRmlyc3QoZWwpIHsKICAgICAgdmFyIGZvdW5kID0gdGhpcy50aGlyZENvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgcmV0dXJuIGkuZklkID09PSBlbC5pZDsKICAgICAgfSk7CiAgICAgIHZhciB0b3RhbE5vdENoaWxkID0gZWwuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4ubGVuZ3RoID09IDA7CiAgICAgIH0pOwogICAgICByZXR1cm4gZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiBmb3VuZC5sZW5ndGggPT0gMCA/IGVsLmNoaWxkcmVuLmxlbmd0aCA6IGVsLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgZm91bmQubGVuZ3RoID4gMCA/IHRvdGFsTm90Q2hpbGQubGVuZ3RoICsgZm91bmQubGVuZ3RoIDogMTsKICAgIH0sCiAgICByb3dzcGFuU2Vjb25kOiBmdW5jdGlvbiByb3dzcGFuU2Vjb25kKGVsKSB7CiAgICAgIHJldHVybiBlbC5jaGlsZHJlbi5sZW5ndGggPT0gMCAmJiB0aGlzLnRoaXJkQ29sdW1ucy5sZW5ndGggPT0gMCA/IDEgOiBlbC5jaGlsZHJlbi5sZW5ndGggPT0gMCAmJiB0aGlzLnRoaXJkQ29sdW1ucy5sZW5ndGggPiAwID8gMiA6IDE7CiAgICB9LAogICAgY29sc3BhblNlY29uZDogZnVuY3Rpb24gY29sc3BhblNlY29uZChlbCkgewogICAgICByZXR1cm4gZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IGVsLmNoaWxkcmVuLmxlbmd0aCA6IDE7CiAgICB9LAogICAgcm93c3BhbkZpcnN0Q2xhc3M6IGZ1bmN0aW9uIHJvd3NwYW5GaXJzdENsYXNzKGVsKSB7CiAgICAgIHJldHVybiBlbC5jaGlsZHJlbi5sZW5ndGggPiAwID8gIiIgOiBlbC5jaGlsZHJlbi5sZW5ndGggPiAwICYmIHRoaXMudGhpcmRDb2x1bW5zLmxlbmd0aCA+IDAgPyAidGhpcmRUcklkXzIiIDogInRoaXJkVHJJZF8yIjsKICAgIH0sCiAgICByb3dzcGFuU2Vjb25kQ2xhc3M6IGZ1bmN0aW9uIHJvd3NwYW5TZWNvbmRDbGFzcyhlbCkgewogICAgICByZXR1cm4gZWwuY2hpbGRyZW4ubGVuZ3RoID09IDAgJiYgdGhpcy50aGlyZENvbHVtbnMubGVuZ3RoID09IDAgPyAidGhpcmRUcklkXzIiIDogZWwuY2hpbGRyZW4ubGVuZ3RoID09IDAgJiYgdGhpcy50aGlyZENvbHVtbnMubGVuZ3RoID4gMCA/ICJ0aGlyZFRySWRfMiIgOiAiIjsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MAEAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACAC;QACA;QACA;QACA;QACA,2CACAC,qFACA;UAFA;UAGAC;QACA;QAEAC;QACAA,qVAiBAD;QACAC;QAEAA;QAEAA;QACAA;;QAEAA;UACAA;UACAA;UACAC;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;QAAAC;MAAA;MACAN;QACA;MACA;MACA;IACA;IACAO;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEAC;MAAA;MACA;QACA;UACAC,4CACAC;YAAA;YACA;YACAC;UACA,GACAC;YAAA;UAAA;QACA;UACAC;QACA;MACA;IACA;IACAC;MACA;QACAL,wBACAC;UAAA;UACA;YACArC;YACAgB;UACA;UACAsB;QACA,GACAC;UAAA;QAAA;MACA;IACA;IACAG;MAAA;MACA;QACApB;QACAqB;QACAC;QACArB;MACA;MACAI;QACA;UACA;YACA,IACAkB,oCACAA,oDACAC,qCACA;cACA;cACAnB;gBACA,IACAkB,2DACA,MACAC,sCACA;kBACA,sCACA;oBACAC;kBACA;gBACA;gBACA;gBACA,gDACA;kBAAA;gBAAA,EACA;gBACA;kBACAzB;kBACAqB;kBACAC;kBACArB;gBACA;cACA;YACA;UACA;QACA;UACA;YACA,IACAsB,oCACAA,kDACA;cACA;cACAlB;gBACA,IACAkB,+DACA;kBACA,sCACA;oBACAE;kBACA;gBACA;gBACA;gBACA,gDACA;kBAAA;gBAAA,EACA;gBACA;kBACAzB;kBACAqB;kBACAC;kBACArB;gBACA;cACA;YACA;UACA;QACA;MACA;MAEA;IACA;IACAyB;MAAA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;QACAZ,yBACAC;UACA;YACA;YACA;YACA;YACAX;cACAuB,aACA,0BACA,uBACA;gBAAA;kBAAA;kBAAAjD;kBAAAgB;kBAAAE;gBACAS,SACAuB,oCACAC;kBACAjC;oBACA,+CACA;sBAAA;oBAAA,EACA;oBACA;sBACA;sBACA;sBACAkC;sBACAA;oBACA;kBACA;kBACApD;oBACA;sBACA,IACAqD,6CACAA,0BACAA,0CACAA,qBACA;wBACA;sBACA;oBACA;sBACA,IACAA,6CACAA,wBACA;wBACA;sBACA;oBACA;kBACA;gBACA;gBAEA;gBACAf;kBAAAtB;kBAAAhB;gBAAA;cACA;YACA;UACA;QACA,GACAuC;UACA;UACA;UACAC;QACA;MACA;IACA;IACAc;MAAA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;QACAlB,sDACAC;UACA;YACA;YACA;YACA;YACAX;cACAuB,aACA,0BACA,uBACA;gBAAA;kBAAA;kBAAAjD;kBAAAgB;kBAAAE;gBACAS,SACAuB,oCACAC;kBACAjC;oBACA,+CACA;sBAAA;oBAAA,EACA;oBACA;sBACA;sBACA;sBACAkC;sBACAA;oBACA;kBACA;kBACApD;oBACA;sBACA,IACAqD,6CACAA,0BACAA,0CACAA,qBACA;wBACA;sBACA;oBACA;sBACA,IACAA,6CACAA,wBACA;wBACA;sBACA;oBACA;kBACA;gBACA;gBAEA;gBACAf;kBAAAtB;kBAAAhB;gBAAA;cACA;YACA;UACA;QACA,GACAuC;UACA;UACA;UACAC;QACA;MACA;IACA;IAEAe;MAAA;MACA;MACA;MACA;MACA;MACAC;QACA;QACAC;UACA;UACAC;YACA;cAAAC;YAAA;UACA;QACA;MACA;MAEAjC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACAkC;QACAC;UACA;YACA;cACA;gBACA,KACA,gBACAC,uCACAA,UACA;kBACA;kBACA;oBACAvC;oBACAqB;oBACAtB;oBACAqB;kBACA;kBAEA;kBACAiB;gBACA;gBACAG;cACA;gBACA,IACAC,wBACAA,wDACA;kBACA;kBACA;oBACAzC;oBACAqB;oBACAtB;oBACAqB;kBACA;kBAEA;kBACAoB;gBACA;kBACA;oBACA,KACA,gBACAD,uCACAA,UACA;sBACA;sBACA;wBACAvC;wBACAqB;wBACAtB;wBACAqB;sBACA;sBAEA;sBACAiB;oBACA;oBAEAG;kBACA;gBACA;cACA;YACA;UACA;YACA;cACA;cACA;gBACAxC;gBACAqB;gBACAtB;gBACAqB;cACA;cAEA;YACA;cACA;gBACA;kBACA,KACA,iBACAmB,wCACAA,WACA;oBACA;oBACA;sBACAvC;sBACAqB;sBACAtB;sBACAqB;oBACA;oBACA;oBACAiB;kBACA;kBACAG;gBACA;kBACA,IACAC,wBACAA,wDACA;oBACA;oBACA;sBACAzC;sBACAqB;sBACAtB;sBACAqB;oBACA;oBAEA;oBACAoB;kBACA;oBACA;sBACA,KACA,iBACAD,wCACAA,WACA;wBACA;wBACA;0BACAvC;0BACAqB;0BACAtB;0BACAqB;wBACA;wBACA;wBACAiB;sBACA;sBACAG;oBACA;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAE;MACA;MACA;QACA;MACA;IACA;IAEAC;MACA,gCACA,IACAC,yDACA,IACA;IACA;IACAC;MACA;QAAA;MAAA;MACA;QAAA;MAAA;MACA,qDACAD,qBACAA,6CACAE,sCACA;IACA;IAEAC;MACA,kEACA,IACAH,0DACA,IACA;IACA;IACAI;MACA;IACA;IAEAC;MACA,gCACA,KACAL,yDACA,gBACA;IACA;IACAM;MACA,kEACA,gBACAN,0DACA,gBACA;IACA;EACA;AACA","names":["data","loaderPrint","loaderExcel","loaderQrcode","f1Ids","f2Ids","fRowId","tableId","reportId","selectedColumns","selectedRows","firstColumns","secondColumns","thirdColumns","thirdTrIdData","loader","report","table","formulas","currentPosition","rowIndex","columnIndex","rowId","columnId","methods","print","setTimeout","document","stylesHtml","mywindow","vm","excelExport","sheet","clearAll","setError","getFormulas_2","Service","then","res","catch","rej","getDataById","setValue","value","typeCode","e","JSON","allVal","getById","Promise","getElementsByClassName","forEach","input","parseFloat","getByWithReportId","setColumns","v","el1","el2","fId","counter3","firstTrTh","index3","counter2","secondTrTh","setRow","rowspanFirst","el","colspanFirst","totalNotChild","rowspanSecond","colspanSecond","rowspanFirstClass","rowspanSecondClass"],"sourceRoot":"src/modules/report/organizitional/components","sources":["gatherViewReport.vue"],"sourcesContent":["<script>\r\nimport Service from \"@/modules/report/reportService\";\r\n// import { getName, dec } from \"@/helper\";\r\nimport XLSX from \"xlsx\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      loaderPrint: false,\r\n      loaderExcel: false,\r\n      loaderQrcode: false,\r\n      f1Ids: [],\r\n      f2Ids: [],\r\n      fRowId: null,\r\n      tableId: null,\r\n      reportId: null,\r\n      // getName: getName,\r\n      selectedColumns: [],\r\n      selectedRows: [],\r\n\r\n      firstColumns: [],\r\n      secondColumns: [],\r\n      thirdColumns: [],\r\n\r\n      thirdTrIdData: [],\r\n      loader: false,\r\n      report: {},\r\n      table: {},\r\n      formulas: [],\r\n      currentPosition: {\r\n        rowIndex: null,\r\n        columnIndex: null,\r\n        rowId: null,\r\n        columnId: null,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    print() {\r\n      this.loaderPrint = true;\r\n      let vm = this;\r\n      setTimeout(() => {\r\n        let mywindow = window.open(\"\", \"PRINT\", \"height=800,width=1000\");\r\n        // Get all stylesheets HTML\r\n        let stylesHtml = \"\";\r\n        for (const node of [\r\n          ...document.querySelectorAll('link[rel=\"stylesheet\"], style'),\r\n        ]) {\r\n          stylesHtml += node.outerHTML;\r\n        }\r\n\r\n        mywindow.document.write(`<html><head> <title>  Report </title>`);\r\n        mywindow.document.write(`</head><body><style>\r\n      @page {\r\n        size: A4 !important;\r\n        margin: 1cm !important;\r\n      }\r\n      table{\r\n          font-size:1.1vw\r\n      }\r\n\r\n\r\n      #none-dsp {\r\n        display:none !important\r\n      }\r\n      #over {\r\n        overflow:visible !important\r\n      }\r\n      </style>\r\n      ${stylesHtml}`);\r\n        mywindow.document.write(document.getElementById(\"printId\").innerHTML);\r\n\r\n        mywindow.document.write(\"</body></html>\");\r\n\r\n        mywindow.document.close(); // necessary for IE >= 10\r\n        mywindow.focus(); // necessary for IE >= 10*/\r\n\r\n        mywindow.onload = function () {\r\n          mywindow.print();\r\n          mywindow.close();\r\n          vm.loaderPrint = false;\r\n        };\r\n        return true;\r\n      }, 300);\r\n    },\r\n    excelExport() {\r\n      this.loaderExcel = true;\r\n      let fileName = `Report`;\r\n      let table = document.getElementById(\"reportTableId\");\r\n      let wb = XLSX.utils.table_to_book(table, { sheet: \"sheet1\" });\r\n      setTimeout(() => {\r\n        this.loaderExcel = false;\r\n      }, 500);\r\n      return XLSX.writeFile(wb, `${fileName}.xlsx`, {});\r\n    },\r\n    clearAll() {\r\n      this.selectedColumns = [];\r\n      this.selectedRows = [];\r\n      this.firstColumns = [];\r\n      this.secondColumns = [];\r\n      this.thirdColumns = [];\r\n      this.thirdTrIdData = [];\r\n      this.formulas = [];\r\n      this.table = [];\r\n      this.f1Ids = [];\r\n      this.f2Ids = [];\r\n    },\r\n    setError(f1, f2, frowId) {\r\n      this.f1Ids = f1;\r\n      this.f2Ids = f2;\r\n      this.fRowId = frowId;\r\n    },\r\n\r\n    getFormulas_2() {\r\n      return new Promise((res, rej) => {\r\n        if (this.tableId) {\r\n          Service.formulasByTableId_2(this.tableId)\r\n            .then(({ data }) => {\r\n              this.formulas = data;\r\n              res(data);\r\n            })\r\n            .catch((e) => rej(e));\r\n        } else {\r\n          rej();\r\n        }\r\n      });\r\n    },\r\n    getDataById(form) {\r\n      return new Promise((res, rej) => {\r\n        Service.getGather(form)\r\n          .then(({ data }) => {\r\n            let resdata = {\r\n              data: data.dataList,\r\n              report: data.reportList,\r\n            };\r\n            res(resdata);\r\n          })\r\n          .catch((e) => rej(e));\r\n      });\r\n    },\r\n    setValue(rowId, value, rowIndex, index, id, typeCode) {\r\n      this.thirdTrIdData[index].value[rowIndex] = {\r\n        rowId: rowId ? rowId : null,\r\n        value: value,\r\n        typeCode: typeCode,\r\n        columnId: id,\r\n      };\r\n      document.getElementsByClassName(\"no_enter_value_2\").forEach((input) => {\r\n        if (JSON.parse(input.id).rowId) {\r\n          this.formulas.forEach((e) => {\r\n            if (\r\n              e.f2.indexOf(id.toString()) > -1 &&\r\n              e.f1.indexOf(JSON.parse(input.id).columnId) > -1 &&\r\n              JSON.parse(input.id).rowId == rowId\r\n            ) {\r\n              let allVal = 0;\r\n              document.getElementsByClassName(\"input_val\").forEach((vInput) => {\r\n                if (\r\n                  e.f2.indexOf(parseFloat(JSON.parse(vInput.id).columnId)) >\r\n                    -1 &&\r\n                  JSON.parse(vInput.id).rowId == rowId\r\n                ) {\r\n                  if (this._empty(vInput.innerText)) {\r\n                  } else {\r\n                    allVal += parseFloat(vInput.innerText);\r\n                  }\r\n                }\r\n                this.$set(input, \"innerText\", parseFloat(allVal));\r\n                let foundIndex = this.thirdTrIdData.findIndex(\r\n                  (e) => e.columnId == JSON.parse(input.id).columnId\r\n                );\r\n                this.thirdTrIdData[foundIndex].value[rowIndex] = {\r\n                  rowId: rowId ? rowId : null,\r\n                  value: allVal,\r\n                  typeCode: typeCode,\r\n                  columnId: JSON.parse(input.id).columnId,\r\n                };\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          this.formulas.forEach((e) => {\r\n            if (\r\n              e.f2.indexOf(id.toString()) > -1 &&\r\n              e.f1.indexOf(JSON.parse(input.id).columnId) > -1\r\n            ) {\r\n              let allVal = 0;\r\n              document.getElementsByClassName(\"input_val\").forEach((vInput) => {\r\n                if (\r\n                  e.f2.indexOf(parseFloat(JSON.parse(vInput.id).columnId)) > -1\r\n                ) {\r\n                  if (this._empty(vInput.innerText)) {\r\n                  } else {\r\n                    allVal += parseFloat(vInput.value);\r\n                  }\r\n                }\r\n                this.$set(input, \"innerText\", parseFloat(allVal));\r\n                let foundIndex = this.thirdTrIdData.findIndex(\r\n                  (e) => e.columnId == JSON.parse(input.id).columnId\r\n                );\r\n                this.thirdTrIdData[foundIndex].value[0] = {\r\n                  rowId: null,\r\n                  value: allVal,\r\n                  typeCode: typeCode,\r\n                  columnId: JSON.parse(input.id).columnId,\r\n                };\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      this.$forceUpdate();\r\n    },\r\n    getById(id, form) {\r\n      this.clearAll();\r\n      this.tableId = id;\r\n      //   this.reportId = reportId;\r\n      this.loader = true;\r\n\r\n      //   Service.reportGetById(reportId).then(({ data }) => {\r\n      //     this.report = data;\r\n      //   });\r\n      return new Promise((res, rej) => {\r\n        Service.getByIdTable(id)\r\n          .then((rs) => {\r\n            if (rs.data) {\r\n              this.setColumns(rs.data.columns);\r\n              this.setRow(rs.data.rows);\r\n              this.table = rs.data.table;\r\n              setTimeout(() => {\r\n                Promise.all([\r\n                  this.getDataById(form),\r\n                  this.getFormulas_2(),\r\n                ]).then(([{ data, report }, formulas]) => {\r\n                  document\r\n                    .getElementsByClassName(\"input_val\")\r\n                    .forEach((input) => {\r\n                      formulas.forEach((element) => {\r\n                        let index_V = JSON.parse(element.f1).findIndex(\r\n                          (e) => e == JSON.parse(input.id).columnId\r\n                        );\r\n                        if (index_V > -1) {\r\n                          // this.$set(input, \"disabled\", true);\r\n                          this.$set(input.style, \"border\", \"none\");\r\n                          input.classList.add(\"no_enter_value_2\");\r\n                          input.style.fontWeight = \"bold\";\r\n                        }\r\n                      });\r\n                      data.forEach((e) => {\r\n                        if (JSON.parse(input.id).rowId) {\r\n                          if (\r\n                            parseFloat(JSON.parse(input.id).columnId) ==\r\n                              parseFloat(e.columnId) &&\r\n                            parseFloat(JSON.parse(input.id).rowId) ==\r\n                              parseFloat(e.rowId)\r\n                          ) {\r\n                            this.$set(input, \"innerText\", e.value);\r\n                          }\r\n                        } else {\r\n                          if (\r\n                            parseFloat(JSON.parse(input.id).columnId) ==\r\n                            parseFloat(e.columnId)\r\n                          ) {\r\n                            this.$set(input, \"innerText\", e.value);\r\n                          }\r\n                        }\r\n                      });\r\n                    });\r\n\r\n                  this.loader = false;\r\n                  res({ report: report, data: data });\r\n                });\r\n              }, 500);\r\n            }\r\n          })\r\n          .catch((e) => {\r\n            this.loader = false;\r\n            // this.catchErr(e);\r\n            rej(\"error\");\r\n          });\r\n      });\r\n    },\r\n    getByWithReportId(id, form) {\r\n      this.clearAll();\r\n      this.tableId = id;\r\n      //   this.reportId = reportId;\r\n      this.loader = true;\r\n\r\n      //   Service.reportGetById(reportId).then(({ data }) => {\r\n      //     this.report = data;\r\n      //   });\r\n      return new Promise((res, rej) => {\r\n        Service.getByIdTableWithReportId(id, form.tableId.id)\r\n            .then((rs) => {\r\n              if (rs.data) {\r\n                this.setColumns(rs.data.columns);\r\n                this.setRow(rs.data.rows);\r\n                this.table = rs.data.table;\r\n                setTimeout(() => {\r\n                  Promise.all([\r\n                    this.getDataById(form),\r\n                    this.getFormulas_2(),\r\n                  ]).then(([{ data, report }, formulas]) => {\r\n                    document\r\n                        .getElementsByClassName(\"input_val\")\r\n                        .forEach((input) => {\r\n                          formulas.forEach((element) => {\r\n                            let index_V = JSON.parse(element.f1).findIndex(\r\n                                (e) => e == JSON.parse(input.id).columnId\r\n                            );\r\n                            if (index_V > -1) {\r\n                              // this.$set(input, \"disabled\", true);\r\n                              this.$set(input.style, \"border\", \"none\");\r\n                              input.classList.add(\"no_enter_value_2\");\r\n                              input.style.fontWeight = \"bold\";\r\n                            }\r\n                          });\r\n                          data.forEach((e) => {\r\n                            if (JSON.parse(input.id).rowId) {\r\n                              if (\r\n                                  parseFloat(JSON.parse(input.id).columnId) ==\r\n                                  parseFloat(e.columnId) &&\r\n                                  parseFloat(JSON.parse(input.id).rowId) ==\r\n                                  parseFloat(e.rowId)\r\n                              ) {\r\n                                this.$set(input, \"innerText\", e.value);\r\n                              }\r\n                            } else {\r\n                              if (\r\n                                  parseFloat(JSON.parse(input.id).columnId) ==\r\n                                  parseFloat(e.columnId)\r\n                              ) {\r\n                                this.$set(input, \"innerText\", e.value);\r\n                              }\r\n                            }\r\n                          });\r\n                        });\r\n\r\n                    this.loader = false;\r\n                    res({ report: report, data: data });\r\n                  });\r\n                }, 500);\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              this.loader = false;\r\n              // this.catchErr(e);\r\n              rej(\"error\");\r\n            });\r\n      });\r\n    },\r\n\r\n    setColumns(v) {\r\n      this.selectedColumns = v;\r\n      this.firstColumns = [];\r\n      this.secondColumns = [];\r\n      this.thirdColumns = [];\r\n      v.forEach((el1) => {\r\n        this.firstColumns.push(el1);\r\n        el1.children.forEach((el2) => {\r\n          this.secondColumns.push(el2);\r\n          el2.children.forEach((el3) => {\r\n            this.thirdColumns.push({ ...el3, fId: el1.id });\r\n          });\r\n        });\r\n      });\r\n\r\n      setTimeout(() => {\r\n        // this.thirdTrIdData = Array.prototype.slice\r\n        //   .call(document.getElementsByClassName(\"thirdTrId_2\"))\r\n        //   .map((e) => {\r\n        //     let array = e.id.split(\",\");\r\n        //     return {\r\n        //       columnId: array[0],\r\n        //       typeCode: array[1],\r\n        //       rowId: [],\r\n        //       value: [],\r\n        //     };\r\n        //   });\r\n        let firstTrTh = document.getElementsByClassName(\"firstTrTh_2\");\r\n        let secondTrTh = document.getElementsByClassName(\"secondTrTh_2\");\r\n        let thirdTrTh = document.getElementsByClassName(\"thirdTrTh_2\");\r\n        let counter2 = 0,\r\n          counter3 = 0;\r\n        firstTrTh.forEach((th) => {\r\n          if (th.colSpan > 1) {\r\n            for (let index2 = 0; index2 < th.colSpan; index2++) {\r\n              if (secondTrTh[counter2] && secondTrTh[counter2].colSpan > 1) {\r\n                for (\r\n                  let index3 = 0;\r\n                  index3 < secondTrTh[counter2].colSpan;\r\n                  index3++\r\n                ) {\r\n                  let array = thirdTrTh[counter3].id.split(\",\");\r\n                  let tmp = {\r\n                    columnId: array[0],\r\n                    typeCode: array[1],\r\n                    rowId: [],\r\n                    value: [],\r\n                  };\r\n\r\n                  this.thirdTrIdData.push(tmp);\r\n                  counter3++;\r\n                }\r\n                counter2++;\r\n              } else {\r\n                if (\r\n                  secondTrTh[counter2] &&\r\n                  secondTrTh[counter2].classList.contains(\"thirdTrId_2\")\r\n                ) {\r\n                  let array = secondTrTh[counter2].id.split(\",\");\r\n                  let tmp = {\r\n                    columnId: array[0],\r\n                    typeCode: array[1],\r\n                    rowId: [],\r\n                    value: [],\r\n                  };\r\n\r\n                  this.thirdTrIdData.push(tmp);\r\n                  counter2++;\r\n                } else {\r\n                  if (secondTrTh[counter2]) {\r\n                    for (\r\n                      let index3 = 0;\r\n                      index3 < secondTrTh[counter2].colSpan;\r\n                      index3++\r\n                    ) {\r\n                      let array = thirdTrTh[counter3].id.split(\",\");\r\n                      let tmp = {\r\n                        columnId: array[0],\r\n                        typeCode: array[1],\r\n                        rowId: [],\r\n                        value: [],\r\n                      };\r\n\r\n                      this.thirdTrIdData.push(tmp);\r\n                      counter3++;\r\n                    }\r\n\r\n                    counter2++;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            if (th.classList.contains(\"thirdTrId_2\")) {\r\n              let array = th.id.split(\",\");\r\n              let tmp = {\r\n                columnId: array[0],\r\n                typeCode: array[1],\r\n                rowId: [],\r\n                value: [],\r\n              };\r\n\r\n              this.thirdTrIdData.push(tmp);\r\n            } else {\r\n              for (let index2 = 0; index2 < th.colSpan; index2++) {\r\n                if (secondTrTh[counter2].colSpan > 1) {\r\n                  for (\r\n                    let index3 = 0;\r\n                    index3 < secondTrTh[counter2].colSpan;\r\n                    index3++\r\n                  ) {\r\n                    let array = thirdTrTh[counter3].id.split(\",\");\r\n                    let tmp = {\r\n                      columnId: array[0],\r\n                      typeCode: array[1],\r\n                      rowId: [],\r\n                      value: [],\r\n                    };\r\n                    this.thirdTrIdData.push(tmp);\r\n                    counter3++;\r\n                  }\r\n                  counter2++;\r\n                } else {\r\n                  if (\r\n                    secondTrTh[counter2] &&\r\n                    secondTrTh[counter2].classList.contains(\"thirdTrId_2\")\r\n                  ) {\r\n                    let array = secondTrTh[counter2].id.split(\",\");\r\n                    let tmp = {\r\n                      columnId: array[0],\r\n                      typeCode: array[1],\r\n                      rowId: [],\r\n                      value: [],\r\n                    };\r\n\r\n                    this.thirdTrIdData.push(tmp);\r\n                    counter2++;\r\n                  } else {\r\n                    if (secondTrTh[counter2]) {\r\n                      for (\r\n                        let index3 = 0;\r\n                        index3 < secondTrTh[counter2].colSpan;\r\n                        index3++\r\n                      ) {\r\n                        let array = thirdTrTh[counter3].id.split(\",\");\r\n                        let tmp = {\r\n                          columnId: array[0],\r\n                          typeCode: array[1],\r\n                          rowId: [],\r\n                          value: [],\r\n                        };\r\n                        this.thirdTrIdData.push(tmp);\r\n                        counter3++;\r\n                      }\r\n                      counter2++;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }, 300);\r\n    },\r\n    setRow(v) {\r\n      this.selectedRows = v;\r\n      if (this.selectedRows.length == 0) {\r\n        this.selectedRows = [{}];\r\n      }\r\n    },\r\n\r\n    rowspanFirst(el) {\r\n      return el.children.length > 0\r\n        ? 1\r\n        : el.children.length > 0 && this.thirdColumns.length > 0\r\n        ? 3\r\n        : 3;\r\n    },\r\n    colspanFirst(el) {\r\n      let found = this.thirdColumns.filter((i) => i.fId === el.id);\r\n      let totalNotChild = el.children.filter((d) => d.children.length == 0);\r\n      return el.children.length > 0 && found.length == 0\r\n        ? el.children.length\r\n        : el.children.length > 0 && found.length > 0\r\n        ? totalNotChild.length + found.length\r\n        : 1;\r\n    },\r\n\r\n    rowspanSecond(el) {\r\n      return el.children.length == 0 && this.thirdColumns.length == 0\r\n        ? 1\r\n        : el.children.length == 0 && this.thirdColumns.length > 0\r\n        ? 2\r\n        : 1;\r\n    },\r\n    colspanSecond(el) {\r\n      return el.children.length > 0 ? el.children.length : 1;\r\n    },\r\n\r\n    rowspanFirstClass(el) {\r\n      return el.children.length > 0\r\n        ? \"\"\r\n        : el.children.length > 0 && this.thirdColumns.length > 0\r\n        ? \"thirdTrId_2\"\r\n        : \"thirdTrId_2\";\r\n    },\r\n    rowspanSecondClass(el) {\r\n      return el.children.length == 0 && this.thirdColumns.length == 0\r\n        ? \"thirdTrId_2\"\r\n        : el.children.length == 0 && this.thirdColumns.length > 0\r\n        ? \"thirdTrId_2\"\r\n        : \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div id=\"printId\">\r\n    <div>\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-12\">\r\n          <h5 class=\"text-center mb-1\">\r\n            <strong>\r\n              {{ getName({ nameLt: table.titleLt, nameRu: table.titleRu, nameUz: table.titleUz }) }}\r\n            </strong>\r\n          </h5>\r\n          <p class=\"text-center m-0\">\r\n            {{\r\n              getName({\r\n                nameLt: table.conditionLt,\r\n                nameRu: table.conditionRu,\r\n                nameUz: table.conditionUz,\r\n              })\r\n            }}\r\n          </p>\r\n        </div>\r\n        <div class=\"col-lg-12\">\r\n          <div class=\"float-left pl-3\">\r\n            <b-button-group id=\"none-dsp\">\r\n              <b-button @click=\"excelExport\" variant=\"success\">\r\n                <b-overlay :show=\"loaderExcel\" opacity=\"0.1\" rounded=\"sm\">\r\n                  {{ $t(\"actions.excel\") }}\r\n                </b-overlay>\r\n              </b-button>\r\n              <b-button\r\n                :disabled=\"loaderPrint\"\r\n                @click=\"print\"\r\n                variant=\"primary\"\r\n              >\r\n                <b-overlay :show=\"loaderPrint\" opacity=\"0.1\" rounded=\"sm\">\r\n                  {{ $t(\"actions.print\") }}\r\n                </b-overlay>\r\n              </b-button>\r\n            </b-button-group>\r\n          </div>\r\n          <div class=\"pr-3 float-right\">\r\n            <strong>\r\n              {{ getName({ nameLt: table.nameLt, nameRu: table.nameRu, nameUz: table.nameUz }) }}\r\n            </strong>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-lg-12\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"loader\" rounded=\"sm\">\r\n            <div class=\"bg-white pl-3 pr-3 pt-1\" style=\"min-height: 60vh\">\r\n              <div id=\"over\" style=\"overflow: auto\" class=\"pb-5\">\r\n                <table\r\n                  id=\"reportTableId\"\r\n                  class=\"\r\n                    table table-centered table-nowrap table-custom-bordered\r\n                  \"\r\n                >\r\n                  <thead>\r\n                    <tr class=\"tr-text-center\">\r\n                      <th\r\n                        :id=\"[el.id, el.typeCode]\"\r\n                        :class=\"rowspanFirstClass(el, index)\"\r\n                        class=\"firstTrTh_2\"\r\n                        style=\"width: 3%\"\r\n                        :rowspan=\"rowspanFirst(el)\"\r\n                        :colspan=\"colspanFirst(el)\"\r\n                        v-for=\"(el, index) in firstColumns\"\r\n                        :key=\"index + 'first'\"\r\n                      >\r\n                        <div\r\n                            style=\"\r\n                        max-height: 200px;\r\n                          display: inline-block;\r\n                        \"\r\n                        >\r\n                          <div\r\n                            v-b-tooltip=\"{ variant: 'success' }\"\r\n                            :title=\"\r\n                              getName({ nameLt: el.nameLt, nameRu: el.nameRu, nameUz: el.nameUz })\r\n                            \"\r\n                            :class=\"\r\n                        (el.isVertical == 1 )\r\n                        ? 'rotate_text'\r\n                        : ''\r\n                        \"\r\n                          >\r\n                            {{\r\n                              getName({ nameLt: el.nameLt, nameRu: el.nameRu, nameUz: el.nameUz })\r\n                            }}\r\n                          </div>\r\n                        </div>\r\n                      </th>\r\n                    </tr>\r\n                    <tr class=\"tr-text-center\">\r\n                      <th\r\n                        style=\"width: 3%\"\r\n                        :id=\"[el.id, el.typeCode]\"\r\n                        :class=\"rowspanSecondClass(el)\"\r\n                        class=\"secondTrTh_2\"\r\n                        :rowspan=\"rowspanSecond(el)\"\r\n                        :colspan=\"colspanSecond(el)\"\r\n                        v-for=\"(el, index) in secondColumns\"\r\n                        :key=\"index + 'second'\"\r\n                      >\r\n                        <div\r\n                          style=\"\r\n                           max-height: 200px;\r\n                            position: relative;\r\n                            display: inline-block;\r\n                            cursor: pointer;\r\n                          \"\r\n                        >\r\n                          <div\r\n                            v-b-tooltip=\"{ variant: 'success' }\"\r\n                            :title=\"\r\n                              getName({ nameLt: el.nameLt, nameRu: el.nameRu, nameUz: el.nameUz })\r\n                            \"\r\n                            :class=\"(el.isVertical == 1 )  ? 'rotate_text' : ''\"\r\n                          >\r\n                            {{\r\n                              getName({ nameLt: el.nameLt, nameRu: el.nameRu, nameUz: el.nameUz })\r\n                            }}\r\n                          </div>\r\n                        </div>\r\n                      </th>\r\n                    </tr>\r\n\r\n                    <tr class=\"tr-text-center\">\r\n                      <th\r\n                        style=\"width: 3%\"\r\n                        :id=\"[el.id, el.typeCode]\"\r\n                        class=\"thirdTrId_2 thirdTrTh_2\"\r\n                        :colspan=\"\r\n                          el.children.length > 0 ? el.children.length : 1\r\n                        \"\r\n                        v-for=\"(el, index) in thirdColumns\"\r\n                        :key=\"index + 'third'\"\r\n                      >\r\n                        <div\r\n                          v-b-tooltip=\"{ variant: 'success' }\"\r\n                          :title=\"\r\n                            getName({ nameLt: el.nameLt, nameRu: el.nameRu, nameUz: el.nameUz })\r\n                          \"\r\n                          style=\"\r\n                            max-height: 200px;\r\n                            position: relative;\r\n                            display: inline-block;\r\n                            cursor: pointer;\r\n                          \"\r\n\r\n                        >\r\n                          <div :class=\"(el.isVertical == 1 )  ? 'rotate_text' : ''\">\r\n                            {{\r\n                              getName({ nameLt: el.nameLt, nameRu: el.nameRu, nameUz: el.nameUz })\r\n                            }}\r\n                          </div>\r\n                        </div>\r\n                      </th>\r\n                    </tr>\r\n\r\n                    <tr class=\"tr-text-center\">\r\n                      <td\r\n                        v-for=\"(item, index) of thirdTrIdData\"\r\n                        :key=\"index + 'I-1'\"\r\n                      >\r\n                        <strong v-if=\"selectedRows.length > 1\">\r\n                          {{\r\n                            selectedRows.length > 1 && index == 0 ? \"\" : index\r\n                          }}</strong\r\n                        >\r\n\r\n                        <strong v-else>\r\n                          {{ index + 1 }}\r\n                        </strong>\r\n                      </td>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr\r\n                      v-for=\"(data, index1) in selectedRows\"\r\n                      :key=\"index1 + 'MM'\"\r\n                    >\r\n                      <!-- <th>\r\n                        {{ getName({ ...data }) }}\r\n                      </th> -->\r\n\r\n                      <td\r\n                        :class=\"[\r\n                          f1Ids &&\r\n                          f1Ids.indexOf(i.columnId) > -1 &&\r\n                          selectedRows.length > 1 &&\r\n                          fRowId == data.id\r\n                            ? 'bg-success'\r\n                            : f1Ids &&\r\n                              f1Ids.indexOf(i.columnId) > -1 &&\r\n                              selectedRows.length <= 1\r\n                            ? 'bg-success'\r\n                            : '',\r\n                          f2Ids &&\r\n                          f2Ids.indexOf(i.columnId) > -1 &&\r\n                          length > 1 &&\r\n                          fRowId == data.id\r\n                            ? 'bg-primary'\r\n                            : f2Ids &&\r\n                              f2Ids.indexOf(i.columnId) > -1 &&\r\n                              selectedRows.length <= 1\r\n                            ? 'bg-primary'\r\n                            : '',\r\n                        ]\"\r\n                        v-for=\"(i, index) in thirdTrIdData\"\r\n                        :key=\"index + 'td'\"\r\n                        class=\"text-center p\"\r\n                      >\r\n                        <p class=\"m-0 p-2\" v-if=\"data.id && index == 0\">\r\n                          {{ getName(data) }}\r\n                        </p>\r\n\r\n                        <!-- FOR INTEGER -->\r\n\r\n                        <p\r\n                          style=\"min-height: 35px; line-height: 35px\"\r\n                          v-else\r\n                          :id=\"\r\n                            JSON.stringify({\r\n                              rowId: data.id,\r\n                              columnId: i.columnId,\r\n                            })\r\n                          \"\r\n                          class=\"m-0 input_val text-center\"\r\n                        >\r\n                          <!-- <b-form-input\r\n                            :disabled=\"true\"\r\n                            style=\"border: none !important'\r\n                            \"\r\n                            :id=\"\r\n                              JSON.stringify({\r\n                                rowId: data.id,\r\n                                columnId: i.columnId,\r\n                              })\r\n                            \"\r\n                            type=\"number\"\r\n                            class=\"text-center input_val border-none p-0\"\r\n                          >\r\n                          </b-form-input> -->\r\n                        </p>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </b-overlay>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"scss\">\r\n.borderInput {\r\n  border: 2px solid green !important;\r\n}\r\n.check {\r\n  margin-top: 5px;\r\n  .m-chckbox--container {\r\n    margin: 0px !important;\r\n    width: 22px !important;\r\n  }\r\n  label {\r\n    margin: 0;\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.border-none {\r\n  border: 1px solid transparent !important;\r\n}\r\n/* Chrome, Safari, Edge, Opera */\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n\r\n/* Firefox */\r\ninput[type=\"number\"] {\r\n  -moz-appearance: textfield;\r\n}\r\n.rotate_text {\r\n  height: 100%;\r\n  word-break: normal;\r\n  writing-mode: vertical-rl;\r\n  -webkit-writing-mode: vertical-lr;\r\n  -ms-writing-mode: vertical-lr;\r\n  -webkit-transform: rotate(-180deg);\r\n  -moz-transform: rotate(-180deg);\r\n  -o-transform: rotate(-180deg);\r\n  transform: rotate(-180deg);\r\n  padding-bottom: 20px !important;\r\n  padding-top: 20px !important;\r\n}\r\n.no_enter_value_2 {\r\n  padding: 0px !important;\r\n  min-width: auto !important;\r\n}\r\n.no-border-table {\r\n  th,\r\n  td {\r\n    border: none !important;\r\n  }\r\n}\r\n</style>\r\n"]}]}