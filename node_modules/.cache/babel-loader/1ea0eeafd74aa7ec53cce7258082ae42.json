{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\pharm\\work\\files1.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\pharm\\work\\files1.vue","mtime":1683000471108},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHBoYXJtU2VydmljZSBmcm9tICIuLi9waGFybVNlcnZpY2UiOwppbXBvcnQgc2ltcGxlYmFyIGZyb20gInNpbXBsZWJhci12dWUiOwppbXBvcnQgeyBnZXRGaWxlU2l6ZSwgcmVwbGFjZURhdGUsIHNob3dNc2dTdWNjZXNzIH0gZnJvbSAiQC9oZWxwZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHByb2plY3Q6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFyYW1zOiB7CiAgICAgICAgcGFnZTogMCwKICAgICAgICBpdGVtc1BlclBhZ2U6IDUwMAogICAgICB9LAogICAgICBrZXl3b3JkOiAnJywKICAgICAgZmlsZXM6IFtdLAogICAgICBmaWxlUGFnZTogMCwKICAgICAgZ2V0RmlsZVNpemU6IGdldEZpbGVTaXplLAogICAgICBmaWxlVXBsb2FkUGF0aDogbnVsbCwKICAgICAgdmlld0ZpbGVNb2RhbDogZmFsc2UsCiAgICAgIHJlcGxhY2VEYXRlOiByZXBsYWNlRGF0ZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHNpbXBsZWJhcjogc2ltcGxlYmFyCiAgfSwKICBjb21wdXRlZDogewogICAgZ2V0QmFzZVVybDogZnVuY3Rpb24gZ2V0QmFzZVVybCgpIHsKICAgICAgcmV0dXJuIHByb2Nlc3MuZW52LlZVRV9BUFBfUk9PVF9VUkw7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5saXN0RmlsZXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEZpbGVEb2M6IGZ1bmN0aW9uIGdldEZpbGVEb2MoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHBoYXJtU2VydmljZS5kb3dubG9hZEZpbGVEb2MoJ1RFTVBMQVRFJywgdHJ1ZSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBjb25zb2xlLmxvZyhycyk7CiAgICAgICAgX3RoaXMucHJvaiA9IHJzLmRhdGE7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCiAgICB2aWV3RmlsZTogZnVuY3Rpb24gdmlld0ZpbGUodXBsb2FkUGF0aCkgewogICAgICBpZiAodGhpcy5nZXRFeHQodXBsb2FkUGF0aCkgPT09ICJwZGYiKSB7CiAgICAgICAgdGhpcy5maWxlVXBsb2FkUGF0aCA9IHVwbG9hZFBhdGg7CiAgICAgICAgdGhpcy52aWV3RmlsZU1vZGFsID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIHNhdmVGaWxlOiBmdW5jdGlvbiBzYXZlRmlsZShtc2csIGZpbGUpIHsKICAgICAgdGhpcy5sZWF2ZUZpbGUobXNnLCBmaWxlKTsKICAgIH0sCiAgICBjbGlja1VwbG9hZDogZnVuY3Rpb24gY2xpY2tVcGxvYWQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZmlsZS51cGxkKCk7CiAgICB9LAogICAgbGVhdmVGaWxlOiBmdW5jdGlvbiBsZWF2ZUZpbGUobXNnLCBjbXQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgICBpZiAoaWQpIHsKICAgICAgICBwaGFybVNlcnZpY2UubGVhdmVGaWxlKGlkLCBtc2csIGNtdCwgJ0ZBSVJURUNIJykudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgIF90aGlzMi5maWxlID0gbnVsbDsKICAgICAgICAgIHNob3dNc2dTdWNjZXNzKHJzLmRhdGEpOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi5saXN0RmlsZXMoKTsKICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgX3RoaXMyLmNhdGNoRXJyKGVycik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgfQogICAgfSwKICAgIGxpc3RGaWxlczogZnVuY3Rpb24gbGlzdEZpbGVzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICAgIGlmIChpZCkgewogICAgICAgIHBoYXJtU2VydmljZS5saXN0RmlsZXMoaWQsICcnLCAnRkFJUlRFQ0gnLCB0aGlzLnBhcmFtcykudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgIF90aGlzMy5maWxlcyA9IHJzLmRhdGEubGlzdDsKICAgICAgICAgIF90aGlzMy5oYW5kbGVTY3JvbGwoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgfQogICAgfSwKICAgIGxvYWRNb3JlRmlsZXM6IGZ1bmN0aW9uIGxvYWRNb3JlRmlsZXMocGFnZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICAgIGlmIChpZCkgewogICAgICAgIHBoYXJtU2VydmljZS5saXN0RmlsZXMoaWQsIHsKICAgICAgICAgIHBhZ2U6IHBhZ2UsCiAgICAgICAgICBpdGVtc1BlclBhZ2U6IDIwCiAgICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmKSB7CiAgICAgICAgICAgIHZhciBkYXRhOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgICAgICAgICAgICBpZiAoZGF0YS5saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmlsZXMgPSBfdGhpczQuZmlsZXMuY29uY2F0KGRhdGEubGlzdCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmZpbGVQYWdlICsgLTE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgIH0oKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNjcm9sbDogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgaWYgKHRoaXMuJHJlZnMuZmlsZXNSZWYuJGVsKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczUuJHJlZnMuZmlsZXNSZWYuU2ltcGxlQmFyLmdldFNjcm9sbEVsZW1lbnQoKS5zY3JvbGxUb3AgPSAwOwogICAgICAgIH0sIDUwMCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgIHZhciBjb250YWluZXIzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2ZpbGUtbGlzdCAuc2ltcGxlYmFyLWNvbnRlbnQtd3JhcHBlciIpOwogICAgaWYgKGNvbnRhaW5lcjMpIHsKICAgICAgY29udGFpbmVyMy5zY3JvbGxUbyh7CiAgICAgICAgdG9wOiA1MDAsCiAgICAgICAgYmVoYXZpb3I6ICJzbW9vdGgiCiAgICAgIH0pOwogICAgfQogICAgLy8gQ29udGFjdCBsaXN0IGFjdGlvbnMKICAgIHRoaXMuJHJlZnMuZmlsZXNSZWYuU2ltcGxlQmFyLmdldFNjcm9sbEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgX2V2ZW50JHRhcmdldCA9IGV2ZW50LnRhcmdldCwKICAgICAgICBzY3JvbGxUb3AgPSBfZXZlbnQkdGFyZ2V0LnNjcm9sbFRvcCwKICAgICAgICBzY3JvbGxIZWlnaHQgPSBfZXZlbnQkdGFyZ2V0LnNjcm9sbEhlaWdodCwKICAgICAgICBjbGllbnRIZWlnaHQgPSBfZXZlbnQkdGFyZ2V0LmNsaWVudEhlaWdodDsKICAgICAgdmFyIG9mZnNldEZvclRyaWdnZXIgPSAxOwogICAgICBpZiAoc2Nyb2xsSGVpZ2h0IC0gY2xpZW50SGVpZ2h0IC0gb2Zmc2V0Rm9yVHJpZ2dlciA8IHNjcm9sbFRvcCkgewogICAgICAgIF90aGlzNi5sb2FkTW9yZUZpbGVzKF90aGlzNi5maWxlUGFnZSArPSAxKTsKICAgICAgfQogICAgfSk7CiAgfQp9Ow=="},{"version":3,"mappings":";;;AAsJA;AACA;AACA;AAEA;EACAA;IACAC;MACAC;MACAC,8BACA;IACA;EACA;EACAC;IACA;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACAC,aACAC,kCACAC;QACAC;QACA;MACA,GACAC,mBACA;IACA;IACAC;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAR,aACAQ,oCACAN;UACA;UACAO;UACAC;YACA;UACA;QACA,GACAN;UACA;QACA;MACA;QACA;MACA;IACA;IACAO;MAAA;MACA;MACA;QACAX,aACAW,2CACAT;UACA;UACA;QACA,GACAE;UACA;QAAA,CACA;MACA;QACA;MACA;IACA;IACAQ;MAAA;MACA;MACA;QACAZ,aACAW;UACA3B;UACAC;QACA,GACAiB;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAApB;kBACA;oBACA;kBACA;oBACA;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CACA;UAAA;YAAA;UAAA;QAAA;MACA;QACA;MACA;IACA;IACA+B;MAAA;MACA;QACAH;UACA;QACA;MACA;IACA;EACA;EACAI;IAAA;IACA;IACA;MACAC;QAAAC;QAAAC;MAAA;IACA;IACA;IACA;MACA;QAAAC;QAAAC;QAAAC;MACA;MACA;QACA;MACA;IACA;EACA;AACA","names":["props","project","type","default","data","params","page","itemsPerPage","keyword","files","filePage","getFileSize","fileUploadPath","viewFileModal","replaceDate","components","simplebar","computed","getBaseUrl","created","methods","getFileDoc","pharmService","downloadFileDoc","then","console","catch","viewFile","saveFile","clickUpload","leaveFile","showMsgSuccess","setTimeout","listFiles","loadMoreFiles","handleScroll","mounted","container3","top","behavior","scrollTop","scrollHeight","clientHeight"],"sourceRoot":"src/modules/pharm/work","sources":["files1.vue"],"sourcesContent":["<template>\r\n    <div class=\"card\">\r\n        <div class=\"card-body\">\r\n            <b-row>\r\n                <b-col cols=\"6\">\r\n                    <h4 class=\"card-title mb-4\">{{ $t(\"pharm.files_ijro\") }}</h4>\r\n                </b-col>\r\n                <b-col cols=\"6\">\r\n                    <!--                    <b-button class=\"float-right\" variant=\"success\" @click=\"getFileDoc\"-->\r\n                    <!--                    >-->\r\n                    <!--                        <i class=\"fa fa-download\"></i>-->\r\n                    <!--                        {{ $t(\"pharm.template\") }}-->\r\n                    <!--                    </b-button>-->\r\n\r\n                    <!--                    <a style=\"border: 1px solid #d2d0d0; border-radius: 3px; background: #bbecf5\"-->\r\n                    <!--                       :download=\"$t('pharm.template')\" :href=\"`${getBaseUrl}${project.templatePath}`\"-->\r\n                    <!--                       class=\"text-dark p-2 float-right\">-->\r\n                    <!--                        <i class=\"bx bx-download\"></i>-->\r\n                    <!--                        {{ $t(\"pharm.template\") }}-->\r\n                    <!--                    </a>-->\r\n                    <b-button id=\"button-1\" variant=\"outline-success\">{{$t('pharm.templates')}}</b-button>\r\n                    <!-- Tooltip title specified via prop title -->\r\n                    <b-tooltip variant=\"success\" placement=\"topright\" target=\"button-1\">\r\n                        <a class=\"text-dark p-2 mt-1 float-right\"\r\n                           style=\"width:100%; border: 1px solid #34C38F; border-radius: 3px; background: #bbecf5\"\r\n                           :download=\"getExt(project.templatePath) === 'pdf' ? false : project.templatePath\"\r\n                           :href=\"getExt(project.templatePath) === 'pdf' ? `#` : `${baseUrl}/${project.templatePath}`\"\r\n                           @click=\"viewFile(project.templatePath)\"\r\n                        >\r\n                            <i class=\"bx bx-download\"></i>\r\n<!--                            {{ $t(\"pharm.template\") }} -->\r\n                            {{$t('pharm.request_application')}}\r\n                        </a>\r\n                        <a class=\"text-dark p-2  mt-1 float-right\"\r\n                           style=\"width:100%;border: 1px solid #34C38F; border-radius: 3px; background: #bbecf5\"\r\n                           :download=\"getExt(project.templatePath) === 'pdf' ? false : project.templatePath\"\r\n                           :href=\"getExt(project.templatePath) === 'pdf' ? `#` : `${baseUrl}/${project.templatePath}`\"\r\n                           @click=\"viewFile(project.templatePath)\"\r\n                        >\r\n                            <i class=\"bx bx-download\"></i>\r\n                            <!--                            {{ $t(\"pharm.template\") }} -->\r\n                            {{$t('pharm.notification')}}\r\n                        </a>\r\n                        <a class=\"text-dark p-2 mt-1 float-right\"\r\n                           style=\"width:100%;border: 1px solid #34C38F; border-radius: 3px; background: #bbecf5\"\r\n                           :download=\"getExt(project.templatePath) === 'pdf' ? false : project.templatePath\"\r\n                           :href=\"getExt(project.templatePath) === 'pdf' ? `#` : `${baseUrl}/${project.templatePath}`\"\r\n                           @click=\"viewFile(project.templatePath)\"\r\n                        >\r\n                            <i class=\"bx bx-download\"></i>\r\n                            <!--                            {{ $t(\"pharm.template\") }} -->\r\n                            {{$t('pharm.act')}}\r\n                        </a>\r\n                        <a class=\"text-dark p-2 mt-1 float-right\"\r\n                           style=\"width:100%;border: 1px solid #34C38F; border-radius: 3px; background: #bbecf5\"\r\n                           :download=\"getExt(project.templatePath) === 'pdf' ? false : project.templatePath\"\r\n                           :href=\"getExt(project.templatePath) === 'pdf' ? `#` : `${baseUrl}/${project.templatePath}`\"\r\n                           @click=\"viewFile(project.templatePath)\"\r\n                        >\r\n                            <i class=\"bx bx-download\"></i>\r\n                            <!--                            {{ $t(\"pharm.template\") }} -->\r\n                            {{$t('pharm.referral_court')}}\r\n                        </a>\r\n                    </b-tooltip>\r\n\r\n                    <!--                    <a class=\"text-dark p-2 float-right\"-->\r\n                    <!--                       style=\"border: 1px solid #d2d0d0; border-radius: 3px; background: #bbecf5\"-->\r\n                    <!--                       :download=\"getExt(project.templatePath) === 'pdf' ? false : project.templatePath\"-->\r\n                    <!--                       :href=\"getExt(project.templatePath) === 'pdf' ? `#` : `${baseUrl}/${project.templatePath}`\"-->\r\n                    <!--                       @click=\"viewFile(project.templatePath)\"-->\r\n                    <!--                    >-->\r\n                    <!--                        <i class=\"bx bx-download\"></i>-->\r\n                    <!--                        {{ $t(\"pharm.template\") }} </a>-->\r\n                </b-col>\r\n            </b-row>\r\n            <simplebar id=\"file-list\" ref=\"filesRef\" style=\"height: 384px\">\r\n                <div class=\"table-responsive mb-0\">\r\n                    <table class=\"table table-centered table-hover\" style=\"table-layout: fixed; width: 100%\">\r\n                        <tbody>\r\n                        <tr v-for=\"(file, index) in files\" :key=\"index\">\r\n                            <td style=\"width: 53px\">\r\n                                <div>\r\n                                    <a\r\n                                            :download=\"getExt(file.uploadPath) === 'pdf' ? false : file.uploadPath\"\r\n                                            :href=\"getExt(file.uploadPath) === 'pdf' ? `#` : `${baseUrl}/${file.uploadPath}`\"\r\n                                            @click=\"viewFile(file.uploadPath)\"\r\n                                    >\r\n                                        <FileView :uploadPath=\"file.uploadPath\" class=\"my-card-hovered\"/>\r\n                                        <small class=\"text-center\">{{ getFileSize(parseFloat(file.fileSize)) }}</small>\r\n                                    </a>\r\n                                </div>\r\n                            </td>\r\n                            <td style=\"width: 60%\">\r\n                                <h5 class=\"font-size-14 m-0\">\r\n                                    <p class=\"text-dark m-0\">{{ file.fileName }}</p>\r\n                                </h5>\r\n                                <p class=\"text-muted mb-0 font-size-10\">\r\n                                    <i class=\"bx bx-calendar mr-1 text-primary\"></i>\r\n                                    {{\r\n                                    replaceDate(file.createdDate) ? replaceDate(file.createdDate).daym_shortyyyy_hm() : ''\r\n                                    }}\r\n                                </p>\r\n                                <small class=\"d-block text-muted\">\r\n                                    {{\r\n                                    `${file.ownerLastName} ${file.ownerFirstName} ${file.ownerParentName ? file.ownerParentName : ''}`\r\n                                    }}\r\n                                </small>\r\n                                <small class=\"d-block\">\r\n                                    {{ file.comment }}\r\n                                </small>\r\n                            </td>\r\n                            <td style=\"width: 45px\">\r\n                                <div class=\"text-center\">\r\n                                    <a :download=\"`${file.fileName}`\" :href=\"`${baseUrl}/${file.uploadPath}`\"\r\n                                       class=\"text-dark\">\r\n                                        <i class=\"bx bx-download h3 m-0\"></i>\r\n                                    </a>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </simplebar>\r\n        </div>\r\n        <b-modal v-model=\"viewFileModal\" :title=\"$t('actions.view')\" scrollable size=\"xl\">\r\n            <div v-if=\"fileUploadPath\" style=\"height: 700px\">\r\n                <embed :src=\"`${baseUrl}/${fileUploadPath}`\" height=\"800\" type=\"application/pdf\" width=\"100%\"/>\r\n            </div>\r\n            <template v-slot:modal-footer>\r\n                <b-button variant=\"secondary\" @click=\"viewFileModal = false\">\r\n                    {{ $t(\"actions.close\") }}\r\n                </b-button>\r\n            </template>\r\n        </b-modal>\r\n        <div v-if=\"project.status !== 'FINISHED'\" class=\"p-3\">\r\n            <form>\r\n                <div>\r\n                    <b-button block variant=\"primary\" @click.prevent=\"clickUpload\">\r\n                        <i class=\"mdi mdi-upload d-block font-size-16\"></i>\r\n                        {{ $t(\"actions.upload\") }}\r\n                    </b-button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n        <upload-file ref=\"file\" :cmt=\"true\" @sendFile=\"saveFile\"/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport pharmService from \"../pharmService\";\r\nimport simplebar from \"simplebar-vue\";\r\nimport {getFileSize, replaceDate, showMsgSuccess} from \"@/helper\";\r\n\r\nexport default {\r\n    props: {\r\n        project: {\r\n            type: Object,\r\n            default: () => {\r\n            },\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            params: {\r\n                page: 0,\r\n                itemsPerPage: 500,\r\n            },\r\n            keyword: '',\r\n            files: [],\r\n            filePage: 0,\r\n            getFileSize: getFileSize,\r\n            fileUploadPath: null,\r\n            viewFileModal: false,\r\n            replaceDate: replaceDate\r\n        };\r\n    },\r\n    components: {\r\n        simplebar,\r\n    },\r\n    computed: {\r\n        getBaseUrl() {\r\n            return process.env.VUE_APP_ROOT_URL;\r\n        },\r\n    },\r\n    created() {\r\n        this.listFiles();\r\n    },\r\n    methods: {\r\n        getFileDoc() {\r\n            pharmService\r\n                .downloadFileDoc('TEMPLATE', true)\r\n                .then((rs) => {\r\n                    console.log(rs)\r\n                    this.proj = rs.data;\r\n                })\r\n                .catch(() => {\r\n                });\r\n        },\r\n        viewFile(uploadPath) {\r\n            if (this.getExt(uploadPath) === \"pdf\") {\r\n                this.fileUploadPath = uploadPath;\r\n                this.viewFileModal = true;\r\n            }\r\n        },\r\n        saveFile(msg, file) {\r\n            this.leaveFile(msg, file);\r\n        },\r\n        clickUpload() {\r\n            this.$refs.file.upld();\r\n        },\r\n        leaveFile(msg, cmt) {\r\n            let id = this.$route.query.id;\r\n            if (id) {\r\n                pharmService\r\n                    .leaveFile(id, msg, cmt, 'FAIRTECH')\r\n                    .then((rs) => {\r\n                        this.file = null;\r\n                        showMsgSuccess(rs.data);\r\n                        setTimeout(() => {\r\n                            this.listFiles();\r\n                        }, 300);\r\n                    })\r\n                    .catch((err) => {\r\n                        this.catchErr(err);\r\n                    });\r\n            } else {\r\n                this.$router.go(-1);\r\n            }\r\n        },\r\n        listFiles() {\r\n            let id = this.$route.query.id;\r\n            if (id) {\r\n                pharmService\r\n                    .listFiles(id, '', 'FAIRTECH', this.params)\r\n                    .then((rs) => {\r\n                        this.files = rs.data.list;\r\n                        this.handleScroll();\r\n                    })\r\n                    .catch((err) => {\r\n                        // this.catchErr(err);\r\n                    });\r\n            } else {\r\n                this.$router.go(-1);\r\n            }\r\n        },\r\n        loadMoreFiles(page) {\r\n            let id = this.$route.query.id;\r\n            if (id) {\r\n                pharmService\r\n                    .listFiles(id, {\r\n                        page: page,\r\n                        itemsPerPage: 20,\r\n                    })\r\n                    .then(async ({data}) => {\r\n                        if (data.list.length > 0) {\r\n                            this.files = this.files.concat(data.list);\r\n                        } else {\r\n                            this.filePage + -1;\r\n                        }\r\n                    });\r\n            } else {\r\n                this.$router.go(-1);\r\n            }\r\n        },\r\n        handleScroll() {\r\n            if (this.$refs.filesRef.$el) {\r\n                setTimeout(() => {\r\n                    this.$refs.filesRef.SimpleBar.getScrollElement().scrollTop = 0;\r\n                }, 500);\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        let container3 = document.querySelector(\"#file-list .simplebar-content-wrapper\");\r\n        if (container3) {\r\n            container3.scrollTo({top: 500, behavior: \"smooth\"});\r\n        }\r\n        // Contact list actions\r\n        this.$refs.filesRef.SimpleBar.getScrollElement().addEventListener(\"scroll\", (e) => {\r\n            let {scrollTop, scrollHeight, clientHeight} = event.target;\r\n            const offsetForTrigger = 1;\r\n            if (scrollHeight - clientHeight - offsetForTrigger < scrollTop) {\r\n                this.loadMoreFiles((this.filePage += 1));\r\n            }\r\n        });\r\n    },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}