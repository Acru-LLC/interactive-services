{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\services\\auth.service.js","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\services\\auth.service.js","mtime":1667352074584},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1667355397815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXEFDUlUgUFJPSkVDVFxcRmFpciBUZWNoXFxhY3J1LWZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXEFDUlUgUFJPSkVDVFxcRmFpciBUZWNoXFxhY3J1LWZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQzpcXEFDUlUgUFJPSkVDVFxcRmFpciBUZWNoXFxhY3J1LWZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxpbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiQzpcXEFDUlUgUFJPSkVDVFxcRmFpciBUZWNoXFxhY3J1LWZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVTdXBlci5qcyI7CmltcG9ydCBfd3JhcE5hdGl2ZVN1cGVyIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcd3JhcE5hdGl2ZVN1cGVyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UtYWxsLmpzIjsKaW1wb3J0IEFwaVNlcnZpY2UgZnJvbSAnLi9hcGkuc2VydmljZSc7CmltcG9ydCB7IFRva2VuU2VydmljZSB9IGZyb20gJy4vc3RvcmFnZS5zZXJ2aWNlJzsKdmFyIFJFR19NQUlOX0FQSV9VUkwgPSAncmVnaXN0cmF0aW9uJzsKdmFyIFVTRVJfTUFJTl9BUElfVVJMID0gJ3VzZXInOwoKdmFyIEF1dGhlbnRpY2F0aW9uRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FcnJvcikgewogIF9pbmhlcml0cyhBdXRoZW50aWNhdGlvbkVycm9yLCBfRXJyb3IpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEF1dGhlbnRpY2F0aW9uRXJyb3IpOwoKICBmdW5jdGlvbiBBdXRoZW50aWNhdGlvbkVycm9yKGVycm9yQ29kZSwgbWVzc2FnZSkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoZW50aWNhdGlvbkVycm9yKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpOwogICAgX3RoaXMubmFtZSA9IF90aGlzLmNvbnN0cnVjdG9yLm5hbWU7CiAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKICAgIF90aGlzLmVycm9yQ29kZSA9IGVycm9yQ29kZTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIHJldHVybiBfY3JlYXRlQ2xhc3MoQXV0aGVudGljYXRpb25FcnJvcik7Cn0oIC8qI19fUFVSRV9fKi9fd3JhcE5hdGl2ZVN1cGVyKEVycm9yKSk7Cgp2YXIgQXV0aFNlcnZpY2UgPSB7CiAgc2lnbnVwOiBmdW5jdGlvbiBzaWdudXAocGF5bG9hZCkgewogICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQoUkVHX01BSU5fQVBJX1VSTCwgIi9maW5pc2giKSwgcGF5bG9hZCk7CiAgfSwKICBjb25maXJtUGhvbmU6IGZ1bmN0aW9uIGNvbmZpcm1QaG9uZShwYXlsb2FkKSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChSRUdfTUFJTl9BUElfVVJMLCAiL2NvbmZpcm1hdGlvbi9waG9uZS1jb25maXJtZWQ/dWlkPSIpLmNvbmNhdChwYXlsb2FkLnVzZXIuaW5uLCAiJnRva2VuPSIpLmNvbmNhdChwYXlsb2FkLnZlcmlmeUNvZGUsICImdXNlcm5hbWU9IikuY29uY2F0KHBheWxvYWQudXNlci51c2VybmFtZSkpOwogIH0sCiAgY29uZmlybU1haWw6IGZ1bmN0aW9uIGNvbmZpcm1NYWlsKHBheWxvYWQpIHsKICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KFJFR19NQUlOX0FQSV9VUkwsICIvY29uZmlybWF0aW9uL21haWwtY29uZmlybWVkP3VpZD0iKS5jb25jYXQocGF5bG9hZC5pbm4sICImdG9rZW49IikuY29uY2F0KHBheWxvYWQudG9rZW4sICImdXNlcm5hbWU9IikuY29uY2F0KHBheWxvYWQudXNlcm5hbWUpKTsKICB9LAogIHNlbmRWZXJpZnlDb2RlVG9NYWlsOiBmdW5jdGlvbiBzZW5kVmVyaWZ5Q29kZVRvTWFpbChwYXlsb2FkKSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChSRUdfTUFJTl9BUElfVVJMLCAiL3NlbmQvY29uZmlybWF0aW9uL2NvZGUvdG8tY29uZmlybWF0aW9uIiksIHBheWxvYWQpOwogIH0sCiAgc2VuZFZlcmlmeUNvZGU6IGZ1bmN0aW9uIHNlbmRWZXJpZnlDb2RlKHBheWxvYWQpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgIHZhciBwYXlsb2FkVGVtcCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpOwogICAgcGF5bG9hZFRlbXAudXNlci5waG9uZU51bWJlciA9IHBheWxvYWRUZW1wLnVzZXIucGhvbmVOdW1iZXIucmVwbGFjZUFsbCgnLScsICcnKTsKICAgIHBheWxvYWRUZW1wLnVzZXIucGhvbmVOdW1iZXIgPSBwYXlsb2FkVGVtcC51c2VyLnBob25lTnVtYmVyLnJlcGxhY2VBbGwoJysnLCAnJyk7CiAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChSRUdfTUFJTl9BUElfVVJMLCAiL3NlbmQvY29uZmlybWF0aW9uL2NvZGUvdG8tY29uZmlybWF0aW9uP3VpZD0iKS5jb25jYXQocGF5bG9hZFRlbXAudXNlci5pbm4pLCBwYXlsb2FkVGVtcCwgd2l0aExvYWRlcik7CiAgICAvKnJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7DQogICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCk7DQogICAgfSk7Ki8KICB9LAogIGNoZWNrTm9Vc2VybmFtZTogZnVuY3Rpb24gY2hlY2tOb1VzZXJuYW1lKHVzZXJuYW1lKSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5nZXQoIiIuY29uY2F0KFVTRVJfTUFJTl9BUElfVVJMLCAiL2NoZWNrL25vLXVzZXJuYW1lP3VzZXJuYW1lPSIpLmNvbmNhdCh1c2VybmFtZSkpOwogIH0sCiAgaXNPcmdSZWdpc3RlcmVkOiBmdW5jdGlvbiBpc09yZ1JlZ2lzdGVyZWQodGluLCB1aWQsIHBvc2l0aW9uKSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5nZXQoIiIuY29uY2F0KFJFR19NQUlOX0FQSV9VUkwsICIvY2hlY2staW5uP3Rpbj0iKS5jb25jYXQodGluLCAiJnVpZD0iKS5jb25jYXQodWlkLCAiJnBvc2l0aW9uPSIpLmNvbmNhdChwb3NpdGlvbikpOwogIH0sCiAgZ2V0S2V5Rm9yTG9naW5TaWduOiBmdW5jdGlvbiBnZXRLZXlGb3JMb2dpblNpZ24oaW5uLCBlbXBsb3llZVRpbiwgcGluZmwpIHsKICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldCgia2V5LWZvci1sb2dpbi1zaWduP0lOTj0iLmNvbmNhdChpbm4sICImVElOPSIpLmNvbmNhdChlbXBsb3llZVRpbiwgIiZQTkZMPSIpLmNvbmNhdChwaW5mbCkpOwogIH0sCgogIC8qKg0KICAgKiBMb2dpbiB0aGUgdXNlciBhbmQgc3RvcmUgdGhlIGFjY2VzcyB0b2tlbiB0byBUb2tlblNlcnZpY2UuDQogICAqDQogICAqIEByZXR1cm5zIGFjY2Vzc190b2tlbg0KICAgKiBAdGhyb3dzIEF1dGhlbnRpY2F0aW9uRXJyb3INCiAgICoqLwogIGxvZ2luOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2xvZ2luID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVzZXJuYW1lLCBwYXNzd29yZCkgewogICAgICB2YXIgcmVzcG9uc2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCdhdXRoLXBheWxvYWQnLCB7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgICAgICAgICB9LCB0cnVlKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgVG9rZW5TZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICBUb2tlblNlcnZpY2Uuc2V0VXNlckF2YXRhclVybChyZXNwb25zZS5kYXRhLnVwbG9hZFBhdGgpOwogICAgICAgICAgICAgIFRva2VuU2VydmljZS5zYXZlUmVmcmVzaFRva2VuKHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgIFRva2VuU2VydmljZS5zZXRVc2VySW5mbyh7CiAgICAgICAgICAgICAgICBpZDogcmVzcG9uc2UuZGF0YS5pZCwKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgZW1wbG95ZWVJZDogcmVzcG9uc2UuZGF0YS5lbXBsb3llZUlkLAogICAgICAgICAgICAgICAgc2V0dGluZ3M6IHJlc3BvbnNlLmRhdGEudXNlclNldHRpbmdzLAogICAgICAgICAgICAgICAgZW1wbG95ZWVGdWxsTmFtZTogcmVzcG9uc2UuZGF0YS5lbXBsb3llZUZpcnN0TmFtZSArICcgJyArIHJlc3BvbnNlLmRhdGEuZW1wbG95ZWVMYXN0TmFtZSArICcgJyArIChyZXNwb25zZS5kYXRhLmVtcGxveWVlTWlkZGxlTmFtZSA/IHJlc3BvbnNlLmRhdGEuZW1wbG95ZWVNaWRkbGVOYW1lIDogJycpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgVG9rZW5TZXJ2aWNlLnNldFVzZXJJZChyZXNwb25zZS5kYXRhLmlkKTsKICAgICAgICAgICAgICBUb2tlblNlcnZpY2Uuc2V0SXNPdXRlcihyZXNwb25zZS5kYXRhLmlzT3V0ZXIpOwogICAgICAgICAgICAgIEFwaVNlcnZpY2Uuc2V0SGVhZGVyKCk7IC8vIEFwaVNlcnZpY2UubW91bnQ0MDFJbnRlcmNlcHRvcigpOwoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoX2NvbnRleHQudDAucmVzcG9uc2Uuc3RhdHVzLCBfY29udGV4dC50MC5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAxNF1dKTsKICAgIH0pKTsKCiAgICBmdW5jdGlvbiBsb2dpbihfeCwgX3gyKSB7CiAgICAgIHJldHVybiBfbG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gbG9naW47CiAgfSgpLAogIGxvZ2luRXNwOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2xvZ2luRXNwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihzaWduZWREYXRhLCBUSU4sIFBORkwpIHsKICAgICAgdmFyIHJlcXVlc3REYXRhLCByZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZXF1ZXN0RGF0YSA9IHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgdXJsOiAnL2F1dGgtcGF5bG9hZCcsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgIHNpZ25lZERhdGE6IHNpZ25lZERhdGEsCiAgICAgICAgICAgICAgICAgIFRJTjogVElOLAogICAgICAgICAgICAgICAgICB0aW46IFRJTiwKICAgICAgICAgICAgICAgICAgUE5GTDogUE5GTAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbmZpZzogewogICAgICAgICAgICAgICAgICB3aXRoTG9hZGVyOiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLmN1c3RvbVJlcXVlc3QocmVxdWVzdERhdGEpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgVG9rZW5TZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICBUb2tlblNlcnZpY2Uuc2V0VXNlckF2YXRhclVybChyZXNwb25zZS5kYXRhLnVwbG9hZFBhdGgpOwogICAgICAgICAgICAgIFRva2VuU2VydmljZS5zYXZlUmVmcmVzaFRva2VuKHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgIFRva2VuU2VydmljZS5zZXRVc2VySW5mbyh7CiAgICAgICAgICAgICAgICBpZDogcmVzcG9uc2UuZGF0YS5pZCwKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgZW1wbG95ZWVJZDogcmVzcG9uc2UuZGF0YS5lbXBsb3llZUlkLAogICAgICAgICAgICAgICAgc2V0dGluZ3M6IHJlc3BvbnNlLmRhdGEudXNlclNldHRpbmdzLAogICAgICAgICAgICAgICAgZW1wbG95ZWVGdWxsTmFtZTogcmVzcG9uc2UuZGF0YS5lbXBsb3llZUZpcnN0TmFtZSArICcgJyArIHJlc3BvbnNlLmRhdGEuZW1wbG95ZWVMYXN0TmFtZSArICcgJyArIChyZXNwb25zZS5kYXRhLmVtcGxveWVlTWlkZGxlTmFtZSA/IHJlc3BvbnNlLmRhdGEuZW1wbG95ZWVNaWRkbGVOYW1lIDogJycpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgVG9rZW5TZXJ2aWNlLnNldFVzZXJJZChyZXNwb25zZS5kYXRhLmlkKTsKICAgICAgICAgICAgICBUb2tlblNlcnZpY2Uuc2V0SXNPdXRlcihyZXNwb25zZS5kYXRhLmlzT3V0ZXIpOwogICAgICAgICAgICAgIEFwaVNlcnZpY2Uuc2V0SGVhZGVyKCk7IC8vIEFwaVNlcnZpY2UubW91bnQ0MDFJbnRlcmNlcHRvcigpOwoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTU7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKF9jb250ZXh0Mi50MC5yZXNwb25zZS5zdGF0dXMsIF9jb250ZXh0Mi50MC5yZXNwb25zZS5kYXRhLmRldGFpbCk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgMTVdXSk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gbG9naW5Fc3AoX3gzLCBfeDQsIF94NSkgewogICAgICByZXR1cm4gX2xvZ2luRXNwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIGxvZ2luRXNwOwogIH0oKSwKCiAgLyoqDQogICAqIFJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbi4NCiAgICoqLwogIHJlZnJlc2hUb2tlbjogZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWZyZXNoVG9rZW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICB2YXIgcmVmcmVzaFRva2VuLCByZXF1ZXN0RGF0YSwgcmVzcG9uc2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmVmcmVzaFRva2VuID0gVG9rZW5TZXJ2aWNlLmdldFJlZnJlc2hUb2tlbigpOwogICAgICAgICAgICAgIHJlcXVlc3REYXRhID0gewogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICB1cmw6ICIvby90b2tlbi8iLAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICBncmFudF90eXBlOiAncmVmcmVzaF90b2tlbicsCiAgICAgICAgICAgICAgICAgIHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlbgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJRU5UX0lELAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElFTlRfU0VDUkVUCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY29uZmlnOiB7CiAgICAgICAgICAgICAgICAgIHdpdGhMb2FkZXI6IHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMjsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuY3VzdG9tUmVxdWVzdChyZXF1ZXN0RGF0YSk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBUb2tlblNlcnZpY2Uuc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VuKTsKICAgICAgICAgICAgICBUb2tlblNlcnZpY2Uuc2V0VXNlckF2YXRhclVybChyZXNwb25zZS5kYXRhLnVwbG9hZFBhdGgpOwogICAgICAgICAgICAgIFRva2VuU2VydmljZS5zYXZlUmVmcmVzaFRva2VuKHJlc3BvbnNlLmRhdGEucmVmcmVzaF90b2tlbik7IC8vIFVwZGF0ZSB0aGUgaGVhZGVyIGluIEFwaVNlcnZpY2UKCiAgICAgICAgICAgICAgQXBpU2VydmljZS5zZXRIZWFkZXIoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDEzOwogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgyKTsKICAgICAgICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihfY29udGV4dDMudDAucmVzcG9uc2Uuc3RhdHVzLCBfY29udGV4dDMudDAucmVzcG9uc2UuZGF0YS5kZXRhaWwpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzIsIDEzXV0pOwogICAgfSkpOwoKICAgIGZ1bmN0aW9uIHJlZnJlc2hUb2tlbigpIHsKICAgICAgcmV0dXJuIF9yZWZyZXNoVG9rZW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gcmVmcmVzaFRva2VuOwogIH0oKSwKCiAgLyoqDQogICAqIExvZ291dCB0aGUgY3VycmVudCB1c2VyIGJ5IHJlbW92aW5nIHRoZSB0b2tlbiBmcm9tIHN0b3JhZ2UuDQogICAqDQogICAqIFdpbGwgYWxzbyByZW1vdmUgYEF1dGhvcml6YXRpb24gQmVhcmVyIDx0b2tlbj5gIGhlYWRlciBmcm9tIGZ1dHVyZSByZXF1ZXN0cy4NCiAgICoqLwogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgLy8gUmVtb3ZlIHRoZSB0b2tlbiBhbmQgcmVtb3ZlIEF1dGhvcml6YXRpb24gaGVhZGVyIGZyb20gQXBpIFNlcnZpY2UgYXMgd2VsbAogICAgVG9rZW5TZXJ2aWNlLnJlbW92ZVRva2VuKCk7CiAgICBUb2tlblNlcnZpY2UucmVtb3ZlVXNlckF2YXRhclVybCgpOyAvLyBUb2tlblNlcnZpY2UucmVtb3ZlTG9jYWxlKCk7CgogICAgVG9rZW5TZXJ2aWNlLnJlbW92ZVJlZnJlc2hUb2tlbigpOwogICAgVG9rZW5TZXJ2aWNlLnJlbW92ZVNpZGViYXIoKTsgLy9Ub2tlblNlcnZpY2UucmVtb3ZlTWVudU1pbmltaXplKCk7CgogICAgQXBpU2VydmljZS5yZW1vdmVIZWFkZXIoKTsKICAgIFRva2VuU2VydmljZS5yZW1vdmVVc2VySW5mbygpOwogICAgVG9rZW5TZXJ2aWNlLnJlbW92ZVVzZXJJZCgpOwogICAgVG9rZW5TZXJ2aWNlLnJlbW92ZUlzT3V0ZXIoKTsKICAgIEFwaVNlcnZpY2UudW5tb3VudDQwMUludGVyY2VwdG9yKCk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBBdXRoU2VydmljZTsKZXhwb3J0IHsgQXV0aFNlcnZpY2UsIEF1dGhlbnRpY2F0aW9uRXJyb3IgfTs="},{"version":3,"sources":["C:/ACRU PROJECT/Fair Tech/acru-frontend/src/shared/services/auth.service.js"],"names":["ApiService","TokenService","REG_MAIN_API_URL","USER_MAIN_API_URL","AuthenticationError","errorCode","message","name","constructor","Error","AuthService","signup","payload","post","confirmPhone","user","inn","verifyCode","username","confirmMail","token","sendVerifyCodeToMail","sendVerifyCode","withLoader","payloadTemp","JSON","parse","stringify","phoneNumber","replaceAll","checkNoUsername","get","isOrgRegistered","tin","uid","position","getKeyForLoginSign","employeeTin","pinfl","login","password","response","saveToken","data","setUserAvatarUrl","uploadPath","saveRefreshToken","setUserInfo","id","employeeId","settings","userSettings","employeeFullName","employeeFirstName","employeeLastName","employeeMiddleName","setUserId","setIsOuter","isOuter","setHeader","status","loginEsp","signedData","TIN","PNFL","requestData","method","url","config","customRequest","detail","refreshToken","getRefreshToken","grant_type","refresh_token","auth","process","env","VUE_APP_CLIENT_ID","VUE_APP_CLIENT_SECRET","access_token","logout","removeToken","removeUserAvatarUrl","removeRefreshToken","removeSidebar","removeHeader","removeUserInfo","removeUserId","removeIsOuter","unmount401Interceptor"],"mappings":"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","sourcesContent":["import ApiService from './api.service'\r\nimport { TokenService } from './storage.service'\r\n\r\nconst REG_MAIN_API_URL = 'registration'\r\nconst USER_MAIN_API_URL = 'user'\r\n\r\nclass AuthenticationError extends Error {\r\n    constructor(errorCode, message) {\r\n        super(message)\r\n        this.name = this.constructor.name\r\n        this.message = message\r\n        this.errorCode = errorCode\r\n    }\r\n}\r\n\r\nconst AuthService = {\r\n    signup (payload) {\r\n        return ApiService.post(`${REG_MAIN_API_URL}/finish`, payload)\r\n    },\r\n\r\n    confirmPhone (payload) {\r\n        return ApiService.post(`${REG_MAIN_API_URL}/confirmation/phone-confirmed?uid=${payload.user.inn}&token=${payload.verifyCode}&username=${payload.user.username}`)\r\n    },\r\n\r\n    confirmMail (payload) {\r\n        return ApiService.post(`${REG_MAIN_API_URL}/confirmation/mail-confirmed?uid=${payload.inn}&token=${payload.token}&username=${payload.username}`)\r\n    },\r\n\r\n    sendVerifyCodeToMail (payload) {\r\n        return ApiService.post(`${REG_MAIN_API_URL}/send/confirmation/code/to-confirmation`, payload)\r\n    },\r\n\r\n    sendVerifyCode (payload, withLoader = false) {\r\n        let payloadTemp = JSON.parse(JSON.stringify(payload))\r\n        payloadTemp.user.phoneNumber = payloadTemp.user.phoneNumber.replaceAll('-', '')\r\n        payloadTemp.user.phoneNumber = payloadTemp.user.phoneNumber.replaceAll('+', '')\r\n        return ApiService.post(`${REG_MAIN_API_URL}/send/confirmation/code/to-confirmation?uid=${payloadTemp.user.inn}`, payloadTemp, withLoader)\r\n        /*return new Promise(function(resolve) {\r\n            setTimeout(resolve, 1000);\r\n        });*/\r\n    },\r\n\r\n    checkNoUsername (username) {\r\n        return ApiService.get(`${USER_MAIN_API_URL}/check/no-username?username=${username}`)\r\n    },\r\n\r\n    isOrgRegistered (tin, uid, position) {\r\n        return ApiService.get(`${REG_MAIN_API_URL}/check-inn?tin=${tin}&uid=${uid}&position=${position}`)\r\n    },\r\n\r\n    getKeyForLoginSign (inn, employeeTin, pinfl) {\r\n        return ApiService.get(`key-for-login-sign?INN=${inn}&TIN=${employeeTin}&PNFL=${pinfl}`)\r\n    },\r\n    /**\r\n     * Login the user and store the access token to TokenService.\r\n     *\r\n     * @returns access_token\r\n     * @throws AuthenticationError\r\n     **/\r\n    login: async function (username, password) {\r\n        try {\r\n            const response = await ApiService.post('auth-payload', { username: username, password: password }, true)\r\n            TokenService.saveToken(response.data.token)\r\n            TokenService.setUserAvatarUrl(response.data.uploadPath)\r\n            TokenService.saveRefreshToken(response.data.token);\r\n            TokenService.setUserInfo({\r\n                id: response.data.id,\r\n                username: response.data.username,\r\n                employeeId: response.data.employeeId,\r\n                settings: response.data.userSettings,\r\n                employeeFullName: response.data.employeeFirstName + ' ' + response.data.employeeLastName + ' ' + (response.data.employeeMiddleName ? response.data.employeeMiddleName : '')\r\n            })\r\n            TokenService.setUserId(response.data.id);\r\n            TokenService.setIsOuter(response.data.isOuter);\r\n            ApiService.setHeader();\r\n            // ApiService.mount401Interceptor();\r\n            return response.data;\r\n        } catch (error) {\r\n            throw new AuthenticationError(error.response.status, error.response.data.message)\r\n        }\r\n    },\r\n    loginEsp: async function (signedData, TIN, PNFL) {\r\n        const requestData = {\r\n            method: 'post',\r\n            url: '/auth-payload',\r\n            data: {\r\n                signedData: signedData,\r\n                TIN: TIN,\r\n                tin: TIN,\r\n                PNFL: PNFL\r\n            },\r\n            config: {\r\n                withLoader: true\r\n            }\r\n        };\r\n\r\n        try {\r\n            const response = await ApiService.customRequest(requestData)\r\n            TokenService.saveToken(response.data.token)\r\n            TokenService.setUserAvatarUrl(response.data.uploadPath)\r\n            TokenService.saveRefreshToken(response.data.token);\r\n            TokenService.setUserInfo({\r\n                id: response.data.id,\r\n                username: response.data.username,\r\n                employeeId: response.data.employeeId,\r\n                settings: response.data.userSettings,\r\n                employeeFullName: response.data.employeeFirstName + ' ' + response.data.employeeLastName + ' ' + (response.data.employeeMiddleName ? response.data.employeeMiddleName : '')\r\n            })\r\n            TokenService.setUserId(response.data.id);\r\n            TokenService.setIsOuter(response.data.isOuter);\r\n            ApiService.setHeader();\r\n            // ApiService.mount401Interceptor();\r\n            return response.data;\r\n        } catch (error) {\r\n            throw new AuthenticationError(error.response.status, error.response.data.detail)\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Refresh the access token.\r\n     **/\r\n    refreshToken: async function () {\r\n        const refreshToken = TokenService.getRefreshToken()\r\n\r\n        const requestData = {\r\n            method: 'post',\r\n            url: \"/o/token/\",\r\n            data: {\r\n                grant_type: 'refresh_token',\r\n                refresh_token: refreshToken\r\n            },\r\n            auth: {\r\n                username: process.env.VUE_APP_CLIENT_ID,\r\n                password: process.env.VUE_APP_CLIENT_SECRET\r\n            },\r\n            config: {\r\n                withLoader: true\r\n            }\r\n        }\r\n\r\n        try {\r\n            const response = await ApiService.customRequest(requestData)\r\n\r\n            TokenService.saveToken(response.data.access_token)\r\n            TokenService.setUserAvatarUrl(response.data.uploadPath)\r\n            TokenService.saveRefreshToken(response.data.refresh_token)\r\n            // Update the header in ApiService\r\n            ApiService.setHeader()\r\n\r\n            return response.data.access_token\r\n        } catch (error) {\r\n            throw new AuthenticationError(error.response.status, error.response.data.detail)\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Logout the current user by removing the token from storage.\r\n     *\r\n     * Will also remove `Authorization Bearer <token>` header from future requests.\r\n     **/\r\n    logout () {\r\n        // Remove the token and remove Authorization header from Api Service as well\r\n        TokenService.removeToken();\r\n        TokenService.removeUserAvatarUrl();\r\n        // TokenService.removeLocale();\r\n        TokenService.removeRefreshToken();\r\n        TokenService.removeSidebar();\r\n        //TokenService.removeMenuMinimize();\r\n        ApiService.removeHeader();\r\n        TokenService.removeUserInfo();\r\n        TokenService.removeUserId();\r\n        TokenService.removeIsOuter();\r\n\r\n        ApiService.unmount401Interceptor()\r\n    }\r\n}\r\n\r\nexport default AuthService\r\n\r\nexport { AuthService, AuthenticationError }\r\n"]}]}