{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\modules\\projects\\files.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\modules\\projects\\files.vue","mtime":1674799497713},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcb2hpcmdpXFxhY3J1LWZyb250ZW5kXFxhY3J1LWZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgcHJvamVjdFNlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvcHJvamVjdFNlcnZpY2UiOwppbXBvcnQgc2ltcGxlYmFyIGZyb20gInNpbXBsZWJhci12dWUiOwppbXBvcnQgeyBnZXRGaWxlU2l6ZSwgcmVwbGFjZURhdGUgfSBmcm9tICJAL2hlbHBlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgcHJvamVjdDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkge30KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYXJhbXM6IHsKICAgICAgICBwYWdlOiAwLAogICAgICAgIGl0ZW1zUGVyUGFnZTogMjAKICAgICAgfSwKICAgICAgZmlsZXM6IFtdLAogICAgICBmaWxlUGFnZTogMCwKICAgICAgZ2V0RmlsZVNpemU6IGdldEZpbGVTaXplLAogICAgICBmaWxlVXBsb2FkUGF0aDogbnVsbCwKICAgICAgdmlld0ZpbGVNb2RhbDogZmFsc2UsCiAgICAgIHJlcGxhY2VEYXRlOiByZXBsYWNlRGF0ZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHNpbXBsZWJhcjogc2ltcGxlYmFyCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5saXN0RmlsZXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHZpZXdGaWxlOiBmdW5jdGlvbiB2aWV3RmlsZSh1cGxvYWRQYXRoKSB7CiAgICAgIGlmICh0aGlzLmdldEV4dCh1cGxvYWRQYXRoKSA9PT0gInBkZiIpIHsKICAgICAgICB0aGlzLmZpbGVVcGxvYWRQYXRoID0gdXBsb2FkUGF0aDsKICAgICAgICB0aGlzLnZpZXdGaWxlTW9kYWwgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgc2F2ZUZpbGU6IGZ1bmN0aW9uIHNhdmVGaWxlKG1zZywgZmlsZSkgewogICAgICB0aGlzLmxlYXZlRmlsZShtc2csIGZpbGUpOwogICAgfSwKICAgIGNsaWNrVXBsb2FkOiBmdW5jdGlvbiBjbGlja1VwbG9hZCgpIHsKICAgICAgdGhpcy4kcmVmcy5maWxlLnVwbGQoKTsKICAgIH0sCiAgICBsZWF2ZUZpbGU6IGZ1bmN0aW9uIGxlYXZlRmlsZShtc2csIGNtdCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CgogICAgICBpZiAoaWQpIHsKICAgICAgICBwcm9qZWN0U2VydmljZS5sZWF2ZUZpbGUoaWQsIG1zZywgY210KS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgICAgX3RoaXMuZmlsZSA9IG51bGw7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMubGlzdEZpbGVzKCk7CiAgICAgICAgICB9LCAzMDApOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgfQogICAgfSwKICAgIGxpc3RGaWxlczogZnVuY3Rpb24gbGlzdEZpbGVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwoKICAgICAgaWYgKGlkKSB7CiAgICAgICAgcHJvamVjdFNlcnZpY2UubGlzdEZpbGVzKGlkLCB0aGlzLnBhcmFtcykudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgIF90aGlzMi5maWxlcyA9IHJzLmRhdGEubGlzdDsKCiAgICAgICAgICBfdGhpczIuaGFuZGxlU2Nyb2xsKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgey8vIHRoaXMuY2F0Y2hFcnIoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICB9CiAgICB9LAogICAgbG9hZE1vcmVGaWxlczogZnVuY3Rpb24gbG9hZE1vcmVGaWxlcyhwYWdlKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CgogICAgICBpZiAoaWQpIHsKICAgICAgICBwcm9qZWN0U2VydmljZS5saXN0RmlsZXMoaWQsIHsKICAgICAgICAgIHBhZ2U6IHBhZ2UsCiAgICAgICAgICBpdGVtc1BlclBhZ2U6IDIwCiAgICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmKSB7CiAgICAgICAgICAgIHZhciBkYXRhOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IF9yZWYuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZmlsZXMgPSBfdGhpczMuZmlsZXMuY29uY2F0KGRhdGEubGlzdCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5maWxlUGFnZSArIC0xOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH07CiAgICAgICAgfSgpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlU2Nyb2xsOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuJHJlZnMuZmlsZXNSZWYuJGVsKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczQuJHJlZnMuZmlsZXNSZWYuU2ltcGxlQmFyLmdldFNjcm9sbEVsZW1lbnQoKS5zY3JvbGxUb3AgPSAwOwogICAgICAgIH0sIDUwMCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICB2YXIgY29udGFpbmVyMyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNmaWxlLWxpc3QgLnNpbXBsZWJhci1jb250ZW50LXdyYXBwZXIiKTsKCiAgICBpZiAoY29udGFpbmVyMykgewogICAgICBjb250YWluZXIzLnNjcm9sbFRvKHsKICAgICAgICB0b3A6IDUwMCwKICAgICAgICBiZWhhdmlvcjogInNtb290aCIKICAgICAgfSk7CiAgICB9IC8vIENvbnRhY3QgbGlzdCBhY3Rpb25zCgoKICAgIHRoaXMuJHJlZnMuZmlsZXNSZWYuU2ltcGxlQmFyLmdldFNjcm9sbEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgX2V2ZW50JHRhcmdldCA9IGV2ZW50LnRhcmdldCwKICAgICAgICAgIHNjcm9sbFRvcCA9IF9ldmVudCR0YXJnZXQuc2Nyb2xsVG9wLAogICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gX2V2ZW50JHRhcmdldC5zY3JvbGxIZWlnaHQsCiAgICAgICAgICBjbGllbnRIZWlnaHQgPSBfZXZlbnQkdGFyZ2V0LmNsaWVudEhlaWdodDsKICAgICAgdmFyIG9mZnNldEZvclRyaWdnZXIgPSAxOwoKICAgICAgaWYgKHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCAtIG9mZnNldEZvclRyaWdnZXIgPCBzY3JvbGxUb3ApIHsKICAgICAgICBfdGhpczUubG9hZE1vcmVGaWxlcyhfdGhpczUuZmlsZVBhZ2UgKz0gMSk7CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["files.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-body\">\r\n      <h4 class=\"card-title mb-4\">{{ $t(\"attached_files\") }}</h4>\r\n      <simplebar id=\"file-list\" ref=\"filesRef\" style=\"height: 384px\">\r\n        <div class=\"table-responsive mb-0\">\r\n          <table class=\"table table-centered table-hover\" style=\"table-layout: fixed; width: 100%\">\r\n            <tbody>\r\n            <tr v-for=\"(file, index) in files\" :key=\"index\">\r\n              <td style=\"width: 53px\">\r\n                <div>\r\n                  <a\r\n                      :download=\"getExt(file.uploadPath) === 'pdf' ? false : file.uploadPath\"\r\n                      :href=\"getExt(file.uploadPath) === 'pdf' ? `#` : `${baseUrl}/${file.uploadPath}`\"\r\n                      @click=\"viewFile(file.uploadPath)\"\r\n                  >\r\n                    <FileView :uploadPath=\"file.uploadPath\" class=\"my-card-hovered\"/>\r\n                    <small class=\"text-center\">{{ getFileSize(parseFloat(file.fileSize)) }}</small>\r\n                  </a>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 60%\">\r\n                <h5 class=\"font-size-14 m-0\">\r\n                  <p class=\"text-dark m-0\">{{ file.fileName }}</p>\r\n                </h5>\r\n                <p class=\"text-muted mb-0 font-size-10\">\r\n                  <i class=\"bx bx-calendar mr-1 text-primary\"></i>\r\n                  {{ replaceDate(file.createdDate) ? replaceDate(file.createdDate).daym_shortyyyy_hm() : '' }}\r\n                </p>\r\n                <small class=\"d-block text-muted\">\r\n                  {{ `${file.ownerLastName} ${file.ownerFirstName} ${file.ownerParentName ? file.ownerParentName : ''}`\r\n                  }}\r\n                </small>\r\n                <small class=\"d-block\">\r\n                  {{ file.comment }}\r\n                </small>\r\n              </td>\r\n              <td style=\"width: 45px\">\r\n                <div class=\"text-center\">\r\n                  <a :download=\"`${file.fileName}`\" :href=\"`${baseUrl}/${file.uploadPath}`\" class=\"text-dark\">\r\n                    <i class=\"bx bx-download h3 m-0\"></i>\r\n                  </a>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </simplebar>\r\n    </div>\r\n    <b-modal v-model=\"viewFileModal\" :title=\"$t('actions.view')\" scrollable size=\"xl\">\r\n      <div v-if=\"fileUploadPath\" style=\"height: 700px\">\r\n        <embed :src=\"`${baseUrl}/${fileUploadPath}`\" height=\"800\" type=\"application/pdf\" width=\"100%\"/>\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewFileModal = false\">\r\n          {{ $t(\"actions.close\") }}\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <div v-if=\"project.status !== 'FINISHED'\" class=\"p-3\">\r\n      <form>\r\n        <div>\r\n          <b-button block variant=\"primary\" @click.prevent=\"clickUpload\">\r\n            <i class=\"mdi mdi-upload d-block font-size-16\"></i>\r\n            {{ $t(\"actions.upload\") }}\r\n          </b-button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <upload-file ref=\"file\" :cmt=\"true\" @sendFile=\"saveFile\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport projectService from \"@/shared/services/projectService\";\r\nimport simplebar from \"simplebar-vue\";\r\nimport { getFileSize, replaceDate } from \"@/helper\";\r\n\r\nexport default {\r\n  props: {\r\n    project: {\r\n      type: Object,\r\n      default: () => {\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      params: {\r\n        page: 0,\r\n        itemsPerPage: 20,\r\n      },\r\n      files: [],\r\n      filePage: 0,\r\n      getFileSize: getFileSize,\r\n      fileUploadPath: null,\r\n      viewFileModal: false,\r\n      replaceDate: replaceDate\r\n    };\r\n  },\r\n  components: {\r\n    simplebar,\r\n  },\r\n  created() {\r\n    this.listFiles();\r\n  },\r\n  methods: {\r\n    viewFile(uploadPath) {\r\n      if (this.getExt(uploadPath) === \"pdf\") {\r\n        this.fileUploadPath = uploadPath;\r\n        this.viewFileModal = true;\r\n      }\r\n    },\r\n    saveFile(msg, file) {\r\n      this.leaveFile(msg, file);\r\n    },\r\n    clickUpload() {\r\n      this.$refs.file.upld();\r\n    },\r\n    leaveFile(msg, cmt) {\r\n      let id = this.$route.query.id;\r\n      if (id) {\r\n        projectService\r\n            .leaveFile(id, msg, cmt)\r\n            .then((rs) => {\r\n              this.file = null;\r\n              setTimeout(() => {\r\n                this.listFiles();\r\n              }, 300);\r\n            })\r\n            .catch((err) => {\r\n              // this.catchErr(err);\r\n            });\r\n      } else {\r\n        this.$router.go(-1);\r\n      }\r\n    },\r\n    listFiles() {\r\n      let id = this.$route.query.id;\r\n      if (id) {\r\n        projectService\r\n            .listFiles(id, this.params)\r\n            .then((rs) => {\r\n              this.files = rs.data.list;\r\n              this.handleScroll();\r\n            })\r\n            .catch((err) => {\r\n              // this.catchErr(err);\r\n            });\r\n      } else {\r\n        this.$router.go(-1);\r\n      }\r\n    },\r\n    loadMoreFiles(page) {\r\n      let id = this.$route.query.id;\r\n      if (id) {\r\n        projectService\r\n            .listFiles(id, {\r\n              page: page,\r\n              itemsPerPage: 20,\r\n            })\r\n            .then(async ({ data }) => {\r\n              if (data.list.length > 0) {\r\n                this.files = this.files.concat(data.list);\r\n              } else {\r\n                this.filePage + -1;\r\n              }\r\n            });\r\n      } else {\r\n        this.$router.go(-1);\r\n      }\r\n    },\r\n    handleScroll() {\r\n      if (this.$refs.filesRef.$el) {\r\n        setTimeout(() => {\r\n          this.$refs.filesRef.SimpleBar.getScrollElement().scrollTop = 0;\r\n        }, 500);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    let container3 = document.querySelector(\"#file-list .simplebar-content-wrapper\");\r\n    if (container3) {\r\n      container3.scrollTo({ top: 500, behavior: \"smooth\" });\r\n    }\r\n    // Contact list actions\r\n    this.$refs.filesRef.SimpleBar.getScrollElement().addEventListener(\"scroll\", (e) => {\r\n      let { scrollTop, scrollHeight, clientHeight } = event.target;\r\n      const offsetForTrigger = 1;\r\n      if (scrollHeight - clientHeight - offsetForTrigger < scrollTop) {\r\n        this.loadMoreFiles((this.filePage += 1));\r\n      }\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":"src/modules/projects"}]}