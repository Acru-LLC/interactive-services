{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\router\\index.js","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\router\\index.js","mtime":1674799498163},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1667355397815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IFRva2VuU2VydmljZSB9IGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3N0b3JhZ2Uuc2VydmljZSc7CmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMnOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7CmltcG9ydCB7IGJ1cyB9IGZyb20gIi4uL21haW4iOwppbXBvcnQgaTE4biBmcm9tICIuLi9pMThuIjsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOwpOUHJvZ3Jlc3MuY29uZmlndXJlKHsKICBlYXNpbmc6ICdlYXNlJywKICBzcGVlZDogNTAwCn0pOwpWdWUudXNlKFZ1ZVJvdXRlcik7CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICByb3V0ZXM6IHJvdXRlcywKICBtb2RlOiAnaGlzdG9yeScsCiAgc2Nyb2xsQmVoYXZpb3I6IGZ1bmN0aW9uIHNjcm9sbEJlaGF2aW9yKHRvLCBmcm9tLCBzYXZlZFBvc2l0aW9uKSB7CiAgICBpZiAoc2F2ZWRQb3NpdGlvbikgewogICAgICByZXR1cm4gc2F2ZWRQb3NpdGlvbjsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogMCwKICAgICAgICB5OiAwCiAgICAgIH07CiAgICB9CiAgfQp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgTlByb2dyZXNzLnN0YXJ0KCk7CiAgTlByb2dyZXNzLnNldCgwLjI1KTsKICB2YXIgaXNQdWJsaWMgPSB0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgcmV0dXJuIHJlY29yZC5tZXRhLnB1YmxpYzsKICB9KTsKICB2YXIgb25seVdoZW5Mb2dnZWRPdXQgPSB0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgcmV0dXJuIHJlY29yZC5tZXRhLm9ubHlXaGVuTG9nZ2VkT3V0OwogIH0pOwogIHZhciBsb2dnZWRJbiA9ICEhVG9rZW5TZXJ2aWNlLmdldFRva2VuKCk7CiAgdmFyIGlzT3BlbiA9ICdoYXNQZXJtJyBpbiB0by5tZXRhID8gISF0by5tZXRhLmhhc1Blcm0oKSA6IHRydWU7CgogIGlmICghaXNQdWJsaWMgJiYgIWxvZ2dlZEluICYmIHRvLm5hbWUgIT09ICdSZWdpc3RlcicpIHsKICAgIHJldHVybiBuZXh0KHsKICAgICAgcGF0aDogJy9sb2dpbicsCiAgICAgIHF1ZXJ5OiB7CiAgICAgICAgcmVkaXJlY3Q6IHRvLmZ1bGxQYXRoID09PSAnL2xvZ2luJyA/ICcvJyA6IHRvLmZ1bGxQYXRoCiAgICAgIH0gLy8gU3RvcmUgdGhlIGZ1bGwgcGF0aCB0byByZWRpcmVjdCB0aGUgdXNlciB0byBhZnRlciBsb2dpbgoKICAgIH0pOwogIH0gLy8gRG8gbm90IGFsbG93IHVzZXIgdG8gdmlzaXQgbG9naW4gcGFnZSBvciByZWdpc3RlciBwYWdlIGlmIHRoZXkgYXJlIGxvZ2dlZCBpbgoKCiAgaWYgKGxvZ2dlZEluICYmIG9ubHlXaGVuTG9nZ2VkT3V0KSB7CiAgICByZXR1cm4gbmV4dCgnLycpOwogIH0KCiAgaWYgKCFpc09wZW4pIHsKICAgIHJldHVybiBuZXh0KCcvJyk7CiAgfQoKICBpZiAoZnJvbS5uYW1lICE9PSBudWxsKSB7CiAgICBpZiAoKGZyb20ubmFtZS5zdGFydHNXaXRoKCdDcmVhdGUnKSB8fCBmcm9tLm5hbWUuc3RhcnRzV2l0aCgnVXBkYXRlJykpICYmIGJ1cy5yZWFjdGl2ZUxlYXZlV2l0aENvbmZpcm0pIHsKICAgICAgYnVzLiRidk1vZGFsLm1zZ0JveENvbmZpcm0oaTE4bi50KCdtZXNzYWdlcy5jYW5jZWxfdGl0bGUnKSwgewogICAgICAgIG9rVGl0bGU6IGkxOG4udCgnYWN0aW9ucy5jb25maXJtJyksCiAgICAgICAgY2FuY2VsVGl0bGU6IGkxOG4udCgnYWN0aW9ucy5jYW5jZWwnKQogICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgbmV4dCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXh0KGZhbHNlKTsKICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7Ly8gQW4gZXJyb3Igb2NjdXJyZWQKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIG5leHQoKTsKICB9Cn0pOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBOUHJvZ3Jlc3MuZG9uZSgpOwogIH0sIDI1MCk7Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["C:/ACRU PROJECT/Fair Tech/ohirgi/acru-frontend/acru-frontend/src/router/index.js"],"names":["Vue","VueRouter","TokenService","routes","NProgress","bus","i18n","configure","showSpinner","easing","speed","use","router","mode","scrollBehavior","to","from","savedPosition","x","y","beforeEach","next","start","set","isPublic","matched","some","record","meta","public","onlyWhenLoggedOut","loggedIn","getToken","isOpen","hasPerm","name","path","query","redirect","fullPath","startsWith","reactiveLeaveWithConfirm","$bvModal","msgBoxConfirm","t","okTitle","cancelTitle","then","value","done","catch","err","afterEach","setTimeout"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport { TokenService } from '@/shared/services/storage.service'\r\nimport routes from './routes'\r\nimport NProgress from 'nprogress'\r\nimport { bus } from \"../main\";\r\nimport i18n from \"../i18n\";\r\n\r\nNProgress.configure({ showSpinner: false });\r\nNProgress.configure({ easing: 'ease', speed: 500 });\r\n\r\nVue.use(VueRouter)\r\n\r\nconst router = new VueRouter({\r\n    routes,\r\n    mode: 'history',\r\n    scrollBehavior (to, from, savedPosition) {\r\n        if (savedPosition) {\r\n            return savedPosition\r\n        } else {\r\n            return { x: 0, y: 0 }\r\n        }\r\n    },\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    NProgress.start()\r\n    NProgress.set(0.25)\r\n    const isPublic = to.matched.some(record => record.meta.public)\r\n    const onlyWhenLoggedOut = to.matched.some(record => record.meta.onlyWhenLoggedOut)\r\n    const loggedIn = !!TokenService.getToken();\r\n    const isOpen = ('hasPerm' in to.meta) ? !!to.meta.hasPerm() : true;\r\n    if (!isPublic && !loggedIn && to.name !== 'Register') {\r\n        return next({\r\n            path: '/login',\r\n            query: { redirect: to.fullPath === '/login' ? '/' : to.fullPath }  // Store the full path to redirect the user to after login\r\n        });\r\n    }\r\n    // Do not allow user to visit login page or register page if they are logged in\r\n    if (loggedIn && onlyWhenLoggedOut) {\r\n        return next('/')\r\n    }\r\n    if (!isOpen) {\r\n        return next('/');\r\n    }\r\n    if (from.name !== null) {\r\n        if ((from.name.startsWith('Create') || from.name.startsWith('Update')) && bus.reactiveLeaveWithConfirm) {\r\n            bus.$bvModal\r\n                .msgBoxConfirm(i18n.t('messages.cancel_title'), {\r\n                    okTitle: i18n.t('actions.confirm'),\r\n                    cancelTitle: i18n.t('actions.cancel'),\r\n                }).then(value => {\r\n                    if (value) {\r\n                        next()\r\n                    } else {\r\n                        next(false)\r\n                        NProgress.done()\r\n                    }\r\n                }).catch(err => {\r\n                    // An error occurred\r\n                })\r\n        } else {\r\n            next();\r\n        }\r\n    } else {\r\n        next()\r\n    }\r\n});\r\n\r\nrouter.afterEach(() => {\r\n    setTimeout(() => NProgress.done(), 250)\r\n})\r\n\r\nexport default router\r\n"]}]}