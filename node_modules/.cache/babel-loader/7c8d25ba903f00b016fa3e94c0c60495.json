{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\organizitional\\components\\editReportDynamicModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\organizitional\\components\\editReportDynamicModal.vue","mtime":1667352074561},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJDOlxcQUNSVSBQUk9KRUNUXFxGYWlyIFRlY2hcXGFjcnUtZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXHNsaWNlZFRvQXJyYXkuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXEFDUlUgUFJPSkVDVFxcRmFpciBUZWNoXFxhY3J1LWZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQzpcXEFDUlUgUFJPSkVDVFxcRmFpciBUZWNoXFxhY3J1LWZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFx0eXBlb2YuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgU2VydmljZSBmcm9tICJAL21vZHVsZXMvcmVwb3J0L3JlcG9ydFNlcnZpY2UiOwppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UiOwppbXBvcnQgQ2hlY2tib3ggZnJvbSAidnVlLW1hdGVyaWFsLWNoZWNrYm94IjsKdmFyIE9LRURfQVBJX1VSTCA9ICdyZWVzdHIvaW5mby1va2VkJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpc0dlbmVyYXRlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ2hlY2tib3g6IENoZWNrYm94CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGFzdFJlcG9ydERhdGE6IFtdLAogICAgICBsYXN0UmVwb3J0RGF0YVJvd3M6IFtdLAogICAgICBsYXN0UmVwb3J0Rm9ybXVsYXM6IFtdLAogICAgICBkZWJvdW5jZTogbnVsbCwKICAgICAgLy8gT0tFRCBWQVJJQUJMRVMKICAgICAgb2tlZHM6IFtdLAogICAgICBoYXNOZXh0UGFnZU9rZWQ6IGZhbHNlLAogICAgICBpc0xvYWRpbmdPa2VkOiBmYWxzZSwKICAgICAgb2tlZFNlYXJjaFBheWxvYWQ6IHt9LAogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tCiAgICAgIGYxSWRzOiBbXSwKICAgICAgZjJJZHM6IFtdLAogICAgICBmUm93SWQ6IG51bGwsCiAgICAgIHRhYmxlSWQ6IG51bGwsCiAgICAgIHRhYmxlSW5mbzoge30sCiAgICAgIHJlcG9ydElkOiBudWxsLAogICAgICAvLyBnZXROYW1lOiBnZXROYW1lLAogICAgICBzZWxlY3RlZENvbHVtbnM6IFtdLAogICAgICBzZWxlY3RlZFJvd3M6IFtdLAogICAgICBmaXJzdENvbHVtbnM6IFtdLAogICAgICBzZWNvbmRDb2x1bW5zOiBbXSwKICAgICAgdGhpcmRDb2x1bW5zOiBbXSwKICAgICAgdGhpcmRUcklkRGF0YTogW10sCiAgICAgIGN1cnJlbnRSb3dJZDogbnVsbCwKICAgICAgaW52YWxpZEVudHJpZXM6IDAsCiAgICAgIGN1cnJlbnRJdGVtRGF0YTogW10sCiAgICAgIHNob3dEYXRhOiBbXSwKICAgICAgbG9hZGVyOiBmYWxzZSwKICAgICAgc2hvd1Jlc3VsdDogZmFsc2UsCiAgICAgIHJlcG9ydDoge30sCiAgICAgIHRhYmxlOiB7fSwKICAgICAgZm9ybXVsYXM6IFtdLAogICAgICBjdXJyZW50UG9zaXRpb246IHsKICAgICAgICByb3dJbmRleDogbnVsbCwKICAgICAgICBjb2x1bW5JbmRleDogbnVsbCwKICAgICAgICByb3dJZDogbnVsbCwKICAgICAgICBjb2x1bW5JZDogbnVsbAogICAgICB9LAogICAgICBkb2NUYWJsZUZvcm11bGFzTGlzdDoge30sCiAgICAgIGRvY1RhYmxlRm9ybXVsYXNMaXN0ZW5Db2x1bW5JZDoge30sCiAgICAgIHRyQ29sdW1uSWRPbkRvY0NvbHVtbklkTWFwOiB7fQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICB0aGlyZFRySWREYXRhOiBmdW5jdGlvbiB0aGlyZFRySWREYXRhKG5ld1RoaXJkVHJJZERhdGEpIHsKICAgICAgaWYgKF90eXBlb2YobmV3VGhpcmRUcklkRGF0YSkgPT09ICdvYmplY3QnICYmIG5ld1RoaXJkVHJJZERhdGEubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBsZW5ndGggPSBuZXdUaGlyZFRySWREYXRhLmxlbmd0aDsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy50ckNvbHVtbklkT25Eb2NDb2x1bW5JZE1hcFtuZXdUaGlyZFRySWREYXRhW2ldLmNvbHVtbklkXSA9IGk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDb2x1bW5EYXRhOiBmdW5jdGlvbiBnZXRDb2x1bW5EYXRhKGkpIHsKICAgICAgdmFyIGZvdW5kID0gdGhpcy5zaG93RGF0YS5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuY29sdW1uSWQgPT0gaS5jb2x1bW5JZDsKICAgICAgfSk7CgogICAgICBpZiAoZm91bmQpIHsKICAgICAgICByZXR1cm4gZm91bmQuY29sdW1uRGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0sCiAgICAvLyBEWU5BTUlDX1JFRkVSRU5DRVMgTUVUSE9EUwogICAgZ2V0UmFuZG9tSW50OiBmdW5jdGlvbiBnZXRSYW5kb21JbnQoKSB7CiAgICAgIHZhciBudW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMCk7CiAgICAgIHZhciBib29sID0gdHJ1ZTsKICAgICAgdGhpcy5zZWxlY3RlZFJvd3MuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICBpZiAoZWwuaWQgPT0gbnVtYmVyKSB7CiAgICAgICAgICBib29sID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmIChlbC5pZCA9PSBudW1iZXIpIHsKICAgICAgICAgIGJvb2wgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBib29sOwogICAgICB9KTsKCiAgICAgIGlmIChib29sKSB7CiAgICAgICAgcmV0dXJuIG51bWJlcjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldFJhbmRvbUludCgpOwogICAgICB9CiAgICB9LAogICAgYWRkTmV3Um93OiBmdW5jdGlvbiBhZGROZXdSb3coKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdGVkUm93cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzLmdldFJhbmRvbUludCgpCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0RG9jdW1lbnRDb2x1bW5WYWx1ZXMoX3RoaXMubGFzdFJlcG9ydERhdGEsIF90aGlzLmxhc3RSZXBvcnRGb3JtdWxhcyk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjbG9zZVJlcG9ydDogZnVuY3Rpb24gY2xvc2VSZXBvcnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgiY2xvc2VkUmVwb3J0TG9hZGVyIik7CgogICAgICAgICAgICAgICAgX3RoaXMyLmNuZigpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihycykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLiRlbWl0KCdzYXZlJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc3RvcEZvcm1pbmdSb3dzOiBmdW5jdGlvbiBzdG9wRm9ybWluZ1Jvd3MoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgU2VydmljZS5zdG9wRm9ybWluZ1RoZVJlcG9ydCh0aGlzLnJlcG9ydElkKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQocnMpIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF90aGlzMy4kc2V0KF90aGlzMy50YWJsZUluZm8sICdoYXNEeW5hbWljUm93cycsIGZhbHNlKTsgLy8gYXdhaXQgdGhpcy5kZWxldGVTdWNjZXNzKCk7CgoKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKGVycikgey8vIHRoaXMuY2F0Y2hFcnIoZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlUm93OiBmdW5jdGlvbiBkZWxldGVSb3coaW5kZXgsIGRhdGEpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgZmluZEVsZW1lbnQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGZpbmRFbGVtZW50ID0gX3RoaXM0Lmxhc3RSZXBvcnREYXRhUm93cy5maW5kSW5kZXgoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlbC5pZCA9PSBkYXRhLmlkOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKGZpbmRFbGVtZW50ID4gLTEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LmNuZigpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhycykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFycy52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU2VydmljZS5kZWxldGVSb3dJZChkYXRhLmlkLCBfdGhpczQucmVwb3J0SWQpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5kZWxldGVTdWNjZXNzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5zZWxlY3RlZFJvd3Muc3BsaWNlKGluZGV4LCAxKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kZm9yY2VVcGRhdGUoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5yZXNldEluZGV4KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuc2V0RG9jdW1lbnRDb2x1bW5WYWx1ZXMoX3RoaXM0Lmxhc3RSZXBvcnREYXRhLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnJvd0lkICE9IGRhdGEuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBfdGhpczQubGFzdFJlcG9ydEZvcm11bGFzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmdldEJ5SWQoX3RoaXM0LnRhYmxlSWQsIF90aGlzNC5yZXBvcnRJZCwgX3RoaXM0LnRhYmxlSW5mbyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5jbmYoKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgocnMpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdUaGlyZFRySWREYXRhOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFycy52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RoaXJkVHJJZERhdGEgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnRoaXJkVHJJZERhdGEgPSBfdGhpczQudGhpcmRUcklkRGF0YS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnZhbHVlID0gZS52YWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkICYmIGQucm93SWQgIT0gZGF0YS5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC50eXBlQ29kZSA9PT0gIkJPT0xFQU4iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZUJvb2xlYW4gPSBkLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWVTdHJpbmcgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWVCaWdEZWNpbWFsID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnZhbHVlRGF0ZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5zZWxlY3RWYWx1ZU5hbWVVeiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC50eXBlQ29kZSA9PT0gIlNUUklORyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnZhbHVlU3RyaW5nID0gZC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnZhbHVlQmlnRGVjaW1hbCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZURhdGUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWVCb29sZWFuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnNlbGVjdFZhbHVlTmFtZVV6ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLnR5cGVDb2RlID09PSAiQklHREVDSU1BTCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnZhbHVlQmlnRGVjaW1hbCA9IGQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZVN0cmluZyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZURhdGUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWVCb29sZWFuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnNlbGVjdFZhbHVlTmFtZVV6ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLnR5cGVDb2RlID09PSAiREFURSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnZhbHVlRGF0ZSA9IGQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZVN0cmluZyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZUJpZ0RlY2ltYWwgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWVCb29sZWFuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnNlbGVjdFZhbHVlTmFtZVV6ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLnR5cGVDb2RlID09PSAiWUVBUiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnZhbHVlRGF0ZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZVN0cmluZyA9IGQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZUJpZ0RlY2ltYWwgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWVCb29sZWFuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnNlbGVjdFZhbHVlTmFtZVV6ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLnR5cGVDb2RlID09PSAiU0VMRUNUIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWVTdHJpbmcgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudmFsdWVCaWdEZWNpbWFsID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnZhbHVlRGF0ZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC52YWx1ZUJvb2xlYW4gPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUaGlyZFRySWREYXRhLnB1c2goZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5zZWxlY3RlZFJvd3Muc3BsaWNlKGluZGV4LCAxKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kZm9yY2VVcGRhdGUoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5yZXNldEluZGV4KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUaGlyZFRySWREYXRhLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0Lmxhc3RSZXBvcnREYXRhLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LnNldERvY3VtZW50Q29sdW1uVmFsdWVzKF90aGlzNC5sYXN0UmVwb3J0RGF0YSwgX3RoaXM0Lmxhc3RSZXBvcnRGb3JtdWxhcyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDUpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGR5bmFtaWNSZWZzUmVhY2hlZEVuZE9mTGlzdDogZnVuY3Rpb24gZHluYW1pY1JlZnNSZWFjaGVkRW5kT2ZMaXN0KGUpIHsKICAgICAgaWYgKGUpIHsKICAgICAgICB0aGlzLmZldGNoRHluYW1pY1JlZnMoKTsKICAgICAgfQogICAgfSwKICAgIGRlYm91bmNlU2VhcmNoRHluYW1pY1JlZnM6IGZ1bmN0aW9uIGRlYm91bmNlU2VhcmNoRHluYW1pY1JlZnMoc2VhcmNoVGV4dCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpczUuZGVib3VuY2UpOwogICAgICAgICAgICAgICAgX3RoaXM1LmRlYm91bmNlID0gc2V0VGltZW91dCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZmV0Y2hEeW5hbWljUmVmc1dpdGhLZXl3b3JkKHNlYXJjaFRleHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgICAgICAgICAgICB9KSksIDEwMDApOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZldGNoRHluYW1pY1JlZnNXaXRoS2V5d29yZDogZnVuY3Rpb24gZmV0Y2hEeW5hbWljUmVmc1dpdGhLZXl3b3JkKGtleXdvcmQpIHsKICAgICAgdGhpcy5va2VkcyA9IFtdOwogICAgICB0aGlzLm9rZWRTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxOwogICAgICB0aGlzLm9rZWRTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnOwogICAgICB0aGlzLmZldGNoRHluYW1pY1JlZnMoKTsKICAgIH0sCiAgICBmZXRjaER5bmFtaWNSZWZzOiBmdW5jdGlvbiBmZXRjaER5bmFtaWNSZWZzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzNi5pc0xvYWRpbmdPa2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQoT0tFRF9BUElfVVJMLCBfdGhpczYub2tlZFNlYXJjaFBheWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICB2YXIgX3RoaXM2JG9rZWRzOwoKICAgICAgICAgICAgICAgICAgKF90aGlzNiRva2VkcyA9IF90aGlzNi5va2VkcykucHVzaC5hcHBseShfdGhpczYkb2tlZHMsIF90b0NvbnN1bWFibGVBcnJheShyZXMuZGF0YS5saXN0KSk7CgogICAgICAgICAgICAgICAgICBfdGhpczYuaGFzTmV4dFBhZ2VPa2VkID0gcmVzLmRhdGEudG90YWwgLyBfdGhpczYub2tlZFNlYXJjaFBheWxvYWQuaXRlbXNQZXJQYWdlID4gX3RoaXM2Lm9rZWRTZWFyY2hQYXlsb2FkLnBhZ2U7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5va2VkU2VhcmNoUGF5bG9hZC5wYWdlICs9IDE7CgogICAgICAgICAgICAgICAgICBpZiAoIV90aGlzNi5pc01vZGVDcmVhdGUgJiYgX3RoaXM2LmVkaXRpbmdJdGVtLm9rZWRJZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZEl0bSA9IF90aGlzNi5va2Vkcy5maW5kKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlkID09IF90aGlzNi5lZGl0aW5nSXRlbS5va2VkSWQ7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRJdG0gJiYgX3RoaXM2LmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczYub2tlZHMucHVzaChfdGhpczYuZWRpdGluZ0l0ZW0uaW5mb09rZWREdG8pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5va2VkcyA9IFtdOwogICAgICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5pc0xvYWRpbmdPa2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjdXN0b21MYWJlbER5bmFtaWNSZWY6IGZ1bmN0aW9uIGN1c3RvbUxhYmVsRHluYW1pY1JlZihvcHQpIHsKICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5va2Vkcy5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuaWQgPT0gb3B0LmlkOwogICAgICB9KTsKCiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQoc2VsZWN0ZWQuY29kZSwgIiAtICIpLmNvbmNhdChzZWxlY3RlZC5uYW1lVXogPyB0aGlzLmdldE5hbWUoewogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwKICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6CiAgICAgICAgfSkgOiBzZWxlY3RlZC5uYW1lKTsKICAgICAgfQoKICAgICAgcmV0dXJuICIiOwogICAgfSwKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBjbGVhckFsbDogZnVuY3Rpb24gY2xlYXJBbGwoKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRDb2x1bW5zID0gW107CiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107CiAgICAgIHRoaXMuZmlyc3RDb2x1bW5zID0gW107CiAgICAgIHRoaXMuc2Vjb25kQ29sdW1ucyA9IFtdOwogICAgICB0aGlzLnRoaXJkQ29sdW1ucyA9IFtdOwogICAgICB0aGlzLnRoaXJkVHJJZERhdGEgPSBbXTsKICAgICAgdGhpcy5mb3JtdWxhcyA9IFtdOwogICAgICB0aGlzLnRhYmxlID0gW107CiAgICAgIHRoaXMuZjFJZHMgPSBbXTsKICAgICAgdGhpcy5mMklkcyA9IFtdOwogICAgfSwKICAgIGtleWRvd25FdnQ6IGZ1bmN0aW9uIGtleWRvd25FdnQoZXZ0LCByb3dJZCwgdmFsdWUsIHJvd0luZGV4LCBjb2x1bW5JbmRleCwgY29sdW1uSWQsIHR5cGVDb2RlKSB7CiAgICAgIHRoaXMua2V5VXBFdmVudHNEaXNhYmxlKGV2dCk7CgogICAgICBpZiAoY29sdW1uSWQgIT0gbnVsbCkgewogICAgICAgIGlmIChldnQua2V5Q29kZSA9PSA0MCAmJiByb3dJZCAhPSBudWxsKSB7CiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsgLy8gZG93bgoKICAgICAgICAgIGlmIChyb3dJbmRleCA8IHRoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgdmFyIGN1cnJlbnRDb2x1bW4gPSB0aGlzLnRoaXJkVHJJZERhdGFbY29sdW1uSW5kZXhdOwogICAgICAgICAgICB2YXIgZG93blJvd0NvbHVtbiA9IHRoaXMuc2VsZWN0ZWRSb3dzW3Jvd0luZGV4ICsgMV07CiAgICAgICAgICAgIHZhciBkb3duSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgcm93SWQ6IGRvd25Sb3dDb2x1bW4uaWQsCiAgICAgICAgICAgICAgY29sdW1uSWQ6IGN1cnJlbnRDb2x1bW4uY29sdW1uSWQKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgaWYgKGRvd25JbnB1dCkgewogICAgICAgICAgICAgIGRvd25JbnB1dC5mb2N1cygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChldnQua2V5Q29kZSA9PSAzOCAmJiByb3dJZCAhPSBudWxsKSB7CiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICBpZiAocm93SW5kZXggIT0gMCkgewogICAgICAgICAgICB2YXIgX2N1cnJlbnRDb2x1bW4gPSB0aGlzLnRoaXJkVHJJZERhdGFbY29sdW1uSW5kZXhdOwogICAgICAgICAgICB2YXIgdXBSb3dDb2x1bW4gPSB0aGlzLnNlbGVjdGVkUm93c1tyb3dJbmRleCAtIDFdOwogICAgICAgICAgICB2YXIgdXBJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICByb3dJZDogdXBSb3dDb2x1bW4uaWQsCiAgICAgICAgICAgICAgY29sdW1uSWQ6IF9jdXJyZW50Q29sdW1uLmNvbHVtbklkCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGlmICh1cElucHV0KSB7CiAgICAgICAgICAgICAgdXBJbnB1dC5mb2N1cygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vdXAKCiAgICAgICAgfSBlbHNlIGlmIChldnQua2V5Q29kZSA9PSAzNykgewogICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IC8vbGVmdAoKICAgICAgICAgIGlmIChjb2x1bW5JbmRleCAhPSAwKSB7CiAgICAgICAgICAgIHZhciBwcmV2Q29sdW1uID0gdGhpcy50aGlyZFRySWREYXRhW2NvbHVtbkluZGV4IC0gMV07CiAgICAgICAgICAgIHZhciBjdXJyZW50Um93ID0gdGhpcy5zZWxlY3RlZFJvd3Nbcm93SW5kZXhdOwogICAgICAgICAgICB2YXIgcHJldklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgIHJvd0lkOiBjdXJyZW50Um93LmlkLAogICAgICAgICAgICAgIGNvbHVtbklkOiBwcmV2Q29sdW1uLmNvbHVtbklkCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGlmIChwcmV2SW5wdXQpIHsKICAgICAgICAgICAgICBpZiAocHJldklucHV0LmRpc2FibGVkKSB7CiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSB0aGlzLnRoaXJkVHJJZERhdGEubGVuZ3RoIC0gKGNvbHVtbkluZGV4IC0gMSk7CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBwcmV2Q29sdW1uMiA9IHRoaXMudGhpcmRUcklkRGF0YVtjb2x1bW5JbmRleCAtIDEgLSBpXTsKCiAgICAgICAgICAgICAgICAgIGlmIChwcmV2Q29sdW1uMikgewogICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgIHJvd0lkOiBjdXJyZW50Um93LmlkLAogICAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IHByZXZDb2x1bW4yLmNvbHVtbklkCiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQgJiYgaW5wdXQuZGlzYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcHJldklucHV0LmZvY3VzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChldnQua2V5Q29kZSA9PSAzOSkgewogICAgICAgICAgLy9yaWdodAogICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgaWYgKHRoaXMudGhpcmRUcklkRGF0YS5sZW5ndGggLSAxID4gY29sdW1uSW5kZXgpIHsKICAgICAgICAgICAgdmFyIG5leHRDb2x1bW4gPSB0aGlzLnRoaXJkVHJJZERhdGFbY29sdW1uSW5kZXggKyAxXTsKICAgICAgICAgICAgdmFyIF9jdXJyZW50Um93ID0gdGhpcy5zZWxlY3RlZFJvd3Nbcm93SW5kZXhdOwogICAgICAgICAgICB2YXIgbmV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgIHJvd0lkOiBfY3VycmVudFJvdy5pZCwKICAgICAgICAgICAgICBjb2x1bW5JZDogbmV4dENvbHVtbi5jb2x1bW5JZAogICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBpZiAobmV4dElucHV0KSB7CiAgICAgICAgICAgICAgaWYgKG5leHRJbnB1dC5kaXNhYmxlZCkgewogICAgICAgICAgICAgICAgdmFyIGZvckNvdW50ID0gdGhpcy50aGlyZFRySWREYXRhLmxlbmd0aCAtIChjb2x1bW5JbmRleCArIDEpOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBmb3JDb3VudDsgX2krKykgewogICAgICAgICAgICAgICAgICB2YXIgbmV4dENvbHVtbjIgPSB0aGlzLnRoaXJkVHJJZERhdGFbY29sdW1uSW5kZXggKyAxICsgX2ldOwoKICAgICAgICAgICAgICAgICAgdmFyIF9pbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICByb3dJZDogX2N1cnJlbnRSb3cuaWQsCiAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IG5leHRDb2x1bW4yLmNvbHVtbklkCiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIGlmIChfaW5wdXQuZGlzYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX2lucHV0KSB7CiAgICAgICAgICAgICAgICAgICAgICBfaW5wdXQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5leHRJbnB1dC5mb2N1cygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlc2V0SW5kZXg6IGZ1bmN0aW9uIHJlc2V0SW5kZXgoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuJHNldChfdGhpczcuY3VycmVudFBvc2l0aW9uLCAicm93SW5kZXgiLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuJHNldChfdGhpczcuY3VycmVudFBvc2l0aW9uLCAiY29sdW1uSW5kZXgiLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuJHNldChfdGhpczcuY3VycmVudFBvc2l0aW9uLCAicm93SWQiLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuJHNldChfdGhpczcuY3VycmVudFBvc2l0aW9uLCAiY29sdW1uSWQiLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRFcnJvcjogZnVuY3Rpb24gc2V0RXJyb3IoZjEsIGYyLCBmcm93SWQpIHsKICAgICAgdGhpcy5mMUlkcyA9IGYxOwogICAgICB0aGlzLmYySWRzID0gZjI7CiAgICAgIHRoaXMuZlJvd0lkID0gZnJvd0lkOwogICAgfSwKICAgIGtleVVwRXZlbnRzRGlzYWJsZTogZnVuY3Rpb24ga2V5VXBFdmVudHNEaXNhYmxlKGUpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFBvc2l0aW9uLmNvbHVtbklkICE9IG51bGwpIHsKICAgICAgICBpZiAoZS53aGljaCA9PT0gMzggfHwgZS53aGljaCA9PT0gNDApIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBrZXlVcEV2ZW50czogZnVuY3Rpb24ga2V5VXBFdmVudHMoZXZ0KSB7CiAgICAgIHRoaXMua2V5VXBFdmVudHNEaXNhYmxlKGV2dCk7IC8vIGlmICh0aGlzLmN1cnJlbnRQb3NpdGlvbi5jb2x1bW5JZCAhPSBudWxsKSB7CiAgICAgIC8vICAgaWYgKGV2dC5rZXlDb2RlID09IDQwICYmIHRoaXMuY3VycmVudFBvc2l0aW9uLnJvd0lkICE9IG51bGwpIHsKICAgICAgLy8gICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAvLyAgICAgLy8gZG93bgogICAgICAvLyAgICAgaWYgKHRoaXMuY3VycmVudFBvc2l0aW9uLnJvd0luZGV4IDwgdGhpcy5zZWxlY3RlZFJvd3MubGVuZ3RoIC0gMSkgewogICAgICAvLyAgICAgICBsZXQgY3VycmVudENvbHVtbiA9CiAgICAgIC8vICAgICAgICAgdGhpcy50aGlyZFRySWREYXRhW3RoaXMuY3VycmVudFBvc2l0aW9uLmNvbHVtbkluZGV4XTsKICAgICAgLy8gICAgICAgbGV0IGRvd25Sb3dDb2x1bW4gPQogICAgICAvLyAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzW3RoaXMuY3VycmVudFBvc2l0aW9uLnJvd0luZGV4ICsgMV07CiAgICAgIC8vICAgICAgIGxldCBkb3duSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKICAgICAgLy8gICAgICAgICBKU09OLnN0cmluZ2lmeSh7CiAgICAgIC8vICAgICAgICAgICByb3dJZDogZG93blJvd0NvbHVtbi5pZCwKICAgICAgLy8gICAgICAgICAgIGNvbHVtbklkOiBjdXJyZW50Q29sdW1uLmNvbHVtbklkLAogICAgICAvLyAgICAgICAgIH0pCiAgICAgIC8vICAgICAgICk7CiAgICAgIC8vICAgICAgIGlmIChkb3duSW5wdXQpIHsKICAgICAgLy8gICAgICAgICBkb3duSW5wdXQuZm9jdXMoKTsKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0gZWxzZSBpZiAoZXZ0LmtleUNvZGUgPT0gMzggJiYgdGhpcy5jdXJyZW50UG9zaXRpb24ucm93SWQgIT0gbnVsbCkgewogICAgICAvLyAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIC8vICAgICBpZiAodGhpcy5jdXJyZW50UG9zaXRpb24ucm93SW5kZXggIT0gMCkgewogICAgICAvLyAgICAgICBsZXQgY3VycmVudENvbHVtbiA9CiAgICAgIC8vICAgICAgICAgdGhpcy50aGlyZFRySWREYXRhW3RoaXMuY3VycmVudFBvc2l0aW9uLmNvbHVtbkluZGV4XTsKICAgICAgLy8gICAgICAgbGV0IHVwUm93Q29sdW1uID0KICAgICAgLy8gICAgICAgICB0aGlzLnNlbGVjdGVkUm93c1t0aGlzLmN1cnJlbnRQb3NpdGlvbi5yb3dJbmRleCAtIDFdOwogICAgICAvLyAgICAgICBsZXQgdXBJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKAogICAgICAvLyAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgLy8gICAgICAgICAgIHJvd0lkOiB1cFJvd0NvbHVtbi5pZCwKICAgICAgLy8gICAgICAgICAgIGNvbHVtbklkOiBjdXJyZW50Q29sdW1uLmNvbHVtbklkLAogICAgICAvLyAgICAgICAgIH0pCiAgICAgIC8vICAgICAgICk7CiAgICAgIC8vICAgICAgIGlmICh1cElucHV0KSB7CiAgICAgIC8vICAgICAgICAgdXBJbnB1dC5mb2N1cygpOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICAvL3VwCiAgICAgIC8vICAgfSBlbHNlIGlmIChldnQua2V5Q29kZSA9PSAzNykgewogICAgICAvLyAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIC8vICAgICAvL2xlZnQKICAgICAgLy8gICAgIGlmICh0aGlzLmN1cnJlbnRQb3NpdGlvbi5jb2x1bW5JbmRleCAhPSAwKSB7CiAgICAgIC8vICAgICAgIGxldCBwcmV2Q29sdW1uID0KICAgICAgLy8gICAgICAgICB0aGlzLnRoaXJkVHJJZERhdGFbdGhpcy5jdXJyZW50UG9zaXRpb24uY29sdW1uSW5kZXggLSAxXTsKICAgICAgLy8gICAgICAgbGV0IGN1cnJlbnRSb3cgPSB0aGlzLnNlbGVjdGVkUm93c1t0aGlzLmN1cnJlbnRQb3NpdGlvbi5yb3dJbmRleF07CiAgICAgIC8vICAgICAgIGxldCBwcmV2SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKICAgICAgLy8gICAgICAgICBKU09OLnN0cmluZ2lmeSh7CiAgICAgIC8vICAgICAgICAgICByb3dJZDogY3VycmVudFJvdy5pZCwKICAgICAgLy8gICAgICAgICAgIGNvbHVtbklkOiBwcmV2Q29sdW1uLmNvbHVtbklkLAogICAgICAvLyAgICAgICAgIH0pCiAgICAgIC8vICAgICAgICk7CiAgICAgIC8vICAgICAgIGlmIChwcmV2SW5wdXQpIHsKICAgICAgLy8gICAgICAgICBpZiAocHJldklucHV0LmRpc2FibGVkKSB7CiAgICAgIC8vICAgICAgICAgICBsZXQgY291bnQgPQogICAgICAvLyAgICAgICAgICAgICB0aGlzLnRoaXJkVHJJZERhdGEubGVuZ3RoIC0KICAgICAgLy8gICAgICAgICAgICAgKHRoaXMuY3VycmVudFBvc2l0aW9uLmNvbHVtbkluZGV4IC0gMSk7CiAgICAgIC8vICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKICAgICAgLy8gICAgICAgICAgICAgbGV0IHByZXZDb2x1bW4yID0KICAgICAgLy8gICAgICAgICAgICAgICB0aGlzLnRoaXJkVHJJZERhdGFbCiAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3NpdGlvbi5jb2x1bW5JbmRleCAtIDEgLSBpCiAgICAgIC8vICAgICAgICAgICAgICAgXTsKICAgICAgLy8gICAgICAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoCiAgICAgIC8vICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoewogICAgICAvLyAgICAgICAgICAgICAgICAgcm93SWQ6IGN1cnJlbnRSb3cuaWQsCiAgICAgIC8vICAgICAgICAgICAgICAgICBjb2x1bW5JZDogcHJldkNvbHVtbjIuY29sdW1uSWQsCiAgICAgIC8vICAgICAgICAgICAgICAgfSkKICAgICAgLy8gICAgICAgICAgICAgKTsKICAgICAgLy8gICAgICAgICAgICAgaWYgKGlucHV0ICYmIGlucHV0LmRpc2FibGVkKSB7CiAgICAgIC8vICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgIC8vICAgICAgICAgICAgICAgaWYgKGlucHV0KSB7CiAgICAgIC8vICAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpOwogICAgICAvLyAgICAgICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgICAgICBicmVhazsKICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0gZWxzZSB7CiAgICAgIC8vICAgICAgICAgICBwcmV2SW5wdXQuZm9jdXMoKTsKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9IGVsc2UgaWYgKGV2dC5rZXlDb2RlID09IDM5KSB7CiAgICAgIC8vICAgICAvL3JpZ2h0CiAgICAgIC8vICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgLy8gICAgIGlmICgKICAgICAgLy8gICAgICAgdGhpcy50aGlyZFRySWREYXRhLmxlbmd0aCAtIDEgPgogICAgICAvLyAgICAgICB0aGlzLmN1cnJlbnRQb3NpdGlvbi5jb2x1bW5JbmRleAogICAgICAvLyAgICAgKSB7CiAgICAgIC8vICAgICAgIGxldCBuZXh0Q29sdW1uID0KICAgICAgLy8gICAgICAgICB0aGlzLnRoaXJkVHJJZERhdGFbdGhpcy5jdXJyZW50UG9zaXRpb24uY29sdW1uSW5kZXggKyAxXTsKICAgICAgLy8gICAgICAgbGV0IGN1cnJlbnRSb3cgPSB0aGlzLnNlbGVjdGVkUm93c1t0aGlzLmN1cnJlbnRQb3NpdGlvbi5yb3dJbmRleF07CiAgICAgIC8vICAgICAgIGxldCBuZXh0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKICAgICAgLy8gICAgICAgICBKU09OLnN0cmluZ2lmeSh7CiAgICAgIC8vICAgICAgICAgICByb3dJZDogY3VycmVudFJvdy5pZCwKICAgICAgLy8gICAgICAgICAgIGNvbHVtbklkOiBuZXh0Q29sdW1uLmNvbHVtbklkLAogICAgICAvLyAgICAgICAgIH0pCiAgICAgIC8vICAgICAgICk7CiAgICAgIC8vICAgICAgIGlmIChuZXh0SW5wdXQpIHsKICAgICAgLy8gICAgICAgICBpZiAobmV4dElucHV0LmRpc2FibGVkKSB7CiAgICAgIC8vICAgICAgICAgICBsZXQgZm9yQ291bnQgPQogICAgICAvLyAgICAgICAgICAgICB0aGlzLnRoaXJkVHJJZERhdGEubGVuZ3RoIC0KICAgICAgLy8gICAgICAgICAgICAgKHRoaXMuY3VycmVudFBvc2l0aW9uLmNvbHVtbkluZGV4ICsgMSk7CiAgICAgIC8vICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvckNvdW50OyBpKyspIHsKICAgICAgLy8gICAgICAgICAgICAgbGV0IG5leHRDb2x1bW4yID0KICAgICAgLy8gICAgICAgICAgICAgICB0aGlzLnRoaXJkVHJJZERhdGFbCiAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3NpdGlvbi5jb2x1bW5JbmRleCArIDEgKyBpCiAgICAgIC8vICAgICAgICAgICAgICAgXTsKICAgICAgLy8gICAgICAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoCiAgICAgIC8vICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoewogICAgICAvLyAgICAgICAgICAgICAgICAgcm93SWQ6IGN1cnJlbnRSb3cuaWQsCiAgICAgIC8vICAgICAgICAgICAgICAgICBjb2x1bW5JZDogbmV4dENvbHVtbjIuY29sdW1uSWQsCiAgICAgIC8vICAgICAgICAgICAgICAgfSkKICAgICAgLy8gICAgICAgICAgICAgKTsKICAgICAgLy8gICAgICAgICAgICAgaWYgKGlucHV0LmRpc2FibGVkKSB7CiAgICAgIC8vICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgIC8vICAgICAgICAgICAgICAgaWYgKGlucHV0KSB7CiAgICAgIC8vICAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpOwogICAgICAvLyAgICAgICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgICAgICBicmVhazsKICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0gZWxzZSB7CiAgICAgIC8vICAgICAgICAgICBuZXh0SW5wdXQuZm9jdXMoKTsKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9CiAgICAgIC8vIH0KICAgIH0sCiAgICBmb2N1c1ZhbDogZnVuY3Rpb24gZm9jdXNWYWwocm93SWQsIHZhbHVlLCByb3dJbmRleCwgY29sdW1uSW5kZXgsIGNvbHVtbklkLCB0eXBlQ29kZSkgewogICAgICB0aGlzLiRzZXQodGhpcy5jdXJyZW50UG9zaXRpb24sICJyb3dJbmRleCIsIHBhcnNlRmxvYXQocm93SW5kZXgpKTsKICAgICAgdGhpcy4kc2V0KHRoaXMuY3VycmVudFBvc2l0aW9uLCAiY29sdW1uSW5kZXgiLCBwYXJzZUZsb2F0KGNvbHVtbkluZGV4KSk7CiAgICAgIHRoaXMuJHNldCh0aGlzLmN1cnJlbnRQb3NpdGlvbiwgInJvd0lkIiwgcGFyc2VGbG9hdChyb3dJZCkpOwogICAgICB0aGlzLiRzZXQodGhpcy5jdXJyZW50UG9zaXRpb24sICJjb2x1bW5JZCIsIHBhcnNlRmxvYXQoY29sdW1uSWQpKTsKICAgIH0sCiAgICBnZXRGb3JtdWxhc18yOiBmdW5jdGlvbiBnZXRGb3JtdWxhc18yKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHsKICAgICAgICBpZiAoX3RoaXM4LnRhYmxlSWQpIHsKICAgICAgICAgIFNlcnZpY2UuZm9ybXVsYXNCeVRhYmxlSWRfMihfdGhpczgudGFibGVJZCkudGhlbihmdW5jdGlvbiAoX3JlZjgpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSBfcmVmOC5kYXRhOwogICAgICAgICAgICBfdGhpczguZm9ybXVsYXMgPSBkYXRhOwogICAgICAgICAgICByZXMoZGF0YSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gcmVqKGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlaigpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGF0YUJ5SWQ6IGZ1bmN0aW9uIGdldERhdGFCeUlkKGlkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHsKICAgICAgICBTZXJ2aWNlLmdldFJlcG9ydEJ5SWQoaWQpLnRoZW4oZnVuY3Rpb24gKF9yZWY5KSB7CiAgICAgICAgICB2YXIgZGF0YSA9IF9yZWY5LmRhdGE7CiAgICAgICAgICByZXMoZGF0YSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiByZWooZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGVkaXRWYWx1ZTogZnVuY3Rpb24gZWRpdFZhbHVlKHJvd0luZGV4LCBpbmRleCkgewogICAgICB0aGlzLiRzZXQodGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtyb3dJbmRleF0sICdub3RFZGl0YWJsZScsIGZhbHNlKTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICByZXNldFZhbHVlOiBmdW5jdGlvbiByZXNldFZhbHVlKHJvd0luZGV4LCBpbmRleCkgewogICAgICB0aGlzLiRzZXQodGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtyb3dJbmRleF0sICdzZWxlY3RWYWx1ZUlkJywgdGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtyb3dJbmRleF0ub3JpZ2luYWxTZWxlY3RWYWx1ZUlkKTsKICAgICAgdGhpcy4kc2V0KHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdLCAnc2VsZWN0VmFsdWVOYW1lVXonLCB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW3Jvd0luZGV4XS5vcmlnaW5hbFNlbGVjdFZhbHVlTmFtZVV6KTsKICAgICAgdGhpcy4kc2V0KHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdLCAnc2VsZWN0VmFsdWVOYW1lTHQnLCB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW3Jvd0luZGV4XS5vcmlnaW5hbFNlbGVjdFZhbHVlTmFtZUx0KTsKICAgICAgdGhpcy4kc2V0KHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdLCAnc2VsZWN0VmFsdWVOYW1lUnUnLCB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW3Jvd0luZGV4XS5vcmlnaW5hbFNlbGVjdFZhbHVlTmFtZVJ1KTsKICAgICAgdGhpcy4kc2V0KHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdLCAnbm90RWRpdGFibGUnLCB0cnVlKTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICBzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUocm93SWQsIHZhbHVlLCByb3dJbmRleCwgaW5kZXgsIGlkLCB0eXBlQ29kZSkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciBub3RFZGl0YWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA2ICYmIGFyZ3VtZW50c1s2XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzZdIDogZmFsc2U7CiAgICAgIHZhciBpbml0aWFsTG9hZENhbGwgPSBhcmd1bWVudHMubGVuZ3RoID4gNyAmJiBhcmd1bWVudHNbN10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s3XSA6IGZhbHNlOwoKICAgICAgLy8gdmFsdWUucm93SWQgPSByb3dJZAogICAgICAvLyB2YWx1ZS50eXBlQ29kZSA9IHR5cGVDb2RlCiAgICAgIC8vCiAgICAgIC8vIHZhbHVlLm5vdEVkaXRhYmxlID0gbm90RWRpdGFibGUKICAgICAgLy8gdmFsdWUuc2VsZWN0VmFsdWVOYW1lTHQgPSB2YWx1ZS5uYW1lTHQKICAgICAgLy8gdmFsdWUuc2VsZWN0VmFsdWVOYW1lUnUgPSB2YWx1ZS5uYW1lUnUKICAgICAgLy8gdmFsdWUuc2VsZWN0VmFsdWVOYW1lVXogPSB2YWx1ZS5uYW1lVXoKICAgICAgLy8KCiAgICAgIC8qIHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdID0gew0KICAgICAgICByb3dJZDogcm93SWQgPyByb3dJZCA6IG51bGwsDQogICAgICAgIHZhbHVlOiB0eXBlQ29kZSA9PSAnU0VMRUNUJyA/ICcnIDogdmFsdWUsDQogICAgICAgIHNlbGVjdFZhbHVlTmFtZVV6OiB2YWx1ZSA/IHZhbHVlLm5hbWVVeiA6IG51bGwsDQogICAgICAgIHNlbGVjdFZhbHVlTmFtZUx0OiB2YWx1ZSA/IHZhbHVlLm5hbWVMdCA6IG51bGwsDQogICAgICAgIHNlbGVjdFZhbHVlTmFtZVJ1OiB2YWx1ZSA/IHZhbHVlLm5hbWVSdSA6IG51bGwsDQogICAgICAgIG9yaWdpbmFsU2VsZWN0VmFsdWVOYW1lVXo6IHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdID8gdGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtyb3dJbmRleF0ub3JpZ2luYWxTZWxlY3RWYWx1ZU5hbWVVeiA6ICcnLA0KICAgICAgICBvcmlnaW5hbFNlbGVjdFZhbHVlTmFtZUx0OiB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW3Jvd0luZGV4XSA/IHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdLm9yaWdpbmFsU2VsZWN0VmFsdWVOYW1lTHQgOiAnJywNCiAgICAgICAgb3JpZ2luYWxTZWxlY3RWYWx1ZU5hbWVSdTogdGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtyb3dJbmRleF0gPyB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW3Jvd0luZGV4XS5vcmlnaW5hbFNlbGVjdFZhbHVlTmFtZVJ1IDogJycsDQogICAgICAgIHR5cGVDb2RlOiB0eXBlQ29kZSwNCiAgICAgICAgY29sdW1uSWQ6IGlkLA0KICAgICAgICBub3RFZGl0YWJsZTogbm90RWRpdGFibGUNCiAgICAgIH07ICovCiAgICAgIGlmIChpbml0aWFsTG9hZENhbGwgJiYgdHlwZUNvZGUgPT09ICdTRUxFQ1QnKSB7CiAgICAgICAgdmFyIF9yb3dJbmRleCA9IHRoaXMuc2VsZWN0ZWRSb3dzLmZpbmRJbmRleChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5pZCA9PSByb3dJZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCF0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW19yb3dJbmRleF0ucm93SWQpIHsKICAgICAgICAgIHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbX3Jvd0luZGV4XSA9IHsKICAgICAgICAgICAgcm93SWQ6IHJvd0lkLAogICAgICAgICAgICB2YWx1ZTogdHlwZUNvZGUgPT09ICdTRUxFQ1QnID8gJycgOiB2YWx1ZSwKICAgICAgICAgICAgc2VsZWN0VmFsdWVJZDogdmFsdWUgPyB2YWx1ZS5pZCA6IG51bGwsCiAgICAgICAgICAgIHNlbGVjdFZhbHVlTmFtZVV6OiB2YWx1ZSA/IHZhbHVlLm5hbWVVeiA/IHZhbHVlLm5hbWVVeiA6IHZhbHVlLm5hbWUgOiBudWxsLAogICAgICAgICAgICBzZWxlY3RWYWx1ZU5hbWVMdDogdmFsdWUgPyB2YWx1ZS5uYW1lTHQgOiBudWxsLAogICAgICAgICAgICBzZWxlY3RWYWx1ZU5hbWVSdTogdmFsdWUgPyB2YWx1ZS5uYW1lUnUgOiBudWxsLAogICAgICAgICAgICBvcmlnaW5hbFNlbGVjdFZhbHVlTmFtZVV6OiB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW19yb3dJbmRleF0gPyB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW19yb3dJbmRleF0ub3JpZ2luYWxTZWxlY3RWYWx1ZU5hbWVVeiA6ICcnLAogICAgICAgICAgICBvcmlnaW5hbFNlbGVjdFZhbHVlTmFtZUx0OiB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW19yb3dJbmRleF0gPyB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW19yb3dJbmRleF0ub3JpZ2luYWxTZWxlY3RWYWx1ZU5hbWVMdCA6ICcnLAogICAgICAgICAgICBvcmlnaW5hbFNlbGVjdFZhbHVlTmFtZVJ1OiB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW19yb3dJbmRleF0gPyB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW19yb3dJbmRleF0ub3JpZ2luYWxTZWxlY3RWYWx1ZU5hbWVSdSA6ICcnLAogICAgICAgICAgICB0eXBlQ29kZTogdHlwZUNvZGUsCiAgICAgICAgICAgIGNvbHVtbklkOiBpZCwKICAgICAgICAgICAgbm90RWRpdGFibGU6IG5vdEVkaXRhYmxlCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtfcm93SW5kZXhdLm9yaWdpbmFsc2VsZWN0VmFsdWVJZCA9IHZhbHVlLmlkOwogICAgICAgICAgdGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtfcm93SW5kZXhdLm9yaWdpbmFsU2VsZWN0VmFsdWVOYW1lVXogPSB2YWx1ZS5uYW1lVXo7CiAgICAgICAgICB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW19yb3dJbmRleF0ub3JpZ2luYWxTZWxlY3RWYWx1ZU5hbWVMdCA9IHZhbHVlLm5hbWVMdDsKICAgICAgICAgIHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbX3Jvd0luZGV4XS5vcmlnaW5hbFNlbGVjdFZhbHVlTmFtZVJ1ID0gdmFsdWUubmFtZVJ1OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodHlwZUNvZGUgPT09ICdTRUxFQ1QnKSB7CiAgICAgICAgICB2YWx1ZS5yb3dJZCA9IHJvd0lkOwogICAgICAgICAgdmFsdWUuY29sdW1uSWQgPSBpZDsKICAgICAgICAgIHZhbHVlLnR5cGVDb2RlID0gdHlwZUNvZGU7CiAgICAgICAgICB2YWx1ZS5ub3RFZGl0YWJsZSA9IG5vdEVkaXRhYmxlOwogICAgICAgICAgdmFsdWUuc2VsZWN0VmFsdWVJZCA9IHZhbHVlLmlkOwogICAgICAgICAgdmFsdWUuc2VsZWN0VmFsdWVOYW1lTHQgPSB2YWx1ZS5uYW1lTHQ7CiAgICAgICAgICB2YWx1ZS5zZWxlY3RWYWx1ZU5hbWVSdSA9IHZhbHVlLm5hbWVSdTsKICAgICAgICAgIHZhbHVlLnNlbGVjdFZhbHVlTmFtZVV6ID0gdmFsdWUubmFtZVV6ID8gdmFsdWUubmFtZVV6IDogdmFsdWUubmFtZTsKICAgICAgICB9CgogICAgICAgIHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdID0gewogICAgICAgICAgcm93SWQ6IHJvd0lkLAogICAgICAgICAgdmFsdWU6IHR5cGVDb2RlID09PSAnU0VMRUNUJyA/ICcnIDogdmFsdWUsCiAgICAgICAgICBzZWxlY3RWYWx1ZUlkOiB2YWx1ZSA/IHZhbHVlLmlkIDogbnVsbCwKICAgICAgICAgIHNlbGVjdFZhbHVlTmFtZVV6OiB2YWx1ZSA/IHZhbHVlLm5hbWVVeiA6IG51bGwsCiAgICAgICAgICBzZWxlY3RWYWx1ZU5hbWVMdDogdmFsdWUgPyB2YWx1ZS5uYW1lTHQgOiBudWxsLAogICAgICAgICAgc2VsZWN0VmFsdWVOYW1lUnU6IHZhbHVlID8gdmFsdWUubmFtZVJ1IDogbnVsbCwKICAgICAgICAgIG9yaWdpbmFsU2VsZWN0VmFsdWVOYW1lVXo6IHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdID8gdGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtyb3dJbmRleF0ub3JpZ2luYWxTZWxlY3RWYWx1ZU5hbWVVeiA6ICcnLAogICAgICAgICAgb3JpZ2luYWxTZWxlY3RWYWx1ZU5hbWVMdDogdGhpcy50aGlyZFRySWREYXRhW2luZGV4XS52YWx1ZVtyb3dJbmRleF0gPyB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW3Jvd0luZGV4XS5vcmlnaW5hbFNlbGVjdFZhbHVlTmFtZUx0IDogJycsCiAgICAgICAgICBvcmlnaW5hbFNlbGVjdFZhbHVlTmFtZVJ1OiB0aGlzLnRoaXJkVHJJZERhdGFbaW5kZXhdLnZhbHVlW3Jvd0luZGV4XSA/IHRoaXMudGhpcmRUcklkRGF0YVtpbmRleF0udmFsdWVbcm93SW5kZXhdLm9yaWdpbmFsU2VsZWN0VmFsdWVOYW1lUnUgOiAnJywKICAgICAgICAgIHR5cGVDb2RlOiB0eXBlQ29kZSwKICAgICAgICAgIGNvbHVtbklkOiBpZCwKICAgICAgICAgIG5vdEVkaXRhYmxlOiBub3RFZGl0YWJsZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5vX2VudGVyX3ZhbHVlIikuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQpIHsKICAgICAgICBpZiAoSlNPTi5wYXJzZShpbnB1dC5pZCkucm93SWQpIHsKICAgICAgICAgIF90aGlzOS5mb3JtdWxhcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBpbmRleF9mMiA9IEpTT04ucGFyc2UoZS5mMikuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQgPT0gcGFyc2VGbG9hdChpZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgaW5kZXhfZjEgPSBKU09OLnBhcnNlKGUuZjEpLmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBkID09IHBhcnNlRmxvYXQoSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChpbmRleF9mMiA+IC0xICYmIGluZGV4X2YxID4gLTEgJiYgcGFyc2VGbG9hdChKU09OLnBhcnNlKGlucHV0LmlkKS5yb3dJZCkgPT09IHBhcnNlRmxvYXQocm93SWQpKSB7CiAgICAgICAgICAgICAgdmFyIGFsbFZhbCA9IDA7CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaW5wdXRfdmFsIikuZm9yRWFjaChmdW5jdGlvbiAodklucHV0KSB7CiAgICAgICAgICAgICAgICB2YXIgZV9pbmRleF9mMiA9IEpTT04ucGFyc2UoZS5mMikuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBkID09IHBhcnNlRmxvYXQoSlNPTi5wYXJzZSh2SW5wdXQuaWQpLmNvbHVtbklkKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChlX2luZGV4X2YyID4gLTEgJiYgcGFyc2VGbG9hdChKU09OLnBhcnNlKHZJbnB1dC5pZCkucm93SWQpID09PSBwYXJzZUZsb2F0KHJvd0lkKSkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXM5Ll9lbXB0eSh2SW5wdXQudmFsdWUpKSB7fSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhcnNlRmxvYXQodklucHV0LnZhbHVlKSA9PSAibnVtYmVyIikgewogICAgICAgICAgICAgICAgICAgICAgYWxsVmFsICs9IHBhcnNlRmxvYXQodklucHV0LnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgYWxsVmFsICs9IDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpczkuJHNldChpbnB1dCwgInZhbHVlIiwgcGFyc2VGbG9hdChhbGxWYWwpKTsKCiAgICAgICAgICAgICAgICAgIHZhciBmb3VuZEluZGV4ID0gX3RoaXM5LnRoaXJkVHJJZERhdGEuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuY29sdW1uSWQgPT0gSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQ7CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXM5LnRoaXJkVHJJZERhdGFbZm91bmRJbmRleF0udmFsdWVbcm93SW5kZXhdID0gewogICAgICAgICAgICAgICAgICAgIHJvd0lkOiByb3dJZCA/IHJvd0lkIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYWxsVmFsLAogICAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiB0eXBlQ29kZSwKICAgICAgICAgICAgICAgICAgICBjb2x1bW5JZDogSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQKICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgIF90aGlzOS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzOS5mb3JtdWxhcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBpbmRleF9mMiA9IEpTT04ucGFyc2UoZS5mMikuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQgPT0gcGFyc2VGbG9hdChpZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgaW5kZXhfZjEgPSBKU09OLnBhcnNlKGUuZjEpLmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBkID09IHBhcnNlRmxvYXQoSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChpbmRleF9mMiA+IC0xICYmIGluZGV4X2YxID4gLTEpIHsKICAgICAgICAgICAgICB2YXIgYWxsVmFsID0gMDsKICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpbnB1dF92YWwiKS5mb3JFYWNoKGZ1bmN0aW9uICh2SW5wdXQpIHsKICAgICAgICAgICAgICAgIHZhciBlX2luZGV4X2YyID0gSlNPTi5wYXJzZShlLmYyKS5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGQgPT0gcGFyc2VGbG9hdChKU09OLnBhcnNlKHZJbnB1dC5pZCkuY29sdW1uSWQpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKGVfaW5kZXhfZjIgPiAtMSkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXM5Ll9lbXB0eSh2SW5wdXQudmFsdWUpKSB7fSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhcnNlRmxvYXQodklucHV0LnZhbHVlKSA9PSAibnVtYmVyIikgewogICAgICAgICAgICAgICAgICAgICAgYWxsVmFsICs9IHBhcnNlRmxvYXQodklucHV0LnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgYWxsVmFsICs9IDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM5LiRzZXQoaW5wdXQsICJ2YWx1ZSIsIHBhcnNlRmxvYXQoYWxsVmFsKSk7CgogICAgICAgICAgICAgICAgdmFyIGZvdW5kSW5kZXggPSBfdGhpczkudGhpcmRUcklkRGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuY29sdW1uSWQgPT0gSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpczkudGhpcmRUcklkRGF0YVtmb3VuZEluZGV4XS52YWx1ZVswXSA9IHsKICAgICAgICAgICAgICAgICAgcm93SWQ6IG51bGwsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBhbGxWYWwsCiAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiB0eXBlQ29kZSwKICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IEpTT04ucGFyc2UoaW5wdXQuaWQpLmNvbHVtbklkCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF90aGlzOS4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICBzZXREb2N1bWVudENvbHVtblZhbHVlczogZnVuY3Rpb24gc2V0RG9jdW1lbnRDb2x1bW5WYWx1ZXMoZGF0YSwgZm9ybXVsYXMpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KCkgewogICAgICAgIHZhciBkb2NUYWJsZUZvcm11bGFUYXJnZXRJZCwgZGlzYWJsZWRFbGVtZW50czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTAuc2hvd0RhdGEgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzMTAuY3VycmVudEl0ZW1EYXRhID0gZGF0YTsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZS52YWx1ZVN0cmluZyB8fCBlLnZhbHVlQmlnRGVjaW1hbCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGUudHlwZUNvZGUgPT09ICJZRUFSIikgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjdXN0b20tZGF0ZXBpY2tlciBteC1kYXRlcGlja2VyIGR5bmFtaWMteWVhciIpLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkLCBpZHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoSlNPTi5wYXJzZShmaWVsZC5pZCkucm93SWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KEpTT04ucGFyc2UoZmllbGQuaWQpLmNvbHVtbklkKSA9PT0gcGFyc2VGbG9hdChlLmNvbHVtbklkKSAmJiBwYXJzZUZsb2F0KEpTT04ucGFyc2UoZmllbGQuaWQpLnJvd0lkKSA9PT0gcGFyc2VGbG9hdChlLnJvd0lkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93SW5kZXggPSBfdGhpczEwLnNlbGVjdGVkUm93cy5maW5kSW5kZXgoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlkID09IEpTT04ucGFyc2UoZmllbGQuaWQpLnJvd0lkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xJbmRleCA9IF90aGlzMTAudGhpcmRUcklkRGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jb2x1bW5JZCA9PT0gZS5jb2x1bW5JZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEwLnNldFZhbHVlKGUucm93SWQsIGUudmFsdWUsIHJvd0luZGV4LCBjb2xJbmRleCwgZS5jb2x1bW5JZCwgJ0RBVEUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudHlwZUNvZGUgPT09ICdCSUdERUNJTUFMJykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZENvbHVtbklkID0gX3RoaXMxMC5zaG93RGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmNvbHVtbklkID09PSBlLmNvbHVtbklkOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmRDb2x1bW5JZCA+IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEwLnNob3dEYXRhLm1hcChmdW5jdGlvbiAoZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5jb2x1bW5JZCA9PSBlLmNvbHVtbklkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5jb2x1bW5EYXRhID0gK2YuY29sdW1uRGF0YSArICtlLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5zaG93RGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IGUuY29sdW1uSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbkRhdGE6IGUudmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaW5wdXRfdmFsIikuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtdWxhcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhfViA9IEpTT04ucGFyc2UoZWxlbWVudC5mMSkuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09IEpTT04ucGFyc2UoaW5wdXQuaWQpLmNvbHVtbklkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4X1YgPiAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEwLiRzZXQoaW5wdXQsICJkaXNhYmxlZCIsIHRydWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC4kc2V0KGlucHV0LnN0eWxlLCAiYm9yZGVyIiwgIm5vbmUiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoIm5vX2VudGVyX3ZhbHVlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnN0eWxlLmZvbnRXZWlnaHQgPSAiYm9sZCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnBhcnNlKGlucHV0LmlkKS5yb3dJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlRmxvYXQoSlNPTi5wYXJzZShpbnB1dC5pZCkuY29sdW1uSWQpID09PSBwYXJzZUZsb2F0KGUuY29sdW1uSWQpICYmIHBhcnNlRmxvYXQoSlNPTi5wYXJzZShpbnB1dC5pZCkucm93SWQpID09PSBwYXJzZUZsb2F0KGUucm93SWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTAuJHNldChpbnB1dCwgInZhbHVlIiwgZS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KEpTT04ucGFyc2UoaW5wdXQuaWQpLmNvbHVtbklkKSA9PT0gcGFyc2VGbG9hdChlLmNvbHVtbklkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEwLiRzZXQoaW5wdXQsICJ2YWx1ZSIsIGUudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnZhbHVlRGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY3VzdG9tLWRhdGVwaWNrZXIgbXgtZGF0ZXBpY2tlciBkeW5hbWljLWRhdGVwaWNrZXIiKS5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCwgaWR4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnBhcnNlKGZpZWxkLmlkKS5yb3dJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KEpTT04ucGFyc2UoZmllbGQuaWQpLmNvbHVtbklkKSA9PT0gcGFyc2VGbG9hdChlLmNvbHVtbklkKSAmJiBwYXJzZUZsb2F0KEpTT04ucGFyc2UoZmllbGQuaWQpLnJvd0lkKSA9PT0gcGFyc2VGbG9hdChlLnJvd0lkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvd0luZGV4ID0gX3RoaXMxMC5zZWxlY3RlZFJvd3MuZmluZEluZGV4KGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwuaWQgPT0gSlNPTi5wYXJzZShmaWVsZC5pZCkucm93SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sSW5kZXggPSBfdGhpczEwLnRoaXJkVHJJZERhdGEuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNvbHVtbklkID09PSBlLmNvbHVtbklkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5zZXRWYWx1ZShlLnJvd0lkLCBlLnZhbHVlLCByb3dJbmRleCwgY29sSW5kZXgsIGUuY29sdW1uSWQsICdEQVRFJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudmFsdWVCb29sZWFuICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjaGVja2JveF9maWVsZCIpLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkLCBpZHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrYm94SW5wdXQgPSBmaWVsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpID8gZmllbGQuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0gOiBmaWVsZC5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblswXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2JveElucHV0LmlkICYmIEpTT04ucGFyc2UoY2hlY2tib3hJbnB1dC5pZCkgJiYgSlNPTi5wYXJzZShjaGVja2JveElucHV0LmlkKS5yb3dJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KEpTT04ucGFyc2UoY2hlY2tib3hJbnB1dC5pZCkuY29sdW1uSWQpID09PSBwYXJzZUZsb2F0KGUuY29sdW1uSWQpICYmIHBhcnNlRmxvYXQoSlNPTi5wYXJzZShjaGVja2JveElucHV0LmlkKS5yb3dJZCkgPT09IHBhcnNlRmxvYXQoZS5yb3dJZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IF90aGlzMTAuc2VsZWN0ZWRSb3dzLmZpbmRJbmRleChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlkID09IEpTT04ucGFyc2UoY2hlY2tib3hJbnB1dC5pZCkucm93SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sSW5kZXggPSBfdGhpczEwLnRoaXJkVHJJZERhdGEuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNvbHVtbklkID09IGUuY29sdW1uSWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEwLnNldFZhbHVlKGUucm93SWQsIEpTT04ucGFyc2UoZS52YWx1ZSksIHJvd0luZGV4LCBjb2xJbmRleCwgZS5jb2x1bW5JZCwgJ0JPT0xFQU4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5zZWxlY3RWYWx1ZU5hbWVVeikgewogICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic2VsZWN0X2ZpZWxkIikuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQsIGlkeCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoSlNPTi5wYXJzZShmaWVsZC5pZCkucm93SWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdChKU09OLnBhcnNlKGZpZWxkLmlkKS5jb2x1bW5JZCkgPT09IHBhcnNlRmxvYXQoZS5jb2x1bW5JZCkgJiYgcGFyc2VGbG9hdChKU09OLnBhcnNlKGZpZWxkLmlkKS5yb3dJZCkgPT09IHBhcnNlRmxvYXQoZS5yb3dJZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3dJbmRleCA9IF90aGlzMTAuc2VsZWN0ZWRSb3dzLmZpbmRJbmRleChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlkID09IEpTT04ucGFyc2UoZmllbGQuaWQpLnJvd0lkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbEluZGV4ID0gX3RoaXMxMC50aGlyZFRySWREYXRhLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jb2x1bW5JZCA9PSBlLmNvbHVtbklkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5zZXRWYWx1ZShlLnJvd0lkLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVVejogZS5zZWxlY3RWYWx1ZU5hbWVVeiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUx0OiBlLnNlbGVjdFZhbHVlTmFtZUx0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lUnU6IGUuc2VsZWN0VmFsdWVOYW1lUnUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlLnNlbGVjdFZhbHVlSWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJvd0luZGV4LCBjb2xJbmRleCwgZS5jb2x1bW5JZCwgJ1NFTEVDVCcsIHRydWUsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImlucHV0X3ZhbCIpLmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9ybXVsYXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4X1YgPSBKU09OLnBhcnNlKGVsZW1lbnQuZjEpLmZpbmRJbmRleChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9PSBKU09OLnBhcnNlKGlucHV0LmlkKS5jb2x1bW5JZDsKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleF9WID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC4kc2V0KGlucHV0LCAiZGlzYWJsZWQiLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTAuJHNldChpbnB1dC5zdHlsZSwgImJvcmRlciIsICJub25lIik7CgogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCJub19lbnRlcl92YWx1ZSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5zdHlsZS5mb250V2VpZ2h0ID0gImJvbGQiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKGRvY1RhYmxlRm9ybXVsYVRhcmdldElkIGluIF90aGlzMTAuZG9jVGFibGVGb3JtdWxhc0xpc3QpIHsKICAgICAgICAgICAgICAgICAgZGlzYWJsZWRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W2RhdGEtY29sdW1uLWlkPSInICsgZG9jVGFibGVGb3JtdWxhVGFyZ2V0SWQgKyAnIl0nKTsKICAgICAgICAgICAgICAgICAgZGlzYWJsZWRFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJub19lbnRlcl92YWx1ZSIpOwogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRCeUlkOiBmdW5jdGlvbiBnZXRCeUlkKGlkLCByZXBvcnRJZCwgaW5mbykgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczExLmNsZWFyQWxsKCk7CgogICAgICAgICAgICAgICAgX3RoaXMxMS50YWJsZUlkID0gaWQ7CiAgICAgICAgICAgICAgICBfdGhpczExLnJlcG9ydElkID0gcmVwb3J0SWQ7CiAgICAgICAgICAgICAgICBfdGhpczExLnRhYmxlSW5mbyA9IGluZm87CiAgICAgICAgICAgICAgICBfdGhpczExLmxvYWRlciA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2UucmVwb3J0R2V0QnlJZChyZXBvcnRJZCkudGhlbihmdW5jdGlvbiAoX3JlZjEwKSB7CiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gX3JlZjEwLmRhdGE7CiAgICAgICAgICAgICAgICAgIF90aGlzMTEucmVwb3J0ID0gZGF0YTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTEuJGVtaXQoJ3NldFJlcG9ydEdlbmVyYXRlZCcsIF90aGlzMTEucmVwb3J0LmdlbmVyYXRlZCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlLmdldEJ5SWRUYWJsZVdpdGhSZXBvcnRJZChpZCwgcmVwb3J0SWQpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNShycykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFycy5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMS5zZXRDb2x1bW5zKHJzLmRhdGEuY29sdW1ucywgcnMuZGF0YS5yb3dzLmxlbmd0aCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuc2V0Um93KHJzLmRhdGEucm93cyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS50YWJsZSA9IHJzLmRhdGEudGFibGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW190aGlzMTEuZ2V0RGF0YUJ5SWQocmVwb3J0SWQpLCBfdGhpczExLmdldEZvcm11bGFzXzIoKV0pLnRoZW4oZnVuY3Rpb24gKF9yZWYxMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMTMgPSBfc2xpY2VkVG9BcnJheShfcmVmMTIsIDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gX3JlZjEzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtdWxhcyA9IF9yZWYxM1sxXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5sYXN0UmVwb3J0RGF0YSA9IGRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5sYXN0UmVwb3J0Rm9ybXVsYXMgPSBmb3JtdWxhczsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5zZXREb2N1bWVudENvbHVtblZhbHVlcyhkYXRhLCBmb3JtdWxhcyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEubG9hZGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTUpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxMS5sb2FkZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlLmdldERvY1RhYmxlRm9ybXVsYXNMaXN0KGlkKS50aGVuKGZ1bmN0aW9uIChfcmVmMTQpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBfcmVmMTQuZGF0YTsKICAgICAgICAgICAgICAgICAgX3RoaXMxMS5kb2NUYWJsZUZvcm11bGFzTGlzdCA9IHt9OwogICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gZGF0YS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGFyZ2V0Q29sdW1uSWQgPSBudWxsOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczExLmRvY1RhYmxlRm9ybXVsYXNMaXN0W2RhdGFbaV0udGFyZ2V0Q29sdW1uSWRdID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXRDb2x1bW5JZCA9IGRhdGFbaV0udGFyZ2V0Q29sdW1uSWQ7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczExLmRvY1RhYmxlRm9ybXVsYXNMaXN0W2RhdGFbaV0udGFyZ2V0Q29sdW1uSWRdID0gewogICAgICAgICAgICAgICAgICAgICAgICBldmFsOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbkNvbHVtbnM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb2x1bW5JZDogZGF0YVtpXS50YXJnZXRDb2x1bW5JZAogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIF90aGlzMTEuZG9jVGFibGVGb3JtdWxhc0xpc3RbZGF0YVtpXS50YXJnZXRDb2x1bW5JZF0ubGlzdC5wdXNoKGRhdGFbaV0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXS5kb2NDb2x1bW5JZCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV0uZG9jQ29sdW1uSWQgJiYgX3RoaXMxMS5kb2NUYWJsZUZvcm11bGFzTGlzdFtkYXRhW2ldLnRhcmdldENvbHVtbklkXS5saXN0ZW5Db2x1bW5zLmluZGV4T2YoZGF0YVtpXS5kb2NDb2x1bW5JZCkgPT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuZG9jVGFibGVGb3JtdWxhc0xpc3RbZGF0YVtpXS50YXJnZXRDb2x1bW5JZF0ubGlzdGVuQ29sdW1ucy5wdXNoKGRhdGFbaV0uZG9jQ29sdW1uSWQpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczExLmRvY1RhYmxlRm9ybXVsYXNMaXN0ZW5Db2x1bW5JZFtkYXRhW2ldLmRvY0NvbHVtbklkXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuZG9jVGFibGVGb3JtdWxhc0xpc3RlbkNvbHVtbklkW2RhdGFbaV0uZG9jQ29sdW1uSWRdID0gW2RhdGFbaV0udGFyZ2V0Q29sdW1uSWRdOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMTEuZG9jVGFibGVGb3JtdWxhc0xpc3RlbkNvbHVtbklkW2RhdGFbaV0uZG9jQ29sdW1uSWRdLmluZGV4T2YoZGF0YVtpXS50YXJnZXRDb2x1bW5JZCkgPT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5kb2NUYWJsZUZvcm11bGFzTGlzdGVuQ29sdW1uSWRbZGF0YVtpXS5kb2NDb2x1bW5JZF0ucHVzaChkYXRhW2ldLnRhcmdldENvbHVtbklkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV0udHlwZSA9PT0gIkFSR1VNRU5UUyIpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuZG9jVGFibGVGb3JtdWxhc0xpc3RbZGF0YVtpXS50YXJnZXRDb2x1bW5JZF0uZXZhbCArPSAieyIgKyBkYXRhW2ldLmRvY0NvbHVtbklkICsgIn0iOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczExLmRvY1RhYmxlRm9ybXVsYXNMaXN0W2RhdGFbaV0udGFyZ2V0Q29sdW1uSWRdLmV2YWwgKz0gZGF0YVtpXS5jb2RlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldENvbHVtbnM6IGZ1bmN0aW9uIHNldENvbHVtbnModiwgcm93c0NvdW50KSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE5JChfY29udGV4dDE5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTIuc2VsZWN0ZWRDb2x1bW5zID0gdjsKICAgICAgICAgICAgICAgIF90aGlzMTIuZmlyc3RDb2x1bW5zID0gW107CiAgICAgICAgICAgICAgICBfdGhpczEyLnNlY29uZENvbHVtbnMgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzMTIudGhpcmRDb2x1bW5zID0gW107CiAgICAgICAgICAgICAgICB2LmZvckVhY2goZnVuY3Rpb24gKGVsMSkgewogICAgICAgICAgICAgICAgICBfdGhpczEyLmZpcnN0Q29sdW1ucy5wdXNoKGVsMSk7CgogICAgICAgICAgICAgICAgICBlbDEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoZWwyKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5zZWNvbmRDb2x1bW5zLnB1c2goZWwyKTsKCiAgICAgICAgICAgICAgICAgICAgZWwyLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGVsMykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi50aGlyZENvbHVtbnMucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGVsMyksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZJZDogZWwxLmlkCiAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTgoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBmaXJzdFRyVGgsIHNlY29uZFRyVGgsIHRoaXJkVHJUaCwgY291bnRlcjIsIGNvdW50ZXIzOwogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE4JChfY29udGV4dDE4KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOC5wcmV2ID0gX2NvbnRleHQxOC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFRyVGggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJmaXJzdFRyVGgiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRUclRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic2Vjb25kVHJUaCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXJkVHJUaCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInRoaXJkVHJUaCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIyID0gMCwgY291bnRlcjMgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0VHJUaC5mb3JFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYxNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE3KHRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleDIsIF9sb29wLCBpbmRleDMsIF9sb29wMiwgX2luZGV4LCBhcnJheSwgdG1wLCBpLCBfaW5kZXgyLCBfbG9vcDMsIF9pbmRleDMsIF9sb29wNCwgX2luZGV4NDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTckKF9jb250ZXh0MTcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aC5jb2xTcGFuID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbmRleDIgPSAwOyBpbmRleDIgPCB0aC5jb2xTcGFuOyBpbmRleDIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kVHJUaFtjb3VudGVyMl0gJiYgc2Vjb25kVHJUaFtjb3VudGVyMl0uY29sU3BhbiA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGluZGV4MykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gdGhpcmRUclRoW2NvdW50ZXIzXS5pZC5zcGxpdCgiLCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IGFycmF5WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlQ29kZTogYXJyYXlbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZkNvZGU6IGFycmF5WzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VVcmw6IGFycmF5WzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VBcHBlbmRVcmw6IGFycmF5WzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VDb2RlOiBhcnJheVs1XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZVV6OiBhcnJheVs2XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZUx0OiBhcnJheVs3XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZVJ1OiBhcnJheVs4XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoUGF5bG9hZDogT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxMi52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc05leHRQYWdlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0lkOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBHRVQgRFlOQU1JQyBSRUZSRU5DRSBPUFRJT05TCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR0VUIERZTkFNSUMgUkVGUkVOQ0UgT1BUSU9OUwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcC50eXBlQ29kZSA9PSAnU0VMRUNUJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd3NDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnZhbHVlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2Uuc2VhcmNoTGlzdFdpdGhLZXl3b3JkKHRtcC5yZWZlcmVuY2VVcmwsIHRtcC5zZWFyY2hQYXlsb2FkLCB0bXAucmVmZXJlbmNlQXBwZW5kVXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIkRlcGFydG1lbnRGb3JEb2N1bWVudCIgPT09IHRtcC5yZWZDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG1wJG9wdGlvbnMgPSB0bXAub3B0aW9ucykucHVzaC5hcHBseShfdG1wJG9wdGlvbnMsIF90b0NvbnN1bWFibGVBcnJheShyZXMuZGF0YSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zMjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX3RtcCRvcHRpb25zMiA9IHRtcC5vcHRpb25zKS5wdXNoLmFwcGx5KF90bXAkb3B0aW9uczIsIF90b0NvbnN1bWFibGVBcnJheShyZXMuZGF0YS5saXN0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuaGFzTmV4dFBhZ2UgPSByZXMuZGF0YS50b3RhbCAvIHRtcC5zZWFyY2hQYXlsb2FkLml0ZW1zUGVyUGFnZSA+IHRtcC5zZWFyY2hQYXlsb2FkLnBhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnNlYXJjaFBheWxvYWQucGFnZSArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGlmICghdGhpcy5pc01vZGVDcmVhdGUgJiYgdGhpcy5lZGl0aW5nSXRlbS5va2VkSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZEl0bSA9IHRoaXMub2tlZHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLm9rZWRJZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRJdG0gJiYgdGhpcy5lZGl0aW5nSXRlbS5pbmZvT2tlZER0bykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2tlZHMucHVzaCh0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7IC8vIHRoaXMub2tlZHMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsvLyB0aGlzLmlzTG9hZGluZ09rZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEyLnRoaXJkVHJJZERhdGEucHVzaCh0bXApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIzKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbmRleDMgPSAwOyBpbmRleDMgPCBzZWNvbmRUclRoW2NvdW50ZXIyXS5jb2xTcGFuOyBpbmRleDMrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3AoaW5kZXgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIyKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZFRyVGhbY291bnRlcjJdICYmIHNlY29uZFRyVGhbY291bnRlcjJdLmNsYXNzTGlzdC5jb250YWlucygidGhpcmRUcklkIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHNlY29uZFRyVGhbY291bnRlcjJdLmlkLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IGFycmF5WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiBhcnJheVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZDb2RlOiBhcnJheVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VVcmw6IGFycmF5WzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUFwcGVuZFVybDogYXJyYXlbNF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlQ29kZTogYXJyYXlbNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZVV6OiBhcnJheVs2XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VOYW1lTHQ6IGFycmF5WzddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZU5hbWVSdTogYXJyYXlbOF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoUGF5bG9hZDogT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxMi52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTmV4dFBhZ2U6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0lkOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gR0VUIERZTkFNSUMgUkVGUkVOQ0UgT1BUSU9OUwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR0VUIERZTkFNSUMgUkVGUkVOQ0UgT1BUSU9OUwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wLnR5cGVDb2RlID09ICdTRUxFQ1QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzQ291bnQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnZhbHVlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW06IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQodG1wLnJlZmVyZW5jZVVybCwgdG1wLnNlYXJjaFBheWxvYWQsIHRtcC5yZWZlcmVuY2VBcHBlbmRVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJEZXBhcnRtZW50Rm9yRG9jdW1lbnQiID09PSB0bXAucmVmQ29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zMzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG1wJG9wdGlvbnMzID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zMywgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zNDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG1wJG9wdGlvbnM0ID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zNCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLmxpc3QpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuaGFzTmV4dFBhZ2UgPSByZXMuZGF0YS50b3RhbCAvIHRtcC5zZWFyY2hQYXlsb2FkLml0ZW1zUGVyUGFnZSA+IHRtcC5zZWFyY2hQYXlsb2FkLnBhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuc2VhcmNoUGF5bG9hZC5wYWdlICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBpZiAoIXRoaXMuaXNNb2RlQ3JlYXRlICYmIHRoaXMuZWRpdGluZ0l0ZW0ub2tlZElkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZEl0bSA9IHRoaXMub2tlZHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLm9rZWRJZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZEl0bSAmJiB0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9rZWRzLnB1c2godGhpcy5lZGl0aW5nSXRlbS5pbmZvT2tlZER0bykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7IC8vIHRoaXMub2tlZHMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgey8vIHRoaXMuaXNMb2FkaW5nT2tlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIudGhpcmRUcklkRGF0YS5wdXNoKHRtcCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyMisrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZFRyVGhbY291bnRlcjJdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihfaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSB0aGlyZFRyVGhbY291bnRlcjNdLmlkLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbklkOiBhcnJheVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiBhcnJheVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZkNvZGU6IGFycmF5WzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlVXJsOiBhcnJheVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUFwcGVuZFVybDogYXJyYXlbNF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VDb2RlOiBhcnJheVs1XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZU5hbWVVejogYXJyYXlbNl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VOYW1lTHQ6IGFycmF5WzddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZVJ1OiBhcnJheVs4XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFBheWxvYWQ6IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMTIudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTmV4dFBhZ2U6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJZDogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBHRVQgRFlOQU1JQyBSRUZSRU5DRSBPUFRJT05TCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdFVCBEWU5BTUlDIFJFRlJFTkNFIE9QVElPTlMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wLnR5cGVDb2RlID09ICdTRUxFQ1QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd3NDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcC52YWx1ZS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW06IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQodG1wLnJlZmVyZW5jZVVybCwgdG1wLnNlYXJjaFBheWxvYWQsIHRtcC5yZWZlcmVuY2VBcHBlbmRVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIkRlcGFydG1lbnRGb3JEb2N1bWVudCIgPT09IHRtcC5yZWZDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF90bXAkb3B0aW9uczU7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG1wJG9wdGlvbnM1ID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zNSwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF90bXAkb3B0aW9uczY7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG1wJG9wdGlvbnM2ID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zNiwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLmxpc3QpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLmhhc05leHRQYWdlID0gcmVzLmRhdGEudG90YWwgLyB0bXAuc2VhcmNoUGF5bG9hZC5pdGVtc1BlclBhZ2UgPiB0bXAuc2VhcmNoUGF5bG9hZC5wYWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuc2VhcmNoUGF5bG9hZC5wYWdlICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGlmICghdGhpcy5pc01vZGVDcmVhdGUgJiYgdGhpcy5lZGl0aW5nSXRlbS5va2VkSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmRJdG0gPSB0aGlzLm9rZWRzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5lZGl0aW5nSXRlbS5va2VkSWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZEl0bSAmJiB0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2tlZHMucHVzaCh0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOyAvLyB0aGlzLm9rZWRzID0gW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgey8vIHRoaXMuaXNMb2FkaW5nT2tlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIudGhpcmRUcklkRGF0YS5wdXNoKHRtcCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIzKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pbmRleCA9IDA7IF9pbmRleCA8IHNlY29uZFRyVGhbY291bnRlcjJdLmNvbFNwYW47IF9pbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3AyKF9pbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIyKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aC5jbGFzc0xpc3QuY29udGFpbnMoInRoaXJkVHJJZCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5ID0gdGguaWQuc3BsaXQoIiwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbklkOiBhcnJheVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlQ29kZTogYXJyYXlbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmQ29kZTogYXJyYXlbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlVXJsOiBhcnJheVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VBcHBlbmRVcmw6IGFycmF5WzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUNvZGU6IGFycmF5WzVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZU5hbWVVejogYXJyYXlbNl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZUx0OiBhcnJheVs3XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VOYW1lUnU6IGFycmF5WzhdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFBheWxvYWQ6IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMTIudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc05leHRQYWdlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJZDogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07IC8vIEdFVCBEWU5BTUlDIFJFRlJFTkNFIE9QVElPTlMKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdFVCBEWU5BTUlDIFJFRlJFTkNFIE9QVElPTlMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcC50eXBlQ29kZSA9PSAnU0VMRUNUJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCByb3dzQ291bnQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnZhbHVlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW06IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQodG1wLnJlZmVyZW5jZVVybCwgdG1wLnNlYXJjaFBheWxvYWQsIHRtcC5yZWZlcmVuY2VBcHBlbmRVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJEZXBhcnRtZW50Rm9yRG9jdW1lbnQiID09PSB0bXAucmVmQ29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zNzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG1wJG9wdGlvbnM3ID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zNywgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zODsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG1wJG9wdGlvbnM4ID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zOCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLmxpc3QpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuaGFzTmV4dFBhZ2UgPSByZXMuZGF0YS50b3RhbCAvIHRtcC5zZWFyY2hQYXlsb2FkLml0ZW1zUGVyUGFnZSA+IHRtcC5zZWFyY2hQYXlsb2FkLnBhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuc2VhcmNoUGF5bG9hZC5wYWdlICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBpZiAoIXRoaXMuaXNNb2RlQ3JlYXRlICYmIHRoaXMuZWRpdGluZ0l0ZW0ub2tlZElkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZEl0bSA9IHRoaXMub2tlZHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLm9rZWRJZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZEl0bSAmJiB0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9rZWRzLnB1c2godGhpcy5lZGl0aW5nSXRlbS5pbmZvT2tlZER0bykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7IC8vIHRoaXMub2tlZHMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgey8vIHRoaXMuaXNMb2FkaW5nT2tlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIudGhpcmRUcklkRGF0YS5wdXNoKHRtcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pbmRleDIgPSAwOyBfaW5kZXgyIDwgdGguY29sU3BhbjsgX2luZGV4MisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZFRyVGhbY291bnRlcjJdLmNvbFNwYW4gPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMoX2luZGV4MykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSB0aGlyZFRyVGhbY291bnRlcjNdLmlkLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IGFycmF5WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiBhcnJheVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZDb2RlOiBhcnJheVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VVcmw6IGFycmF5WzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUFwcGVuZFVybDogYXJyYXlbNF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlQ29kZTogYXJyYXlbNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZVV6OiBhcnJheVs2XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VOYW1lTHQ6IGFycmF5WzddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZU5hbWVSdTogYXJyYXlbOF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoUGF5bG9hZDogT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxMi52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTmV4dFBhZ2U6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0lkOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy8gR0VUIERZTkFNSUMgUkVGUkVOQ0UgT1BUSU9OUwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR0VUIERZTkFNSUMgUkVGUkVOQ0UgT1BUSU9OUwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wLnR5cGVDb2RlID09ICdTRUxFQ1QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgcm93c0NvdW50OyBfaTIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnZhbHVlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW06IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQodG1wLnJlZmVyZW5jZVVybCwgdG1wLnNlYXJjaFBheWxvYWQsIHRtcC5yZWZlcmVuY2VBcHBlbmRVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJEZXBhcnRtZW50Rm9yRG9jdW1lbnQiID09PSB0bXAucmVmQ29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zOTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfdG1wJG9wdGlvbnM5ID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zOSwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zMTA7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX3RtcCRvcHRpb25zMTAgPSB0bXAub3B0aW9ucykucHVzaC5hcHBseShfdG1wJG9wdGlvbnMxMCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLmxpc3QpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuaGFzTmV4dFBhZ2UgPSByZXMuZGF0YS50b3RhbCAvIHRtcC5zZWFyY2hQYXlsb2FkLml0ZW1zUGVyUGFnZSA+IHRtcC5zZWFyY2hQYXlsb2FkLnBhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuc2VhcmNoUGF5bG9hZC5wYWdlICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBpZiAoIXRoaXMuaXNNb2RlQ3JlYXRlICYmIHRoaXMuZWRpdGluZ0l0ZW0ub2tlZElkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZEl0bSA9IHRoaXMub2tlZHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLm9rZWRJZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZEl0bSAmJiB0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9rZWRzLnB1c2godGhpcy5lZGl0aW5nSXRlbS5pbmZvT2tlZER0bykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7IC8vIHRoaXMub2tlZHMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgey8vIHRoaXMuaXNMb2FkaW5nT2tlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIudGhpcmRUcklkRGF0YS5wdXNoKHRtcCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyMysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pbmRleDMgPSAwOyBfaW5kZXgzIDwgc2Vjb25kVHJUaFtjb3VudGVyMl0uY29sU3BhbjsgX2luZGV4MysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wMyhfaW5kZXgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyMisrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kVHJUaFtjb3VudGVyMl0gJiYgc2Vjb25kVHJUaFtjb3VudGVyMl0uY2xhc3NMaXN0LmNvbnRhaW5zKCJ0aGlyZFRySWQiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHNlY29uZFRyVGhbY291bnRlcjJdLmlkLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbklkOiBhcnJheVswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiBhcnJheVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZkNvZGU6IGFycmF5WzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlVXJsOiBhcnJheVszXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUFwcGVuZFVybDogYXJyYXlbNF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VDb2RlOiBhcnJheVs1XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZU5hbWVVejogYXJyYXlbNl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VOYW1lTHQ6IGFycmF5WzddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZVJ1OiBhcnJheVs4XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFBheWxvYWQ6IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMTIudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTmV4dFBhZ2U6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJZDogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBHRVQgRFlOQU1JQyBSRUZSRU5DRSBPUFRJT05TCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdFVCBEWU5BTUlDIFJFRlJFTkNFIE9QVElPTlMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wLnR5cGVDb2RlID09ICdTRUxFQ1QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCByb3dzQ291bnQ7IF9pMysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcC52YWx1ZS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW06IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQodG1wLnJlZmVyZW5jZVVybCwgdG1wLnNlYXJjaFBheWxvYWQsIHRtcC5yZWZlcmVuY2VBcHBlbmRVcmwpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIkRlcGFydG1lbnRGb3JEb2N1bWVudCIgPT09IHRtcC5yZWZDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF90bXAkb3B0aW9uczExOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX3RtcCRvcHRpb25zMTEgPSB0bXAub3B0aW9ucykucHVzaC5hcHBseShfdG1wJG9wdGlvbnMxMSwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF90bXAkb3B0aW9uczEyOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX3RtcCRvcHRpb25zMTIgPSB0bXAub3B0aW9ucykucHVzaC5hcHBseShfdG1wJG9wdGlvbnMxMiwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLmxpc3QpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLmhhc05leHRQYWdlID0gcmVzLmRhdGEudG90YWwgLyB0bXAuc2VhcmNoUGF5bG9hZC5pdGVtc1BlclBhZ2UgPiB0bXAuc2VhcmNoUGF5bG9hZC5wYWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuc2VhcmNoUGF5bG9hZC5wYWdlICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGlmICghdGhpcy5pc01vZGVDcmVhdGUgJiYgdGhpcy5lZGl0aW5nSXRlbS5va2VkSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmRJdG0gPSB0aGlzLm9rZWRzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5lZGl0aW5nSXRlbS5va2VkSWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZEl0bSAmJiB0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2tlZHMucHVzaCh0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOyAvLyB0aGlzLm9rZWRzID0gW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgey8vIHRoaXMuaXNMb2FkaW5nT2tlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIudGhpcmRUcklkRGF0YS5wdXNoKHRtcCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIyKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kVHJUaFtjb3VudGVyMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcDQgPSBmdW5jdGlvbiBfbG9vcDQoX2luZGV4NCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gdGhpcmRUclRoW2NvdW50ZXIzXS5pZC5zcGxpdCgiLCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uSWQ6IGFycmF5WzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlQ29kZTogYXJyYXlbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZkNvZGU6IGFycmF5WzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VVcmw6IGFycmF5WzNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VBcHBlbmRVcmw6IGFycmF5WzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VDb2RlOiBhcnJheVs1XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZVV6OiBhcnJheVs2XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZUx0OiBhcnJheVs3XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTmFtZVJ1OiBhcnJheVs4XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoUGF5bG9hZDogT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxMi52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc05leHRQYWdlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0lkOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OyAvLyBHRVQgRFlOQU1JQyBSRUZSRU5DRSBPUFRJT05TCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR0VUIERZTkFNSUMgUkVGUkVOQ0UgT1BUSU9OUwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcC50eXBlQ29kZSA9PSAnU0VMRUNUJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCByb3dzQ291bnQ7IF9pNCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnZhbHVlLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2Uuc2VhcmNoTGlzdFdpdGhLZXl3b3JkKHRtcC5yZWZlcmVuY2VVcmwsIHRtcC5zZWFyY2hQYXlsb2FkLCB0bXAucmVmZXJlbmNlQXBwZW5kVXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIkRlcGFydG1lbnRGb3JEb2N1bWVudCIgPT09IHRtcC5yZWZDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zMTM7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF90bXAkb3B0aW9uczEzID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zMTMsIF90b0NvbnN1bWFibGVBcnJheShyZXMuZGF0YSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RtcCRvcHRpb25zMTQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF90bXAkb3B0aW9uczE0ID0gdG1wLm9wdGlvbnMpLnB1c2guYXBwbHkoX3RtcCRvcHRpb25zMTQsIF90b0NvbnN1bWFibGVBcnJheShyZXMuZGF0YS5saXN0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAuaGFzTmV4dFBhZ2UgPSByZXMuZGF0YS50b3RhbCAvIHRtcC5zZWFyY2hQYXlsb2FkLml0ZW1zUGVyUGFnZSA+IHRtcC5zZWFyY2hQYXlsb2FkLnBhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnNlYXJjaFBheWxvYWQucGFnZSArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGlmICghdGhpcy5pc01vZGVDcmVhdGUgJiYgdGhpcy5lZGl0aW5nSXRlbS5va2VkSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZEl0bSA9IHRoaXMub2tlZHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLm9rZWRJZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRJdG0gJiYgdGhpcy5lZGl0aW5nSXRlbS5pbmZvT2tlZER0bykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2tlZHMucHVzaCh0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7IC8vIHRoaXMub2tlZHMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsvLyB0aGlzLmlzTG9hZGluZ09rZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEyLnRoaXJkVHJJZERhdGEucHVzaCh0bXApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIzKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChfaW5kZXg0ID0gMDsgX2luZGV4NCA8IHNlY29uZFRyVGhbY291bnRlcjJdLmNvbFNwYW47IF9pbmRleDQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvb3A0KF9pbmRleDQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcjIrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTgpOwogICAgICAgICAgICAgICAgfSkpLCAzMDApOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxOSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldFJvdzogZnVuY3Rpb24gc2V0Um93KHYpIHsKICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSB2OwogICAgICB0aGlzLmxhc3RSZXBvcnREYXRhUm93cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodikpOwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aCA9PSAwICYmICF0aGlzLmlzR2VuZXJhdGVkKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbewogICAgICAgICAgaWQ6IHRoaXMuZ2V0UmFuZG9tSW50KCkKICAgICAgICB9XTsKICAgICAgfQogICAgfSwKICAgIHJvd3NwYW5GaXJzdDogZnVuY3Rpb24gcm93c3BhbkZpcnN0KGVsKSB7CiAgICAgIHJldHVybiBlbC5jaGlsZHJlbi5sZW5ndGggPiAwID8gMSA6IGVsLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgdGhpcy50aGlyZENvbHVtbnMubGVuZ3RoID4gMCA/IDMgOiAzOwogICAgfSwKICAgIGNvbHNwYW5GaXJzdDogZnVuY3Rpb24gY29sc3BhbkZpcnN0KGVsKSB7CiAgICAgIHZhciBmb3VuZCA9IHRoaXMudGhpcmRDb2x1bW5zLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLmZJZCA9PT0gZWwuaWQ7CiAgICAgIH0pOwogICAgICB2YXIgdG90YWxOb3RDaGlsZCA9IGVsLmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmNoaWxkcmVuLmxlbmd0aCA9PSAwOwogICAgICB9KTsKICAgICAgcmV0dXJuIGVsLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgZm91bmQubGVuZ3RoID09IDAgPyBlbC5jaGlsZHJlbi5sZW5ndGggOiBlbC5jaGlsZHJlbi5sZW5ndGggPiAwICYmIGZvdW5kLmxlbmd0aCA+IDAgPyB0b3RhbE5vdENoaWxkLmxlbmd0aCArIGZvdW5kLmxlbmd0aCA6IDE7CiAgICB9LAogICAgcm93c3BhblNlY29uZDogZnVuY3Rpb24gcm93c3BhblNlY29uZChlbCkgewogICAgICByZXR1cm4gZWwuY2hpbGRyZW4ubGVuZ3RoID09IDAgJiYgdGhpcy50aGlyZENvbHVtbnMubGVuZ3RoID09IDAgPyAxIDogZWwuY2hpbGRyZW4ubGVuZ3RoID09IDAgJiYgdGhpcy50aGlyZENvbHVtbnMubGVuZ3RoID4gMCA/IDIgOiAxOwogICAgfSwKICAgIGNvbHNwYW5TZWNvbmQ6IGZ1bmN0aW9uIGNvbHNwYW5TZWNvbmQoZWwpIHsKICAgICAgcmV0dXJuIGVsLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyBlbC5jaGlsZHJlbi5sZW5ndGggOiAxOwogICAgfSwKICAgIHJvd3NwYW5GaXJzdENsYXNzOiBmdW5jdGlvbiByb3dzcGFuRmlyc3RDbGFzcyhlbCkgewogICAgICByZXR1cm4gZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCA/ICIiIDogZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiB0aGlzLnRoaXJkQ29sdW1ucy5sZW5ndGggPiAwID8gInRoaXJkVHJJZCIgOiAidGhpcmRUcklkIjsKICAgIH0sCiAgICByb3dzcGFuU2Vjb25kQ2xhc3M6IGZ1bmN0aW9uIHJvd3NwYW5TZWNvbmRDbGFzcyhlbCkgewogICAgICByZXR1cm4gZWwuY2hpbGRyZW4ubGVuZ3RoID09IDAgJiYgdGhpcy50aGlyZENvbHVtbnMubGVuZ3RoID09IDAgPyAidGhpcmRUcklkIiA6IGVsLmNoaWxkcmVuLmxlbmd0aCA9PSAwICYmIHRoaXMudGhpcmRDb2x1bW5zLmxlbmd0aCA+IDAgPyAidGhpcmRUcklkIiA6ICIiOwogICAgfSwKICAgIG5vcm1hbGl6ZXI6IGZ1bmN0aW9uIG5vcm1hbGl6ZXIobm9kZSkgewogICAgICBpZiAoIW5vZGUuY2hpbGRyZW4gfHwgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHsKICAgICAgICBkZWxldGUgbm9kZS5jaGlsZHJlbjsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWQ6IG5vZGUuaWQsCiAgICAgICAgICBsYWJlbDogdGhpcy5nZXROYW1lKHsKICAgICAgICAgICAgbmFtZVJ1OiBub2RlLm5hbWVSdSwKICAgICAgICAgICAgbmFtZUx0OiBub2RlLm5hbWVMdCwKICAgICAgICAgICAgbmFtZVV6OiBub2RlLm5hbWVVegogICAgICAgICAgfSkKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGlkOiBub2RlLmlkLAogICAgICAgIGxhYmVsOiB0aGlzLmdldE5hbWUoewogICAgICAgICAgbmFtZVJ1OiBub2RlLm5hbWVSdSwKICAgICAgICAgIG5hbWVMdDogbm9kZS5uYW1lTHQsCiAgICAgICAgICBuYW1lVXo6IG5vZGUubmFtZVV6CiAgICAgICAgfSksCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwID8gbm9kZS5jaGlsZHJlbiA6IFtdCiAgICAgIH07CiAgICB9LAogICAgY2FsY3VsYXRlRG9jRm9ybXVsYXM6IGZ1bmN0aW9uIGNhbGN1bGF0ZURvY0Zvcm11bGFzKHJvd0lkLCB2YWx1ZSwgcm93SW5kZXgsIGNvbHVtbkluZGV4LCBjb2x1bW5JZCwgdHlwZUNvZGUpIHsKICAgICAgLy8gcm93SW5kZXggaXMgYHNlbGVjdGVkUm93c2AgaW5kZXgKICAgICAgaWYgKHRoaXMuZG9jVGFibGVGb3JtdWxhc0xpc3RlbkNvbHVtbklkW2NvbHVtbklkXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB2YXIgdGFyZ2V0cyA9IHRoaXMuZG9jVGFibGVGb3JtdWxhc0xpc3RlbkNvbHVtbklkW2NvbHVtbklkXTsKCiAgICAgIGZvciAodmFyIHRhcmdldEluZGV4IGluIHRhcmdldHMpIHsKICAgICAgICB2YXIgZG9jVGFibGVGb3JtdWxhID0gdGhpcy5kb2NUYWJsZUZvcm11bGFzTGlzdFt0YXJnZXRzW3RhcmdldEluZGV4XV07CiAgICAgICAgdmFyIGV2YWxTdHJpbmcgPSBkb2NUYWJsZUZvcm11bGEuZXZhbDsKCiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGRvY1RhYmxlRm9ybXVsYS5saXN0ZW5Db2x1bW5zKSwKICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX3RoaXMkdGhpcmRUcklkRGF0YSR0LCBfdGhpcyR0aGlyZFRySWREYXRhJHQyLCBfdGhpcyR0aGlyZFRySWREYXRhJHQzOwoKICAgICAgICAgICAgdmFyIGxpc3RlbkNvbHVtbiA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICB2YXIgdGhpcmRJbmRleCA9IHRoaXMudHJDb2x1bW5JZE9uRG9jQ29sdW1uSWRNYXBbbGlzdGVuQ29sdW1uXTsKCiAgICAgICAgICAgIHZhciBfdmFsID0gcGFyc2VGbG9hdCgoX3RoaXMkdGhpcmRUcklkRGF0YSR0ID0gKF90aGlzJHRoaXJkVHJJZERhdGEkdDIgPSB0aGlzLnRoaXJkVHJJZERhdGFbdGhpcmRJbmRleF0pID09PSBudWxsIHx8IF90aGlzJHRoaXJkVHJJZERhdGEkdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyR0aGlyZFRySWREYXRhJHQzID0gX3RoaXMkdGhpcmRUcklkRGF0YSR0Mi52YWx1ZVtyb3dJbmRleF0pID09PSBudWxsIHx8IF90aGlzJHRoaXJkVHJJZERhdGEkdDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHRoaXJkVHJJZERhdGEkdDMudmFsdWUpICE9PSBudWxsICYmIF90aGlzJHRoaXJkVHJJZERhdGEkdCAhPT0gdm9pZCAwID8gX3RoaXMkdGhpcmRUcklkRGF0YSR0IDogMCk7CgogICAgICAgICAgICBpZiAoIV92YWwpIHsKICAgICAgICAgICAgICB0aGlzLnJlcG9ydDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3ZhbCA9IGlzTmFOKF92YWwpID8gMCA6IF92YWw7CiAgICAgICAgICAgIGV2YWxTdHJpbmcgPSBldmFsU3RyaW5nLnJlcGxhY2UoInsiICsgbGlzdGVuQ29sdW1uICsgIn0iLCBfdmFsKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdmFsID0gZXZhbChldmFsU3RyaW5nKTsgLy8gdG9kbyBvcHRpbWl6ZSBxaWxpc2gga2VyYWsuIHYtbW9kZWwgYmlsYW4gcWlsaXNoIGtlcmFrCgogICAgICAgIHRoaXMuJHNldChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAicm93SWQiOiByb3dJZCwKICAgICAgICAgICJjb2x1bW5JZCI6IGRvY1RhYmxlRm9ybXVsYS50YXJnZXRDb2x1bW5JZC50b1N0cmluZygpCiAgICAgICAgfSkpLCAidmFsdWUiLCB2YWwpOwogICAgICAgIHRoaXMuc2V0VmFsdWUocm93SWQsIHZhbCwgcm93SW5kZXgsIHRoaXMudHJDb2x1bW5JZE9uRG9jQ29sdW1uSWRNYXBbZG9jVGFibGVGb3JtdWxhLnRhcmdldENvbHVtbklkXSwgZG9jVGFibGVGb3JtdWxhLnRhcmdldENvbHVtbklkLCB0eXBlQ29kZSk7CiAgICAgIH0KICAgIH0sCiAgICB0cmVlQ2xvc2VkOiBmdW5jdGlvbiB0cmVlQ2xvc2VkKHZlZU5hbWUpIHsKICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnJlZnNbdmVlTmFtZV0udmFsaWRhdGUoKTsKICAgIH0sCiAgICBzZWxlY3RDdXN0b21MYWJlbDogZnVuY3Rpb24gc2VsZWN0Q3VzdG9tTGFiZWwoX3JlZjE3KSB7CiAgICAgIHZhciBuYW1lVXogPSBfcmVmMTcubmFtZVV6LAogICAgICAgICAgbmFtZUx0ID0gX3JlZjE3Lm5hbWVMdCwKICAgICAgICAgIG5hbWVSdSA9IF9yZWYxNy5uYW1lUnUsCiAgICAgICAgICBuYW1lID0gX3JlZjE3Lm5hbWUsCiAgICAgICAgICBmdWxsTmFtZSA9IF9yZWYxNy5mdWxsTmFtZTsKCiAgICAgIGlmIChuYW1lVXopIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXROYW1lKHsKICAgICAgICAgIG5hbWVVejogbmFtZVV6LAogICAgICAgICAgbmFtZUx0OiBuYW1lTHQsCiAgICAgICAgICBuYW1lUnU6IG5hbWVSdQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoZnVsbE5hbWUpIHsKICAgICAgICByZXR1cm4gZnVsbE5hbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBuYW1lOwogICAgfQogIH0KfTs="},{"version":3,"sources":["editReportDynamicModal.vue"],"names":[],"mappings":"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","sourcesContent":["<script>\r\nimport Service from \"@/modules/report/reportService\";\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport Checkbox from \"vue-material-checkbox\";\r\n\r\nconst OKED_API_URL = 'reestr/info-oked'\r\nexport default {\r\n  props: {\r\n    isGenerated: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  components: { Checkbox },\r\n  data() {\r\n    return {\r\n      lastReportData: [],\r\n      lastReportDataRows: [],\r\n      lastReportFormulas: [],\r\n      debounce: null,\r\n      // OKED VARIABLES\r\n      okeds: [],\r\n      hasNextPageOked: false,\r\n      isLoadingOked: false,\r\n      okedSearchPayload: {},\r\n      // ----------------\r\n      f1Ids: [],\r\n      f2Ids: [],\r\n      fRowId: null,\r\n      tableId: null,\r\n      tableInfo: {},\r\n      reportId: null,\r\n      // getName: getName,\r\n      selectedColumns: [],\r\n      selectedRows: [],\r\n\r\n      firstColumns: [],\r\n      secondColumns: [],\r\n      thirdColumns: [],\r\n\r\n      thirdTrIdData: [],\r\n      currentRowId: null,\r\n      invalidEntries: 0,\r\n      currentItemData: [],\r\n      showData: [],\r\n      loader: false,\r\n      showResult: false,\r\n      report: {},\r\n      table: {},\r\n      formulas: [],\r\n      currentPosition: {\r\n        rowIndex: null,\r\n        columnIndex: null,\r\n        rowId: null,\r\n        columnId: null,\r\n      },\r\n      docTableFormulasList: {},\r\n      docTableFormulasListenColumnId: {},\r\n      trColumnIdOnDocColumnIdMap: {},\r\n    };\r\n  },\r\n  watch: {\r\n    thirdTrIdData: function (newThirdTrIdData) {\r\n      if (typeof newThirdTrIdData === 'object' && newThirdTrIdData.length > 0) {\r\n        let length = newThirdTrIdData.length;\r\n        for (let i = 0; i < length; i++) {\r\n          this.trColumnIdOnDocColumnIdMap[newThirdTrIdData[i].columnId] = i\r\n        }\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    getColumnData(i) {\r\n      let found = this.showData.find((e) => e.columnId == i.columnId)\r\n      if (found) {\r\n        return found.columnData\r\n      } else {\r\n        return \"\"\r\n      }\r\n    },\r\n    // DYNAMIC_REFERENCES METHODS\r\n    getRandomInt() {\r\n      let number = Math.floor(Math.random() * 10000000);\r\n      let bool = true\r\n      this.selectedRows.find(el => {\r\n        if (el.id == number) {\r\n          bool = false\r\n        } else if (el.id == number) {\r\n          bool = false\r\n        }\r\n        return bool\r\n      })\r\n      if (bool) {\r\n        return number;\r\n      } else {\r\n        this.getRandomInt()\r\n      }\r\n\r\n    },\r\n    async addNewRow() {\r\n      await this.selectedRows.push({ id: this.getRandomInt() })\r\n      await this.setDocumentColumnValues(this.lastReportData, this.lastReportFormulas)\r\n    },\r\n    async closeReport() {\r\n      this.$emit(\"closedReportLoader\");\r\n      this.cnf().then(async (rs) => {\r\n        if (rs.value) {\r\n          this.$emit('save', true)\r\n        }\r\n      });\r\n    },\r\n    stopFormingRows() {\r\n      Service.stopFormingTheReport(this.reportId)\r\n          .then(async (rs) => {\r\n            this.$set(this.tableInfo, 'hasDynamicRows', false)\r\n            // await this.deleteSuccess();\r\n          })\r\n          .catch((err) => {\r\n            // this.catchErr(err);\r\n          });\r\n    },\r\n    async deleteRow(index, data) {\r\n      let findElement = this.lastReportDataRows.findIndex(el => el.id == data.id)\r\n      if (findElement > -1) {\r\n        this.cnf().then(async (rs) => {\r\n          if (rs.value) {\r\n            await Service.deleteRowId(data.id, this.reportId)\r\n                .then(async (rs) => {\r\n                  // await this.deleteSuccess();\r\n                  this.selectedRows.splice(index, 1)\r\n                  await this.$forceUpdate()\r\n                  await this.resetIndex()\r\n                  await this.setDocumentColumnValues(this.lastReportData.filter(e => e.rowId != data.id), this.lastReportFormulas)\r\n                })\r\n                .catch((err) => {\r\n                  // this.catchErr(err);\r\n                })\r\n                .finally(async () => {\r\n                  await this.getById(this.tableId, this.reportId, this.tableInfo)\r\n                })\r\n            ;\r\n          }\r\n        });\r\n      } else {\r\n        this.cnf().then(async (rs) => {\r\n          if (rs.value) {\r\n            let newThirdTrIdData = []\r\n            this.thirdTrIdData = this.thirdTrIdData.map((e) => {\r\n              e.value = e.value.filter(d => {\r\n                if (d && d.rowId != data.id) {\r\n                  if (d.typeCode === \"BOOLEAN\") {\r\n                    d.valueBoolean = d.value\r\n                    d.valueString = null\r\n                    d.valueBigDecimal = null\r\n                    d.valueDate = null\r\n                    d.selectValueNameUz = null\r\n                  } else if (d.typeCode === \"STRING\") {\r\n                    d.valueString = d.value\r\n                    d.valueBigDecimal = null\r\n                    d.valueDate = null\r\n                    d.valueBoolean = null\r\n                    d.selectValueNameUz = null\r\n                  } else if (d.typeCode === \"BIGDECIMAL\") {\r\n                    d.valueBigDecimal = d.value\r\n                    d.valueString = null\r\n                    d.valueDate = null\r\n                    d.valueBoolean = null\r\n                    d.selectValueNameUz = null\r\n                  } else if (d.typeCode === \"DATE\") {\r\n                    d.valueDate = d.value\r\n                    d.valueString = null\r\n                    d.valueBigDecimal = null\r\n                    d.valueBoolean = null\r\n                    d.selectValueNameUz = null\r\n                  } else if (d.typeCode === \"YEAR\") {\r\n                    d.valueDate = null\r\n                    d.valueString = d.value\r\n                    d.valueBigDecimal = null\r\n                    d.valueBoolean = null\r\n                    d.selectValueNameUz = null\r\n                  } else if (d.typeCode === \"SELECT\") {\r\n                    d.valueString = null\r\n                    d.valueBigDecimal = null\r\n                    d.valueDate = null\r\n                    d.valueBoolean = null\r\n                  }\r\n                  newThirdTrIdData.push(d)\r\n                  return d\r\n                }\r\n              })\r\n              return e\r\n            })\r\n            this.selectedRows.splice(index, 1)\r\n            await this.$forceUpdate()\r\n            await this.resetIndex()\r\n            newThirdTrIdData.forEach(e => this.lastReportData.push(e))\r\n            await this.setDocumentColumnValues(this.lastReportData, this.lastReportFormulas)\r\n          }\r\n        });\r\n\r\n\r\n      }\r\n    },\r\n\r\n    dynamicRefsReachedEndOfList(e) {\r\n      if (e) {\r\n        this.fetchDynamicRefs()\r\n      }\r\n    },\r\n    async debounceSearchDynamicRefs(searchText) {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(async () => {\r\n        await this.fetchDynamicRefsWithKeyword(searchText);\r\n      }, 1000);\r\n    },\r\n    fetchDynamicRefsWithKeyword(keyword) {\r\n      this.okeds = []\r\n      this.okedSearchPayload.page = 1\r\n      this.okedSearchPayload.keyword = keyword ? keyword : ''\r\n      this.fetchDynamicRefs()\r\n    },\r\n    async fetchDynamicRefs() {\r\n      this.isLoadingOked = true\r\n      await crudAndListsService.searchListWithKeyword(OKED_API_URL, this.okedSearchPayload)\r\n          .then(res => {\r\n            this.okeds.push(...res.data.list)\r\n            this.hasNextPageOked = res.data.total / this.okedSearchPayload.itemsPerPage > this.okedSearchPayload.page\r\n            this.okedSearchPayload.page += 1\r\n            if (!this.isModeCreate && this.editingItem.okedId) {\r\n              let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n              if (!foundItm && this.editingItem.infoOkedDto) {\r\n                this.okeds.push(this.editingItem.infoOkedDto)\r\n              }\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n            this.okeds = []\r\n          })\r\n          .finally(() => {\r\n            this.isLoadingOked = false\r\n          })\r\n    },\r\n    customLabelDynamicRef(opt) {\r\n      let selected = this.okeds.find(e => e.id == opt.id);\r\n      if (selected) {\r\n        return `${selected.code} - ${\r\n            selected.nameUz ?\r\n                this.getName({\r\n                  nameRu: selected.nameRu,\r\n                  nameLt: selected.nameLt,\r\n                  nameUz: selected.nameUz,\r\n                })\r\n                :\r\n                selected.name\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    // --------------------------\r\n    clearAll() {\r\n      this.selectedColumns = [];\r\n      this.selectedRows = [];\r\n      this.firstColumns = [];\r\n      this.secondColumns = [];\r\n      this.thirdColumns = [];\r\n      this.thirdTrIdData = [];\r\n      this.formulas = [];\r\n      this.table = [];\r\n      this.f1Ids = [];\r\n      this.f2Ids = [];\r\n    },\r\n    keydownEvt(evt, rowId, value, rowIndex, columnIndex, columnId, typeCode) {\r\n      this.keyUpEventsDisable(evt);\r\n      if (columnId != null) {\r\n        if (evt.keyCode == 40 && rowId != null) {\r\n          evt.preventDefault();\r\n          // down\r\n          if (rowIndex < this.selectedRows.length - 1) {\r\n            let currentColumn = this.thirdTrIdData[columnIndex];\r\n            let downRowColumn = this.selectedRows[rowIndex + 1];\r\n            let downInput = document.getElementById(\r\n                JSON.stringify({\r\n                  rowId: downRowColumn.id,\r\n                  columnId: currentColumn.columnId,\r\n                })\r\n            );\r\n            if (downInput) {\r\n              downInput.focus();\r\n            }\r\n          }\r\n        } else if (evt.keyCode == 38 && rowId != null) {\r\n          evt.preventDefault();\r\n          if (rowIndex != 0) {\r\n            let currentColumn = this.thirdTrIdData[columnIndex];\r\n            let upRowColumn = this.selectedRows[rowIndex - 1];\r\n            let upInput = document.getElementById(\r\n                JSON.stringify({\r\n                  rowId: upRowColumn.id,\r\n                  columnId: currentColumn.columnId,\r\n                })\r\n            );\r\n            if (upInput) {\r\n              upInput.focus();\r\n            }\r\n          }\r\n          //up\r\n        } else if (evt.keyCode == 37) {\r\n          evt.preventDefault();\r\n          //left\r\n          if (columnIndex != 0) {\r\n            let prevColumn = this.thirdTrIdData[columnIndex - 1];\r\n\r\n            let currentRow = this.selectedRows[rowIndex];\r\n            let prevInput = document.getElementById(\r\n                JSON.stringify({\r\n                  rowId: currentRow.id,\r\n                  columnId: prevColumn.columnId,\r\n                })\r\n            );\r\n            if (prevInput) {\r\n              if (prevInput.disabled) {\r\n                let count = this.thirdTrIdData.length - (columnIndex - 1);\r\n                for (let i = 0; i < count; i++) {\r\n                  let prevColumn2 = this.thirdTrIdData[columnIndex - 1 - i];\r\n                  if (prevColumn2) {\r\n                    let input = document.getElementById(\r\n                        JSON.stringify({\r\n                          rowId: currentRow.id,\r\n                          columnId: prevColumn2.columnId,\r\n                        })\r\n                    );\r\n                    if (input && input.disabled) {\r\n                      continue;\r\n                    } else {\r\n                      if (input) {\r\n                        input.focus();\r\n                      }\r\n                      break;\r\n                    }\r\n                  }\r\n                }\r\n              } else {\r\n                prevInput.focus();\r\n              }\r\n            }\r\n          }\r\n        } else if (evt.keyCode == 39) {\r\n          //right\r\n          evt.preventDefault();\r\n          if (this.thirdTrIdData.length - 1 > columnIndex) {\r\n            let nextColumn = this.thirdTrIdData[columnIndex + 1];\r\n            let currentRow = this.selectedRows[rowIndex];\r\n            let nextInput = document.getElementById(\r\n                JSON.stringify({\r\n                  rowId: currentRow.id,\r\n                  columnId: nextColumn.columnId,\r\n                })\r\n            );\r\n            if (nextInput) {\r\n              if (nextInput.disabled) {\r\n                let forCount = this.thirdTrIdData.length - (columnIndex + 1);\r\n                for (let i = 0; i < forCount; i++) {\r\n                  let nextColumn2 = this.thirdTrIdData[columnIndex + 1 + i];\r\n\r\n                  let input = document.getElementById(\r\n                      JSON.stringify({\r\n                        rowId: currentRow.id,\r\n                        columnId: nextColumn2.columnId,\r\n                      })\r\n                  );\r\n                  if (input.disabled) {\r\n                    continue;\r\n                  } else {\r\n                    if (input) {\r\n                      input.focus();\r\n                    }\r\n                    break;\r\n                  }\r\n                }\r\n              } else {\r\n                nextInput.focus();\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    async resetIndex() {\r\n      await this.$set(this.currentPosition, \"rowIndex\", null);\r\n      await this.$set(this.currentPosition, \"columnIndex\", null);\r\n      await this.$set(this.currentPosition, \"rowId\", null);\r\n      await this.$set(this.currentPosition, \"columnId\", null);\r\n      // await document.addEventListener(\"keydown\", this.keyUpEvents);\r\n    },\r\n    setError(f1, f2, frowId) {\r\n      this.f1Ids = f1;\r\n      this.f2Ids = f2;\r\n      this.fRowId = frowId;\r\n    },\r\n    keyUpEventsDisable(e) {\r\n      if (this.currentPosition.columnId != null) {\r\n        if (e.which === 38 || e.which === 40) {\r\n          e.preventDefault();\r\n        }\r\n      }\r\n    },\r\n    keyUpEvents(evt) {\r\n      this.keyUpEventsDisable(evt);\r\n      // if (this.currentPosition.columnId != null) {\r\n      //   if (evt.keyCode == 40 && this.currentPosition.rowId != null) {\r\n      //     evt.preventDefault();\r\n      //     // down\r\n      //     if (this.currentPosition.rowIndex < this.selectedRows.length - 1) {\r\n      //       let currentColumn =\r\n      //         this.thirdTrIdData[this.currentPosition.columnIndex];\r\n      //       let downRowColumn =\r\n      //         this.selectedRows[this.currentPosition.rowIndex + 1];\r\n      //       let downInput = document.getElementById(\r\n      //         JSON.stringify({\r\n      //           rowId: downRowColumn.id,\r\n      //           columnId: currentColumn.columnId,\r\n      //         })\r\n      //       );\r\n      //       if (downInput) {\r\n      //         downInput.focus();\r\n      //       }\r\n      //     }\r\n      //   } else if (evt.keyCode == 38 && this.currentPosition.rowId != null) {\r\n      //     evt.preventDefault();\r\n      //     if (this.currentPosition.rowIndex != 0) {\r\n      //       let currentColumn =\r\n      //         this.thirdTrIdData[this.currentPosition.columnIndex];\r\n      //       let upRowColumn =\r\n      //         this.selectedRows[this.currentPosition.rowIndex - 1];\r\n      //       let upInput = document.getElementById(\r\n      //         JSON.stringify({\r\n      //           rowId: upRowColumn.id,\r\n      //           columnId: currentColumn.columnId,\r\n      //         })\r\n      //       );\r\n      //       if (upInput) {\r\n      //         upInput.focus();\r\n      //       }\r\n      //     }\r\n      //     //up\r\n      //   } else if (evt.keyCode == 37) {\r\n      //     evt.preventDefault();\r\n      //     //left\r\n      //     if (this.currentPosition.columnIndex != 0) {\r\n      //       let prevColumn =\r\n      //         this.thirdTrIdData[this.currentPosition.columnIndex - 1];\r\n      //       let currentRow = this.selectedRows[this.currentPosition.rowIndex];\r\n      //       let prevInput = document.getElementById(\r\n      //         JSON.stringify({\r\n      //           rowId: currentRow.id,\r\n      //           columnId: prevColumn.columnId,\r\n      //         })\r\n      //       );\r\n      //       if (prevInput) {\r\n      //         if (prevInput.disabled) {\r\n      //           let count =\r\n      //             this.thirdTrIdData.length -\r\n      //             (this.currentPosition.columnIndex - 1);\r\n      //           for (let i = 0; i < count; i++) {\r\n      //             let prevColumn2 =\r\n      //               this.thirdTrIdData[\r\n      //                 this.currentPosition.columnIndex - 1 - i\r\n      //               ];\r\n      //             let input = document.getElementById(\r\n      //               JSON.stringify({\r\n      //                 rowId: currentRow.id,\r\n      //                 columnId: prevColumn2.columnId,\r\n      //               })\r\n      //             );\r\n      //             if (input && input.disabled) {\r\n      //               continue;\r\n      //             } else {\r\n      //               if (input) {\r\n      //                 input.focus();\r\n      //               }\r\n      //               break;\r\n      //             }\r\n      //           }\r\n      //         } else {\r\n      //           prevInput.focus();\r\n      //         }\r\n      //       }\r\n      //     }\r\n      //   } else if (evt.keyCode == 39) {\r\n      //     //right\r\n      //     evt.preventDefault();\r\n      //     if (\r\n      //       this.thirdTrIdData.length - 1 >\r\n      //       this.currentPosition.columnIndex\r\n      //     ) {\r\n      //       let nextColumn =\r\n      //         this.thirdTrIdData[this.currentPosition.columnIndex + 1];\r\n      //       let currentRow = this.selectedRows[this.currentPosition.rowIndex];\r\n      //       let nextInput = document.getElementById(\r\n      //         JSON.stringify({\r\n      //           rowId: currentRow.id,\r\n      //           columnId: nextColumn.columnId,\r\n      //         })\r\n      //       );\r\n      //       if (nextInput) {\r\n      //         if (nextInput.disabled) {\r\n      //           let forCount =\r\n      //             this.thirdTrIdData.length -\r\n      //             (this.currentPosition.columnIndex + 1);\r\n      //           for (let i = 0; i < forCount; i++) {\r\n      //             let nextColumn2 =\r\n      //               this.thirdTrIdData[\r\n      //                 this.currentPosition.columnIndex + 1 + i\r\n      //               ];\r\n\r\n      //             let input = document.getElementById(\r\n      //               JSON.stringify({\r\n      //                 rowId: currentRow.id,\r\n      //                 columnId: nextColumn2.columnId,\r\n      //               })\r\n      //             );\r\n      //             if (input.disabled) {\r\n      //               continue;\r\n      //             } else {\r\n      //               if (input) {\r\n      //                 input.focus();\r\n      //               }\r\n      //               break;\r\n      //             }\r\n      //           }\r\n      //         } else {\r\n      //           nextInput.focus();\r\n      //         }\r\n      //       }\r\n      //     }\r\n      //   }\r\n      // }\r\n    }\r\n    ,\r\n\r\n    focusVal(rowId, value, rowIndex, columnIndex, columnId, typeCode) {\r\n      this.$set(this.currentPosition, \"rowIndex\", parseFloat(rowIndex));\r\n      this.$set(this.currentPosition, \"columnIndex\", parseFloat(columnIndex));\r\n      this.$set(this.currentPosition, \"rowId\", parseFloat(rowId));\r\n      this.$set(this.currentPosition, \"columnId\", parseFloat(columnId));\r\n    },\r\n    getFormulas_2() {\r\n      return new Promise((res, rej) => {\r\n        if (this.tableId) {\r\n          Service.formulasByTableId_2(this.tableId)\r\n              .then(({ data }) => {\r\n                this.formulas = data;\r\n                res(data);\r\n              })\r\n              .catch((e) => rej(e));\r\n        } else {\r\n          rej();\r\n        }\r\n      });\r\n    },\r\n    getDataById(id) {\r\n      return new Promise((res, rej) => {\r\n        Service.getReportById(id)\r\n            .then(({ data }) => {\r\n              res(data);\r\n            })\r\n            .catch((e) => rej(e));\r\n      });\r\n    },\r\n    editValue(rowIndex, index) {\r\n      this.$set(this.thirdTrIdData[index].value[rowIndex], 'notEditable', false)\r\n      this.$forceUpdate();\r\n    },\r\n    resetValue(rowIndex, index) {\r\n      this.$set(this.thirdTrIdData[index].value[rowIndex], 'selectValueId', this.thirdTrIdData[index].value[rowIndex].originalSelectValueId)\r\n      this.$set(this.thirdTrIdData[index].value[rowIndex], 'selectValueNameUz', this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameUz)\r\n      this.$set(this.thirdTrIdData[index].value[rowIndex], 'selectValueNameLt', this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameLt)\r\n      this.$set(this.thirdTrIdData[index].value[rowIndex], 'selectValueNameRu', this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameRu)\r\n      this.$set(this.thirdTrIdData[index].value[rowIndex], 'notEditable', true)\r\n      this.$forceUpdate();\r\n    },\r\n    setValue(rowId, value, rowIndex, index, id, typeCode, notEditable = false, initialLoadCall = false) {\r\n      // value.rowId = rowId\r\n      // value.typeCode = typeCode\r\n      //\r\n      // value.notEditable = notEditable\r\n      // value.selectValueNameLt = value.nameLt\r\n      // value.selectValueNameRu = value.nameRu\r\n      // value.selectValueNameUz = value.nameUz\r\n      //\r\n      /* this.thirdTrIdData[index].value[rowIndex] = {\r\n        rowId: rowId ? rowId : null,\r\n        value: typeCode == 'SELECT' ? '' : value,\r\n        selectValueNameUz: value ? value.nameUz : null,\r\n        selectValueNameLt: value ? value.nameLt : null,\r\n        selectValueNameRu: value ? value.nameRu : null,\r\n        originalSelectValueNameUz: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameUz : '',\r\n        originalSelectValueNameLt: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameLt : '',\r\n        originalSelectValueNameRu: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameRu : '',\r\n        typeCode: typeCode,\r\n        columnId: id,\r\n        notEditable: notEditable\r\n      }; */\r\n      if (initialLoadCall && typeCode === 'SELECT') {\r\n        let rowIndex = this.selectedRows.findIndex(el => el.id == rowId)\r\n        if (!this.thirdTrIdData[index].value[rowIndex].rowId) {\r\n          this.thirdTrIdData[index].value[rowIndex] = {\r\n            rowId: rowId,\r\n            value: typeCode === 'SELECT' ? '' : value,\r\n            selectValueId: value ? value.id : null,\r\n            selectValueNameUz: value ? (value.nameUz ? value.nameUz : value.name) : null,\r\n            selectValueNameLt: value ? value.nameLt : null,\r\n            selectValueNameRu: value ? value.nameRu : null,\r\n            originalSelectValueNameUz: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameUz : '',\r\n            originalSelectValueNameLt: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameLt : '',\r\n            originalSelectValueNameRu: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameRu : '',\r\n            typeCode: typeCode,\r\n            columnId: id,\r\n            notEditable: notEditable,\r\n          }\r\n          this.thirdTrIdData[index].value[rowIndex].originalselectValueId = value.id\r\n          this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameUz = value.nameUz\r\n          this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameLt = value.nameLt\r\n          this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameRu = value.nameRu\r\n        }\r\n      } else {\r\n        if (typeCode === 'SELECT') {\r\n          value.rowId = rowId\r\n          value.columnId = id\r\n          value.typeCode = typeCode\r\n          value.notEditable = notEditable\r\n          value.selectValueId = value.id\r\n          value.selectValueNameLt = value.nameLt\r\n          value.selectValueNameRu = value.nameRu\r\n          value.selectValueNameUz = value.nameUz ? value.nameUz : value.name\r\n        }\r\n\r\n        this.thirdTrIdData[index].value[rowIndex] = {\r\n          rowId: rowId,\r\n          value: typeCode === 'SELECT' ? '' : value,\r\n          selectValueId: value ? value.id : null,\r\n          selectValueNameUz: value ? value.nameUz : null,\r\n          selectValueNameLt: value ? value.nameLt : null,\r\n          selectValueNameRu: value ? value.nameRu : null,\r\n          originalSelectValueNameUz: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameUz : '',\r\n          originalSelectValueNameLt: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameLt : '',\r\n          originalSelectValueNameRu: this.thirdTrIdData[index].value[rowIndex] ? this.thirdTrIdData[index].value[rowIndex].originalSelectValueNameRu : '',\r\n          typeCode: typeCode,\r\n          columnId: id,\r\n          notEditable: notEditable,\r\n        };\r\n      }\r\n\r\n      document.getElementsByClassName(\"no_enter_value\").forEach((input) => {\r\n        if (JSON.parse(input.id).rowId) {\r\n          this.formulas.forEach((e) => {\r\n            let index_f2 = JSON.parse(e.f2).findIndex((d) => d == parseFloat(id));\r\n            let index_f1 = JSON.parse(e.f1).findIndex((d) => d == parseFloat(JSON.parse(input.id).columnId));\r\n            if (\r\n                index_f2 > -1 &&\r\n                index_f1 > -1 &&\r\n                parseFloat(JSON.parse(input.id).rowId) === parseFloat(rowId)\r\n            ) {\r\n\r\n              let allVal = 0;\r\n              document.getElementsByClassName(\"input_val\").forEach((vInput) => {\r\n                let e_index_f2 = JSON.parse(e.f2).findIndex(\r\n                    (d) => d == parseFloat(JSON.parse(vInput.id).columnId)\r\n                );\r\n\r\n                if (\r\n                    e_index_f2 > -1 &&\r\n                    parseFloat(JSON.parse(vInput.id).rowId) === parseFloat(rowId)\r\n                ) {\r\n                  if (this._empty(vInput.value)) {\r\n                  } else {\r\n                    if (typeof parseFloat(vInput.value) == \"number\") {\r\n                      allVal += parseFloat(vInput.value);\r\n                    } else {\r\n                      allVal += 0;\r\n                    }\r\n                  }\r\n\r\n                  this.$set(input, \"value\", parseFloat(allVal));\r\n                  let foundIndex = this.thirdTrIdData.findIndex(\r\n                      (e) => e.columnId == JSON.parse(input.id).columnId\r\n                  );\r\n                  this.thirdTrIdData[foundIndex].value[rowIndex] = {\r\n                    rowId: rowId ? rowId : null,\r\n                    value: allVal,\r\n                    typeCode: typeCode,\r\n                    columnId: JSON.parse(input.id).columnId,\r\n                  };\r\n                  this.$forceUpdate();\r\n                }\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          this.formulas.forEach((e) => {\r\n            let index_f2 = JSON.parse(e.f2).findIndex(\r\n                (d) => d == parseFloat(id)\r\n            );\r\n            let index_f1 = JSON.parse(e.f1).findIndex(\r\n                (d) => d == parseFloat(JSON.parse(input.id).columnId)\r\n            );\r\n            if (index_f2 > -1 && index_f1 > -1) {\r\n              let allVal = 0;\r\n              document.getElementsByClassName(\"input_val\").forEach((vInput) => {\r\n                let e_index_f2 = JSON.parse(e.f2).findIndex(\r\n                    (d) => d == parseFloat(JSON.parse(vInput.id).columnId)\r\n                );\r\n                if (e_index_f2 > -1) {\r\n                  if (this._empty(vInput.value)) {\r\n                  } else {\r\n                    if (typeof parseFloat(vInput.value) == \"number\") {\r\n                      allVal += parseFloat(vInput.value);\r\n                    } else {\r\n                      allVal += 0;\r\n                    }\r\n                  }\r\n                }\r\n                this.$set(input, \"value\", parseFloat(allVal));\r\n                let foundIndex = this.thirdTrIdData.findIndex(\r\n                    (e) => e.columnId == JSON.parse(input.id).columnId\r\n                );\r\n                this.thirdTrIdData[foundIndex].value[0] = {\r\n                  rowId: null,\r\n                  value: allVal,\r\n                  typeCode: typeCode,\r\n                  columnId: JSON.parse(input.id).columnId,\r\n                };\r\n                this.$forceUpdate();\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      this.$forceUpdate();\r\n\r\n    },\r\n    async setDocumentColumnValues(data, formulas) {\r\n      this.showData = []\r\n      this.currentItemData = data\r\n      if (data && data.length) {\r\n        data.forEach((e) => {\r\n          if (e.valueString || e.valueBigDecimal) {\r\n            if (e.typeCode === \"YEAR\") {\r\n              document.getElementsByClassName(\"custom-datepicker mx-datepicker dynamic-year\").forEach((field, idx) => {\r\n                if (JSON.parse(field.id).rowId) {\r\n                  if (\r\n                      parseFloat(JSON.parse(field.id).columnId) === parseFloat(e.columnId) &&\r\n                      parseFloat(JSON.parse(field.id).rowId) === parseFloat(e.rowId)\r\n                  ) {\r\n                    let rowIndex = this.selectedRows.findIndex(el => el.id == JSON.parse(field.id).rowId)\r\n                    let colIndex = this.thirdTrIdData.findIndex(item => item.columnId === e.columnId)\r\n                    this.setValue(e.rowId, e.value, rowIndex, colIndex, e.columnId, 'DATE')\r\n                  }\r\n                }\r\n              })\r\n            } else {\r\n              if (e.typeCode === 'BIGDECIMAL') {\r\n                let foundColumnId = this.showData.findIndex((d) => d.columnId === e.columnId)\r\n                if (foundColumnId > -1) {\r\n                  this.showData.map(f => {\r\n                    if (f.columnId == e.columnId) {\r\n                      f.columnData = (+f.columnData) + (+e.value)\r\n                    }\r\n                  })\r\n                } else {\r\n                  this.showData.push({\r\n                    columnId: e.columnId,\r\n                    columnData: (e.value)\r\n                  })\r\n                }\r\n              }\r\n\r\n              document\r\n                  .getElementsByClassName(\"input_val\").forEach((input) => {\r\n                formulas.forEach((element) => {\r\n                  let index_V = JSON.parse(element.f1).findIndex((e) => e == JSON.parse(input.id).columnId);\r\n                  if (index_V > -1) {\r\n                    this.$set(input, \"disabled\", true);\r\n                    this.$set(input.style, \"border\", \"none\");\r\n                    input.classList.add(\"no_enter_value\");\r\n                    input.style.fontWeight = \"bold\";\r\n                  }\r\n                });\r\n\r\n                if (JSON.parse(input.id).rowId) {\r\n                  if (\r\n                      parseFloat(JSON.parse(input.id).columnId) === parseFloat(e.columnId) &&\r\n                      parseFloat(JSON.parse(input.id).rowId) === parseFloat(e.rowId)\r\n                  ) {\r\n                    this.$set(input, \"value\", e.value);\r\n                  }\r\n                } else {\r\n                  if (\r\n                      parseFloat(JSON.parse(input.id).columnId) === parseFloat(e.columnId)\r\n                  ) {\r\n                    this.$set(input, \"value\", e.value);\r\n                  }\r\n                }\r\n              });\r\n            }\r\n          } else if (e.valueDate) {\r\n            document.getElementsByClassName(\"custom-datepicker mx-datepicker dynamic-datepicker\").forEach((field, idx) => {\r\n              if (JSON.parse(field.id).rowId) {\r\n                if (\r\n                    parseFloat(JSON.parse(field.id).columnId) === parseFloat(e.columnId) &&\r\n                    parseFloat(JSON.parse(field.id).rowId) === parseFloat(e.rowId)\r\n                ) {\r\n                  let rowIndex = this.selectedRows.findIndex(el => el.id == JSON.parse(field.id).rowId)\r\n                  let colIndex = this.thirdTrIdData.findIndex(item => item.columnId === e.columnId)\r\n                  this.setValue(e.rowId, e.value, rowIndex, colIndex, e.columnId, 'DATE')\r\n                }\r\n              }\r\n            })\r\n          } else if (e.valueBoolean !== null) {\r\n            document.getElementsByClassName(\"checkbox_field\").forEach((field, idx) => {\r\n              let checkboxInput = field.classList.contains('active') ? field.children[0].children[1].children[0] : field.children[0].children[0].children[0]\r\n              if (checkboxInput.id && JSON.parse(checkboxInput.id) && JSON.parse(checkboxInput.id).rowId) {\r\n                if (\r\n                    parseFloat(JSON.parse(checkboxInput.id).columnId) === parseFloat(e.columnId) &&\r\n                    parseFloat(JSON.parse(checkboxInput.id).rowId) === parseFloat(e.rowId)\r\n                ) {\r\n                  let rowIndex = this.selectedRows.findIndex(el => el.id == JSON.parse(checkboxInput.id).rowId)\r\n                  let colIndex = this.thirdTrIdData.findIndex(item => item.columnId == e.columnId)\r\n                  this.setValue(e.rowId, JSON.parse(e.value), rowIndex, colIndex, e.columnId, 'BOOLEAN')\r\n                }\r\n              }\r\n            })\r\n          } else if (e.selectValueNameUz) {\r\n            document.getElementsByClassName(\"select_field\").forEach((field, idx) => {\r\n              if (JSON.parse(field.id).rowId) {\r\n                if (\r\n                    parseFloat(JSON.parse(field.id).columnId) === parseFloat(e.columnId) &&\r\n                    parseFloat(JSON.parse(field.id).rowId) === parseFloat(e.rowId)\r\n                ) {\r\n                  let rowIndex = this.selectedRows.findIndex(el => el.id == JSON.parse(field.id).rowId)\r\n                  let colIndex = this.thirdTrIdData.findIndex(item => item.columnId == e.columnId)\r\n                  this.setValue(\r\n                      e.rowId,\r\n                      {\r\n                        nameUz: e.selectValueNameUz,\r\n                        nameLt: e.selectValueNameLt,\r\n                        nameRu: e.selectValueNameRu,\r\n                        id: e.selectValueId\r\n                      }, rowIndex, colIndex, e.columnId, 'SELECT', true, true)\r\n                }\r\n              }\r\n            })\r\n          }\r\n        });\r\n      } else {\r\n        document\r\n            .getElementsByClassName(\"input_val\")\r\n            .forEach((input) => {\r\n              formulas.forEach((element) => {\r\n                let index_V = JSON.parse(element.f1).findIndex(\r\n                    (e) => e == JSON.parse(input.id).columnId\r\n                );\r\n                if (index_V > -1) {\r\n                  this.$set(input, \"disabled\", true);\r\n                  this.$set(input.style, \"border\", \"none\");\r\n                  input.classList.add(\"no_enter_value\");\r\n                  input.style.fontWeight = \"bold\";\r\n                }\r\n              });\r\n            });\r\n      }\r\n      for (const docTableFormulaTargetId in this.docTableFormulasList) {\r\n        let disabledElements = document.querySelectorAll('input[data-column-id=\"' + docTableFormulaTargetId + '\"]');\r\n        disabledElements.forEach((element) => {\r\n          element.classList.add(\"no_enter_value\");\r\n          element.disabled = true;\r\n        });\r\n      }\r\n    },\r\n    async getById(id, reportId, info) {\r\n      this.clearAll();\r\n      this.tableId = id;\r\n      this.reportId = reportId;\r\n      this.tableInfo = info;\r\n      this.loader = true;\r\n      await Service.reportGetById(reportId).then(({ data }) => {\r\n        this.report = data;\r\n        this.$emit('setReportGenerated', this.report.generated);\r\n      });\r\n      await Service.getByIdTableWithReportId(id, reportId)\r\n        .then(async (rs) => {\r\n          if (rs.data) {\r\n            await this.setColumns(rs.data.columns, rs.data.rows.length);\r\n            this.setRow(rs.data.rows);\r\n            this.table = rs.data.table;\r\n            setTimeout(() => {\r\n              Promise.all([\r\n                this.getDataById(reportId),\r\n                this.getFormulas_2(),\r\n              ]).then(([data, formulas]) => {\r\n                    this.lastReportData = data\r\n                    this.lastReportFormulas = formulas\r\n                    this.setDocumentColumnValues(data, formulas)\r\n                    this.loader = false;\r\n                  });\r\n            },500);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.loader = false;\r\n        });\r\n      await Service.getDocTableFormulasList(id).then(({ data }) => {\r\n        this.docTableFormulasList = {};\r\n        let length = data.length;\r\n        let currentTargetColumnId = null;\r\n        for (let i = 0; i < length; i++) {\r\n          if (this.docTableFormulasList[data[i].targetColumnId] === undefined) {\r\n            currentTargetColumnId = data[i].targetColumnId;\r\n            this.docTableFormulasList[data[i].targetColumnId] = {\r\n              eval: \"\",\r\n              list: [],\r\n              listenColumns: [],\r\n              targetColumnId: data[i].targetColumnId\r\n            };\r\n          }\r\n          this.docTableFormulasList[data[i].targetColumnId].list.push(data[i]);\r\n          if (data[i].docColumnId) {\r\n            if (data[i].docColumnId && this.docTableFormulasList[data[i].targetColumnId].listenColumns.indexOf(data[i].docColumnId) === -1) {\r\n              this.docTableFormulasList[data[i].targetColumnId].listenColumns.push(data[i].docColumnId)\r\n            }\r\n            if (this.docTableFormulasListenColumnId[data[i].docColumnId] === undefined) {\r\n              this.docTableFormulasListenColumnId[data[i].docColumnId] = [data[i].targetColumnId];\r\n            } else {\r\n              if (this.docTableFormulasListenColumnId[data[i].docColumnId].indexOf(data[i].targetColumnId) === -1) {\r\n                this.docTableFormulasListenColumnId[data[i].docColumnId].push(data[i].targetColumnId);\r\n              }\r\n            }\r\n          }\r\n          if (data[i].type === \"ARGUMENTS\") {\r\n            this.docTableFormulasList[data[i].targetColumnId].eval += \"{\" + data[i].docColumnId + \"}\";\r\n          } else {\r\n            this.docTableFormulasList[data[i].targetColumnId].eval += data[i].code;\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    async setColumns(v, rowsCount) {\r\n      this.selectedColumns = v;\r\n      this.firstColumns = [];\r\n      this.secondColumns = [];\r\n      this.thirdColumns = [];\r\n      v.forEach((el1) => {\r\n        this.firstColumns.push(el1);\r\n        el1.children.forEach((el2) => {\r\n          this.secondColumns.push(el2);\r\n          el2.children.forEach((el3) => {\r\n            this.thirdColumns.push({ ...el3, fId: el1.id });\r\n          });\r\n        });\r\n      });\r\n      setTimeout(async () => {\r\n        let firstTrTh = document.getElementsByClassName(\"firstTrTh\");\r\n        let secondTrTh = document.getElementsByClassName(\"secondTrTh\");\r\n        let thirdTrTh = document.getElementsByClassName(\"thirdTrTh\");\r\n        let counter2 = 0,\r\n            counter3 = 0;\r\n        await firstTrTh.forEach(async (th) => {\r\n          if (th.colSpan > 1) {\r\n            for (let index2 = 0; index2 < th.colSpan; index2++) {\r\n              if (secondTrTh[counter2] && secondTrTh[counter2].colSpan > 1) {\r\n                for (\r\n                    let index3 = 0;\r\n                    index3 < secondTrTh[counter2].colSpan;\r\n                    index3++\r\n                ) {\r\n                  let array = thirdTrTh[counter3].id.split(\",\");\r\n                  let tmp = {\r\n                    columnId: array[0],\r\n                    typeCode: array[1],\r\n                    refCode: array[2],\r\n                    referenceUrl: array[3],\r\n                    referenceAppendUrl: array[4],\r\n                    referenceCode: array[5],\r\n                    referenceNameUz: array[6],\r\n                    referenceNameLt: array[7],\r\n                    referenceNameRu: array[8],\r\n                    searchPayload: Object.assign({}, this.var_default_search_payload),\r\n                    hasNextPage: false,\r\n                    options: [],\r\n                    rowId: [],\r\n                    value: [],\r\n                  };\r\n                  // GET DYNAMIC REFRENCE OPTIONS\r\n                  if (tmp.typeCode == 'SELECT') {\r\n                    for (let i = 0; i < rowsCount; i++) {\r\n                      tmp.value.push({ selectedItem: null })\r\n                    }\r\n                    crudAndListsService.searchListWithKeyword(tmp.referenceUrl, tmp.searchPayload, tmp.referenceAppendUrl)\r\n                        .then(res => {\r\n                          if (\"DepartmentForDocument\" === tmp.refCode) {\r\n                            tmp.options.push(...res.data)\r\n                          } else {\r\n                            tmp.options.push(...res.data.list)\r\n                          }\r\n                          tmp.hasNextPage = res.data.total / tmp.searchPayload.itemsPerPage > tmp.searchPayload.page\r\n                          tmp.searchPayload.page += 1\r\n                          /* if (!this.isModeCreate && this.editingItem.okedId) {\r\n                              let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n                              if (!foundItm && this.editingItem.infoOkedDto) {\r\n                                  this.okeds.push(this.editingItem.infoOkedDto)\r\n                              }\r\n                          } */\r\n                        })\r\n                        .catch(e => {\r\n                          console.log(e)\r\n                          // this.okeds = []\r\n                        })\r\n                        .finally(() => {\r\n                          // this.isLoadingOked = false\r\n                        })\r\n                  }\r\n                  this.thirdTrIdData.push(tmp);\r\n                  counter3++;\r\n                }\r\n                counter2++;\r\n              } else {\r\n                if (\r\n                    secondTrTh[counter2] &&\r\n                    secondTrTh[counter2].classList.contains(\"thirdTrId\")\r\n                ) {\r\n                  let array = secondTrTh[counter2].id.split(\",\");\r\n                  let tmp = {\r\n                    columnId: array[0],\r\n                    typeCode: array[1],\r\n                    refCode: array[2],\r\n                    referenceUrl: array[3],\r\n                    referenceAppendUrl: array[4],\r\n                    referenceCode: array[5],\r\n                    referenceNameUz: array[6],\r\n                    referenceNameLt: array[7],\r\n                    referenceNameRu: array[8],\r\n                    searchPayload: Object.assign({}, this.var_default_search_payload),\r\n                    hasNextPage: false,\r\n                    options: [],\r\n                    rowId: [],\r\n                    value: [],\r\n                  };\r\n                  // GET DYNAMIC REFRENCE OPTIONS\r\n                  if (tmp.typeCode == 'SELECT') {\r\n                    for (let i = 0; i < rowsCount; i++) {\r\n                      tmp.value.push({ selectedItem: null })\r\n                    }\r\n                    crudAndListsService.searchListWithKeyword(tmp.referenceUrl, tmp.searchPayload, tmp.referenceAppendUrl)\r\n                        .then(res => {\r\n                          if (\"DepartmentForDocument\" === tmp.refCode) {\r\n                            tmp.options.push(...res.data)\r\n                          } else {\r\n                            tmp.options.push(...res.data.list)\r\n                          }\r\n                          tmp.hasNextPage = res.data.total / tmp.searchPayload.itemsPerPage > tmp.searchPayload.page\r\n                          tmp.searchPayload.page += 1\r\n                          /* if (!this.isModeCreate && this.editingItem.okedId) {\r\n                              let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n                              if (!foundItm && this.editingItem.infoOkedDto) {\r\n                                  this.okeds.push(this.editingItem.infoOkedDto)\r\n                              }\r\n                          } */\r\n                        })\r\n                        .catch(e => {\r\n                          console.log(e)\r\n                          // this.okeds = []\r\n                        })\r\n                        .finally(() => {\r\n                          // this.isLoadingOked = false\r\n                        })\r\n                  }\r\n                  this.thirdTrIdData.push(tmp);\r\n                  counter2++;\r\n                } else {\r\n                  if (secondTrTh[counter2]) {\r\n                    for (\r\n                        let index3 = 0;\r\n                        index3 < secondTrTh[counter2].colSpan;\r\n                        index3++\r\n                    ) {\r\n                      let array = thirdTrTh[counter3].id.split(\",\");\r\n                      let tmp = {\r\n                        columnId: array[0],\r\n                        typeCode: array[1],\r\n                        refCode: array[2],\r\n                        referenceUrl: array[3],\r\n                        referenceAppendUrl: array[4],\r\n                        referenceCode: array[5],\r\n                        referenceNameUz: array[6],\r\n                        referenceNameLt: array[7],\r\n                        referenceNameRu: array[8],\r\n                        searchPayload: Object.assign({}, this.var_default_search_payload),\r\n                        hasNextPage: false,\r\n                        options: [],\r\n                        rowId: [],\r\n                        value: [],\r\n                      };\r\n                      // GET DYNAMIC REFRENCE OPTIONS\r\n                      if (tmp.typeCode == 'SELECT') {\r\n                        for (let i = 0; i < rowsCount; i++) {\r\n                          tmp.value.push({ selectedItem: null })\r\n                        }\r\n                        crudAndListsService.searchListWithKeyword(tmp.referenceUrl, tmp.searchPayload, tmp.referenceAppendUrl)\r\n                            .then(res => {\r\n                              if (\"DepartmentForDocument\" === tmp.refCode) {\r\n                                tmp.options.push(...res.data)\r\n                              } else {\r\n                                tmp.options.push(...res.data.list)\r\n                              }\r\n                              tmp.hasNextPage = res.data.total / tmp.searchPayload.itemsPerPage > tmp.searchPayload.page\r\n                              tmp.searchPayload.page += 1\r\n                              /* if (!this.isModeCreate && this.editingItem.okedId) {\r\n                                  let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n                                  if (!foundItm && this.editingItem.infoOkedDto) {\r\n                                      this.okeds.push(this.editingItem.infoOkedDto)\r\n                                  }\r\n                              } */\r\n                            })\r\n                            .catch(e => {\r\n                              console.log(e)\r\n                              // this.okeds = []\r\n                            })\r\n                            .finally(() => {\r\n                              // this.isLoadingOked = false\r\n                            })\r\n                      }\r\n                      this.thirdTrIdData.push(tmp);\r\n                      counter3++;\r\n                    }\r\n\r\n                    counter2++;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            if (th.classList.contains(\"thirdTrId\")) {\r\n              let array = th.id.split(\",\");\r\n              let tmp = {\r\n                columnId: array[0],\r\n                typeCode: array[1],\r\n                refCode: array[2],\r\n                referenceUrl: array[3],\r\n                referenceAppendUrl: array[4],\r\n                referenceCode: array[5],\r\n                referenceNameUz: array[6],\r\n                referenceNameLt: array[7],\r\n                referenceNameRu: array[8],\r\n                searchPayload: Object.assign({}, this.var_default_search_payload),\r\n                hasNextPage: false,\r\n                options: [],\r\n                rowId: [],\r\n                value: [],\r\n              };\r\n              // GET DYNAMIC REFRENCE OPTIONS\r\n              if (tmp.typeCode == 'SELECT') {\r\n                for (let i = 0; i < rowsCount; i++) {\r\n                  tmp.value.push({ selectedItem: null })\r\n                }\r\n                crudAndListsService.searchListWithKeyword(tmp.referenceUrl, tmp.searchPayload, tmp.referenceAppendUrl)\r\n                    .then(res => {\r\n                      if (\"DepartmentForDocument\" === tmp.refCode) {\r\n                        tmp.options.push(...res.data)\r\n                      } else {\r\n                        tmp.options.push(...res.data.list)\r\n                      }\r\n                      tmp.hasNextPage = res.data.total / tmp.searchPayload.itemsPerPage > tmp.searchPayload.page\r\n                      tmp.searchPayload.page += 1\r\n                      /* if (!this.isModeCreate && this.editingItem.okedId) {\r\n                          let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n                          if (!foundItm && this.editingItem.infoOkedDto) {\r\n                              this.okeds.push(this.editingItem.infoOkedDto)\r\n                          }\r\n                      } */\r\n                    })\r\n                    .catch(e => {\r\n                      console.log(e)\r\n                      // this.okeds = []\r\n                    })\r\n                    .finally(() => {\r\n                      // this.isLoadingOked = false\r\n                    })\r\n              }\r\n              this.thirdTrIdData.push(tmp);\r\n            } else {\r\n              for (let index2 = 0; index2 < th.colSpan; index2++) {\r\n                if (secondTrTh[counter2].colSpan > 1) {\r\n                  for (\r\n                      let index3 = 0;\r\n                      index3 < secondTrTh[counter2].colSpan;\r\n                      index3++\r\n                  ) {\r\n                    let array = thirdTrTh[counter3].id.split(\",\");\r\n                    let tmp = {\r\n                      columnId: array[0],\r\n                      typeCode: array[1],\r\n                      refCode: array[2],\r\n                      referenceUrl: array[3],\r\n                      referenceAppendUrl: array[4],\r\n                      referenceCode: array[5],\r\n                      referenceNameUz: array[6],\r\n                      referenceNameLt: array[7],\r\n                      referenceNameRu: array[8],\r\n                      searchPayload: Object.assign({}, this.var_default_search_payload),\r\n                      hasNextPage: false,\r\n                      options: [],\r\n                      rowId: [],\r\n                      value: [],\r\n                    };\r\n                    // GET DYNAMIC REFRENCE OPTIONS\r\n                    if (tmp.typeCode == 'SELECT') {\r\n                      for (let i = 0; i < rowsCount; i++) {\r\n                        tmp.value.push({ selectedItem: null })\r\n                      }\r\n                      crudAndListsService.searchListWithKeyword(tmp.referenceUrl, tmp.searchPayload, tmp.referenceAppendUrl)\r\n                          .then(res => {\r\n                            if (\"DepartmentForDocument\" === tmp.refCode) {\r\n                              tmp.options.push(...res.data)\r\n                            } else {\r\n                              tmp.options.push(...res.data.list)\r\n                            }\r\n                            tmp.hasNextPage = res.data.total / tmp.searchPayload.itemsPerPage > tmp.searchPayload.page\r\n                            tmp.searchPayload.page += 1\r\n                            /* if (!this.isModeCreate && this.editingItem.okedId) {\r\n                                let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n                                if (!foundItm && this.editingItem.infoOkedDto) {\r\n                                    this.okeds.push(this.editingItem.infoOkedDto)\r\n                                }\r\n                            } */\r\n                          })\r\n                          .catch(e => {\r\n                            console.log(e)\r\n                            // this.okeds = []\r\n                          })\r\n                          .finally(() => {\r\n                            // this.isLoadingOked = false\r\n                          })\r\n                    }\r\n                    this.thirdTrIdData.push(tmp);\r\n                    counter3++;\r\n                  }\r\n                  counter2++;\r\n                } else {\r\n                  if (\r\n                      secondTrTh[counter2] &&\r\n                      secondTrTh[counter2].classList.contains(\"thirdTrId\")\r\n                  ) {\r\n                    let array = secondTrTh[counter2].id.split(\",\");\r\n                    let tmp = {\r\n                      columnId: array[0],\r\n                      typeCode: array[1],\r\n                      refCode: array[2],\r\n                      referenceUrl: array[3],\r\n                      referenceAppendUrl: array[4],\r\n                      referenceCode: array[5],\r\n                      referenceNameUz: array[6],\r\n                      referenceNameLt: array[7],\r\n                      referenceNameRu: array[8],\r\n                      searchPayload: Object.assign({}, this.var_default_search_payload),\r\n                      hasNextPage: false,\r\n                      options: [],\r\n                      rowId: [],\r\n                      value: [],\r\n                    };\r\n                    // GET DYNAMIC REFRENCE OPTIONS\r\n                    if (tmp.typeCode == 'SELECT') {\r\n                      for (let i = 0; i < rowsCount; i++) {\r\n                        tmp.value.push({ selectedItem: null })\r\n                      }\r\n                      crudAndListsService.searchListWithKeyword(tmp.referenceUrl, tmp.searchPayload, tmp.referenceAppendUrl)\r\n                          .then(res => {\r\n                            if (\"DepartmentForDocument\" === tmp.refCode) {\r\n                              tmp.options.push(...res.data)\r\n                            } else {\r\n                              tmp.options.push(...res.data.list)\r\n                            }\r\n                            tmp.hasNextPage = res.data.total / tmp.searchPayload.itemsPerPage > tmp.searchPayload.page\r\n                            tmp.searchPayload.page += 1\r\n                            /* if (!this.isModeCreate && this.editingItem.okedId) {\r\n                                let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n                                if (!foundItm && this.editingItem.infoOkedDto) {\r\n                                    this.okeds.push(this.editingItem.infoOkedDto)\r\n                                }\r\n                            } */\r\n                          })\r\n                          .catch(e => {\r\n                            console.log(e)\r\n                            // this.okeds = []\r\n                          })\r\n                          .finally(() => {\r\n                            // this.isLoadingOked = false\r\n                          })\r\n                    }\r\n                    this.thirdTrIdData.push(tmp);\r\n                    counter2++;\r\n                  } else {\r\n                    if (secondTrTh[counter2]) {\r\n                      for (\r\n                          let index3 = 0;\r\n                          index3 < secondTrTh[counter2].colSpan;\r\n                          index3++\r\n                      ) {\r\n                        let array = thirdTrTh[counter3].id.split(\",\");\r\n                        let tmp = {\r\n                          columnId: array[0],\r\n                          typeCode: array[1],\r\n                          refCode: array[2],\r\n                          referenceUrl: array[3],\r\n                          referenceAppendUrl: array[4],\r\n                          referenceCode: array[5],\r\n                          referenceNameUz: array[6],\r\n                          referenceNameLt: array[7],\r\n                          referenceNameRu: array[8],\r\n                          searchPayload: Object.assign({}, this.var_default_search_payload),\r\n                          hasNextPage: false,\r\n                          options: [],\r\n                          rowId: [],\r\n                          value: [],\r\n                        };\r\n                        // GET DYNAMIC REFRENCE OPTIONS\r\n                        if (tmp.typeCode == 'SELECT') {\r\n                          for (let i = 0; i < rowsCount; i++) {\r\n                            tmp.value.push({ selectedItem: null })\r\n                          }\r\n                          crudAndListsService.searchListWithKeyword(tmp.referenceUrl, tmp.searchPayload, tmp.referenceAppendUrl)\r\n                              .then(res => {\r\n                                if (\"DepartmentForDocument\" === tmp.refCode) {\r\n                                  tmp.options.push(...res.data)\r\n                                } else {\r\n                                  tmp.options.push(...res.data.list)\r\n                                }\r\n                                tmp.hasNextPage = res.data.total / tmp.searchPayload.itemsPerPage > tmp.searchPayload.page\r\n                                tmp.searchPayload.page += 1\r\n                                /* if (!this.isModeCreate && this.editingItem.okedId) {\r\n                                    let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n                                    if (!foundItm && this.editingItem.infoOkedDto) {\r\n                                        this.okeds.push(this.editingItem.infoOkedDto)\r\n                                    }\r\n                                } */\r\n                              })\r\n                              .catch(e => {\r\n                                console.log(e)\r\n                                // this.okeds = []\r\n                              })\r\n                              .finally(() => {\r\n                                // this.isLoadingOked = false\r\n                              })\r\n                        }\r\n                        this.thirdTrIdData.push(tmp);\r\n                        counter3++;\r\n                      }\r\n                      counter2++;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }, 300);\r\n    },\r\n    setRow(v) {\r\n      this.selectedRows = v;\r\n      this.lastReportDataRows = JSON.parse(JSON.stringify(v));\r\n      if (this.selectedRows.length == 0 && !this.isGenerated) {\r\n        this.selectedRows = [{ id: this.getRandomInt() }];\r\n      }\r\n    },\r\n    rowspanFirst(el) {\r\n      return el.children.length > 0\r\n          ? 1\r\n          : el.children.length > 0 && this.thirdColumns.length > 0\r\n              ? 3\r\n              : 3;\r\n    },\r\n    colspanFirst(el) {\r\n      let found = this.thirdColumns.filter((i) => i.fId === el.id);\r\n      let totalNotChild = el.children.filter((d) => d.children.length == 0);\r\n      return el.children.length > 0 && found.length == 0\r\n          ? el.children.length\r\n          : el.children.length > 0 && found.length > 0\r\n              ? totalNotChild.length + found.length\r\n              : 1;\r\n    },\r\n    rowspanSecond(el) {\r\n      return el.children.length == 0 && this.thirdColumns.length == 0\r\n          ? 1\r\n          : el.children.length == 0 && this.thirdColumns.length > 0\r\n              ? 2\r\n              : 1;\r\n    },\r\n    colspanSecond(el) {\r\n      return el.children.length > 0 ? el.children.length : 1;\r\n    },\r\n    rowspanFirstClass(el) {\r\n      return el.children.length > 0\r\n          ? \"\"\r\n          : el.children.length > 0 && this.thirdColumns.length > 0\r\n              ? \"thirdTrId\"\r\n              : \"thirdTrId\";\r\n    },\r\n    rowspanSecondClass(el) {\r\n      return el.children.length == 0 && this.thirdColumns.length == 0\r\n          ? \"thirdTrId\"\r\n          : el.children.length == 0 && this.thirdColumns.length > 0\r\n              ? \"thirdTrId\"\r\n              : \"\";\r\n    },\r\n    normalizer(node) {\r\n      if (!node.children || node.children.length === 0) {\r\n        delete node.children\r\n        return {\r\n          id: node.id,\r\n          label: this.getName({\r\n            nameRu: node.nameRu,\r\n            nameLt: node.nameLt,\r\n            nameUz: node.nameUz,\r\n          }),\r\n        }\r\n      }\r\n      return {\r\n        id: node.id,\r\n        label: this.getName({\r\n          nameRu: node.nameRu,\r\n          nameLt: node.nameLt,\r\n          nameUz: node.nameUz,\r\n        }),\r\n        children: node.children && node.children.length > 0 ? node.children : [],\r\n      }\r\n    },\r\n    calculateDocFormulas(rowId, value, rowIndex, columnIndex, columnId, typeCode) {\r\n      // rowIndex is `selectedRows` index\r\n\r\n      if (this.docTableFormulasListenColumnId[columnId] === undefined) {\r\n        return false;\r\n      }\r\n      let targets = this.docTableFormulasListenColumnId[columnId];\r\n      for (const targetIndex in targets) {\r\n        const docTableFormula = this.docTableFormulasList[targets[targetIndex]];\r\n        let evalString = docTableFormula.eval;\r\n        for (const listenColumn of docTableFormula.listenColumns) {\r\n          let thirdIndex = this.trColumnIdOnDocColumnIdMap[listenColumn];\r\n          let val = parseFloat(this.thirdTrIdData[thirdIndex]?.value[rowIndex]?.value ?? 0);\r\n          if (!val) {\r\n            this.report\r\n          }\r\n          val = isNaN(val) ? 0 : val;\r\n          evalString = evalString.replace(\"{\" + listenColumn + \"}\", val);\r\n        }\r\n        let val = eval(evalString);\r\n\r\n        // todo optimize qilish kerak. v-model bilan qilish kerak\r\n        this.$set(document.getElementById(JSON.stringify({\r\n          \"rowId\": rowId,\r\n          \"columnId\": docTableFormula.targetColumnId.toString()\r\n        })), \"value\", val);\r\n\r\n        this.setValue(rowId, val, rowIndex, this.trColumnIdOnDocColumnIdMap[docTableFormula.targetColumnId], docTableFormula.targetColumnId, typeCode);\r\n      }\r\n    },\r\n    treeClosed(veeName) {\r\n      this.computedObserver.refs[veeName].validate();\r\n    },\r\n    selectCustomLabel({ nameUz, nameLt, nameRu, name, fullName }) {\r\n      if (nameUz) {\r\n        return this.getName({ nameUz: nameUz, nameLt: nameLt, nameRu: nameRu });\r\n      }\r\n      if (fullName) {\r\n        return fullName;\r\n      }\r\n      return name;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div>\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-12\">\r\n          <h5 class=\"text-center mb-1\">\r\n            <strong>\r\n              {{ getName({ nameLt: table.nameLt, nameUz: table.nameUz, nameRu: table.nameRu }) }}\r\n\r\n            </strong>\r\n          </h5>\r\n          <p class=\"text-center m-0\">\r\n            {{ getName({ nameLt: table.titleLt, nameUz: table.titleUz, nameRu: table.titleRu }) }}\r\n\r\n          </p>\r\n        </div>\r\n        <div class=\"col-lg-12\">\r\n          <div class=\"d-flex justify-content-between align-items-end pl-3 pr-3\">\r\n            <div>\r\n              <strong>\r\n                {{\r\n                  getName({\r\n                    nameLt: report.nameLt,\r\n                    nameRu: report.nameRu,\r\n                    nameUz: report.nameUz\r\n                  })\r\n                }}\r\n              </strong><br>\r\n              <span>\r\n                {{\r\n                  report.reportDate\r\n                }}\r\n              </span>\r\n            </div>\r\n            <div>\r\n              <strong>\r\n                {{\r\n                  getName({\r\n                    nameLt: table.conditionLt,\r\n                    nameRu: table.conditionRu,\r\n                  })\r\n                }}\r\n              </strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-lg-12\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"loader\" rounded=\"sm\">\r\n            <div class=\"bg-white pl-3 pr-3 pt-1\" style=\"min-height: 60vh; overflow: auto;\">\r\n              <div class=\"pb-5\">\r\n\r\n                <table class=\"table thead-table table-centered table-custom-bordered\">\r\n                  <thead>\r\n                  <tr class=\"tr-text-center\">\r\n                    <th\r\n                        :id=\"[el.id, el.typeCode, el.refCode, el.referenceUrl, el.referenceAppendUrl, el.referenceCode, el.referenceNameUz, el.referenceNameLt, el.referenceNameRu]\"\r\n                        :class=\"rowspanFirstClass(el, index)\"\r\n                        class=\"firstTrTh\"\r\n                        style=\"min-width: 70px\"\r\n                        :rowspan=\"rowspanFirst(el)\"\r\n                        :colspan=\"colspanFirst(el)\"\r\n                        v-for=\"(el, index) in firstColumns\"\r\n                        :key=\"index + 'first'\"\r\n                    >\r\n                      <div\r\n                          style=\"\r\n                        max-height: 200px;\r\n                          display: inline-block;\r\n                        \"\r\n                      >\r\n                        <div\r\n\r\n                            :class=\"\r\n                        (el.isVertical == 1 )\r\n                        ? 'rotate_text'\r\n                        : ''\r\n                        \"\r\n                        >\r\n                          {{ getName({ nameLt: el.nameLt, nameUz: el.nameUz, nameRu: el.nameRu }) }}\r\n                        </div>\r\n                      </div>\r\n                    </th>\r\n                    <th\r\n                        v-show=\"tableInfo.hasDynamicRows &&  !tableInfo.isGenerated && !loader\"\r\n                        :rowspan=\"thirdColumns.length > 0 ? 3 : secondColumns.length > 0 ? 2 : 1\"\r\n                    >\r\n                      <div\r\n                          style=\"\r\n                        max-height: 200px;\r\n                          display: inline-block;\r\n                        \"\r\n                      >\r\n                        <div>\r\n                          {{ $t('column.actions') }}\r\n                        </div>\r\n                      </div>\r\n\r\n                    </th>\r\n                  </tr>\r\n                  <tr class=\"tr-text-center\">\r\n                    <th\r\n                        style=\"min-width: 70px\"\r\n                        :id=\"[el.id, el.typeCode, el.refCode, el.referenceUrl, el.referenceAppendUrl, el.referenceCode, el.referenceNameUz, el.referenceNameLt, el.referenceNameRu]\"\r\n                        :class=\"rowspanSecondClass(el)\"\r\n                        class=\"secondTrTh\"\r\n                        :rowspan=\"rowspanSecond(el)\"\r\n                        :colspan=\"colspanSecond(el)\"\r\n                        v-for=\"(el, index) in secondColumns\"\r\n                        :key=\"index + 'second'\"\r\n                    >\r\n                      <div\r\n                          style=\"\r\n                          max-height: 200px;\r\n                          position: relative;\r\n                          display: inline-block;\r\n                          cursor: pointer;\"\r\n                      >\r\n                        <div\r\n\r\n                            :class=\"(el.isVertical == 1 )  ? 'rotate_text' : ''\"\r\n                        >\r\n                          {{\r\n                            getName({ nameLt: el.nameLt, nameRu: el.nameRu, nameUz: el.nameUz })\r\n                          }}\r\n                        </div>\r\n                      </div>\r\n                    </th>\r\n                  </tr>\r\n\r\n                  <tr class=\"tr-text-center\">\r\n                    <th\r\n                        style=\"min-width: 70px\"\r\n                        :id=\"[el.id, el.typeCode, el.refCode, el.referenceUrl, el.referenceAppendUrl, el.referenceCode, el.referenceNameUz, el.referenceNameLt, el.referenceNameRu]\"\r\n                        class=\"thirdTrId thirdTrTh\"\r\n                        :colspan=\"el.children.length > 0 ? el.children.length : 1\"\r\n                        v-for=\"(el, index) in thirdColumns\"\r\n                        :key=\"index + 'third'\"\r\n                    >\r\n                      <div\r\n                          style=\"\r\n                            max-height: 200px;\r\n                            position: relative;\r\n                            display: inline-block;\r\n                            cursor: pointer;\r\n                          \"\r\n                      >\r\n                        <div :class=\"(el.isVertical == 1 )  ? 'rotate_text' : ''\">\r\n                          {{\r\n                            getName({ nameLt: el.nameLt, nameRu: el.nameRu, nameUz: el.nameUz })\r\n                          }}\r\n                        </div>\r\n                      </div>\r\n                    </th>\r\n                  </tr>\r\n\r\n                  <tr class=\"tr-text-center\">\r\n                    <td\r\n                        v-for=\"(item, index) of (tableInfo.hasDynamicRows &&  !tableInfo.isGenerated) ? thirdTrIdData.length  + 1 :  thirdTrIdData.length \"\r\n                        :key=\"index + 'I-1'\"\r\n                    >\r\n                      <strong v-if=\"selectedRows.length > 1\">\r\n                        {{\r\n                          selectedRows.length > 1 && index == 0 ? \"\" : index\r\n                        }}\r\n                      </strong\r\n                      >\r\n\r\n                      <strong v-else>\r\n                        {{ index + 1 }}\r\n                      </strong>\r\n                    </td>\r\n                  </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                  <tr\r\n                      v-if=\"isGenerated && !selectedRows.length && !loader\"\r\n                  >\r\n                    <td class=\"text-center\" colspan=\"4000\">\r\n                      <h5 class=\"m-3 p-0\">\r\n                        {{ $t('messages.data_not_found') }}\r\n                      </h5>\r\n                    </td>\r\n                  </tr>\r\n                  <tr v-for=\"(data, index1) in selectedRows\" :key=\"index1 + 'MM'\">\r\n                    <td\r\n                        :class=\"[\r\n                          f1Ids &&\r\n                          f1Ids.indexOf(i.columnId) > -1 &&\r\n                          selectedRows.length > 1 &&\r\n                          fRowId == data.id\r\n                            ? 'bg-success'\r\n                            : f1Ids &&\r\n                              f1Ids.indexOf(i.columnId) > -1 &&\r\n                              selectedRows.length <= 1\r\n                            ? 'bg-success'\r\n                            : '',\r\n                          f2Ids &&\r\n                          f2Ids.indexOf(i.columnId) > -1 &&\r\n                          selectedRows.length > 1 &&\r\n                          fRowId == data.id\r\n                            ? 'bg-primary'\r\n                            : f2Ids &&\r\n                              f2Ids.indexOf(i.columnId) > -1 &&\r\n                              selectedRows.length <= 1\r\n                            ? 'bg-primary'\r\n                            : '',\r\n                        ]\"\r\n                        v-for=\"(i, index) in thirdTrIdData\"\r\n                        :key=\"index + 'td'\"\r\n                        class=\"text-center p\"\r\n                    >\r\n                      <p\r\n                          class=\"m-0 p-2\" v-if=\"i.typeCode == 'SEQUENCE'\">\r\n                        {{ index1 + 1 }}\r\n                      </p>\r\n                      <div\r\n                          v-else-if=\"i.typeCode === 'SELECT' && thirdTrIdData[index].value[index1] && thirdTrIdData[index].value[index1].notEditable\"\r\n                          :v-b-tooltip=\"tableInfo.isGenerated ? '' :{ variant: 'info' }\"\r\n                          class=\"cursor-pointer\"\r\n                          @click=\"tableInfo.isGenerated ? '' : editValue(index1, index)\"\r\n                          :title=\"tableInfo.isGenerated ? '' :  $t('actions.click_to_edit')\"\r\n                      >\r\n                        {{\r\n                          getName({\r\n                            nameUz: thirdTrIdData[index].value[index1].selectValueNameUz,\r\n                            nameLt: thirdTrIdData[index].value[index1].selectValueNameLt,\r\n                            nameRu: thirdTrIdData[index].value[index1].selectValueNameRu\r\n                          })\r\n                        }}\r\n                      </div>\r\n                      <!-- FOR SELECT -->\r\n                      <div v-else-if=\"i.typeCode === 'SELECT'\" style=\"min-width: 300px;\">\r\n\r\n                        <BaseTreeselectWithValidation\r\n                            not-required\r\n                            ref=\"parentDepVeeName\"\r\n                            name=\"parentDepVeeName\"\r\n                            class=\"select_field\"\r\n                            v-if=\"thirdTrIdData[index].value[index1] && i.refCode === 'DepartmentForDocument'\"\r\n                            v-model=\"thirdTrIdData[index].value[index1].selectedItem\"\r\n                            form-label=\"__none\"\r\n                            :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId})\"\r\n                            :options=\"i.options\"\r\n                            :show-count=\"true\"\r\n                            :normalizer=\"normalizer\"\r\n                            :placeholder=\"$t('column.parent_department')\"\r\n                            :custom-label=\"selectCustomLabel\"\r\n                            :default-expand-level=\"1\"\r\n                            @select=\"setValue(data.id,$event,index1,index,i.columnId,i.typeCode,i.notEditable)\"\r\n                            @search-change=\"debounceSearchDynamicRefs\"\r\n                        >\r\n                          <div slot=\"value-label\">-{{ thirdTrIdData[index].value[index1].selectValueNameUz }}</div>\r\n                        </BaseTreeselectWithValidation>\r\n                        <BaseTreeselectWithValidation\r\n                            not-required\r\n                            ref=\"parentDepVeeName\"\r\n                            name=\"parentDepVeeName\"\r\n                            class=\"select_field\"\r\n                            v-if=\"!thirdTrIdData[index].value[index1] && i.refCode === 'DepartmentForDocument'\"\r\n                            v-model=\"thirdTrIdData[index].value[index1]\"\r\n                            form-label=\"__none\"\r\n                            :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId})\"\r\n                            :options=\"i.options\"\r\n                            :show-count=\"true\"\r\n                            :normalizer=\"normalizer\"\r\n                            :placeholder=\"$t('column.parent_department')\"\r\n                            :default-expand-level=\"1\"\r\n                            :custom-label=\"({nameUz, nameLt, nameRu, name})  => nameUz ? getName({nameUz: nameUz, nameLt: nameLt, nameRu: nameRu}) : name\"\r\n                            @select=\"setValue(data.id,$event,index1,index,i.columnId,i.typeCode,i.notEditable)\"\r\n                            @search-change=\"debounceSearchDynamicRefs\"\r\n                        >\r\n                        </BaseTreeselectWithValidation>\r\n                        <BaseMultiselectWithValidation\r\n                            v-if=\"thirdTrIdData[index].value[index1] && i.refCode !== 'DepartmentForDocument'\"\r\n                            not-required\r\n                            only-form-element\r\n                            v-model=\"thirdTrIdData[index].value[index1].selectedItem\"\r\n                            class=\"select_field\"\r\n                            :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId})\"\r\n                            :custom-label=\"selectCustomLabel\"\r\n                            label=\"name\"\r\n                            @select=\"setValue(data.id,$event,index1,index,i.columnId,i.typeCode,i.notEditable)\"\r\n                            :options=\"i.options\"\r\n                            :placeholder=\"getName({nameUz: i.referenceNameUz, nameLt: i.referenceNameLt, nameRu: i.referenceNameRu})\"\r\n                            open-direction=\"bottom\"\r\n                            :max-height=\"600\"\r\n                            :show-labels=\"false\"\r\n                            :has-next-page=\"i.hasNextPage\"\r\n                            @reachedEndOfList=\"dynamicRefsReachedEndOfList\"\r\n                            @search-change=\"debounceSearchDynamicRefs\"\r\n                            :searchable=\"true\"\r\n                            preserve-search\r\n                            :clear-on-select=\"false\"\r\n                            :loading=\"i.isLoading\"\r\n                            :internal-search=\"false\"\r\n                            :with-create-addition=\"(thirdTrIdData[index].value[index1] && thirdTrIdData[index].value[index1].originalSelectValueNameUz) ? true : false\"\r\n                        >\r\n                          <template v-slot:append-slot>\r\n                            <b-btn\r\n                                v-if=\"thirdTrIdData[index].value[index1] && thirdTrIdData[index].value[index1].originalSelectValueNameUz\"\r\n                                variant=\"link\"\r\n                                class=\"text-decoration-none p-0 text-danger\"\r\n                                style=\"font-size: 1.2rem;\"\r\n                            >\r\n                              <i\r\n                                  @click=\"resetValue(index1, index)\"\r\n                                  class=\"mdi mdi-refresh\"\r\n                              ></i>\r\n                            </b-btn>\r\n                          </template>\r\n                        </BaseMultiselectWithValidation>\r\n                        <BaseMultiselectWithValidation\r\n                            v-else-if=\"!thirdTrIdData[index].value[index1] && i.refCode !== 'DepartmentForDocument'\"\r\n                            not-required\r\n                            only-form-element\r\n                            class=\"select_field\"\r\n                            :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId})\"\r\n                            v-model=\"thirdTrIdData[index].value[index1]\"\r\n                            :custom-label=\"selectCustomLabel\"\r\n                            label=\"name\"\r\n                            @select=\"setValue(data.id,$event,index1,index,i.columnId,i.typeCode,i.notEditable)\"\r\n                            :options=\"i.options\"\r\n                            :placeholder=\"getName({nameUz: i.referenceNameUz, nameLt: i.referenceNameLt, nameRu: i.referenceNameRu})\"\r\n                            open-direction=\"bottom\"\r\n                            :max-height=\"600\"\r\n                            :show-labels=\"false\"\r\n                            :has-next-page=\"i.hasNextPage\"\r\n                            @reachedEndOfList=\"dynamicRefsReachedEndOfList\"\r\n                            @search-change=\"debounceSearchDynamicRefs\"\r\n                            :searchable=\"true\"\r\n                            preserve-search\r\n                            :clear-on-select=\"false\"\r\n                            :loading=\"i.isLoading\"\r\n                            :internal-search=\"false\"\r\n                        />\r\n                      </div>\r\n                      <!-- FOR DATE -->\r\n                      <BaseDatePickerWithValidation\r\n                          v-else-if=\"i.typeCode === 'DATE' && thirdTrIdData[index].value[index1]\"\r\n                          not-required\r\n                          only-form-element\r\n                          custom-styles=\"min-width: 140px;\"\r\n                          placeholder=\"\"\r\n                          v-model=\"thirdTrIdData[index].value[index1].value\"\r\n                          class=\"datepicker_field\"\r\n                          :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId,})\"\r\n                          @input=\"(e) => setValue( data.id, e, index1, index, i.columnId, i.typeCode ) \"\r\n                          lang=\"ru\"\r\n                      />\r\n                      <BaseDatePickerWithValidation\r\n                          v-else-if=\"i.typeCode === 'DATE'\"\r\n                          not-required\r\n                          only-form-element\r\n                          custom-styles=\"min-width: 140px;\"\r\n                          class=\"datepicker_field\"\r\n                          :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId,})\"\r\n                          placeholder=\"\"\r\n                          @input=\"(e) =>setValue(data.id,e,index1,index,i.columnId,i.typeCode)\"\r\n                          lang=\"ru\"\r\n                      />\r\n\r\n                      <!-- FOR YEAR -->\r\n                      <BaseDatePickerWithValidation\r\n                          v-else-if=\"i.typeCode === 'YEAR' && thirdTrIdData[index].value[index1]\"\r\n                          not-required\r\n                          only-form-element\r\n                          custom-styles=\"min-width: 140px;\"\r\n                          placeholder=\"\"\r\n                          v-model=\"thirdTrIdData[index].value[index1].value\"\r\n                          class=\"datepicker_field dynamic-year\"\r\n                          :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId,})\"\r\n                          @input=\"(e) => setValue( data.id, e, index1, index, i.columnId, i.typeCode ) \"\r\n                          type=\"year\"\r\n                          format=\"YYYY\"\r\n                      />\r\n                      <BaseDatePickerWithValidation\r\n                          v-else-if=\"i.typeCode === 'YEAR'\"\r\n                          not-required\r\n                          only-form-element\r\n                          custom-styles=\"min-width: 140px;\"\r\n                          class=\"datepicker_field dynamic-year\"\r\n                          :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId,})\"\r\n                          placeholder=\"\"\r\n                          @input=\"(e) =>setValue(data.id,e,index1,index,i.columnId,i.typeCode)\"\r\n                          type=\"year\"\r\n                          format=\"YYYY\"\r\n                      />\r\n\r\n                      <!-- FOR STRING -->\r\n                      <div v-else-if=\"i.typeCode === 'STRING'\" style=\"min-width: 300px;\">\r\n                        <b-form-input\r\n                            @keydown=\" (evt) => keydownEvt( evt, data.id, evt.target.value, index1, index, i.columnId, i.typeCode ) \"\r\n                            @keyup=\"(event) => calculateDocFormulas(data.id, event.target.value, index1, index, i.columnId, i.typeCode)\"\r\n                            :class=\"\r\n                              currentPosition.rowId &&\r\n                              currentPosition.columnId &&\r\n                              i.columnId == currentPosition.columnId &&\r\n                              data.id == currentPosition.rowId\r\n                                ? 'borderInput'\r\n                                : currentPosition.columnId &&\r\n                                  !currentPosition.rowId &&\r\n                                  i.columnId == currentPosition.columnId\r\n                                ? 'borderInput'\r\n                                : ''\r\n                            \"\r\n                            @focus=\" (e) => focusVal( data.id, e, index1, index, i.columnId, i.typeCode ) \"\r\n                            :style=\" report.status && report.status !== 'CREATED' ? 'border: none !important' : ''\"\r\n                            :disabled=\"report.status && report.status !== 'CREATED'\"\r\n                            :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId,})\"\r\n                            @input=\"(e) => setValue( data.id, e, index1, index, i.columnId, i.typeCode)\"\r\n                            class=\"text-center input_val p-0\"\r\n                        >\r\n                        </b-form-input>\r\n                      </div>\r\n                      <!-- FOR BOOLEAN -->\r\n                      <Checkbox\r\n                          v-else-if=\"i.typeCode === 'BOOLEAN' && thirdTrIdData[index].value[index1]\"\r\n                          v-model=\"thirdTrIdData[index].value[index1].value\"\r\n                          :font-size=\"0\"\r\n                          :disabled=\"\r\n                            report.status && report.status !== 'CREATED'\r\n                          \"\r\n                          :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId,})\"\r\n                          class=\"justify-content-center checkbox_field\"\r\n                          @change=\"(e) =>setValue(data.id,e,index1,index,i.columnId,i.typeCode)\"\r\n                      />\r\n                      <Checkbox\r\n                          v-else-if=\"i.typeCode === 'BOOLEAN'\"\r\n                          :font-size=\"0\"\r\n                          :disabled=\"\r\n                            report.status && report.status !== 'CREATED'\r\n                          \"\r\n                          :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId,})\"\r\n                          class=\"justify-content-center checkbox_field\"\r\n                          @change=\"(e) =>setValue(data.id,e,index1,index,i.columnId,i.typeCode)\"\r\n                      />\r\n                      <!-- FOR INTEGER -->\r\n                      <div v-else>\r\n                        <b-form-input\r\n                            @keydown=\"(evt) => keydownEvt(evt,data.id,evt.target.value,index1,index,i.columnId,i.typeCode) \"\r\n                            @keyup=\"(event) => calculateDocFormulas(data.id, event.target.value, index1, index, i.columnId, i.typeCode)\"\r\n                            :class=\"\r\n                              currentPosition.rowId &&\r\n                              currentPosition.columnId &&\r\n                              i.columnId == currentPosition.columnId &&\r\n                              data.id == currentPosition.rowId\r\n                                ? 'borderInput'\r\n                                : currentPosition.columnId &&\r\n                                  !currentPosition.rowId &&\r\n                                  i.columnId == currentPosition.columnId\r\n                                ? 'borderInput'\r\n                                : ''\r\n                            \"\r\n                            :data-column-id=\"i.columnId\"\r\n                            @focus=\"(e) => focusVal(data.id, e, index1, index, i.columnId, i.typeCode)\"\r\n                            :style=\"report.status && report.status !== 'CREATED' ? 'border: none !important' : ''\"\r\n                            :disabled=\"report.status && report.status !== 'CREATED'\"\r\n                            :id=\"JSON.stringify({rowId: data.id,columnId: i.columnId,})\"\r\n                            @input=\"(e) => setValue(data.id, e, index1, index, i.columnId, i.typeCode)\"\r\n                            type=\"number\"\r\n                            class=\"text-center input_val p-0\"\r\n                        >\r\n                        </b-form-input>\r\n                      </div>\r\n                    </td>\r\n                    <td style=\"width: 30px\" v-show=\"tableInfo.hasDynamicRows &&  !tableInfo.isGenerated\">\r\n                      <div style=\"display: block; text-align: center\" class=\"mt-1\">\r\n                        <i v-if=\"selectedRows.length > 1\" @click=\"deleteRow(index1, data)\" style=\"color: red\"\r\n                           class=\"mdi mdi-trash-can delete grow \"></i>\r\n                        <i v-if=\"selectedRows.length-1 === index1\" @click=\"addNewRow\" style=\"color: #0059ff\"\r\n                           class=\"mdi mdi-plus-circle grow \"> </i>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                  </tbody>\r\n                  <tfoot>\r\n                  <tr class=\"mt-5\" v-show=\"showResult\"\r\n                  >\r\n                    <td v-for=\"(i, index) in thirdTrIdData\"\r\n                        :key=\"index + 'td'\"\r\n                        class=\"text-center p\"\r\n                    >\r\n                      <p v-if=\"index === 0\">Jami</p>\r\n                      <div v-else-if=\"i.typeCode === 'BIGDECIMAL'\">\r\n                        {{ getColumnData(i) }}\r\n                      </div>\r\n                      <div v-else>---</div>\r\n                    </td>\r\n                    <td></td>\r\n                  </tr>\r\n                  </tfoot>\r\n                </table>\r\n              </div>\r\n              <div v-show=\"tableInfo.hasDynamicRows &&  !tableInfo.isGenerated\">\r\n                <!-- <b-button variant=\"primary\" class=\"mr-1\" @click=\"showResult = !showResult \">\r\n                  {{ $t( 'submodules.reports.report_result_see' ) }}\r\n                </b-button> -->\r\n                <b-button closed variant=\"warning\" class=\"ml-1\" @click=\"closeReport\">\r\n                  {{ $t('submodules.reports.stop_forming_report') }}\r\n                </b-button>\r\n              </div>\r\n            </div>\r\n          </b-overlay>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--    <pre>-->\r\n    <!--         {{selectedRows}}-->\r\n    <!--    </pre>-->\r\n\r\n    <!--    <div>-->\r\n    <!--      <b-button variant=\"success\">Jami</b-button>-->\r\n    <!--    </div>-->\r\n  </div>\r\n</template>\r\n<style lang=\"scss\">\r\n.borderInput {\r\n  border: 2px solid green !important;\r\n}\r\n\r\nth {\r\n  /* &#SELECT {\r\n    width: 20%;\r\n  } */\r\n  &[id*=\"SELECT\"] {\r\n    width: 150px;\r\n  }\r\n}\r\n\r\n.check {\r\n  margin-top: 5px;\r\n\r\n  .m-chckbox--container {\r\n    margin: 0px !important;\r\n    width: 22px !important;\r\n  }\r\n\r\n  label {\r\n    margin: 0;\r\n    display: none;\r\n  }\r\n}\r\n\r\n.vue-treeselect__list-item {\r\n  padding-left: 15px !important;\r\n}\r\n\r\n.vue-treeselect__list-item.vue-treeselect__indent-level-0 {\r\n  padding-left: 0px !important;\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n/* Chrome, Safari, Edge, Opera */\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n\r\n/* Firefox */\r\ninput[type=\"number\"] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\n.rotate_text {\r\n  height: 100%;\r\n  word-break: normal;\r\n  writing-mode: vertical-rl;\r\n  -ms-writing-mode: vertical-lr;\r\n  -webkit-transform: rotate(-180deg);\r\n  -moz-transform: rotate(-180deg);\r\n  -o-transform: rotate(-180deg);\r\n  transform: rotate(-180deg);\r\n  padding-bottom: 20px !important;\r\n  padding-top: 20px !important;\r\n}\r\n\r\n.no_enter_value {\r\n  padding: 0px !important;\r\n  min-width: auto !important;\r\n}\r\n\r\n.grow {\r\n  font-size: 1.3em;\r\n  cursor: pointer;\r\n}\r\n\r\n.grow:hover,\r\n.grow:focus,\r\n.grow:active {\r\n  transition: all .2s ease-in-out;\r\n  -webkit-transform: scale(1.3);\r\n  transform: scale(1.3);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/modules/report/organizitional/components"}]}