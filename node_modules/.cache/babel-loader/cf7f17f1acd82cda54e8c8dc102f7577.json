{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\services\\api.service.js","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\services\\api.service.js","mtime":1674799498043},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1667355397815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IFRva2VuU2VydmljZSB9IGZyb20gIi4vc3RvcmFnZS5zZXJ2aWNlIjsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RhdGUvc3RvcmUiOyAvLyBpbXBvcnQgVXNlclNlcnZpY2UgZnJvbSAiLi91c2VyLnNlcnZpY2UiOwovLyBGVU5DVElPTiBGT1IgQ0hFQ0tJTkcgSUYgU1RSSU5HIElTIEpTT04gUEFSU0FCTEUKCmZ1bmN0aW9uIGlzSnNvbihzdHIpIHsKICB0cnkgewogICAgSlNPTi5wYXJzZShzdHIpOwogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiB0cnVlOwp9Cgp2YXIgQXBpU2VydmljZSA9IHsKICAvLyBTdG9yZXMgdGhlIDQwMSBpbnRlcmNlcHRvciBwb3NpdGlvbiBzbyB0aGF0IGl0IGNhbiBiZSBsYXRlciBlamVjdGVkIHdoZW4gbmVlZGVkCiAgXzQwMWludGVyY2VwdG9yOiBudWxsLAogIF9yZXF1ZXN0SW50ZXJjZXB0b3I6IG51bGwsCiAgaW5pdDogZnVuY3Rpb24gaW5pdChiYXNlVVJMKSB7CiAgICBheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gYmFzZVVSTDsKICB9LAogIHNldEhlYWRlcjogZnVuY3Rpb24gc2V0SGVhZGVyKCkgewogICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9ICJCZWFyZXIgIi5jb25jYXQoVG9rZW5TZXJ2aWNlLmdldFRva2VuKCkpOwogIH0sCiAgcmVtb3ZlSGVhZGVyOiBmdW5jdGlvbiByZW1vdmVIZWFkZXIoKSB7CiAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbiA9IHt9OwogIH0sCiAgYWxsOiBmdW5jdGlvbiBhbGwocmVzb3VyY2UsIHdpdGhMb2FkZXIpIHsKICAgIHJldHVybiBheGlvcy5hbGwocmVzb3VyY2UsIHsKICAgICAgd2l0aExvYWRlcjogd2l0aExvYWRlcgogICAgfSk7CiAgfSwKICBzcHJlYWQ6IGZ1bmN0aW9uIHNwcmVhZCgpIHsKICAgIHJldHVybiBheGlvcy5zcHJlYWQuYXBwbHkoYXhpb3MsIGFyZ3VtZW50cyk7CiAgfSwKICBnZXQ6IGZ1bmN0aW9uIGdldChyZXNvdXJjZSwgd2l0aExvYWRlcikgewogICAgcmV0dXJuIGF4aW9zLmdldChyZXNvdXJjZSwgewogICAgICB3aXRoTG9hZGVyOiB3aXRoTG9hZGVyCiAgICB9KTsKICB9LAogIHBvc3Q6IGZ1bmN0aW9uIHBvc3QocmVzb3VyY2UsIGRhdGEpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICAgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9OwogICAgcmV0dXJuIGF4aW9zLnBvc3QocmVzb3VyY2UsIGRhdGEsIF9vYmplY3RTcHJlYWQoewogICAgICB3aXRoTG9hZGVyOiB3aXRoTG9hZGVyCiAgICB9LCBjb25maWcpKTsKICB9LAogIHBvc3RGaWxlOiBmdW5jdGlvbiBwb3N0RmlsZShyZXNvdXJjZSwgZGF0YSkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogICAgcmV0dXJuIGF4aW9zLnBvc3QocmVzb3VyY2UsIGRhdGEsIHsKICAgICAgcmVzcG9uc2VUeXBlOiAiYmxvYiIsCiAgICAgIHdpdGhMb2FkZXI6IHdpdGhMb2FkZXIKICAgIH0pOwogIH0sCiAgcG9zdEZpbGVQcm9maWxlOiBmdW5jdGlvbiBwb3N0RmlsZVByb2ZpbGUocmVzb3VyY2UsIGRhdGEpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICAgIHJldHVybiBheGlvcy5wdXQocmVzb3VyY2UsIGRhdGEsIHsKICAgICAgcmVzcG9uc2VUeXBlOiAiYmxvYiIsCiAgICAgIHdpdGhMb2FkZXI6IHdpdGhMb2FkZXIKICAgIH0pOwogIH0sCiAgZ2V0RmlsZTogZnVuY3Rpb24gZ2V0RmlsZShyZXNvdXJjZSkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgcmV0dXJuIGF4aW9zLmdldChyZXNvdXJjZSwgewogICAgICByZXNwb25zZVR5cGU6ICJibG9iIiwKICAgICAgd2l0aExvYWRlcjogd2l0aExvYWRlcgogICAgfSk7CiAgfSwKICBmb3JtRGF0YUZpbGU6IGZ1bmN0aW9uIGZvcm1EYXRhRmlsZShyZXNvdXJjZSwgZGF0YSkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogICAgcmV0dXJuIGF4aW9zLnBvc3QocmVzb3VyY2UsIGRhdGEsIHsKICAgICAgaGVhZGVyczogewogICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIKICAgICAgfSwKICAgICAgd2l0aExvYWRlcjogd2l0aExvYWRlcgogICAgfSk7CiAgfSwKICBmb3JtRGF0YVB1dDogZnVuY3Rpb24gZm9ybURhdGFQdXQocmVzb3VyY2UsIGRhdGEpIHsKICAgIHJldHVybiBheGlvcy5wdXQocmVzb3VyY2UsIGRhdGEsIHsKICAgICAgaGVhZGVyczogewogICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgfQogICAgfSk7CiAgfSwKICBwdXQ6IGZ1bmN0aW9uIHB1dChyZXNvdXJjZSwgZGF0YSkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogICAgcmV0dXJuIGF4aW9zLnB1dChyZXNvdXJjZSwgZGF0YSwgewogICAgICB3aXRoTG9hZGVyOiB3aXRoTG9hZGVyCiAgICB9KTsKICB9LAogIGRlbGV0ZTogZnVuY3Rpb24gX2RlbGV0ZShyZXNvdXJjZSkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgcmV0dXJuIGF4aW9zLmRlbGV0ZShyZXNvdXJjZSwgewogICAgICB3aXRoTG9hZGVyOiB3aXRoTG9hZGVyCiAgICB9KTsKICB9LAoKICAvKioNCiAgICogUGVyZm9ybSBhIGN1c3RvbSBheGlvcyByZXF1ZXN0Lg0KICAgKg0KICAgKiBkYXRhIGlzIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczoNCiAgICogIC0gbWV0aG9kDQogICAqICAtIHVybA0KICAgKiAgLSBkYXRhIC4uLiByZXF1ZXN0IHBheWxvYWQNCiAgICogIC0gYXV0aCAob3B0aW9uYWwpDQogICAqICAgIC0gdXNlcm5hbWUNCiAgICogICAgLSBwYXNzd29yZA0KICAgKiovCiAgY3VzdG9tUmVxdWVzdDogZnVuY3Rpb24gY3VzdG9tUmVxdWVzdChkYXRhKSB7CiAgICByZXR1cm4gYXhpb3MoZGF0YSk7CiAgfSwKICBtb3VudDQwMUludGVyY2VwdG9yOiBmdW5jdGlvbiBtb3VudDQwMUludGVyY2VwdG9yKCkgewogICAgdmFyIHJlcXVlc3RDb3VudCA9IDA7CiAgICB2YXIgbWVzc2FnZXMgPSBbXTsKICAgIHRoaXMuXzQwMWludGVyY2VwdG9yID0gYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlcXVlc3RDb3VudCA+IDApCiAgICAgICAgLyogREVDUkVNRU5UIFJFUVVFU1QgQ09VTlQgKi8KICAgICAgICByZXF1ZXN0Q291bnQtLTsKICAgICAgLyogR0xPQkFMIExPQURJTkcgT1ZFUkxBWSBQQVJUICovCgogICAgICBpZiAocmVxdWVzdENvdW50ID09PSAwKSB7CiAgICAgICAgLy8gQ0hFQ0sgSUYgVEhFUkUgV0VSRSBBTlkgRVJST1JTCiAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHN0b3JlLmNvbW1pdCgiU0VUX0dMT0JBTF9TTkFDS0JBUiIsIG1lc3NhZ2VzKTsKICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICBWdWUuJHRvYXN0KG1zZy5tZXNzYWdlLCB7CiAgICAgICAgICAgICAgdHlwZTogbXNnLnR5cGUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIG1lc3NhZ2VzID0gW107CiAgICAgICAgfQoKICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9HTE9CQUxfTE9BRElORyIsIGZhbHNlKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfSwgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZXJyb3IpIHsKICAgICAgICB2YXIgYWxlcnRQYXlsb2FkOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Q291bnQgPiAwKQogICAgICAgICAgICAgICAgICAvKiBERUNSRU1FTlQgUkVRVUVTVCBDT1VOVCAqLwogICAgICAgICAgICAgICAgICByZXF1ZXN0Q291bnQtLTsKICAgICAgICAgICAgICAgIC8qIEdMT0JBTCBMT0FESU5HIE9WRVJMQVkgQU5EDQogICAgICAgICAgICAgICAgICAgICAgICAgU0hPV0lORyBFUlJPUiBNRVNTQUdFUyBQQVJUICovCgogICAgICAgICAgICAgICAgYWxlcnRQYXlsb2FkID0gewogICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5yZXF1ZXN0LnJlc3BvbnNlID8gaXNKc29uKGVycm9yLnJlcXVlc3QucmVzcG9uc2UpID8gSlNPTi5wYXJzZShlcnJvci5yZXF1ZXN0LnJlc3BvbnNlKS5tZXNzYWdlLnN1YnN0cmluZygwLCAxMjApIDogZXJyb3IucmVxdWVzdC5yZXNwb25zZSA6ICIoIi5jb25jYXQoZXJyb3IucmVxdWVzdC5zdGF0dXMsICIpIC0gU29tZXRoaW5nIHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluIiksCiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5yZXF1ZXN0LnJlc3BvbnNlID8gaXNKc29uKGVycm9yLnJlcXVlc3QucmVzcG9uc2UpID8gSlNPTi5wYXJzZShlcnJvci5yZXF1ZXN0LnJlc3BvbnNlKS5kZXRhaWxzIDogZXJyb3IucmVxdWVzdC5yZXNwb25zZSA6IFtdLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgLyogQUREIEVSUk9SIE1FU1NBR0UgVE8gR0xPQkFMIE1FU1NBR0VTIFNUQVRFICovCgogICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChhbGVydFBheWxvYWQpOwoKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Q291bnQgPT09IDApIHsKICAgICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfR0xPQkFMX0xPQURJTkciLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiU0VUX0dMT0JBTF9TTkFDS0JBUiIsIG1lc3NhZ2VzKTsKICAgICAgICAgICAgICAgICAgbWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlcXVlc3Quc3RhdHVzKSB7Ly8gVE9ETzogU2FoaWZhIG1hdmp1ZCBlbWFzIGRlYiB5b3ppYiBxbyd5aXNoIGtlcmFrLgogICAgICAgICAgICAgICAgICAgICAgLy8gbXNnLm1lc3NhZ2UgPSB0aGlzLiR0KCdtZXNzYWdlcy5kYXRhX25vdF9mb3VuZCcpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBWdWUuJHRvYXN0KG1zZy5tZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBtc2cudHlwZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgbWVzc2FnZXMgPSBbXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCgogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlcXVlc3QpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlcXVlc3Quc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgiYXV0aC9sb2dvdXQiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSAvLyBJZiBlcnJvciB3YXMgbm90IDQwMSBqdXN0IHJlamVjdCBhcyBpcwoKCiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpKTsKICAgIHRoaXMuX3JlcXVlc3RJbnRlcmNlcHRvciA9IGF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgIGlmIChjb25maWcud2l0aExvYWRlcikgewogICAgICAgIC8qIEdMT0JBTCBMT0FESU5HIE9WRVJMQVkgUEFSVCAqLwogICAgICAgIHN0b3JlLmNvbW1pdCgiU0VUX0dMT0JBTF9MT0FESU5HIiwgdHJ1ZSk7CiAgICAgICAgLyogSU5DUkVNRU5UIFJFUVVFU1QgQ09VTlQgKi8KCiAgICAgICAgcmVxdWVzdENvdW50Kys7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb25maWc7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgaWYgKHJlcXVlc3RDb3VudCA+IDApCiAgICAgICAgLyogREVDUkVNRU5UIFJFUVVFU1QgQ09VTlQgKi8KICAgICAgICByZXF1ZXN0Q291bnQtLTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0sCiAgdW5tb3VudDQwMUludGVyY2VwdG9yOiBmdW5jdGlvbiB1bm1vdW50NDAxSW50ZXJjZXB0b3IoKSB7CiAgICAvLyBFamVjdCB0aGUgaW50ZXJjZXB0b3IKICAgIGF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS5lamVjdCh0aGlzLl80MDFpbnRlcmNlcHRvcik7CiAgICBheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5lamVjdCh0aGlzLl9yZXF1ZXN0SW50ZXJjZXB0b3IpOwogIH0sCiAgcmVzcG9uc2VUeXBlQmxvYjogZnVuY3Rpb24gcmVzcG9uc2VUeXBlQmxvYih1cmwsIHdpdGhMb2FkZXIpIHsKICAgIHJldHVybiBheGlvcy5nZXQodXJsLCB7CiAgICAgIHdpdGhMb2FkZXI6IHdpdGhMb2FkZXIsCiAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InCiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IEFwaVNlcnZpY2U7"},{"version":3,"sources":["C:/ACRU PROJECT/Fair Tech/acru-frontend/src/shared/services/api.service.js"],"names":["Vue","axios","TokenService","store","isJson","str","JSON","parse","e","ApiService","_401interceptor","_requestInterceptor","init","baseURL","defaults","setHeader","headers","common","getToken","removeHeader","all","resource","withLoader","spread","get","post","data","config","postFile","responseType","postFileProfile","put","getFile","formDataFile","formDataPut","delete","customRequest","mount401Interceptor","requestCount","messages","interceptors","response","use","length","commit","forEach","msg","$toast","message","type","error","alertPayload","show","request","substring","status","description","details","push","dispatch","Promise","reject","unmount401Interceptor","eject","responseTypeBlob","url"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport axios from \"axios\";\r\nimport { TokenService } from \"./storage.service\";\r\nimport store from \"@/state/store\";\r\n\r\n// import UserService from \"./user.service\";\r\n\r\n// FUNCTION FOR CHECKING IF STRING IS JSON PARSABLE\r\nfunction isJson (str) {\r\n  try {\r\n    JSON.parse(str);\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nconst ApiService = {\r\n  // Stores the 401 interceptor position so that it can be later ejected when needed\r\n  _401interceptor: null,\r\n  _requestInterceptor: null,\r\n\r\n  init (baseURL) {\r\n    axios.defaults.baseURL = baseURL;\r\n  },\r\n\r\n  setHeader () {\r\n    axios.defaults.headers.common[\r\n      \"Authorization\"\r\n    ] = `Bearer ${TokenService.getToken()}`;\r\n  },\r\n\r\n  removeHeader () {\r\n    axios.defaults.headers.common = {};\r\n  },\r\n\r\n  all (resource, withLoader) {\r\n    return axios.all(resource, { withLoader: withLoader });\r\n  },\r\n\r\n  spread (...args) {\r\n    return axios.spread(...args);\r\n  },\r\n\r\n  get (resource, withLoader) {\r\n    return axios.get(resource, { withLoader: withLoader });\r\n  },\r\n\r\n  post (resource, data, withLoader = false, config = {}) {\r\n    return axios.post(resource, data, { withLoader: withLoader, ...config });\r\n  },\r\n  postFile (resource, data, withLoader = false) {\r\n    return axios.post(resource, data, {\r\n      responseType: \"blob\",\r\n      withLoader: withLoader\r\n    });\r\n  },\r\n  postFileProfile (resource, data, withLoader = false) {\r\n    return axios.put(resource, data, {\r\n      responseType: \"blob\",\r\n      withLoader: withLoader\r\n    });\r\n  },\r\n  getFile (resource, withLoader = false) {\r\n    return axios.get(resource, {\r\n      responseType: \"blob\",\r\n      withLoader: withLoader\r\n    });\r\n  },\r\n  formDataFile (resource, data, withLoader = false) {\r\n    return axios.post(resource, data, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\"\r\n      },\r\n      withLoader: withLoader\r\n    });\r\n  },\r\n  formDataPut (resource, data) {\r\n    return axios.put(resource, data,\r\n      {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        },\r\n      })\r\n  },\r\n  put (resource, data, withLoader = false) {\r\n    return axios.put(resource, data, { withLoader: withLoader });\r\n  },\r\n\r\n  delete (resource, withLoader = false) {\r\n    return axios.delete(resource, { withLoader: withLoader });\r\n  },\r\n\r\n  /**\r\n   * Perform a custom axios request.\r\n   *\r\n   * data is an object containing the following properties:\r\n   *  - method\r\n   *  - url\r\n   *  - data ... request payload\r\n   *  - auth (optional)\r\n   *    - username\r\n   *    - password\r\n   **/\r\n  customRequest (data) {\r\n    return axios(data);\r\n  },\r\n\r\n  mount401Interceptor () {\r\n    let requestCount = 0;\r\n    let messages = [];\r\n    this._401interceptor = axios.interceptors.response.use(\r\n      response => {\r\n        if (requestCount > 0)\r\n          /* DECREMENT REQUEST COUNT */\r\n          requestCount--;\r\n        /* GLOBAL LOADING OVERLAY PART */\r\n        if (requestCount === 0) {\r\n          // CHECK IF THERE WERE ANY ERRORS\r\n          if (messages.length > 0) {\r\n            store.commit(\"SET_GLOBAL_SNACKBAR\", messages);\r\n            messages.forEach(msg => {\r\n              Vue.$toast(msg.message, { type: msg.type })\r\n            })\r\n            messages = [];\r\n          }\r\n\r\n          store.commit(\"SET_GLOBAL_LOADING\", false);\r\n        }\r\n        return response;\r\n      },\r\n      async error => {\r\n        if (requestCount > 0)\r\n          /* DECREMENT REQUEST COUNT */\r\n          requestCount--;\r\n        /* GLOBAL LOADING OVERLAY AND\r\n                 SHOWING ERROR MESSAGES PART */\r\n        let alertPayload = {\r\n          show: true,\r\n          message: error.request.response\r\n            ? (isJson(error.request.response)\r\n              ? JSON.parse(error.request.response).message.substring(0, 120)\r\n              : error.request.response)\r\n            : `(${error.request.status}) - Something wrong, please try again`,\r\n          description: error.request.response\r\n            ? isJson(error.request.response)\r\n              ? JSON.parse(error.request.response).details\r\n              : error.request.response\r\n            : [],\r\n          type: \"error\"\r\n        };\r\n        /* ADD ERROR MESSAGE TO GLOBAL MESSAGES STATE */\r\n        messages.push(alertPayload);\r\n        if (requestCount === 0) {\r\n          store.commit(\"SET_GLOBAL_LOADING\", false);\r\n          store.commit(\"SET_GLOBAL_SNACKBAR\", messages);\r\n          messages.forEach(msg => {\r\n            if (error.request.status) {\r\n              // TODO: Sahifa mavjud emas deb yozib qo'yish kerak.\r\n              // msg.message = this.$t('messages.data_not_found')\r\n            }\r\n            Vue.$toast(msg.message, { type: msg.type })\r\n          })\r\n          messages = [];\r\n        }\r\n        /* ------------------------------------------- */\r\n        if (error.request) {\r\n          if (error.request.status === 401) {\r\n            store.dispatch(\"auth/logout\");\r\n          }\r\n        }\r\n        // If error was not 401 just reject as is\r\n        throw error;\r\n      }\r\n    );\r\n    this._requestInterceptor = axios.interceptors.request.use(\r\n      function (config) {\r\n        if (config.withLoader) {\r\n          /* GLOBAL LOADING OVERLAY PART */\r\n          store.commit(\"SET_GLOBAL_LOADING\", true);\r\n          /* INCREMENT REQUEST COUNT */\r\n          requestCount++;\r\n        }\r\n\r\n        return config;\r\n      },\r\n      function (error) {\r\n        if (requestCount > 0)\r\n          /* DECREMENT REQUEST COUNT */\r\n          requestCount--;\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  },\r\n  unmount401Interceptor () {\r\n    // Eject the interceptor\r\n    axios.interceptors.response.eject(this._401interceptor);\r\n    axios.interceptors.request.eject(this._requestInterceptor);\r\n  },\r\n  responseTypeBlob(url, withLoader) {\r\n    return axios.get(url, {\r\n      withLoader: withLoader,\r\n      responseType: 'blob'\r\n    });\r\n  }\r\n};\r\n\r\nexport default ApiService;\r\n"]}]}