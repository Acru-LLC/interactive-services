{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\columns\\components\\addUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\columns\\components\\addUpdate.vue","mtime":1679025601058},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgU2VydmljZSBmcm9tICIuLi8uLi9yZXBvcnRTZXJ2aWNlIjsKaW1wb3J0IGNydWRBbmRMaXN0c1NlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvY3J1ZF9hbmRfbGlzdC5zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICB2YWx1ZUxpc3Q6IFtdLAogICAgICByZWZlcmVuY2VzTGlzdDogW10sCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lTHQ6ICIiLAogICAgICAgIG5hbWVVejogIiIsCiAgICAgICAgbmFtZVJ1OiAiIiwKICAgICAgICB0eXBlSWQ6IG51bGwsCiAgICAgICAgcmVmZXJlbmNlSWQ6IG51bGwsCiAgICAgICAgY29tbWVudDogIiIKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZC5pdGVtc1BlclBhZ2UgPSA1MDA7CiAgICBTZXJ2aWNlLmdldFZhbHVlTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgIGlmIChycy5kYXRhKSB7CiAgICAgICAgX3RoaXMudmFsdWVMaXN0ID0gcnMuZGF0YS5saXN0OwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICAvLyBHRVQgUkVGRVJFTkNFU19MSVNUCiAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLnNlYXJjaExpc3RXaXRoS2V5d29yZCgnZG9jdW1lbnQvZGlyZWN0b3J5LWxpc3QtZm9yLWR5bmFtaWMtcmVwb3J0LWRvYycsIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQsICcnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMucmVmZXJlbmNlc0xpc3QgPSByZXMuZGF0YS5saXN0OwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIF90aGlzLnJlZmVyZW5jZXNMaXN0ID0gW107CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGN1c3RvbUxhYmVsUmVmZXJlbmNlOiBmdW5jdGlvbiBjdXN0b21MYWJlbFJlZmVyZW5jZShvcHQpIHsKICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5yZWZlcmVuY2VzTGlzdC5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuaWQgPT0gb3B0OwogICAgICB9KTsKICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh0aGlzLmdldE5hbWUoewogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwKICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6CiAgICAgICAgfSksICIgKCIpLmNvbmNhdChzZWxlY3RlZC5jb2RlLCAiKSIpOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBjdXN0b21MYWJlbFZhbHVlVHlwZTogZnVuY3Rpb24gY3VzdG9tTGFiZWxWYWx1ZVR5cGUob3B0KSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMudmFsdWVMaXN0LmZpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5pZCA9PSBvcHQ7CiAgICAgIH0pOwogICAgICBpZiAoc2VsZWN0ZWQpIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KHRoaXMuZ2V0TmFtZSh7CiAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLm5hbWVSdSwKICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LAogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXoKICAgICAgICB9KSk7CiAgICAgIH0KICAgICAgcmV0dXJuICIiOwogICAgfSwKICAgIGdldFZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSh2KSB7CiAgICAgIHRoaXMuZm9ybS50eXBlSWQgPSB2OwogICAgfSwKICAgIGNoZWNrVmFsaWRpdHk6IGZ1bmN0aW9uIGNoZWNrVmFsaWRpdHkoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIudmFsaWRhdGUoKS50aGVuKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgIF90aGlzMi4kdG9hc3QoX3RoaXMyLiR0KCdtZXNzYWdlcy5maWxsX3JlcXVpcmVkX2ZpZWxkcycpLCB7CiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdmFsaWQ7CiAgICAgIH0pOwogICAgfSwKICAgIHNldEZvcm1EYXRhOiBmdW5jdGlvbiBzZXRGb3JtRGF0YShpdGVtKSB7CiAgICAgIHRoaXMuZm9ybSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5mb3JtKSwgaXRlbSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNWYWx1ZVR5cGVTZWxlY3Q6IGZ1bmN0aW9uIGlzVmFsdWVUeXBlU2VsZWN0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy52YWx1ZUxpc3QuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmlkID09IF90aGlzMy5mb3JtLnR5cGVJZDsKICAgICAgfSk7CiAgICAgIGlmIChzZWxlY3RlZCAmJiBzZWxlY3RlZC5jb2RlID09PSAnU0VMRUNUJykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBjb21wdXRlZE9ic2VydmVyOiBmdW5jdGlvbiBjb21wdXRlZE9ic2VydmVyKCkgewogICAgICByZXR1cm4gdGhpcy4kcmVmcy5vYnNlcnZlcjsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;AAgFA;AACA;AAEA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IAAA;IACA;IACAC,uBACAC;MACA;QACA;MACA;IACA,GACAC,mBACA;IACA;IACAC;MACA;IACA;MACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;QAAA;MAAA;MACA;QACA;UACAX;UACAF;UACAC;QACA;MACA;MACA;IACA;IACAa;MACA;QAAA;MAAA;MACA;QACA;UACAZ;UACAF;UACAC;QACA;MAEA;MACA;IACA;IACAc;MACA;IACA;IACAC;MAAA;MACA;QACA;UACA;YAAAC;UAAA;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;QAAA;MAAA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["data","submitted","valueList","referencesList","form","nameLt","nameUz","nameRu","typeId","referenceId","comment","created","Service","then","catch","crudAndListsService","console","methods","customLabelReference","customLabelValueType","getValue","checkValidity","type","setFormData","computed","isValueTypeSelect","computedObserver"],"sourceRoot":"src/modules/report/columns/components","sources":["addUpdate.vue"],"sourcesContent":["<template>\r\n  <ValidationObserver\r\n      ref=\"observer\"\r\n      v-slot=\"{}\"\r\n  >\r\n    <BaseTextareaWithValidation\r\n        @input=\"($event) => (form.nameLt = toLatin($event))\"\r\n        rules=\"required\"\r\n        class=\"required\"\r\n        v-model=\"form.nameUz\"\r\n        rows=\"2\"\r\n        :label=\"$t('column.name_uz')\"\r\n        label-on-top\r\n    />\r\n\r\n    <BaseTextareaWithValidation\r\n        @input=\"($event) => (form.nameUz = toCyrill($event))\"\r\n        not-required\r\n        v-model=\"form.nameLt\"\r\n        custom-classes=\"mt-3\"\r\n        rows=\"2\"\r\n        :label=\"$t('column.name_lt')\"\r\n        label-on-top\r\n    />\r\n    <BaseTextareaWithValidation\r\n        not-required\r\n        custom-classes=\"mt-3\"\r\n        v-model=\"form.nameRu\"\r\n        rows=\"2\"\r\n        :label=\"$t('column.name_ru')\"\r\n        label-on-top\r\n    />\r\n\r\n    <div class=\"mt-3\">\r\n\r\n      <BaseMultiselectWithValidation\r\n          rules=\"required\"\r\n          class=\"required\"\r\n          v-model=\"form.typeId\"\r\n          :options=\"valueList.map(e => e.id)\"\r\n          :label=\"$t('column.value_type')\"\r\n          label-on-top\r\n          placeholder=\"\"\r\n          :custom-label=\"customLabelValueType\"\r\n          open-direction=\"bottom\"\r\n          :max-height=\"600\"\r\n          :show-labels=\"false\"\r\n      />\r\n    </div>\r\n    <div\r\n        v-if=\"isValueTypeSelect\"\r\n        class=\"mt-3\"\r\n    >\r\n      <BaseMultiselectWithValidation\r\n          rules=\"required\"\r\n          class=\"required\"\r\n          v-model=\"form.referenceId\"\r\n          :options=\"referencesList.map(e => e.id)\"\r\n          :label=\"$t('submodules.references.title')\"\r\n          label-on-top\r\n          placeholder=\"\"\r\n          :custom-label=\"customLabelReference\"\r\n          open-direction=\"bottom\"\r\n          :max-height=\"600\"\r\n          :show-labels=\"false\"\r\n      />\r\n    </div>\r\n\r\n    <BaseTextareaWithValidation\r\n        not-required\r\n        v-model=\"form.comment\"\r\n        custom-classes=\"mt-3\"\r\n        rows=\"2\"\r\n        :label=\"$t('column.comment')\"\r\n        label-on-top\r\n    />\r\n  </ValidationObserver>\r\n</template>\r\n\r\n<script>\r\nimport Service from \"../../reportService\";\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      submitted: false,\r\n      valueList: [],\r\n      referencesList: [],\r\n      form: {\r\n        nameLt: \"\",\r\n        nameUz: \"\",\r\n        nameRu: \"\",\r\n        typeId: null,\r\n        referenceId: null,\r\n        comment: \"\"\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.var_default_search_payload.itemsPerPage = 500;\r\n    Service.getValueList()\r\n        .then((rs) => {\r\n          if (rs.data) {\r\n            this.valueList = rs.data.list;\r\n          }\r\n        })\r\n        .catch(() => {\r\n        });\r\n    // GET REFERENCES_LIST\r\n    crudAndListsService.searchListWithKeyword('document/directory-list-for-dynamic-report-doc', this.var_default_search_payload, '').then((res) => {\r\n      this.referencesList = res.data.list\r\n    }).catch(e => {\r\n      console.log(e)\r\n      this.referencesList = [];\r\n    })\r\n  },\r\n  methods: {\r\n    customLabelReference(opt) {\r\n      let selected = this.referencesList.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })} (${selected.code})`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelValueType(opt) {\r\n      let selected = this.valueList.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    getValue(v) {\r\n      this.form.typeId = v;\r\n    },\r\n    checkValidity() {\r\n      this.computedObserver.validate().then(valid => {\r\n        if (!valid) {\r\n          this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n        }\r\n        return valid\r\n      })\r\n    },\r\n    setFormData(item) {\r\n      this.form = {...this.form, ...item};\r\n    },\r\n  },\r\n  computed: {\r\n    isValueTypeSelect() {\r\n      let selected = this.valueList.find(e => e.id == this.form.typeId);\r\n      if (selected && selected.code === 'SELECT') {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}