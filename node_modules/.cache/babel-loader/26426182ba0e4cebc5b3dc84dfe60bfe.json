{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\store\\ability.js","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\store\\ability.js","mtime":1674799498160},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1667355397815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IHsgQWJpbGl0eSB9IGZyb20gIkBjYXNsL2FiaWxpdHkiOwpleHBvcnQgdmFyIGFiaWxpdHkgPSBuZXcgQWJpbGl0eSgpOwpleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKHN0b3JlKSB7CiAgYWJpbGl0eS51cGRhdGUoc3RvcmUuc3RhdGUucnVsZXMpOwogIHJldHVybiBzdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKG11dGF0aW9uKSB7CiAgICBzd2l0Y2ggKG11dGF0aW9uLnR5cGUpIHsKICAgICAgY2FzZSAnUk9PVF9MT0dJTl9TVUNDRVNTJzoKICAgICAgICB2YXIgZm9ybWF0dGVkUnVsZXMgPSBbXTsKICAgICAgICBpZiAobXV0YXRpb24ucGF5bG9hZC5wZXJtaXNzaW9ucy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmb3JtYXR0ZWRSdWxlcyA9IG11dGF0aW9uLnBheWxvYWQucGVybWlzc2lvbnMubWFwKGZ1bmN0aW9uIChwZXJtKSB7CiAgICAgICAgICAgIHZhciBmb3JtYXR0ZWRPYmogPSB7fTsKICAgICAgICAgICAgZm9ybWF0dGVkT2JqLmFjdGlvbiA9IHBlcm0uc3Vic3RyKDAsIHBlcm0uaW5kZXhPZignICcpKTsKICAgICAgICAgICAgZm9ybWF0dGVkT2JqLnN1YmplY3QgPSBwZXJtLnN1YnN0cihwZXJtLmluZGV4T2YoJyAnKSArIDEpOwogICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkT2JqOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGFiaWxpdHkudXBkYXRlKGZvcm1hdHRlZFJ1bGVzKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnUk9PVF9MT0dPVVRfU1VDQ0VTUyc6CiAgICAgICAgYWJpbGl0eS51cGRhdGUoW3sKICAgICAgICAgIGFjdGlvbjogJ3JlYWQnLAogICAgICAgICAgc3ViamVjdDogJ2FsbCcKICAgICAgICB9XSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSk7Cn0pOw=="},{"version":3,"names":["Ability","ability","store","update","state","rules","subscribe","mutation","type","formattedRules","payload","permissions","length","map","perm","formattedObj","action","substr","indexOf","subject"],"sources":["C:/ACRU PROJECT/Fair Tech/acru-frontend/src/shared/store/ability.js"],"sourcesContent":["import { Ability } from \"@casl/ability\";\r\nexport const ability = new Ability()\r\n\r\nexport default (store) => {\r\n    ability.update(store.state.rules);\r\n    return store.subscribe((mutation) => {\r\n        switch (mutation.type) {\r\n            case 'ROOT_LOGIN_SUCCESS':\r\n                var formattedRules = [];\r\n                if (mutation.payload.permissions.length > 0) {\r\n                    formattedRules = mutation.payload.permissions.map(perm => {\r\n                        let formattedObj = {};\r\n                        formattedObj.action = perm.substr(0, perm.indexOf(' '));\r\n                        formattedObj.subject = perm.substr(perm.indexOf(' ') + 1);\r\n                        return formattedObj;\r\n                    })\r\n                }\r\n                ability.update(formattedRules);\r\n                break\r\n            case 'ROOT_LOGOUT_SUCCESS':\r\n                ability.update([{action: 'read', subject: 'all'}])\r\n                break\r\n        }\r\n    })\r\n}"],"mappings":";AAAA,SAASA,OAAO,QAAQ,eAAe;AACvC,OAAO,IAAMC,OAAO,GAAG,IAAID,OAAO,EAAE;AAEpC,gBAAe,UAACE,KAAK,EAAK;EACtBD,OAAO,CAACE,MAAM,CAACD,KAAK,CAACE,KAAK,CAACC,KAAK,CAAC;EACjC,OAAOH,KAAK,CAACI,SAAS,CAAC,UAACC,QAAQ,EAAK;IACjC,QAAQA,QAAQ,CAACC,IAAI;MACjB,KAAK,oBAAoB;QACrB,IAAIC,cAAc,GAAG,EAAE;QACvB,IAAIF,QAAQ,CAACG,OAAO,CAACC,WAAW,CAACC,MAAM,GAAG,CAAC,EAAE;UACzCH,cAAc,GAAGF,QAAQ,CAACG,OAAO,CAACC,WAAW,CAACE,GAAG,CAAC,UAAAC,IAAI,EAAI;YACtD,IAAIC,YAAY,GAAG,CAAC,CAAC;YACrBA,YAAY,CAACC,MAAM,GAAGF,IAAI,CAACG,MAAM,CAAC,CAAC,EAAEH,IAAI,CAACI,OAAO,CAAC,GAAG,CAAC,CAAC;YACvDH,YAAY,CAACI,OAAO,GAAGL,IAAI,CAACG,MAAM,CAACH,IAAI,CAACI,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACzD,OAAOH,YAAY;UACvB,CAAC,CAAC;QACN;QACAd,OAAO,CAACE,MAAM,CAACM,cAAc,CAAC;QAC9B;MACJ,KAAK,qBAAqB;QACtBR,OAAO,CAACE,MAAM,CAAC,CAAC;UAACa,MAAM,EAAE,MAAM;UAAEG,OAAO,EAAE;QAAK,CAAC,CAAC,CAAC;QAClD;IAAK;EAEjB,CAAC,CAAC;AACN,CAAC"}]}