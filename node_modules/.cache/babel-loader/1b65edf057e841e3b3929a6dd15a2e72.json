{"remainingRequest":"D:\\ACRU\\interactive-services\\node_modules\\babel-loader\\lib\\index.js!D:\\ACRU\\interactive-services\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\ACRU\\interactive-services\\src\\shared\\services\\api.service.js","dependencies":[{"path":"D:\\ACRU\\interactive-services\\src\\shared\\services\\api.service.js","mtime":1709020148482},{"path":"D:\\ACRU\\interactive-services\\babel.config.js","mtime":1709020148252},{"path":"D:\\ACRU\\interactive-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovQUNSVS9pbnRlcmFjdGl2ZS1zZXJ2aWNlcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0FDUlUvaW50ZXJhY3RpdmUtc2VydmljZXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9BQ1JVL2ludGVyYWN0aXZlLXNlcnZpY2VzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IFRva2VuU2VydmljZSB9IGZyb20gIi4vc3RvcmFnZS5zZXJ2aWNlIjsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RhdGUvc3RvcmUiOwoKLy8gaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gIi4vdXNlci5zZXJ2aWNlIjsKCi8vIEZVTkNUSU9OIEZPUiBDSEVDS0lORyBJRiBTVFJJTkcgSVMgSlNPTiBQQVJTQUJMRQpmdW5jdGlvbiBpc0pzb24oc3RyKSB7CiAgdHJ5IHsKICAgIEpTT04ucGFyc2Uoc3RyKTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiB0cnVlOwp9CnZhciBBcGlTZXJ2aWNlID0gewogIC8vIFN0b3JlcyB0aGUgNDAxIGludGVyY2VwdG9yIHBvc2l0aW9uIHNvIHRoYXQgaXQgY2FuIGJlIGxhdGVyIGVqZWN0ZWQgd2hlbiBuZWVkZWQKICBfNDAxaW50ZXJjZXB0b3I6IG51bGwsCiAgX3JlcXVlc3RJbnRlcmNlcHRvcjogbnVsbCwKICBpbml0OiBmdW5jdGlvbiBpbml0KGJhc2VVUkwpIHsKICAgIGF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSBiYXNlVVJMOwogIH0sCiAgc2V0SGVhZGVyOiBmdW5jdGlvbiBzZXRIZWFkZXIoKSB7CiAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gIkJlYXJlciAiLmNvbmNhdChUb2tlblNlcnZpY2UuZ2V0VG9rZW4oKSk7CiAgfSwKICByZW1vdmVIZWFkZXI6IGZ1bmN0aW9uIHJlbW92ZUhlYWRlcigpIHsKICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uID0ge307CiAgfSwKICBhbGw6IGZ1bmN0aW9uIGFsbChyZXNvdXJjZSwgd2l0aExvYWRlcikgewogICAgcmV0dXJuIGF4aW9zLmFsbChyZXNvdXJjZSwgewogICAgICB3aXRoTG9hZGVyOiB3aXRoTG9hZGVyCiAgICB9KTsKICB9LAogIHNwcmVhZDogZnVuY3Rpb24gc3ByZWFkKCkgewogICAgcmV0dXJuIGF4aW9zLnNwcmVhZC5hcHBseShheGlvcywgYXJndW1lbnRzKTsKICB9LAogIGdldDogZnVuY3Rpb24gZ2V0KHJlc291cmNlLCB3aXRoTG9hZGVyKSB7CiAgICByZXR1cm4gYXhpb3MuZ2V0KHJlc291cmNlLCB7CiAgICAgIHdpdGhMb2FkZXI6IHdpdGhMb2FkZXIKICAgIH0pOwogIH0sCiAgcG9zdDogZnVuY3Rpb24gcG9zdChyZXNvdXJjZSwgZGF0YSkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogICAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307CiAgICByZXR1cm4gYXhpb3MucG9zdChyZXNvdXJjZSwgZGF0YSwgX29iamVjdFNwcmVhZCh7CiAgICAgIHdpdGhMb2FkZXI6IHdpdGhMb2FkZXIKICAgIH0sIGNvbmZpZykpOwogIH0sCiAgcG9zdEZpbGU6IGZ1bmN0aW9uIHBvc3RGaWxlKHJlc291cmNlLCBkYXRhKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgICByZXR1cm4gYXhpb3MucG9zdChyZXNvdXJjZSwgZGF0YSwgewogICAgICByZXNwb25zZVR5cGU6ICJibG9iIiwKICAgICAgd2l0aExvYWRlcjogd2l0aExvYWRlcgogICAgfSk7CiAgfSwKICBwb3N0RmlsZVByb2ZpbGU6IGZ1bmN0aW9uIHBvc3RGaWxlUHJvZmlsZShyZXNvdXJjZSwgZGF0YSkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogICAgcmV0dXJuIGF4aW9zLnB1dChyZXNvdXJjZSwgZGF0YSwgewogICAgICByZXNwb25zZVR5cGU6ICJibG9iIiwKICAgICAgd2l0aExvYWRlcjogd2l0aExvYWRlcgogICAgfSk7CiAgfSwKICBnZXRGaWxlOiBmdW5jdGlvbiBnZXRGaWxlKHJlc291cmNlKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICByZXR1cm4gYXhpb3MuZ2V0KHJlc291cmNlLCB7CiAgICAgIHJlc3BvbnNlVHlwZTogImJsb2IiLAogICAgICB3aXRoTG9hZGVyOiB3aXRoTG9hZGVyCiAgICB9KTsKICB9LAogIGZvcm1EYXRhRmlsZTogZnVuY3Rpb24gZm9ybURhdGFGaWxlKHJlc291cmNlLCBkYXRhKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgICByZXR1cm4gYXhpb3MucG9zdChyZXNvdXJjZSwgZGF0YSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICB9LAogICAgICB3aXRoTG9hZGVyOiB3aXRoTG9hZGVyCiAgICB9KTsKICB9LAogIGZvcm1EYXRhUHV0OiBmdW5jdGlvbiBmb3JtRGF0YVB1dChyZXNvdXJjZSwgZGF0YSkgewogICAgcmV0dXJuIGF4aW9zLnB1dChyZXNvdXJjZSwgZGF0YSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICB9CiAgICB9KTsKICB9LAogIHB1dDogZnVuY3Rpb24gcHV0KHJlc291cmNlLCBkYXRhKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgICByZXR1cm4gYXhpb3MucHV0KHJlc291cmNlLCBkYXRhLCB7CiAgICAgIHdpdGhMb2FkZXI6IHdpdGhMb2FkZXIKICAgIH0pOwogIH0sCiAgZGVsZXRlOiBmdW5jdGlvbiBfZGVsZXRlKHJlc291cmNlKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICByZXR1cm4gYXhpb3MuZGVsZXRlKHJlc291cmNlLCB7CiAgICAgIHdpdGhMb2FkZXI6IHdpdGhMb2FkZXIKICAgIH0pOwogIH0sCiAgLyoqDQogICAqIFBlcmZvcm0gYSBjdXN0b20gYXhpb3MgcmVxdWVzdC4NCiAgICoNCiAgICogZGF0YSBpcyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6DQogICAqICAtIG1ldGhvZA0KICAgKiAgLSB1cmwNCiAgICogIC0gZGF0YSAuLi4gcmVxdWVzdCBwYXlsb2FkDQogICAqICAtIGF1dGggKG9wdGlvbmFsKQ0KICAgKiAgICAtIHVzZXJuYW1lDQogICAqICAgIC0gcGFzc3dvcmQNCiAgICoqLwogIGN1c3RvbVJlcXVlc3Q6IGZ1bmN0aW9uIGN1c3RvbVJlcXVlc3QoZGF0YSkgewogICAgcmV0dXJuIGF4aW9zKGRhdGEpOwogIH0sCiAgbW91bnQ0MDFJbnRlcmNlcHRvcjogZnVuY3Rpb24gbW91bnQ0MDFJbnRlcmNlcHRvcigpIHsKICAgIHZhciByZXF1ZXN0Q291bnQgPSAwOwogICAgdmFyIG1lc3NhZ2VzID0gW107CiAgICB0aGlzLl80MDFpbnRlcmNlcHRvciA9IGF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXF1ZXN0Q291bnQgPiAwKSAvKiBERUNSRU1FTlQgUkVRVUVTVCBDT1VOVCAqLwogICAgICAgIHJlcXVlc3RDb3VudC0tOwogICAgICAvKiBHTE9CQUwgTE9BRElORyBPVkVSTEFZIFBBUlQgKi8KICAgICAgaWYgKHJlcXVlc3RDb3VudCA9PT0gMCkgewogICAgICAgIC8vIENIRUNLIElGIFRIRVJFIFdFUkUgQU5ZIEVSUk9SUwogICAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9HTE9CQUxfU05BQ0tCQVIiLCBtZXNzYWdlcyk7CiAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgVnVlLiR0b2FzdChtc2cubWVzc2FnZSwgewogICAgICAgICAgICAgIHR5cGU6IG1zZy50eXBlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBtZXNzYWdlcyA9IFtdOwogICAgICAgIH0KICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9HTE9CQUxfTE9BRElORyIsIGZhbHNlKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICB9LCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlcnJvcikgewogICAgICAgIHZhciBhbGVydFBheWxvYWQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgLyogREVDUkVNRU5UIFJFUVVFU1QgQ09VTlQgKi8KICAgICAgICAgICAgICBpZiAocmVxdWVzdENvdW50ID4gMCkgcmVxdWVzdENvdW50LS07CiAgICAgICAgICAgICAgLyogR0xPQkFMIExPQURJTkcgT1ZFUkxBWSBBTkQgU0hPV0lORyBFUlJPUiBNRVNTQUdFUyBQQVJUICovCiAgICAgICAgICAgICAgYWxlcnRQYXlsb2FkID0gewogICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLnJlcXVlc3QucmVzcG9uc2UgPyBpc0pzb24oZXJyb3IucmVxdWVzdC5yZXNwb25zZSkgPyBKU09OLnBhcnNlKGVycm9yLnJlcXVlc3QucmVzcG9uc2UpLm1lc3NhZ2Uuc3Vic3RyaW5nKDAsIDEyMCkgOiBlcnJvci5yZXF1ZXN0LnJlc3BvbnNlIDogIigiLmNvbmNhdChlcnJvci5yZXF1ZXN0LnN0YXR1cywgIikgLSBTb21ldGhpbmcgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4iKSwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5yZXF1ZXN0LnJlc3BvbnNlID8gaXNKc29uKGVycm9yLnJlcXVlc3QucmVzcG9uc2UpID8gSlNPTi5wYXJzZShlcnJvci5yZXF1ZXN0LnJlc3BvbnNlKS5kZXRhaWxzIDogZXJyb3IucmVxdWVzdC5yZXNwb25zZSA6IFtdLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgLyogQUREIEVSUk9SIE1FU1NBR0UgVE8gR0xPQkFMIE1FU1NBR0VTIFNUQVRFICovCiAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChhbGVydFBheWxvYWQpOwogICAgICAgICAgICAgIGlmIChyZXF1ZXN0Q291bnQgPT09IDApIHsKICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiU0VUX0dMT0JBTF9MT0FESU5HIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfR0xPQkFMX1NOQUNLQkFSIiwgbWVzc2FnZXMpOwogICAgICAgICAgICAgICAgbWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXF1ZXN0LnN0YXR1cyA9PT0gNDE3KSB7CiAgICAgICAgICAgICAgICAgICAgVnVlLiR0b2FzdCgnVXNoYnUgaGFyYWthdG5pIGFtYWxnYSBvc2hpcmlzaCB1Y2h1biBzaXpkYSBydXhzYXQgeW9cJ3EnLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBtc2cudHlwZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIFZ1ZS4kdG9hc3QobXNnLm1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG1zZy50eXBlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWVzc2FnZXMgPSBbXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwogICAgICAgICAgICAgIGlmIChlcnJvci5yZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVxdWVzdC5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgiYXV0aC9sb2dvdXQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gSWYgZXJyb3Igd2FzIG5vdCA0MDEganVzdCByZWplY3QgYXMgaXMKICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwogICAgdGhpcy5fcmVxdWVzdEludGVyY2VwdG9yID0gYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgaWYgKGNvbmZpZy53aXRoTG9hZGVyKSB7CiAgICAgICAgLyogR0xPQkFMIExPQURJTkcgT1ZFUkxBWSBQQVJUICovCiAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfR0xPQkFMX0xPQURJTkciLCB0cnVlKTsKICAgICAgICAvKiBJTkNSRU1FTlQgUkVRVUVTVCBDT1VOVCAqLwogICAgICAgIHJlcXVlc3RDb3VudCsrOwogICAgICB9CiAgICAgIHJldHVybiBjb25maWc7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgaWYgKHJlcXVlc3RDb3VudCA+IDApIC8qIERFQ1JFTUVOVCBSRVFVRVNUIENPVU5UICovCiAgICAgICAgcmVxdWVzdENvdW50LS07CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICB9KTsKICB9LAogIHVubW91bnQ0MDFJbnRlcmNlcHRvcjogZnVuY3Rpb24gdW5tb3VudDQwMUludGVyY2VwdG9yKCkgewogICAgLy8gRWplY3QgdGhlIGludGVyY2VwdG9yCiAgICBheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZWplY3QodGhpcy5fNDAxaW50ZXJjZXB0b3IpOwogICAgYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZWplY3QodGhpcy5fcmVxdWVzdEludGVyY2VwdG9yKTsKICB9LAogIHJlc3BvbnNlVHlwZUJsb2I6IGZ1bmN0aW9uIHJlc3BvbnNlVHlwZUJsb2IodXJsLCB3aXRoTG9hZGVyKSB7CiAgICByZXR1cm4gYXhpb3MuZ2V0KHVybCwgewogICAgICB3aXRoTG9hZGVyOiB3aXRoTG9hZGVyLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBBcGlTZXJ2aWNlOw=="},{"version":3,"names":["Vue","axios","TokenService","store","isJson","str","JSON","parse","e","ApiService","_401interceptor","_requestInterceptor","init","baseURL","defaults","setHeader","headers","common","concat","getToken","removeHeader","all","resource","withLoader","spread","apply","arguments","get","post","data","length","undefined","config","_objectSpread","postFile","responseType","postFileProfile","put","getFile","formDataFile","formDataPut","delete","_delete","customRequest","mount401Interceptor","requestCount","messages","interceptors","response","use","commit","forEach","msg","$toast","message","type","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","error","alertPayload","wrap","_callee$","_context","prev","next","show","request","substring","status","description","details","push","dispatch","stop","_x","Promise","reject","unmount401Interceptor","eject","responseTypeBlob","url"],"sources":["D:/ACRU/interactive-services/src/shared/services/api.service.js"],"sourcesContent":["import Vue from 'vue'\r\nimport axios from \"axios\";\r\nimport { TokenService } from \"./storage.service\";\r\nimport store from \"@/state/store\";\r\n\r\n// import UserService from \"./user.service\";\r\n\r\n// FUNCTION FOR CHECKING IF STRING IS JSON PARSABLE\r\nfunction isJson (str) {\r\n  try {\r\n    JSON.parse(str);\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nconst ApiService = {\r\n  // Stores the 401 interceptor position so that it can be later ejected when needed\r\n  _401interceptor: null,\r\n  _requestInterceptor: null,\r\n\r\n  init (baseURL) {\r\n    axios.defaults.baseURL = baseURL;\r\n  },\r\n\r\n  setHeader () {\r\n    axios.defaults.headers.common[\r\n      \"Authorization\"\r\n    ] = `Bearer ${TokenService.getToken()}`;\r\n  },\r\n\r\n  removeHeader () {\r\n    axios.defaults.headers.common = {};\r\n  },\r\n\r\n  all (resource, withLoader) {\r\n    return axios.all(resource, { withLoader: withLoader });\r\n  },\r\n\r\n  spread (...args) {\r\n    return axios.spread(...args);\r\n  },\r\n\r\n  get (resource, withLoader) {\r\n    return axios.get(resource, { withLoader: withLoader });\r\n  },\r\n\r\n  post (resource, data, withLoader = false, config = {}) {\r\n    return axios.post(resource, data, { withLoader: withLoader, ...config });\r\n  },\r\n  postFile (resource, data, withLoader = false) {\r\n    return axios.post(resource, data, {\r\n      responseType: \"blob\",\r\n      withLoader: withLoader\r\n    });\r\n  },\r\n  postFileProfile (resource, data, withLoader = false) {\r\n    return axios.put(resource, data, {\r\n      responseType: \"blob\",\r\n      withLoader: withLoader\r\n    });\r\n  },\r\n  getFile (resource, withLoader = false) {\r\n    return axios.get(resource, {\r\n      responseType: \"blob\",\r\n      withLoader: withLoader\r\n    });\r\n  },\r\n  formDataFile (resource, data, withLoader = false) {\r\n    return axios.post(resource, data, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\"\r\n      },\r\n      withLoader: withLoader\r\n    });\r\n  },\r\n  formDataPut (resource, data) {\r\n    return axios.put(resource, data,\r\n      {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        },\r\n      })\r\n  },\r\n  put (resource, data, withLoader = false) {\r\n    return axios.put(resource, data, { withLoader: withLoader });\r\n  },\r\n\r\n  delete (resource, withLoader = false) {\r\n    return axios.delete(resource, { withLoader: withLoader });\r\n  },\r\n\r\n  /**\r\n   * Perform a custom axios request.\r\n   *\r\n   * data is an object containing the following properties:\r\n   *  - method\r\n   *  - url\r\n   *  - data ... request payload\r\n   *  - auth (optional)\r\n   *    - username\r\n   *    - password\r\n   **/\r\n  customRequest (data) {\r\n    return axios(data);\r\n  },\r\n\r\n  mount401Interceptor () {\r\n    let requestCount = 0;\r\n    let messages = [];\r\n    this._401interceptor = axios.interceptors.response.use(\r\n      response => {\r\n        if (requestCount > 0)\r\n          /* DECREMENT REQUEST COUNT */\r\n          requestCount--;\r\n        /* GLOBAL LOADING OVERLAY PART */\r\n        if (requestCount === 0) {\r\n          // CHECK IF THERE WERE ANY ERRORS\r\n          if (messages.length > 0) {\r\n            store.commit(\"SET_GLOBAL_SNACKBAR\", messages);\r\n            messages.forEach(msg => {\r\n              Vue.$toast(msg.message, { type: msg.type })\r\n            })\r\n            messages = [];\r\n          }\r\n\r\n          store.commit(\"SET_GLOBAL_LOADING\", false);\r\n        }\r\n        return response;\r\n      },\r\n      async error => {\r\n        /* DECREMENT REQUEST COUNT */\r\n        if (requestCount > 0)\r\n          requestCount--;\r\n        /* GLOBAL LOADING OVERLAY AND SHOWING ERROR MESSAGES PART */\r\n        let alertPayload = {\r\n          show: true,\r\n          message: error.request.response\r\n            ? (isJson(error.request.response)\r\n              ? JSON.parse(error.request.response).message.substring(0, 120)\r\n              : error.request.response)\r\n            : `(${error.request.status}) - Something wrong, please try again`,\r\n          description: error.request.response\r\n            ? isJson(error.request.response)\r\n              ? JSON.parse(error.request.response).details\r\n              : error.request.response\r\n            : [],\r\n          type: \"error\"\r\n        };\r\n        /* ADD ERROR MESSAGE TO GLOBAL MESSAGES STATE */\r\n        messages.push(alertPayload);\r\n        if (requestCount === 0) {\r\n          store.commit(\"SET_GLOBAL_LOADING\", false);\r\n          store.commit(\"SET_GLOBAL_SNACKBAR\", messages);\r\n          messages.forEach(msg => {\r\n            if (error.request.status === 417) {\r\n              Vue.$toast('Ushbu harakatni amalga oshirish uchun sizda ruxsat yo\\'q', { type: msg.type });\r\n            } else {\r\n              Vue.$toast(msg.message, { type: msg.type })\r\n            }\r\n          })\r\n          messages = [];\r\n        }\r\n        /* ------------------------------------------- */\r\n        if (error.request) {\r\n          if (error.request.status === 401) {\r\n            store.dispatch(\"auth/logout\");\r\n          }\r\n        }\r\n        // If error was not 401 just reject as is\r\n        throw error;\r\n      }\r\n    );\r\n    this._requestInterceptor = axios.interceptors.request.use(\r\n      function (config) {\r\n        if (config.withLoader) {\r\n          /* GLOBAL LOADING OVERLAY PART */\r\n          store.commit(\"SET_GLOBAL_LOADING\", true);\r\n          /* INCREMENT REQUEST COUNT */\r\n          requestCount++;\r\n        }\r\n\r\n        return config;\r\n      },\r\n      function (error) {\r\n        if (requestCount > 0)\r\n          /* DECREMENT REQUEST COUNT */\r\n          requestCount--;\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  },\r\n  unmount401Interceptor () {\r\n    // Eject the interceptor\r\n    axios.interceptors.response.eject(this._401interceptor);\r\n    axios.interceptors.request.eject(this._requestInterceptor);\r\n  },\r\n  responseTypeBlob(url, withLoader) {\r\n    return axios.get(url, {\r\n      withLoader: withLoader,\r\n      responseType: 'blob'\r\n    });\r\n  }\r\n};\r\n\r\nexport default ApiService;\r\n"],"mappings":"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"}]}