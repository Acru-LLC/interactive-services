{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\price-stock\\Upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\price-stock\\Upload.vue","mtime":1675054786265},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBwcmljZVN0b2NrU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9pbnRlZ3JhdGlvbi9wcmljZVN0b2NrLnNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbGU6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29tcHV0ZWRPYnNlcnZlcjogZnVuY3Rpb24gY29tcHV0ZWRPYnNlcnZlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJlZnMub2JzZXJ2ZXI7CiAgICB9LAogICAgaXNSZWFsaXphdGlvbjogZnVuY3Rpb24gaXNSZWFsaXphdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLm5hbWUgPT09ICdJbnRlZ3JhdGlvblByaWNlU3RvY2tSZWFsaXphdGlvblVwbG9hZCc7CiAgICB9LAogICAgZ2V0VGVtcGxhdGVVcmw6IGZ1bmN0aW9uIGdldFRlbXBsYXRlVXJsKCkgewogICAgICBpZiAodGhpcy5pc1JlYWxpemF0aW9uKSB7CiAgICAgICAgcmV0dXJuICcvdGVtcGxhdGUvaW50ZWdyYXRpb24vYmlyamEtcmVhbGl6YXRzaXlhLXNoYWJsb24ueGxzeCc7CiAgICAgIH0KCiAgICAgIHJldHVybiAnL3RlbXBsYXRlL2ludGVncmF0aW9uL2JpcmphLXZzdGF2bGVuaWUtcy1yZWFsaXphdHNpZWktc2hhYmxvbi54bHN4JzsKICAgIH0KICB9LAogIHdhdGNoOiB7fSwKICBtZXRob2RzOiB7CiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnZhbGlkYXRlKCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh2YWxpZCkgewogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzUmVhbGl6YXRpb24pIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBwcmljZVN0b2NrU2VydmljZS51cGxvYWRCeUV4Y2VsUmVhbGl6YXRpb24oX3RoaXMuZmlsZVswXSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlsZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIHJldHVybiBwcmljZVN0b2NrU2VydmljZS51cGxvYWRCeUV4Y2VsRW1iZWRkaW5nUmVhbGl6YXRpb24oX3RoaXMuZmlsZVswXSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlsZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgX3RoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5nbygtMSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy4kdG9hc3QoX3RoaXMuJHQoIm1lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseSIpLCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICBfdGhpcy4kdG9hc3QoX3RoaXMuJHQoIm1lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzIiksIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAA,iBAAA,MAAA,kDAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,QAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,aAAA,KAAA,KAAA,CAAA,QAAA;AACA,KAHA;AAIA,IAAA,aAJA,2BAIA;AACA,aAAA,KAAA,MAAA,CAAA,IAAA,KAAA,wCAAA;AACA,KANA;AAOA,IAAA,cAPA,4BAOA;AACA,UAAA,KAAA,aAAA,EAAA;AACA,eAAA,uDAAA;AACA;;AACA,aAAA,oEAAA;AACA;AAZA,GANA;AAoBA,EAAA,KAAA,EAAA,EApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AAAA;;AACA,WAAA,gBAAA,CAAA,QAAA,GAAA,IAAA;AAAA,2EAAA,iBAAA,KAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KADA;AAAA;AAAA;AAAA;;AAAA,uBAEA,KAAA,CAAA,aAFA;AAAA;AAAA;AAAA;;AAAA;AAAA,yBAGA,iBAAA,CAAA,wBAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA,CAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,oBAAA,KAAA,CAAA,IAAA,GAAA,IAAA;AACA,mBAFA,CAHA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,yBAOA,iBAAA,CAAA,iCAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA,CAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,oBAAA,KAAA,CAAA,IAAA,GAAA,IAAA;AACA,mBAFA,CAPA;;AAAA;AAWA,kBAAA,KAAA,CAAA,gBAAA,CAAA,KAAA;;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;;AACA,kBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,EAAA,CAAA,6BAAA,CAAA,EAAA;AAAA,oBAAA,IAAA,EAAA;AAAA,mBAAA;;AAbA;AAAA;;AAAA;AAeA,kBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,EAAA,CAAA,+BAAA,CAAA,EAAA;AAAA,oBAAA,IAAA,EAAA;AAAA,mBAAA;;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA;;AAAA;AAAA;AAAA;AAAA;AAkBA;AApBA;AArBA,CAAA","sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      :custom-title=\"$t('actions.upload')\"\r\n      has-save-suspend\r\n      @save=\"save\"\r\n  >\r\n    <ValidationObserver ref=\"observer\" v-slot=\"{}\">\r\n      <b-row class=\"mb-3\">\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseFileUploaderWithValidation\r\n              v-model=\"file\"\r\n              data-vv-name=\"file\"\r\n              data-vv-as=\"file\"\r\n              :multiple=\"false\"\r\n              :max-files=\"1\"\r\n              :label=\"$t('actions.excel_file_upload')\"\r\n          ></BaseFileUploaderWithValidation>\r\n        </b-col>\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <p>\r\n            {{ $t('actions.download_template') }}\r\n          </p>\r\n          <a class=\"btn btn-info\" target=\"_blank\" :href=\"getTemplateUrl\" download>\r\n            {{ $t('actions.download_template') }}\r\n          </a>\r\n        </b-col>\r\n      </b-row>\r\n    </ValidationObserver>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nimport priceStockService from \"@/shared/services/integration/priceStock.service\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      file: null,\r\n    };\r\n  },\r\n  computed: {\r\n    computedObserver() {\r\n      return this.$refs.observer;\r\n    },\r\n    isRealization() {\r\n      return this.$route.name === 'IntegrationPriceStockRealizationUpload';\r\n    },\r\n    getTemplateUrl(){\r\n      if (this.isRealization) {\r\n        return '/template/integration/birja-realizatsiya-shablon.xlsx';\r\n      }\r\n      return '/template/integration/birja-vstavlenie-s-realizatsiei-shablon.xlsx';\r\n    },\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    save() {\r\n      this.computedObserver.validate().then(async valid => {\r\n        if (valid) {\r\n          if (this.isRealization) {\r\n            await priceStockService.uploadByExcelRealization(this.file[0]).then(res => {\r\n              this.file = null\r\n            })\r\n          } else {\r\n            await priceStockService.uploadByExcelEmbeddingRealization(this.file[0]).then(res => {\r\n              this.file = null\r\n            })\r\n          }\r\n          this.computedObserver.reset()\r\n          this.$router.go(-1)\r\n          this.$toast(this.$t(\"messages.saved_successfully\"), { type: \"success\" })\r\n        } else {\r\n          this.$toast(this.$t(\"messages.fill_required_fields\"), { type: \"error\" })\r\n        }\r\n      });\r\n    },\r\n  },\r\n}\r\n</script>"],"sourceRoot":"src/modules/integration/modules/price-stock"}]}