{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\auth\\components\\ESigns.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\auth\\components\\ESigns.vue","mtime":1675054786293},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgSGVscGVyU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9hdXRoLnNlcnZpY2UiOwppbXBvcnQgQXV0aFNlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvYXV0aC5zZXJ2aWNlIjsKaW1wb3J0IEFwcFNldHRpbmdzIGZyb20gIkAvc2V0dGluZ3MiOwp2YXIgRUlNWk9fTUFKT1IgPSAzOwp2YXIgRUlNWk9fTUlOT1IgPSAzNzsKdmFyIGVycm9yQ0FQSVdTID0gJ9Ce0YjQuNCx0LrQsCDRgdC+0LXQtNC40L3QtdC90LjRjyDRgSBFLUlNWk8uINCS0L7Qt9C80L7QttC90L4g0YMg0LLQsNGBINC90LUg0YPRgdGC0LDQvdC+0LLQu9C10L0g0LzQvtC00YPQu9GMIEUtSU1aTyDQuNC70Lgg0JHRgNCw0YPQt9C10YAgRS1JTVpPLic7CnZhciBlcnJvckJyb3dzZXJXUyA9ICfQkdGA0LDRg9C30LXRgCDQvdC1INC/0L7QtNC00LXRgNC20LjQstCw0LXRgiDRgtC10YXQvdC+0LvQvtCz0LjRjiBXZWJTb2NrZXQuINCj0YHRgtCw0L3QvtCy0LjRgtC1INC/0L7RgdC70LXQtNC90Y7RjiDQstC10YDRgdC40Y4g0LHRgNCw0YPQt9C10YDQsC4nOwp2YXIgZXJyb3JVcGRhdGVBcHAgPSAn0JLQndCY0JzQkNCd0JjQlSAhISEg0KPRgdGC0LDQvdC+0LLQuNGC0LUg0L3QvtCy0YPRjiDQstC10YDRgdC40Y4g0L/RgNC40LvQvtC20LXQvdC40Y8gRS1JTVpPINC40LvQuCDQkdGA0LDRg9C30LXRgNCwIEUtSU1aTy48YnIgLz48YSBocmVmPSJodHRwczovL2UtaW16by51ei9tYWluL2Rvd25sb2Fkcy8iIHJvbGU9ImJ1dHRvbiI+0KHQutCw0YfQsNGC0Ywg0J/QniBFLUlNWk88L2E+JzsKdmFyIGVycm9yV3JvbmdQYXNzd29yZCA9ICfQn9Cw0YDQvtC70Ywg0L3QtdCy0LXRgNC90YvQuS4nOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGZvckxvZ2luOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgZGF0YVRvU2lnbjogewogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9CiAgfSwKICBuYW1lOiAiRVNpZ25zIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2lnblNlbGVjdEJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAgb3BlbkNvbmZpcm1Nb2RhbDogZmFsc2UsCiAgICAgIHNpZ25Nb2RhbDogZmFsc2UsCiAgICAgIFNlYXJjaFRleHQ6ICcnLAogICAgICBhbGVydFNob3c6IGZhbHNlLAogICAgICBhbGVydE1zZzogJycsCiAgICAgIGFsZXJ0VHlwZTogJycsCiAgICAgIGRhdGFUb1NpZ25JZk5vdDoge30sCiAgICAgIHB1YmxpY1BhdGg6IHByb2Nlc3MuZW52LkJBU0VfVVJMLAogICAgICBJbnZvaWNlOiB7fSwKICAgICAgcGtjczc6IG51bGwsCiAgICAgIHNpZ25CeUltem9UZXh0OiBudWxsLAogICAgICB2bzogbnVsbCwKICAgICAga2V5c0xpc3Q6IFtdLAogICAgICBmdWxsS2V5TGlzdDogW10sCiAgICAgIGFsZXJ0TWVzc2FnZTogbnVsbCwKICAgICAgc2hvd01lc3NhZ2U6IGZhbHNlLAogICAgICBjdXJyZW50QWxlcnRDb3VudGVyOiA1LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgY29uZmlybURpYWxvZzogZmFsc2UsCiAgICAgIGlzWXVyOiBudWxsLAogICAgICBjdXJyZW50SXRlbTogbnVsbCwKICAgICAgbW9kYWxUaXRsZTogbnVsbCwKICAgICAgbG9hZGluZ0J1dHRvbjogZmFsc2UsCiAgICAgIEFwcFNldHRpbmdzOiBBcHBTZXR0aW5ncwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRlYm91bmNlU2VhcmNoOiBmdW5jdGlvbiBkZWJvdW5jZVNlYXJjaChldmVudCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICBjbGVhclRpbWVvdXQodm0uZGVib3VuY2UpOwogICAgICB2bS5kZWJvdW5jZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHZtLmtleUZpbHRlcihldmVudCk7CiAgICAgIH0sIDUwMCk7CiAgICB9LAogICAga2V5RmlsdGVyOiBmdW5jdGlvbiBrZXlGaWx0ZXIodGV4dCkgewogICAgICB2YXIgdmFsdWUgPSB0ZXh0LnRvVXBwZXJDYXNlKCk7CiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIHRoaXMua2V5c0xpc3QgPSB0aGlzLmZ1bGxLZXlMaXN0LmZpbHRlcihmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIGlmIChlbC5DTi5pbmNsdWRlcyh2YWx1ZSkgfHwgZWwuTy5pbmNsdWRlcyh2YWx1ZSkgfHwgZWwuVC5pbmNsdWRlcyh2YWx1ZSkgfHwgZWwuVElOLmluY2x1ZGVzKHZhbHVlKSB8fCBlbC5VSUQuaW5jbHVkZXModmFsdWUpIHx8IGVsLm5hbWUuaW5jbHVkZXModmFsdWUpIHx8IGVsLnNlcmlhbE51bWJlci5pbmNsdWRlcyh2YWx1ZSkpIHsKICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMua2V5c0xpc3QgPSB0aGlzLmZ1bGxLZXlMaXN0OwogICAgICB9CiAgICB9LAogICAgc2lnbkJ5RWltem86IGZ1bmN0aW9uIHNpZ25CeUVpbXpvKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB2bSwgZGF0YSwgcHJvbWlzZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nQnV0dG9uID0gdHJ1ZTsKICAgICAgICAgICAgICB2bSA9IF90aGlzOwogICAgICAgICAgICAgIGRhdGEgPSBudWxsOwogICAgICAgICAgICAgIGlmIChfdGhpcy5kYXRhVG9TaWduICYmIF90aGlzLmRhdGFUb1NpZ24ua2V5KSB7CiAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICBrZXk6IF90aGlzLmRhdGFUb1NpZ24ua2V5LAogICAgICAgICAgICAgICAgICBpbm46IF90aGlzLmRhdGFUb1NpZ24uaW5uCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIGRhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGFUb1NpZ24pCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5kYXRhVG9TaWduSWZOb3QgJiYgX3RoaXMuZGF0YVRvU2lnbklmTm90LmtleSkgewogICAgICAgICAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAga2V5OiBfdGhpcy5kYXRhVG9TaWduSWZOb3Qua2V5LAogICAgICAgICAgICAgICAgICBQTkZMOiBfdGhpcy5kYXRhVG9TaWduSWZOb3QuUE5GTCwKICAgICAgICAgICAgICAgICAgVElOOiBfdGhpcy5kYXRhVG9TaWduSWZOb3QuVElOLAogICAgICAgICAgICAgICAgICBJTk46IF90aGlzLmRhdGFUb1NpZ25JZk5vdC5JTk4KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8gZGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YVRvU2lnbklmTm90KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KCh0aGlzLmRhdGFUb1NpZ24gJiYgdGhpcy5kYXRhVG9TaWduLmtleSkgPyB7IGtleTogdGhpcy5kYXRhVG9TaWduLmtleSwgaW5uOiB0aGlzLmRhdGFUb1NpZ24uaW5uIH0gOiAodGhpcy5kYXRhVG9TaWduSWZOb3QgJiYgdGhpcy5kYXRhVG9TaWduSWZOb3Qua2V5KSA/IHsga2V5OiB0aGlzLmRhdGFUb1NpZ25JZk5vdC5rZXksIGlubjogdGhpcy5kYXRhVG9TaWduSWZOb3QuaW5uIH0gOiB7IGtleTogbnVsbCwgaW5uOiBudWxsIH0pOwogICAgICAgICAgICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICBFSU1aT0NsaWVudC5sb2FkS2V5KHZtLmN1cnJlbnRJdGVtLCBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICAgICAgRUlNWk9DbGllbnQuY3JlYXRlUGtjczcoaWQsIGRhdGEsIG51bGwsIGZ1bmN0aW9uIChwa2NzNykgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocGtjczcpOwogICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgICAgIHJlamVjdCgnZXJyb3InKTsKICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nQnV0dG9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmluZGV4T2YoIkJhZFBhZGRpbmdFeGNlcHRpb24iKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdm0uJHRvYXN0KGVycm9yV3JvbmdQYXNzd29yZCwgewogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrZXlJZCcpLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgdm0uJHRvYXN0KGVycm9yQnJvd3NlcldTLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoZSkgdm0ud3NFcnJvcihlKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgICByZWplY3QoJ2Vycm9yJyk7CiAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmdCdXR0b24gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoci5pbmRleE9mKCJCYWRQYWRkaW5nRXhjZXB0aW9uIikgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICB2bS4kdG9hc3QoZXJyb3JXcm9uZ1Bhc3N3b3JkLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICB2bS4kdG9hc3QociwgewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdm0uJHRvYXN0KGVycm9yQnJvd3NlcldTLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKGUpIHZtLndzRXJyb3IoZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHZtLiRlbWl0KCdzaWduJywgc3VjY2Vzcywgdm0uZGF0YVRvU2lnbklmTm90LlRJTiwgdm0uZGF0YVRvU2lnbklmTm90LlBORkwsIHZtLmRhdGFUb1NpZ25JZk5vdC5JTk4pOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdm0uY29uZmlybURpYWxvZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdm0ubG9hZGluZ0J1dHRvbiA9IGZhbHNlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY29udGludWVSZWdpc3RyYXRpb246IGZ1bmN0aW9uIGNvbnRpbnVlUmVnaXN0cmF0aW9uKGlzQ29uZmlybWVkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgaXNZdXI7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghaXNDb25maXJtZWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIV90aGlzMi5mb3JMb2dpbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnNpZ25CeUVpbXpvKCk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfdGhpczIuc2lnblNlbGVjdEJ0bkRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICBpc1l1ciA9ICEhX3RoaXMyLmN1cnJlbnRJdGVtLlQgJiYgX3RoaXMyLmN1cnJlbnRJdGVtLlRJTiAhPT0gX3RoaXMyLmN1cnJlbnRJdGVtLlVJRDsKICAgICAgICAgICAgICBBdXRoU2VydmljZS5pc09yZ1JlZ2lzdGVyZWQoX3RoaXMyLmN1cnJlbnRJdGVtLlRJTiwgX3RoaXMyLmN1cnJlbnRJdGVtLlBJTkZMLCBfdGhpczIuY3VycmVudEl0ZW0uVUlELCBpc1l1ciwgX3RoaXMyLmN1cnJlbnRJdGVtLlQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhOiByZXNwb25zZS5kYXRhLAogICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbTogX3RoaXMyLmN1cnJlbnRJdGVtCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX3RoaXMyLiRlbWl0KCJrZXlTZWxlY3RlZCIsIHBheWxvYWQpOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuc2lnblNlbGVjdEJ0bkRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAvLyB0aGlzLmhpZGVNb2RhbCgib3BlbkNvbmZpcm1Nb2RhbCIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhcHBMb2FkOiBmdW5jdGlvbiBhcHBMb2FkKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHZtOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB2bSA9IF90aGlzMzsKICAgICAgICAgICAgICBFSU1aT0NsaWVudC5BUElfS0VZUyA9IEFwcFNldHRpbmdzLmFwaV9rZXlzOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gRUlNWk9DbGllbnQuY2hlY2tWZXJzaW9uKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KG1ham9yLCBtaW5vcikgewogICAgICAgICAgICAgICAgICB2YXIgbmV3VmVyc2lvbiwgaW5zdGFsbGVkVmVyc2lvbjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZlcnNpb24gPSBFSU1aT19NQUpPUiAqIDEwMCArIEVJTVpPX01JTk9SOwogICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsZWRWZXJzaW9uID0gcGFyc2VJbnQobWFqb3IpICogMTAwICsgcGFyc2VJbnQobWlub3IpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpbnN0YWxsZWRWZXJzaW9uIDwgbmV3VmVyc2lvbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gdm0ubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB2bS4kdG9hc3QoZXJyb3JVcGRhdGVBcHAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFSU1aT0NsaWVudC5pbnN0YWxsQXBpS2V5cyggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm0udWlMb2FkS2V5cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSksIGZ1bmN0aW9uIChlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS4kdG9hc3QociwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ud3NFcnJvcihlLCB2bS4kdCgnYWN0aW9ucy5lcnJvcicpLCAnZXJyb3InKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpLCBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgdm0uJHRvYXN0KHIsIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdm0uJHRvYXN0KHZtLiR0KCdhdXRoLmlzX2Vfc2lnbmF0dXJlX2luc3RhbGxlZCcpLCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCAxKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb3BlblNpZ25Nb2RhbDogZnVuY3Rpb24gb3BlblNpZ25Nb2RhbChpdGVtLCBpc1l1cikgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIGg7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGggPSBfdGhpczQuJGNyZWF0ZUVsZW1lbnQ7CiAgICAgICAgICAgICAgX3RoaXM0LmN1cnJlbnRJdGVtID0gaXRlbTsKICAgICAgICAgICAgICBfdGhpczQuaXNZdXIgPSBpc1l1cjsKICAgICAgICAgICAgICBfdGhpczQubW9kYWxUaXRsZSA9IGl0ZW0uc2VyaWFsTnVtYmVyICsgIiAtICIgKyBpdGVtLkNOOwogICAgICAgICAgICAgIGlmICghKCFfdGhpczQuZGF0YVRvU2lnbiB8fCAhX3RoaXM0LmRhdGFUb1NpZ24ua2V5KSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gQXV0aFNlcnZpY2UuZ2V0S2V5Rm9yTG9naW5TaWduKGl0ZW0uVElOLCBpdGVtLlVJRCwgaXRlbS5QSU5GTCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzNC5kYXRhVG9TaWduSWZOb3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX3RoaXM0LiRidk1vZGFsLm1zZ0JveENvbmZpcm0oX3RoaXM0LmZvckxvZ2luID8gaCgiaDUiLCB7CiAgICAgICAgICAgICAgICAiY2xhc3MiOiAibWItMCIKICAgICAgICAgICAgICB9LCBbX3RoaXM0LiR0KCdhdXRoLmNvbnRpbnVlX2xvZ2luX3dpdGhfdGhpc19zaWduYXR1cmUnKV0pIDogaCgiaDUiLCB7CiAgICAgICAgICAgICAgICAiY2xhc3MiOiAibWItMCIKICAgICAgICAgICAgICB9LCBbX3RoaXM0LiR0KCdhdXRoLmNvbnRpbnVlX3JlZ193aXRoX3RoaXNfc2lnbmF0dXJlJyldKSwgewogICAgICAgICAgICAgICAgb2tUaXRsZTogX3RoaXM0LiR0KCdhY3Rpb25zLmNvbmZpcm0nKSwKICAgICAgICAgICAgICAgIGNhbmNlbFRpdGxlOiBfdGhpczQuJHQoJ2FjdGlvbnMuY2FuY2VsJykKICAgICAgICAgICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNih2YWx1ZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuY29udGludWVSZWdpc3RyYXRpb24odmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7fSk7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGhpZGVNb2RhbDogZnVuY3Rpb24gaGlkZU1vZGFsKG1vZGFsKSB7CiAgICAgIHRoaXMuJGRhdGFbbW9kYWxdID0gZmFsc2U7CiAgICB9LAogICAgdGltZXN0YW1wZXI6IGZ1bmN0aW9uIHRpbWVzdGFtcGVyKHNpZ25hdHVyZV9oZXgsIGNhbGxiYWNrLCBmYWlsKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBIZWxwZXJTZXJ2aWNlLmdldFRpbWVzdGFtcGVyKHNpZ25hdHVyZV9oZXgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZS5kYXRhLmRhdGEpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSA1OwogICAgICAgICAgICAgIF9jb250ZXh0OC50MCA9IF9jb250ZXh0OFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICBpZiAoX2NvbnRleHQ4LnQwLnJlcXVlc3QpIHsKICAgICAgICAgICAgICAgIGZhaWwoX2NvbnRleHQ4LnQwLnJlcXVlc3QucmVzcG9uc2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4LCBudWxsLCBbWzAsIDVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldERhdGVGb3JtYXQ6IGZ1bmN0aW9uIGdldERhdGVGb3JtYXQoZGF0ZSkgewogICAgICB2YXIgZGF0YSA9IG5ldyBEYXRlKGRhdGUpOwogICAgICB2YXIgbW9udGggPSBkYXRhLmdldE1vbnRoKCkgKyAxOwogICAgICByZXR1cm4gZGF0YS5nZXREYXRlKCkudG9TdHJpbmcoKSArICIuIiArIChtb250aCA8PSA5ID8gIjAiICsgbW9udGggOiBtb250aCkudG9TdHJpbmcoKSArICIuIiArIGRhdGEuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpOwogICAgfSwKICAgIGdldEltem86IGZ1bmN0aW9uIGdldEltem8oKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgdm07CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHZtID0gX3RoaXM1OwogICAgICAgICAgICAgIEVJTVpPQ2xpZW50Lmluc3RhbGxBcGlLZXlzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZtLnVpTG9hZEtleXMoKTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgdm0uJHRvYXN0KHIsIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdm0ud3NFcnJvcihlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdWlDcmVhdGVJdGVtOiBmdW5jdGlvbiB1aUNyZWF0ZUl0ZW0oaXRta2V5LCB2bykgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciB2bSwgbm93LCBpdG07CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB2bSA9IF90aGlzNjsKICAgICAgICAgICAgICBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgIHZvLmV4cGlyZWQgPSBkYXRlcy5jb21wYXJlKG5vdywgdm8udmFsaWRUbykgPiAwOwogICAgICAgICAgICAgIGl0bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICAgICAgICAgIGl0bS52YWx1ZSA9IGl0bWtleTsKICAgICAgICAgICAgICBpdG0udGV4dCA9IHZvLkNOOwogICAgICAgICAgICAgIGlmICghdm8uZXhwaXJlZCkge30gZWxzZSB7CiAgICAgICAgICAgICAgICBpdG0uc3R5bGUuY29sb3IgPSAnZ3JheSc7CiAgICAgICAgICAgICAgICBpdG0udGV4dCA9IGl0bS50ZXh0ICsgJyAo0YHRgNC+0Log0LjRgdGC0LXQuiknOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB2bS5rZXlzTGlzdC5wdXNoKHZvKTsKICAgICAgICAgICAgICB2bS5mdWxsS2V5TGlzdC5wdXNoKHZvKTsKICAgICAgICAgICAgICBpdG0uc2V0QXR0cmlidXRlKCd2bycsIEpTT04uc3RyaW5naWZ5KHZvKSk7CiAgICAgICAgICAgICAgaXRtLnNldEF0dHJpYnV0ZSgnaWQnLCBpdG1rZXkpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgaXRtKTsKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdWlMb2FkS2V5czogZnVuY3Rpb24gdWlMb2FkS2V5cygpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgICB2YXIgdm07CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB2bSA9IF90aGlzNzsKICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBFSU1aT0NsaWVudC5saXN0QWxsVXNlcktleXMoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMShvLCBpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCAiaXRtLSIgKyBvLnNlcmlhbE51bWJlciArICItIiArIGkpOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0LCBfeDUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSwgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKGl0ZW1JZCwgdikgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2bS51aUNyZWF0ZUl0ZW0oaXRlbUlkLCB2KTsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDEyLnNlbnQpOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEyKTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g2LCBfeDcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSwgZnVuY3Rpb24gKGl0ZW1zLCBmaXJzdElkKSB7CiAgICAgICAgICAgICAgICB2bS5rZXlzTGlzdCA9IHZtLmZ1bGxLZXlMaXN0OwogICAgICAgICAgICAgICAgLy92bS51aUZpbGxDb21ibyhpdGVtcyk7CiAgICAgICAgICAgICAgICAvL3ZtLnVpQ29tYm9TZWxlY3QoZmlyc3RJZCk7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgICAgICAgICAgIHZtLiR0b2FzdChlcnJvckNBUElXUyArICIgOiAiICsgZSwgewogICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgMSk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgd3NFcnJvcjogZnVuY3Rpb24gd3NFcnJvcigpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNCgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0KGVycm9yQ0FQSVdTICsgIiA6ICIgKyBlLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0KGVycm9yQnJvd3NlcldTLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1aUNvbWJvU2VsZWN0OiBmdW5jdGlvbiB1aUNvbWJvU2VsZWN0KGl0bSkgewogICAgICBpZiAoaXRtKSB7CiAgICAgICAgdmFyIGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaXRtKTsKICAgICAgICBpZC5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJ3RydWUnKTsKICAgICAgfQogICAgfSwKICAgIGNiQ2hhbmdlZDogZnVuY3Rpb24gY2JDaGFuZ2VkKGMpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2tleUlkJykuaW5uZXJIVE1MID0gJyc7CiAgICB9LAogICAgdWlDbGVhckNvbWJvOiBmdW5jdGlvbiB1aUNsZWFyQ29tYm8oKSB7CiAgICAgIHZhciBjb21ibyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2VpbXpvX2tleXMnKTsKICAgICAgY29tYm8ubGVuZ3RoID0gMDsKICAgIH0sCiAgICB1aUZpbGxDb21ibzogZnVuY3Rpb24gdWlGaWxsQ29tYm8oaXRlbXMpIHsKICAgICAgdmFyIGNvbWJvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfZWltem9fa2V5cycpOwogICAgICB0aGlzLml0ZW1MaXN0ID0gaXRlbXM7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgSW1nVXNlcjogZnVuY3Rpb24gSW1nVXNlcigpIHsKICAgICAgcmV0dXJuIHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy91c2Vycy91c2VyLnBuZyIpOwogICAgfSwKICAgIEltZ0NvbXBhbnk6IGZ1bmN0aW9uIEltZ0NvbXBhbnkoKSB7CiAgICAgIHJldHVybiByZXF1aXJlKCJAL2Fzc2V0cy9pbWFnZXMvdXNlcnMvY29tcGFueS5wbmciKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICB0aGlzLmFwcExvYWQoKS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICBfdGhpczkubG9hZGluZyA9IGZhbHNlOwogICAgfSk7CiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;AAkGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA;IACAC;MACAC;MACAC;IACA;IACAC;MACAD,8BACA;IACA;EACA;EACAE;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MAEAC;MACAC;QACAA;MACA;IACA;IACAC;MACA;MACA;QACA;UACA,IACAC,yBACAA,wBACAA,wBACAA,0BACAA,0BACAA,2BACAA,iCACA;YACA;UACA;QACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACA;cACAH;cACA7B;cACA;gBACAA;kBAAAiC;kBAAAC;gBAAA;gBACA;cACA;gBACAlC;kBACAiC;kBACAE;kBACAC;kBACAC;gBACA;gBACA;cACA;cACA;cACAC;gBACAC;kBACAA;oBACAC;kBACA;oBACAC;oBACAZ;oBACA;sBACA;wBACAA;0BAAAjC;wBAAA;sBACA;oBACA;sBACA8C;sBACAb;wBAAAjC;sBAAA;oBACA;oBACA;kBACA;gBACA;kBACA6C;kBACAZ;kBACA;oBACA;sBACAA;wBAAAjC;sBAAA;oBACA;sBACAiC;wBAAAjC;sBAAA;oBACA;kBACA;oBACAiC;sBAAAjC;oBAAA;kBACA;kBACA;gBACA;cACA;cACA0C,aACA;gBACAT;cACA,GACA;gBACAc;cACA,EACA;gBACAd;gBACAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAe;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA,KACAC;gBAAA;gBAAA;cAAA;cAAA,KACA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA;YAAA;cAEA;cACAxB;cACAyB,mIACAC;gBACA;kBACAC;kBACA1B;gBACA;gBACA;cACA,GACA2B;gBACAN;cACA,GACAO;gBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAGA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAtB;cACAU;cAAA;cAAA,OACAA;gBAAA;kBAAA;kBAAA;oBAAA;sBAAA;wBACAa;wBACAC;wBAAA,MACAA;0BAAA;0BAAA;wBAAA;wBACA;wBACAxB;0BAAAjC;wBAAA;wBAAA;wBAAA;sBAAA;wBAAA;wBAAA,OAEA2C;0BAAA;4BAAA;8BAAA;gCAAA;gCAAA,OACAV;8BAAA;8BAAA;gCAAA;4BAAA;0BAAA;wBAAA,CAEA;0BACAA;0BACA;4BACAA;8BAAAjC;4BAAA;0BACA;4BACAiC;0BACA;wBACA;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CAEA;gBAAA;kBAAA;gBAAA;cAAA;gBACAA;gBACA;kBACAA;oBAAAjC;kBAAA;gBACA;kBACAiC;oBAAAjC;kBAAA;gBACA;cACA;YAAA;cAAA,kCACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACA0D;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;cACA;cACA;cACA;cAAA,MACA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACAR;gBACA;cACA;YAAA;cAEA;gBAAA;cAAA;gBAAA;cAAA;gBACAS;gBACAC;cACA,GACAT;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA,KACAU;0BAAA;0BAAA;wBAAA;wBAAA;wBAAA,OACA;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CAEA;gBAAA;kBAAA;gBAAA;cAAA,KACAR,sBACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAS;MACA;IACA;IACAC;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;cAAA,OAGAC;gBACAC;cACA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAEA;gBACAC;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAGA;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAnC;cACAU;gBACAV;cACA;gBACA;kBACAA;oBAAAjC;kBAAA;gBACA;kBACAiC;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAoC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACApC;cACAqC;cACArD;cACAsD;cACAA;cACAA;cACA,kBAEA;gBACAA;gBACAA;cACA;cACAtC;cACAA;cACAsC;cACAA;cAAA,mCACAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAvC;cAAA;cAAA,OACAU;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA,mCACA;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CACA;gBAAA;kBAAA;gBAAA;cAAA;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA;wBAAA,OACAV;sBAAA;wBAAA;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CACA;gBAAA;kBAAA;gBAAA;cAAA;gBACAA;gBACA;gBACA;cACA;gBACAA;kBAAAjC;gBAAA;cACA;YAAA;cAAA,mCACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAyE;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;gBACA;kBAAAzE;gBAAA;cACA;gBACA;kBAAAA;gBAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACA0E;MACA;QACA;QACAC;MACA;IACA;IACAC;MACA9B;IACA;IACA+B;MACA;MACAC;IACA;IACAC;MACA;MACA;IAEA;EACA;EACAC;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;EACA;EACAC;IAAA;IACA;IACA,eACA9B;MACA;IACA;IACA;EACA;AACA","names":["props","forLogin","type","default","dataToSign","name","data","signSelectBtnDisabled","openConfirmModal","signModal","SearchText","alertShow","alertMsg","alertType","dataToSignIfNot","publicPath","Invoice","pkcs7","signByImzoText","vo","keysList","fullKeyList","alertMessage","showMessage","currentAlertCounter","loading","confirmDialog","isYur","currentItem","modalTitle","loadingButton","AppSettings","methods","debounceSearch","clearTimeout","vm","keyFilter","el","signByEimzo","key","inn","PNFL","TIN","INN","promise","EIMZOClient","resolve","reject","document","console","continueRegistration","isConfirmed","AuthService","then","responseData","catch","finally","appLoad","newVersion","installedVersion","openSignModal","okTitle","cancelTitle","value","hideModal","timestamper","HelperService","callback","fail","getDateFormat","getImzo","uiCreateItem","now","itm","uiLoadKeys","wsError","uiComboSelect","id","cbChanged","uiClearCombo","combo","uiFillCombo","computed","ImgUser","ImgCompany","created"],"sourceRoot":"src/shared/views/auth/components","sources":["ESigns.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-card class=\"e-signs-wrapper-card\">\r\n      <b-card-title>\r\n        <b-row>\r\n          <b-col md=\"4\" sm=\"12\">\r\n            <h4>{{ $t('auth.e_signatures') }}</h4>\r\n          </b-col>\r\n          <b-col md=\"5\" sm=\"12\">\r\n            <b-form-input v-model=\"SearchText\"\r\n                          size=\"sm\"\r\n                          :placeholder=\"$t('auth.e_sign_search')\"\r\n                          @input=\"debounceSearch\">\r\n              <template #append-content>\r\n                <i class=\"mdi mdi-search\"></i>\r\n              </template>\r\n            </b-form-input>\r\n          </b-col>\r\n          <b-col v-if=\"forLogin\" class=\"text-sm-end\" sm=\"3\">\r\n            <b-button class=\"btn btn-warning\" size=\"sm\" @click=\"$router.push({name: 'Login'})\">\r\n              {{ $t(\"actions.back\") }}\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n      </b-card-title>\r\n      <b-card-body :style=\"forLogin ? {'max-height': '60vh', 'overflow': 'auto'} : ''\">\r\n        <div v-if=\"loading\">\r\n          <div style=\"position:absolute;left:0;top:0;bottom:0;right:0;background-color:rgb(255, 255, 255, 0.4);\">\r\n            <div style=\"position:absolute;bottom:50%;left:50%;transform:translateX(-50%);\">\r\n              <b-spinner color=\"success\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-else>\r\n          <div v-if=\"keysList.length === 0\">\r\n            <b-card md=\"12\" sm=\"12\">\r\n              <b-card-body>\r\n                <h1 class=\"text-center text-danger\">\r\n                  {{ $t('auth.no_e_signatures_found') }}\r\n                </h1>\r\n              </b-card-body>\r\n            </b-card>\r\n          </div>\r\n          <b-row v-else>\r\n            <b-col v-for=\"(item, index) in keysList\" :key=\"`signkey-${index}`\" :md=\"forLogin ? 6 : 4\" :sm=\"6\"\r\n                   :xl=\"forLogin ? 6 : 3\">\r\n              <b-card accent-color=\"primary\" body-class=\"p-0\" class=\"mr-3 mb-3 e-sign-card p-0\">\r\n                <b-card-title>{{ item.serialNumber }} - {{ item.CN }}</b-card-title>\r\n                <b-card-body>\r\n                  <b-row>\r\n                    <p class=\"ml-2\">\r\n                      <i class=\"mdi mdi-file-key-outline\" style=\"color: #556ee6; font-size: 2.5rem;\"/>\r\n                      <b>{{ $t('auth.certificate_number') }}</b>: {{ item.serialNumber }}\r\n                    </p>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <p class=\"ml-2 mt-2\"><b>{{ $t('column.inn') }}</b>: {{ item.TIN }}</p>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <p class=\"ml-2\"><b>{{ $t('column.fio') }}</b>: {{ item.CN }}</p>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <p class=\"ml-2\"><b>{{ $t('auth.organisation') }}</b>: {{ item.O }}</p>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <p class=\"ml-2\">\r\n                      <b class=\"small\">{{ $t('auth.certificate_validity_period') }}</b>:\r\n                      {{ getDateFormat(item.validFrom) }} - {{ getDateFormat(item.validTo) }}\r\n                    </p>\r\n                    <p></p>\r\n                  </b-row>\r\n                </b-card-body>\r\n                <footer class=\"d-flex justify-content-end\">\r\n                  <b v-if=\"item.expired\" class=\"text-danger\">\r\n                    {{ $t('auth.certificate_expired') }}\r\n                  </b>\r\n                  <button v-else-if=\"signSelectBtnDisabled\" class=\"btn btn-primary btn-sm\" disabled>\r\n                    {{ $t('auth.continue_with_this_signature') }}\r\n                  </button>\r\n                  <button v-else class=\"btn btn-primary btn-sm\" @click=\"openSignModal(item)\">\r\n                    {{ $t('auth.continue_with_this_signature') }}\r\n                  </button>\r\n                </footer>\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n        </div>\r\n      </b-card-body>\r\n      <footer v-if=\"!forLogin\" class=\"d-flex justify-content-end\">\r\n        <button class=\"btn btn-warning\" @click=\"$router.push({name: 'Login'})\">\r\n          {{ $t(\"actions.back\") }}\r\n        </button>\r\n      </footer>\r\n    </b-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HelperService from \"@/shared/services/auth.service\";\r\nimport AuthService from \"@/shared/services/auth.service\";\r\nimport AppSettings from \"@/settings\";\r\n\r\nvar EIMZO_MAJOR = 3;\r\nvar EIMZO_MINOR = 37;\r\nconst errorCAPIWS = 'Ошибка соединения с E-IMZO. Возможно у вас не установлен модуль E-IMZO или Браузер E-IMZO.';\r\nconst errorBrowserWS = 'Браузер не поддерживает технологию WebSocket. Установите последнюю версию браузера.';\r\nconst errorUpdateApp = 'ВНИМАНИЕ !!! Установите новую версию приложения E-IMZO или Браузера E-IMZO.<br /><a href=\"https://e-imzo.uz/main/downloads/\" role=\"button\">Скачать ПО E-IMZO</a>';\r\nconst errorWrongPassword = 'Пароль неверный.';\r\nexport default {\r\n  props: {\r\n    forLogin: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    dataToSign: {\r\n      default: () => {\r\n      }\r\n    }\r\n  },\r\n  name: \"ESigns\",\r\n  data() {\r\n    return {\r\n      signSelectBtnDisabled: false,\r\n      openConfirmModal: false,\r\n      signModal: false,\r\n      SearchText: '',\r\n      alertShow: false,\r\n      alertMsg: '',\r\n      alertType: '',\r\n      dataToSignIfNot: {},\r\n      publicPath: process.env.BASE_URL,\r\n      Invoice: {},\r\n      pkcs7: null,\r\n      signByImzoText: null,\r\n      vo: null,\r\n      keysList: [],\r\n      fullKeyList: [],\r\n      alertMessage: null,\r\n      showMessage: false,\r\n      currentAlertCounter: 5,\r\n      loading: false,\r\n      confirmDialog: false,\r\n      isYur: null,\r\n      currentItem: null,\r\n      modalTitle: null,\r\n      loadingButton: false,\r\n      AppSettings: AppSettings\r\n    }\r\n  },\r\n  methods: {\r\n    debounceSearch(event) {\r\n      let vm = this;\r\n\r\n      clearTimeout(vm.debounce);\r\n      vm.debounce = setTimeout(() => {\r\n        vm.keyFilter(event);\r\n      }, 500);\r\n    },\r\n    keyFilter(text) {\r\n      let value = text.toUpperCase();\r\n      if (value) {\r\n        this.keysList = this.fullKeyList.filter((el) => {\r\n          if (\r\n              el.CN.includes(value) ||\r\n              el.O.includes(value) ||\r\n              el.T.includes(value) ||\r\n              el.TIN.includes(value) ||\r\n              el.UID.includes(value) ||\r\n              el.name.includes(value) ||\r\n              el.serialNumber.includes(value)\r\n          ) {\r\n            return el;\r\n          }\r\n        });\r\n      } else {\r\n        this.keysList = this.fullKeyList;\r\n      }\r\n    },\r\n    async signByEimzo() {\r\n      this.loadingButton = true;\r\n      let vm = this;\r\n      let data = null\r\n      if (this.dataToSign && this.dataToSign.key) {\r\n        data = JSON.stringify({ key: this.dataToSign.key, inn: this.dataToSign.inn })\r\n        // data = JSON.stringify(this.dataToSign)\r\n      } else if (this.dataToSignIfNot && this.dataToSignIfNot.key) {\r\n        data = JSON.stringify({\r\n          key: this.dataToSignIfNot.key,\r\n          PNFL: this.dataToSignIfNot.PNFL,\r\n          TIN: this.dataToSignIfNot.TIN,\r\n          INN: this.dataToSignIfNot.INN,\r\n        })\r\n        // data = JSON.stringify(this.dataToSignIfNot)\r\n      }\r\n      // var data = JSON.stringify((this.dataToSign && this.dataToSign.key) ? { key: this.dataToSign.key, inn: this.dataToSign.inn } : (this.dataToSignIfNot && this.dataToSignIfNot.key) ? { key: this.dataToSignIfNot.key, inn: this.dataToSignIfNot.inn } : { key: null, inn: null });\r\n      const promise = new Promise((resolve, reject) => {\r\n        EIMZOClient.loadKey(vm.currentItem, function (id) {\r\n          EIMZOClient.createPkcs7(id, data, null, function (pkcs7) {\r\n            resolve(pkcs7);\r\n          }, function (e, r) {\r\n            reject('error');\r\n            vm.loadingButton = false;\r\n            if (r) {\r\n              if (r.indexOf(\"BadPaddingException\") !== -1) {\r\n                vm.$toast(errorWrongPassword, { type: 'error' });\r\n              }\r\n            } else {\r\n              document.getElementById('keyId').innerHTML = '';\r\n              vm.$toast(errorBrowserWS, { type: 'error' });\r\n            }\r\n            if (e) vm.wsError(e);\r\n          });\r\n        }, function (e, r) {\r\n          reject('error');\r\n          vm.loadingButton = false;\r\n          if (r) {\r\n            if (r.indexOf(\"BadPaddingException\") !== -1) {\r\n              vm.$toast(errorWrongPassword, { type: 'error' });\r\n            } else {\r\n              vm.$toast(r, { type: 'error' });\r\n            }\r\n          } else {\r\n            vm.$toast(errorBrowserWS, { type: 'error' });\r\n          }\r\n          if (e) vm.wsError(e);\r\n        });\r\n      });\r\n      promise.then(\r\n          success => {\r\n            vm.$emit('sign', success, vm.dataToSignIfNot.TIN, vm.dataToSignIfNot.PNFL, vm.dataToSignIfNot.INN);\r\n          },\r\n          error => {\r\n            console.log(error)\r\n          },\r\n      ).finally(() => {\r\n        vm.confirmDialog = false;\r\n        vm.loadingButton = false;\r\n      })\r\n    },\r\n    async continueRegistration(isConfirmed) {\r\n      if (isConfirmed) {\r\n        if (this.forLogin) {\r\n          await this.signByEimzo()\r\n        } else {\r\n          this.signSelectBtnDisabled = true\r\n          const isYur = !!this.currentItem.T && this.currentItem.TIN !== this.currentItem.UID;\r\n          AuthService.isOrgRegistered(this.currentItem.TIN, this.currentItem.PINFL,this.currentItem.UID, isYur, this.currentItem.T)\r\n            .then((response) => {\r\n              let payload = {\r\n                responseData: response.data,\r\n                currentItem: this.currentItem\r\n              }\r\n              this.$emit(\"keySelected\", payload);\r\n            })\r\n            .catch((e) => {\r\n              console.log(e)\r\n            })\r\n            .finally((e) => {\r\n              this.signSelectBtnDisabled = false\r\n              // this.hideModal(\"openConfirmModal\");\r\n            });\r\n      }\r\n      }\r\n    },\r\n    async appLoad() {\r\n      let vm = this;\r\n      EIMZOClient.API_KEYS = AppSettings.api_keys;\r\n      await EIMZOClient.checkVersion(async function (major, minor) {\r\n        var newVersion = EIMZO_MAJOR * 100 + EIMZO_MINOR;\r\n        var installedVersion = parseInt(major) * 100 + parseInt(minor);\r\n        if (installedVersion < newVersion) {\r\n          // vm.loading = false;\r\n          vm.$toast(errorUpdateApp, { type: 'error' });\r\n        } else {\r\n          await EIMZOClient.installApiKeys(async function () {\r\n            await vm.uiLoadKeys()\r\n            // vm.loading = false\r\n          }, function (e, r) {\r\n            vm.loading = false;\r\n            if (r) {\r\n              vm.$toast(r, { type: 'error' });\r\n            } else {\r\n              vm.wsError(e, vm.$t('actions.error'), 'error');\r\n            }\r\n          });\r\n        }\r\n      }, function (e, r) {\r\n        vm.loading = false;\r\n        if (r) {\r\n          vm.$toast(r, { type: 'error' });\r\n        } else {\r\n          vm.$toast(vm.$t('auth.is_e_signature_installed'), { type: 'error' });\r\n        }\r\n      });\r\n      return 1;\r\n    },\r\n    async openSignModal(item, isYur) {\r\n      this.currentItem = item;\r\n      this.isYur = isYur;\r\n      this.modalTitle = item.serialNumber + \" - \" + item.CN;\r\n      if (!this.dataToSign || !this.dataToSign.key) {\r\n        await AuthService.getKeyForLoginSign(item.TIN, item.UID, item.PINFL).then(response => {\r\n          this.dataToSignIfNot = response.data;\r\n        })\r\n      }\r\n      this.$bvModal.msgBoxConfirm(this.forLogin ? <h5 class=\"mb-0\">{this.$t('auth.continue_login_with_this_signature')}</h5> : <h5 class=\"mb-0\">{this.$t('auth.continue_reg_with_this_signature')}</h5>, {\r\n        okTitle: this.$t('actions.confirm'),\r\n        cancelTitle: this.$t('actions.cancel')\r\n      })\r\n          .then(async value => {\r\n            if (value) {\r\n              await this.continueRegistration(value)\r\n            }\r\n          })\r\n          .catch(err => {\r\n          })\r\n    },\r\n    hideModal(modal) {\r\n      this.$data[modal] = false;\r\n    },\r\n    async timestamper(signature_hex, callback, fail) {\r\n\r\n      try {\r\n        await HelperService.getTimestamper(signature_hex).then(response => {\r\n          callback(response.data.data)\r\n        });\r\n      } catch (e) {\r\n        if (e.request) {\r\n          fail(e.request.response);\r\n        }\r\n      }\r\n\r\n    },\r\n    getDateFormat(date) {\r\n      let data = new Date(date);\r\n      let month = data.getMonth() + 1\r\n      return data.getDate().toString() + \".\" + (month <= 9 ? \"0\" + month : month).toString() + \".\" + data.getFullYear().toString();\r\n    },\r\n    async getImzo() {\r\n      let vm = this;\r\n      EIMZOClient.installApiKeys(function () {\r\n        vm.uiLoadKeys();\r\n      }, function (e, r) {\r\n        if (r) {\r\n          vm.$toast(r, { type: 'error' });\r\n        } else {\r\n          vm.wsError(e);\r\n        }\r\n      });\r\n    },\r\n    async uiCreateItem(itmkey, vo) {\r\n      let vm = this;\r\n      var now = new Date();\r\n      vo.expired = dates.compare(now, vo.validTo) > 0;\r\n      var itm = document.createElement(\"option\");\r\n      itm.value = itmkey;\r\n      itm.text = vo.CN;\r\n      if (!vo.expired) {\r\n\r\n      } else {\r\n        itm.style.color = 'gray';\r\n        itm.text = itm.text + ' (срок истек)';\r\n      }\r\n      vm.keysList.push(vo);\r\n      vm.fullKeyList.push(vo);\r\n      itm.setAttribute('vo', JSON.stringify(vo));\r\n      itm.setAttribute('id', itmkey);\r\n      return itm;\r\n    },\r\n    async uiLoadKeys() {\r\n      let vm = this;\r\n      await EIMZOClient.listAllUserKeys(async function (o, i) {\r\n        return \"itm-\" + o.serialNumber + \"-\" + i;\r\n      }, async function (itemId, v) {\r\n        return await vm.uiCreateItem(itemId, v)\r\n      }, function (items, firstId) {\r\n        vm.keysList = vm.fullKeyList;\r\n        //vm.uiFillCombo(items);\r\n        //vm.uiComboSelect(firstId);\r\n      }, function (e, r) {\r\n        vm.$toast(errorCAPIWS + \" : \" + e, { type: 'error' });\r\n      });\r\n      return 1\r\n    },\r\n    async wsError() {\r\n      if (e) {\r\n        this.$toast(errorCAPIWS + \" : \" + e, { type: 'error' });\r\n      } else {\r\n        this.$toast(errorBrowserWS, { type: 'error' });\r\n      }\r\n    },\r\n    uiComboSelect(itm) {\r\n      if (itm) {\r\n        var id = document.getElementById(itm);\r\n        id.setAttribute('selected', 'true');\r\n      }\r\n    },\r\n    cbChanged(c) {\r\n      document.getElementById('keyId').innerHTML = '';\r\n    },\r\n    uiClearCombo() {\r\n      var combo = document.getElementById('user_eimzo_keys');\r\n      combo.length = 0;\r\n    },\r\n    uiFillCombo(items) {\r\n      var combo = document.getElementById('user_eimzo_keys');\r\n      this.itemList = items;\r\n\r\n    }\r\n  },\r\n  computed: {\r\n    ImgUser: () => require(\"@/assets/images/users/user.png\"),\r\n    ImgCompany: () => require(\"@/assets/images/users/company.png\"),\r\n  },\r\n  created() {\r\n    this.loading = true;\r\n    this.appLoad()\r\n        .catch(e => {\r\n          this.loading = false\r\n        })\r\n    this.loading = false;\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.card {\r\n  -webkit-box-shadow: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.e-signs-wrapper-card {\r\n  .card-title,\r\n  footer {\r\n    padding: 1.25rem;\r\n  }\r\n}\r\n\r\n.e-sign-card {\r\n  -webkit-box-shadow: 0rem 0.75rem 3rem rgb(18 38 63 / 15%);\r\n  box-shadow: 0rem 0.75rem 3rem rgb(18 38 63 / 15%);\r\n}\r\n</style>"]}]}