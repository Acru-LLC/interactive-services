{"remainingRequest":"D:\\ACRU\\my-fairtech\\node_modules\\thread-loader\\dist\\cjs.js!D:\\ACRU\\my-fairtech\\node_modules\\babel-loader\\lib\\index.js!D:\\ACRU\\my-fairtech\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\ACRU\\my-fairtech\\src\\shared\\services\\crud_and_list.service.js","dependencies":[{"path":"D:\\ACRU\\my-fairtech\\src\\shared\\services\\crud_and_list.service.js","mtime":1719222285810},{"path":"D:\\ACRU\\my-fairtech\\babel.config.js","mtime":1719222278287},{"path":"D:\\ACRU\\my-fairtech\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719222280288},{"path":"D:\\ACRU\\my-fairtech\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1719222284617},{"path":"D:\\ACRU\\my-fairtech\\node_modules\\babel-loader\\lib\\index.js","mtime":1719222279696},{"path":"D:\\ACRU\\my-fairtech\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1719222279439}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovQUNSVS9teS1mYWlydGVjaC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0FDUlUvbXktZmFpcnRlY2gvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9hcGkuc2VydmljZSI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0YXRlL3N0b3JlIjsKaW1wb3J0IGlkIGZyb20gInZ1ZTItZGF0ZXBpY2tlci9sb2NhbGUvZXMvaWQiOwovKg0KICoge3sgbWFpblVybCB9fQ0KICogTVVTVCBCRSBTRU5UIFRPIFRIRVNFIEZVTkNUSU9OUyovCnZhciBGSUxFX0VOVElUWV9TQVZFX1VSTCA9ICdmaWxlLWVudGl0eS9zYXZlJzsKdmFyIGNydWRBbmRMaXN0c1NlcnZpY2UgPSB7CiAgZmV0Y2hCeURlcElkOiBmdW5jdGlvbiBmZXRjaEJ5RGVwSWQobWFpblVybCwgZGVwSWQpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldCgiIi5jb25jYXQobWFpblVybCwgIi9nZXQtYnktZGVwSWQvIikuY29uY2F0KGRlcElkKSwgd2l0aExvYWRlcik7CiAgfSwKICBkb3dubG9hZEludGVncmF0aW9uRGF0YTogZnVuY3Rpb24gZG93bmxvYWRJbnRlZ3JhdGlvbkRhdGEobWFpblVybCwgZGVwSWQpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwpLCB3aXRoTG9hZGVyKTsKICB9LAogIHNhdmVGaWxlRW50aXR5OiBmdW5jdGlvbiBzYXZlRmlsZUVudGl0eSh1cmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChGSUxFX0VOVElUWV9TQVZFX1VSTCwgIi8iKS5jb25jYXQodXJsLCAiLyIpLmNvbmNhdChhcHBlbmRVcmwpLCBwYXlsb2FkKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KEZJTEVfRU5USVRZX1NBVkVfVVJMLCAiLyIpLmNvbmNhdCh1cmwpLCBwYXlsb2FkKTsKICAgIH0KICB9LAogIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2NyZWF0ZS8iKS5jb25jYXQoYXBwZW5kVXJsKSwgcGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2NyZWF0ZSIpLCBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wdXQoIiIuY29uY2F0KG1haW5VcmwsICIvdXBkYXRlLyIpLmNvbmNhdChhcHBlbmRVcmwgPT0gJ3dpdGhvdXRBcHBlbmRVcmwnID8gJycgOiBhcHBlbmRVcmwpLCBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnB1dCgiIi5jb25jYXQobWFpblVybCwgIi91cGRhdGUvIikuY29uY2F0KHBheWxvYWQuaWQpLCBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIGNyZWF0ZU5vdGlmaWNhdGlvbjogZnVuY3Rpb24gY3JlYXRlTm90aWZpY2F0aW9uKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2NyZWF0ZS8iKS5jb25jYXQoYXBwZW5kVXJsKSwgcGF5bG9hZCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2NyZWF0ZSIpLCBwYXlsb2FkKTsKICAgIH0KICB9LAogIHVwZGF0ZU5vdGlmaWNhdGlvbjogZnVuY3Rpb24gdXBkYXRlTm90aWZpY2F0aW9uKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wdXQoIiIuY29uY2F0KG1haW5VcmwsICIvdXBkYXRlLyIpLmNvbmNhdChhcHBlbmRVcmwpLCBwYXlsb2FkKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnB1dCgiIi5jb25jYXQobWFpblVybCwgIi91cGRhdGUvIiksIHBheWxvYWQpOwogICAgfQogIH0sCiAgZ2V0QXBwZWFsVHlwZTogZnVuY3Rpb24gZ2V0QXBwZWFsVHlwZShzZWFyY2hEYXRhKSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIvYXBwZWFsX3R5cGVzL2xpc3Qtc2VhcmNoLW9wZW4/a2V5d29yZD0iLCBzZWFyY2hEYXRhLnBhcmFtcy5wYXJhbXMpOwogIH0sCiAgZ2V0TGlzdERvY1R5cGU6IGZ1bmN0aW9uIGdldExpc3REb2NUeXBlKCkgewogICAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogICAgdmFyIGtleXdvcmQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnOwogICAgdmFyIHBheWxvYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDsKICAgIHZhciBteVBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKTsKICAgIG15UGF5bG9hZC5wYWdlIC09IDE7CiAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCJwaGFybV9kb2N1bWVudC9saXN0LXNlYXJjaC1vcGVuP2tleXdvcmQ9Ii5jb25jYXQoa2V5d29yZCA/IGtleXdvcmQgOiAnJywgIiZ0eXBlPSIpLmNvbmNhdCh0eXBlID8gdHlwZSA6ICcnKSwgbXlQYXlsb2FkKTsKICB9LAogIHNlbmRBcHBlYWw6IGZ1bmN0aW9uIHNlbmRBcHBlYWwoYm9keUZvcm1EYXRhKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVxdWVzdERhdGEsIHJlc3BvbnNlOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhib2R5Rm9ybURhdGEpOwogICAgICAgICAgICByZXF1ZXN0RGF0YSA9IHsKICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICB1cmw6ICcvb3V0ZXItY2FiaW5ldC9zZW5kLWFwcGVhbCcsCiAgICAgICAgICAgICAgZGF0YTogYm9keUZvcm1EYXRhLAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuY3VzdG9tUmVxdWVzdChyZXF1ZXN0RGF0YSk7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA4OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC50MC5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCA4XV0pOwogICAgfSkpKCk7CiAgfSwKICBnZXRBcHBlYWxDb3VudDogZnVuY3Rpb24gZ2V0QXBwZWFsQ291bnQoKSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5nZXQoJy9vdXRlci1jYWJpbmV0L2FwcGVhbC1jb3VudCcpOwogIH0sCiAgZ2V0UGhhcm1hY3lGaWxlOiBmdW5jdGlvbiBnZXRQaGFybWFjeUZpbGUoaWQpIHsKICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldEZpbGUoInBoYXJtL2RvZXIvZ2V0L2RvY3gvZmlsZS8iLmNvbmNhdChpZCkpOwogIH0sCiAgZ2V0Q29uZmlybVBoYXJtYWN5OiBmdW5jdGlvbiBnZXRDb25maXJtUGhhcm1hY3koaWQpIHsKICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIi9waGFybS9jb25maXJtLXBoYXJtYWN5P21OdW1iZXI9Ii5jb25jYXQoaWQpKTsKICB9LAogIGdldEJ5SWQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBfZ2V0QnlJZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIobWFpblVybCwgaWQpIHsKICAgICAgdmFyIHdpdGhMb2FkZXIsCiAgICAgICAgbXV0YXRpb25OYW1lLAogICAgICAgIGFwcGVuZFVybCwKICAgICAgICByZXMsCiAgICAgICAgX3JlcywKICAgICAgICBfYXJnczIgPSBhcmd1bWVudHM7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB3aXRoTG9hZGVyID0gX2FyZ3MyLmxlbmd0aCA+IDIgJiYgX2FyZ3MyWzJdICE9PSB1bmRlZmluZWQgPyBfYXJnczJbMl0gOiBmYWxzZTsKICAgICAgICAgICAgbXV0YXRpb25OYW1lID0gX2FyZ3MyLmxlbmd0aCA+IDMgPyBfYXJnczJbM10gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgIGFwcGVuZFVybCA9IF9hcmdzMi5sZW5ndGggPiA0ICYmIF9hcmdzMls0XSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzRdIDogbnVsbDsKICAgICAgICAgICAgaWYgKCFhcHBlbmRVcmwpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuZ2V0KCIiLmNvbmNhdChtYWluVXJsLCAiL2dldC8iKS5jb25jYXQoYXBwZW5kVXJsLCAiLyIpLmNvbmNhdChpZCksIHdpdGhMb2FkZXIpOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhICYmIG11dGF0aW9uTmFtZSkgc3RvcmUuY29tbWl0KG11dGF0aW9uTmFtZSwgcmVzLmRhdGEpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzKTsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldCgiIi5jb25jYXQobWFpblVybCwgIi9nZXQvIikuY29uY2F0KGlkKSwgd2l0aExvYWRlcik7CiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBfcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIGlmIChfcmVzLmRhdGEgJiYgbXV0YXRpb25OYW1lKSBzdG9yZS5jb21taXQobXV0YXRpb25OYW1lLCBfcmVzLmRhdGEpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX3Jlcyk7CiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSk7CiAgICBmdW5jdGlvbiBnZXRCeUlkKF94LCBfeDIpIHsKICAgICAgcmV0dXJuIF9nZXRCeUlkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgICByZXR1cm4gZ2V0QnlJZDsKICB9KCksCiAgZ2V0RW1wdHk6IGZ1bmN0aW9uIGdldEVtcHR5KG1haW5VcmwpIHsKICAgIHZhciBhcHBlbmRVcmwgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgICBpZiAoYXBwZW5kVXJsKSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldCgiIi5jb25jYXQobWFpblVybCwgIi9nZXQvZW1wdHkvIikuY29uY2F0KGFwcGVuZFVybCksIHdpdGhMb2FkZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuZ2V0KCIiLmNvbmNhdChtYWluVXJsLCAiL2dldC9lbXB0eSIpLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIGdldEVtcHR5Q3VzdG9tVXJsOiBmdW5jdGlvbiBnZXRFbXB0eUN1c3RvbVVybChjdXN0b21VcmwpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldCgiIi5jb25jYXQoY3VzdG9tVXJsKSwgd2l0aExvYWRlcik7CiAgfSwKICBkZWxldGVCeUlkOiBmdW5jdGlvbiBkZWxldGVCeUlkKG1haW5VcmwsIGlkLCBhcHBlbmRVcmwpIHsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuZGVsZXRlKCIiLmNvbmNhdChtYWluVXJsLCAiL2RlbGV0ZS8iKS5jb25jYXQoaWQsICIvIikuY29uY2F0KGFwcGVuZFVybCkpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuZGVsZXRlKCIiLmNvbmNhdChtYWluVXJsLCAiL2RlbGV0ZS8iKS5jb25jYXQoaWQpKTsKICAgIH0KICB9LAogIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QobWFpblVybCwgcGF5bG9hZCwgYXBwZW5kVXJsKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICB2YXIgbXlQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZCk7CiAgICBteVBheWxvYWQucGFnZSAtPSAxOwogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5nZXQoIiIuY29uY2F0KG1haW5VcmwsICIvIikuY29uY2F0KGFwcGVuZFVybCksIHBheWxvYWQgPyBteVBheWxvYWQgOiBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldCgiIi5jb25jYXQobWFpblVybCksIHBheWxvYWQgPyBteVBheWxvYWQgOiBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIGdldExpc3RHZXQ6IGZ1bmN0aW9uIGdldExpc3RHZXQobWFpblVybCwgcGF5bG9hZCwgYXBwZW5kVXJsKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICB2YXIgbXlQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZCk7CiAgICBteVBheWxvYWQucGFnZSAtPSAxOwogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5nZXQoIiIuY29uY2F0KG1haW5VcmwsICIvIikuY29uY2F0KGFwcGVuZFVybCksIHBheWxvYWQgPyBteVBheWxvYWQgOiBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldCgiIi5jb25jYXQobWFpblVybCksIHBheWxvYWQgPyBteVBheWxvYWQgOiBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIHNlYXJjaExpc3Q6IGZ1bmN0aW9uIHNlYXJjaExpc3QobWFpblVybCwgcGF5bG9hZCwgYXBwZW5kVXJsKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICB2YXIgbXlQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZCk7CiAgICBteVBheWxvYWQucGFnZSAtPSAxOwogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoLyIpLmNvbmNhdChhcHBlbmRVcmwpLCBwYXlsb2FkID8gbXlQYXlsb2FkIDogcGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoIiksIHBheWxvYWQgPyBteVBheWxvYWQgOiBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIHNlYXJjaExpc3RXaXRoS2V5d29yZDogZnVuY3Rpb24gc2VhcmNoTGlzdFdpdGhLZXl3b3JkKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaC8iKS5jb25jYXQoYXBwZW5kVXJsLCAiP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJyksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJyksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9CiAgfSwKICBnZXRMaXN0V2l0aERlcGFydG1lbnRUeXBlQnlDb2RlOiBmdW5jdGlvbiBnZXRMaXN0V2l0aERlcGFydG1lbnRUeXBlQnlDb2RlKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuZ2V0KCIiLmNvbmNhdChtYWluVXJsLCAiLz9jb2RlPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuZ2V0KCIiLmNvbmNhdChtYWluVXJsLCAiLz9jb2RlPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfQogIH0sCiAgc2VhcmNoTGlzdFdpdGhvdXRLZXl3b3JkOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aG91dEtleXdvcmQobWFpblVybCwgcGF5bG9hZCwgYXBwZW5kVXJsKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICB2YXIgdXJsID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgPyBhcmd1bWVudHNbNF0gOiB1bmRlZmluZWQ7CiAgICB2YXIgbXlQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZCk7CiAgICBteVBheWxvYWQucGFnZSAtPSAxOwogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoLyIpLmNvbmNhdCh1cmwsICIvIikuY29uY2F0KGFwcGVuZFVybCksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoIiksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9CiAgfSwKICBzZWFyY2hMaXN0SW5jb21lTm90aWZpY2F0aW9uOiBmdW5jdGlvbiBzZWFyY2hMaXN0SW5jb21lTm90aWZpY2F0aW9uKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9pbmNvbWUtbm90aWZpY2F0aW9ucy8iKS5jb25jYXQoYXBwZW5kVXJsKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvaW5jb21lLW5vdGlmaWNhdGlvbnM/a2V5d29yZD0iKS5jb25jYXQobXlQYXlsb2FkLmtleXdvcmQgPyBteVBheWxvYWQua2V5d29yZCA6ICcnLCAiJnN0YXR1c0lkPSIpLmNvbmNhdChteVBheWxvYWQuc3RhdHVzSWQgPyBteVBheWxvYWQuc3RhdHVzSWQgOiAnJywgIiZwbGFjZWREYXRlPSIpLmNvbmNhdChteVBheWxvYWQucGxhY2VkRGF0ZSA/IG15UGF5bG9hZC5wbGFjZWREYXRlIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfQogIH0sCiAgc2VhcmNoTGlzdE91dGdvaW5nTm90aWZpY2F0aW9uOiBmdW5jdGlvbiBzZWFyY2hMaXN0T3V0Z29pbmdOb3RpZmljYXRpb24obWFpblVybCwgcGF5bG9hZCwgYXBwZW5kVXJsKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICB2YXIgbXlQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZCk7CiAgICBteVBheWxvYWQucGFnZSAtPSAxOwogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL291dGdvaW5nLW5vdGlmaWNhdGlvbnMvIikuY29uY2F0KGFwcGVuZFVybCksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL291dGdvaW5nLW5vdGlmaWNhdGlvbnM/a2V5d29yZD0iKS5jb25jYXQobXlQYXlsb2FkLmtleXdvcmQgPyBteVBheWxvYWQua2V5d29yZCA6ICcnLCAiJnN0YXR1c0lkPSIpLmNvbmNhdChteVBheWxvYWQuc3RhdHVzSWQgPyBteVBheWxvYWQuc3RhdHVzSWQgOiAnJywgIiZwbGFjZWREYXRlPSIpLmNvbmNhdChteVBheWxvYWQucGxhY2VkRGF0ZSA/IG15UGF5bG9hZC5wbGFjZWREYXRlIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfQogIH0sCiAgc2VhcmNoTGlzdEluY29tZUFuZE91dGdvaW5nUmVwb3J0czogZnVuY3Rpb24gc2VhcmNoTGlzdEluY29tZUFuZE91dGdvaW5nUmVwb3J0cyhtYWluVXJsLCBwYXlsb2FkLCB1cmwsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaC8iKS5jb25jYXQodXJsLCAiLyIpLmNvbmNhdChhcHBlbmRVcmwpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaC8iKS5jb25jYXQodXJsLCAiP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJywgIiZzdGF0dXNJZD0iKS5jb25jYXQobXlQYXlsb2FkLnN0YXR1c0lkID8gbXlQYXlsb2FkLnN0YXR1c0lkIDogJycsICImY3JlYXRlZERhdGU9IikuY29uY2F0KG15UGF5bG9hZC5jcmVhdGVkRGF0ZSA/IG15UGF5bG9hZC5jcmVhdGVkRGF0ZSA6ICcnKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIHNlYXJjaExpc3RXaXRob3V0UGFnZTogZnVuY3Rpb24gc2VhcmNoTGlzdFdpdGhvdXRQYWdlKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaC8iKS5jb25jYXQoYXBwZW5kVXJsKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2giKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIHNlYXJjaExpc3RXaXRoS2V5d29yZEZvclBldHJvbFN0YXRpb25zOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aEtleXdvcmRGb3JQZXRyb2xTdGF0aW9ucyhtYWluVXJsLCBwYXlsb2FkLCBhcHBlbmRVcmwpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgIHZhciBteVBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKTsKICAgIG15UGF5bG9hZC5wYWdlIC09IDE7CiAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJywgIiZkaXN0cmljdElkcz0iKS5jb25jYXQobXlQYXlsb2FkLmRpc3RyaWN0SWRzID8gbXlQYXlsb2FkLmRpc3RyaWN0SWRzIDogJycsICImY29udHJhY3Rvcklkcz0iKS5jb25jYXQobXlQYXlsb2FkLmNvbnRyYWN0b3JJZHMgPyBteVBheWxvYWQuY29udHJhY3RvcklkcyA6ICcnLCAiJnJlZ2lvbklkPSIpLmNvbmNhdChteVBheWxvYWQucmVnaW9uSWQgPyBteVBheWxvYWQucmVnaW9uSWQgOiAnJyksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgfSwKICBzZWFyY2hMaXN0V2l0aEtleXdvcmRGb3JTdWdhclN0YXRpb25zOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aEtleXdvcmRGb3JTdWdhclN0YXRpb25zKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2g/a2V5d29yZD0iKS5jb25jYXQobXlQYXlsb2FkLmtleXdvcmQgPyBteVBheWxvYWQua2V5d29yZCA6ICcnLCAiJmRpc3RyaWN0SWRzPSIpLmNvbmNhdChteVBheWxvYWQuZGlzdHJpY3RJZHMgPyBteVBheWxvYWQuZGlzdHJpY3RJZHMgOiAnJywgIiZjb250cmFjdG9ySWRzPSIpLmNvbmNhdChteVBheWxvYWQuY29udHJhY3RvcklkcyA/IG15UGF5bG9hZC5jb250cmFjdG9ySWRzIDogJycsICImcmVnaW9uSWQ9IikuY29uY2F0KG15UGF5bG9hZC5yZWdpb25JZCA/IG15UGF5bG9hZC5yZWdpb25JZCA6ICcnKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICB9LAogIHNlYXJjaExpc3RXaXRoS2V5d29yZEZvckJha2VyeVN0YXRpb25zOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aEtleXdvcmRGb3JCYWtlcnlTdGF0aW9ucyhtYWluVXJsLCBwYXlsb2FkLCBhcHBlbmRVcmwpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgIHZhciBteVBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKTsKICAgIG15UGF5bG9hZC5wYWdlIC09IDE7CiAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJywgIiZkaXN0cmljdElkcz0iKS5jb25jYXQobXlQYXlsb2FkLmRpc3RyaWN0SWRzID8gbXlQYXlsb2FkLmRpc3RyaWN0SWRzIDogJycsICImY29udHJhY3Rvcklkcz0iKS5jb25jYXQobXlQYXlsb2FkLmNvbnRyYWN0b3JJZHMgPyBteVBheWxvYWQuY29udHJhY3RvcklkcyA6ICcnLCAiJnJlZ2lvbklkPSIpLmNvbmNhdChteVBheWxvYWQucmVnaW9uSWQgPyBteVBheWxvYWQucmVnaW9uSWQgOiAnJyksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgfSwKICBzZWFyY2hMaXN0V2l0aEtleXdvcmRGb3JGbG91clN0YXRpb25zOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aEtleXdvcmRGb3JGbG91clN0YXRpb25zKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2g/a2V5d29yZD0iKS5jb25jYXQobXlQYXlsb2FkLmtleXdvcmQgPyBteVBheWxvYWQua2V5d29yZCA6ICcnLCAiJmRpc3RyaWN0SWRzPSIpLmNvbmNhdChteVBheWxvYWQuZGlzdHJpY3RJZHMgPyBteVBheWxvYWQuZGlzdHJpY3RJZHMgOiAnJywgIiZjb250cmFjdG9ySWRzPSIpLmNvbmNhdChteVBheWxvYWQuY29udHJhY3RvcklkcyA/IG15UGF5bG9hZC5jb250cmFjdG9ySWRzIDogJycsICImcmVnaW9uSWQ9IikuY29uY2F0KG15UGF5bG9hZC5yZWdpb25JZCA/IG15UGF5bG9hZC5yZWdpb25JZCA6ICcnKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICB9LAogIHNlYXJjaExpc3RXaXRoS2V5d29yZEJ5UmVnaW9uOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aEtleXdvcmRCeVJlZ2lvbihtYWluVXJsLCBwYXlsb2FkLCBhcHBlbmRVcmwpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgIHZhciBteVBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKTsKICAgIG15UGF5bG9hZC5wYWdlIC09IDE7CiAgICBpZiAoYXBwZW5kVXJsKSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2gvIikuY29uY2F0KGFwcGVuZFVybCwgIj9rZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycsICImcmVnaW9uSWQ9IikuY29uY2F0KG15UGF5bG9hZC5yZWdpb25JZCA/IG15UGF5bG9hZC5yZWdpb25JZCA6ICcnKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2g/a2V5d29yZD0iKS5jb25jYXQobXlQYXlsb2FkLmtleXdvcmQgPyBteVBheWxvYWQua2V5d29yZCA6ICcnLCAiJnJlZ2lvbklkPSIpLmNvbmNhdChteVBheWxvYWQucmVnaW9uSWQgPyBteVBheWxvYWQucmVnaW9uSWQgOiAnJyksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9CiAgfSwKICBzZWFyY2hMaXN0V2l0aEtleXdvcmRCeVJlZ2lvbkFuZERpc3RyaWN0OiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aEtleXdvcmRCeVJlZ2lvbkFuZERpc3RyaWN0KG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaC8iKS5jb25jYXQoYXBwZW5kVXJsLCAiP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJyksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJywgIiZyZWdpb25JZD0iKS5jb25jYXQobXlQYXlsb2FkLnJlZ2lvbklkID8gbXlQYXlsb2FkLnJlZ2lvbklkIDogJycsICImZGlzdHJpY3RJZD0iKS5jb25jYXQobXlQYXlsb2FkLmRpc3RyaWN0SWQgPyBteVBheWxvYWQuZGlzdHJpY3RJZCA6ICcnKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIHNlYXJjaExpc3RXaXRoS2V5d29yZEJ5UmVnaW9uQW5kRGlzdHJpY3RBbmRRdWFydGVyOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aEtleXdvcmRCeVJlZ2lvbkFuZERpc3RyaWN0QW5kUXVhcnRlcihtYWluVXJsLCBwYXlsb2FkLCBhcHBlbmRVcmwpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgIHZhciBteVBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKTsKICAgIG15UGF5bG9hZC5wYWdlIC09IDE7CiAgICBpZiAoYXBwZW5kVXJsKSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2gvIikuY29uY2F0KGFwcGVuZFVybCwgIj9rZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaD9rZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycsICImcmVnaW9uSWQ9IikuY29uY2F0KG15UGF5bG9hZC5yZWdpb25JZCA/IG15UGF5bG9hZC5yZWdpb25JZCA6ICcnLCAiJmRpc3RyaWN0SWQ9IikuY29uY2F0KG15UGF5bG9hZC5kaXN0cmljdElkID8gbXlQYXlsb2FkLmRpc3RyaWN0SWQgOiAnJywgIiZxdWFydGVySWQ9IikuY29uY2F0KG15UGF5bG9hZC5xdWFydGVySWQgPyBteVBheWxvYWQucXVhcnRlcklkIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfQogIH0sCiAgc2VhcmNoTGlzdFJlZ2lvblRyZWVXaXRoS2V5d29yZDogZnVuY3Rpb24gc2VhcmNoTGlzdFJlZ2lvblRyZWVXaXRoS2V5d29yZChtYWluVXJsLCBwYXlsb2FkLCBhcHBlbmRVcmwpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgIHZhciBteVBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKTsKICAgIG15UGF5bG9hZC5wYWdlIC09IDE7CiAgICByZXR1cm4gQXBpU2VydmljZS5nZXQoIiIuY29uY2F0KG1haW5VcmwsICIvIikuY29uY2F0KGFwcGVuZFVybCwgIj9rZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogIH0sCiAgc2VhcmNoTGlzdFdpdGhLZXl3b3JkQnlSZWdpb25BbmREaXN0cmljdEFuZENvbnRyYWN0b3I6IGZ1bmN0aW9uIHNlYXJjaExpc3RXaXRoS2V5d29yZEJ5UmVnaW9uQW5kRGlzdHJpY3RBbmRDb250cmFjdG9yKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaC8iKS5jb25jYXQoYXBwZW5kVXJsLCAiP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJywgIiZyZWdpb25JZD0iKS5jb25jYXQobXlQYXlsb2FkLnJlZ2lvbklkID8gbXlQYXlsb2FkLnJlZ2lvbklkIDogJycsICImZGlzdHJpY3RJZHM9IikuY29uY2F0KG15UGF5bG9hZC5kaXN0cmljdElkcyA/IG15UGF5bG9hZC5kaXN0cmljdElkcyA6ICcnLCAiJmNvbnRyYWN0b3JJZHM9IikuY29uY2F0KG15UGF5bG9hZC5jb250cmFjdG9ySWRzID8gbXlQYXlsb2FkLmNvbnRyYWN0b3JJZHMgOiAnJywgIiZkZXNpZ25UeXBlSWRzPSIpLmNvbmNhdChteVBheWxvYWQuZGVzaWduVHlwZUlkcyA/IG15UGF5bG9hZC5kZXNpZ25UeXBlSWRzIDogJycsICImZ2l2ZW5EYXRlPSIpLmNvbmNhdChteVBheWxvYWQuZ2l2ZW5EYXRlID8gbXlQYXlsb2FkLmdpdmVuRGF0ZSA6ICcnLCAiJmV4cGlyZURhdGU9IikuY29uY2F0KG15UGF5bG9hZC5leHBpcmVEYXRlID8gbXlQYXlsb2FkLmV4cGlyZURhdGUgOiAnJywgIiZpc1V6QXZ0b3l1bD0iKS5jb25jYXQobXlQYXlsb2FkLmlzVXpBdnRveXVsID8gbXlQYXlsb2FkLmlzVXpBdnRveXVsIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaD9rZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycsICImcmVnaW9uSWQ9IikuY29uY2F0KG15UGF5bG9hZC5yZWdpb25JZCA/IG15UGF5bG9hZC5yZWdpb25JZCA6ICcnLCAiJmRpc3RyaWN0SWRzPSIpLmNvbmNhdChteVBheWxvYWQuZGlzdHJpY3RJZHMgPyBteVBheWxvYWQuZGlzdHJpY3RJZHMgOiAnJywgIiZjb250cmFjdG9ySWRzPSIpLmNvbmNhdChteVBheWxvYWQuY29udHJhY3RvcklkcyA/IG15UGF5bG9hZC5jb250cmFjdG9ySWRzIDogJycsICImZGVzaWduVHlwZUlkcz0iKS5jb25jYXQobXlQYXlsb2FkLmRlc2lnblR5cGVJZHMgPyBteVBheWxvYWQuZGVzaWduVHlwZUlkcyA6ICcnLCAiJmdpdmVuRGF0ZT0iKS5jb25jYXQobXlQYXlsb2FkLmdpdmVuRGF0ZSA/IG15UGF5bG9hZC5naXZlbkRhdGUgOiAnJywgIiZleHBpcmVEYXRlPSIpLmNvbmNhdChteVBheWxvYWQuZXhwaXJlRGF0ZSA/IG15UGF5bG9hZC5leHBpcmVEYXRlIDogJycsICImaXNVekF2dG95dWw9IikuY29uY2F0KG15UGF5bG9hZC5pc1V6QXZ0b3l1bCA/IG15UGF5bG9hZC5pc1V6QXZ0b3l1bCA6ICcnKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIHNlYXJjaExpc3RXaXRoS2V5d29yZEJ5UmVnaW9uQW5kRGlzdHJpY3RBbmRDb250cmFjdG9yQnlBdnRveXVsOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aEtleXdvcmRCeVJlZ2lvbkFuZERpc3RyaWN0QW5kQ29udHJhY3RvckJ5QXZ0b3l1bChtYWluVXJsLCBwYXlsb2FkLCBhcHBlbmRVcmwpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgIHZhciBteVBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKTsKICAgIG15UGF5bG9hZC5wYWdlIC09IDE7CiAgICBpZiAoYXBwZW5kVXJsKSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2gvIikuY29uY2F0KGFwcGVuZFVybCwgIj9rZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycsICImcmVnaW9uSWQ9IikuY29uY2F0KG15UGF5bG9hZC5yZWdpb25JZCA/IG15UGF5bG9hZC5yZWdpb25JZCA6ICcnLCAiJmRpc3RyaWN0SWRzPSIpLmNvbmNhdChteVBheWxvYWQuZGlzdHJpY3RJZHMgPyBteVBheWxvYWQuZGlzdHJpY3RJZHMgOiAnJywgIiZjb250cmFjdG9ySWRzPSIpLmNvbmNhdChteVBheWxvYWQuY29udHJhY3RvcklkcyA/IG15UGF5bG9hZC5jb250cmFjdG9ySWRzIDogJycsICImZGVzaWduVHlwZUlkcz0iKS5jb25jYXQobXlQYXlsb2FkLmRlc2lnblR5cGVJZHMgPyBteVBheWxvYWQuZGVzaWduVHlwZUlkcyA6ICcnLCAiJmdpdmVuRGF0ZT0iKS5jb25jYXQobXlQYXlsb2FkLmdpdmVuRGF0ZSA/IG15UGF5bG9hZC5naXZlbkRhdGUgOiAnJywgIiZleHBpcmVEYXRlPSIpLmNvbmNhdChteVBheWxvYWQuZXhwaXJlRGF0ZSA/IG15UGF5bG9hZC5leHBpcmVEYXRlIDogJycsICImaXNVekF2dG95dWw9IikuY29uY2F0KCEhbXlQYXlsb2FkLmlzVXpBdnRveXVsKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2g/a2V5d29yZD0iKS5jb25jYXQobXlQYXlsb2FkLmtleXdvcmQgPyBteVBheWxvYWQua2V5d29yZCA6ICcnLCAiJnJlZ2lvbklkPSIpLmNvbmNhdChteVBheWxvYWQucmVnaW9uSWQgPyBteVBheWxvYWQucmVnaW9uSWQgOiAnJywgIiZkaXN0cmljdElkcz0iKS5jb25jYXQobXlQYXlsb2FkLmRpc3RyaWN0SWRzID8gbXlQYXlsb2FkLmRpc3RyaWN0SWRzIDogJycsICImY29udHJhY3Rvcklkcz0iKS5jb25jYXQobXlQYXlsb2FkLmNvbnRyYWN0b3JJZHMgPyBteVBheWxvYWQuY29udHJhY3RvcklkcyA6ICcnLCAiJmRlc2lnblR5cGVJZHM9IikuY29uY2F0KG15UGF5bG9hZC5kZXNpZ25UeXBlSWRzID8gbXlQYXlsb2FkLmRlc2lnblR5cGVJZHMgOiAnJywgIiZnaXZlbkRhdGU9IikuY29uY2F0KG15UGF5bG9hZC5naXZlbkRhdGUgPyBteVBheWxvYWQuZ2l2ZW5EYXRlIDogJycsICImZXhwaXJlRGF0ZT0iKS5jb25jYXQobXlQYXlsb2FkLmV4cGlyZURhdGUgPyBteVBheWxvYWQuZXhwaXJlRGF0ZSA6ICcnLCAiJmlzVXpBdnRveXVsPSIpLmNvbmNhdCghIW15UGF5bG9hZC5pc1V6QXZ0b3l1bCksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9CiAgfSwKICBzZWFyY2hMaXN0QnlDb250cmFjdG9yOiBmdW5jdGlvbiBzZWFyY2hMaXN0QnlDb250cmFjdG9yKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaC8iKS5jb25jYXQoYXBwZW5kVXJsLCAiP2tleXdvcmQ9IikuY29uY2F0KG15UGF5bG9hZC5rZXl3b3JkID8gbXlQYXlsb2FkLmtleXdvcmQgOiAnJywgIiZyZWdpb25JZD0iKS5jb25jYXQobXlQYXlsb2FkLnJlZ2lvbklkID8gbXlQYXlsb2FkLnJlZ2lvbklkIDogJycsICImZGlzdHJpY3RJZHM9IikuY29uY2F0KG15UGF5bG9hZC5kaXN0cmljdElkcyA/IG15UGF5bG9hZC5kaXN0cmljdElkcyA6ICcnLCAiJmRlc2lnblR5cGVJZHM9IikuY29uY2F0KG15UGF5bG9hZC5kZXNpZ25UeXBlSWRzID8gbXlQYXlsb2FkLmRlc2lnblR5cGVJZHMgOiAnJyksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoLWJ5LWNvbnRyYWN0b3JJZD9rZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycsICImcmVnaW9uSWQ9IikuY29uY2F0KG15UGF5bG9hZC5yZWdpb25JZCA/IG15UGF5bG9hZC5yZWdpb25JZCA6ICcnLCAiJmRpc3RyaWN0SWRzPSIpLmNvbmNhdChteVBheWxvYWQuZGlzdHJpY3RJZHMgPyBteVBheWxvYWQuZGlzdHJpY3RJZHMgOiAnJywgIiZjb250cmFjdG9ySWRzPSIpLmNvbmNhdChteVBheWxvYWQuY29udHJhY3RvcklkcyA/IG15UGF5bG9hZC5jb250cmFjdG9ySWRzIDogJycsICImZGVzaWduVHlwZUlkcz0iKS5jb25jYXQobXlQYXlsb2FkLmRlc2lnblR5cGVJZHMgPyBteVBheWxvYWQuZGVzaWduVHlwZUlkcyA6ICcnLCAiJmdpdmVuRGF0ZT0iKS5jb25jYXQobXlQYXlsb2FkLmdpdmVuRGF0ZSA/IG15UGF5bG9hZC5naXZlbkRhdGUgOiAnJywgIiZleHBpcmVEYXRlPSIpLmNvbmNhdChteVBheWxvYWQuZXhwaXJlRGF0ZSA/IG15UGF5bG9hZC5leHBpcmVEYXRlIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfQogIH0sCiAgc2VhcmNoTGlzdE5vdGlmaWNhdGlvbkJ5Q29uc3RydWN0aW9uSWQ6IGZ1bmN0aW9uIHNlYXJjaExpc3ROb3RpZmljYXRpb25CeUNvbnN0cnVjdGlvbklkKG1haW5VcmwsIHBheWxvYWQsIGFwcGVuZFVybCkgewogICAgdmFyIHdpdGhMb2FkZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIG15UGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpOwogICAgbXlQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaC8iKS5jb25jYXQoYXBwZW5kVXJsLCAiP3BsYWNlZERhdGU9IikuY29uY2F0KG15UGF5bG9hZC5wbGFjZWREYXRlID8gbXlQYXlsb2FkLnBsYWNlZERhdGUgOiAnJywgIiZrZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaD9wbGFjZWREYXRlPSIpLmNvbmNhdChteVBheWxvYWQucGxhY2VkRGF0ZSA/IG15UGF5bG9hZC5wbGFjZWREYXRlIDogJycsICIma2V5d29yZD0iKS5jb25jYXQobXlQYXlsb2FkLmtleXdvcmQgPyBteVBheWxvYWQua2V5d29yZCA6ICcnKSwgbXlQYXlsb2FkLCB3aXRoTG9hZGVyKTsKICAgIH0KICB9LAogIHNlYXJjaEJ5S2V5d29yZDogZnVuY3Rpb24gc2VhcmNoQnlLZXl3b3JkKG1haW5VcmwsIGtleXdvcmQsIGFwcGVuZFVybCkgewogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoLyIpLmNvbmNhdChhcHBlbmRVcmwpKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvc2VhcmNoLWJ5LWtleXdvcmQ/a2V5d29yZD0iKS5jb25jYXQoa2V5d29yZCkpOwogICAgfQogIH0sCiAgc2VhcmNoTGlzdFdpdGhvdXRQYWdpbmF0aW9uOiBmdW5jdGlvbiBzZWFyY2hMaXN0V2l0aG91dFBhZ2luYXRpb24obWFpblVybCwgcGF5bG9hZCwgYXBwZW5kVXJsKSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoIikpOwogIH0sCiAgc2VhcmNoQnlEZXBJZDogZnVuY3Rpb24gc2VhcmNoQnlEZXBJZChtYWluVXJsLCBwYXlsb2FkKSB7CiAgICB2YXIgc2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQuZGF0YSk7CiAgICBzZWFyY2hQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2gvYnktZGVwYXJ0bWVudC8iKS5jb25jYXQocGF5bG9hZC5kZXBJZCksIHNlYXJjaFBheWxvYWQpOwogIH0sCiAgc2VhcmNoV2l0aG91dERlcDogZnVuY3Rpb24gc2VhcmNoV2l0aG91dERlcChtYWluVXJsLCBwYXlsb2FkKSB7CiAgICB2YXIgc2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQuZGF0YSk7CiAgICBzZWFyY2hQYXlsb2FkLnBhZ2UgLT0gMTsKICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoIiIuY29uY2F0KG1haW5VcmwsICIvbGlzdC1zZWFyY2gvd2l0aG91dC1kZXBhcnRtZW50IiksIHNlYXJjaFBheWxvYWQpOwogIH0sCiAgY3JlYXRlUGVuZGluZzogZnVuY3Rpb24gY3JlYXRlUGVuZGluZyhtYWluVXJsLCBwYXlsb2FkLCBhcHBlbmRVcmwpIHsKICAgIGlmIChhcHBlbmRVcmwpIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucHV0KCIiLmNvbmNhdChtYWluVXJsLCAiLyIpLmNvbmNhdChhcHBlbmRVcmwpLCBwYXlsb2FkKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnB1dCgiIi5jb25jYXQobWFpblVybCksIHBheWxvYWQpOwogICAgfQogIH0sCiAgcmV0dXJuQWxsRG9jOiBmdW5jdGlvbiByZXR1cm5BbGxEb2MobWFpblVybCwgcGF5bG9hZCwgYXBwZW5kVXJsKSB7CiAgICBpZiAoYXBwZW5kVXJsKSB7CiAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnB1dCgiIi5jb25jYXQobWFpblVybCwgIi8iKS5jb25jYXQoYXBwZW5kVXJsKSwgcGF5bG9hZCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wdXQoIiIuY29uY2F0KG1haW5VcmwpLCBwYXlsb2FkKTsKICAgIH0KICB9LAogIGdldExldHRlcklkOiBmdW5jdGlvbiBnZXRMZXR0ZXJJZChkYXRhKSB7CiAgICByZXR1cm4gQXBpU2VydmljZS5nZXQoImxldHRlci91cGxvYWQ/ZmlsZU5hbWU9Ii5jb25jYXQoZGF0YS5maWxlTmFtZSA/IGRhdGEuZmlsZU5hbWUgOiAnJywgIiZyZWdOdW1iZXI9IikuY29uY2F0KGRhdGEucmVnTnVtYmVyID8gZGF0YS5yZWdOdW1iZXIgOiAnJywgIiZkYXRlPSIpLmNvbmNhdChkYXRhLmRhdGUgPyBkYXRhLmRhdGUgOiAnJywgIiZkb2NUeXBlSWQ9IikuY29uY2F0KGRhdGEuZG9jVHlwZUlkID8gZGF0YS5kb2NUeXBlSWQgOiAnJykpOwogIH0sCiAgcG9zdDogZnVuY3Rpb24gcG9zdCh1cmwsIHBheWxvYWQpIHsKICAgIHZhciB3aXRoTG9hZGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QodXJsLCBwYXlsb2FkLCB3aXRoTG9hZGVyKTsKICB9LAogIHNlYXJjaExpc3RXaXRoS2V5d29yZEFuZFBlcnNvblR5cGU6IGZ1bmN0aW9uIHNlYXJjaExpc3RXaXRoS2V5d29yZEFuZFBlcnNvblR5cGUobWFpblVybCwgcGF5bG9hZCwgYXBwZW5kVXJsKSB7CiAgICB2YXIgd2l0aExvYWRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICB2YXIgbXlQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZCk7CiAgICBteVBheWxvYWQucGFnZSAtPSAxOwogICAgaWYgKGFwcGVuZFVybCkgewogICAgICByZXR1cm4gQXBpU2VydmljZS5wb3N0KCIiLmNvbmNhdChtYWluVXJsLCAiL2xpc3Qtc2VhcmNoLyIpLmNvbmNhdChhcHBlbmRVcmwsICI/a2V5d29yZD0iKS5jb25jYXQobXlQYXlsb2FkLmtleXdvcmQgPyBteVBheWxvYWQua2V5d29yZCA6ICcnLCAiJnBlcnNvblR5cGU9IikuY29uY2F0KG15UGF5bG9hZC5wZXJzb25UeXBlID8gbXlQYXlsb2FkLnBlcnNvblR5cGUgOiAnJywgIiZjYXRlZ29yeUlkPSIpLmNvbmNhdChteVBheWxvYWQuY2F0ZWdvcnlJZCA/IG15UGF5bG9hZC5jYXRlZ29yeUlkIDogJycpLCBteVBheWxvYWQsIHdpdGhMb2FkZXIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucG9zdCgiIi5jb25jYXQobWFpblVybCwgIi9saXN0LXNlYXJjaD9rZXl3b3JkPSIpLmNvbmNhdChteVBheWxvYWQua2V5d29yZCA/IG15UGF5bG9hZC5rZXl3b3JkIDogJycsICImcGVyc29uVHlwZT0iKS5jb25jYXQobXlQYXlsb2FkLnBlcnNvblR5cGUgPyBteVBheWxvYWQucGVyc29uVHlwZSA6ICcnLCAiJmNhdGVnb3J5SWQ9IikuY29uY2F0KG15UGF5bG9hZC5jYXRlZ29yeUlkID8gbXlQYXlsb2FkLmNhdGVnb3J5SWQgOiAnJyksIG15UGF5bG9hZCwgd2l0aExvYWRlcik7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBjcnVkQW5kTGlzdHNTZXJ2aWNlOw=="},null]}