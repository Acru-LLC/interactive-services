{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\products\\flour-stations\\modules\\list_and_crud\\components\\MapInModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\products\\flour-stations\\modules\\list_and_crud\\components\\MapInModal.vue","mtime":1674799497774},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8gaW1wb3J0ICogYXMgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IExNYXAsIExNYXJrZXIsIExUaWxlTGF5ZXIgfSBmcm9tICJ2dWUyLWxlYWZsZXQiOwovLyBpbXBvcnQgeyBkZWxldGVFdmVudCB9IGZyb20gIi4vYXBpIjsKLy8gaW1wb3J0ICJ2dWUtd2VhdGhlci13aWRnZXQvZGlzdC9jc3MvdnVlLXdlYXRoZXItd2lkZ2V0LmNzcyI7Ci8vIGltcG9ydCBWdWVXZWF0aGVyV2lkZ2V0IGZyb20gInZ1ZS13ZWF0aGVyLXdpZGdldCI7Ci8vIGRlZmluZSBjdXN0b20gbWFya2VyCmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnOwppbXBvcnQgKiBhcyBlc3JpX2dlbyBmcm9tICdlc3JpLWxlYWZsZXQtZ2VvY29kZXInOwppbXBvcnQgVnVlMkxlYWZsZXRMb2NhdGVjb250cm9sIGZyb20gJ3Z1ZTItbGVhZmxldC1sb2NhdGVjb250cm9sJzsKLy8gaW1wb3J0IExEcmF3IGZyb20gJ2xlYWZsZXQtZHJhdyc7Ci8vIEltcG9ydCBsZWFmbGV0IGRyYXcgY3NzIGFuZCBpY29ucyBmb3IgZHJhdyB0b29sYmFyCi8vIGltcG9ydCAnbGVhZmxldC1kcmF3L2Rpc3QvbGVhZmxldC5kcmF3LmNzcyc7CnZhciBNeUN1c3RvbU1hcmtlciA9IEwuSWNvbi5leHRlbmQoewogIG9wdGlvbnM6IHsKICAgIHNoYWRvd1VybDogbnVsbCwKICAgIGljb25BbmNob3I6IG5ldyBMLlBvaW50KDEyLCAxMiksCiAgICBpY29uU2l6ZTogbmV3IEwuUG9pbnQoMjQsIDMwKSwKICAgIGljb25Vcmw6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltYWdlcy9tYXAtbWFya2VyLnBuZycpCiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjZW50ZXI6IEwubGF0TG5nKDQxLjM4MTE2NiwgNjQuNTczNTgxOSksCiAgICAgIG1hcmtlcjogbnVsbCwKICAgICAgbGF0OiBudWxsLAogICAgICBsbmc6IG51bGwsCiAgICAgIHVybDogImh0dHA6Ly97c30udGlsZS5vc20ub3JnL3t6fS97eH0ve3l9LnBuZyIsCiAgICAgIGF0dHJpYnV0aW9uOiAnJmNvcHk7IDxhIGhyZWY9Imh0dHA6Ly9vc20ub3JnL2NvcHlyaWdodCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJwogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICB2aXNpYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0sCiAgICBldmVudDogewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRNYXJrZXI6IGZ1bmN0aW9uIGFkZE1hcmtlcihlKSB7CiAgICAgIGlmICh0aGlzLm1hcmtlcikgewogICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubWFya2VyKTsKICAgICAgfQogICAgICB0aGlzLmxhdCA9IGUubGF0bG5nLmxhdDsKICAgICAgdGhpcy5sbmcgPSBlLmxhdGxuZy5sbmc7CiAgICAgIHRoaXMubWFya2VyID0gbmV3IEwuTWFya2VyKGUubGF0bG5nLCB7CiAgICAgICAgaWNvbjogbmV3IE15Q3VzdG9tTWFya2VyKCkKICAgICAgfSkuYWRkVG8odGhpcy5tYXApOwogICAgfSwKICAgIGRyYXdDcmVhdGVkOiBmdW5jdGlvbiBkcmF3Q3JlYXRlZChlKSB7CiAgICAgIHZhciB0eXBlID0gZS5sYXllclR5cGUsCiAgICAgICAgbGF5ZXIgPSBlLmxheWVyOwogICAgICBpZiAodHlwZSA9PT0gJ21hcmtlcicpIHsKICAgICAgICAvLyBsYXllci5iaW5kUG9wdXAoJ0EgcG9wdXAhJyk7CiAgICAgICAgdGhpcy5sYXQgPSBlLmxheWVyLl9sYXRsbmcubGF0OwogICAgICAgIHRoaXMubG5nID0gZS5sYXllci5fbGF0bG5nLmxuZzsKICAgICAgICB0aGlzLmZlYXR1cmVHcm91cC5hZGRMYXllcihsYXllcik7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlTG9jYXRpb246IGZ1bmN0aW9uIHNhdmVMb2NhdGlvbihlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKHRoaXMubWFya2VyICYmIHRoaXMubGF0ICYmIHRoaXMubG5nKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnc2F2ZUxvY2F0aW9uJywgewogICAgICAgICAgbGF0OiB0aGlzLmxhdCwKICAgICAgICAgIGxuZzogdGhpcy5sbmcKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZUV2ZW50TG9jYWw6IGZ1bmN0aW9uIGRlbGV0ZUV2ZW50TG9jYWwoaWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAvLyBhd2FpdCBkZWxldGVFdmVudChpZCk7CiAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoInJlZnJlc2giKTsKICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgiY2xlYXIiKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG1vZGFsU2hvd246IGZ1bmN0aW9uIG1vZGFsU2hvd24oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJHJlZnMubXltYXAubWFwT2JqZWN0LmludmFsaWRhdGVTaXplKCk7CiAgICAgICAgX3RoaXMyLm1hcCA9IF90aGlzMi4kcmVmcy5teW1hcC5tYXBPYmplY3Q7CiAgICAgICAgaWYgKF90aGlzMi5tYXJrZXIpIHsKICAgICAgICAgIF90aGlzMi5tYXAucmVtb3ZlTGF5ZXIoX3RoaXMyLm1hcmtlcik7CiAgICAgICAgfQogICAgICAgIGlmIChfdGhpczIuZXZlbnQubGF0ICYmIF90aGlzMi5ldmVudC5sbmcpIHsKICAgICAgICAgIF90aGlzMi5sYXQgPSBfdGhpczIuZXZlbnQubGF0OwogICAgICAgICAgX3RoaXMyLmxuZyA9IF90aGlzMi5ldmVudC5sbmc7CiAgICAgICAgICBfdGhpczIubWFya2VyID0gbmV3IEwuTWFya2VyKF90aGlzMi5ldmVudCwgewogICAgICAgICAgICBpY29uOiBuZXcgTXlDdXN0b21NYXJrZXIoKQogICAgICAgICAgfSkuYWRkVG8oX3RoaXMyLm1hcCk7CiAgICAgICAgICBfdGhpczIubWFwLnNldFZpZXcoX3RoaXMyLmV2ZW50LCAxNyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi5sYXQgPSBudWxsOwogICAgICAgICAgX3RoaXMyLmxuZyA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHZhciBzZWFyY2hDb250cm9sID0gbmV3IGVzcmlfZ2VvLmdlb3NlYXJjaCh7CiAgICAgICAgICBwcm92aWRlcnM6IFtlc3JpX2dlby5hcmNnaXNPbmxpbmVQcm92aWRlcih7CiAgICAgICAgICAgIC8vIEFQSSBLZXkgdG8gYmUgcGFzc2VkIHRvIHRoZSBBcmNHSVMgT25saW5lIEdlb2NvZGluZyBTZXJ2aWNlCiAgICAgICAgICAgIGFwaWtleTogJ0FBUEs5YWNmMzc4NjBhOTI0MDM3YjE1MTMyZTQ5MGRkYzIwZU9MSng3WEIxZU1DU3BDejlHSHNZRExlaWJiVkkwRnp6aDMxaDFOOWJfY043T0lBWXJ5THpCeGtKNU5Cd0kwM2wnCiAgICAgICAgICB9KV0sCiAgICAgICAgICB1c2VNYXBCb3VuZHM6IGZhbHNlLAogICAgICAgICAgcGxhY2Vob2xkZXI6IF90aGlzMi4kdCgnY29sdW1uLnNlYXJjaCcpCiAgICAgICAgfSkuYWRkVG8oX3RoaXMyLm1hcCk7CgogICAgICAgIC8vIHZhciByZXN1bHRzID0gbmV3IEwuTGF5ZXJHcm91cCgpLmFkZFRvKHRoaXMubWFwKTsKICAgICAgICB2YXIgdm0gPSBfdGhpczI7CiAgICAgICAgc2VhcmNoQ29udHJvbC5vbigncmVzdWx0cycsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAvLyByZXN1bHRzLmNsZWFyTGF5ZXJzKCk7CiAgICAgICAgICAvKiBmb3IgKHZhciBpID0gZGF0YS5yZXN1bHRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICAgICAgICAgIHJlc3VsdHMuYWRkTGF5ZXIoTC5tYXJrZXIoZGF0YS5yZXN1bHRzW2ldLmxhdGxuZykpOw0KICAgICAgICAgIH0gKi8KICAgICAgICAgIGlmIChkYXRhLnJlc3VsdHNbMF0pIHZtLmFkZE1hcmtlcihkYXRhLnJlc3VsdHNbMF0pOwogICAgICAgIH0pOwogICAgICB9LCAxMDApOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgTE1hcDogTE1hcCwKICAgIExUaWxlTGF5ZXI6IExUaWxlTGF5ZXIsCiAgICAndi1sb2NhdGVjb250cm9sJzogVnVlMkxlYWZsZXRMb2NhdGVjb250cm9sCiAgfQp9Ow=="},{"version":3,"mappings":";;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA;IACAC;IACAC;IACAC;IACAC;EACA;AACA;AACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,aACA;IACA;EACA;EACAC;IACAC;MACAC;IACA;IACAC;MACAC;MACAF;IACA;EACA;EACAG;IACAC;MACA;QACA;MACA;MACA;MACA;MACA;QAAAC;MAAA;IACA;IACAC;MACA;QACAC;MAEA;QACA;QACA;QACA;QACA;MACA;IAEA;IACAC;MACAC;MAEA;QACA;UAAAf;UAAAC;QAAA;MACA;IACA;IACAe;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MACAC;QACA;QACA;QACA;UACA;QACA;QACA;UACA;UACA;UACA;YAAAP;UAAA;UACA;QACA;UACA;UACA;QACA;QACA;UACAQ,YACAC;YACA;YACAC;UACA,GACA;UACAC;UACAC;QACA;;QAEA;QACA;QACAC;UACA;UACA;AACA;AACA;UACA,qBACAC;QACA;MACA;IACA;EACA;EACAC;IACAC;IACAC;IACA;EACA;AACA","names":["options","shadowUrl","iconAnchor","iconSize","iconUrl","data","center","marker","lat","lng","url","attribution","props","visible","type","event","required","methods","addMarker","icon","drawCreated","layer","saveLocation","e","deleteEventLocal","modalShown","setTimeout","providers","esri_geo","apikey","useMapBounds","placeholder","searchControl","vm","components","LMap","LTileLayer"],"sourceRoot":"src/modules/products/petrol-stations/modules/list_and_crud/components","sources":["MapInModal.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <b-modal\r\n            size=\"xl\"\r\n            :visible=\"visible\"\r\n            @hidden=\"$emit('clear')\"\r\n            :title=\"$t('column.map')\"\r\n            @shown=\"modalShown\"\r\n            title-class=\"font-18\"\r\n            :ok-title=\"$t('actions.save')\"\r\n            @ok=\"saveLocation\"\r\n            @cancel=\"$emit('close')\"\r\n            ok-variant=\"success\"\r\n            :cancel-title=\"$t('actions.cancel')\"\r\n            cancel-variant=\"danger\"\r\n            no-close-on-backdrop\r\n            no-close-on-esc\r\n            hide-header-close\r\n        >\r\n            <b-container class=\"text-left\">\r\n                <!-- MAP WRAPPER -->\r\n                <div class=\"map-wrapper\">\r\n                    <l-map\r\n                        :center=\"center\"\r\n                        :zoom=\"6\"\r\n                        ref=\"mymap\"\r\n                        @click=\"addMarker\"\r\n                    >\r\n                        <l-tile-layer\r\n                            :url=\"url\"\r\n                            :attribution=\"attribution\"\r\n                        ></l-tile-layer>\r\n                        <v-locatecontrol />\r\n                        <!-- <l-marker :lat-lng=\"center\"></l-marker> -->\r\n                    </l-map>\r\n                </div>\r\n            </b-container>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// import * as moment from \"moment\";\r\nimport { LMap, LMarker, LTileLayer } from \"vue2-leaflet\";\r\n// import { deleteEvent } from \"./api\";\r\n// import \"vue-weather-widget/dist/css/vue-weather-widget.css\";\r\n// import VueWeatherWidget from \"vue-weather-widget\";\r\n// define custom marker\r\nimport L from 'leaflet'\r\nimport * as esri_geo from 'esri-leaflet-geocoder';\r\nimport Vue2LeafletLocatecontrol from 'vue2-leaflet-locatecontrol'\r\n// import LDraw from 'leaflet-draw';\r\n// Import leaflet draw css and icons for draw toolbar\r\n// import 'leaflet-draw/dist/leaflet.draw.css';\r\nvar MyCustomMarker = L.Icon.extend({\r\n    options: {\r\n        shadowUrl: null,\r\n        iconAnchor: new L.Point(12, 12),\r\n        iconSize: new L.Point(24, 30),\r\n        iconUrl: require('@/assets/images/map-marker.png')\r\n    }\r\n});\r\nexport default {\r\n    data () {\r\n        return {\r\n            center: L.latLng(41.381166, 64.5735819),\r\n            marker: null,\r\n            lat: null,\r\n            lng: null,\r\n            url: \"http://{s}.tile.osm.org/{z}/{x}/{y}.png\",\r\n            attribution:\r\n                '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n        };\r\n    },\r\n    props: {\r\n        visible: {\r\n            type: Boolean\r\n        },\r\n        event: {\r\n            required: true,\r\n            type: Object\r\n        }\r\n    },\r\n    methods: {\r\n        addMarker (e) {\r\n            if (this.marker) {\r\n                this.map.removeLayer(this.marker);\r\n            }\r\n            this.lat = e.latlng.lat\r\n            this.lng = e.latlng.lng\r\n            this.marker = new L.Marker(e.latlng, { icon: new MyCustomMarker() }).addTo(this.map);\r\n        },\r\n        drawCreated (e) {\r\n            var type = e.layerType,\r\n                layer = e.layer;\r\n\r\n            if (type === 'marker') {\r\n                // layer.bindPopup('A popup!');\r\n                this.lat = e.layer._latlng.lat\r\n                this.lng = e.layer._latlng.lng\r\n                this.featureGroup.addLayer(layer);\r\n            }\r\n\r\n        },\r\n        saveLocation (e) {\r\n            e.preventDefault();\r\n\r\n            if (this.marker && this.lat && this.lng) {\r\n                this.$emit('saveLocation', { lat: this.lat, lng: this.lng })\r\n            }\r\n        },\r\n        async deleteEventLocal (id) {\r\n            // await deleteEvent(id);\r\n            this.$emit(\"refresh\");\r\n            this.$emit(\"clear\");\r\n        },\r\n        modalShown () {\r\n            setTimeout(() => {\r\n                this.$refs.mymap.mapObject.invalidateSize();\r\n                this.map = this.$refs.mymap.mapObject;\r\n                if (this.marker) {\r\n                    this.map.removeLayer(this.marker);\r\n                }\r\n                if (this.event.lat && this.event.lng) {\r\n                    this.lat = this.event.lat\r\n                    this.lng = this.event.lng\r\n                    this.marker = new L.Marker(this.event, { icon: new MyCustomMarker() }).addTo(this.map);\r\n                    this.map.setView(this.event, 17);\r\n                } else {\r\n                    this.lat = null\r\n                    this.lng = null\r\n                }\r\n                var searchControl = new esri_geo.geosearch({\r\n                    providers: [\r\n                        esri_geo.arcgisOnlineProvider({\r\n                            // API Key to be passed to the ArcGIS Online Geocoding Service\r\n                            apikey: 'AAPK9acf37860a924037b15132e490ddc20eOLJx7XB1eMCSpCz9GHsYDLeibbVI0Fzzh31h1N9b_cN7OIAYryLzBxkJ5NBwI03l'\r\n                        })\r\n                    ],\r\n                    useMapBounds: false,\r\n                    placeholder: this.$t('column.search')\r\n                }).addTo(this.map);\r\n\r\n                // var results = new L.LayerGroup().addTo(this.map);\r\n                let vm = this\r\n                searchControl.on('results', function (data) {\r\n                    // results.clearLayers();\r\n                    /* for (var i = data.results.length - 1; i >= 0; i--) {\r\n                        results.addLayer(L.marker(data.results[i].latlng));\r\n                    } */\r\n                    if (data.results[0])\r\n                        vm.addMarker(data.results[0])\r\n                });\r\n            }, 100);\r\n        }\r\n    },\r\n    components: {\r\n        LMap,\r\n        LTileLayer,\r\n        'v-locatecontrol': Vue2LeafletLocatecontrol\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep.map-wrapper {\r\n    width: 100%;\r\n    height: 600px;\r\n    #mapSearchContainer {\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 40px;\r\n        height: 30px;\r\n        width: 180px;\r\n        z-index: 110;\r\n        font-size: 10pt;\r\n        color: #5d5d5d;\r\n        border: solid 1px #bbb;\r\n        background-color: #f8f8f8;\r\n    }\r\n}\r\n</style>"]}]}