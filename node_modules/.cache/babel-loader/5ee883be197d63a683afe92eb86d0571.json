{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\store\\auth.module.js","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\store\\auth.module.js","mtime":1681702105765},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1667355397815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IEF1dGhTZXJ2aWNlLCBBdXRoZW50aWNhdGlvbkVycm9yIH0gZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvYXV0aC5zZXJ2aWNlIjsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CnZhciBzdGF0ZSA9IHsKICBhdXRoZW50aWNhdGluZzogZmFsc2UsCiAgYWNjZXNzVG9rZW46ICcnLAogIGF1dGhlbnRpY2F0aW9uRXJyb3JDb2RlOiAwLAogIGF1dGhlbnRpY2F0aW9uRXJyb3I6ICcnLAogIHJlZnJlc2hUb2tlblByb21pc2U6IG51bGwsCiAgLy8gSG9sZHMgdGhlIHByb21pc2Ugb2YgdGhlIHJlZnJlc2ggdG9rZW4KICBVc2VySW5mbzoge30KfTsKdmFyIGdldHRlcnMgPSB7CiAgYXV0aGVudGljYXRpb25FcnJvckNvZGU6IGZ1bmN0aW9uIGF1dGhlbnRpY2F0aW9uRXJyb3JDb2RlKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuYXV0aGVudGljYXRpb25FcnJvckNvZGU7CiAgfSwKICBhdXRoZW50aWNhdGlvbkVycm9yOiBmdW5jdGlvbiBhdXRoZW50aWNhdGlvbkVycm9yKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuYXV0aGVudGljYXRpb25FcnJvcjsKICB9LAogIGF1dGhlbnRpY2F0aW5nOiBmdW5jdGlvbiBhdXRoZW50aWNhdGluZyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmF1dGhlbnRpY2F0aW5nOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIF9yZWYyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCBVc2VybmFtZSwgUGFzc3dvcmQsIF9kYXRhOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgVXNlcm5hbWUgPSBfcmVmMi5Vc2VybmFtZSwgUGFzc3dvcmQgPSBfcmVmMi5QYXNzd29yZDsKICAgICAgICAgICAgY29tbWl0KCdsb2dpblJlcXVlc3QnKTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICByZXR1cm4gQXV0aFNlcnZpY2UubG9naW4oVXNlcm5hbWUsIFBhc3N3b3JkKTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgX2RhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBjb21taXQoJ2xvZ2luU3VjY2VzcycsIF9kYXRhKTsKICAgICAgICAgICAgY29tbWl0KCdST09UX0xPR0lOX1NVQ0NFU1MnLCBfZGF0YSwgewogICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIFJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoZSBwYWdlIGhlIGZpcnN0IHRyaWVkIHRvIHZpc2l0IG9yIHRvIHRoZSBob21lIHZpZXcKICAgICAgICAgICAgLy8gYXdhaXQgcm91dGVyLnB1c2gocm91dGVyLmhpc3RvcnkuY3VycmVudC5xdWVyeS5yZWRpcmVjdCB8fCAnLycpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgIHJldHVybiByb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdHJ1ZSk7CiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTQ7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgIGlmIChfY29udGV4dC50MCBpbnN0YW5jZW9mIEF1dGhlbnRpY2F0aW9uRXJyb3IpIHsKICAgICAgICAgICAgICBjb21taXQoJ2xvZ2luRXJyb3InLCB7CiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IF9jb250ZXh0LnQwLmVycm9yQ29kZSwKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogX2NvbnRleHQudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxNF1dKTsKICAgIH0pKSgpOwogIH0sCiAgbG9naW5CeVRva2VuOiBmdW5jdGlvbiBsb2dpbkJ5VG9rZW4oX3JlZjMsIF9yZWY0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdCwgc2lnbmVkRGF0YSwgVElOLCBQTkZMLCBJTk4sIF9kYXRhMjsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgICAgICAgc2lnbmVkRGF0YSA9IF9yZWY0LnNpZ25lZERhdGEsIFRJTiA9IF9yZWY0LlRJTiwgUE5GTCA9IF9yZWY0LlBORkwsIElOTiA9IF9yZWY0LklOTjsKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5sb2dpbkVzcChzaWduZWREYXRhLCBUSU4sIFBORkwsIElOTik7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIF9kYXRhMiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICBjb21taXQoJ2xvZ2luU3VjY2VzcycsIF9kYXRhMik7CiAgICAgICAgICAgIGNvbW1pdCgnUk9PVF9MT0dJTl9TVUNDRVNTJywgX2RhdGEyLCB7CiAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIFJlZGlyZWN0IHRoZSB1c2VyIHRvIHRoZSBwYWdlIGhlIGZpcnN0IHRyaWVkIHRvIHZpc2l0IG9yIHRvIHRoZSBob21lIHZpZXcKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5wdXNoKHJvdXRlci5oaXN0b3J5LmN1cnJlbnQucXVlcnkucmVkaXJlY3QgPyByb3V0ZXIuaGlzdG9yeS5jdXJyZW50LnF1ZXJ5LnJlZGlyZWN0IDogJy8nKTsKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTM7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyKTsKICAgICAgICAgICAgaWYgKF9jb250ZXh0Mi50MCBpbnN0YW5jZW9mIEF1dGhlbnRpY2F0aW9uRXJyb3IpIHsKICAgICAgICAgICAgICBjb21taXQoJ2xvZ2luRXJyb3InLCB7CiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IF9jb250ZXh0Mi50MC5lcnJvckNvZGUsCiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IF9jb250ZXh0Mi50MC5tZXNzYWdlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzIsIDEzXV0pOwogICAgfSkpKCk7CiAgfSwKICByZWZyZXNoVG9rZW46IGZ1bmN0aW9uIHJlZnJlc2hUb2tlbihfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmNS5zdGF0ZTsKICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgdGhlIHJlZnJlc2hUb2tlbiBoYXMgYmVlbiBjYWxsZWQsIG1ha2UgYSByZXF1ZXN0CiAgICAvLyBvdGhlcndpc2UgcmV0dXJuIHRoZSBzYW1lIHByb21pc2UgdG8gdGhlIGNhbGxlcgogICAgaWYgKCFzdGF0ZS5yZWZyZXNoVG9rZW5Qcm9taXNlKSB7CiAgICAgIHZhciBwID0gQXV0aFNlcnZpY2UucmVmcmVzaFRva2VuKCk7CiAgICAgIGNvbW1pdCgncmVmcmVzaFRva2VuUHJvbWlzZScsIHApOwoKICAgICAgLy8gV2FpdCBmb3IgdGhlIEF1dGhTZXJ2aWNlLnJlZnJlc2hUb2tlbigpIHRvIHJlc29sdmUuIE9uIHN1Y2Nlc3Mgc2V0IHRoZSB0b2tlbiBhbmQgY2xlYXIgcHJvbWlzZQogICAgICAvLyBDbGVhciB0aGUgcHJvbWlzZSBvbiBlcnJvciBhcyB3ZWxsLgogICAgICBwLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29tbWl0KCdyZWZyZXNoVG9rZW5Qcm9taXNlJywgbnVsbCk7CiAgICAgICAgY29tbWl0KCdsb2dpblN1Y2Nlc3MnLCByZXNwb25zZSk7CiAgICAgICAgY29tbWl0KCdST09UX0xPR0lOX1NVQ0NFU1MnLCBkYXRhLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoJ3JlZnJlc2hUb2tlblByb21pc2UnLCBudWxsKTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gc3RhdGUucmVmcmVzaFRva2VuUHJvbWlzZTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWY2KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0OwogICAgQXV0aFNlcnZpY2UubG9nb3V0KCk7CiAgICBjb21taXQoJ2xvZ291dFN1Y2Nlc3MnKTsKICAgIGNvbW1pdCgnUk9PVF9MT0dPVVRfU1VDQ0VTUycsIG51bGwsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgICAvLyByb3V0ZXIucHVzaCgnYXV0aGVudGljYXRpb24vZnVsbGxvZ2luJykKICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgbG9naW5SZXF1ZXN0OiBmdW5jdGlvbiBsb2dpblJlcXVlc3Qoc3RhdGUpIHsKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW5nID0gdHJ1ZTsKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW9uRXJyb3IgPSAnJzsKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW9uRXJyb3JDb2RlID0gMDsKICB9LAogIHNldFVzZXJJbmZvOiBmdW5jdGlvbiBzZXRVc2VySW5mbyhzdGF0ZSwgZGF0YSkgewogICAgc3RhdGUuVXNlckluZm8gPSBkYXRhOwogIH0sCiAgbG9naW5TdWNjZXNzOiBmdW5jdGlvbiBsb2dpblN1Y2Nlc3Moc3RhdGUsIGRhdGEpIHsKICAgIC8qbGV0IGZvcm1hdHRlZFJ1bGVzID0gW107DQogICAgaWYgKGRhdGEucGVybWlzc2lvbnMubGVuZ3RoID4gMCkgew0KICAgICAgICBmb3JtYXR0ZWRSdWxlcyA9IGRhdGEucGVybWlzc2lvbnMubWFwKHBlcm0gPT4gew0KICAgICAgICAgICAgbGV0IGZvcm1hdHRlZE9iaiA9IHt9Ow0KICAgICAgICAgICAgZm9ybWF0dGVkT2JqLmFjdGlvbnMgPSBwZXJtLnN1YnN0cigwLCBwZXJtLmluZGV4T2YoJyAnKSk7DQogICAgICAgICAgICBmb3JtYXR0ZWRPYmouc3ViamVjdCA9IHBlcm0uc3Vic3RyKHBlcm0uaW5kZXhPZignICcpICsgMSk7DQogICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkT2JqOw0KICAgICAgICB9KQ0KICAgIH0qLwogICAgLy8gc3RhdGUucnVsZXMgPSBmb3JtYXR0ZWRSdWxlczsKICAgIHN0YXRlLmFjY2Vzc1Rva2VuID0gZGF0YS50b2tlbjsKICAgIC8vIHN0YXRlLnRva2VuID0gZGF0YS50b2tlbjsKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW5nID0gZmFsc2U7CiAgfSwKICBsb2dpbkVycm9yOiBmdW5jdGlvbiBsb2dpbkVycm9yKHN0YXRlLCBfcmVmNykgewogICAgdmFyIGVycm9yQ29kZSA9IF9yZWY3LmVycm9yQ29kZSwKICAgICAgZXJyb3JNZXNzYWdlID0gX3JlZjcuZXJyb3JNZXNzYWdlOwogICAgc3RhdGUuYXV0aGVudGljYXRpbmcgPSBmYWxzZTsKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW9uRXJyb3JDb2RlID0gZXJyb3JDb2RlOwogICAgc3RhdGUuYXV0aGVudGljYXRpb25FcnJvciA9IGVycm9yTWVzc2FnZTsKICB9LAogIGxvZ291dFN1Y2Nlc3M6IGZ1bmN0aW9uIGxvZ291dFN1Y2Nlc3Moc3RhdGUpIHsKICAgIHN0YXRlLmFjY2Vzc1Rva2VuID0gJyc7CiAgICBzdGF0ZS5Vc2VySW5mbyA9IHt9OwogICAgLy8gc3RhdGUucnVsZXMgPSBbXTsKICB9LAogIHJlZnJlc2hUb2tlblByb21pc2U6IGZ1bmN0aW9uIHJlZnJlc2hUb2tlblByb21pc2Uoc3RhdGUsIHByb21pc2UpIHsKICAgIHN0YXRlLnJlZnJlc2hUb2tlblByb21pc2UgPSBwcm9taXNlOwogIH0KfTsKZXhwb3J0IHZhciBhdXRoID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"names":["AuthService","AuthenticationError","router","state","authenticating","accessToken","authenticationErrorCode","authenticationError","refreshTokenPromise","UserInfo","getters","actions","login","commit","Username","Password","data","root","push","errorCode","errorMessage","message","loginByToken","signedData","TIN","PNFL","INN","loginEsp","history","current","query","redirect","refreshToken","p","then","response","logout","window","location","reload","mutations","loginRequest","setUserInfo","loginSuccess","token","loginError","logoutSuccess","promise","auth","namespaced"],"sources":["C:/ACRU PROJECT/Fair Tech/acru-frontend/src/shared/store/auth.module.js"],"sourcesContent":["import {AuthService, AuthenticationError} from \"@/shared/services/auth.service\"\r\nimport router from '@/router'\r\n\r\n\r\nconst state = {\r\n    authenticating: false,\r\n    accessToken: '',\r\n    authenticationErrorCode: 0,\r\n    authenticationError: '',\r\n    refreshTokenPromise: null, // Holds the promise of the refresh token\r\n    UserInfo: {}\r\n};\r\n\r\nconst getters = {\r\n    authenticationErrorCode: (state) => {\r\n        return state.authenticationErrorCode\r\n    },\r\n\r\n    authenticationError: (state) => {\r\n        return state.authenticationError\r\n    },\r\n\r\n    authenticating: (state) => {\r\n        return state.authenticating\r\n    }\r\n};\r\n\r\nconst actions = {\r\n    async login({commit}, {Username, Password}) {\r\n        commit('loginRequest');\r\n        try {\r\n            const data = await AuthService.login(Username, Password);\r\n            commit('loginSuccess', data);\r\n            commit('ROOT_LOGIN_SUCCESS', data, {root: true});\r\n            // Redirect the user to the page he first tried to visit or to the home view\r\n            // await router.push(router.history.current.query.redirect || '/');\r\n            await router.push('/');\r\n            return true\r\n        } catch (e) {\r\n            if (e instanceof AuthenticationError) {\r\n                commit('loginError', {errorCode: e.errorCode, errorMessage: e.message})\r\n            }\r\n            return false\r\n        }\r\n    },\r\n    async loginByToken({commit}, {signedData, TIN, PNFL, INN}) {\r\n        try {\r\n            const data = await AuthService.loginEsp(signedData, TIN, PNFL, INN);\r\n            commit('loginSuccess', data);\r\n            commit('ROOT_LOGIN_SUCCESS', data, {root: true});\r\n\r\n            // Redirect the user to the page he first tried to visit or to the home view\r\n            await router.push(router.history.current.query.redirect ? router.history.current.query.redirect : '/');\r\n\r\n            return true\r\n        } catch (e) {\r\n            if (e instanceof AuthenticationError) {\r\n                commit('loginError', {errorCode: e.errorCode, errorMessage: e.message})\r\n            }\r\n\r\n            return false\r\n        }\r\n    },\r\n\r\n    refreshToken({commit, state}) {\r\n        // If this is the first time the refreshToken has been called, make a request\r\n        // otherwise return the same promise to the caller\r\n        if (!state.refreshTokenPromise) {\r\n            const p = AuthService.refreshToken()\r\n            commit('refreshTokenPromise', p)\r\n\r\n            // Wait for the AuthService.refreshToken() to resolve. On success set the token and clear promise\r\n            // Clear the promise on error as well.\r\n            p.then(\r\n                response => {\r\n                    commit('refreshTokenPromise', null)\r\n                    commit('loginSuccess', response)\r\n                    commit('ROOT_LOGIN_SUCCESS', data, {root: true});\r\n                },\r\n                () => {\r\n                    commit('refreshTokenPromise', null)\r\n                }\r\n            )\r\n        }\r\n\r\n        return state.refreshTokenPromise\r\n    },\r\n\r\n    logout({commit}) {\r\n        AuthService.logout()\r\n        commit('logoutSuccess')\r\n        commit('ROOT_LOGOUT_SUCCESS', null, {root: true});\r\n        // router.push('authentication/fulllogin')\r\n        window.location.reload()\r\n    }\r\n}\r\n\r\nconst mutations = {\r\n    loginRequest(state) {\r\n        state.authenticating = true;\r\n        state.authenticationError = ''\r\n        state.authenticationErrorCode = 0\r\n    },\r\n    setUserInfo(state, data) {\r\n        state.UserInfo = data;\r\n    },\r\n\r\n    loginSuccess(state, data) {\r\n        /*let formattedRules = [];\r\n        if (data.permissions.length > 0) {\r\n            formattedRules = data.permissions.map(perm => {\r\n                let formattedObj = {};\r\n                formattedObj.actions = perm.substr(0, perm.indexOf(' '));\r\n                formattedObj.subject = perm.substr(perm.indexOf(' ') + 1);\r\n                return formattedObj;\r\n            })\r\n        }*/\r\n        // state.rules = formattedRules;\r\n        state.accessToken = data.token;\r\n        // state.token = data.token;\r\n        state.authenticating = false;\r\n    },\r\n\r\n    loginError(state, {errorCode, errorMessage}) {\r\n        state.authenticating = false\r\n        state.authenticationErrorCode = errorCode\r\n        state.authenticationError = errorMessage\r\n    },\r\n\r\n    logoutSuccess(state) {\r\n        state.accessToken = '';\r\n        state.UserInfo = {}\r\n        // state.rules = [];\r\n    },\r\n\r\n    refreshTokenPromise(state, promise) {\r\n        state.refreshTokenPromise = promise\r\n    }\r\n}\r\n\r\nexport const auth = {\r\n    namespaced: true,\r\n    state,\r\n    getters,\r\n    actions,\r\n    mutations\r\n}\r\n"],"mappings":";;;AAAA,SAAQA,WAAW,EAAEC,mBAAmB,QAAO,gCAAgC;AAC/E,OAAOC,MAAM,MAAM,UAAU;AAG7B,IAAMC,KAAK,GAAG;EACVC,cAAc,EAAE,KAAK;EACrBC,WAAW,EAAE,EAAE;EACfC,uBAAuB,EAAE,CAAC;EAC1BC,mBAAmB,EAAE,EAAE;EACvBC,mBAAmB,EAAE,IAAI;EAAE;EAC3BC,QAAQ,EAAE,CAAC;AACf,CAAC;AAED,IAAMC,OAAO,GAAG;EACZJ,uBAAuB,EAAE,iCAACH,KAAK,EAAK;IAChC,OAAOA,KAAK,CAACG,uBAAuB;EACxC,CAAC;EAEDC,mBAAmB,EAAE,6BAACJ,KAAK,EAAK;IAC5B,OAAOA,KAAK,CAACI,mBAAmB;EACpC,CAAC;EAEDH,cAAc,EAAE,wBAACD,KAAK,EAAK;IACvB,OAAOA,KAAK,CAACC,cAAc;EAC/B;AACJ,CAAC;AAED,IAAMO,OAAO,GAAG;EACNC,KAAK,8BAAiC;IAAA;MAAA;MAAA;QAAA;UAAA;YAA/BC,MAAM,QAANA,MAAM;YAAIC,QAAQ,SAARA,QAAQ,EAAEC,QAAQ,SAARA,QAAQ;YACrCF,MAAM,CAAC,cAAc,CAAC;YAAC;YAAA;YAAA,OAEAb,WAAW,CAACY,KAAK,CAACE,QAAQ,EAAEC,QAAQ,CAAC;UAAA;YAAlDC,KAAI;YACVH,MAAM,CAAC,cAAc,EAAEG,KAAI,CAAC;YAC5BH,MAAM,CAAC,oBAAoB,EAAEG,KAAI,EAAE;cAACC,IAAI,EAAE;YAAI,CAAC,CAAC;YAChD;YACA;YAAA;YAAA,OACMf,MAAM,CAACgB,IAAI,CAAC,GAAG,CAAC;UAAA;YAAA,iCACf,IAAI;UAAA;YAAA;YAAA;YAEX,IAAI,uBAAajB,mBAAmB,EAAE;cAClCY,MAAM,CAAC,YAAY,EAAE;gBAACM,SAAS,EAAE,YAAEA,SAAS;gBAAEC,YAAY,EAAE,YAAEC;cAAO,CAAC,CAAC;YAC3E;YAAC,iCACM,KAAK;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAEpB,CAAC;EACKC,YAAY,sCAAyC;IAAA;MAAA;MAAA;QAAA;UAAA;YAAvCT,MAAM,SAANA,MAAM;YAAIU,UAAU,SAAVA,UAAU,EAAEC,GAAG,SAAHA,GAAG,EAAEC,IAAI,SAAJA,IAAI,EAAEC,GAAG,SAAHA,GAAG;YAAA;YAAA;YAAA,OAE7B1B,WAAW,CAAC2B,QAAQ,CAACJ,UAAU,EAAEC,GAAG,EAAEC,IAAI,EAAEC,GAAG,CAAC;UAAA;YAA7DV,MAAI;YACVH,MAAM,CAAC,cAAc,EAAEG,MAAI,CAAC;YAC5BH,MAAM,CAAC,oBAAoB,EAAEG,MAAI,EAAE;cAACC,IAAI,EAAE;YAAI,CAAC,CAAC;;YAEhD;YAAA;YAAA,OACMf,MAAM,CAACgB,IAAI,CAAChB,MAAM,CAAC0B,OAAO,CAACC,OAAO,CAACC,KAAK,CAACC,QAAQ,GAAG7B,MAAM,CAAC0B,OAAO,CAACC,OAAO,CAACC,KAAK,CAACC,QAAQ,GAAG,GAAG,CAAC;UAAA;YAAA,kCAE/F,IAAI;UAAA;YAAA;YAAA;YAEX,IAAI,wBAAa9B,mBAAmB,EAAE;cAClCY,MAAM,CAAC,YAAY,EAAE;gBAACM,SAAS,EAAE,aAAEA,SAAS;gBAAEC,YAAY,EAAE,aAAEC;cAAO,CAAC,CAAC;YAC3E;YAAC,kCAEM,KAAK;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAEpB,CAAC;EAEDW,YAAY,+BAAkB;IAAA,IAAhBnB,MAAM,SAANA,MAAM;MAAEV,KAAK,SAALA,KAAK;IACvB;IACA;IACA,IAAI,CAACA,KAAK,CAACK,mBAAmB,EAAE;MAC5B,IAAMyB,CAAC,GAAGjC,WAAW,CAACgC,YAAY,EAAE;MACpCnB,MAAM,CAAC,qBAAqB,EAAEoB,CAAC,CAAC;;MAEhC;MACA;MACAA,CAAC,CAACC,IAAI,CACF,UAAAC,QAAQ,EAAI;QACRtB,MAAM,CAAC,qBAAqB,EAAE,IAAI,CAAC;QACnCA,MAAM,CAAC,cAAc,EAAEsB,QAAQ,CAAC;QAChCtB,MAAM,CAAC,oBAAoB,EAAEG,IAAI,EAAE;UAACC,IAAI,EAAE;QAAI,CAAC,CAAC;MACpD,CAAC,EACD,YAAM;QACFJ,MAAM,CAAC,qBAAqB,EAAE,IAAI,CAAC;MACvC,CAAC,CACJ;IACL;IAEA,OAAOV,KAAK,CAACK,mBAAmB;EACpC,CAAC;EAED4B,MAAM,yBAAW;IAAA,IAATvB,MAAM,SAANA,MAAM;IACVb,WAAW,CAACoC,MAAM,EAAE;IACpBvB,MAAM,CAAC,eAAe,CAAC;IACvBA,MAAM,CAAC,qBAAqB,EAAE,IAAI,EAAE;MAACI,IAAI,EAAE;IAAI,CAAC,CAAC;IACjD;IACAoB,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;EAC5B;AACJ,CAAC;AAED,IAAMC,SAAS,GAAG;EACdC,YAAY,wBAACtC,KAAK,EAAE;IAChBA,KAAK,CAACC,cAAc,GAAG,IAAI;IAC3BD,KAAK,CAACI,mBAAmB,GAAG,EAAE;IAC9BJ,KAAK,CAACG,uBAAuB,GAAG,CAAC;EACrC,CAAC;EACDoC,WAAW,uBAACvC,KAAK,EAAEa,IAAI,EAAE;IACrBb,KAAK,CAACM,QAAQ,GAAGO,IAAI;EACzB,CAAC;EAED2B,YAAY,wBAACxC,KAAK,EAAEa,IAAI,EAAE;IACtB;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACQ;IACAb,KAAK,CAACE,WAAW,GAAGW,IAAI,CAAC4B,KAAK;IAC9B;IACAzC,KAAK,CAACC,cAAc,GAAG,KAAK;EAChC,CAAC;EAEDyC,UAAU,sBAAC1C,KAAK,SAA6B;IAAA,IAA1BgB,SAAS,SAATA,SAAS;MAAEC,YAAY,SAAZA,YAAY;IACtCjB,KAAK,CAACC,cAAc,GAAG,KAAK;IAC5BD,KAAK,CAACG,uBAAuB,GAAGa,SAAS;IACzChB,KAAK,CAACI,mBAAmB,GAAGa,YAAY;EAC5C,CAAC;EAED0B,aAAa,yBAAC3C,KAAK,EAAE;IACjBA,KAAK,CAACE,WAAW,GAAG,EAAE;IACtBF,KAAK,CAACM,QAAQ,GAAG,CAAC,CAAC;IACnB;EACJ,CAAC;EAEDD,mBAAmB,+BAACL,KAAK,EAAE4C,OAAO,EAAE;IAChC5C,KAAK,CAACK,mBAAmB,GAAGuC,OAAO;EACvC;AACJ,CAAC;AAED,OAAO,IAAMC,IAAI,GAAG;EAChBC,UAAU,EAAE,IAAI;EAChB9C,KAAK,EAALA,KAAK;EACLO,OAAO,EAAPA,OAAO;EACPC,OAAO,EAAPA,OAAO;EACP6B,SAAS,EAATA;AACJ,CAAC"}]}