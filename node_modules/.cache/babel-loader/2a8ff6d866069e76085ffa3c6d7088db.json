{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\templates\\components\\formFormula.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\templates\\components\\formFormula.vue","mtime":1674799497872},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwp2YXIgTUFJTl9BUElfVVJMID0gJy9kb2NUYWJsZSc7CmltcG9ydCBhcGlTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBkb2NUYWJsZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbGFiZWxMaXN0OiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGVzOiB7CiAgICAgICAgT1BFUkFUT1JTOiAnT1BFUkFUT1JTJywKICAgICAgICBBUkdVTUVOVFM6ICdBUkdVTUVOVFMnLAogICAgICAgIE9QRU5fQlJBQ0tFVDogJ09QRU5fQlJBQ0tFVCcsCiAgICAgICAgQ0xPU0VfQlJBQ0tFVDogJ0NMT1NFX0JSQUNLRVQnLAogICAgICAgIE5VTUJFUjogJ05VTUJFUicKICAgICAgfSwKICAgICAgbnVtYmVyT3B0aW9uOiB7fSwKICAgICAgb3BlcmF0b3JzTGlzdDogW10sCiAgICAgIGJyYWNrZXRMaXN0OiBbXSwKICAgICAgZm9ybXVsYUxpc3Q6IFtdLAogICAgICBjdXJyZW50U3RlcFR5cGU6IG51bGwsCiAgICAgIG9wZW5lZEJyYWNrZXRDb3VudDogMCwKICAgICAgdGFyZ2V0OiBudWxsLAogICAgICBpc1NhdmVGb3JtdWxhc0Rpc2FibGVkOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnR5cGVzID0gewogICAgICBPUEVSQVRPUlM6ICdPUEVSQVRPUlMnLAogICAgICBBUkdVTUVOVFM6ICdBUkdVTUVOVFMnLAogICAgICBPUEVOX0JSQUNLRVQ6ICdPUEVOX0JSQUNLRVQnLAogICAgICBDTE9TRV9CUkFDS0VUOiAnQ0xPU0VfQlJBQ0tFVCcsCiAgICAgIE5VTUJFUjogJ05VTUJFUicKICAgIH07CiAgICB0aGlzLm9wZXJhdG9yc0xpc3QgPSBbewogICAgICBuYW1lOiAnKycsCiAgICAgIHR5cGU6IHRoaXMudHlwZXMuT1BFUkFUT1JTCiAgICB9LCB7CiAgICAgIG5hbWU6ICctJywKICAgICAgdHlwZTogdGhpcy50eXBlcy5PUEVSQVRPUlMKICAgIH0sIHsKICAgICAgbmFtZTogJyonLAogICAgICB0eXBlOiB0aGlzLnR5cGVzLk9QRVJBVE9SUwogICAgfSwgewogICAgICBuYW1lOiAnLycsCiAgICAgIHR5cGU6IHRoaXMudHlwZXMuT1BFUkFUT1JTCiAgICB9XTsKICAgIHRoaXMuYnJhY2tldExpc3QgPSBbewogICAgICBuYW1lOiAnKCcsCiAgICAgIHR5cGU6IHRoaXMudHlwZXMuT1BFTl9CUkFDS0VUCiAgICB9LCB7CiAgICAgIG5hbWU6ICcpJywKICAgICAgdHlwZTogdGhpcy50eXBlcy5DTE9TRV9CUkFDS0VUCiAgICB9XTsKICAgIHRoaXMubnVtYmVyT3B0aW9uID0gewogICAgICBuYW1lOiAnMCcsCiAgICAgIHR5cGU6IHRoaXMudHlwZXMuTlVNQkVSLAogICAgICB2YWx1ZTogMAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZEFyZ3VtZW50OiBmdW5jdGlvbiBhZGRBcmd1bWVudChpdGVtKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwVHlwZSAhPT0gdGhpcy50eXBlcy5BUkdVTUVOVFMpIHsKICAgICAgICB0aGlzLnNldEN1cnJlbnRTdGVwVHlwZSh0aGlzLnR5cGVzLkFSR1VNRU5UUyk7CiAgICAgICAgdGhpcy5mb3JtdWxhTGlzdC5wdXNoKHsKICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgbmFtZTogaXRlbS5uYW1lVXosCiAgICAgICAgICBuYW1lRW46IGl0ZW0ubmFtZUVuLAogICAgICAgICAgbmFtZUx0OiBpdGVtLm5hbWVMdCwKICAgICAgICAgIG5hbWVSdTogaXRlbS5uYW1lUnUsCiAgICAgICAgICBuYW1lVXo6IGl0ZW0ubmFtZVV6LAogICAgICAgICAgdHlwZUNvZGU6IGl0ZW0udHlwZUNvZGUsCiAgICAgICAgICBwYXJlbnROYW1lOiBpdGVtLnBhcmVudE5hbWUsCiAgICAgICAgICB0eXBlOiB0aGlzLnR5cGVzLkFSR1VNRU5UUwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYWRkT3BlcmF0b3I6IGZ1bmN0aW9uIGFkZE9wZXJhdG9yKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFN0ZXBUeXBlID09PSB0aGlzLnR5cGVzLkFSR1VNRU5UUykgewogICAgICAgIHRoaXMuc2V0Q3VycmVudFN0ZXBUeXBlKHRoaXMudHlwZXMuT1BFUkFUT1JTKTsKICAgICAgICB0aGlzLmZvcm11bGFMaXN0LnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRCcmFja2V0OiBmdW5jdGlvbiBhZGRCcmFja2V0KGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFN0ZXBUeXBlID09PSB0aGlzLnR5cGVzLk9QRVJBVE9SUyAmJiBpdGVtLnR5cGUgPT09IHRoaXMudHlwZXMuT1BFTl9CUkFDS0VUKSB7CiAgICAgICAgdGhpcy5vcGVuZWRCcmFja2V0Q291bnQrKzsKICAgICAgICB0aGlzLmZvcm11bGFMaXN0LnB1c2goaXRlbSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50U3RlcFR5cGUgPT09IHRoaXMudHlwZXMuQVJHVU1FTlRTICYmIGl0ZW0udHlwZSA9PT0gdGhpcy50eXBlcy5DTE9TRV9CUkFDS0VUKSB7CiAgICAgICAgaWYgKHRoaXMub3BlbmVkQnJhY2tldENvdW50ID4gMCkgewogICAgICAgICAgdGhpcy5vcGVuZWRCcmFja2V0Q291bnQtLTsKICAgICAgICAgIHRoaXMuZm9ybXVsYUxpc3QucHVzaChpdGVtKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhZGROdW1iZXI6IGZ1bmN0aW9uIGFkZE51bWJlcihlKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwVHlwZSAhPT0gdGhpcy50eXBlcy5BUkdVTUVOVFMpIHsKICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUZsb2F0KHRoaXMubnVtYmVyT3B0aW9uLnZhbHVlKTsKICAgICAgICBpZiAodmFsdWUgIT09IDApIHsKICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFN0ZXBUeXBlKHRoaXMudHlwZXMuQVJHVU1FTlRTKTsKICAgICAgICAgIHRoaXMuZm9ybXVsYUxpc3QucHVzaCh7CiAgICAgICAgICAgIGlkOiBudWxsLAogICAgICAgICAgICBuYW1lOiB2YWx1ZSwKICAgICAgICAgICAgdHlwZUNvZGU6ICJCSUdERUNJTUFMIiwKICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlcy5OVU1CRVIsCiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLm51bWJlck9wdGlvbi52YWx1ZSA9IDA7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVtb3ZlTGFzdGVkOiBmdW5jdGlvbiByZW1vdmVMYXN0ZWQoKSB7CiAgICAgIGlmICh0aGlzLmZvcm11bGFMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm11bGFMaXN0Lmxlbmd0aCA9PT0gMSkgewogICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUFsbCgpOwogICAgICB9CiAgICAgIHZhciByZW1vdmVkID0gdGhpcy5mb3JtdWxhTGlzdC5wb3AoKTsKICAgICAgaWYgKHJlbW92ZWQudHlwZSA9PT0gdGhpcy50eXBlcy5PUEVOX0JSQUNLRVQpIHsKICAgICAgICB0aGlzLm9wZW5lZEJyYWNrZXRDb3VudC0tOwogICAgICB9IGVsc2UgaWYgKHJlbW92ZWQudHlwZSA9PT0gdGhpcy50eXBlcy5DTE9TRV9CUkFDS0VUKSB7CiAgICAgICAgdGhpcy5vcGVuZWRCcmFja2V0Q291bnQrKzsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbGFzdEl0ZW0gPSB0aGlzLmZvcm11bGFMaXN0W3RoaXMuZm9ybXVsYUxpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgdGhpcy5zZXRDdXJyZW50U3RlcFR5cGUobGFzdEl0ZW0udHlwZSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVBbGw6IGZ1bmN0aW9uIHJlbW92ZUFsbCgpIHsKICAgICAgdGhpcy5mb3JtdWxhTGlzdCA9IFtdOwogICAgICB0aGlzLnNldEN1cnJlbnRTdGVwVHlwZShudWxsKTsKICAgICAgdGhpcy5vcGVuZWRCcmFja2V0Q291bnQgPSAwOwogICAgfSwKICAgIHNldEN1cnJlbnRTdGVwVHlwZTogZnVuY3Rpb24gc2V0Q3VycmVudFN0ZXBUeXBlKHR5cGUpIHsKICAgICAgdGhpcy5jdXJyZW50U3RlcFR5cGUgPSB0eXBlOwogICAgfSwKICAgIHZhbGlkYXRlRm9ybXVsYXM6IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybXVsYXMoKSB7CiAgICAgIGlmICghdGhpcy50YXJnZXQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMub3BlbmVkQnJhY2tldENvdW50ICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm11bGFMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgbGFzdEZvcm11bGEgPSB0aGlzLmZvcm11bGFMaXN0W3RoaXMuZm9ybXVsYUxpc3QubGVuZ3RoIC0gMV07CiAgICAgIGlmIChsYXN0Rm9ybXVsYS50eXBlID09PSB0aGlzLnR5cGVzLk9QRVJBVE9SUykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAobGFzdEZvcm11bGEudHlwZSA9PT0gdGhpcy50eXBlcy5PUEVOX0JSQUNLRVQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgc2F2ZUZvcm11bGFzOiBmdW5jdGlvbiBzYXZlRm9ybXVsYXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmICh0aGlzLnZhbGlkYXRlRm9ybXVsYXMoKSkgewogICAgICAgIGFwaVNlcnZpY2UucG9zdChNQUlOX0FQSV9VUkwgKyAiL3NhdmUtdGFibGVzLWZvcm11bGFzIiwgdGhpcy5mb3JtdWxhTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHZhciBfaXRlbSRpZDsKICAgICAgICAgIGl0ZW0uZG9jVGFibGVJZCA9IF90aGlzLmRvY1RhYmxlLmlkOwogICAgICAgICAgaXRlbS50YXJnZXRDb2x1bW5JZCA9IF90aGlzLnRhcmdldDsKICAgICAgICAgIGl0ZW0uZG9jQ29sdW1uSWQgPSAoX2l0ZW0kaWQgPSBpdGVtLmlkKSAhPT0gbnVsbCAmJiBfaXRlbSRpZCAhPT0gdm9pZCAwID8gX2l0ZW0kaWQgOiBudWxsOwogICAgICAgICAgaXRlbS5jb2RlID0gaXRlbS5uYW1lOwogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpcy4kZW1pdCgnZ2V0RG9jVGFibGVGb3JtdWxhc0xpc3QnKTsKICAgICAgICAgIF90aGlzLiR0b2FzdChfdGhpcy4kdCgnc3VibW9kdWxlcy5kb2NfdGFibGVfZm9ybXVsYXMuc2F2ZWQnKSwgewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMuJHRvYXN0KGVycm9yLCB7CiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHRvYXN0KCfQpNC+0YDQvNGD0LvQsCDQvdC1INCy0LDQu9C40LTQvdCwJywgewogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRCaWdkZWNpbWFsTGlzdDogZnVuY3Rpb24gZ2V0QmlnZGVjaW1hbExpc3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgaW5MaXN0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTsKICAgICAgdmFyIG91dExpc3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IFtdOwogICAgICB2YXIgcGFyZW50TmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7CiAgICAgIGluTGlzdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgbmFtZSA9IF90aGlzMi5nZXROYW1lKHsKICAgICAgICAgIG5hbWVVejogaXRlbS5uYW1lVXosCiAgICAgICAgICBuYW1lTHQ6IGl0ZW0ubmFtZUx0LAogICAgICAgICAgbmFtZVJ1OiBpdGVtLm5hbWVSdQogICAgICAgIH0pOwogICAgICAgIGlmIChpdGVtLnR5cGVDb2RlID09PSAnQklHREVDSU1BTCcpIHsKICAgICAgICAgIG91dExpc3QucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICAgICAgICB0ZXh0OiBuYW1lLAogICAgICAgICAgICBwYXJlbnROYW1lOiBwYXJlbnROYW1lLAogICAgICAgICAgICB2YWx1ZTogaXRlbS5pZAogICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgewogICAgICAgICAgX3RoaXMyLmdldEJpZ2RlY2ltYWxMaXN0KGl0ZW0uY2hpbGRyZW4sIG91dExpc3QsIChwYXJlbnROYW1lID8gcGFyZW50TmFtZSArICcgLyAnIDogJycpICsgbmFtZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIG91dExpc3Q7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdGFyZ2V0U2VsZWN0T3B0aW9uczogZnVuY3Rpb24gdGFyZ2V0U2VsZWN0T3B0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2V0QmlnZGVjaW1hbExpc3QodGhpcy5sYWJlbExpc3QsIFtdKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;AA0FA;AACA;AAEA;EACAA;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;EACA;EACAE;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAb;MACAC;MACAC;MACAC;MACAC;IACA;IACA,sBACA;MACAU;MACAnB;IACA,GACA;MACAmB;MACAnB;IACA,GACA;MACAmB;MACAnB;IACA,GACA;MACAmB;MACAnB;IACA,EACA;IACA,oBACA;MACAmB;MACAnB;IACA,GACA;MACAmB;MACAnB;IACA,EACA;IACA;MACAmB;MACAnB;MACAoB;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;UACAC;UACAJ;UACAK;UACAC;UACAC;UACAC;UACAC;UACAC;UACA7B;QACA;MACA;IACA;IACA8B;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;QACA;UACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;UACA;UACA;YACAT;YACAJ;YACAS;YACA5B;YACAoB;UACA;UACA;QACA;MACA;IACA;IACAa;MACA;QACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;UAAA;UACAC;UACAA;UACAA;UACAA;UACA;QACA;UACA;UACA;YAAAvC;UAAA;QACA;UACA;YAAAA;UAAA;QACA;MACA;QACA;UAAAA;QAAA;MACA;IACA;IACAwC;MAAA;MAAA;MAAA;MAAA;MACAC;QACA;UACAd;UACAF;UACAC;QACA;QACA;UACAgB,6CACAH;YACAI;YACAd;YACAT;UAAA,GACA;QACA;QACA;UACA;QACA;MACA;MACA;IACA;EACA;EACAwB;IACAC;MACA;IACA;EACA;AACA","names":["props","docTable","type","required","labelList","data","types","OPERATORS","ARGUMENTS","OPEN_BRACKET","CLOSE_BRACKET","NUMBER","numberOption","operatorsList","bracketList","formulaList","currentStepType","openedBracketCount","target","isSaveFormulasDisabled","created","name","value","methods","addArgument","id","nameEn","nameLt","nameRu","nameUz","typeCode","parentName","addOperator","addBracket","addNumber","removeLasted","removeAll","setCurrentStepType","validateFormulas","saveFormulas","apiService","item","getBigdecimalList","inList","outList","text","computed","targetSelectOptions"],"sourceRoot":"src/modules/report/templates/components","sources":["formFormula.vue"],"sourcesContent":["<template>\r\n  <b-col md=\"12\">\r\n    <hr>\r\n    <b-row>\r\n      <b-col md=\"6\" class=\"mt-2\">\r\n        <b-form-select :options=\"targetSelectOptions\" v-model=\"target\">\r\n          <b-form-select-option :value=\"null\">\r\n            {{ 'Выберите поле' }}\r\n          </b-form-select-option>\r\n        </b-form-select>\r\n      </b-col>\r\n      <b-col md=\"6\" class=\"mt-2\">\r\n        <div\r\n            v-for=\"(item, key) in formulaList\"\r\n            class=\"d-inline-block rounded-lg\"\r\n            :title=\"item.parentName\"\r\n            :class=\"item.type === types.ARGUMENTS ? 'border border-secondary p-1' : (\r\n                item.type === types.OPERATORS ? 'p-1 my-1' : (\r\n                    item.type === types.NUMBER ? 'bg-light-green border p-1' : 'btn-rounded bg-white p-1'\r\n                )\r\n            )\"\r\n            v-bind:key=\"key\">\r\n          <span class=\"text-dark\">{{ item.name }}</span>\r\n        </div>\r\n        <div>\r\n          <b-button @click=\"saveFormulas\" variant=\"success\" :disabled=\"isSaveFormulasDisabled\">\r\n            {{ $t(\"submodules.doc_table_formulas.save_formula\") }}\r\n          </b-button>\r\n        </div>\r\n      </b-col>\r\n      <b-col md=\"6\" class=\"my-2\">\r\n        <div class=\"text-center\">\r\n          <b-btn\r\n              class=\"bg-secondary btn bg-white mx-1 bg-light-yellow\"\r\n              v-for=\"(item, key) in targetSelectOptions\"\r\n              v-bind:key=\"key\"\r\n              :title=\"item.parentName\"\r\n              @click=\"addArgument(item)\">\r\n            <span class=\"text-dark\">{{ item.text }}</span>\r\n          </b-btn>\r\n        </div>\r\n        <div class=\"text-center mt-3\">\r\n          <span>\r\n          <b-btn\r\n              class=\"bg-secondary btn bg-white mx-1\"\r\n              v-for=\"(item, key) in operatorsList\"\r\n              v-bind:key=\"key\"\r\n              @click=\"addOperator(item)\">\r\n            <span class=\"text-dark\">{{ item.name }}</span>\r\n          </b-btn>\r\n          </span>\r\n          <span>\r\n          <b-btn\r\n              class=\"bg-secondary btn bg-white mx-1\"\r\n              v-for=\"(item, key) in bracketList\"\r\n              v-bind:key=\"key\"\r\n              @click=\"addBracket(item)\">\r\n            <span class=\"text-dark\">{{ item.name }}</span>\r\n          </b-btn>\r\n          </span>\r\n          <span>\r\n          <b-btn\r\n              class=\"bg-secondary btn bg-white mx-1\"\r\n              @click=\"removeLasted()\">\r\n            <span class=\"text-dark\"><i class=\"bx bx-arrow-back\"></i></span>\r\n          </b-btn>\r\n          </span>\r\n          <span>\r\n          <b-btn\r\n              class=\"bg-secondary btn bg-white mx-1\"\r\n              @click=\"removeAll()\">\r\n            <span class=\"text-dark\">C</span>\r\n          </b-btn>\r\n          </span>\r\n          <span>\r\n          <input\r\n              type=\"number\"\r\n              class=\"form-control bg-light-green mx-1 d-inline-block w-auto\"\r\n              v-model=\"numberOption.value\"\r\n              @keyup.enter=\"addNumber\">\r\n\r\n          </span>\r\n        </div>\r\n      </b-col>\r\n    </b-row>\r\n    <hr>\r\n  </b-col>\r\n</template>\r\n\r\n<script>\r\nconst MAIN_API_URL = '/docTable'\r\nimport apiService from \"@/shared/services/api.service\";\r\n\r\nexport default {\r\n  props: {\r\n    docTable: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    labelList: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      types: {\r\n        OPERATORS: 'OPERATORS',\r\n        ARGUMENTS: 'ARGUMENTS',\r\n        OPEN_BRACKET: 'OPEN_BRACKET',\r\n        CLOSE_BRACKET: 'CLOSE_BRACKET',\r\n        NUMBER: 'NUMBER',\r\n      },\r\n      numberOption: {},\r\n      operatorsList: [],\r\n      bracketList: [],\r\n      formulaList: [],\r\n      currentStepType: null,\r\n      openedBracketCount: 0,\r\n      target: null,\r\n      isSaveFormulasDisabled: false,\r\n    }\r\n  },\r\n  created() {\r\n    this.types = {\r\n      OPERATORS: 'OPERATORS',\r\n      ARGUMENTS: 'ARGUMENTS',\r\n      OPEN_BRACKET: 'OPEN_BRACKET',\r\n      CLOSE_BRACKET: 'CLOSE_BRACKET',\r\n      NUMBER: 'NUMBER',\r\n    };\r\n    this.operatorsList = [\r\n      {\r\n        name: '+',\r\n        type: this.types.OPERATORS\r\n      },\r\n      {\r\n        name: '-',\r\n        type: this.types.OPERATORS\r\n      },\r\n      {\r\n        name: '*',\r\n        type: this.types.OPERATORS\r\n      },\r\n      {\r\n        name: '/',\r\n        type: this.types.OPERATORS\r\n      }\r\n    ];\r\n    this.bracketList = [\r\n      {\r\n        name: '(',\r\n        type: this.types.OPEN_BRACKET\r\n      },\r\n      {\r\n        name: ')',\r\n        type: this.types.CLOSE_BRACKET\r\n      }\r\n    ];\r\n    this.numberOption = {\r\n      name: '0',\r\n      type: this.types.NUMBER,\r\n      value: 0\r\n    }\r\n  },\r\n  methods: {\r\n    addArgument(item) {\r\n      if (this.currentStepType !== this.types.ARGUMENTS) {\r\n        this.setCurrentStepType(this.types.ARGUMENTS);\r\n        this.formulaList.push({\r\n          id: item.id,\r\n          name: item.nameUz,\r\n          nameEn: item.nameEn,\r\n          nameLt: item.nameLt,\r\n          nameRu: item.nameRu,\r\n          nameUz: item.nameUz,\r\n          typeCode: item.typeCode,\r\n          parentName: item.parentName,\r\n          type: this.types.ARGUMENTS\r\n        });\r\n      }\r\n    },\r\n    addOperator(item) {\r\n      if (this.currentStepType === this.types.ARGUMENTS) {\r\n        this.setCurrentStepType(this.types.OPERATORS);\r\n        this.formulaList.push(item);\r\n      }\r\n    },\r\n    addBracket(item) {\r\n      if (this.currentStepType === this.types.OPERATORS && item.type === this.types.OPEN_BRACKET) {\r\n        this.openedBracketCount++;\r\n        this.formulaList.push(item);\r\n      } else if (this.currentStepType === this.types.ARGUMENTS && item.type === this.types.CLOSE_BRACKET) {\r\n        if (this.openedBracketCount > 0) {\r\n          this.openedBracketCount--;\r\n          this.formulaList.push(item);\r\n        }\r\n      }\r\n    },\r\n    addNumber(e) {\r\n      if (this.currentStepType !== this.types.ARGUMENTS) {\r\n        let value = parseFloat(this.numberOption.value);\r\n        if (value !== 0) {\r\n          this.setCurrentStepType(this.types.ARGUMENTS);\r\n          this.formulaList.push({\r\n            id: null,\r\n            name: value,\r\n            typeCode: \"BIGDECIMAL\",\r\n            type: this.types.NUMBER,\r\n            value: value\r\n          });\r\n          this.numberOption.value = 0;\r\n        }\r\n      }\r\n    },\r\n    removeLasted() {\r\n      if (this.formulaList.length === 0) {\r\n        return null;\r\n      }\r\n      if (this.formulaList.length === 1) {\r\n        return this.removeAll();\r\n      }\r\n      const removed = this.formulaList.pop();\r\n      if (removed.type === this.types.OPEN_BRACKET) {\r\n        this.openedBracketCount--;\r\n      } else if (removed.type === this.types.CLOSE_BRACKET) {\r\n        this.openedBracketCount++;\r\n      } else {\r\n        const lastItem = this.formulaList[this.formulaList.length - 1];\r\n        this.setCurrentStepType(lastItem.type);\r\n      }\r\n    },\r\n    removeAll() {\r\n      this.formulaList = [];\r\n      this.setCurrentStepType(null);\r\n      this.openedBracketCount = 0;\r\n    },\r\n    setCurrentStepType(type) {\r\n      this.currentStepType = type;\r\n    },\r\n    validateFormulas() {\r\n      if (!this.target) {\r\n        return false;\r\n      }\r\n      if (this.openedBracketCount !== 0) {\r\n        return false;\r\n      }\r\n      if (this.formulaList.length === 0) {\r\n        return false;\r\n      }\r\n      let lastFormula = this.formulaList[this.formulaList.length - 1];\r\n      if (lastFormula.type === this.types.OPERATORS) {\r\n        return false;\r\n      }\r\n      if (lastFormula.type === this.types.OPEN_BRACKET) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    saveFormulas() {\r\n      if (this.validateFormulas()) {\r\n        apiService.post(MAIN_API_URL + \"/save-tables-formulas\", this.formulaList.map((item) => {\r\n          item.docTableId = this.docTable.id;\r\n          item.targetColumnId = this.target;\r\n          item.docColumnId = item.id ?? null;\r\n          item.code = item.name;\r\n          return item;\r\n        })).then(response => {\r\n          this.$emit('getDocTableFormulasList');\r\n          this.$toast(this.$t('submodules.doc_table_formulas.saved'), {type: 'success'});\r\n        }).catch(error => {\r\n          this.$toast(error, {type: 'error'});\r\n        });\r\n      } else {\r\n        this.$toast(('Формула не валидна'), {type: 'warning'});\r\n      }\r\n    },\r\n    getBigdecimalList(inList = [], outList = [], parentName = '') {\r\n      inList.map((item) => {\r\n        let name = this.getName({\r\n          nameUz: item.nameUz,\r\n          nameLt: item.nameLt,\r\n          nameRu: item.nameRu,\r\n        });\r\n        if (item.typeCode === 'BIGDECIMAL') {\r\n          outList.push({\r\n            ...item,\r\n            text: name,\r\n            parentName: parentName,\r\n            value: item.id\r\n          });\r\n        }\r\n        if (item.children) {\r\n          this.getBigdecimalList(item.children, outList, (parentName ? parentName + ' / ' : '') + name);\r\n        }\r\n      })\r\n      return outList;\r\n    },\r\n  },\r\n  computed: {\r\n    targetSelectOptions() {\r\n      return this.getBigdecimalList(this.labelList, []);\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.bg-light-yellow {\r\n  background-color: #ffc107 !important;\r\n}\r\n\r\n.bg-light-green {\r\n  background-color: #c1ffc1 !important;\r\n}\r\n</style>\r\n"]}]}