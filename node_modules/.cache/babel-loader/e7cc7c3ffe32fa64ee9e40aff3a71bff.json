{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\projects\\boards-mobile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\projects\\boards-mobile.vue","mtime":1674799497690},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKLyoqDQogKiBUYXNrLWxpc3QgY29tcG9uZW50DQogKi8KaW1wb3J0IHByb2plY3RTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL3Byb2plY3RTZXJ2aWNlIjsKaW1wb3J0IENyZWF0ZVRhc2sgZnJvbSAiLi9jcmVhdGUtdGFzayI7CmltcG9ydCBCb2FyZE1vYmlsZVRhc2tJdGVtIGZyb20gIi4vYm9hcmQtbW9iaWxlLXRhc2staXRlbSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDcmVhdGVUYXNrOiBDcmVhdGVUYXNrLAogICAgQm9hcmRNb2JpbGVUYXNrSXRlbTogQm9hcmRNb2JpbGVUYXNrSXRlbQogIH0sCiAgcHJvcHM6IHsKICAgIGxpc3Q6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW06IG51bGwsCiAgICAgIHRhc2tQYWdlOiAwLAogICAgICBmaWxlTW9kYWw6IDAsCiAgICAgIGZpbGU6IG51bGwsCiAgICAgIHRhc2s6ICIiLAogICAgICBiSWQ6IG51bGwsCiAgICAgIHBhcmFtczogewogICAgICAgIHBhZ2U6IDAsCiAgICAgICAgaXRlbXNQZXJQYWdlOiAxMAogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9hZE1vcmVUYXNrczogZnVuY3Rpb24gbG9hZE1vcmVUYXNrcyhpZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBwcm9qZWN0U2VydmljZS5saXN0VGFza0NhcmRzKGlkLCB7CiAgICAgICAgcGFnZTogdGhpcy50YXNrUGFnZSArPSAxLAogICAgICAgIGl0ZW1zUGVyUGFnZTogMTAKICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZikgewogICAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgibG9hZE1vcmVUYXNrQ2FyZCIsIHsKICAgICAgICAgICAgICAgICAgICBib2FyZElkOiBpZCwKICAgICAgICAgICAgICAgICAgICBsaXN0OiBkYXRhCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMudGFza1BhZ2UgPSBfdGhpcy50YXNrUGFnZSAtIDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGVNb2RhbDogZnVuY3Rpb24gdG9nZ2xlTW9kYWwoZGF0YSkgewogICAgICB0aGlzLmJJZCA9IGRhdGEuYm9hcmQuaWQ7CiAgICAgIHRoaXMuJGVtaXQoInRvZ2dsZU1vZGFsIiwgZGF0YSk7CiAgICB9LAogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdGhpcy5saXN0VGFza3MocGFyc2VJbnQodGhpcy5iSWQpKTsKICAgIH0sCiAgICBjbGlja0NhcmRUYXNrOiBmdW5jdGlvbiBjbGlja0NhcmRUYXNrKHRhc2ssIGJvYXJkKSB7CiAgICAgIHRoaXMuYklkID0gYm9hcmQuaWQ7CiAgICAgIHRoaXMuJGVtaXQoImNsaWNrQ2FyZFRhc2siLCB0YXNrKTsKICAgIH0sCiAgICBsZWF2ZVRhc2s6IGZ1bmN0aW9uIGxlYXZlVGFzayhjbXQsIGZpbGUsIGNvbG9yKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBwcm9qZWN0U2VydmljZS5jcmVhdGVUYXNrKHRoaXMuYklkLCBjbXQsIGZpbGUsIGNvbG9yKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgIF90aGlzMi50YXNrID0gIiI7CiAgICAgICAgX3RoaXMyLnN1Y2Nlc3NTYXZlZCgpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLmxpc3RUYXNrcyhwYXJzZUludChfdGhpczIuYklkKSk7CiAgICAgICAgfSwgMzAwKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIC8vIHRoaXMuY2F0Y2hFcnIoZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZUZpbGU6IGZ1bmN0aW9uIHNhdmVGaWxlKG1lc3NhZ2UsIGZpbGUsIGNvbG9yKSB7CiAgICAgIHRoaXMubGVhdmVUYXNrKG1lc3NhZ2UsIGZpbGUsIGNvbG9yKTsKICAgICAgdGhpcy5maWxlTW9kYWwgPSBmYWxzZTsKICAgICAgdGhpcy5maWxlID0gbnVsbDsKICAgIH0sCiAgICBlZGl0RmlsZTogZnVuY3Rpb24gZWRpdEZpbGUobWVzc2FnZSwgZmlsZSwgY29sb3IpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHByb2plY3RTZXJ2aWNlLnVwZGF0ZVRhc2tDYXJkKHRoaXMuaXRlbS5pZCwgbWVzc2FnZSwgZmlsZSwgW10sIGNvbG9yKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgIF90aGlzMy5pdGVtID0gbnVsbDsKICAgICAgICBfdGhpczMubGlzdFRhc2tzKF90aGlzMy5iSWQpOwogICAgICAgIF90aGlzMy5zdWNjZXNzRWRpdGVkKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGxpc3RUYXNrczogZnVuY3Rpb24gbGlzdFRhc2tzKGlkKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICBpZiAoaWQpIHsKICAgICAgICBwcm9qZWN0U2VydmljZS5saXN0VGFza0NhcmRzKGlkLCB0aGlzLnBhcmFtcykudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgIF90aGlzNC50YXNrUGFnZSA9IDA7CiAgICAgICAgICBfdGhpczQuJGVtaXQoInNldFRhc2tDYXJkIiwgewogICAgICAgICAgICBib2FyZElkOiBpZCwKICAgICAgICAgICAgbGlzdDogcnMuZGF0YQogICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgIH0KICAgIH0sCiAgICBlZGl0VGFzazogZnVuY3Rpb24gZWRpdFRhc2sodiwgYm9hcmQpIHsKICAgICAgdGhpcy5iSWQgPSBib2FyZC5pZDsKICAgICAgdGhpcy5pdGVtID0gdjsKICAgICAgdGhpcy4kcmVmcy5maWxlRWRpdC5vcGVuTSgpOwogICAgfSwKICAgIGNyZWF0ZVRhc2s6IGZ1bmN0aW9uIGNyZWF0ZVRhc2soaWQpIHsKICAgICAgdGhpcy5pdGVtID0gbnVsbDsKICAgICAgdGhpcy5iSWQgPSBpZDsKICAgICAgdGhpcy4kcmVmcy5maWxlLm9wZW5NKCk7CiAgICB9LAogICAgZGVsZXRlVGFzazogZnVuY3Rpb24gZGVsZXRlVGFzayh0LCBib2FyZCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy5jbmYoKS50aGVuKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgaWYgKHYudmFsdWUpIHsKICAgICAgICAgIHByb2plY3RTZXJ2aWNlLmRlbGV0ZVRhc2tDYXJkKHQuaWQpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICAgIF90aGlzNS5kZWxldGVTdWNjZXNzKCk7CiAgICAgICAgICAgIF90aGlzNS5saXN0VGFza3MoYm9hcmQuaWQpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;EACAA;IACAC;IAEAC;EACA;EACAC;IACAC;MACAC;MACAC;QAAA;MAAA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;IACA;EACA;EAEAC;IACAC;MAAA;MACAC,eACAC;QACAL;QACAC;MACA,GACAK;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAAd;gBACA;kBACA;oBAAAe;oBAAAlB;kBAAA;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA,KACAmB;QACA;MAAA,CACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MAAA;MACAR,eACAS,uCACAP;QACA;QACA;QACAQ;UACA;QACA;MACA,GACAN;QACA;MAAA,CACA;IACA;IACAO;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAZ,eACAa,uDACAX;QACA;QACA;QAEA;MACA,GACAE;QACA;MAAA,CACA;IACA;IACAU;MAAA;MACA;QACAd,eACAC,+BACAC;UACA;UACA;YAAAC;YAAAlB;UAAA;QACA,GACAmB;UACA;QAAA,CACA;MACA;QACA;MACA;IACA;IACAW;MACA;MACA;MACA;IACA;IACAN;MACA;MACA;MACA;IACA;IAEAO;MAAA;MACA;QACA;UACAhB,eACAiB,qBACAf;YACA;YACA;UACA,GACAE;YACA;UAAA,CACA;QACA;MACA;IACA;EACA;AACA","names":["components","CreateTask","BoardMobileTaskItem","props","list","type","default","data","item","taskPage","fileModal","file","task","bId","params","page","itemsPerPage","methods","loadMoreTasks","projectService","listTaskCards","then","boardId","catch","toggleModal","refresh","clickCardTask","leaveTask","createTask","setTimeout","saveFile","editFile","updateTaskCard","listTasks","editTask","deleteTask","deleteTaskCard"],"sourceRoot":"src/modules/projects","sources":["boards-mobile.vue"],"sourcesContent":["<script>\r\n/**\r\n * Task-list component\r\n */\r\nimport projectService from \"@/shared/services/projectService\";\r\nimport CreateTask from \"./create-task\";\r\n\r\nimport BoardMobileTaskItem from \"./board-mobile-task-item\";\r\nexport default {\r\n  components: {\r\n    CreateTask,\r\n\r\n    BoardMobileTaskItem,\r\n  },\r\n  props: {\r\n    list: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      item: null,\r\n      taskPage: 0,\r\n      fileModal: 0,\r\n      file: null,\r\n      task: \"\",\r\n      bId: null,\r\n      params: {\r\n        page: 0,\r\n        itemsPerPage: 10,\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    loadMoreTasks(id) {\r\n      projectService\r\n        .listTaskCards(id, {\r\n          page: (this.taskPage += 1),\r\n          itemsPerPage: 10,\r\n        })\r\n        .then(async ({ data }) => {\r\n          if (data.length > 0) {\r\n            this.$emit(\"loadMoreTaskCard\", { boardId: id, list: data });\r\n          } else {\r\n            this.taskPage = this.taskPage - 1;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          // this.catchErr(err);\r\n        });\r\n    },\r\n    toggleModal(data) {\r\n      this.bId = data.board.id;\r\n      this.$emit(\"toggleModal\", data);\r\n    },\r\n    refresh() {\r\n      this.listTasks(parseInt(this.bId));\r\n    },\r\n    clickCardTask(task, board) {\r\n      this.bId = board.id;\r\n      this.$emit(\"clickCardTask\", task);\r\n    },\r\n    leaveTask(cmt, file, color) {\r\n      projectService\r\n        .createTask(this.bId, cmt, file, color)\r\n        .then((rs) => {\r\n          this.task = \"\";\r\n          this.successSaved();\r\n          setTimeout(() => {\r\n            this.listTasks(parseInt(this.bId));\r\n          }, 300);\r\n        })\r\n        .catch((err) => {\r\n          // this.catchErr(err);\r\n        });\r\n    },\r\n    saveFile(message, file, color) {\r\n      this.leaveTask(message, file, color);\r\n      this.fileModal = false;\r\n      this.file = null;\r\n    },\r\n    editFile(message, file, color) {\r\n      projectService\r\n        .updateTaskCard(this.item.id, message, file, [], color)\r\n        .then((rs) => {\r\n          this.item = null;\r\n          this.listTasks(this.bId);\r\n\r\n          this.successEdited();\r\n        })\r\n        .catch((err) => {\r\n          // this.catchErr(err);\r\n        });\r\n    },\r\n    listTasks(id) {\r\n      if (id) {\r\n        projectService\r\n          .listTaskCards(id, this.params)\r\n          .then((rs) => {\r\n            this.taskPage = 0;\r\n            this.$emit(\"setTaskCard\", { boardId: id, list: rs.data });\r\n          })\r\n          .catch((err) => {\r\n            // this.catchErr(err);\r\n          });\r\n      } else {\r\n        this.$router.go(-1);\r\n      }\r\n    },\r\n    editTask(v, board) {\r\n      this.bId = board.id;\r\n      this.item = v;\r\n      this.$refs.fileEdit.openM();\r\n    },\r\n    createTask(id) {\r\n      this.item = null;\r\n      this.bId = id;\r\n      this.$refs.file.openM();\r\n    },\r\n\r\n    deleteTask(t, board) {\r\n      this.cnf().then((v) => {\r\n        if (v.value) {\r\n          projectService\r\n            .deleteTaskCard(t.id)\r\n            .then((rs) => {\r\n              this.deleteSuccess();\r\n              this.listTasks(board.id);\r\n            })\r\n            .catch((err) => {\r\n              // this.catchErr(err);\r\n            });\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <create-task\r\n      ref=\"file\"\r\n      @sendFile=\"saveFile\"\r\n      :cmt=\"true\"\r\n      :save=\"true\"\r\n      :name=\"true\"\r\n    />\r\n    <create-task\r\n      ref=\"fileEdit\"\r\n      @sendFile=\"editFile\"\r\n      :cmt=\"true\"\r\n      :edit=\"true\"\r\n      :item=\"item\"\r\n      :name=\"true\"\r\n    />\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-12\">\r\n        <div\r\n          class=\"card\"\r\n          :style=\"\r\n            !_empty(board.color)\r\n              ? `border-top:5px solid ${board.color}`\r\n              : 'border-top:5px solid white'\r\n          \"\r\n          :key=\"board.id + index+ 'BOARD_MOBILE'+board.name\"\r\n          v-for=\"(board, index) in list\"\r\n        >\r\n          <div class=\"card-body\">\r\n            <div class=\"d-flex align-items-center justify-content-between\">\r\n              <h4 class=\"card-title mb-4\">{{ board.name }}</h4>\r\n              <a\r\n                href=\"javascript: void(0);\"\r\n                @click=\"createTask(board.id)\"\r\n                class=\"btn btn-success\"\r\n              >\r\n                <i class=\"mdi mdi-plus\"></i>\r\n                {{ $t(\"create_new_task\") }}\r\n              </a>\r\n            </div>\r\n            <div class=\"table-responsive mb-0\">\r\n              <BoardMobileTaskItem\r\n                @loadMoreTasks=\"loadMoreTasks\"\r\n                @editTask=\"editTask\"\r\n                @deleteTask=\"deleteTask\"\r\n                @toggleModal=\"toggleModal\"\r\n                @clickCardTask=\"clickCardTask\"\r\n                :board=\"board\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n"]}]}