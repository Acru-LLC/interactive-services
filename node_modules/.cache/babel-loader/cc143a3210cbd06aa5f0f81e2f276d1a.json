{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\advertisement\\modules\\ad_monitoring\\VanillaLeaflet.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\advertisement\\modules\\ad_monitoring\\VanillaLeaflet.vue","mtime":1675054786254},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9BQ1JVIFBST0pFQ1QvRmFpciBUZWNoL2FjcnUtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IExNYXAgfSBmcm9tICJ2dWUyLWxlYWZsZXQiOwppbXBvcnQgaGVscGVyU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSc7CmltcG9ydCBMIGZyb20gImxlYWZsZXQiOwppbXBvcnQgTGVhZmxldE1hcmtlcmNsdXN0ZXIgZnJvbSAibGVhZmxldC5tYXJrZXJjbHVzdGVyIjsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RhdGUvc3RvcmUiOwppbXBvcnQgImxlYWZsZXQvZGlzdC9sZWFmbGV0LmNzcyI7CmltcG9ydCAibGVhZmxldC5tYXJrZXJjbHVzdGVyL2Rpc3QvTWFya2VyQ2x1c3Rlci5jc3MiOwppbXBvcnQgImxlYWZsZXQubWFya2VyY2x1c3Rlci9kaXN0L01hcmtlckNsdXN0ZXIuRGVmYXVsdC5jc3MiOwppbXBvcnQgTWFya2VySWNvbiBmcm9tICJsZWFmbGV0L2Rpc3QvaW1hZ2VzL21hcmtlci1pY29uLnBuZyI7CmltcG9ydCBQb3B1cCBmcm9tICIuL1BvcHVwIjsKaW1wb3J0IGNydWRBbmRMaXN0c1NlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvY3J1ZF9hbmRfbGlzdC5zZXJ2aWNlIjsKaW1wb3J0IHsgVG9rZW5TZXJ2aWNlIH0gZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvc3RvcmFnZS5zZXJ2aWNlIjsKdmFyIE1BSU5fQVBJX1VSTCA9ICdjb250cmFjdG9yLWFkdmVydGlzaW5nLWNvbnN0cnVjdGlvbic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICAidi1tYXAiOiBMTWFwLAogICAgUG9wdXA6IFBvcHVwCiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0TWFwKCk7CiAgICBMZWFmbGV0TWFya2VyY2x1c3RlcjsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWx0ZXJQYXlsb2FkOiB7CiAgICAgICAgcGFzc3BvcnROdW1iZXI6ICcnLAogICAgICAgIGRlc2lnblR5cGVJZHM6ICcnLAogICAgICAgIGNvbnRyYWN0b3JJZHM6ICcnLAogICAgICAgIGRpc3RyaWN0SWRzOiAnJywKICAgICAgICByZWdpb25JZHM6ICcnCiAgICAgIH0sCiAgICAgIG1hcDogewogICAgICAgIHNlbGY6IG51bGwsCiAgICAgICAgbWF4Wm9vbTogMTksCiAgICAgICAgbWluWm9vbTogNiwKICAgICAgICBpbml0Wm9vbTogNiwKICAgICAgICB2aWV3OiBbNDEuNSwgNjQuNV0sCiAgICAgICAgYXR0cmlidXRpb246IFs0MS41LCA2NC41XSwKICAgICAgICBtYXhCb3VuZHM6IFtbMzcsIDU1XSwgWzQ2LCA3NF1dLAogICAgICAgIG1hcmtlcnM6IG51bGwKICAgICAgfSwKICAgICAgYWRNYXJrZXJzOiBbXSwKICAgICAgYWRNYXJrZXJPYmplY3RzOiBbXSwKICAgICAgYWREZXNpZ25UeXBlczogW10sCiAgICAgIHNlYXJjaFJlc3VsdE1hcmtlcjogbnVsbCwKICAgICAgc2xpZGU6IDAsCiAgICAgIHNsaWRpbmc6IG51bGwsCiAgICAgIGN1cnJlbnRBZERldGFpbHM6IHt9LAogICAgICBjdXJyZW50QWRJbWdzOiBbXSwKICAgICAgc3RyRm9ySW1nczogJycsCiAgICAgIHB1YmxpY1BhdGg6IHByb2Nlc3MuZW52LkJBU0VfVVJMLAogICAgICBkaXN0cmljdHM6IFtdLAogICAgICByZWdpb25zOiBbXSwKICAgICAgY29udHJhY3RvclNlYXJjaFBheWxvYWQ6IHt9LAogICAgICBoYXNOZXh0UGFnZUNvbnRyYWN0b3JzOiBmYWxzZSwKICAgICAgY29udHJhY3RvcnM6IFtdLAogICAgICBkZWJvdW5jZTogbnVsbCwKICAgICAgaXNMb2FkaW5nQ29udHJhY3RvcnM6IGZhbHNlLAogICAgICBpbml0aWFsRmlsdGVyUGF5bG9hZDogewogICAgICAgIHBhc3Nwb3J0TnVtYmVyOiAnJywKICAgICAgICBjb250cmFjdG9ySWRzOiBbXSwKICAgICAgICByZWdpb25JZHM6IFtdLAogICAgICAgIGRpc3RyaWN0SWRzOiBbXSwKICAgICAgICBkZXNpZ25UeXBlSWRzOiBbXQogICAgICB9LAogICAgICBtYXBQb3B1cDogewogICAgICAgIGlkOiAnbWFwLXBvcHVwJywKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBlbGVtZW50OiB7fQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9HTE9CQUxfTE9BRElORyIsIHRydWUpOwogICAgICAgICAgICBfdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIF90aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKTsKICAgICAgICAgICAgX3RoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gNTAwOwogICAgICAgICAgICBfdGhpcy5zZWFyY2goKTsKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfR0xPQkFMX0xPQURJTkciLCB0cnVlKTsKICAgICAgICAgICAgX3RoaXMuZmV0Y2hDb250cmFjdG9ycygpOwogICAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9HTE9CQUxfTE9BRElORyIsIHRydWUpOwogICAgICAgICAgICBfdGhpcy5mZXRjaEFkRGVzaWduVHlwZXMoKTsKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfR0xPQkFMX0xPQURJTkciLCB0cnVlKTsKICAgICAgICAgICAgX3RoaXMuZmV0Y2hSZWdpb25zRm9yQWR2ZXJ0aXNlbWVudEJ5Q3VycmVudFVzZXJJZCgpOwogICAgICAgICAgICBzdG9yZS5jb21taXQoIlNFVF9HTE9CQUxfTE9BRElORyIsIGZhbHNlKTsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRNYXA6IGZ1bmN0aW9uIGluaXRNYXAoKSB7CiAgICAgIHZhciBtYXBPYmplY3QgPSB0aGlzLiRyZWZzLm1hcC5tYXBPYmplY3Q7CiAgICAgIHRoaXMubWFwLnNlbGYgPSBtYXBPYmplY3Q7CiAgICAgIHZhciBfdGhpcyRtYXAgPSB0aGlzLm1hcCwKICAgICAgICBzZWxmID0gX3RoaXMkbWFwLnNlbGYsCiAgICAgICAgbWF4Wm9vbSA9IF90aGlzJG1hcC5tYXhab29tLAogICAgICAgIG1pblpvb20gPSBfdGhpcyRtYXAubWluWm9vbSwKICAgICAgICBhdHRyaWJ1dGlvbiA9IF90aGlzJG1hcC5hdHRyaWJ1dGlvbiwKICAgICAgICB2aWV3ID0gX3RoaXMkbWFwLnZpZXcsCiAgICAgICAgaW5pdFpvb20gPSBfdGhpcyRtYXAuaW5pdFpvb20sCiAgICAgICAgbWF4Qm91bmRzID0gX3RoaXMkbWFwLm1heEJvdW5kczsKICAgICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywgewogICAgICAgIG1heFpvb206IG1heFpvb20sCiAgICAgICAgbWluWm9vbTogbWluWm9vbSwKICAgICAgICBhdHRyaWJ1dGlvbjogYXR0cmlidXRpb24KICAgICAgfSkuYWRkVG8oc2VsZik7CiAgICAgIHNlbGYuc2V0Vmlldyh2aWV3LCBpbml0Wm9vbSk7CiAgICAgIHNlbGYuc2V0TWF4Qm91bmRzKG1heEJvdW5kcyk7CiAgICAgIHRoaXMuaGFuZGxlQWRkTGF5ZXJzKCk7CiAgICB9LAogICAgaGFuZGxlQWRkTGF5ZXJzOiBmdW5jdGlvbiBoYW5kbGVBZGRMYXllcnMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgc2VsZjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2VsZiA9IF90aGlzMi5tYXAuc2VsZjsKICAgICAgICAgICAgICBpZiAoX3RoaXMyLm1hcC5tYXJrZXJzKSB7CiAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZUxheWVyKF90aGlzMi5tYXAubWFya2Vycyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzMi5tYXAubWFya2VycyA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKHsKICAgICAgICAgICAgICAgIGljb25DcmVhdGVGdW5jdGlvbjogZnVuY3Rpb24gaWNvbkNyZWF0ZUZ1bmN0aW9uKGNsdXN0ZXIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIEwuZGl2SWNvbih7CiAgICAgICAgICAgICAgICAgICAgaHRtbDogY2x1c3Rlci5nZXRBbGxDaGlsZE1hcmtlcnMoKS5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnY2x1c3Rlci1iYXInLAogICAgICAgICAgICAgICAgICAgIGljb25TaXplOiBMLnBvaW50KDQwLCAzMCkKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMyLm1hcC5tYXJrZXJzLmFkZExheWVycyhfdGhpczIuYWRNYXJrZXJPYmplY3RzKTsKICAgICAgICAgICAgICBzZWxmLmFkZExheWVyKF90aGlzMi5tYXAubWFya2Vycyk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZldGNoUmVnaW9uc0ZvckFkdmVydGlzZW1lbnRCeUN1cnJlbnRVc2VySWQ6IGZ1bmN0aW9uIGZldGNoUmVnaW9uc0ZvckFkdmVydGlzZW1lbnRCeUN1cnJlbnRVc2VySWQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCFfdGhpczMuY3VycmVudFVzZXJJc091dGVyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIFtdKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gaGVscGVyU2VydmljZS5mZXRjaFJlZ2lvbnNGb3JBZHZlcnRpc2VtZW50QnlDdXJyZW50VXNlcklkKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBfdGhpczMucmVnaW9ucyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZmV0Y2hBZERlc2lnblR5cGVzOiBmdW5jdGlvbiBmZXRjaEFkRGVzaWduVHlwZXMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKF90aGlzNC4kY2FuKCdsaXN0JywgJ2RpcmVjdG9yeSBhZHZlcnRpc2VtZW50IGRlc2lnbiB0eXBlIGJ5IGFjdGl2ZSBzdGF0dXMnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBbXSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIGhlbHBlclNlcnZpY2UuZ2V0QWREZXNpZ25UeXBlc0J5QWN0aXZlU3RhdHVzKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBfdGhpczQuYWREZXNpZ25UeXBlcyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY3VzdG9tTGFiZWxBZERlc2lnblR5cGU6IGZ1bmN0aW9uIGN1c3RvbUxhYmVsQWREZXNpZ25UeXBlKGlkKSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuYWREZXNpZ25UeXBlcy5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuaWQgPT09IGlkOwogICAgICB9KTsKICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TmFtZShzZWxlY3RlZCk7CiAgICAgIH0KICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIHJlc2V0RmlsdGVyOiBmdW5jdGlvbiByZXNldEZpbHRlcigpIHsKICAgICAgdGhpcy5maWx0ZXJQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbml0aWFsRmlsdGVyUGF5bG9hZCk7CiAgICAgIHRoaXMuc2VhcmNoKCk7CiAgICAgIHRoaXMubWFwLnNlbGYuc2V0Vmlldyh0aGlzLm1hcC52aWV3LCB0aGlzLm1hcC56b29tKTsKICAgIH0sCiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIGhlbHBlclNlcnZpY2UuZ2V0QWRDb25zdHJ1Y3Rpb25zRm9yTWFwKHRoaXMuZmlsdGVyUGF5bG9hZCwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM1LmFkTWFya2VycyA9IHJlcy5kYXRhOwogICAgICAgIF90aGlzNS5hZE1hcmtlck9iamVjdHMgPSBbXTsKICAgICAgICB2YXIgbGlzdCA9IFtdOwogICAgICAgIHJlcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7CiAgICAgICAgICBpZiAoZWxlbWVudC5sYXROdW1iZXIgJiYgZWxlbWVudC5sbmdOdW1iZXIpIHsKICAgICAgICAgICAgbGlzdC5wdXNoKG5ldyBMLm1hcmtlcihbZWxlbWVudC5sYXROdW1iZXIsIGVsZW1lbnQubG5nTnVtYmVyXSwgewogICAgICAgICAgICAgIGljb246IEwuaWNvbih7CiAgICAgICAgICAgICAgICBpY29uVXJsOiBNYXJrZXJJY29uLAogICAgICAgICAgICAgICAgaWNvbkFuY2hvcjogbmV3IEwuUG9pbnQoMTIuNSwgNDApLAogICAgICAgICAgICAgICAgaWNvblNpemU6IG5ldyBMLlBvaW50KDI1LCA0MSkKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5nZXRBZERldGFpbHMoX3RoaXM1LmFkTWFya2Vyc1tpbmRleF0sIGluZGV4KTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIF90aGlzNS5hZE1hcmtlck9iamVjdHMgPSBsaXN0OwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRTZWFyY2hSZXN1bHRNYXJrZXI6IGZ1bmN0aW9uIGFkZFNlYXJjaFJlc3VsdE1hcmtlcihlKSB7CiAgICAgIGlmICh0aGlzLnNlYXJjaFJlc3VsdE1hcmtlcikgewogICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMuc2VhcmNoUmVzdWx0TWFya2VyKTsKICAgICAgfQogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB0aGlzLnNlYXJjaFJlc3VsdE1hcmtlciA9IG5ldyBMLk1hcmtlcihlLmxhdGxuZywgewogICAgICAgIGljb246IG5ldyBNeUN1c3RvbU1hcmtlckZvclNlYXJjaCgpCiAgICAgIH0pLmFkZFRvKHRoaXMubWFwKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHZtLm1hcC5yZW1vdmVMYXllcih2bS5zZWFyY2hSZXN1bHRNYXJrZXIpOwogICAgICB9KTsKICAgIH0sCiAgICBvblNsaWRlU3RhcnQ6IGZ1bmN0aW9uIG9uU2xpZGVTdGFydChzbGlkZSkgewogICAgICB0aGlzLnNsaWRpbmcgPSB0cnVlOwogICAgfSwKICAgIG9uU2xpZGVFbmQ6IGZ1bmN0aW9uIG9uU2xpZGVFbmQoc2xpZGUpIHsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICB9LAogICAgZ2V0QWREZXRhaWxzOiBmdW5jdGlvbiBnZXRBZERldGFpbHMoYWRJbmZvLCBpbmRleCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgLy8gY29uc29sZS5sb2coYWRJbmZvLCBpbmRleCkKICAgICAgLy8gaWYgKCFhZEluZm8uZGV0YWlscykgewogICAgICB0aGlzLm1hcFBvcHVwLnNob3cgPSB0cnVlOwogICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEJ5SWQoJ2NvbnRyYWN0b3ItYWR2ZXJ0aXNpbmctY29uc3RydWN0aW9uJywgYWRJbmZvLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczYuY3VycmVudEFkSW1ncyA9IG51bGw7CiAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5nZXRCeUlkKCdjb250cmFjdG9yLWFkdmVydGlzaW5nLWNvbnN0cnVjdGlvbicsIGFkSW5mby5pZCwgZmFsc2UsIG51bGwsICdzZWNvbmQtYWdlbnQtZmlsZXMnKS50aGVuKGZ1bmN0aW9uIChyZXNGb3JGaWxlcykgewogICAgICAgICAgX3RoaXM2Lm1hcFBvcHVwLmVsZW1lbnQgPSBhZEluZm87CiAgICAgICAgICBfdGhpczYubWFwUG9wdXAuY3VycmVudEFkRGV0YWlscyA9IGFkSW5mbzsKICAgICAgICAgIF90aGlzNi4kYnZNb2RhbC5zaG93KF90aGlzNi5tYXBQb3B1cC5pZCk7CiAgICAgICAgICBfdGhpczYuY3VycmVudEFkSW1ncyA9IHJlc0ZvckZpbGVzLmRhdGEub2JqZWN0UGhvdG9MaXN0OwogICAgICAgICAgaWYgKHJlc0ZvckZpbGVzLmRhdGEucGFzc3BvcnRQaG90b1VybCAmJiByZXNGb3JGaWxlcy5kYXRhLnBhc3Nwb3J0UGhvdG9VcmwudXJsKSB7CiAgICAgICAgICAgIF90aGlzNi5jdXJyZW50QWRJbWdzLnB1c2gocmVzRm9yRmlsZXMuZGF0YS5wYXNzcG9ydFBob3RvVXJsKTsKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzNi4kc2V0KF90aGlzNi5hZE1hcmtlcnNbaW5kZXhdLCAnZGV0YWlscycsIHJlcy5kYXRhLmNvbnRyYWN0b3JBZHZlcnRpc2luZ0NvbnN0cnVjdGlvbkZvclNlY29uZEFnZW50RHRvKTsKICAgICAgICAgIF90aGlzNi4kc2V0KF90aGlzNi5hZE1hcmtlcnNbaW5kZXhdLCAnaW1ncycsIF90aGlzNi5jdXJyZW50QWRJbWdzKTsKICAgICAgICAgIF90aGlzNi5jdXJyZW50QWREZXRhaWxzID0gX3RoaXM2LmFkTWFya2Vyc1tpbmRleF0uZGV0YWlsczsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICBfdGhpczYuJHNldChfdGhpczYuYWRNYXJrZXJzW2luZGV4XSwgJ2RldGFpbHMnLCByZXMuZGF0YS5jb250cmFjdG9yQWR2ZXJ0aXNpbmdDb25zdHJ1Y3Rpb25Gb3JTZWNvbmRBZ2VudER0byk7CiAgICAgICAgICBfdGhpczYuY3VycmVudEFkRGV0YWlscyA9IF90aGlzNi5hZE1hcmtlcnNbaW5kZXhdLmRldGFpbHM7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgIH0pOwogICAgICAvLyB9IGVsc2UgewogICAgICAvLyAgIHRoaXMuJGJ2TW9kYWwuc2hvdyh0aGlzLm1hcFBvcHVwLmlkKTsKICAgICAgLy8gICB0aGlzLmN1cnJlbnRBZEltZ3MgPSBhZEluZm8uaW1ncwogICAgICAvLyAgIHRoaXMubWFwUG9wdXAuZWxlbWVudCA9IGFkSW5mbwogICAgICAvLyAgIHRoaXMubWFwUG9wdXAuY3VycmVudEFkRGV0YWlscyA9IGFkSW5mbwogICAgICAvLyAgIHRoaXMuY3VycmVudEFkRGV0YWlscyA9IHRoaXMuYWRNYXJrZXJzW2luZGV4XS5kZXRhaWxzCiAgICAgIC8vIH0KICAgIH0sCiAgICBjdXN0b21MYWJlbERpc3RyaWN0OiBmdW5jdGlvbiBjdXN0b21MYWJlbERpc3RyaWN0KG9wdCkgewogICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLmRpc3RyaWN0cy5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuaWQgPT09IG9wdDsKICAgICAgfSk7CiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQodGhpcy5nZXROYW1lKHsKICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LAogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVegogICAgICAgIH0pKTsKICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgY3VzdG9tTGFiZWxSZWdpb246IGZ1bmN0aW9uIGN1c3RvbUxhYmVsUmVnaW9uKG9wdCkgewogICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLnJlZ2lvbnMuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLnJlZ2lvbklkID09PSAob3B0LnJlZ2lvbklkID8gb3B0LnJlZ2lvbklkIDogb3B0KTsKICAgICAgfSk7CiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQodGhpcy5nZXROYW1lKHsKICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQucmVnaW9uTmFtZVJ1LAogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5yZWdpb25OYW1lTHQsCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLnJlZ2lvbk5hbWVVegogICAgICAgIH0pKTsKICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgcmVnaW9uU2VsZWN0ZWQ6IGZ1bmN0aW9uIHJlZ2lvblNlbGVjdGVkKCRldmVudCkgewogICAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cywKICAgICAgICBfdGhpczcgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgZG9udFJlc2V0RGlzdHJpY3Q7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGRvbnRSZXNldERpc3RyaWN0ID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgICAgICAgICBpZiAoIWRvbnRSZXNldERpc3RyaWN0KSB7CiAgICAgICAgICAgICAgICBfdGhpczcuZmlsdGVyUGF5bG9hZC5kaXN0cmljdElkcyA9IFtdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoISgkZXZlbnQgJiYgJGV2ZW50Lmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGhlbHBlclNlcnZpY2UuZ2V0R2VvTG9jYXRpb25zQnlNdWx0aXBsZVBhcmVudElkcygkZXZlbnQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgX3RoaXM3LmRpc3RyaWN0cyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY3VzdG9tTGFiZWxDb250cmFjdG9yOiBmdW5jdGlvbiBjdXN0b21MYWJlbENvbnRyYWN0b3Iob3B0KSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuY29udHJhY3RvcnMuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmlkID09PSBvcHQ7CiAgICAgIH0pOwogICAgICBpZiAoc2VsZWN0ZWQpIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KHNlbGVjdGVkLmZ1bGxOYW1lKTsKICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgZGVib3VuY2VTZWFyY2hDb250cmFjdG9yczogZnVuY3Rpb24gZGVib3VuY2VTZWFyY2hDb250cmFjdG9ycyhzZWFyY2hUZXh0KSB7CiAgICAgIHZhciBfYXJndW1lbnRzMiA9IGFyZ3VtZW50cywKICAgICAgICBfdGhpczggPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgc2VsZWN0TmFtZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2VsZWN0TmFtZSA9IF9hcmd1bWVudHMyLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czJbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMyWzFdIDogJyc7CiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzOC5kZWJvdW5jZSk7CiAgICAgICAgICAgICAgX3RoaXM4LmRlYm91bmNlID0gc2V0VGltZW91dCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5mZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoc2VhcmNoVGV4dCwgc2VsZWN0TmFtZSk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICAgICAgICAgIH0pKSwgMTAwMCk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZldGNoQ29udHJhY3RvcnNXaXRoS2V5d29yZDogZnVuY3Rpb24gZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkKGtleXdvcmQsIHNlbGVjdE5hbWUpIHsKICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdOwogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxOwogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnOwogICAgICBpZiAoc2VsZWN0TmFtZSA9PT0gJ2NvbnRyYWN0b3InKSB7CiAgICAgICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzKCk7CiAgICAgIH0KICAgIH0sCiAgICBmZXRjaENvbnRyYWN0b3JzOiBmdW5jdGlvbiBmZXRjaENvbnRyYWN0b3JzKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChfdGhpczkuJGNhbignbGlzdCcsICdjb250cmFjdG9yJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgW10pOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX3RoaXM5LmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gdHJ1ZTsKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGNydWRBbmRMaXN0c1NlcnZpY2Uuc2VhcmNoTGlzdFdpdGhLZXl3b3JkKCdjb250cmFjdG9yJywgX3RoaXM5LmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLCAnYnktY29udHJhY3RvcicpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgdmFyIF90aGlzOSRjb250cmFjdG9yczsKICAgICAgICAgICAgICAgIChfdGhpczkkY29udHJhY3RvcnMgPSBfdGhpczkuY29udHJhY3RvcnMpLnB1c2guYXBwbHkoX3RoaXM5JGNvbnRyYWN0b3JzLCBfdG9Db25zdW1hYmxlQXJyYXkocmVzLmRhdGEubGlzdCkpOwogICAgICAgICAgICAgICAgX3RoaXM5Lmhhc05leHRQYWdlQ29udHJhY3RvcnMgPSByZXMuZGF0YS50b3RhbCAvIF90aGlzOS5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5pdGVtc1BlclBhZ2UgPiBfdGhpczkuY29udHJhY3RvclNlYXJjaFBheWxvYWQucGFnZTsKICAgICAgICAgICAgICAgIF90aGlzOS5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5wYWdlICs9IDE7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgX3RoaXM5LmNvbnRyYWN0b3JzID0gW107CiAgICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczkuaXNMb2FkaW5nQ29udHJhY3RvcnMgPSBmYWxzZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY29udHJhY3RvclJlYWNoZWRFbmRPZkxpc3Q6IGZ1bmN0aW9uIGNvbnRyYWN0b3JSZWFjaGVkRW5kT2ZMaXN0KGUpIHsKICAgICAgdmFyIHNlbGVjdE5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnOwogICAgICBpZiAoZSkgewogICAgICAgIHRoaXMuZmV0Y2hDb250cmFjdG9ycygpOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgJ2ZpbHRlclBheWxvYWQucmVnaW9uSWRzJzogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RlZChuZXdWYWwpOwogICAgICB9CiAgICB9LAogICAgYWRNYXJrZXJPYmplY3RzOiBmdW5jdGlvbiBhZE1hcmtlck9iamVjdHMoKSB7CiAgICAgIHRoaXMuaGFuZGxlQWRkTGF5ZXJzKCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgY3VycmVudFVzZXJJc091dGVyOiBmdW5jdGlvbiBjdXJyZW50VXNlcklzT3V0ZXIoKSB7CiAgICAgIHJldHVybiBUb2tlblNlcnZpY2UuZ2V0SXNPdXRlcigpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;EACAA;IACA;IACAC;EACA;EACAC;IACA;IACAC;EACA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACA/B;QACAE;QACAE;QACAD;QACAF;MACA;MACA+B;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IAAA;IAAA;MAAA;QAAA;UAAA;YACAC;YACA;YACA;YACA;YACAA;YACA;YACAA;YACA;YACAA;YACA;YACAA;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EACA;EACAC;IACAC;MACA;MACA;MACA;QAAAjC;QAAAC;QAAAC;QAAAG;QAAAD;QAAAD;QAAAG;MACA4B;QACAjC;QACAC;QACAG;MACA;MACAL;MACAA;MACA;IACA;IACAmC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAnC;cACA;gBACAA;cACA;cACA;gBACAoC;kBACA;oBACAC;oBACAC;oBACAC;kBACA;gBACA;cACA;cACA;cACAvC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAwC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,KACA;gBAAA;gBAAA;cAAA;cAAA,kCACA;YAAA;cAAA;cAAA,OAEAC,4DACAC;gBACA;cACA,GACAC;gBACAC;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,IACA;gBAAA;gBAAA;cAAA;cAAA,kCACA;YAAA;cAAA;cAAA,OAEAJ,cACAK,iCACAJ;gBACA;cACA,GACAC;gBACAC;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAG;MACA;QAAA;MAAA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAR,iEACAC;QACA;QACA;QACA;QACAQ;UACA;YACAC;cACAC;gBACAC;gBACAC;gBACAf;cACA;YACA;cAAA;YAAA;UACA;QACA;QACA;MACA,GACAI;QACAC;MACA;IACA;IACAW;MACA;QACA;MACA;MACA;MACA;QAAAH;MAAA,GACAI,gBACAC;QACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACAC,8EACApB;QACA;QACAoB,iHACApB;UACA;UACA;UACA;UACA;UACA;YACA;UACA;UACA;UACA;UACA;QACA,GACAC;UACAC;UACA;UACA;QACA;MACA,GACAD;QACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAmB;MACA;QAAA;MAAA;MACA;QACA;UACAC;UACAC;UACAC;QACA;MAEA;MACA;IACA;IACAC;MACA;QAAA;MAAA;MACA;QACA;UACAH;UACAC;UACAC;QACA;MAEA;MACA;IACA;IACAE;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAAC;cACA;gBACA;cACA;cAAA,MACAC;gBAAA;gBAAA;cAAA;cAAA;cAAA,OAEA7B,yDACAC;gBACA;cACA,GACAC;gBACAC;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAEA;IACA2B;MACA;QAAA;MAAA;MACA;QACA;MACA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAAC;cACAC;cACA;gBAAA;kBAAA;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,IACA;gBAAA;gBAAA;cAAA;cAAA,kCACA;YAAA;cAEA;cAAA;cAAA,OACAd,yGACApB;gBAAA;gBACA;gBACA;gBACA;cACA,GACAC;gBACAC;gBACA;cACA,GACAiC;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;MACAC;QACA;MACA;IACA;IACAvE;MACA;IACA;EACA;EACAwE;IACAC;MACA;IACA;EACA;AACA","names":["components","Popup","mounted","LeafletMarkercluster","data","filterPayload","passportNumber","designTypeIds","contractorIds","districtIds","regionIds","map","self","maxZoom","minZoom","initZoom","view","attribution","maxBounds","markers","adMarkers","adMarkerObjects","adDesignTypes","searchResultMarker","slide","sliding","currentAdDetails","currentAdImgs","strForImgs","publicPath","districts","regions","contractorSearchPayload","hasNextPageContractors","contractors","debounce","isLoadingContractors","initialFilterPayload","mapPopup","id","show","element","created","store","methods","initMap","L","handleAddLayers","iconCreateFunction","html","className","iconSize","fetchRegionsForAdvertisementByCurrentUserId","helperService","then","catch","console","fetchAdDesignTypes","getAdDesignTypesByActiveStatus","customLabelAdDesignType","resetFilter","search","res","list","icon","iconUrl","iconAnchor","addSearchResultMarker","addTo","on","vm","onSlideStart","onSlideEnd","getAdDetails","crudAndListsService","customLabelDistrict","nameRu","nameLt","nameUz","customLabelRegion","regionSelected","dontResetDistrict","$event","customLabelContractor","debounceSearchContractors","selectName","clearTimeout","fetchContractorsWithKeyword","fetchContractors","finally","contractorReachedEndOfList","watch","handler","computed","currentUserIsOuter"],"sourceRoot":"src/modules/advertisement/modules/ad_monitoring","sources":["VanillaLeaflet.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"col-md-12 text-center\">\r\n        <div class=\"h4 mb-4 d-inline-block\">{{ $t('submodules.ad_monitoring.title') }}</div>\r\n      </div>\r\n      <div class=\"card\">\r\n        <div class=\"card-body p-0\">\r\n          <div class=\"row p-4\">\r\n            <div class=\"col-12 col-sm-6 col-md-4 col-lg-2 d-flex align-items-end\">\r\n              <BaseInputWithValidation\r\n                  not-required\r\n                  label-on-top\r\n                  v-model=\"filterPayload.passportNumber\"\r\n                  :label=\"$t('column.ad_construction_passport_number')\"\r\n              />\r\n            </div>\r\n            <div v-if=\"!currentUserIsOuter\" class=\"col-12 col-sm-6 col-md-4 col-lg-2 d-flex align-items-end\">\r\n              <BaseMultiselectWithValidation\r\n                  not-required\r\n                  v-model=\"filterPayload.contractorIds\"\r\n                  multiple\r\n                  :has-next-page=\"hasNextPageContractors\"\r\n                  @reachedEndOfList=\"contractorReachedEndOfList\"\r\n                  @search-change=\"debounceSearchContractors\"\r\n                  :searchable=\"true\"\r\n                  preserve-search\r\n                  :clear-on-select=\"false\"\r\n                  :close-on-select=\"false\"\r\n                  :loading=\"isLoadingContractors\"\r\n                  :internal-search=\"false\"\r\n                  :options=\"contractors.map(e => e.id)\"\r\n                  :hide-selected=\"true\"\r\n                  :label=\"$t('submodules.contractor.title')\"\r\n                  label-on-top\r\n                  style=\"width: 100%;\"\r\n                  placeholder=\"\"\r\n                  :custom-label=\"customLabelContractor\"\r\n                  open-direction=\"bottom\"\r\n                  :max-height=\"600\"\r\n                  :show-labels=\"false\"\r\n              />\r\n            </div>\r\n            <div v-if=\"!currentUserIsOuter\" class=\"col-12 col-sm-6 col-md-4 col-lg-2 d-flex align-items-end\">\r\n              <BaseMultiselectWithValidation\r\n                  not-required\r\n                  multiple\r\n                  v-model=\"filterPayload.regionIds\"\r\n                  :options=\"regions.map(e => e.regionId)\"\r\n                  :hide-selected=\"true\"\r\n                  :close-on-select=\"false\"\r\n                  :label=\"$t('column.region')\"\r\n                  label-on-top\r\n                  placeholder=\"\"\r\n                  :custom-label=\"customLabelRegion\"\r\n                  open-direction=\"bottom\"\r\n                  style=\"width: 100%;\"\r\n                  :max-height=\"600\"\r\n                  :show-labels=\"false\"\r\n              />\r\n            </div>\r\n            <div v-if=\"!currentUserIsOuter\" class=\"col-12 col-sm-6 col-md-4 col-lg-2 d-flex align-items-end\">\r\n              <BaseMultiselectWithValidation\r\n                  not-required\r\n                  multiple\r\n                  v-model=\"filterPayload.districtIds\"\r\n                  :options=\"districts.map(e => e.id)\"\r\n                  :hide-selected=\"true\"\r\n                  :close-on-select=\"false\"\r\n                  :label=\"$t('column.district')\"\r\n                  label-on-top\r\n                  placeholder=\"\"\r\n                  :custom-label=\"customLabelDistrict\"\r\n                  open-direction=\"bottom\"\r\n                  style=\"width: 100%;\"\r\n                  :max-height=\"600\"\r\n                  :show-labels=\"false\"\r\n              />\r\n            </div>\r\n            <div v-if=\"!currentUserIsOuter\" class=\"col-12 col-sm-6 col-md-4 col-lg-2 col-xl-3 d-flex align-items-end\">\r\n              <BaseMultiselectWithValidation\r\n                  not-required\r\n                  multiple\r\n                  v-model=\"filterPayload.designTypeIds\"\r\n                  :options=\"adDesignTypes.map(({id}) => id)\"\r\n                  :hide-selected=\"true\"\r\n                  :close-on-select=\"false\"\r\n                  :label=\"$t('column.ad_design_type')\"\r\n                  placeholder=\"\"\r\n                  label-on-top\r\n                  :custom-label=\"customLabelAdDesignType\"\r\n                  open-direction=\"bottom\"\r\n                  style=\"width: 100%;\"\r\n                  :max-height=\"600\"\r\n                  :show-labels=\"false\"\r\n              />\r\n            </div>\r\n            <div class=\"col-12 col-sm-6 col-md-4 col-lg-2 col-xl-1 d-flex align-items-end\">\r\n              <b-button\r\n                  variant=\"primary\"\r\n                  size=\"sm\"\r\n                  class=\"me-2\"\r\n                  @click=\"search\"\r\n              >\r\n                <i class=\"mdi mdi-magnify font-size-20 align-middle\"></i>\r\n              </b-button>\r\n              <b-button\r\n                  variant=\"warning\"\r\n                  size=\"sm\"\r\n                  @click=\"resetFilter\"\r\n              >\r\n                <i class=\"mdi mdi-refresh font-size-20 align-middle\"></i>\r\n              </b-button>\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"col-12\">\r\n              <v-map id=\"map\" ref=\"map\"></v-map>\r\n            </div>\r\n          </div>\r\n          <b-modal :id=\"mapPopup.id\" size=\"xl\" v-model=\"mapPopup.show\">\r\n            <template #modal-header v-if=\"!mapPopup.element.details\">\r\n              <h4 class=\"m-0\"><strong>{{ $t('submodules.ad_monitoring.ad_passport_details_title') }}</strong></h4>\r\n            </template>\r\n            <template #modal-title v-else>\r\n              <h4 class=\"m-0 mb-1 d-flex justify-content-between\">\r\n                <strong>{{ $t('submodules.ad_monitoring.ad_passport_details_title') }}</strong>\r\n                <strong v-if=\"currentAdDetails.isUzAvtoYul\" style=\"color: green;\">{{ $t('column.uzavtoyul') }}</strong>\r\n                <strong>{{ $t('column.number_sign') }}: {{ currentAdDetails.passportNumber }}</strong>\r\n              </h4>\r\n            </template>\r\n            <template #modal-footer>&nbsp;</template>\r\n            <popup v-if=\"mapPopup.show\"\r\n                   :currentAdDetails=\"currentAdDetails\"\r\n                   :element=\"mapPopup.element\"\r\n                   :publicPath=\"publicPath\"\r\n                   :currentAdImgs=\"currentAdImgs\"\r\n                   :onSlideStart=\"onSlideStart\"\r\n                   :onSlideEnd=\"onSlideEnd\"\r\n            ></popup>\r\n          </b-modal>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { LMap } from \"vue2-leaflet\";\r\nimport helperService from '@/shared/services/helper.service'\r\nimport L from \"leaflet\";\r\nimport LeafletMarkercluster from \"leaflet.markercluster\";\r\nimport store from \"@/state/store\";\r\n\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"leaflet.markercluster/dist/MarkerCluster.css\";\r\nimport \"leaflet.markercluster/dist/MarkerCluster.Default.css\";\r\nimport MarkerIcon from \"leaflet/dist/images/marker-icon.png\";\r\nimport Popup from \"./Popup\";\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\";\r\nimport { TokenService } from \"@/shared/services/storage.service\";\r\n\r\nconst MAIN_API_URL = 'contractor-advertising-construction'\r\nexport default {\r\n  components: {\r\n    \"v-map\": LMap,\r\n    Popup\r\n  },\r\n  mounted() {\r\n    this.initMap();\r\n    LeafletMarkercluster;\r\n  },\r\n  data() {\r\n    return {\r\n      filterPayload: {\r\n        passportNumber: '',\r\n        designTypeIds: '',\r\n        contractorIds: '',\r\n        districtIds: '',\r\n        regionIds: '',\r\n      },\r\n      map: {\r\n        self: null,\r\n        maxZoom: 19,\r\n        minZoom: 6,\r\n        initZoom: 6,\r\n        view: [41.5, 64.5],\r\n        attribution: [41.5, 64.5],\r\n        maxBounds: [[37, 55], [46, 74]],\r\n        markers: null,\r\n      },\r\n      adMarkers: [],\r\n      adMarkerObjects: [],\r\n      adDesignTypes: [],\r\n      searchResultMarker: null,\r\n      slide: 0,\r\n      sliding: null,\r\n      currentAdDetails: {},\r\n      currentAdImgs: [],\r\n      strForImgs: '',\r\n      publicPath: process.env.BASE_URL,\r\n      districts: [],\r\n      regions: [],\r\n      contractorSearchPayload: {},\r\n      hasNextPageContractors: false,\r\n      contractors: [],\r\n      debounce: null,\r\n      isLoadingContractors: false,\r\n      initialFilterPayload: {\r\n        passportNumber: '',\r\n        contractorIds: [],\r\n        regionIds: [],\r\n        districtIds: [],\r\n        designTypeIds: []\r\n      },\r\n      mapPopup: {\r\n        id: 'map-popup',\r\n        show: false,\r\n        element: {},\r\n      },\r\n    };\r\n  },\r\n  async created() {\r\n    store.commit(\"SET_GLOBAL_LOADING\", true);\r\n    this.contractorSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n    this.var_default_search_payload.itemsPerPage = 500;\r\n    this.search()\r\n    store.commit(\"SET_GLOBAL_LOADING\", true);\r\n    this.fetchContractors()\r\n    store.commit(\"SET_GLOBAL_LOADING\", true);\r\n    this.fetchAdDesignTypes()\r\n    store.commit(\"SET_GLOBAL_LOADING\", true);\r\n    this.fetchRegionsForAdvertisementByCurrentUserId()\r\n    store.commit(\"SET_GLOBAL_LOADING\", false);\r\n  },\r\n  methods: {\r\n    initMap() {\r\n      const { mapObject } = this.$refs.map;\r\n      this.map.self = mapObject\r\n      const { self, maxZoom, minZoom, attribution, view, initZoom, maxBounds } = this.map;\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        maxZoom: maxZoom,\r\n        minZoom: minZoom,\r\n        attribution: attribution,\r\n      }).addTo(self);\r\n      self.setView(view, initZoom);\r\n      self.setMaxBounds(maxBounds);\r\n      this.handleAddLayers();\r\n    },\r\n    async handleAddLayers() {\r\n      const { self } = this.map;\r\n      if (this.map.markers) {\r\n        self.removeLayer(this.map.markers);\r\n      }\r\n      this.map.markers = L.markerClusterGroup({\r\n        iconCreateFunction: (cluster) => {\r\n          return L.divIcon({\r\n            html: cluster.getAllChildMarkers().length,\r\n            className: 'cluster-bar',\r\n            iconSize: L.point(40, 30)\r\n          });\r\n        },\r\n      });\r\n      this.map.markers.addLayers(this.adMarkerObjects);\r\n      self.addLayer(this.map.markers);\r\n    },\r\n    async fetchRegionsForAdvertisementByCurrentUserId() {\r\n      if (this.currentUserIsOuter) {\r\n        return [];\r\n      }\r\n      await helperService.fetchRegionsForAdvertisementByCurrentUserId()\r\n          .then(res => {\r\n            this.regions = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    async fetchAdDesignTypes() {\r\n      if (!this.$can('list', 'directory advertisement design type by active status')) {\r\n        return [];\r\n      }\r\n      await helperService\r\n          .getAdDesignTypesByActiveStatus()\r\n          .then((res) => {\r\n            this.adDesignTypes = res.data;\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    customLabelAdDesignType(id) {\r\n      let selected = this.adDesignTypes.find(e => e.id === id);\r\n      if (selected) {\r\n        return this.getName(selected)\r\n      }\r\n      return '';\r\n    },\r\n    resetFilter() {\r\n      this.filterPayload = Object.assign({}, this.initialFilterPayload)\r\n      this.search()\r\n      this.map.self.setView(this.map.view, this.map.zoom);\r\n    },\r\n    search() {\r\n      helperService.getAdConstructionsForMap(this.filterPayload, true)\r\n          .then(res => {\r\n            this.adMarkers = res.data\r\n            this.adMarkerObjects = []\r\n            let list = [];\r\n            res.data.forEach((element, index) => {\r\n              if (element.latNumber && element.lngNumber) {\r\n                list.push(new L.marker([element.latNumber, element.lngNumber], {\r\n                  icon: L.icon({\r\n                    iconUrl: MarkerIcon,\r\n                    iconAnchor: new L.Point(12.5, 40),\r\n                    iconSize: new L.Point(25, 41),\r\n                  })\r\n                }).on('click', () => this.getAdDetails(this.adMarkers[index], index)))\r\n              }\r\n            });\r\n            this.adMarkerObjects = list;\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    addSearchResultMarker(e) {\r\n      if (this.searchResultMarker) {\r\n        this.map.removeLayer(this.searchResultMarker)\r\n      }\r\n      let vm = this\r\n      this.searchResultMarker = new L.Marker(e.latlng, { icon: new MyCustomMarkerForSearch() })\r\n          .addTo(this.map)\r\n          .on('click', function (e) {\r\n            vm.map.removeLayer(vm.searchResultMarker)\r\n          });\r\n    },\r\n    onSlideStart(slide) {\r\n      this.sliding = true\r\n    },\r\n    onSlideEnd(slide) {\r\n      this.sliding = false\r\n    },\r\n    getAdDetails(adInfo, index) {\r\n      // console.log(adInfo, index)\r\n      // if (!adInfo.details) {\r\n      this.mapPopup.show = true\r\n      crudAndListsService.getById('contractor-advertising-construction', adInfo.id)\r\n          .then(res => {\r\n            this.currentAdImgs = null\r\n            crudAndListsService.getById('contractor-advertising-construction', adInfo.id, false, null, 'second-agent-files')\r\n                .then(resForFiles => {\r\n                  this.mapPopup.element = adInfo\r\n                  this.mapPopup.currentAdDetails = adInfo\r\n                  this.$bvModal.show(this.mapPopup.id);\r\n                  this.currentAdImgs = resForFiles.data.objectPhotoList\r\n                  if (resForFiles.data.passportPhotoUrl && resForFiles.data.passportPhotoUrl.url) {\r\n                    this.currentAdImgs.push(resForFiles.data.passportPhotoUrl)\r\n                  }\r\n                  this.$set(this.adMarkers[index], 'details', res.data.contractorAdvertisingConstructionForSecondAgentDto)\r\n                  this.$set(this.adMarkers[index], 'imgs', this.currentAdImgs)\r\n                  this.currentAdDetails = this.adMarkers[index].details\r\n                })\r\n                .catch(e => {\r\n                  console.log(e)\r\n                  this.$set(this.adMarkers[index], 'details', res.data.contractorAdvertisingConstructionForSecondAgentDto)\r\n                  this.currentAdDetails = this.adMarkers[index].details\r\n                })\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n      // } else {\r\n      //   this.$bvModal.show(this.mapPopup.id);\r\n      //   this.currentAdImgs = adInfo.imgs\r\n      //   this.mapPopup.element = adInfo\r\n      //   this.mapPopup.currentAdDetails = adInfo\r\n      //   this.currentAdDetails = this.adMarkers[index].details\r\n      // }\r\n    },\r\n    customLabelDistrict(opt) {\r\n      let selected = this.districts.find(e => e.id === opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelRegion(opt) {\r\n      let selected = this.regions.find(e => e.regionId === (opt.regionId ? opt.regionId : opt));\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.regionNameRu,\r\n          nameLt: selected.regionNameLt,\r\n          nameUz: selected.regionNameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    async regionSelected($event, dontResetDistrict = false) {\r\n      if (!dontResetDistrict) {\r\n        this.filterPayload.districtIds = []\r\n      }\r\n      if ($event && $event.length) {\r\n        // GET DISTRICTS\r\n        await helperService.getGeoLocationsByMultipleParentIds($event)\r\n            .then(res => {\r\n              this.districts = res.data\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n            })\r\n      }\r\n    },\r\n    customLabelContractor(opt) {\r\n      let selected = this.contractors.find(e => e.id === opt);\r\n      if (selected) {\r\n        return `${selected.fullName}`\r\n      }\r\n      return ``;\r\n    },\r\n    async debounceSearchContractors(searchText, selectName = '') {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(async () => {\r\n        await this.fetchContractorsWithKeyword(searchText, selectName);\r\n      }, 1000);\r\n    },\r\n    fetchContractorsWithKeyword(keyword, selectName) {\r\n      this.contractors = []\r\n      this.contractorSearchPayload.page = 1\r\n      this.contractorSearchPayload.keyword = keyword ? keyword : ''\r\n      if (selectName === 'contractor') {\r\n        this.fetchContractors()\r\n      }\r\n    },\r\n    async fetchContractors() {\r\n      if (!this.$can('list','contractor')) {\r\n        return [];\r\n      }\r\n      this.isLoadingContractors = true\r\n      await crudAndListsService.searchListWithKeyword('contractor', this.contractorSearchPayload, 'by-contractor')\r\n          .then(res => {\r\n            this.contractors.push(...res.data.list)\r\n            this.hasNextPageContractors = res.data.total / this.contractorSearchPayload.itemsPerPage > this.contractorSearchPayload.page\r\n            this.contractorSearchPayload.page += 1\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n            this.contractors = []\r\n          })\r\n          .finally(() => {\r\n            this.isLoadingContractors = false\r\n          })\r\n    },\r\n    contractorReachedEndOfList(e, selectName = '') {\r\n      if (e) {\r\n        this.fetchContractors()\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    'filterPayload.regionIds': {\r\n      handler(newVal, oldVal) {\r\n        this.regionSelected(newVal);\r\n      },\r\n    },\r\n    adMarkerObjects() {\r\n      this.handleAddLayers();\r\n    },\r\n  },\r\n  computed: {\r\n    currentUserIsOuter() {\r\n      return TokenService.getIsOuter();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n#map {\r\n  height: calc(100vh - 300px);\r\n  z-index: 1;\r\n}\r\n</style>\r\n<style>\r\n.cluster-bar {\r\n  background: #efecec;\r\n  color: #283593;\r\n  border-radius: 10px;\r\n  outline: 1px solid #7d8acf;\r\n  text-align: center;\r\n  line-height: 30px;\r\n  box-shadow: 0 3px 5px #a5aac9;\r\n}\r\n\r\n.multiselect__content-wrapper {\r\n  z-index: 500 !important;\r\n}\r\n</style>"]}]}