{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\profile\\profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\profile\\profile.vue","mtime":1674799497786},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5kb3QtYWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuc3RpY2t5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7Ci8vIGltcG9ydCBMYXlvdXQgZnJvbSAiQC9yb3V0ZXIvbGF5b3V0cy9tYWluIjsKLy8gaW1wb3J0IFBhZ2VIZWFkZXIgZnJvbSAiQC9jb21wb25lbnRzL3BhZ2UtaGVhZGVyIjsKaW1wb3J0IEFjY291bnRTZXJ2aWNlIGZyb20gIi4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9wcm9maWxlL2FjY291bnQuc2VydmljZSI7CmltcG9ydCBUZW1wbGF0ZUxvZ29Db21wb25lbnQgZnJvbSAiLi4vLi4vY29tcG9uZW50cy90ZW1wbGF0ZS1sb2dvLWNvbXBvbmVudC90ZW1wbGF0ZS1sb2dvLWNvbXBvbmVudCI7CmltcG9ydCBNYW51YWxTZXJ2aWNlIGZyb20gIi4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9wcm9maWxlL21hbnVhbC5zZXJ2aWNlIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGFwcENvbmZpZyBmcm9tICJAL2FwcC5jb25maWciOwppbXBvcnQgeyBUb2tlblNlcnZpY2UgfSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9zdG9yYWdlLnNlcnZpY2UiOwppbXBvcnQgbWVzc2VuZ2VyU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9tZXNzZW5nZXJTZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQcm9maWxlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHVibGljUGF0aDogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgICAgIGxvY2FsVXNlckF2YXRhclVybDogbnVsbCwKICAgICAgdXNlckF2YXRhckxvYWRpbmc6IGZhbHNlLAogICAgICBpbm5lcldpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgdXNlckZ1bGxOYW1lOiBUb2tlblNlcnZpY2UuZ2V0RnVsbE5hbWUoKSwKICAgICAgdXNlcklkOiBUb2tlblNlcnZpY2UuZ2V0VXNlcklkKCksCiAgICAgIGxvYWRlckVkaXQ6IGZhbHNlLAogICAgICBmaWxlRm9yVXNlckF2YXRhcjogbnVsbCwKICAgICAgdXNlcl9pbmZvOiB7CiAgICAgICAgcHJvZmlsZV9pbWc6IHJlcXVpcmUoIi4uLy4uL2Fzc2V0cy9pbWFnZXMvcHJvZmlsZS9wcm9maWxlLWF2YXRhci5wbmciKQogICAgICB9LAogICAgICBicmVhZGNydW1iczogW3sKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdhY3Rpb25zLnByb2ZpbGUnKSwKICAgICAgICBocmVmOiAiIyIKICAgICAgfV0sCiAgICAgIGFwcENvbmZpZzogYXBwQ29uZmlnLAogICAgICB0aXRsZTogdGhpcy4kdCgnYWN0aW9ucy5wcm9maWxlJyksCiAgICAgIGl0ZW06IHsKICAgICAgICBmdWxsTmFtZTogIiIsCiAgICAgICAgdXNlck5hbWU6ICIiLAogICAgICAgIHBob25lTnVtYmVyOiAiIiwKICAgICAgICBtYWlsOiAiIiwKICAgICAgICBlbXBsb3llZTogewogICAgICAgICAgcGluZmw6ICIiLAogICAgICAgICAgaW5uOiAiIiwKICAgICAgICAgIGRhdGVPZkJpcnRoOiAiIgogICAgICAgIH0sCiAgICAgICAgdHJ1c3RlZFVzZXJzOiBbXSwKICAgICAgICBhdmF0YXJVcmw6ICIiCiAgICAgIH0sCiAgICAgIGNoYW5nZVBhc3N3b3JkTW9kYWw6IGZhbHNlLAogICAgICBhY2NvdW50OiB7CiAgICAgICAgY3VycmVudFBhc3N3b3JkOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgcmVQYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgbG9hZGluZ0J1dHRvbjogZmFsc2UsCiAgICAgIGlucHV0VHlwZTogdHJ1ZSwKICAgICAgYWxsRXJyb3JzOiB7fSwKICAgICAgZWRpdEFjY291bnRJbmZvOiBmYWxzZSwKICAgICAgaXRlbUNvcHk6IHt9LAogICAgICBnbG9iYWxSZWdleFBpbmZsOiBuZXcgUmVnRXhwKCdeXFxkezE0fSQnKSwKICAgICAgZ2xvYmFsUmVnZXhJbm46IG5ldyBSZWdFeHAoJ15cXGR7OX0kJyksCiAgICAgIGdsb2JhbFJlZ2V4RGF0ZU9mQmlydGg6IG5ldyBSZWdFeHAoJ15cXGR7Mn0uXFxkezJ9LlxcZHs0fSQnKSwKICAgICAgbG9hZGluZ1VzZXI6IGZhbHNlLAogICAgICB1c2VyTGlzdDogW10sCiAgICAgIGxvYWRpbmdDb250ZW50OiBmYWxzZSwKICAgICAgdXBsb2FkRmlsZTogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVVzZXJBdmF0YXI6IGZ1bmN0aW9uIHVwZGF0ZVVzZXJBdmF0YXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMudXNlckF2YXRhckxvYWRpbmcgPSB0cnVlOwogICAgICBtZXNzZW5nZXJTZXJ2aWNlLmNoYW5nZVVzZXJQcm9maWxlQXZhdGFyKHRoaXMuZmlsZUZvclVzZXJBdmF0YXIpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgX3RoaXMudXNlckF2YXRhckxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBpZiAocnMuZGF0YSkgewogICAgICAgICAgX3RoaXMubG9jYWxVc2VyQXZhdGFyVXJsID0gcnMuZGF0YTsKICAgICAgICAgIFRva2VuU2VydmljZS5zZXRVc2VyQXZhdGFyVXJsKHJzLmRhdGEpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICBfdGhpcy51c2VyQXZhdGFyTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICB1c2VyQXZhdGFyQ2xpY2tlZDogZnVuY3Rpb24gdXNlckF2YXRhckNsaWNrZWQoKSB7CiAgICAgIHRoaXMuJHJlZnMudXNlckF2YXRhckZpbGVSZWYuJGVsLmZpcnN0Q2hpbGQuY2xpY2soKTsKICAgIH0sCiAgICBteURhdGVNYXNrOiBmdW5jdGlvbiBteURhdGVNYXNrKHZhbHVlKSB7CiAgICAgIHZhciByZWdleCA9IFsvWzB8MXwyfDNdL107CiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZVswXSA9PT0gMykgewogICAgICAgICAgcmVnZXgucHVzaCgvWzB8MV0vKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVnZXgucHVzaCgvWzAtOV0vKTsKICAgICAgICB9CiAgICAgICAgcmVnZXgucHVzaCgvWy5dLyk7CiAgICAgICAgcmVnZXgucHVzaCgvWzB8MV0vKTsKICAgICAgICBpZiAodmFsdWVbM10gPT09IDEpIHsKICAgICAgICAgIHJlZ2V4LnB1c2goL1swfDF8Ml0vKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVnZXgucHVzaCgvWzAtOV0vKTsKICAgICAgICB9CiAgICAgICAgcmVnZXgucHVzaCgvWy5dLyk7CiAgICAgICAgcmVnZXgucHVzaCgvWzF8Ml0vKTsKICAgICAgICByZWdleC5wdXNoKC9bMC05XS8pOwogICAgICAgIHJlZ2V4LnB1c2goL1swLTldLyk7CiAgICAgICAgcmVnZXgucHVzaCgvWzAtOV0vKTsKICAgICAgfQogICAgICByZXR1cm4gcmVnZXg7CiAgICB9LAogICAgc2V0TG9hZGluZ0NvbnRlbnQ6IGZ1bmN0aW9uIHNldExvYWRpbmdDb250ZW50KHZhbHVlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nQ29udGVudCA9IHZhbHVlOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2VhcmNoVXNlckJ5U3RyaW5nOiBmdW5jdGlvbiBzZWFyY2hVc2VyQnlTdHJpbmcoKSB7CiAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzLAogICAgICAgIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBzZWFyY2gsIGZpbHRlcjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2VhcmNoID0gX2FyZ3VtZW50cy5sZW5ndGggPiAwICYmIF9hcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMF0gOiAiIjsKICAgICAgICAgICAgICBmaWx0ZXIgPSB7CiAgICAgICAgICAgICAgICBTZWFyY2g6IHNlYXJjaCwKICAgICAgICAgICAgICAgIFNvcnRDb2x1bW46ICIiLAogICAgICAgICAgICAgICAgT3JkZXJUeXBlOiAiIiwKICAgICAgICAgICAgICAgIFBhZ2VOdW1iZXI6IDEsCiAgICAgICAgICAgICAgICBQYWdlTGltaXQ6IDEwMDAKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF90aGlzMy5sb2FkaW5nVXNlciA9IHRydWU7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBNYW51YWxTZXJ2aWNlLmdldFVzZXJMaXN0KGZpbHRlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzMy51c2VyTGlzdCA9IHJlc3BvbnNlLmRhdGEucm93czsKICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzMy5sb2FkaW5nVXNlciA9IGZhbHNlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBteUZpbHRlclVzZXJMaXN0OiBmdW5jdGlvbiBteUZpbHRlclVzZXJMaXN0KG9wdGlvbiwgbGFiZWwsIHNlYXJjaCkgewogICAgICB2YXIgdGV4dCA9IG9wdGlvbi50ZXh0LmluY2x1ZGVzKHNlYXJjaC50b0xvd2VyQ2FzZSgpKSB8fCBvcHRpb24udGV4dC5pbmNsdWRlcyhzZWFyY2gudG9VcHBlckNhc2UoKSkgfHwgb3B0aW9uLnRleHQuaW5jbHVkZXMoc2VhcmNoLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc2VhcmNoLnNsaWNlKDEpKTsKICAgICAgcmV0dXJuIHRleHQ7CiAgICB9LAogICAgbXlEZWZhdWx0TGFiZWxVc2VyTGlzdDogZnVuY3Rpb24gbXlEZWZhdWx0TGFiZWxVc2VyTGlzdChvcHRpb24pIHsKICAgICAgdmFyIHRleHQgPSBvcHRpb24udGV4dDsKICAgICAgcmV0dXJuICIiLmNvbmNhdCh0ZXh0KTsKICAgIH0sCiAgICBnZXRDb3JyZWN0UGhvbmVOdW1iZXI6IGZ1bmN0aW9uIGdldENvcnJlY3RQaG9uZU51bWJlcihwaG9uZU51bWJlcikgewogICAgICByZXR1cm4gIjk5OCIgKyAiICIgKyBwaG9uZU51bWJlci5zdWJzdHIoMCwgMikgKyAiICIgKyBwaG9uZU51bWJlci5zdWJzdHIoMik7CiAgICB9LAogICAgc2F2ZUNoYW5nZXM6IGZ1bmN0aW9uIHNhdmVDaGFuZ2VzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIG9iajsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXM0LmxvYWRpbmdCdXR0b24gPSB0cnVlOwogICAgICAgICAgICAgIC8vIHRoaXMuaXRlbUNvcHkudHJ1c3RlZFVzZXJzLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgIC8vICAgdHJ1c3RlZFVzZXJzLnB1c2goZWwudmFsdWUpCiAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgb2JqID0gewogICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IF90aGlzNC5pdGVtQ29weS5waG9uZU51bWJlciwKICAgICAgICAgICAgICAgIGlubjogX3RoaXM0Lml0ZW1Db3B5LmVtcGxveWVlLmlubiwKICAgICAgICAgICAgICAgIHBlcnNvbmFsTnVtYmVyOiBfdGhpczQuaXRlbUNvcHkuZW1wbG95ZWUucGluZmwsCiAgICAgICAgICAgICAgICBtYWlsOiBfdGhpczQuaXRlbUNvcHkubWFpbCwKICAgICAgICAgICAgICAgIGJpcnRoZGF5OiBfdGhpczQuaXRlbUNvcHkuZW1wbG95ZWUuZGF0ZU9mQmlydGgKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gQWNjb3VudFNlcnZpY2UuY2hhbmdlVXNlckluZm8ob2JqKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgzMDAgPiByZXNwb25zZS5zdGF0dXMgJiYgcmVzcG9uc2Uuc3RhdHVzID49IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5nZXRVc2VySW5mbygpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuc3VjY2Vzc0VkaXRlZCgpOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuZ2V0VXNlckluZm8oKTsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmNoYW5nZVN0YXRlRWRpdEFjY291bnRJbmZvKCdjYW5jZWwnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY2hhbmdlU3RhdGVFZGl0QWNjb3VudEluZm8oKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJG15TWFrZVRvYXN0KAogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy4kdChgYWN0aW9ucy5tZXNzYWdlcy51cGRhdGVfc3VjY2Vzc2ApLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy4kdCgiYWN0aW9ucy5zdWNjZXNzIiksCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAic3VjY2VzcyIKICAgICAgICAgICAgICAgICAgICAgICAgLy8gKTsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kbXlNYWtlVG9hc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICByZXNwb25zZS5kYXRhLmVycm9yLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy4kdCgiYWN0aW9ucy5lcnJvciIpLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgImRhbmdlciIKICAgICAgICAgICAgICAgICAgICAgICAgLy8gKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LmVudGVySW5mbygpOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIF90aGlzNC5lbnRlckluZm8oKTsKICAgICAgICAgICAgICAgIC8vIHRoaXMuJG15TWFrZVRvYXN0KAogICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuJGdsb2JhbENyZWF0ZUVycm9yTWVzc2FnZUZyb21BcnJheSgKICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy4kZ2V0QXJyYXlGcm9tQXJyYXlMaXN0KE9iamVjdC52YWx1ZXMoZS5yZXNwb25zZS5kYXRhLmVycm9ycykpKSwKICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLiR0KCJhY3Rpb25zLmVycm9yIiksCiAgICAgICAgICAgICAgICAvLyAgICAgImRhbmdlciIKICAgICAgICAgICAgICAgIC8vICk7CiAgICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczQubG9hZGluZ0J1dHRvbiA9IGZhbHNlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjaGFuZ2VTdGF0ZUVkaXRBY2NvdW50SW5mbzogZnVuY3Rpb24gY2hhbmdlU3RhdGVFZGl0QWNjb3VudEluZm8obW9kZSkgewogICAgICBpZiAobW9kZSA9PT0gJ2NoYW5nZScpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy5pdGVtQ29weSwgJ3Bob25lTnVtYmVyJywgdGhpcy5pdGVtLnBob25lTnVtYmVyKTsKICAgICAgICB0aGlzLiRzZXQodGhpcy5pdGVtQ29weSwgJ21haWwnLCB0aGlzLml0ZW1Db3B5Lm1haWwpOwogICAgICAgIHRoaXMuJHNldCh0aGlzLml0ZW1Db3B5LmVtcGxveWVlLCAnaW5uJywgdGhpcy5pdGVtLmVtcGxveWVlLmlubik7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuaXRlbUNvcHkuZW1wbG95ZWUsICdwaW5mbCcsIHRoaXMuaXRlbS5lbXBsb3llZS5waW5mbCk7CiAgICAgIH0KICAgICAgdGhpcy5lZGl0QWNjb3VudEluZm8gPSAhdGhpcy5lZGl0QWNjb3VudEluZm87CiAgICB9LAogICAgc2hvd1Bhc3N3b3JkOiBmdW5jdGlvbiBzaG93UGFzc3dvcmQoKSB7CiAgICAgIHRoaXMuaW5wdXRUeXBlID0gIXRoaXMuaW5wdXRUeXBlOwogICAgfSwKICAgIHNldEFsbEVycm9yczogZnVuY3Rpb24gc2V0QWxsRXJyb3JzKGVycm9ycykgewogICAgICB0aGlzLmFsbEVycm9ycyA9IGVycm9yczsKICAgIH0sCiAgICBjaGVja1ZhbGlkOiBmdW5jdGlvbiBjaGVja1ZhbGlkKCkgewogICAgICB2YXIgdmFsaWQgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMubW9kYWxGb3JtVmFsaWQgJiYgdGhpcy5hY2NvdW50LmN1cnJlbnRQYXNzd29yZCAhPT0gJycgJiYgdGhpcy5hY2NvdW50LmN1cnJlbnRQYXNzd29yZCAhPT0gbnVsbCAmJiB0aGlzLmFjY291bnQucGFzc3dvcmQgIT09ICcnICYmIHRoaXMuYWNjb3VudC5wYXNzd29yZCAhPT0gbnVsbCAmJiB0aGlzLmFjY291bnQucmVQYXNzd29yZCAhPT0gJycgJiYgdGhpcy5hY2NvdW50LnJlUGFzc3dvcmQgIT09IG51bGwpIHsKICAgICAgICB2YWxpZCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsaWQgPSBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdmFsaWQ7CiAgICB9LAogICAgY2hhbmdlUGFzc3dvcmQ6IGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHZtOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpczUubG9hZGluZ0J1dHRvbiA9IHRydWU7CiAgICAgICAgICAgICAgdm0gPSBfdGhpczU7CiAgICAgICAgICAgICAgaWYgKCF2bS5jaGVja1ZhbGlkKCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIEFjY291bnRTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKHZtLmFjY291bnQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAoMzAwID4gcmVzcG9uc2Uuc3RhdHVzICYmIHJlc3BvbnNlLnN0YXR1cyA+PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LmNoYW5nZVBhc3N3b3JkTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgX3RoaXM1LiR0b2FzdChfdGhpczUuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAvLyB2bS4kbXlNYWtlVG9hc3QoCiAgICAgICAgICAgICAgICAgIC8vICAgICB2bS4kdChgYWN0aW9ucy5tZXNzYWdlcy51cGRhdGVfc3VjY2Vzc2ApLAogICAgICAgICAgICAgICAgICAvLyAgICAgdm0uJHQoImFjdGlvbnMuc3VjY2VzcyIpLAogICAgICAgICAgICAgICAgICAvLyAgICAgInN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgIC8vICk7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZtLnNob3dNb2RhbCgnY2hhbmdlUGFzc3dvcmRNb2RhbCcsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuJG15TWFrZVRvYXN0KAogICAgICAgICAgICAgICAgICAvLyAgICAgcmVzcG9uc2UuZGF0YS5lcnJvciwKICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuJHQoImFjdGlvbnMuZXJyb3IiKSwKICAgICAgICAgICAgICAgICAgLy8gICAgICJkYW5nZXIiCiAgICAgICAgICAgICAgICAgIC8vICk7CiAgICAgICAgICAgICAgICAgIF90aGlzNS5lbnRlckluZm8oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgX3RoaXM1LiR0b2FzdChfdGhpczUuJHQoJ21lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzJyksIHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5maWxsX3JlcXVpcmVkX2ZpZWxkcycpLCB7IHR5cGU6ICdlcnJvcicgfSk7CiAgICAgICAgICAgICAgICAvLyB0aGlzLiRteU1ha2VUb2FzdCgKICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLiRnbG9iYWxDcmVhdGVFcnJvck1lc3NhZ2VGcm9tQXJyYXkoCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRoaXMuJGdldEFycmF5RnJvbUFycmF5TGlzdChPYmplY3QudmFsdWVzKGUucmVzcG9uc2UuZGF0YS5lcnJvcnMpKSksCiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy4kdCgiYWN0aW9ucy5lcnJvciIpLAogICAgICAgICAgICAgICAgLy8gICAgICJkYW5nZXIiCiAgICAgICAgICAgICAgICAvLyApOwogICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXM1LmxvYWRpbmdCdXR0b24gPSBmYWxzZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHZtLmxvYWRpbmdCdXR0b24gPSBmYWxzZTsKICAgICAgICAgICAgICBfdGhpczUuJHRvYXN0KF90aGlzNS4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwgewogICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIHZtLiRteU1ha2VUb2FzdCh2bS4kdCgnYWN0aW9ucy5tZXNzYWdlcy5hbGxfZmllbGRfcmVxdWlyZWQnKSwgdm0uJHQoJ2FjdGlvbnMuZXJyb3InKSwgJ2RhbmdlcicpOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaG93TW9kYWw6IGZ1bmN0aW9uIHNob3dNb2RhbChtb2RhbCwgdmFsdWUpIHsKICAgICAgdGhpcy4kZGF0YVttb2RhbF0gPSB2YWx1ZTsKICAgIH0sCiAgICBvcGVuQ2hhbmdlUGFzc3dvcmRNb2RhbDogZnVuY3Rpb24gb3BlbkNoYW5nZVBhc3N3b3JkTW9kYWwoKSB7CiAgICAgIHRoaXMuY2hhbmdlUGFzc3dvcmRNb2RhbCA9IHRydWU7CiAgICB9LAogICAgZ2V0VXNlckluZm86IGZ1bmN0aW9uIGdldFVzZXJJbmZvKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gQWNjb3VudFNlcnZpY2UuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM2Lml0ZW0gPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgX3RoaXM2Lml0ZW0gPSB7CiAgICAgICAgICAgICAgICAgIGZ1bGxOYW1lOiByZXNwb25zZS5kYXRhLmVtcGxveWVlTGFzdE5hbWUgKyAnICcgKyByZXNwb25zZS5kYXRhLmVtcGxveWVlRmlyc3ROYW1lICsgJyAnICsgcmVzcG9uc2UuZGF0YS5lbXBsb3llZU1pZGRsZU5hbWUsCiAgICAgICAgICAgICAgICAgIHVzZXJOYW1lOiByZXNwb25zZS5kYXRhLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcmVzcG9uc2UuZGF0YS5waG9uZU51bWJlciwKICAgICAgICAgICAgICAgICAgbWFpbDogcmVzcG9uc2UuZGF0YS5tYWlsLAogICAgICAgICAgICAgICAgICBlbXBsb3llZTogewogICAgICAgICAgICAgICAgICAgIHBpbmZsOiByZXNwb25zZS5kYXRhLmlucHMsCiAgICAgICAgICAgICAgICAgICAgaW5uOiByZXNwb25zZS5kYXRhLmlubiwKICAgICAgICAgICAgICAgICAgICBkYXRlT2ZCaXJ0aDogcmVzcG9uc2UuZGF0YS5iaXJ0aGRheQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB0cnVzdGVkVXNlcnM6IFtdLAogICAgICAgICAgICAgICAgICBhdmF0YXJVcmw6ICcnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdhdXRoL3NldFVzZXJJbmZvJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICBUb2tlblNlcnZpY2Uuc2V0VXNlckluZm8ocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICBfdGhpczYuaXRlbUNvcHkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNi5pdGVtKSk7CiAgICAgICAgICAgICAgICBfdGhpczYuJHNldChfdGhpczYuaXRlbUNvcHksICdtYWlsJywgX3RoaXM2Lml0ZW1Db3B5Lm1haWwpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXM3LmdldFVzZXJJbmZvKCk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5zZXRMb2FkaW5nQ29udGVudChmYWxzZSk7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU3KTsKICAgIH0pKSgpOwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoJ2F1dGgnLCBbJ1VzZXJJbmZvJ10pKSwge30sIHsKICAgIHVzZXJBdmF0YXJVcmxGcm9tU3RvcmFnZTogZnVuY3Rpb24gdXNlckF2YXRhclVybEZyb21TdG9yYWdlKCkgewogICAgICB2YXIgdHJpZ2dlckZvclVybCA9IHRoaXMubG9jYWxVc2VyQXZhdGFyVXJsOwogICAgICByZXR1cm4gVG9rZW5TZXJ2aWNlLmdldFVzZXJBdmF0YXJVcmwoKTsKICAgIH0sCiAgICBtb2RhbEZvcm1WYWxpZDogZnVuY3Rpb24gbW9kYWxGb3JtVmFsaWQoKSB7CiAgICAgIHZhciB2YWxpZCA9IHRydWU7CiAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmFsbEVycm9ycykubGVuZ3RoID4gMSkgewogICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMuYWxsRXJyb3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgICAgdmFyIF9yZWYzID0gX3NsaWNlZFRvQXJyYXkoX3JlZjIsIDIpLAogICAgICAgICAgICBrZXkgPSBfcmVmM1swXSwKICAgICAgICAgICAgdmFsdWUgPSBfcmVmM1sxXTsKICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbGlkOwogICAgfSwKICAgIGNhblNhdmVVc2VySW5mbzogZnVuY3Rpb24gY2FuU2F2ZVVzZXJJbmZvKCkgewogICAgICByZXR1cm4gdGhpcy5pdGVtQ29weS5waG9uZU51bWJlciAmJiB0aGlzLml0ZW1Db3B5Lm1haWwgJiYgKHRoaXMuaXRlbUNvcHkuZW1wbG95ZWUucGluZmwgPyB0aGlzLmdsb2JhbFJlZ2V4UGluZmwudGVzdCh0aGlzLml0ZW1Db3B5LmVtcGxveWVlLnBpbmZsKSA6IHRydWUpICYmIHRoaXMuZ2xvYmFsUmVnZXhJbm4udGVzdCh0aGlzLml0ZW1Db3B5LmVtcGxveWVlLmlubik7CiAgICB9CiAgfSksCiAgd2F0Y2g6IHsKICAgIC8vICdpdGVtQ29weS5lbXBsb3llZS5kYXRlT2ZCaXJ0aCc6IHsKICAgIC8vICAgYXN5bmMgaGFuZGxlcihuZXdWYWx1ZSkgewogICAgLy8gICAgIGlmIChuZXdWYWx1ZS5sZW5ndGggPT09IDIgfHwgbmV3VmFsdWUubGVuZ3RoID09PSA1KSB7CiAgICAvLyAgICAgICB0aGlzLml0ZW1Db3B5LmVtcGxveWVlLmRhdGVPZkJpcnRoICs9ICItIjsKICAgIC8vICAgICB9CiAgICAvLwogICAgLy8gICB9CiAgICAvLyB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBUZW1wbGF0ZUxvZ29Db21wb25lbnQ6IFRlbXBsYXRlTG9nb0NvbXBvbmVudAogICAgLy8gTGF5b3V0LAogICAgLy8gUGFnZUhlYWRlcgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;AA8dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC,cACA;QACAC;QACAC;MAEA,EACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;UACAC;UACAC;UACAC;QACA;QACAC;QACAC;MACA;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAC,iBACAC,gDACAC;QACA;QACA;UACA;UACAC;QACA;MACA,GACAC;QACAC;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;UACAC;QAEA;UACAA;QAEA;QACAA;QACAA;QACA;UACAA;QACA;UACAA;QACA;QACAA;QACAA;QACAA;QACAA;QACAA;MAEA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAAC;cACAC;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;cACA;cACA;cAAA;cAAA,OACAC;gBACA;cACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA,uGACAC;MAEA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACA;cACA;cACA;cACA;cACAC;gBACAnD;gBACAI;gBACAgD;gBACAnD;gBACAoD;cACA;cAAA;cAAA,OACAC,mCACAzB;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA,MACA;0BAAA;0BAAA;wBAAA;wBACA;wBACA;wBAAA;wBAAA,OACA;sBAAA;wBACA;;wBAEA;;wBAEA;wBACA;wBACA;wBACA;wBACA;wBAAA;wBAAA;sBAAA;wBAGA;wBACA;wBACA;wBACA;wBACA;wBACA;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CAEA;gBAAA;kBAAA;gBAAA;cAAA,KACAE;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;cACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAwB;MACA;QACA;QACA;QACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA,IACA,uBACA,gFACA,kEACA,oEACA;QACAC;MACA;QACAA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACA;cACAC;cAAA,KACAA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACAP;gBACA;kBACA;kBACA;oBAAAQ;kBAAA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACAC;oBACAF;kBACA;gBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;gBAEA;cACA,GACA9B;gBACA;kBAAA+B;gBAAA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;cACA,GACAE;gBACA;cACA;YAAA;cAAA;cAAA;YAAA;cAEAH;cACA;gBAAAC;cAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAEA;IACAG;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACAb;gBACA;gBACA;kBACAxD;kBACAC;kBACAC;kBACAC;kBACAC;oBACAC;oBACAC;oBACAC;kBACA;kBACAC;kBACAC;gBACA;gBACA;gBACAuB;gBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;EACA;EACAsC;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OAGA;UAAA;YAAA;YAAA,OACA;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EACA;EACAC,0CACAC;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;QAEAC;UAAA;YAAAC;YAAAC;UACA;YACAhB;UACA;QACA;MACA;MACA;IACA;IACAiB;MACA,oCACA,uBACA,mGACA;IACA;EAAA,EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAAA,CACA;EACAC;IACAC;IACA;IACA;EACA;AACA","names":["name","data","publicPath","localUserAvatarUrl","userAvatarLoading","innerWidth","userFullName","userId","loaderEdit","fileForUserAvatar","user_info","profile_img","breadcrumbs","text","href","appConfig","title","item","fullName","userName","phoneNumber","mail","employee","pinfl","inn","dateOfBirth","trustedUsers","avatarUrl","changePasswordModal","account","currentPassword","password","rePassword","loadingButton","inputType","allErrors","editAccountInfo","itemCopy","globalRegexPinfl","globalRegexInn","globalRegexDateOfBirth","loadingUser","userList","loadingContent","uploadFile","methods","updateUserAvatar","messengerService","changeUserProfileAvatar","then","TokenService","catch","console","userAvatarClicked","myDateMask","regex","setLoadingContent","searchUserByString","search","filter","Search","SortColumn","OrderType","PageNumber","PageLimit","ManualService","myFilterUserList","option","myDefaultLabelUserList","getCorrectPhoneNumber","saveChanges","obj","personalNumber","birthday","AccountService","changeStateEditAccountInfo","showPassword","setAllErrors","checkValid","valid","changePassword","vm","type","setTimeout","finally","showModal","openChangePasswordModal","getUserInfo","created","computed","mapState","userAvatarUrlFromStorage","modalFormValid","Object","key","value","canSaveUserInfo","watch","components","TemplateLogoComponent"],"sourceRoot":"src/modules/profile","sources":["profile.vue"],"sourcesContent":["<template>\r\n  <!--  <Layout>-->\r\n  <!--    <PageHeader :items=\"breadcrumbs\" :title=\"title\"/>-->\r\n  <div>\r\n    <div>\r\n      <b-overlay :show=\"loadingContent\">\r\n        <b-form-file\r\n            ref=\"userAvatarFileRef\"\r\n            style=\"display: none\"\r\n            v-model=\"fileForUserAvatar\"\r\n            @input=\"updateUserAvatar\"\r\n        ></b-form-file>\r\n        <b-card>\r\n          <b-row class=\"text-right\">\r\n            <b-col>\r\n              <template v-if=\"!editAccountInfo\">\r\n                <b-button :disabled=\"loadingButton\" @click=\"changeStateEditAccountInfo('change')\"\r\n                          class=\"mr-1 ml-1\"\r\n                          size=\"sm\" variant=\"success\">\r\n                  <i class=\"fa fa-pen\"></i> {{ $t('profile.change') }}\r\n                </b-button>\r\n              </template>\r\n              <template v-else>\r\n                <b-button :disabled=\"loadingButton || !canSaveUserInfo\" @click=\"saveChanges\" size=\"sm\"\r\n                          variant=\"success\">\r\n                  <i class=\"fa fa-save\"></i> {{ $t('profile.password.update') }}\r\n                </b-button>\r\n                <b-button :disabled=\"loadingButton\" @click=\"changeStateEditAccountInfo('cancel')\"\r\n                          class=\"mr-1 ml-1\"\r\n                          size=\"sm\" variant=\"danger\">\r\n                  <i class=\"fa fa-times\"></i> {{ $t('profile.password.cancel') }}\r\n                </b-button>\r\n              </template>\r\n            </b-col>\r\n          </b-row>\r\n          <br>\r\n          <b-row>\r\n            <b-col class=\"text-center\" md=\"4\" sm=\"12\">\r\n              <template-logo-component></template-logo-component>\r\n              <br>\r\n              <!--                            <b-button class=\"btn-default btn-circle\" size=\"sm\"><i class=\"fa fa-upload\"></i>-->\r\n              <!--                            </b-button>-->\r\n              <!--              <b-button variant=\"success\" size=\"sm\" @click=\"openFileBrowser\"><i class=\"fa fa-pen\"></i>-->\r\n              <!--                {{ $t('profile.change') }}-->\r\n              <!--              </b-button>-->\r\n              <div class=\"avatar-container\">\r\n                <b-spinner\r\n                    v-if=\"userAvatarLoading\"\r\n                    variant=\"primary\"\r\n                    label=\"Loading\"\r\n                ></b-spinner>\r\n                <img\r\n                    v-else\r\n                    class=\"rounded-circle bg-light image\"\r\n                    :src=\"`${userAvatarUrlFromStorage ? publicPath+userAvatarUrlFromStorage : require('../../assets/images/users/default-avatar.png')}`\"\r\n                />\r\n                <div class=\"overlay\">\r\n                  <div\r\n                      @click=\"userAvatarClicked\"\r\n                      class=\"avatar-edit-pencil\r\n                               d-flex\r\n                               align-items-center\r\n                               justify-content-center\r\n                               bg-primary\"\r\n                  >\r\n                    <i\r\n                        class=\"mdi mdi-camera-plus-outline text-white\"\r\n                        style=\"font-size: 2rem;\"\r\n                    ></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"user-full-name mt-4\">\r\n                <p class=\"text\">{{ item.fullName }}</p>\r\n                <b-button @click=\"openChangePasswordModal\" class=\"btn-default btn-circle\"\r\n                          size=\"sm\"><i class=\"fa fa-key\"></i>\r\n                </b-button>\r\n              </div>\r\n\r\n            </b-col>\r\n            <b-col md=\"8\" sm=\"12\">\r\n              <div class=\"mt-2 table-striped\">\r\n                <table class=\"table\">\r\n                  <tbody>\r\n                  <tr>\r\n                    <th scope=\"row\" width=\"20%\">{{ $t('profile.fio') }}</th>\r\n                    <td>{{ item.fullName }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('column.birthdate') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <b-col lg=\"6\" md=\"6\" sm=\"12\" xl=\"4\">\r\n                          <template v-if=\"editAccountInfo\">\r\n\r\n                            <!--                            <b-form-input size=\"sm\" v-mask=\"myDateMask\"-->\r\n                            <!--                                          :state=\"globalRegexDateOfBirth.test(itemCopy.employee.dateOfBirth)\"-->\r\n                            <!--                                          v-model=\"itemCopy.employee.dateOfBirth\"-->\r\n                            <!--                            ></b-form-input>-->\r\n\r\n                            <BaseDatePickerWithValidation\r\n                                custom-styles=\"grid-template-columns: 100%\"\r\n                                v-model=\"itemCopy.employee.dateOfBirth\"\r\n                                lang=\"ru\"\r\n                            ></BaseDatePickerWithValidation>\r\n                          </template>\r\n\r\n                          <template v-else>\r\n                            {{ item.employee.dateOfBirth }}\r\n                          </template>\r\n                        </b-col>\r\n                      </b-row>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.inn') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <b-col lg=\"6\" md=\"6\" sm=\"12\" xl=\"4\">\r\n                          <template v-if=\"editAccountInfo\">\r\n\r\n                            <b-form-input :disabled=\"loadingButton\"\r\n                                          :state=\"globalRegexInn.test(itemCopy.employee.inn)\"\r\n                                          size=\"sm\"\r\n                                          v-mask=\"'##############'\"\r\n                                          v-model=\"itemCopy.employee.inn\"\r\n                            >\r\n                            </b-form-input>\r\n\r\n\r\n                          </template>\r\n                          <template v-else>\r\n                            {{ item.employee.inn }}\r\n                          </template>\r\n\r\n                        </b-col>\r\n                      </b-row>\r\n                    </td>\r\n                  </tr>\r\n\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.pinfl') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <b-col lg=\"6\" md=\"6\" sm=\"12\" xl=\"4\">\r\n                          <template v-if=\"editAccountInfo\">\r\n                            <b-form-input :disabled=\"loadingButton\"\r\n                                          size=\"sm\"\r\n                                          v-mask=\"'##############'\"\r\n                                          v-model=\"itemCopy.employee.pinfl\"\r\n                            >\r\n                            </b-form-input>\r\n                          </template>\r\n\r\n                          <template v-else>\r\n                            {{ item.employee.pinfl }}\r\n                          </template>\r\n\r\n                        </b-col>\r\n                      </b-row>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.title') }}</th>\r\n                    <td>{{ item.userName }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.email') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <b-col cols=\"12\"\r\n                               sm=\"6\">\r\n                          <template v-if=\"editAccountInfo\">\r\n                            <BaseInputWithValidation\r\n                                :rules=\"{email: true}\"\r\n                                custom-styles=\"grid-template-columns: 0% 65%\"\r\n                                placeholder=\"meningEmail@gmail.com\"\r\n                                v-model=\"itemCopy.mail\"\r\n                            />\r\n                            <!--                            <b-input-group append=\"@gmail.com\" size=\"sm\">-->\r\n                            <!--                              <b-form-input :disabled=\"loadingButton\"-->\r\n                            <!--                                            v-model=\"itemCopy.email\"-->\r\n                            <!--                              >-->\r\n                            <!--                              </b-form-input>-->\r\n                            <!--                            </b-input-group>-->\r\n                          </template>\r\n\r\n                          <template v-else>\r\n                            {{ item.mail }}\r\n                          </template>\r\n\r\n                        </b-col>\r\n                      </b-row>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.phonenumber') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <template v-if=\"editAccountInfo\">\r\n                          <b-col\r\n                              sm=\"12\"\r\n                              md=\"6\"\r\n                          >\r\n                            <BaseInputWithValidation\r\n                                not-required\r\n                                custom-styles=\"grid-template-columns: 0% 65%\"\r\n                                v-model=\"itemCopy.phoneNumber\"\r\n                                mask=\"+998#########\"\r\n                                placeholder=\"+998#########\"\r\n                            />\r\n                          </b-col>\r\n\r\n                          <!--                            <b-form-input :disabled=\"loadingButton\" size=\"sm\"-->\r\n                          <!--                                          v-mask=\"'## ### ## ##'\"-->\r\n                          <!--                                          v-model=\"itemCopy.phoneNumber\"-->\r\n                          <!--                            >-->\r\n                          <!--                            </b-form-input>-->\r\n\r\n                        </template>\r\n\r\n                        <template v-else>\r\n                          {{ item.phoneNumber }}\r\n                          <!--                            {{ getCorrectPhoneNumber(item.phoneNumber) }}-->\r\n                        </template>\r\n                      </b-row>\r\n\r\n                    </td>\r\n                  </tr>\r\n                  <!--                  <tr>-->\r\n                  <!--                    <th scope=\"row\">{{ $t('profile.inPhoneNumber') }}</th>-->\r\n                  <!--                    <td>-->\r\n                  <!--                      <b-row>-->\r\n                  <!--                        <b-col lg=\"5\" md=\"5\" sm=\"12\" xl=\"3\">-->\r\n                  <!--                          <template v-if=\"editAccountInfo\">-->\r\n                  <!--                            <b-form-input :disabled=\"loadingButton\" size=\"sm\"-->\r\n                  <!--                                          v-mask=\"'#####'\"-->\r\n                  <!--                                          v-model=\"itemCopy.inPhoneNumber\"-->\r\n                  <!--                            >-->\r\n                  <!--                            </b-form-input>-->\r\n\r\n                  <!--                          </template>-->\r\n\r\n                  <!--                          <template v-else>-->\r\n                  <!--                            {{ item.inPhoneNumber }}-->\r\n                  <!--                          </template>-->\r\n                  <!--                        </b-col>-->\r\n                  <!--                      </b-row>-->\r\n                  <!--                    </td>-->\r\n                  <!--                  </tr>-->\r\n                  <!--                  <tr>-->\r\n                  <!--                    <th scope=\"row\">{{ $t('profile.departmentCode') }}</th>-->\r\n                  <!--                    <td>-->\r\n                  <!--                      <b-row>-->\r\n                  <!--                        <b-col lg=\"5\" md=\"5\" sm=\"12\" xl=\"3\">-->\r\n                  <!--                          <template v-if=\"editAccountInfo\">-->\r\n                  <!--                            <b-form-input :disabled=\"loadingButton\" size=\"sm\"-->\r\n                  <!--                                          v-mask=\"'##-##'\"-->\r\n                  <!--                                          v-model=\"itemCopy.departmentCode\"-->\r\n                  <!--                            >-->\r\n                  <!--                            </b-form-input>-->\r\n\r\n                  <!--                          </template>-->\r\n\r\n                  <!--                          <template v-else>-->\r\n                  <!--                            {{ item.departmentCode }}-->\r\n                  <!--                          </template>-->\r\n\r\n                  <!--                        </b-col>-->\r\n                  <!--                      </b-row>-->\r\n\r\n                  <!--                    </td>-->\r\n                  <!--                  </tr>-->\r\n                  <!--                  <tr>-->\r\n                  <!--                    <th scope=\"row\">{{ $t('profile.trustedUsers') }}</th>-->\r\n                  <!--                    <td>-->\r\n                  <!--                      <b-row>-->\r\n                  <!--                        <b-col md=\"6\" sm=\"12\">-->\r\n                  <!--                          <template v-if=\"editAccountInfo\">-->\r\n\r\n                  <!--                            <v-select-->\r\n                  <!--                                :clearable=\"false\"-->\r\n                  <!--                                :filterBy=\"myFilterUserList\"-->\r\n                  <!--                                :getOptionLabel=\"myDefaultLabelUserList\"-->\r\n                  <!--                                :loading=\"loadingUser\"-->\r\n                  <!--                                :options=\"userList\"-->\r\n                  <!--                                class=\"sel mt-2\"-->\r\n                  <!--                                multiple-->\r\n                  <!--                                name=\"bank\"-->\r\n                  <!--                                v-model=\"itemCopy.trustedUsers\"-->\r\n                  <!--                            >-->\r\n                  <!--                              <template #no-options=\"{ search, searching, loading }\">-->\r\n                  <!--                                {{ $t(\"profile.empty_table\") }}-->\r\n                  <!--                              </template>-->\r\n                  <!--                            </v-select>-->\r\n\r\n                  <!--                          </template>-->\r\n                  <!--                          <template v-else>-->\r\n                  <!--&lt;!&ndash;                            <template v-for=\"el in item.trustedUsers\">&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                              <p>&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                                <b-badge size=\"md\" variant=\"primary\">{{ el.text }}&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                                </b-badge>&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                              </p>&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                            </template>&ndash;&gt;-->\r\n                  <!--                          </template>-->\r\n\r\n                  <!--                        </b-col>-->\r\n                  <!--                      </b-row>-->\r\n\r\n                  <!--                    </td>-->\r\n                  <!--                  </tr>-->\r\n\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <table class=\"table\">\r\n                <tbody>\r\n\r\n                </tbody>\r\n              </table>\r\n            </b-col>\r\n          </b-row>\r\n\r\n\r\n        </b-card>\r\n      </b-overlay>\r\n    </div>\r\n\r\n\r\n    <b-modal hide-footer hide-header ref=\"my-modal\" size=\"md\" v-model=\"changePasswordModal\">\r\n      <header class=\"modal-header\">\r\n        <b-col cols=\"10\">\r\n          <h5 class=\"modal-title text-center\"><b>{{\r\n              $t('profile.password.change')\r\n            }}</b></h5>\r\n        </b-col>\r\n        <b-col cols=\"2\">\r\n          <button @click=\"showModal('changePasswordModal',false)\" aria-label=\"Close\" class=\"close\"\r\n                  type=\"button\">×\r\n          </button>\r\n        </b-col>\r\n\r\n\r\n      </header>\r\n      <div class=\"modal-body\">\r\n\r\n        <ValidationObserver ref=\"form\" v-slot=\"errors\">\r\n          {{ setAllErrors(errors.errors) }}\r\n          <b-row>\r\n            <b-col md=\"12\" sm=\"12\">\r\n              <ValidationProvider\r\n                  name=\"oldPassword\"\r\n                  v-slot=\"v\">\r\n                <b-form-group\r\n                    label-cols-sm=\"5\"\r\n                    label-for=\"input-1\"\r\n                >\r\n                  <template slot=\"label\">\r\n                    <label class=\"d-block\">{{\r\n                        $t('profile.password.old')\r\n                      }}\r\n                      <span class=\"text-danger\"> *</span></label>\r\n                  </template>\r\n                  <b-form-input\r\n                      :placeholder=\"$t('profile.password.old')\"\r\n\r\n                      class=\"mt-1\"\r\n                      size=\"sm\"\r\n                      type=\"password\"\r\n                      v-model=\"account.currentPassword\"\r\n                  ></b-form-input>\r\n                  <b-form-invalid-feedback\r\n\r\n                      id=\"usernameInput-feedback\"\r\n                  >\r\n                    {{ v.errors[0] }}\r\n                  </b-form-invalid-feedback>\r\n                </b-form-group>\r\n              </ValidationProvider>\r\n\r\n            </b-col>\r\n            <b-col md=\"12\" sm=\"12\">\r\n              <ValidationProvider\r\n                  name=\"password\"\r\n                  v-slot=\"v\">\r\n                <b-form-group\r\n                    label-cols-sm=\"5\"\r\n                    label-for=\"input-1\"\r\n                >\r\n                  <template slot=\"label\">\r\n                    <label class=\"d-block\">{{\r\n                        $t('profile.password.new')\r\n                      }}\r\n                      <span class=\"text-danger\"> *</span></label>\r\n                  </template>\r\n                  <b-input-group class=\"mt-1\" size=\"sm\">\r\n                    <b-form-input\r\n                        :placeholder=\"$t('profile.password.new')\"\r\n\r\n                        :type=\"inputType ? 'password' : 'text'\"\r\n                        v-model=\"account.password\"\r\n                    ></b-form-input>\r\n                    <template #append>\r\n                      <button @click=\"showPassword\" class=\"btn btn-sm btn-primary\">\r\n                        <i class=\"fa fa-eye\" v-if=\"inputType\"></i>\r\n                        <i class=\"fa fa-eye-slash\" v-else></i>\r\n\r\n                      </button>\r\n                    </template>\r\n                  </b-input-group>\r\n                  <b-form-invalid-feedback\r\n\r\n                      id=\"usernameInput-feedback\"\r\n                  >\r\n                    {{ v.errors[0] }}\r\n                  </b-form-invalid-feedback>\r\n                </b-form-group>\r\n              </ValidationProvider>\r\n\r\n            </b-col>\r\n            <b-col md=\"12\" sm=\"12\">\r\n              <ValidationProvider\r\n                  name=\"confirmPassword\"\r\n                  v-slot=\"v\">\r\n                <b-form-group\r\n                    label-cols-sm=\"5\"\r\n                    label-for=\"input-1\"\r\n                >\r\n                  <template slot=\"label\">\r\n                    <label class=\"d-block\">{{\r\n                        $t('profile.password.confirm')\r\n                      }}\r\n                      <span class=\"text-danger\"> *</span></label>\r\n                  </template>\r\n                  <b-input-group class=\"mt-1\" size=\"sm\">\r\n                    <b-form-input\r\n                        :placeholder=\"$t('profile.password.new')\"\r\n                        :type=\"inputType ? 'password' : 'text'\"\r\n                        v-model=\"account.rePassword\"\r\n                    ></b-form-input>\r\n                    <template #append>\r\n                      <button @click=\"showPassword\" class=\"btn btn-sm btn-primary\">\r\n                        <i class=\"fa fa-eye\" v-if=\"inputType\"></i>\r\n                        <i class=\"fa fa-eye-slash\" v-else></i>\r\n\r\n                      </button>\r\n                    </template>\r\n                  </b-input-group>\r\n                  <b-form-invalid-feedback\r\n                      id=\"usernameInput-feedback\"\r\n                  >\r\n                    {{ v.errors[0] }}\r\n                  </b-form-invalid-feedback>\r\n                </b-form-group>\r\n              </ValidationProvider>\r\n\r\n            </b-col>\r\n          </b-row>\r\n        </ValidationObserver>\r\n        <hr>\r\n        <b-row>\r\n          <b-col md=\"12\" sm=\"12\">\r\n            <button :disabled=\"!modalFormValid\"\r\n                    @click=\"changePassword\" class=\"btn btn-sm btn-success float-right\">\r\n              <b-spinner small v-if=\"loadingButton\"></b-spinner>\r\n              {{ $t('profile.password.update') }}\r\n            </button>\r\n          </b-col>\r\n        </b-row>\r\n      </div>\r\n\r\n    </b-modal>\r\n  </div>\r\n\r\n  <!--  </Layout>-->\r\n\r\n</template>\r\n<script>\r\n// import Layout from \"@/router/layouts/main\";\r\n// import PageHeader from \"@/components/page-header\";\r\nimport AccountService from \"../../shared/services/profile/account.service\";\r\nimport TemplateLogoComponent from \"../../components/template-logo-component/template-logo-component\";\r\nimport ManualService from \"../../shared/services/profile/manual.service\";\r\nimport {mapState} from \"vuex\";\r\nimport appConfig from \"@/app.config\";\r\nimport {TokenService} from \"@/shared/services/storage.service\"\r\nimport messengerService from \"@/shared/services/messengerService\";\r\n\r\nexport default {\r\n  name: \"Profile\",\r\n  data() {\r\n    return {\r\n      publicPath: process.env.BASE_URL,\r\n      localUserAvatarUrl: null,\r\n      userAvatarLoading: false,\r\n      innerWidth: window.innerWidth,\r\n      userFullName: TokenService.getFullName(),\r\n      userId: TokenService.getUserId(),\r\n      loaderEdit: false,\r\n      fileForUserAvatar: null,\r\n      user_info: {\r\n        profile_img: require(\"../../assets/images/profile/profile-avatar.png\"),\r\n      },\r\n      breadcrumbs: [\r\n        {\r\n          text: this.$t('actions.profile'),\r\n          href: \"#\"\r\n\r\n        },\r\n      ],\r\n      appConfig,\r\n      title: this.$t('actions.profile'),\r\n      item: {\r\n        fullName: \"\",\r\n        userName: \"\",\r\n        phoneNumber: \"\",\r\n        mail: \"\",\r\n        employee: {\r\n          pinfl: \"\",\r\n          inn: \"\",\r\n          dateOfBirth: \"\"\r\n        },\r\n        trustedUsers: [],\r\n        avatarUrl: \"\"\r\n      },\r\n      changePasswordModal: false,\r\n      account: {\r\n        currentPassword: \"\",\r\n        password: \"\",\r\n        rePassword: \"\"\r\n      },\r\n      loadingButton: false,\r\n      inputType: true,\r\n      allErrors: {},\r\n      editAccountInfo: false,\r\n      itemCopy: {},\r\n      globalRegexPinfl: new RegExp('^\\\\d{14}$'),\r\n      globalRegexInn: new RegExp('^\\\\d{9}$'),\r\n      globalRegexDateOfBirth: new RegExp('^\\\\d{2}.\\\\d{2}.\\\\d{4}$'),\r\n      loadingUser: false,\r\n      userList: [],\r\n      loadingContent: false,\r\n      uploadFile: null\r\n    }\r\n  },\r\n  methods: {\r\n    updateUserAvatar() {\r\n      this.userAvatarLoading = true\r\n      messengerService\r\n          .changeUserProfileAvatar(this.fileForUserAvatar)\r\n          .then((rs) => {\r\n            this.userAvatarLoading = false\r\n            if (rs.data) {\r\n              this.localUserAvatarUrl = rs.data\r\n              TokenService.setUserAvatarUrl(rs.data)\r\n            }\r\n          })\r\n          .catch((e) => {\r\n            console.log(e)\r\n            this.userAvatarLoading = false\r\n          })\r\n    },\r\n    userAvatarClicked() {\r\n      this.$refs.userAvatarFileRef.$el.firstChild.click()\r\n    },\r\n    myDateMask(value) {\r\n      let regex = [/[0|1|2|3]/]\r\n      if (value) {\r\n        if (value[0] === 3) {\r\n          regex.push(/[0|1]/)\r\n\r\n        } else {\r\n          regex.push(/[0-9]/)\r\n\r\n        }\r\n        regex.push(/[.]/);\r\n        regex.push(/[0|1]/);\r\n        if (value[3] === 1) {\r\n          regex.push(/[0|1|2]/);\r\n        } else {\r\n          regex.push(/[0-9]/)\r\n        }\r\n        regex.push(/[.]/);\r\n        regex.push(/[1|2]/)\r\n        regex.push(/[0-9]/)\r\n        regex.push(/[0-9]/)\r\n        regex.push(/[0-9]/)\r\n\r\n      }\r\n      return regex\r\n    },\r\n    async setLoadingContent(value) {\r\n      this.loadingContent = value\r\n    },\r\n    async searchUserByString(search = \"\") {\r\n      let filter = {\r\n        Search: search,\r\n        SortColumn: \"\",\r\n        OrderType: \"\",\r\n        PageNumber: 1,\r\n        PageLimit: 1000\r\n      };\r\n      this.loadingUser = true;\r\n      await ManualService.getUserList(filter).then(response => {\r\n        this.userList = response.data.rows;\r\n      }).finally(() => {\r\n        this.loadingUser = false;\r\n      })\r\n    },\r\n    myFilterUserList(option, label, search) {\r\n      let text = option.text.includes(search.toLowerCase()) || option.text.includes(search.toUpperCase()) ||\r\n          option.text.includes(search.charAt(0).toUpperCase() + search.slice(1));\r\n\r\n      return text;\r\n    },\r\n    myDefaultLabelUserList(option) {\r\n      let text = option.text;\r\n      return `${text}`;\r\n    },\r\n    getCorrectPhoneNumber(phoneNumber) {\r\n      return \"998\" + \" \" + phoneNumber.substr(0, 2) + \" \" + phoneNumber.substr(2);\r\n    },\r\n    async saveChanges() {\r\n      this.loadingButton = true;\r\n      // this.itemCopy.trustedUsers.forEach(el => {\r\n      //   trustedUsers.push(el.value)\r\n      // });\r\n      let obj = {\r\n        phoneNumber: this.itemCopy.phoneNumber,\r\n        inn: this.itemCopy.employee.inn,\r\n        personalNumber: this.itemCopy.employee.pinfl,\r\n        mail: this.itemCopy.mail,\r\n        birthday: this.itemCopy.employee.dateOfBirth,\r\n      };\r\n      await AccountService.changeUserInfo(obj)\r\n          .then(async (response) => {\r\n            if (300 > response.status && response.status >= 200) {\r\n              // await this.getUserInfo();\r\n              this.successEdited();\r\n              await this.getUserInfo();\r\n              this.changeStateEditAccountInfo('cancel')\r\n\r\n              // this.changeStateEditAccountInfo();\r\n\r\n              // this.$myMakeToast(\r\n              //     this.$t(`actions.messages.update_success`),\r\n              //     this.$t(\"actions.success\"),\r\n              //     \"success\"\r\n              // );\r\n\r\n            } else {\r\n              // this.$myMakeToast(\r\n              //     response.data.error,\r\n              //     this.$t(\"actions.error\"),\r\n              //     \"danger\"\r\n              // );\r\n              this.enterInfo();\r\n            }\r\n          })\r\n          .catch((e) => {\r\n            this.enterInfo();\r\n            // this.$myMakeToast(\r\n            //     this.$globalCreateErrorMessageFromArray(\r\n            //         this.$getArrayFromArrayList(Object.values(e.response.data.errors))),\r\n            //     this.$t(\"actions.error\"),\r\n            //     \"danger\"\r\n            // );\r\n          }).finally(() => {\r\n            this.loadingButton = false;\r\n          });\r\n    },\r\n    changeStateEditAccountInfo(mode) {\r\n      if (mode === 'change') {\r\n        this.$set(this.itemCopy, 'phoneNumber', this.item.phoneNumber)\r\n        this.$set(this.itemCopy, 'mail', this.itemCopy.mail);\r\n        this.$set(this.itemCopy.employee, 'inn', this.item.employee.inn)\r\n        this.$set(this.itemCopy.employee, 'pinfl', this.item.employee.pinfl)\r\n      }\r\n      this.editAccountInfo = !this.editAccountInfo\r\n    },\r\n    showPassword() {\r\n      this.inputType = !this.inputType;\r\n    },\r\n    setAllErrors(errors) {\r\n      this.allErrors = errors;\r\n    },\r\n    checkValid() {\r\n      let valid = false;\r\n      if (\r\n          this.modalFormValid &&\r\n          (this.account.currentPassword !== '' && this.account.currentPassword !== null) &&\r\n          (this.account.password !== '' && this.account.password !== null) &&\r\n          (this.account.rePassword !== '' && this.account.rePassword !== null)\r\n      ) {\r\n        valid = true;\r\n      } else {\r\n        valid = false;\r\n      }\r\n      return valid\r\n    },\r\n    async changePassword() {\r\n      this.loadingButton = true;\r\n      let vm = this;\r\n      if (vm.checkValid()) {\r\n        await AccountService.changePassword(vm.account).then((response) => {\r\n          if (300 > response.status && response.status >= 200) {\r\n            this.changePasswordModal = false\r\n            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n            // vm.$myMakeToast(\r\n            //     vm.$t(`actions.messages.update_success`),\r\n            //     vm.$t(\"actions.success\"),\r\n            //     \"success\"\r\n            // );\r\n            setTimeout(function () {\r\n              vm.showModal('changePasswordModal', false);\r\n            }, 500);\r\n          } else {\r\n            // this.$myMakeToast(\r\n            //     response.data.error,\r\n            //     this.$t(\"actions.error\"),\r\n            //     \"danger\"\r\n            // );\r\n            this.enterInfo();\r\n\r\n          }\r\n        })\r\n            .catch((e) => {\r\n              this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n              // this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n              // this.$myMakeToast(\r\n              //     this.$globalCreateErrorMessageFromArray(\r\n              //         this.$getArrayFromArrayList(Object.values(e.response.data.errors))),\r\n              //     this.$t(\"actions.error\"),\r\n              //     \"danger\"\r\n              // );\r\n            })\r\n            .finally(() => {\r\n              this.loadingButton = false;\r\n            });\r\n      } else {\r\n        vm.loadingButton = false;\r\n        this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n        // vm.$myMakeToast(vm.$t('actions.messages.all_field_required'), vm.$t('actions.error'), 'danger');\r\n      }\r\n    },\r\n    showModal(modal, value) {\r\n      this.$data[modal] = value;\r\n    },\r\n    openChangePasswordModal() {\r\n      this.changePasswordModal = true;\r\n    },\r\n    async getUserInfo() {\r\n      await AccountService.getUserInfo().then((response) => {\r\n        this.item = response.data;\r\n        this.item = {\r\n          fullName: response.data.employeeLastName + ' ' + response.data.employeeFirstName + ' ' + response.data.employeeMiddleName,\r\n          userName: response.data.username,\r\n          phoneNumber: response.data.phoneNumber,\r\n          mail: response.data.mail,\r\n          employee: {\r\n            pinfl: response.data.inps,\r\n            inn: response.data.inn,\r\n            dateOfBirth: response.data.birthday\r\n          },\r\n          trustedUsers: [],\r\n          avatarUrl: '',\r\n        },\r\n            // this.$store.commit('auth/setUserInfo', response.data);\r\n            TokenService.setUserInfo(response.data);\r\n        this.itemCopy = JSON.parse(JSON.stringify(this.item));\r\n        this.$set(this.itemCopy, 'mail', this.itemCopy.mail);\r\n      })\r\n    }\r\n  },\r\n  async created() {\r\n    // await this.setLoadingContent(true);\r\n    // await this.searchUserByString();\r\n    await this.getUserInfo();\r\n    await this.setLoadingContent(false);\r\n  },\r\n  computed: {\r\n    ...mapState('auth', ['UserInfo']),\r\n    userAvatarUrlFromStorage() {\r\n      let triggerForUrl = this.localUserAvatarUrl\r\n      return TokenService.getUserAvatarUrl()\r\n    },\r\n    modalFormValid() {\r\n      let valid = true;\r\n      if (Object.keys(this.allErrors).length > 1) {\r\n\r\n        Object.entries(this.allErrors).forEach(([key, value]) => {\r\n          if (value.length > 0) {\r\n            valid = false;\r\n          }\r\n        })\r\n      }\r\n      return valid;\r\n    },\r\n    canSaveUserInfo() {\r\n      return this.itemCopy.phoneNumber &&\r\n          this.itemCopy.mail &&\r\n          (this.itemCopy.employee.pinfl ? this.globalRegexPinfl.test(this.itemCopy.employee.pinfl) : true) &&\r\n          this.globalRegexInn.test(this.itemCopy.employee.inn);\r\n    }\r\n  },\r\n  watch: {\r\n    // 'itemCopy.employee.dateOfBirth': {\r\n    //   async handler(newValue) {\r\n    //     if (newValue.length === 2 || newValue.length === 5) {\r\n    //       this.itemCopy.employee.dateOfBirth += \"-\";\r\n    //     }\r\n    //\r\n    //   }\r\n    // }\r\n  },\r\n  components: {\r\n    TemplateLogoComponent,\r\n    // Layout,\r\n    // PageHeader\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n.user-full-name:hover .change-password-button {\r\n  opacity: 1;\r\n  margin-top: 25px;\r\n}\r\n\r\n.btn-circle {\r\n  width: 30px;\r\n  height: 30px;\r\n  padding: 6px 0px;\r\n  border-radius: 15px;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  line-height: 1.42857;\r\n}\r\n\r\n.btn-circle:hover {\r\n  background-color: #1808ec;\r\n  font-size: 13px;\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep.sidebar-chat {\r\n  .b-sidebar {\r\n    width: 100vw;\r\n    background: white;\r\n  }\r\n}\r\n\r\n::v-deep.avatar-edit-pencil {\r\n  width: 100%;\r\n  height: 100%;\r\n  transition: all 0.5s ease;\r\n  box-shadow: 5px 5px 5px #eee;\r\n  border-radius: 50px;\r\n  border: 3px solid white;\r\n  cursor: pointer;\r\n  /* background: #556ee6; */\r\n}\r\n\r\n::v-deep.avatar-container {\r\n  position: relative;\r\n  height: 5rem;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n::v-deep.avatar-container:hover .overlay {\r\n  opacity: 1 !important;\r\n}\r\n\r\n\r\n::v-deep.image {\r\n  display: block;\r\n  width: 5rem;\r\n  height: 5rem;\r\n}\r\n\r\n::v-deep.overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  height: 100%;\r\n  width: 5rem;\r\n  opacity: 0;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n::v-deep.icon {\r\n  color: white;\r\n  font-size: 100px;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  -ms-transform: translate(-50%, -50%);\r\n  text-align: center;\r\n}\r\n\r\n::v-deep.fa-user:hover {\r\n  color: #eee;\r\n}\r\n</style>"]}]}