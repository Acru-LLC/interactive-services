{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\advertisement\\modules\\ad_passport_info\\UpdateItemFiles.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\advertisement\\modules\\ad_passport_info\\UpdateItemFiles.vue","mtime":1682419227185},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwp2YXIgTUFJTl9BUElfVVJMID0gJ2NvbnRyYWN0b3ItYWR2ZXJ0aXNpbmctY29uc3RydWN0aW9uJzsKdmFyIEFQUEVORF9BUElfVVJMX0ZPUl9HT1ZFUk5NRU5UID0gJ2ZpcnN0LWFnZW50LWZpbGVzJzsKdmFyIEFQUEVORF9BUElfVVJMX0ZPUl9BR0VOQ1kgPSAnc2Vjb25kLWFnZW50LWZpbGVzJzsKLyoNCiogWU9VIE1VU1QgU0VORCB7eyBNQUlOX0FQSV9VUkwgfX0gVE8gQ1JVRF9TRVJWSUNFICovCmltcG9ydCBjcnVkQW5kTGlzdHNTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2NydWRfYW5kX2xpc3Quc2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXBkYXRlSXRlbUZpbGVzIiwKICAvKg0KICAqIENPTVBPTkVOVFMgKi8KICBjb21wb25lbnRzOiB7fSwKICAvKg0KICAqIERBVEEgKi8KICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHVibGljUGF0aDogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgICAgIGVkaXRpbmdJdGVtOiB7CiAgICAgICAgYWRkcmVzc0R0bzoge30KICAgICAgfSwKICAgICAgZXJyb3JzOiBbXSwKICAgICAgYXJjaGl0ZWN0RG9jRmlsZTogW10sCiAgICAgIHBob3RvczogW10sCiAgICAgIHBhc3Nwb3J0RG9jRmlsZTogW10sCiAgICAgIHBhc3Nwb3J0UGhvdG86IFtdLAogICAgICBwYXltZW50RG9jRmlsZTogW10KICAgIH07CiAgfSwKICAvKg0KICAqIENPTVBVVEVEICovCiAgY29tcHV0ZWQ6IHsKICAgIGlzTW9kZUNyZWF0ZTogZnVuY3Rpb24gaXNNb2RlQ3JlYXRlKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PSAnQ3JlYXRlQWRQYXNzcG9ydEluZm9CeUFnZW5jeScgfHwgdGhpcy4kcm91dGUubmFtZSA9PSAnQ3JlYXRlQWRQYXNzcG9ydEluZm9CeUdvdmVybm1lbnQnOwogICAgfSwKICAgIGlzQnlBZ2VuY3k6IGZ1bmN0aW9uIGlzQnlBZ2VuY3koKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09ICdVcGRhdGVBZFBhc3Nwb3J0SW5mb0ZpbGVzQnlBZ2VuY3knOwogICAgfSwKICAgIGlzQnlHb3Zlcm5tZW50OiBmdW5jdGlvbiBpc0J5R292ZXJubWVudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLm5hbWUgPT0gJ1VwZGF0ZUFkUGFzc3BvcnRJbmZvRmlsZXNCeUdvdmVybm1lbnQnOwogICAgfSwKICAgIGNvbXB1dGVkT2JzZXJ2ZXI6IGZ1bmN0aW9uIGNvbXB1dGVkT2JzZXJ2ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyOwogICAgfQogICAgLyogbXVsdGlwbGVNaW5pbXVtQ29sbGVjdGlvbnNDb21wdXRlZE9ic2VydmVyICgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnNbJ211bHRpcGxlLW1pbmltdW0tY29sbGVjdGlvbnMtb2JzZXJ2ZXInXQ0KICAgIH0sDQogICAgc2luZ2xlTWluaW11bUNvbGxlY3Rpb25VcGRhdGVDb21wdXRlZE9ic2VydmVyICgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnNbJ3NpbmdsZS1taW5pbXVtLWNvbGxlY3Rpb24tdXBkYXRlLW9ic2VydmVyJ10NCiAgICB9ICovCiAgfSwKICAvKg0KICAqIE1FVEhPRFMgKi8KICBtZXRob2RzOiB7CiAgICBnZW5lcmF0ZVVVSUQ6IGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHsKICAgICAgdmFyIGR0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIHZhciB1dWlkID0gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykgewogICAgICAgIHZhciByID0gKGR0ICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDsKICAgICAgICBkdCA9IE1hdGguZmxvb3IoZHQgLyAxNik7CiAgICAgICAgcmV0dXJuIChjID09ICd4JyA/IHIgOiByICYgMHgzIHwgMHg4KS50b1N0cmluZygxNik7CiAgICAgIH0pOwogICAgICByZXR1cm4gdXVpZDsKICAgIH0sCiAgICBzZXRGaWxlc0Zyb21TZXJ2ZXI6IGZ1bmN0aW9uIHNldEZpbGVzRnJvbVNlcnZlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNCeUdvdmVybm1lbnQpIHsKICAgICAgICAgICAgICAgIC8vIEFSQ0hJVEVDVF9ET0NfRklMRVMKICAgICAgICAgICAgICAgIF90aGlzLmVkaXRpbmdJdGVtLmFyY2hpdGVjdERvY0ZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGYpIHsKICAgICAgICAgICAgICAgICAgZmV0Y2goX3RoaXMucHVibGljUGF0aCArIGYudXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmJsb2IoKTsKICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAobXlCbG9iKSB7CiAgICAgICAgICAgICAgICAgICAgbXlCbG9iLm5hbWUgPSBmLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgbXlCbG9iLmxhc3RNb2RpZmllZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG15RmlsZSA9IG5ldyBGaWxlKFtteUJsb2JdLCBmLm5hbWUsIHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG15QmxvYi50eXBlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IF90aGlzLnB1YmxpY1BhdGggKyBmLnVybDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5hcmNoaXRlY3REb2NVcGxvYWRlci4kcmVmcy5kcm9wem9uZS5tYW51YWxseUFkZEZpbGUobXlGaWxlLCB1cmwpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIC8qIGxldCBmaWxlID0geyBzaXplOiBmLnNpemUsIG5hbWU6IGYubmFtZSwgdHlwZTogZi5jb250ZW50VHlwZSwgdXVpZDogdGhpcy5nZW5lcmF0ZVVVSUQoKSB9Ow0KICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMucHVibGljUGF0aCArIGYudXJsOw0KICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hcmNoaXRlY3REb2NVcGxvYWRlci4kcmVmcy5kcm9wem9uZS5tYW51YWxseUFkZEZpbGUoZmlsZSwgdXJsKTsgKi8KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuaXNCeUFnZW5jeSkgewogICAgICAgICAgICAgICAgLy8gQVJDSElURUNUX0RPQ19GSUxFUwogICAgICAgICAgICAgICAgX3RoaXMuZWRpdGluZ0l0ZW0uYXJjaGl0ZWN0RG9jRmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZiwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgZmV0Y2goX3RoaXMucHVibGljUGF0aCArIGYudXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmJsb2IoKTsKICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAobXlCbG9iKSB7CiAgICAgICAgICAgICAgICAgICAgbXlCbG9iLm5hbWUgPSBmLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgbXlCbG9iLmxhc3RNb2RpZmllZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG15RmlsZSA9IG5ldyBGaWxlKFtteUJsb2JdLCBmLm5hbWUsIHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG15QmxvYi50eXBlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IF90aGlzLnB1YmxpY1BhdGggKyBmLnVybDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5hcmNoaXRlY3REb2NVcGxvYWRlci4kcmVmcy5kcm9wem9uZS5tYW51YWxseUFkZEZpbGUobXlGaWxlLCB1cmwpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAvKiBjb25zdCBtb2NrRmlsZSA9IHsgbmFtZTogZi5uYW1lLCBzaXplOiBmLnNpemUgfTsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMuYXJjaGl0ZWN0RG9jVXBsb2FkZXIuJHJlZnMuZHJvcHpvbmUuZHJvcHpvbmUub3B0aW9ucykgKi8KICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kcmVmcy5hcmNoaXRlY3REb2NVcGxvYWRlci4kcmVmcy5kcm9wem9uZS5maWxlc1tpbmRleF0gPSBmLm5hbWU7CiAgICAgICAgICAgICAgICAgIC8qIHRoaXMuJHJlZnMuYXJjaGl0ZWN0RG9jVXBsb2FkZXIuJHJlZnMuZHJvcHpvbmUuZHJvcHpvbmUub3B0aW9ucy5hZGRlZGZpbGUodGhpcy4kcmVmcy5hcmNoaXRlY3REb2NVcGxvYWRlci4kcmVmcy5kcm9wem9uZSwgbW9ja0ZpbGUpOw0KICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hcmNoaXRlY3REb2NVcGxvYWRlci4kcmVmcy5kcm9wem9uZS5kcm9wem9uZS5vcHRpb25zLnRodW1ibmFpbCh0aGlzLiRyZWZzLmFyY2hpdGVjdERvY1VwbG9hZGVyLiRyZWZzLmRyb3B6b25lLCBtb2NrRmlsZSwgdGhpcy5wdWJsaWNQYXRoICsgZi51cmwpOyAqLwogICAgICAgICAgICAgICAgICAvKiBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1zdWNjZXNzJyk7DQogICAgICAgICAgICAgICAgICBtb2NrRmlsZS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkei1jb21wbGV0ZScpOyAqLwogICAgICAgICAgICAgICAgICAvLyBsZXQgZmlsZSA9IG5ldyBGaWxlKFsiIl0sIGYubmFtZSwgeyB0eXBlOiBmLmNvbnRlbnRUeXBlLCBzaXplOiBmLnNpemUsIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKS5nZXRUaW1lKCkgfSkKICAgICAgICAgICAgICAgICAgLy8gZmlsZS5zaXplID0gZi5zaXplCiAgICAgICAgICAgICAgICAgIC8vIGxldCBmaWxlID0geyBzaXplOiBmLnNpemUsIG5hbWU6IGYubmFtZSwgdHlwZTogZi5jb250ZW50VHlwZSwgdXVpZDogdGhpcy5nZW5lcmF0ZVVVSUQoKSB9OwogICAgICAgICAgICAgICAgICAvKiBsZXQgdXJsID0gdGhpcy5wdWJsaWNQYXRoICsgZi51cmw7DQogICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFyY2hpdGVjdERvY1VwbG9hZGVyLiRyZWZzLmRyb3B6b25lLm1hbnVhbGx5QWRkRmlsZShteUZpbGUsIHVybCk7ICovCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIE9CSkVDVF9QSE9UT1MKICAgICAgICAgICAgICAgIF90aGlzLmVkaXRpbmdJdGVtLm9iamVjdFBob3RvTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgICAgICAgICAgIGZldGNoKF90aGlzLnB1YmxpY1BhdGggKyBmLnVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5ibG9iKCk7CiAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKG15QmxvYikgewogICAgICAgICAgICAgICAgICAgIG15QmxvYi5uYW1lID0gZi5uYW1lOwogICAgICAgICAgICAgICAgICAgIG15QmxvYi5sYXN0TW9kaWZpZWQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBteUZpbGUgPSBuZXcgRmlsZShbbXlCbG9iXSwgZi5uYW1lLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBteUJsb2IudHlwZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBfdGhpcy5wdWJsaWNQYXRoICsgZi51cmw7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHJlZnMucGhvdG9zVXBsb2FkZXIuJHJlZnMuZHJvcHpvbmUubWFudWFsbHlBZGRGaWxlKG15RmlsZSwgdXJsKTsKICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAvKiBsZXQgZmlsZSA9IHsgc2l6ZTogZi5zaXplLCBuYW1lOiBmLm5hbWUsIHR5cGU6IGYuY29udGVudFR5cGUsIHV1aWQ6IHRoaXMuZ2VuZXJhdGVVVUlEKCkgfTsNCiAgICAgICAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLnB1YmxpY1BhdGggKyBmLnVybDsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGhvdG9zVXBsb2FkZXIuJHJlZnMuZHJvcHpvbmUubWFudWFsbHlBZGRGaWxlKGZpbGUsIHVybCk7ICovCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnREb2NGaWxlVXJsKSB7CiAgICAgICAgICAgICAgICAgIC8vIFBBU1NQT1JUX0RPQ19GSUxFCiAgICAgICAgICAgICAgICAgIGZldGNoKF90aGlzLnB1YmxpY1BhdGggKyBfdGhpcy5lZGl0aW5nSXRlbS5wYXNzcG9ydERvY0ZpbGVVcmwudXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmJsb2IoKTsKICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAobXlCbG9iKSB7CiAgICAgICAgICAgICAgICAgICAgbXlCbG9iLm5hbWUgPSBfdGhpcy5lZGl0aW5nSXRlbS5wYXNzcG9ydERvY0ZpbGVVcmwubmFtZTsKICAgICAgICAgICAgICAgICAgICBteUJsb2IubGFzdE1vZGlmaWVkID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbXlGaWxlID0gbmV3IEZpbGUoW215QmxvYl0sIF90aGlzLmVkaXRpbmdJdGVtLnBhc3Nwb3J0RG9jRmlsZVVybC5uYW1lLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBteUJsb2IudHlwZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBfdGhpcy5wdWJsaWNQYXRoICsgX3RoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnREb2NGaWxlVXJsLnVybDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5wYXNzcG9ydERvY1VwbG9hZGVyLiRyZWZzLmRyb3B6b25lLm1hbnVhbGx5QWRkRmlsZShteUZpbGUsIHVybCk7CiAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgLyogbGV0IHBEb2NGaWxlID0geyBzaXplOiB0aGlzLmVkaXRpbmdJdGVtLnBhc3Nwb3J0RG9jRmlsZVVybC5zaXplLCBuYW1lOiB0aGlzLmVkaXRpbmdJdGVtLnBhc3Nwb3J0RG9jRmlsZVVybC5uYW1lLCB0eXBlOiB0aGlzLmVkaXRpbmdJdGVtLnBhc3Nwb3J0RG9jRmlsZVVybC5jb250ZW50VHlwZSwgdXVpZDogdGhpcy5nZW5lcmF0ZVVVSUQoKSB9Ow0KICAgICAgICAgICAgICAgICAgbGV0IHBEb2NGaWxlVXJsID0gdGhpcy5wdWJsaWNQYXRoICsgdGhpcy5lZGl0aW5nSXRlbS5wYXNzcG9ydERvY0ZpbGVVcmwudXJsOw0KICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wYXNzcG9ydERvY1VwbG9hZGVyLiRyZWZzLmRyb3B6b25lLm1hbnVhbGx5QWRkRmlsZShwRG9jRmlsZSwgcERvY0ZpbGVVcmwpOyAqLwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5lZGl0aW5nSXRlbS5wYXNzcG9ydFBob3RvVXJsKSB7CiAgICAgICAgICAgICAgICAgIC8vIFBBU1NQT1JUX1BIT1RPCiAgICAgICAgICAgICAgICAgIGZldGNoKF90aGlzLnB1YmxpY1BhdGggKyBfdGhpcy5lZGl0aW5nSXRlbS5wYXNzcG9ydFBob3RvVXJsLnVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5ibG9iKCk7CiAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKG15QmxvYikgewogICAgICAgICAgICAgICAgICAgIG15QmxvYi5uYW1lID0gX3RoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnRQaG90b1VybC5uYW1lOwogICAgICAgICAgICAgICAgICAgIG15QmxvYi5sYXN0TW9kaWZpZWQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBteUZpbGUgPSBuZXcgRmlsZShbbXlCbG9iXSwgX3RoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnRQaG90b1VybC5uYW1lLCB7CiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBteUJsb2IudHlwZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBfdGhpcy5wdWJsaWNQYXRoICsgX3RoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnRQaG90b1VybC51cmw7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJHJlZnMucGFzc3BvcnRQaG90b1VwbG9hZGVyLiRyZWZzLmRyb3B6b25lLm1hbnVhbGx5QWRkRmlsZShteUZpbGUsIHVybCk7CiAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgLyogbGV0IHBQaG90byA9IHsgc2l6ZTogdGhpcy5lZGl0aW5nSXRlbS5wYXNzcG9ydFBob3RvVXJsLnNpemUsIG5hbWU6IHRoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnRQaG90b1VybC5uYW1lLCB0eXBlOiB0aGlzLmVkaXRpbmdJdGVtLnBhc3Nwb3J0UGhvdG9VcmwuY29udGVudFR5cGUsIHV1aWQ6IHRoaXMuZ2VuZXJhdGVVVUlEKCkgfTsNCiAgICAgICAgICAgICAgICAgIGxldCBwUGhvdG9VcmwgPSB0aGlzLnB1YmxpY1BhdGggKyB0aGlzLmVkaXRpbmdJdGVtLnBhc3Nwb3J0UGhvdG9VcmwudXJsOw0KICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wYXNzcG9ydFBob3RvVXBsb2FkZXIuJHJlZnMuZHJvcHpvbmUubWFudWFsbHlBZGRGaWxlKHBQaG90bywgcFBob3RvVXJsKTsgKi8KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZWRpdGluZ0l0ZW0ucGF5bWVudERvY0ZpbGVVcmwpIHsKICAgICAgICAgICAgICAgICAgLy8gUEFZTUVOVF9ET0NfRklMRQogICAgICAgICAgICAgICAgICBmZXRjaChfdGhpcy5wdWJsaWNQYXRoICsgX3RoaXMuZWRpdGluZ0l0ZW0ucGF5bWVudERvY0ZpbGVVcmwudXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmJsb2IoKTsKICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAobXlCbG9iKSB7CiAgICAgICAgICAgICAgICAgICAgbXlCbG9iLm5hbWUgPSBfdGhpcy5lZGl0aW5nSXRlbS5wYXltZW50RG9jRmlsZVVybC5uYW1lOwogICAgICAgICAgICAgICAgICAgIG15QmxvYi5sYXN0TW9kaWZpZWQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBteUZpbGUgPSBuZXcgRmlsZShbbXlCbG9iXSwgX3RoaXMuZWRpdGluZ0l0ZW0ucGF5bWVudERvY0ZpbGVVcmwubmFtZSwgewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogbXlCbG9iLnR5cGUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gX3RoaXMucHVibGljUGF0aCArIF90aGlzLmVkaXRpbmdJdGVtLnBheW1lbnREb2NGaWxlVXJsLnVybDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcmVmcy5wYXltZW50RG9jVXBsb2FkZXIuJHJlZnMuZHJvcHpvbmUubWFudWFsbHlBZGRGaWxlKG15RmlsZSwgdXJsKTsKICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAvKiBsZXQgcGF5bWVudEZpbGUgPSB7IHNpemU6IHRoaXMuZWRpdGluZ0l0ZW0ucGF5bWVudERvY0ZpbGVVcmwuc2l6ZSwgbmFtZTogdGhpcy5lZGl0aW5nSXRlbS5wYXltZW50RG9jRmlsZVVybC5uYW1lLCB0eXBlOiB0aGlzLmVkaXRpbmdJdGVtLnBheW1lbnREb2NGaWxlVXJsLmNvbnRlbnRUeXBlLCB1dWlkOiB0aGlzLmdlbmVyYXRlVVVJRCgpIH07DQogICAgICAgICAgICAgICAgICBsZXQgcGF5bWVudEZpbGVVcmwgPSB0aGlzLnB1YmxpY1BhdGggKyB0aGlzLmVkaXRpbmdJdGVtLnBheW1lbnREb2NGaWxlVXJsLnVybDsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMucGF5bWVudERvY1VwbG9hZGVyLiRyZWZzLmRyb3B6b25lLm1hbnVhbGx5QWRkRmlsZShwYXltZW50RmlsZSwgcGF5bWVudEZpbGVVcmwpOyAqLwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNvbGxlY3RFcnI6IGZ1bmN0aW9uIGNvbGxlY3RFcnIoa2V5KSB7CiAgICAgIGlmICh0aGlzLmVycm9yc1trZXldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNba2V5XTsKICAgICAgfQogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSwKICAgIGhhc0Vycm9yOiBmdW5jdGlvbiBoYXNFcnJvcihrZXkpIHsKICAgICAgaWYgKHRoaXMuZXJyb3JzW2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICAvKiBkYXRhVVJMdG9GaWxlIChkYXRhdXJsLCBmaWxlbmFtZSkgew0KICAgICAgICBsZXQgYXJyID0gZGF0YXVybC5zcGxpdCgiLCIpLA0KICAgICAgICAgICAgbWltZSA9IGFyclswXS5tYXRjaCgvOiguKj8pOy8pWzFdLA0KICAgICAgICAgICAgYnN0ciA9IGF0b2IoYXJyWzFdKSwNCiAgICAgICAgICAgIG4gPSBic3RyLmxlbmd0aCwNCiAgICAgICAgICAgIHU4YXJyID0gbmV3IFVpbnQ4QXJyYXkobik7DQogICAgICAgICAgd2hpbGUgKG4tLSkgew0KICAgICAgICAgICAgdThhcnJbbl0gPSBic3RyLmNoYXJDb2RlQXQobik7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG5ldyBGaWxlKFt1OGFycl0sIGZpbGVuYW1lLCB7IHR5cGU6IG1pbWUgfSk7DQogICAgfSwgKi8KICAgIG1ha2VBbmRSZXR1cm5Gb3JtRGF0YTogZnVuY3Rpb24gbWFrZUFuZFJldHVybkZvcm1EYXRhKCkgewogICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBpZiAodGhpcy5pc0J5R292ZXJubWVudCkgewogICAgICAgIC8qIHRoaXMuYXJjaGl0ZWN0RG9jRmlsZS5mb3JFYWNoKGYgPT4gew0KICAgICAgICAgICAgZm9ybS5hcHBlbmQoImFyY2hpdGVjdERvY0ZpbGVzIiwgdGhpcy5kYXRhVVJMdG9GaWxlKGYuZmlsZSwgZi5uYW1lKSk7DQogICAgICAgIH0pICovCiAgICAgICAgdGhpcy5hcmNoaXRlY3REb2NGaWxlLmZvckVhY2goZnVuY3Rpb24gKGYpIHsKICAgICAgICAgIGZvcm0uYXBwZW5kKCJhcmNoaXRlY3REb2NGaWxlcyIsIGYuZmlsZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0J5QWdlbmN5KSB7CiAgICAgICAgLyogdGhpcy5hcmNoaXRlY3REb2NGaWxlLmZvckVhY2goZiA9PiB7DQogICAgICAgICAgICBmb3JtLmFwcGVuZCgiYXJjaGl0ZWN0RG9jRmlsZXMiLCB0aGlzLmRhdGFVUkx0b0ZpbGUoZi5maWxlLCBmLm5hbWUpKTsNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5waG90b3MuZm9yRWFjaChmID0+IHsNCiAgICAgICAgICAgIGZvcm0uYXBwZW5kKCJvYmplY3RQaG90b3MiLCB0aGlzLmRhdGFVUkx0b0ZpbGUoZi5maWxlLCBmLm5hbWUpKTsNCiAgICAgICAgfSkNCiAgICAgICAgZm9ybS5hcHBlbmQoImlzTWFpbkluZGV4Rm9yT2JqZWN0UGhvdG9zIiwgdGhpcy5waG90b3MubGVuZ3RoID8gMCA6IG51bGwpOw0KICAgICAgICAgIHRoaXMucGFzc3BvcnREb2NGaWxlLmZvckVhY2goZiA9PiB7DQogICAgICAgICAgICBmb3JtLmFwcGVuZCgicGFzc3BvcnREb2NGaWxlIiwgdGhpcy5kYXRhVVJMdG9GaWxlKGYuZmlsZSwgZi5uYW1lKSk7DQogICAgICAgIH0pDQogICAgICAgIHRoaXMucGFzc3BvcnRQaG90by5mb3JFYWNoKGYgPT4gew0KICAgICAgICAgICAgZm9ybS5hcHBlbmQoInBhc3Nwb3J0UGhvdG8iLCB0aGlzLmRhdGFVUkx0b0ZpbGUoZi5maWxlLCBmLm5hbWUpKTsNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5wYXltZW50RG9jRmlsZS5mb3JFYWNoKGYgPT4gew0KICAgICAgICAgICAgZm9ybS5hcHBlbmQoInBheW1lbnREb2NGaWxlIiwgdGhpcy5kYXRhVVJMdG9GaWxlKGYuZmlsZSwgZi5uYW1lKSk7DQogICAgICAgIH0pICovCiAgICAgICAgdGhpcy5hcmNoaXRlY3REb2NGaWxlLmZvckVhY2goZnVuY3Rpb24gKGYpIHsKICAgICAgICAgIGZvcm0uYXBwZW5kKCJhcmNoaXRlY3REb2NGaWxlcyIsIGYuZmlsZSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5waG90b3MuZm9yRWFjaChmdW5jdGlvbiAoZikgewogICAgICAgICAgZm9ybS5hcHBlbmQoIm9iamVjdFBob3RvcyIsIGYuZmlsZSk7CiAgICAgICAgfSk7CiAgICAgICAgLy8gZm9ybS5hcHBlbmQoImlzTWFpbkluZGV4Rm9yT2JqZWN0UGhvdG9zIiwgdGhpcy5waG90b3MubGVuZ3RoID8gMCA6IG51bGwpOwoKICAgICAgICB0aGlzLnBhc3Nwb3J0RG9jRmlsZS5mb3JFYWNoKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgICBmb3JtLmFwcGVuZCgicGFzc3BvcnREb2NGaWxlIiwgZi5maWxlKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnBhc3Nwb3J0UGhvdG8uZm9yRWFjaChmdW5jdGlvbiAoZikgewogICAgICAgICAgZm9ybS5hcHBlbmQoInBhc3Nwb3J0UGhvdG8iLCBmLmZpbGUpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMucGF5bWVudERvY0ZpbGUuZm9yRWFjaChmdW5jdGlvbiAoZikgewogICAgICAgICAgZm9ybS5hcHBlbmQoInBheW1lbnREb2NGaWxlIiwgZi5maWxlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gZm9ybTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzMi5jb21wdXRlZE9ic2VydmVyLnZhbGlkYXRlKCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMih2YWxpZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIV90aGlzMi5wYXNzcG9ydFBob3RvICYmICFfdGhpczIucGFzc3BvcnREb2NGaWxlIHx8IChfdGhpczIucGFzc3BvcnRQaG90byA/ICFfdGhpczIucGFzc3BvcnRQaG90by5sZW5ndGggOiB0cnVlKSAmJiAoX3RoaXMyLnBhc3Nwb3J0RG9jRmlsZSA/ICFfdGhpczIucGFzc3BvcnREb2NGaWxlLmxlbmd0aCA6IHRydWUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuJHRvYXN0KF90aGlzMi4kdCgnbWVzc2FnZXMuZmlsbF9hZF9wYXNzcG9ydF9kb2Nfb3JfcGhvdG8nKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpczIuaXNCeUFnZW5jeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjcnVkQW5kTGlzdHNTZXJ2aWNlLnNhdmVGaWxlRW50aXR5KCJzZWNvbmQtYWdlbnQtZmlsZXMvIi5jb25jYXQoX3RoaXMyLiRyb3V0ZS5wYXJhbXMuaWQpLCBfdGhpczIubWFrZUFuZFJldHVybkZvcm1EYXRhKCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5jb21wdXRlZE9ic2VydmVyLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuJHRvYXN0KF90aGlzMi4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi5pc0J5R292ZXJubWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNydWRBbmRMaXN0c1NlcnZpY2Uuc2F2ZUZpbGVFbnRpdHkoImZpcnN0LWFnZW50LWZpbGVzLyIuY29uY2F0KF90aGlzMi4kcm91dGUucGFyYW1zLmlkKSwgX3RoaXMyLm1ha2VBbmRSZXR1cm5Gb3JtRGF0YSgpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLiR0b2FzdChfdGhpczIuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuJHRvYXN0KF90aGlzMi4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgLyoNCiAgKiBDUkVBVEVEICovCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEJ5SWQoTUFJTl9BUElfVVJMLCBfdGhpczMuJHJvdXRlLnBhcmFtcy5pZCwgdHJ1ZSwgbnVsbCwgX3RoaXMzLmlzQnlHb3Zlcm5tZW50ID8gQVBQRU5EX0FQSV9VUkxfRk9SX0dPVkVSTk1FTlQgOiBfdGhpczMuaXNCeUFnZW5jeSA/IEFQUEVORF9BUElfVVJMX0ZPUl9BR0VOQ1kgOiBmYWxzZSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHJlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5lZGl0aW5nSXRlbSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5zZXRGaWxlc0Zyb21TZXJ2ZXIoKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vIHRoaXMuJHN0b3JlLmNvbW1pdCgnU0VUX0dMT0JBTF9MT0FESU5HJywgZmFsc2UpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNSk7CiAgICB9KSkoKTsKICB9LAogIC8qDQogIFdBVENIICovCiAgd2F0Y2g6IHsKICAgIHZlZUVycm9yczogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCwgb2xkVmFsKSB7CiAgICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgICAgICB2YWwuaXRlbXMubWFwKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIC8qIGlmICh0aGlzLmZpZWxkcy5oYXNPd25Qcm9wZXJ0eShlcnIuZmllbGQpICE9PSAtMSkgew0KICAgICAgICAgICAgICB0aGlzLmVycm9yc1tlcnIuZmllbGRdID0gZXJyLm1zZzsNCiAgICAgICAgICB9ICovCiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACA;AACA;EACAC,aACA;EACA;AACA;EACAC;IACA;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACA;AACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;EACA;EACA;AACA;EACAC;IACAC;MACA;MACA;QACA;QACAC;QACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;gBACA;gBACA;kBACAC,gCACAC;oBAAA;kBAAA,GACAA;oBACAC;oBACAA;oBACA;sBACAC;oBACA;oBAEA;oBACA;kBACA,GACAC;oBAAA;kBAAA;kBACA;AACA;AACA;gBACA;cACA;gBACA;gBACA;kBACAJ,gCACAC;oBAAA;kBAAA,GACAA;oBACAC;oBACAA;oBACA;sBACAC;oBACA;oBAEA;oBACA;kBACA,GACAC;oBAAA;kBAAA;;kBAEA;AACA;kBACA;kBACA;AACA;kBACA;AACA;kBACA;kBACA;kBACA;kBACA;AACA;gBACA;gBACA;gBACA;kBACAJ,gCACAC;oBAAA;kBAAA,GACAA;oBACAC;oBACAA;oBACA;sBACAC;oBACA;oBAEA;oBACA;kBACA,GACAC;oBAAA;kBAAA;kBACA;AACA;AACA;gBACA;;gBACA;kBACA;kBACAJ,mEACAC;oBAAA;kBAAA,GACAA;oBACAC;oBACAA;oBACA;sBACAC;oBACA;oBAEA;oBACA;kBACA,GACAC;oBAAA;kBAAA;kBACA;AACA;AACA;gBACA;;gBACA;kBACA;kBACAJ,iEACAC;oBAAA;kBAAA,GACAA;oBACAC;oBACAA;oBACA;sBACAC;oBACA;oBAEA;oBACA;kBACA,GACAC;oBAAA;kBAAA;kBACA;AACA;AACA;gBACA;;gBACA;kBACA;kBACAJ,kEACAC;oBAAA;kBAAA,GACAA;oBACAC;oBACAA;oBACA;sBACAC;oBACA;oBAEA;oBACA;kBACA,GACAC;oBAAA;kBAAA;kBACA;AACA;AACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;IAEAC;MACA;MACA;QACA;AACA;AACA;QACA;UACAC;QACA;MACA;QACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QAEA;UACAA;QACA;QACA;UACAA;QACA;QACA;;QAEA;UACAA;QACA;QACA;UACAA;QACA;QACA;UACAA;QACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA,KACAC;0BAAA;0BAAA;wBAAA;wBAAA,MACA;0BAAA;0BAAA;wBAAA;wBACA;0BAAAP;wBAAA;wBAAA;sBAAA;wBAAA,KAGA;0BAAA;0BAAA;wBAAA;wBAAA;wBAAA,OACAQ,oBACAC,sGACAX;0BACA;0BACA;0BACA;0BACA;4BAAAE;0BAAA;wBACA,GACAC;0BAAA;wBAAA;sBAAA;wBAAA;wBAAA;sBAAA;wBAAA,KACA;0BAAA;0BAAA;wBAAA;wBAAA;wBAAA,OACAO,oBACAC,qGACAX;0BACA;0BACA;0BACA;0BACA;4BAAAE;0BAAA;wBACA,GACAC;0BAAA;wBAAA;sBAAA;wBAAA;wBAAA;sBAAA;wBAGA;0BAAAD;wBAAA;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CAEA;gBAAA;kBAAA;gBAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;EACA;EACA;AACA;EACAU;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OAEAF,8LACAV;cAAA;gBAAA;kBAAA;oBAAA;sBACA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA;cAAA;gBAAA;cAAA;YAAA,KACAG;cACAU;YACA,GACAC;cACA;YAAA,CACA;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EACA;EACA;AACA;EACAC;IACAC;MACAC;QACA;QACAC;UACA;AACA;AACA;QAFA,CAGA;MACA;MACAC;IACA;EACA;AACA","names":["name","components","data","publicPath","editingItem","addressDto","errors","architectDocFile","photos","passportDocFile","passportPhoto","paymentDocFile","computed","isModeCreate","isByAgency","isByGovernment","computedObserver","methods","generateUUID","dt","setFilesFromServer","fetch","then","myBlob","type","catch","collectErr","hasError","makeAndReturnFormData","form","save","valid","crudAndListsService","saveFileEntity","created","console","finally","watch","veeErrors","handler","val","deep"],"sourceRoot":"src/modules/advertisement/modules/ad_passport_info","sources":["UpdateItemFiles.vue"],"sourcesContent":["<template>\r\n    <base-create-or-update-wrapper\r\n        @save=\"save\"\r\n        has-save-suspend\r\n        :custom-title=\"(isModeCreate ? $t('actions.create') : $t('column.passport_number') + ': ' + editingItem.passportNumber)\"\r\n    >\r\n        <ValidationObserver\r\n            ref=\"observer\"\r\n            v-slot=\"{}\"\r\n        >\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <ValidationProvider\r\n                        name=\"architecDocFile\"\r\n                        rules=\"\"\r\n                        mode=\"passive\"\r\n                    >\r\n                        <template v-slot:default=\"\">\r\n                            <BaseFileUploaderWithValidation\r\n                                ref=\"architectDocUploader\"\r\n                                v-model=\"architectDocFile\"\r\n                                data-vv-name=\"architecDocFile\"\r\n                                data-vv-as=\"ArchitecDocFile\"\r\n                                :max-files=\"5\"\r\n                                :has-error=\"hasError('mandat')\"\r\n                                :error=\"collectErr('mandat')\"\r\n                                :label=\"$t('column.ad_construction_drawing')\"\r\n                            ></BaseFileUploaderWithValidation>\r\n                        </template>\r\n                    </ValidationProvider>\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <ValidationProvider\r\n                        v-if=\"isByAgency\"\r\n                        name=\"photos\"\r\n                        rules=\"\"\r\n                    >\r\n                        <template v-slot:default=\"\">\r\n                            <BaseFileUploaderWithValidation\r\n                                ref=\"photosUploader\"\r\n                                v-model=\"photos\"\r\n                                :max-files=\"null\"\r\n                                :max-fileSize=\"null\"\r\n                                data-vv-name=\"photos\"\r\n                                data-vv-as=\"Photos\"\r\n                                :has-error=\"hasError('photos')\"\r\n                                :error=\"collectErr('photos')\"\r\n                                :label=\"$t('column.ad_construction_photo')\"\r\n                            ></BaseFileUploaderWithValidation>\r\n                        </template>\r\n                    </ValidationProvider>\r\n                </b-col>\r\n            </b-row>\r\n\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <ValidationProvider\r\n                        v-if=\"isByAgency\"\r\n                        name=\"passportDocFile\"\r\n                        rules=\"\"\r\n                        mode=\"passive\"\r\n                    >\r\n                        <template v-slot:default=\"\">\r\n                            <BaseFileUploaderWithValidation\r\n                                ref=\"passportDocUploader\"\r\n                                v-model=\"passportDocFile\"\r\n                                :max-files=\"1\"\r\n                                data-vv-name=\"passportDocFile\"\r\n                                data-vv-as=\"PassportDocFile\"\r\n                                :has-error=\"hasError('passportDocFile')\"\r\n                                :error=\"collectErr('passportDocFile')\"\r\n                                :label=\"$t('column.ad_construction_passport_doc_file')\"\r\n                            ></BaseFileUploaderWithValidation>\r\n                        </template>\r\n                    </ValidationProvider>\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <ValidationProvider\r\n                        v-if=\"isByAgency\"\r\n                        name=\"paymentDocFile\"\r\n                        rules=\"\"\r\n                        mode=\"passive\"\r\n                    >\r\n                        <template v-slot:default=\"\">\r\n                            <BaseFileUploaderWithValidation\r\n                                ref=\"paymentDocUploader\"\r\n                                v-model=\"paymentDocFile\"\r\n                                :max-files=\"1\"\r\n                                data-vv-name=\"paymentDocFile\"\r\n                                data-vv-as=\"PaymentDocFile\"\r\n                                :has-error=\"hasError('paymentDocFile')\"\r\n                                :error=\"collectErr('paymentDocFile')\"\r\n                                :label=\"$t('column.ad_construction_monthly_income_doc_photo')\"\r\n                            ></BaseFileUploaderWithValidation>\r\n                        </template>\r\n                    </ValidationProvider>\r\n                </b-col>\r\n            </b-row>\r\n\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <ValidationProvider\r\n                        v-if=\"isByAgency\"\r\n                        name=\"passportPhoto\"\r\n                        rules=\"\"\r\n                    >\r\n                        <template v-slot:default=\"\">\r\n                            <BaseFileUploaderWithValidation\r\n                                ref=\"passportPhotoUploader\"\r\n                                v-model=\"passportPhoto\"\r\n                                :max-files=\"1\"\r\n                                data-vv-name=\"passportPhoto\"\r\n                                data-vv-as=\"PassportPhoto\"\r\n                                :has-error=\"hasError('passportPhoto')\"\r\n                                :error=\"collectErr('passportPhoto')\"\r\n                                :label=\"$t('column.ad_construction_passport_photo')\"\r\n                            ></BaseFileUploaderWithValidation>\r\n                        </template>\r\n                    </ValidationProvider>\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n\r\n                </b-col>\r\n            </b-row>\r\n\r\n        </ValidationObserver>\r\n    </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'contractor-advertising-construction'\r\nconst APPEND_API_URL_FOR_GOVERNMENT = 'first-agent-files'\r\nconst APPEND_API_URL_FOR_AGENCY = 'second-agent-files'\r\n/*\r\n* YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\n\r\nexport default {\r\n    name: \"UpdateItemFiles\",\r\n    /*\r\n    * COMPONENTS */\r\n    components: {\r\n    },\r\n    /*\r\n    * DATA */\r\n    data () {\r\n        return {\r\n            publicPath: process.env.BASE_URL,\r\n            editingItem: {\r\n                addressDto: {}\r\n            },\r\n            errors: [],\r\n            architectDocFile: [],\r\n            photos: [],\r\n            passportDocFile: [],\r\n            passportPhoto: [],\r\n            paymentDocFile: []\r\n        }\r\n    },\r\n    /*\r\n    * COMPUTED */\r\n    computed: {\r\n        isModeCreate () {\r\n            return this.$route.name == 'CreateAdPassportInfoByAgency' || this.$route.name == 'CreateAdPassportInfoByGovernment'\r\n        },\r\n        isByAgency () {\r\n            return this.$route.name == 'UpdateAdPassportInfoFilesByAgency'\r\n        },\r\n        isByGovernment () {\r\n            return this.$route.name == 'UpdateAdPassportInfoFilesByGovernment'\r\n        },\r\n        computedObserver () {\r\n            return this.$refs.observer\r\n        },\r\n        /* multipleMinimumCollectionsComputedObserver () {\r\n            return this.$refs['multiple-minimum-collections-observer']\r\n        },\r\n        singleMinimumCollectionUpdateComputedObserver () {\r\n            return this.$refs['single-minimum-collection-update-observer']\r\n        } */\r\n    },\r\n    /*\r\n    * METHODS */\r\n    methods: {\r\n        generateUUID () {\r\n            var dt = new Date().getTime();\r\n            var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n                var r = (dt + Math.random() * 16) % 16 | 0;\r\n                dt = Math.floor(dt / 16);\r\n                return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n            });\r\n            return uuid;\r\n        },\r\n        async setFilesFromServer () {\r\n            if (this.isByGovernment) {\r\n                // ARCHITECT_DOC_FILES\r\n                this.editingItem.architectDocFileList.forEach(f => {\r\n                    fetch(this.publicPath + f.url)\r\n                        .then((res) => res.blob())\r\n                        .then((myBlob) => {\r\n                            myBlob.name = f.name;\r\n                            myBlob.lastModified = new Date();\r\n                            const myFile = new File([myBlob], f.name, {\r\n                                type: myBlob.type,\r\n                            });\r\n\r\n                            let url = this.publicPath + f.url;\r\n                            this.$refs.architectDocUploader.$refs.dropzone.manuallyAddFile(myFile, url);\r\n                        })\r\n                        .catch(e => console.log(e));\r\n                    /* let file = { size: f.size, name: f.name, type: f.contentType, uuid: this.generateUUID() };\r\n                    let url = this.publicPath + f.url;\r\n                    this.$refs.architectDocUploader.$refs.dropzone.manuallyAddFile(file, url); */\r\n                })\r\n            } else if (this.isByAgency) {\r\n                // ARCHITECT_DOC_FILES\r\n                this.editingItem.architectDocFileList.forEach((f, index) => {\r\n                    fetch(this.publicPath + f.url)\r\n                        .then((res) => res.blob())\r\n                        .then((myBlob) => {\r\n                            myBlob.name = f.name;\r\n                            myBlob.lastModified = new Date();\r\n                            const myFile = new File([myBlob], f.name, {\r\n                                type: myBlob.type,\r\n                            });\r\n\r\n                            let url = this.publicPath + f.url;\r\n                            this.$refs.architectDocUploader.$refs.dropzone.manuallyAddFile(myFile, url);\r\n                        })\r\n                        .catch(e => console.log(e));\r\n\r\n                    /* const mockFile = { name: f.name, size: f.size };\r\n                    console.log(this.$refs.architectDocUploader.$refs.dropzone.dropzone.options) */\r\n                    // this.$refs.architectDocUploader.$refs.dropzone.files[index] = f.name;\r\n                    /* this.$refs.architectDocUploader.$refs.dropzone.dropzone.options.addedfile(this.$refs.architectDocUploader.$refs.dropzone, mockFile);\r\n                    this.$refs.architectDocUploader.$refs.dropzone.dropzone.options.thumbnail(this.$refs.architectDocUploader.$refs.dropzone, mockFile, this.publicPath + f.url); */\r\n                    /* mockFile.previewElement.classList.add('dz-success');\r\n                    mockFile.previewElement.classList.add('dz-complete'); */\r\n                    // let file = new File([\"\"], f.name, { type: f.contentType, size: f.size, lastModified: new Date().getTime() })\r\n                    // file.size = f.size\r\n                    // let file = { size: f.size, name: f.name, type: f.contentType, uuid: this.generateUUID() };\r\n                    /* let url = this.publicPath + f.url;\r\n                    this.$refs.architectDocUploader.$refs.dropzone.manuallyAddFile(myFile, url); */\r\n                })\r\n                // OBJECT_PHOTOS\r\n                this.editingItem.objectPhotoList.forEach(f => {\r\n                    fetch(this.publicPath + f.url)\r\n                        .then((res) => res.blob())\r\n                        .then((myBlob) => {\r\n                            myBlob.name = f.name;\r\n                            myBlob.lastModified = new Date();\r\n                            const myFile = new File([myBlob], f.name, {\r\n                                type: myBlob.type,\r\n                            });\r\n\r\n                            let url = this.publicPath + f.url;\r\n                            this.$refs.photosUploader.$refs.dropzone.manuallyAddFile(myFile, url);\r\n                        })\r\n                        .catch(e => console.log(e));\r\n                    /* let file = { size: f.size, name: f.name, type: f.contentType, uuid: this.generateUUID() };\r\n                    let url = this.publicPath + f.url;\r\n                    this.$refs.photosUploader.$refs.dropzone.manuallyAddFile(file, url); */\r\n                })\r\n                if (this.editingItem.passportDocFileUrl) {\r\n                    // PASSPORT_DOC_FILE\r\n                    fetch(this.publicPath + this.editingItem.passportDocFileUrl.url)\r\n                        .then((res) => res.blob())\r\n                        .then((myBlob) => {\r\n                            myBlob.name = this.editingItem.passportDocFileUrl.name;\r\n                            myBlob.lastModified = new Date();\r\n                            const myFile = new File([myBlob], this.editingItem.passportDocFileUrl.name, {\r\n                                type: myBlob.type,\r\n                            });\r\n\r\n                            let url = this.publicPath + this.editingItem.passportDocFileUrl.url;\r\n                            this.$refs.passportDocUploader.$refs.dropzone.manuallyAddFile(myFile, url);\r\n                        })\r\n                        .catch(e => console.log(e));\r\n                    /* let pDocFile = { size: this.editingItem.passportDocFileUrl.size, name: this.editingItem.passportDocFileUrl.name, type: this.editingItem.passportDocFileUrl.contentType, uuid: this.generateUUID() };\r\n                    let pDocFileUrl = this.publicPath + this.editingItem.passportDocFileUrl.url;\r\n                    this.$refs.passportDocUploader.$refs.dropzone.manuallyAddFile(pDocFile, pDocFileUrl); */\r\n                }\r\n                if (this.editingItem.passportPhotoUrl) {\r\n                    // PASSPORT_PHOTO\r\n                    fetch(this.publicPath + this.editingItem.passportPhotoUrl.url)\r\n                        .then((res) => res.blob())\r\n                        .then((myBlob) => {\r\n                            myBlob.name = this.editingItem.passportPhotoUrl.name;\r\n                            myBlob.lastModified = new Date();\r\n                            const myFile = new File([myBlob], this.editingItem.passportPhotoUrl.name, {\r\n                                type: myBlob.type,\r\n                            });\r\n\r\n                            let url = this.publicPath + this.editingItem.passportPhotoUrl.url;\r\n                            this.$refs.passportPhotoUploader.$refs.dropzone.manuallyAddFile(myFile, url);\r\n                        })\r\n                        .catch(e => console.log(e));\r\n                    /* let pPhoto = { size: this.editingItem.passportPhotoUrl.size, name: this.editingItem.passportPhotoUrl.name, type: this.editingItem.passportPhotoUrl.contentType, uuid: this.generateUUID() };\r\n                    let pPhotoUrl = this.publicPath + this.editingItem.passportPhotoUrl.url;\r\n                    this.$refs.passportPhotoUploader.$refs.dropzone.manuallyAddFile(pPhoto, pPhotoUrl); */\r\n                }\r\n                if (this.editingItem.paymentDocFileUrl) {\r\n                    // PAYMENT_DOC_FILE\r\n                    fetch(this.publicPath + this.editingItem.paymentDocFileUrl.url)\r\n                        .then((res) => res.blob())\r\n                        .then((myBlob) => {\r\n                            myBlob.name = this.editingItem.paymentDocFileUrl.name;\r\n                            myBlob.lastModified = new Date();\r\n                            const myFile = new File([myBlob], this.editingItem.paymentDocFileUrl.name, {\r\n                                type: myBlob.type,\r\n                            });\r\n\r\n                            let url = this.publicPath + this.editingItem.paymentDocFileUrl.url;\r\n                            this.$refs.paymentDocUploader.$refs.dropzone.manuallyAddFile(myFile, url);\r\n                        })\r\n                        .catch(e => console.log(e));\r\n                    /* let paymentFile = { size: this.editingItem.paymentDocFileUrl.size, name: this.editingItem.paymentDocFileUrl.name, type: this.editingItem.paymentDocFileUrl.contentType, uuid: this.generateUUID() };\r\n                    let paymentFileUrl = this.publicPath + this.editingItem.paymentDocFileUrl.url;\r\n                    this.$refs.paymentDocUploader.$refs.dropzone.manuallyAddFile(paymentFile, paymentFileUrl); */\r\n                }\r\n            }\r\n        },\r\n        collectErr (key) {\r\n            if (this.errors[key] !== undefined) {\r\n                return this.errors[key];\r\n            }\r\n            return undefined;\r\n        },\r\n        hasError (key) {\r\n            if (this.errors[key] !== undefined) {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        /* dataURLtoFile (dataurl, filename) {\r\n            let arr = dataurl.split(\",\"),\r\n                mime = arr[0].match(/:(.*?);/)[1],\r\n                bstr = atob(arr[1]),\r\n                n = bstr.length,\r\n                u8arr = new Uint8Array(n);\r\n\r\n            while (n--) {\r\n                u8arr[n] = bstr.charCodeAt(n);\r\n            }\r\n            return new File([u8arr], filename, { type: mime });\r\n        }, */\r\n        makeAndReturnFormData () {\r\n            let form = new FormData();\r\n            if (this.isByGovernment) {\r\n                /* this.architectDocFile.forEach(f => {\r\n                    form.append(\"architectDocFiles\", this.dataURLtoFile(f.file, f.name));\r\n                }) */\r\n                this.architectDocFile.forEach(f => {\r\n                    form.append(\"architectDocFiles\", f.file);\r\n                })\r\n            } else if (this.isByAgency) {\r\n                /* this.architectDocFile.forEach(f => {\r\n                    form.append(\"architectDocFiles\", this.dataURLtoFile(f.file, f.name));\r\n                })\r\n                this.photos.forEach(f => {\r\n                    form.append(\"objectPhotos\", this.dataURLtoFile(f.file, f.name));\r\n                })\r\n                form.append(\"isMainIndexForObjectPhotos\", this.photos.length ? 0 : null);\r\n\r\n                this.passportDocFile.forEach(f => {\r\n                    form.append(\"passportDocFile\", this.dataURLtoFile(f.file, f.name));\r\n                })\r\n                this.passportPhoto.forEach(f => {\r\n                    form.append(\"passportPhoto\", this.dataURLtoFile(f.file, f.name));\r\n                })\r\n                this.paymentDocFile.forEach(f => {\r\n                    form.append(\"paymentDocFile\", this.dataURLtoFile(f.file, f.name));\r\n                }) */\r\n                this.architectDocFile.forEach(f => {\r\n                    form.append(\"architectDocFiles\", f.file);\r\n                })\r\n                this.photos.forEach(f => {\r\n                    form.append(\"objectPhotos\", f.file);\r\n                })\r\n                // form.append(\"isMainIndexForObjectPhotos\", this.photos.length ? 0 : null);\r\n\r\n                this.passportDocFile.forEach(f => {\r\n                    form.append(\"passportDocFile\", f.file);\r\n                })\r\n                this.passportPhoto.forEach(f => {\r\n                    form.append(\"passportPhoto\", f.file);\r\n                })\r\n                this.paymentDocFile.forEach(f => {\r\n                    form.append(\"paymentDocFile\", f.file);\r\n                })\r\n            }\r\n            return form\r\n        },\r\n        async save () {\r\n            this.computedObserver.validate().then(async valid => {\r\n                if (valid) {\r\n                    if ((!this.passportPhoto && !this.passportDocFile) || ((this.passportPhoto ? !this.passportPhoto.length : true) && (this.passportDocFile ? !this.passportDocFile.length : true))) {\r\n                        this.$toast(this.$t('messages.fill_ad_passport_doc_or_photo'), { type: 'error' });\r\n                        return\r\n                    }\r\n                    if (this.isByAgency) {\r\n                        await crudAndListsService\r\n                            .saveFileEntity(`second-agent-files/${this.$route.params.id}`, this.makeAndReturnFormData())\r\n                            .then(res => {\r\n                                this.computedObserver.reset()\r\n                                this.editingItem = Object.assign({}, {});\r\n                                this.$router.go(-1)\r\n                                this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                            })\r\n                            .catch(e => console.log(e));\r\n                    } else if (this.isByGovernment) {\r\n                        await crudAndListsService\r\n                            .saveFileEntity(`first-agent-files/${this.$route.params.id}`, this.makeAndReturnFormData())\r\n                            .then(res => {\r\n                                this.computedObserver.reset()\r\n                                this.editingItem = Object.assign({}, {});\r\n                                this.$router.go(-1)\r\n                                this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                            })\r\n                            .catch(e => console.log(e));\r\n                    }\r\n                } else {\r\n                    this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                }\r\n            });\r\n        }\r\n    },\r\n    /*\r\n    * CREATED */\r\n    async created () {\r\n        // this.$store.commit('SET_GLOBAL_LOADING', true)\r\n        await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, true, null, this.isByGovernment ? APPEND_API_URL_FOR_GOVERNMENT : this.isByAgency ? APPEND_API_URL_FOR_AGENCY : false)\r\n            .then(async res => {\r\n                this.editingItem = res.data\r\n                await this.setFilesFromServer()\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            })\r\n            .finally(() => {\r\n                // this.$store.commit('SET_GLOBAL_LOADING', false)\r\n            })\r\n    },\r\n    /*\r\n    WATCH */\r\n    watch: {\r\n        veeErrors: {\r\n            handler (val, oldVal) {\r\n                this.errors = [];\r\n                val.items.map((err) => {\r\n                    /* if (this.fields.hasOwnProperty(err.field) !== -1) {\r\n                        this.errors[err.field] = err.msg;\r\n                    } */\r\n                });\r\n            },\r\n            deep: true,\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.col-form-label {\r\n    padding-top: 0;\r\n}\r\n\r\nul {\r\n    list-style-type: none;\r\n}\r\n\r\n.dz-remove {\r\n    display: inline-block !important;\r\n    width: 1.2em;\r\n    height: 1.2em;\r\n\r\n    position: absolute;\r\n    top: 5px;\r\n    right: 5px;\r\n    z-index: 1000;\r\n\r\n    font-size: 1.2em !important;\r\n    line-height: 1em;\r\n\r\n    text-align: center;\r\n    font-weight: bold;\r\n    border: 1px solid gray !important;\r\n    border-radius: 1.2em;\r\n    color: gray;\r\n    background-color: white;\r\n    opacity: 0.5;\r\n}\r\n\r\n.dz-remove:hover {\r\n    text-decoration: none !important;\r\n    opacity: 1;\r\n}\r\n</style>\r\n"]}]}