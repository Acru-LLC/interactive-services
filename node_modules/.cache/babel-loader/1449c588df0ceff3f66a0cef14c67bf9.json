{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\projects\\SignKeys.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\projects\\SignKeys.vue","mtime":1674799497697},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwp2YXIgRUlNWk9fTUFKT1IgPSAzOwp2YXIgRUlNWk9fTUlOT1IgPSAzNzsKdmFyIGVycm9yQ0FQSVdTID0gItCe0YjQuNCx0LrQsCDRgdC+0LXQtNC40L3QtdC90LjRjyDRgSBFLUlNWk8uINCS0L7Qt9C80L7QttC90L4g0YMg0LLQsNGBINC90LUg0YPRgdGC0LDQvdC+0LLQu9C10L0g0LzQvtC00YPQu9GMIEUtSU1aTyDQuNC70Lgg0JHRgNCw0YPQt9C10YAgRS1JTVpPLiI7CnZhciBlcnJvckJyb3dzZXJXUyA9ICLQkdGA0LDRg9C30LXRgCDQvdC1INC/0L7QtNC00LXRgNC20LjQstCw0LXRgiDRgtC10YXQvdC+0LvQvtCz0LjRjiBXZWJTb2NrZXQuINCj0YHRgtCw0L3QvtCy0LjRgtC1INC/0L7RgdC70LXQtNC90Y7RjiDQstC10YDRgdC40Y4g0LHRgNCw0YPQt9C10YDQsC4iOwp2YXIgZXJyb3JVcGRhdGVBcHAgPSAn0JLQndCY0JzQkNCd0JjQlSAhISEg0KPRgdGC0LDQvdC+0LLQuNGC0LUg0L3QvtCy0YPRjiDQstC10YDRgdC40Y4g0L/RgNC40LvQvtC20LXQvdC40Y8gRS1JTVpPINC40LvQuCDQkdGA0LDRg9C30LXRgNCwIEUtSU1aTy48YnIgLz48YSBocmVmPSJodHRwczovL2UtaW16by51ei9tYWluL2Rvd25sb2Fkcy8iIHJvbGU9ImJ1dHRvbiI+0KHQutCw0YfQsNGC0Ywg0J/QniBFLUlNWk88L2E+JzsKdmFyIGVycm9yV3JvbmdQYXNzd29yZCA9ICLQn9Cw0YDQvtC70Ywg0L3QtdCy0LXRgNC90YvQuS4iOwppbXBvcnQgQXBwU2V0dGluZ3MgZnJvbSAiQC9zZXR0aW5ncyI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyJkYXRhVG9TaWduIl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBrZXlzTGlzdDogW10sCiAgICAgIGN1cnJlbnRJdGVtOiBudWxsLAogICAgICBtb2RhbFRpdGxlOiBudWxsLAogICAgICBzaWduTW9kYWw6IGZhbHNlLAogICAgICBsb2FkaW5nQnV0dG9uOiBmYWxzZQogICAgfTsKICB9LAogIG5hbWU6ICJMT0dJTkVTUCIsCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5hcHBMb2FkKCk7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbWV0aG9kczogewogICAgaGlkZU1vZGFsOiBmdW5jdGlvbiBoaWRlTW9kYWwobW9kYWwpIHsKICAgICAgdGhpcy4kZGF0YVttb2RhbF0gPSBmYWxzZTsKICAgIH0sCiAgICB3c0Vycm9yOiBmdW5jdGlvbiB3c0Vycm9yKGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgICAgX3RoaXMyLnVpU2hvd01lc3NhZ2UoImVycm9yQ0FQSVdTIiArICIgOiAiICsgZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMi51aVNob3dNZXNzYWdlKCJlcnJvckJyb3dzZXJXUyIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbkJ5RWltem86IGZ1bmN0aW9uIHNpZ25CeUVpbXpvKGRhdGEyKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgdm0sIGRhdGEsIHByb21pc2U7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzMy5sb2FkaW5nQnV0dG9uID0gdHJ1ZTsKICAgICAgICAgICAgICB2bSA9IF90aGlzMzsKICAgICAgICAgICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoX3RoaXMzLmRhdGFUb1NpZ24pOwogICAgICAgICAgICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICBFSU1aT0NsaWVudC5sb2FkS2V5KHZtLmN1cnJlbnRJdGVtLCBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICAgICAgRUlNWk9DbGllbnQuY3JlYXRlUGtjczcoaWQsIGRhdGEsIG51bGwsIGZ1bmN0aW9uIChwa2NzNykgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocGtjczcpOwogICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgICAgIHJlamVjdCgiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nQnV0dG9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmluZGV4T2YoIkJhZFBhZGRpbmdFeGNlcHRpb24iKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICB2bS5zaG93TXNnRXJyb3IoZXJyb3JXcm9uZ1Bhc3N3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZtLnNob3dNc2dFcnJvcihyKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImtleUlkIikuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICB2bS5zaG93TXNnRXJyb3IoZXJyb3JCcm93c2VyV1MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoZSkgdm0ud3NFcnJvcihlKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgICByZWplY3QoImVycm9yIik7CiAgICAgICAgICAgICAgICAgIHZtLmxvYWRpbmdCdXR0b24gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoci5pbmRleE9mKCJCYWRQYWRkaW5nRXhjZXB0aW9uIikgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgIHZtLnNob3dNc2dFcnJvcihlcnJvcldyb25nUGFzc3dvcmQpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICB2bS5zaG93TXNnRXJyb3Iocik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZtLiRzaG93TXNnRXJybyhlcnJvckJyb3dzZXJXUyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKGUpIHZtLndzRXJyb3IoZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHZtLiRlbWl0KCJzaWduIiwgewogICAgICAgICAgICAgICAgICBpbm46IHZtLmN1cnJlbnRJdGVtLlRJTiwKICAgICAgICAgICAgICAgICAgY29udGVudDogc3VjY2VzcywKICAgICAgICAgICAgICAgICAgcG5mbDogdm0uY3VycmVudEl0ZW0uUElORkwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgdm0uc2hvd01zZ0Vycm9yKCJTZXJ2ZXIgZXJyb3IuLi4iKTsKICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZtLnNpZ25Nb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdm0ubG9hZGluZ0J1dHRvbiA9IGZhbHNlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvcGVuU2lnbk1vZGFsOiBmdW5jdGlvbiBvcGVuU2lnbk1vZGFsKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpczQuY3VycmVudEl0ZW0gPSBpdGVtOwogICAgICAgICAgICAgIF90aGlzNC5tb2RhbFRpdGxlID0gaXRlbS5zZXJpYWxOdW1iZXIgKyAiIC0gIiArIGl0ZW0uQ047CiAgICAgICAgICAgICAgX3RoaXM0LnNpZ25CeUVpbXpvKCk7CiAgICAgICAgICAgICAgLy8gdGhpcy5zaWduTW9kYWwgPSB0cnVlOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXREYXRlRm9ybWF0OiBmdW5jdGlvbiBnZXREYXRlRm9ybWF0KGRhdGUpIHsKICAgICAgdmFyIGRhdGEgPSBuZXcgRGF0ZShkYXRlKTsKICAgICAgdmFyIG1vbnRoID0gZGF0YS5nZXRNb250aCgpICsgMTsKICAgICAgcmV0dXJuIGRhdGEuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkgKyAiLiIgKyAobW9udGggPD0gOSA/ICIwIiArIG1vbnRoIDogbW9udGgpLnRvU3RyaW5nKCkgKyAiLiIgKyBkYXRhLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTsKICAgIH0sCiAgICB1aUNyZWF0ZUl0ZW06IGZ1bmN0aW9uIHVpQ3JlYXRlSXRlbShpdG1rZXksIHZvKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICB2by5leHBpcmVkID0gZGF0ZXMuY29tcGFyZShub3csIHZvLnZhbGlkVG8pID4gMDsKICAgICAgdmFyIGl0bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBpdG0udmFsdWUgPSBpdG1rZXk7CiAgICAgIGl0bS50ZXh0ID0gdm8uQ047CiAgICAgIGlmICghdm8uZXhwaXJlZCkge30gZWxzZSB7CiAgICAgICAgaXRtLnN0eWxlLmNvbG9yID0gImdyYXkiOwogICAgICAgIGl0bS50ZXh0ID0gaXRtLnRleHQgKyAiICjRgdGA0L7QuiDQuNGB0YLQtdC6KSI7CiAgICAgIH0KICAgICAgdm0ua2V5c0xpc3QucHVzaCh2byk7CiAgICAgIGl0bS5zZXRBdHRyaWJ1dGUoInZvIiwgSlNPTi5zdHJpbmdpZnkodm8pKTsKICAgICAgaXRtLnNldEF0dHJpYnV0ZSgiaWQiLCBpdG1rZXkpOwogICAgICByZXR1cm4gaXRtOwogICAgfSwKICAgIHVpTG9hZEtleXM6IGZ1bmN0aW9uIHVpTG9hZEtleXMoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgdm07CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHZtID0gX3RoaXM1OwogICAgICAgICAgICAgIEVJTVpPQ2xpZW50Lmxpc3RBbGxVc2VyS2V5cyhmdW5jdGlvbiAobywgaSkgewogICAgICAgICAgICAgICAgdmFyIGl0ZW1JZCA9ICJpdG0tIiArIG8uc2VyaWFsTnVtYmVyICsgIi0iICsgaTsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtSWQ7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGl0ZW1JZCwgdikgewogICAgICAgICAgICAgICAgcmV0dXJuIHZtLnVpQ3JlYXRlSXRlbShpdGVtSWQsIHYpOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChpdGVtcywgZmlyc3RJZCkgewogICAgICAgICAgICAgICAgLy92bS51aUZpbGxDb21ibyhpdGVtcyk7CiAgICAgICAgICAgICAgICAvL3ZtLnVpQ29tYm9TZWxlY3QoZmlyc3RJZCk7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgICAgICAgICAgIHZtLnNob3dNc2dFcnJvcihlcnJvckNBUElXUyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFwcExvYWQ6IGZ1bmN0aW9uIGFwcExvYWQoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZtLmxvYWRpbmcgPSB0cnVlOwogICAgICBFSU1aT0NsaWVudC5BUElfS0VZUyA9IEFwcFNldHRpbmdzLmFwaV9rZXlzOwogICAgICBFSU1aT0NsaWVudC5jaGVja1ZlcnNpb24oZnVuY3Rpb24gKG1ham9yLCBtaW5vcikgewogICAgICAgIHZhciBuZXdWZXJzaW9uID0gRUlNWk9fTUFKT1IgKiAxMDAgKyBFSU1aT19NSU5PUjsKICAgICAgICB2YXIgaW5zdGFsbGVkVmVyc2lvbiA9IHBhcnNlSW50KG1ham9yKSAqIDEwMCArIHBhcnNlSW50KG1pbm9yKTsKICAgICAgICBpZiAoaW5zdGFsbGVkVmVyc2lvbiA8IG5ld1ZlcnNpb24pIHsKICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHZtLnNob3dNc2dFcnJvcihlcnJvclVwZGF0ZUFwcCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVJTVpPQ2xpZW50Lmluc3RhbGxBcGlLZXlzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB2bS51aUxvYWRLZXlzKCk7CiAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgdm0uc2hvd01zZ0Vycm9yKHIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZtLndzRXJyb3IoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwgZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgaWYgKHIpIHsKICAgICAgICAgIHZtLnNob3dNc2dFcnJvcihyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm0uc2hvd01zZ0Vycm9yKGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LiRlbWl0KCJjbG9zZSIpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;AA+HA;AACA;AAEA,kBACA;AACA,qBACA;AACA,qBACA;AACA;AAEA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IAAA;IAAA;MAAA;QAAA;UAAA;YACA;YAAA;YAAA,OACA;UAAA;YACA;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;gBACA;cACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACA;cACAC;cACAb;cACAc;gBACAC,oBACAF,gBACA;kBACAE,wBACAC,IACAhB,MACA,MACA;oBACAiB;kBACA,GACA;oBACAC;oBACAL;oBACA;sBACA;wBACAA;sBACA;wBACAA;sBACA;oBACA;sBACAM;sBACAN;oBACA;oBACA;kBACA,EACA;gBACA,GACA;kBACAK;kBACAL;kBACA;oBACA;sBACAA;oBACA;sBACAA;oBACA;kBACA;oBACAA;kBACA;kBACA;gBACA,EACA;cACA;cACAC,QACAM,KACA;gBACAP;kBAAAQ;kBAAAC;kBAAAC;gBAAA;cACA,GACA;gBACAV;cACA,EACA,CACAW;gBACAX;gBACAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAY;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACA;cACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;MACA;MACA,OACA1B,4BACA,MACA,gDACA,MACAA;IAEA;IACA2B;MACA;MACA;MACAC;MACA;MACAC;MACAA;MACA,kBACA;QACAA;QACAA;MACA;MACAhB;MACAgB;MACAA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAjB;cACAE,4BACA;gBACA;gBACA;cACA,GACA;gBACA;cACA,GACA;gBACA;gBACA;cAAA,CACA,EACA;gBACAF;cACA,EACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAkB;MACA;MACAlB;MACAE;MACAA,yBACA;QACA;QACA;QACA;UACAF;UACAA;QACA;UACAE,2BACA;YACAF;YACAA;UACA,GACA;YACAA;YACA;cACAA;YACA;cACAA;YACA;UACA,EACA;QACA;MACA,GACA;QACAA;QACA;UACAA;QACA;UACAA;QACA;MACA,EACA;IACA;IAEAmB;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA","names":["props","data","loading","keysList","currentItem","modalTitle","signModal","loadingButton","name","created","methods","hideModal","wsError","signByEimzo","vm","promise","EIMZOClient","id","resolve","reject","document","then","inn","content","pnfl","finally","openSignModal","getDateFormat","uiCreateItem","vo","itm","uiLoadKeys","appLoad","close"],"sourceRoot":"src/modules/projects","sources":["SignKeys.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-row>\r\n      <b-col cols=\"12\">\r\n        <div>\r\n          <div v-if=\"keysList.length == 0\">\r\n            <b-row>\r\n              <b-col>\r\n                <div class=\"card p-5 text-center\">\r\n                  <i\r\n                    style=\"font-size: 40px\"\r\n                    class=\"bx bx-info-circle text-danger\"\r\n                  ></i>\r\n                  <h4 class=\"text-danger m-0\" style=\"font-size: 18px\">\r\n                    {{ $t(\"auth.no_e_signatures_found\") }}\r\n                  </h4>\r\n                </div>\r\n              </b-col>\r\n            </b-row>\r\n          </div>\r\n          <div v-if=\"loading\" class=\"text-center p-10\">\r\n            <b-spinner variant=\"primary\" type=\"grow\"></b-spinner>\r\n          </div>\r\n\r\n          <div v-else>\r\n            <b-row class=\"mb-2\" v-for=\"(item, index) in keysList\" :key=\"index\">\r\n              <b-col>\r\n                <b-overlay\r\n                  :opacity=\"0.1\"\r\n                  :show=\"loadingButton && currentItem.TIN == item.TIN\"\r\n                  rounded=\"sm\"\r\n                >\r\n                  <b-card no-body>\r\n                    <b-card-body>\r\n                      <div\r\n                        class=\"\r\n                          d-flex\r\n                          align-items-center\r\n                          justify-content-between\r\n                        \"\r\n                      >\r\n                        <p\r\n                          class=\"m-0 text-primary\"\r\n                          style=\"font-size: 1rem; font-weight: 700\"\r\n                        >\r\n                          {{ item.CN }}\r\n                        </p>\r\n                        <button\r\n                          style=\"width: 200px\"\r\n                          class=\"btn btn-success btn-md float-right\"\r\n                          :disabled=\"item.expired\"\r\n                          @click=\"openSignModal(item)\"\r\n                        >\r\n                          <i class=\"fa fa-check\"></i>\r\n                          {{ $t(\"actions.selectKey\") }}\r\n                        </button>\r\n                      </div>\r\n                      <br />\r\n                      <div\r\n                        class=\"\r\n                          d-flex\r\n                          mt-2\r\n                          align-items-center\r\n                          justify-content-start\r\n                        \"\r\n                      >\r\n                        <div>\r\n                          <p\r\n                            class=\"m-0 text-muted font-weight-bold\"\r\n                            style=\"font-size: 0.875rem\"\r\n                          >\r\n                            {{ $t(\"login.inn\") }}\r\n                          </p>\r\n                          <p class=\"m-0 text-dark\">{{ item.TIN }}</p>\r\n                        </div>\r\n\r\n                        <div class=\"pl-5 ml-3\">\r\n                          <p\r\n                            class=\"m-0 text-muted font-weight-bold text\"\r\n                            style=\"font-size: 0.875rem\"\r\n                          >\r\n                            {{ $t(\"login.numberLicence\") }}\r\n                          </p>\r\n                          <p class=\"m-0 text-dark\">{{ item.serialNumber }}</p>\r\n                        </div>\r\n\r\n                        <div class=\"pl-5 ml-3\">\r\n                          <p\r\n                            class=\"m-0 text-muted font-weight-bold text\"\r\n                            style=\"font-size: 0.875rem\"\r\n                          >\r\n                            {{ $t(\"login.srokLicence\") }}\r\n                          </p>\r\n                          <p class=\"m-0 text-dark\">\r\n                            {{ getDateFormat(item.validFrom) }} -\r\n                            {{ getDateFormat(item.validTo) }}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </b-card-body>\r\n                  </b-card>\r\n                </b-overlay>\r\n              </b-col>\r\n            </b-row>\r\n          </div>\r\n        </div>\r\n      </b-col>\r\n    </b-row>\r\n    <b-modal\r\n      :no-close-on-backdrop=\"true\"\r\n      :hide-header=\"true\"\r\n      :ok-title=\"$t('actions.yes')\"\r\n      :cancel-title=\"$t('actions.no')\"\r\n      @close=\"hideModal('signModal')\"\r\n      @cancel=\"hideModal('signModal')\"\r\n      @ok=\"signByEimzo\"\r\n      v-model=\"signModal\"\r\n    >\r\n      <h4>{{ modalTitle }}</h4>\r\n      <div v-if=\"loadingButton\" class=\"text-center p-10\">\r\n        <b-spinner variant=\"primary\" type=\"grow\"></b-spinner>\r\n      </div>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nvar EIMZO_MAJOR = 3;\r\nvar EIMZO_MINOR = 37;\r\n\r\nconst errorCAPIWS =\r\n  \"Ошибка соединения с E-IMZO. Возможно у вас не установлен модуль E-IMZO или Браузер E-IMZO.\";\r\nconst errorBrowserWS =\r\n  \"Браузер не поддерживает технологию WebSocket. Установите последнюю версию браузера.\";\r\nconst errorUpdateApp =\r\n  'ВНИМАНИЕ !!! Установите новую версию приложения E-IMZO или Браузера E-IMZO.<br /><a href=\"https://e-imzo.uz/main/downloads/\" role=\"button\">Скачать ПО E-IMZO</a>';\r\nconst errorWrongPassword = \"Пароль неверный.\";\r\n\r\nimport AppSettings from \"@/settings\";\r\n\r\nexport default {\r\n  props: [\"dataToSign\"],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      keysList: [],\r\n      currentItem: null,\r\n      modalTitle: null,\r\n      signModal: false,\r\n      loadingButton: false,\r\n    };\r\n  },\r\n  name: \"LOGINESP\",\r\n  async created() {\r\n    this.loading = true;\r\n    await this.appLoad();\r\n    this.loading = false;\r\n  },\r\n  methods: {\r\n    hideModal(modal) {\r\n      this.$data[modal] = false;\r\n    },\r\n    async wsError(e) {\r\n      if (e) {\r\n        this.uiShowMessage(\"errorCAPIWS\" + \" : \" + e);\r\n      } else {\r\n        this.uiShowMessage(\"errorBrowserWS\");\r\n      }\r\n    },\r\n\r\n    async signByEimzo(data2) {\r\n      this.loadingButton = true;\r\n      let vm = this;\r\n      var data = JSON.stringify(this.dataToSign);\r\n      const promise = new Promise((resolve, reject) => {\r\n        EIMZOClient.loadKey(\r\n          vm.currentItem,\r\n          function (id) {\r\n            EIMZOClient.createPkcs7(\r\n              id,\r\n              data,\r\n              null,\r\n              function (pkcs7) {\r\n                resolve(pkcs7);\r\n              },\r\n              function (e, r) {\r\n                reject(\"error\");\r\n                vm.loadingButton = false;\r\n                if (r) {\r\n                  if (r.indexOf(\"BadPaddingException\") != -1) {\r\n                    vm.showMsgError(errorWrongPassword);\r\n                  } else {\r\n                    vm.showMsgError(r);\r\n                  }\r\n                } else {\r\n                  document.getElementById(\"keyId\").innerHTML = \"\";\r\n                  vm.showMsgError(errorBrowserWS);\r\n                }\r\n                if (e) vm.wsError(e);\r\n              }\r\n            );\r\n          },\r\n          function (e, r) {\r\n            reject(\"error\");\r\n            vm.loadingButton = false;\r\n            if (r) {\r\n              if (r.indexOf(\"BadPaddingException\") != -1) {\r\n                vm.showMsgError(errorWrongPassword);\r\n              } else {\r\n                vm.showMsgError(r);\r\n              }\r\n            } else {\r\n              vm.$showMsgErro(errorBrowserWS);\r\n            }\r\n            if (e) vm.wsError(e);\r\n          }\r\n        );\r\n      });\r\n      promise\r\n        .then(\r\n          (success) => {\r\n            vm.$emit(\"sign\", { inn: vm.currentItem.TIN, content: success,pnfl: vm.currentItem.PINFL  });\r\n          },\r\n          (error) => {\r\n            vm.showMsgError(\"Server error...\");\r\n          }\r\n        )\r\n        .finally(() => {\r\n          vm.signModal = false;\r\n          vm.loadingButton = false;\r\n        });\r\n    },\r\n    async openSignModal(item) {\r\n      this.currentItem = item;\r\n      this.modalTitle = item.serialNumber + \" - \" + item.CN;\r\n      this.signByEimzo();\r\n      // this.signModal = true;\r\n    },\r\n    getDateFormat(date) {\r\n      let data = new Date(date);\r\n      let month = data.getMonth() + 1;\r\n      return (\r\n          data.getDate().toString() +\r\n          \".\" +\r\n          (month <= 9 ? \"0\" + month : month).toString() +\r\n          \".\" +\r\n          data.getFullYear().toString()\r\n      );\r\n    },\r\n    uiCreateItem(itmkey, vo) {\r\n      let vm = this;\r\n      var now = new Date();\r\n      vo.expired = dates.compare(now, vo.validTo) > 0;\r\n      var itm = document.createElement(\"option\");\r\n      itm.value = itmkey;\r\n      itm.text = vo.CN;\r\n      if (!vo.expired) {\r\n      } else {\r\n        itm.style.color = \"gray\";\r\n        itm.text = itm.text + \" (срок истек)\";\r\n      }\r\n      vm.keysList.push(vo);\r\n      itm.setAttribute(\"vo\", JSON.stringify(vo));\r\n      itm.setAttribute(\"id\", itmkey);\r\n      return itm;\r\n    },\r\n\r\n    async uiLoadKeys() {\r\n      let vm = this;\r\n      EIMZOClient.listAllUserKeys(\r\n        function (o, i) {\r\n          var itemId = \"itm-\" + o.serialNumber + \"-\" + i;\r\n          return itemId;\r\n        },\r\n        function (itemId, v) {\r\n          return vm.uiCreateItem(itemId, v);\r\n        },\r\n        function (items, firstId) {\r\n          //vm.uiFillCombo(items);\r\n          //vm.uiComboSelect(firstId);\r\n        },\r\n        function (e, r) {\r\n          vm.showMsgError(errorCAPIWS);\r\n        }\r\n      );\r\n    },\r\n    appLoad() {\r\n      let vm = this;\r\n      vm.loading = true;\r\n      EIMZOClient.API_KEYS = AppSettings.api_keys;\r\n      EIMZOClient.checkVersion(\r\n        function (major, minor) {\r\n          var newVersion = EIMZO_MAJOR * 100 + EIMZO_MINOR;\r\n          var installedVersion = parseInt(major) * 100 + parseInt(minor);\r\n          if (installedVersion < newVersion) {\r\n            vm.loading = false;\r\n            vm.showMsgError(errorUpdateApp);\r\n          } else {\r\n            EIMZOClient.installApiKeys(\r\n              function () {\r\n                vm.loading = false;\r\n                vm.uiLoadKeys();\r\n              },\r\n              function (e, r) {\r\n                vm.loading = false;\r\n                if (r) {\r\n                  vm.showMsgError(r);\r\n                } else {\r\n                  vm.wsError(e);\r\n                }\r\n              }\r\n            );\r\n          }\r\n        },\r\n        function (e, r) {\r\n          vm.loading = false;\r\n          if (r) {\r\n            vm.showMsgError(r);\r\n          } else {\r\n            vm.showMsgError(e);\r\n          }\r\n        }\r\n      );\r\n    },\r\n\r\n    async close() {\r\n      await this.$emit(\"close\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]}]}