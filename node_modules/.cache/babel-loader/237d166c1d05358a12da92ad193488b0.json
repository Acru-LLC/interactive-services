{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\shared\\store\\auth.module.js","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\shared\\store\\auth.module.js","mtime":1674799498157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1667355397815}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcb2hpcmdpXFxhY3J1LWZyb250ZW5kXFxhY3J1LWZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBBdXRoU2VydmljZSwgQXV0aGVudGljYXRpb25FcnJvciB9IGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2F1dGguc2VydmljZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwp2YXIgc3RhdGUgPSB7CiAgYXV0aGVudGljYXRpbmc6IGZhbHNlLAogIGFjY2Vzc1Rva2VuOiAnJywKICBhdXRoZW50aWNhdGlvbkVycm9yQ29kZTogMCwKICBhdXRoZW50aWNhdGlvbkVycm9yOiAnJywKICByZWZyZXNoVG9rZW5Qcm9taXNlOiBudWxsLAogIC8vIEhvbGRzIHRoZSBwcm9taXNlIG9mIHRoZSByZWZyZXNoIHRva2VuCiAgVXNlckluZm86IHt9Cn07CnZhciBnZXR0ZXJzID0gewogIGF1dGhlbnRpY2F0aW9uRXJyb3JDb2RlOiBmdW5jdGlvbiBhdXRoZW50aWNhdGlvbkVycm9yQ29kZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmF1dGhlbnRpY2F0aW9uRXJyb3JDb2RlOwogIH0sCiAgYXV0aGVudGljYXRpb25FcnJvcjogZnVuY3Rpb24gYXV0aGVudGljYXRpb25FcnJvcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmF1dGhlbnRpY2F0aW9uRXJyb3I7CiAgfSwKICBhdXRoZW50aWNhdGluZzogZnVuY3Rpb24gYXV0aGVudGljYXRpbmcoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoZW50aWNhdGluZzsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBfcmVmMikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgVXNlcm5hbWUsIFBhc3N3b3JkLCBfZGF0YTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBVc2VybmFtZSA9IF9yZWYyLlVzZXJuYW1lLCBQYXNzd29yZCA9IF9yZWYyLlBhc3N3b3JkOwogICAgICAgICAgICAgIGNvbW1pdCgnbG9naW5SZXF1ZXN0Jyk7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIEF1dGhTZXJ2aWNlLmxvZ2luKFVzZXJuYW1lLCBQYXNzd29yZCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2RhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGNvbW1pdCgnbG9naW5TdWNjZXNzJywgX2RhdGEpOwogICAgICAgICAgICAgIGNvbW1pdCgnUk9PVF9MT0dJTl9TVUNDRVNTJywgX2RhdGEsIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsgLy8gUmVkaXJlY3QgdGhlIHVzZXIgdG8gdGhlIHBhZ2UgaGUgZmlyc3QgdHJpZWQgdG8gdmlzaXQgb3IgdG8gdGhlIGhvbWUgdmlldwoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5wdXNoKHJvdXRlci5oaXN0b3J5LmN1cnJlbnQucXVlcnkucmVkaXJlY3QgfHwgJy8nKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdHJ1ZSk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwoKICAgICAgICAgICAgICBpZiAoX2NvbnRleHQudDAgaW5zdGFuY2VvZiBBdXRoZW50aWNhdGlvbkVycm9yKSB7CiAgICAgICAgICAgICAgICBjb21taXQoJ2xvZ2luRXJyb3InLCB7CiAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogX2NvbnRleHQudDAuZXJyb3JDb2RlLAogICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IF9jb250ZXh0LnQwLm1lc3NhZ2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxNF1dKTsKICAgIH0pKSgpOwogIH0sCiAgbG9naW5CeVRva2VuOiBmdW5jdGlvbiBsb2dpbkJ5VG9rZW4oX3JlZjMsIF9yZWY0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdCwgc2lnbmVkRGF0YSwgVElOLCBQTkZMLCBfZGF0YTI7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgICAgICAgICBzaWduZWREYXRhID0gX3JlZjQuc2lnbmVkRGF0YSwgVElOID0gX3JlZjQuVElOLCBQTkZMID0gX3JlZjQuUE5GTDsKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5sb2dpbkVzcChzaWduZWREYXRhLCBUSU4sIFBORkwpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF9kYXRhMiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIGNvbW1pdCgnbG9naW5TdWNjZXNzJywgX2RhdGEyKTsKICAgICAgICAgICAgICBjb21taXQoJ1JPT1RfTE9HSU5fU1VDQ0VTUycsIF9kYXRhMiwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOyAvLyBSZWRpcmVjdCB0aGUgdXNlciB0byB0aGUgcGFnZSBoZSBmaXJzdCB0cmllZCB0byB2aXNpdCBvciB0byB0aGUgaG9tZSB2aWV3CgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5wdXNoKHJvdXRlci5oaXN0b3J5LmN1cnJlbnQucXVlcnkucmVkaXJlY3QgPyByb3V0ZXIuaGlzdG9yeS5jdXJyZW50LnF1ZXJ5LnJlZGlyZWN0IDogJy8nKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEzOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyKTsKCiAgICAgICAgICAgICAgaWYgKF9jb250ZXh0Mi50MCBpbnN0YW5jZW9mIEF1dGhlbnRpY2F0aW9uRXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbW1pdCgnbG9naW5FcnJvcicsIHsKICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBfY29udGV4dDIudDAuZXJyb3JDb2RlLAogICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IF9jb250ZXh0Mi50MC5tZXNzYWdlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMiwgMTNdXSk7CiAgICB9KSkoKTsKICB9LAogIHJlZnJlc2hUb2tlbjogZnVuY3Rpb24gcmVmcmVzaFRva2VuKF9yZWY1KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjUuc3RhdGU7CgogICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSB0aGUgcmVmcmVzaFRva2VuIGhhcyBiZWVuIGNhbGxlZCwgbWFrZSBhIHJlcXVlc3QKICAgIC8vIG90aGVyd2lzZSByZXR1cm4gdGhlIHNhbWUgcHJvbWlzZSB0byB0aGUgY2FsbGVyCiAgICBpZiAoIXN0YXRlLnJlZnJlc2hUb2tlblByb21pc2UpIHsKICAgICAgdmFyIHAgPSBBdXRoU2VydmljZS5yZWZyZXNoVG9rZW4oKTsKICAgICAgY29tbWl0KCdyZWZyZXNoVG9rZW5Qcm9taXNlJywgcCk7IC8vIFdhaXQgZm9yIHRoZSBBdXRoU2VydmljZS5yZWZyZXNoVG9rZW4oKSB0byByZXNvbHZlLiBPbiBzdWNjZXNzIHNldCB0aGUgdG9rZW4gYW5kIGNsZWFyIHByb21pc2UKICAgICAgLy8gQ2xlYXIgdGhlIHByb21pc2Ugb24gZXJyb3IgYXMgd2VsbC4KCiAgICAgIHAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb21taXQoJ3JlZnJlc2hUb2tlblByb21pc2UnLCBudWxsKTsKICAgICAgICBjb21taXQoJ2xvZ2luU3VjY2VzcycsIHJlc3BvbnNlKTsKICAgICAgICBjb21taXQoJ1JPT1RfTE9HSU5fU1VDQ0VTUycsIGRhdGEsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbW1pdCgncmVmcmVzaFRva2VuUHJvbWlzZScsIG51bGwpOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gc3RhdGUucmVmcmVzaFRva2VuUHJvbWlzZTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWY2KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0OwogICAgQXV0aFNlcnZpY2UubG9nb3V0KCk7CiAgICBjb21taXQoJ2xvZ291dFN1Y2Nlc3MnKTsKICAgIGNvbW1pdCgnUk9PVF9MT0dPVVRfU1VDQ0VTUycsIG51bGwsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7IC8vIHJvdXRlci5wdXNoKCdhdXRoZW50aWNhdGlvbi9mdWxsbG9naW4nKQoKICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgbG9naW5SZXF1ZXN0OiBmdW5jdGlvbiBsb2dpblJlcXVlc3Qoc3RhdGUpIHsKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW5nID0gdHJ1ZTsKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW9uRXJyb3IgPSAnJzsKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW9uRXJyb3JDb2RlID0gMDsKICB9LAogIHNldFVzZXJJbmZvOiBmdW5jdGlvbiBzZXRVc2VySW5mbyhzdGF0ZSwgZGF0YSkgewogICAgc3RhdGUuVXNlckluZm8gPSBkYXRhOwogIH0sCiAgbG9naW5TdWNjZXNzOiBmdW5jdGlvbiBsb2dpblN1Y2Nlc3Moc3RhdGUsIGRhdGEpIHsKICAgIC8qbGV0IGZvcm1hdHRlZFJ1bGVzID0gW107DQogICAgaWYgKGRhdGEucGVybWlzc2lvbnMubGVuZ3RoID4gMCkgew0KICAgICAgICBmb3JtYXR0ZWRSdWxlcyA9IGRhdGEucGVybWlzc2lvbnMubWFwKHBlcm0gPT4gew0KICAgICAgICAgICAgbGV0IGZvcm1hdHRlZE9iaiA9IHt9Ow0KICAgICAgICAgICAgZm9ybWF0dGVkT2JqLmFjdGlvbnMgPSBwZXJtLnN1YnN0cigwLCBwZXJtLmluZGV4T2YoJyAnKSk7DQogICAgICAgICAgICBmb3JtYXR0ZWRPYmouc3ViamVjdCA9IHBlcm0uc3Vic3RyKHBlcm0uaW5kZXhPZignICcpICsgMSk7DQogICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkT2JqOw0KICAgICAgICB9KQ0KICAgIH0qLwogICAgLy8gc3RhdGUucnVsZXMgPSBmb3JtYXR0ZWRSdWxlczsKICAgIHN0YXRlLmFjY2Vzc1Rva2VuID0gZGF0YS50b2tlbjsgLy8gc3RhdGUudG9rZW4gPSBkYXRhLnRva2VuOwoKICAgIHN0YXRlLmF1dGhlbnRpY2F0aW5nID0gZmFsc2U7CiAgfSwKICBsb2dpbkVycm9yOiBmdW5jdGlvbiBsb2dpbkVycm9yKHN0YXRlLCBfcmVmNykgewogICAgdmFyIGVycm9yQ29kZSA9IF9yZWY3LmVycm9yQ29kZSwKICAgICAgICBlcnJvck1lc3NhZ2UgPSBfcmVmNy5lcnJvck1lc3NhZ2U7CiAgICBzdGF0ZS5hdXRoZW50aWNhdGluZyA9IGZhbHNlOwogICAgc3RhdGUuYXV0aGVudGljYXRpb25FcnJvckNvZGUgPSBlcnJvckNvZGU7CiAgICBzdGF0ZS5hdXRoZW50aWNhdGlvbkVycm9yID0gZXJyb3JNZXNzYWdlOwogIH0sCiAgbG9nb3V0U3VjY2VzczogZnVuY3Rpb24gbG9nb3V0U3VjY2VzcyhzdGF0ZSkgewogICAgc3RhdGUuYWNjZXNzVG9rZW4gPSAnJzsKICAgIHN0YXRlLlVzZXJJbmZvID0ge307IC8vIHN0YXRlLnJ1bGVzID0gW107CiAgfSwKICByZWZyZXNoVG9rZW5Qcm9taXNlOiBmdW5jdGlvbiByZWZyZXNoVG9rZW5Qcm9taXNlKHN0YXRlLCBwcm9taXNlKSB7CiAgICBzdGF0ZS5yZWZyZXNoVG9rZW5Qcm9taXNlID0gcHJvbWlzZTsKICB9Cn07CmV4cG9ydCB2YXIgYXV0aCA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["C:/ACRU PROJECT/Fair Tech/ohirgi/acru-frontend/acru-frontend/src/shared/store/auth.module.js"],"names":["AuthService","AuthenticationError","router","state","authenticating","accessToken","authenticationErrorCode","authenticationError","refreshTokenPromise","UserInfo","getters","actions","login","commit","Username","Password","data","root","push","history","current","query","redirect","errorCode","errorMessage","message","loginByToken","signedData","TIN","PNFL","loginEsp","refreshToken","p","then","response","logout","window","location","reload","mutations","loginRequest","setUserInfo","loginSuccess","token","loginError","logoutSuccess","promise","auth","namespaced"],"mappings":"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","sourcesContent":["import {AuthService, AuthenticationError} from \"@/shared/services/auth.service\"\r\nimport router from '@/router'\r\n\r\n\r\nconst state = {\r\n    authenticating: false,\r\n    accessToken: '',\r\n    authenticationErrorCode: 0,\r\n    authenticationError: '',\r\n    refreshTokenPromise: null, // Holds the promise of the refresh token\r\n    UserInfo: {}\r\n};\r\n\r\nconst getters = {\r\n    authenticationErrorCode: (state) => {\r\n        return state.authenticationErrorCode\r\n    },\r\n\r\n    authenticationError: (state) => {\r\n        return state.authenticationError\r\n    },\r\n\r\n    authenticating: (state) => {\r\n        return state.authenticating\r\n    }\r\n};\r\n\r\nconst actions = {\r\n    async login({commit}, {Username, Password}) {\r\n        commit('loginRequest');\r\n        try {\r\n            const data = await AuthService.login(Username, Password);\r\n            commit('loginSuccess', data);\r\n            commit('ROOT_LOGIN_SUCCESS', data, {root: true});\r\n            // Redirect the user to the page he first tried to visit or to the home view\r\n            await router.push(router.history.current.query.redirect || '/');\r\n            return true\r\n        } catch (e) {\r\n            if (e instanceof AuthenticationError) {\r\n                commit('loginError', {errorCode: e.errorCode, errorMessage: e.message})\r\n            }\r\n            return false\r\n        }\r\n    },\r\n    async loginByToken({commit}, {signedData, TIN, PNFL}) {\r\n        try {\r\n            const data = await AuthService.loginEsp(signedData, TIN, PNFL);\r\n            commit('loginSuccess', data);\r\n            commit('ROOT_LOGIN_SUCCESS', data, {root: true});\r\n\r\n            // Redirect the user to the page he first tried to visit or to the home view\r\n            await router.push(router.history.current.query.redirect ? router.history.current.query.redirect : '/');\r\n\r\n            return true\r\n        } catch (e) {\r\n            if (e instanceof AuthenticationError) {\r\n                commit('loginError', {errorCode: e.errorCode, errorMessage: e.message})\r\n            }\r\n\r\n            return false\r\n        }\r\n    },\r\n\r\n    refreshToken({commit, state}) {\r\n        // If this is the first time the refreshToken has been called, make a request\r\n        // otherwise return the same promise to the caller\r\n        if (!state.refreshTokenPromise) {\r\n            const p = AuthService.refreshToken()\r\n            commit('refreshTokenPromise', p)\r\n\r\n            // Wait for the AuthService.refreshToken() to resolve. On success set the token and clear promise\r\n            // Clear the promise on error as well.\r\n            p.then(\r\n                response => {\r\n                    commit('refreshTokenPromise', null)\r\n                    commit('loginSuccess', response)\r\n                    commit('ROOT_LOGIN_SUCCESS', data, {root: true});\r\n                },\r\n                () => {\r\n                    commit('refreshTokenPromise', null)\r\n                }\r\n            )\r\n        }\r\n\r\n        return state.refreshTokenPromise\r\n    },\r\n\r\n    logout({commit}) {\r\n        AuthService.logout()\r\n        commit('logoutSuccess')\r\n        commit('ROOT_LOGOUT_SUCCESS', null, {root: true});\r\n        // router.push('authentication/fulllogin')\r\n        window.location.reload()\r\n    }\r\n}\r\n\r\nconst mutations = {\r\n    loginRequest(state) {\r\n        state.authenticating = true;\r\n        state.authenticationError = ''\r\n        state.authenticationErrorCode = 0\r\n    },\r\n    setUserInfo(state, data) {\r\n        state.UserInfo = data;\r\n    },\r\n\r\n    loginSuccess(state, data) {\r\n        /*let formattedRules = [];\r\n        if (data.permissions.length > 0) {\r\n            formattedRules = data.permissions.map(perm => {\r\n                let formattedObj = {};\r\n                formattedObj.actions = perm.substr(0, perm.indexOf(' '));\r\n                formattedObj.subject = perm.substr(perm.indexOf(' ') + 1);\r\n                return formattedObj;\r\n            })\r\n        }*/\r\n        // state.rules = formattedRules;\r\n        state.accessToken = data.token;\r\n        // state.token = data.token;\r\n        state.authenticating = false;\r\n    },\r\n\r\n    loginError(state, {errorCode, errorMessage}) {\r\n        state.authenticating = false\r\n        state.authenticationErrorCode = errorCode\r\n        state.authenticationError = errorMessage\r\n    },\r\n\r\n    logoutSuccess(state) {\r\n        state.accessToken = '';\r\n        state.UserInfo = {}\r\n        // state.rules = [];\r\n    },\r\n\r\n    refreshTokenPromise(state, promise) {\r\n        state.refreshTokenPromise = promise\r\n    }\r\n}\r\n\r\nexport const auth = {\r\n    namespaced: true,\r\n    state,\r\n    getters,\r\n    actions,\r\n    mutations\r\n}\r\n"]}]}