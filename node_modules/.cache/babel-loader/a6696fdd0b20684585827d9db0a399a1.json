{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\management\\modules\\users_and_employees\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\management\\modules\\users_and_employees\\Index.vue","mtime":1674799497575},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L0FDUlUgUFJPSkVDVC9GYWlyIFRlY2gvYWNydS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgVG9rZW5TZXJ2aWNlIH0gZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvc3RvcmFnZS5zZXJ2aWNlJzsKaW1wb3J0IGFwcENvbmZpZyBmcm9tICJAL2FwcC5jb25maWciOwppbXBvcnQgT3JnU3RyVHJlZVZpZXcgZnJvbSAnQC9tb2R1bGVzL21hbmFnZW1lbnQvY29tcG9uZW50cy9PcmdTdHJUcmVlVmlldy52dWUnOwppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UnOwppbXBvcnQgaGVscGVyU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSc7CnZhciBNQUlOX0FQSV9VUkxfVVNFUlMgPSAndXNlcic7CnZhciBNQUlOX0FQSV9VUkxfRU1QTE9ZRUVTID0gJ2VtcGxveWVlJzsKZXhwb3J0IGRlZmF1bHQgewogIHBhZ2U6IHsKICAgIHRpdGxlOiAiVXNlcnMgYW5kIEVtcGxveWVlcyIsCiAgICBtZXRhOiBbewogICAgICBuYW1lOiAiZGVzY3JpcHRpb24iLAogICAgICBjb250ZW50OiBhcHBDb25maWcuZGVzY3JpcHRpb24KICAgIH1dCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBPcmdTdHJUcmVlVmlldzogT3JnU3RyVHJlZVZpZXcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50VXNlcklkOiBUb2tlblNlcnZpY2UuZ2V0VXNlcklkKCksCiAgICAgIHRpdGxlOiAiVXNlcnMgYW5kIEVtcGxveWVlcyIsCiAgICAgIHNlbGVjdGVkRGVwOiAnJywKICAgICAgYWN0aXZlRGVwOiB7fSwKICAgICAgbG9hZGluZ1RhYmxlSXRlbXM6IGZhbHNlLAogICAgICBhY3RpdmVUYWJJbmRleDogMCwKICAgICAgZGVwYXJ0bWVudHM6IFtdLAogICAgICB1c2VyczogW10sCiAgICAgIHRvdGFsVXNlcnM6IDAsCiAgICAgIGVtcGxveWVlczogW10sCiAgICAgIHRvdGFsRW1wbG95ZWVzOiAwLAogICAgICBzZWFyY2hQYXlsb2FkRW1wbG95ZWVzOiB7fSwKICAgICAgc2VhcmNoUGF5bG9hZFVzZXJzOiB7fQogICAgfTsKICB9LAogIC8qDQogIENPTVBVVEVEICovCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoJ21hbmFnZW1lbnRVc2Vyc0FuZEVtcGxveWVlcycsIFsndXNlckhlYWRlcnMnLCAnZW1wbG95ZWVIZWFkZXJzJ10pKSwge30sIHsKICAgIGFjdGl2ZVRhYjogZnVuY3Rpb24gYWN0aXZlVGFiKCkgewogICAgICBpZiAodGhpcy5hY3RpdmVUYWJJbmRleCA9PT0gMCkgewogICAgICAgIHJldHVybiAnZW1wbG95ZWVzJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRhYkluZGV4ID09PSAxKSB7CiAgICAgICAgcmV0dXJuICd1c2Vycyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICB9LAogICAgdXNlckluZm86IGZ1bmN0aW9uIHVzZXJJbmZvKCkgewogICAgICByZXR1cm4gVG9rZW5TZXJ2aWNlLmdldFVzZXJJbmZvKCk7CiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgZ2V0QWN0aXZlVGFiSW5kZXhCeVRhYk5hbWU6IGZ1bmN0aW9uIGdldEFjdGl2ZVRhYkluZGV4QnlUYWJOYW1lKHRhYk5hbWUpIHsKICAgICAgaWYgKHRhYk5hbWUgPT09ICdlbXBsb3llZXMnKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ3VzZXJzJykgewogICAgICAgIHJldHVybiAxOwogICAgICB9CiAgICAgIHJldHVybiAwOwogICAgfSwKICAgIHVwZGF0ZURlcFBlcm1zOiBmdW5jdGlvbiB1cGRhdGVEZXBQZXJtcyh1c2VyKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnVXBkYXRlVXNlclBlcm1pc3Npb25zVG9EZXBhcnRtZW50cycsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpZDogdXNlci5pZAogICAgICAgIH0sCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIG5hbWU6IHVzZXIuZW1wbG95ZWVGdWxsTmFtZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZmV0Y2hEZXBhcnRtZW50czogZnVuY3Rpb24gZmV0Y2hEZXBhcnRtZW50cygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0KCdkZXBhcnRtZW50JywgX3RoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQsIG51bGwsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgX3RoaXMuZGVwYXJ0bWVudHMgPSBbXTsKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5pZCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5kZXBhcnRtZW50cy5wdXNoKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkZWxldGVJdGVtOiBmdW5jdGlvbiBkZWxldGVJdGVtKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgdGFiTmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdGhpcy5hY3RpdmVUYWI7CiAgICAgIHRoaXMuJGJ2TW9kYWwubXNnQm94Q29uZmlybSgnQXJlIHlvdSBzdXJlPycsIHsKICAgICAgICBva1RpdGxlOiB0aGlzLiR0KCdhY3Rpb25zLmNvbmZpcm0nKSwKICAgICAgICBjYW5jZWxUaXRsZTogdGhpcy4kdCgnYWN0aW9ucy5jYW5jZWwnKQogICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgaWYgKHRhYk5hbWUgPT09ICdlbXBsb3llZXMnKSB7CiAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UuZGVsZXRlQnlJZChNQUlOX0FQSV9VUkxfRU1QTE9ZRUVTLCBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMyLmZldGNoSXRlbXNCeUFjdGl2ZVRhYigpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ3VzZXJzJykgewogICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmRlbGV0ZUJ5SWQoTUFJTl9BUElfVVJMX1VTRVJTLCBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzMi51c2VySW5mby5pZCA9PT0gaWQpIHsKICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goJ2F1dGgvbG9nb3V0Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzMi5mZXRjaEl0ZW1zQnlBY3RpdmVUYWIoKTsKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgLy8gQW4gZXJyb3Igb2NjdXJyZWQKICAgICAgfSk7CiAgICB9LAogICAgZWRpdEl0ZW06IGZ1bmN0aW9uIGVkaXRJdGVtKGlkKSB7CiAgICAgIHZhciB0YWJOYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0aGlzLmFjdGl2ZVRhYjsKICAgICAgdGhpcy4kcm91dGVyLnB1c2godGFiTmFtZSA9PT0gJ3VzZXJzJyA/IHsKICAgICAgICBuYW1lOiAnVXBkYXRlVXNlcicsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpZDogaWQKICAgICAgICB9CiAgICAgIH0gOiB0YWJOYW1lID09PSAnZW1wbG95ZWVzJyA/IHsKICAgICAgICBuYW1lOiAnVXBkYXRlRW1wbG95ZWUnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQ6IGlkCiAgICAgICAgfQogICAgICB9IDogdGhpcy4kdG9hc3QoJ9CY0LvRgtC40LzQvtGBINGC0LDQsdC90Lgg0pvQsNC50YLQsCDQsdC+0YHQuNC90LMg0LLQsCDRj9C90LAg0YPRgNC40L3QuNCxINC60Z7RgNC40L3QsycsIHsKICAgICAgICB0eXBlOiAnaW5mbycKICAgICAgfSkpOwogICAgfSwKICAgIGZldGNoSXRlbXNCeUFjdGl2ZVRhYjogZnVuY3Rpb24gZmV0Y2hJdGVtc0J5QWN0aXZlVGFiKCkgewogICAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cywKICAgICAgICBfdGhpczMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdGFiLCBzZWFyY2hQYXlsb2FkLCBwYXlsb2FkOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB0YWIgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgX2FyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1swXSA6IF90aGlzMy5hY3RpdmVUYWI7CiAgICAgICAgICAgICAgX3RoaXMzLnVybFB1c2hTdGF0ZSh7CiAgICAgICAgICAgICAgICAndCc6IHRhYgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmICghX3RoaXMzLmFjdGl2ZURlcC5pZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoISh0YWIgPT09ICdlbXBsb3llZXMnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpczMubG9hZGluZ1RhYmxlSXRlbXMgPSB0cnVlOwogICAgICAgICAgICAgIHNlYXJjaFBheWxvYWQgPSBfdGhpczMuc2VhcmNoUGF5bG9hZEVtcGxveWVlczsKICAgICAgICAgICAgICBfdGhpczMuZW1wbG95ZWVzID0gW107CiAgICAgICAgICAgICAgX3RoaXMzLnRvdGFsRW1wbG95ZWVzID0gMDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgIHJldHVybiBoZWxwZXJTZXJ2aWNlLnNlYXJjaEVtcGxveWVlc0J5RGVwKHNlYXJjaFBheWxvYWQsIF90aGlzMy5hY3RpdmVEZXAuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgX3RoaXMzLmVtcGxveWVlcyA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgICAgICAgICBfdGhpczMudG90YWxFbXBsb3llZXMgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczMubG9hZGluZ1RhYmxlSXRlbXMgPSBmYWxzZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGlmICghKHRhYiA9PT0gJ3VzZXJzJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXMzLmxvYWRpbmdUYWJsZUl0ZW1zID0gdHJ1ZTsKICAgICAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgZGF0YTogX3RoaXMzLnNlYXJjaFBheWxvYWRVc2VycywKICAgICAgICAgICAgICAgIGRlcElkOiBfdGhpczMuYWN0aXZlRGVwLmlkCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfdGhpczMudXNlcnMgPSBbXTsKICAgICAgICAgICAgICBfdGhpczMudG90YWxVc2VycyA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxOTsKICAgICAgICAgICAgICByZXR1cm4gY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hCeURlcElkKE1BSU5fQVBJX1VSTF9VU0VSUywgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBfdGhpczMudXNlcnMgPSByZXMuZGF0YS5saXN0OwogICAgICAgICAgICAgICAgX3RoaXMzLnRvdGFsVXNlcnMgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczMubG9hZGluZ1RhYmxlSXRlbXMgPSBmYWxzZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdpdmVBY3RpdmVDbGFzc1RvRGVwOiBmdW5jdGlvbiBnaXZlQWN0aXZlQ2xhc3NUb0RlcCh0cmVlQXJyLCBhY3RpdmVJZCkgewogICAgICB2YXIgX2FyZ3VtZW50czIgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXM0ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHN0ZXAsIHBhcmVudHMsIF9pdGVyYXRvciwgX3N0ZXAsIGVsOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdGVwID0gX2FyZ3VtZW50czIubGVuZ3RoID4gMiAmJiBfYXJndW1lbnRzMlsyXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czJbMl0gOiAwOwogICAgICAgICAgICAgIHBhcmVudHMgPSBfYXJndW1lbnRzMi5sZW5ndGggPiAzICYmIF9hcmd1bWVudHMyWzNdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMlszXSA6IHt9OwogICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRyZWVBcnIpOwogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMzsKICAgICAgICAgICAgICBfaXRlcmF0b3IucygpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgaWYgKChfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWwgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICBpZiAoIShlbC5pZCA9PT0gYWN0aXZlSWQpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZXBJZC0iLmNvbmNhdChhY3RpdmVJZCkpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRlcElkLSIuY29uY2F0KGVsLmlkKSkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgICAgICAgaWYgKCEoZWwuY2hpbGRyZW4gJiYgZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmdpdmVBY3RpdmVDbGFzc1RvRGVwKGVsLmNoaWxkcmVuLCBhY3RpdmVJZCwgc3RlcCwgcGFyZW50cyk7CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxOTsKICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoX2NvbnRleHQzLnQwKTsKICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDIyOwogICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5maW5pc2goMjIpOwogICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzMsIDE5LCAyMiwgMjVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNob3dSZWZNb2RhbDogZnVuY3Rpb24gc2hvd1JlZk1vZGFsKCkge30sCiAgICBkZWxldGVEZXBhcnRtZW50OiBmdW5jdGlvbiBkZWxldGVEZXBhcnRtZW50KCkge30sCiAgICB0b2dnbGVBY3RpdmVDbGFzczogZnVuY3Rpb24gdG9nZ2xlQWN0aXZlQ2xhc3MoYWN0aXZlRGVwKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKGFjdGl2ZURlcCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmZpbmREZXBhcnRtZW50QnlJZChfdGhpczUuJHJvdXRlLnF1ZXJ5LmQsIG51bGwsIHRydWUpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgYWN0aXZlRGVwID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBpZiAoIShwYXJzZUludChfdGhpczUuJHJvdXRlLnF1ZXJ5LmQpICE9PSBhY3RpdmVEZXAuaWQpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczUudXJsUHVzaFN0YXRlKHsKICAgICAgICAgICAgICAgICdkJzogYWN0aXZlRGVwLmlkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfdGhpczUuYWN0aXZlRGVwID0gT2JqZWN0LmFzc2lnbih7fSwgYWN0aXZlRGVwKTsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEwOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZ2l2ZUFjdGl2ZUNsYXNzVG9EZXAoX3RoaXM1LmRlcGFydG1lbnRzLCBhY3RpdmVEZXAuaWQpOwogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF90aGlzNS5zZWxlY3RlZERlcCA9IGFjdGl2ZURlcC5uYW1lVXo7CiAgICAgICAgICAgICAgX3RoaXM1Lm9wZW5EZXBhcnRtZW50VHJlZVN0eWxlKGFjdGl2ZURlcCk7CiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvcGVuRGVwYXJ0bWVudFRyZWVTdHlsZTogZnVuY3Rpb24gb3BlbkRlcGFydG1lbnRUcmVlU3R5bGUoYWN0aXZlRGVwKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgcGFyZW50LCBzZWxmOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoYWN0aXZlRGVwLnBhcmVudElkKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LmZpbmREZXBhcnRtZW50QnlJZChhY3RpdmVEZXAucGFyZW50SWQsIG51bGwsIHRydWUpOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcGFyZW50ID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczYub3BlbkRlcGFydG1lbnRUcmVlU3R5bGUocGFyZW50KTsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHNlbGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGVwLXRvZ2dsZS1pY29uLWlkLSIuY29uY2F0KGFjdGl2ZURlcC5pZCkpOwogICAgICAgICAgICAgIGlmIChzZWxmKSB7CiAgICAgICAgICAgICAgICBzZWxmLmNsaWNrKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmaW5kRGVwYXJ0bWVudEJ5SWQ6IGZ1bmN0aW9uIGZpbmREZXBhcnRtZW50QnlJZChpZCkgewogICAgICB2YXIgX2FyZ3VtZW50czMgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXM3ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIGNoaWxkcmVuLCBhY3RpdmF0ZSwgX2l0ZXJhdG9yMiwgX3N0ZXAyLCBlbCwgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjaGlsZHJlbiA9IF9hcmd1bWVudHMzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMzWzFdIDogbnVsbDsKICAgICAgICAgICAgICBhY3RpdmF0ZSA9IF9hcmd1bWVudHMzLmxlbmd0aCA+IDIgJiYgX2FyZ3VtZW50czNbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMzWzJdIDogdHJ1ZTsKICAgICAgICAgICAgICBpZiAoX3RoaXM3LmRlcGFydG1lbnRzKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczcuZmV0Y2hEZXBhcnRtZW50cygpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIGlkID0gcGFyc2VJbnQoaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIWNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzNy5kZXBhcnRtZW50czsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNoaWxkcmVuKTsKICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDg7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5zKCk7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgaWYgKChfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbCA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICBpZiAoIShlbC5pZCA9PT0gaWQpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBlbCk7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgaWYgKCEoZWwuY2hpbGRyZW4gJiYgZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxNzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LmZpbmREZXBhcnRtZW50QnlJZChpZCwgZWwuY2hpbGRyZW4pOwogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgIGlmICghcmVzKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCByZXMpOwogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDI0OwogICAgICAgICAgICAgIF9jb250ZXh0Ni50MCA9IF9jb250ZXh0NlsiY2F0Y2giXSg4KTsKICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoX2NvbnRleHQ2LnQwKTsKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDI3OwogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuZmluaXNoKDI3KTsKICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgbnVsbCwgW1s4LCAyNCwgMjcsIDMwXV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICB2YXIgZGVwOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXM4LmZldGNoRGVwYXJ0bWVudHMoKTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX3RoaXM4LnNlYXJjaFBheWxvYWRFbXBsb3llZXMgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczgudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpOwogICAgICAgICAgICBfdGhpczguc2VhcmNoUGF5bG9hZFVzZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXM4LnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKTsKICAgICAgICAgICAgaWYgKCFfdGhpczguJHJvdXRlLnF1ZXJ5LmQpIHsKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNzsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5maW5kRGVwYXJ0bWVudEJ5SWQoX3RoaXM4LiRyb3V0ZS5xdWVyeS5kKTsKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgZGVwID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBfdGhpczgudG9nZ2xlQWN0aXZlQ2xhc3MoZGVwKTsKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGlmICghX3RoaXM4LiRyb3V0ZS5xdWVyeS50KSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpczguYWN0aXZlVGFiSW5kZXggPSBfdGhpczguZ2V0QWN0aXZlVGFiSW5kZXhCeVRhYk5hbWUoX3RoaXM4LiRyb3V0ZS5xdWVyeS50KTsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNDsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5mZXRjaEl0ZW1zQnlBY3RpdmVUYWIoX3RoaXM4LiRyb3V0ZS5xdWVyeS50KTsKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU3KTsKICAgIH0pKSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGFjdGl2ZURlcDogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuZmV0Y2hJdGVtc0J5QWN0aXZlVGFiKHRoaXMuJHJvdXRlLnF1ZXJ5LnQpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;AAwSA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;EACAA;IACAC;IACAC;MAAAC;MAAAC;IAAA;EACA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAP;MACAQ;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACA;AACA;EACAC,0CACAC;IACAC;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;EAAA,EACA;EACAC;IACAC;MACA;QACA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;QACAvB;QACAwB;UAAAC;QAAA;QACAC;UAAA1B;QAAA;MACA;IACA;IACA2B;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACAC,2FACAC;gBACA;gBACA;kBACA;gBACA;cACA,GACAC;gBACAC;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;MACA;QACAC;QACAC;MACA,GACAL;QACA;UACA;YACAD,oBACAO,uCACAN;cACA;YACA,GACAC;cACAC;YACA;UACA;YACAH,oBACAO,mCACAN;cACA;gBACA;cACA;cACA;YACA,GACAC;cACAC;YACA;UACA;QACA;MACA,GACAD;QACA;MAAA,CACA;IACA;IACAM;MAAA;MACA,wCACA;QAAApC;QAAAwB;UAAAC;QAAA;MAAA,IACAY,0BACA;QAAArC;QAAAwB;UAAAC;QAAA;MAAA,IACA;QAAAa;MAAA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAAC;cACA;gBACA;cACA;cAAA,KACA;gBAAA;gBAAA;cAAA;cAAA,MACAA;gBAAA;gBAAA;cAAA;cACA;cACAC;cACA;cACA;cAAA;cAAA,OACAC,cACAC,qBACAF,eACA,oBACA,CACAZ;gBACA;gBACA;cACA,GACAC;gBACAC;cACA,GACAa;gBACA;cACA;YAAA;cAAA;cAAA;YAAA;cAAA,MACAJ;gBAAA;gBAAA;cAAA;cACA;cACAK;gBACAzC;gBACA0C;cACA;cACA;cACA;cAAA;cAAA,OACAlB,oBACAmB,2CACAlB;gBACA;gBACA;cACA,GACAC;gBACAC;cACA,GACAa;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAGA;IACAI;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAAC;cAAAC;cAAA,uCACAC;cAAA;cAAA;YAAA;cAAA;gBAAA;gBAAA;cAAA;cAAAC;cAAA,MACAA;gBAAA;gBAAA;cAAA;cACAC;cAAA;cAAA;YAAA;cAEAA;cAAA,MACAD;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAIA;IACAE,uCAEA;IACAC,+CAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,IACAjD;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAAA;YAAA;cAAA,MAEAkD;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;gBACA;cACA;YAAA;cAEA;cAAA;cAAA,OACA;YAAA;cACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA,IACAnD;gBAAA;gBAAA;cAAA;cAAA,kCACA;YAAA;cAAA;cAAA,OAEA;YAAA;cAAAoD;cAAA;cAAA,OACA;YAAA;cACAC;cACA;gBACAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAAC;cAAAC;cAAA,IACA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAEA;gBACAtC;cACA;cACA;gBACAqC;cACA;cAAA,wCACAA;cAAA;cAAA;YAAA;cAAA;gBAAA;gBAAA;cAAA;cAAAV;cAAA,MACAA;gBAAA;gBAAA;cAAA;cAAA,kCACAA;YAAA;cAAA,MAEAA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAAY;cAAA,KACAA;gBAAA;gBAAA;cAAA;cAAA,kCACAA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAIA;EACA;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACA;UAAA;YACA;YACA;YAAA,KACA;cAAA;cAAA;YAAA;YAAA;YAAA,OACA;UAAA;YAAAC;YAAA;YAAA,OACA;UAAA;YAAA,KACA;cAAA;cAAA;YAAA;YACA;YAAA;YAAA,OACA;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAGA;EACAC;IACA5D;MACA6D;MACAC;QACA;MACA;IACA;EACA;AACA","names":["page","title","meta","name","content","components","OrgStrTreeView","data","currentUserId","selectedDep","activeDep","loadingTableItems","activeTabIndex","departments","users","totalUsers","employees","totalEmployees","searchPayloadEmployees","searchPayloadUsers","computed","mapState","activeTab","userInfo","methods","getActiveTabIndexByTabName","updateDepPerms","params","id","query","fetchDepartments","crudAndListsService","then","catch","console","deleteItem","okTitle","cancelTitle","deleteById","editItem","tabName","type","fetchItemsByActiveTab","tab","searchPayload","helperService","searchEmployeesByDep","finally","payload","depId","searchByDepId","giveActiveClassToDep","step","parents","treeArr","el","document","showRefModal","deleteDepartment","toggleActiveClass","parseInt","openDepartmentTreeStyle","parent","self","findDepartmentById","children","activate","res","created","dep","watch","deep","handler"],"sourceRoot":"src/modules/management/modules/users_and_employees","sources":["Index.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-md-12 text-center\">\r\n      <div class=\"h4 mb-4 d-inline-block\">{{ $t('submodules.users.title') }}</div>\r\n    </div>\r\n    <div class=\"col-xl-4\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"d-flex align-items-center justify-content-between mb-4\">\r\n            <h3 class=\"card-title mb-0 org-str-title\">{{ $t('not_translated.organizational_structure') }}</h3>\r\n          </div>\r\n          <ul v-if=\"departments.length > 0\" style=\"list-style-type: none;\">\r\n            <template v-for=\"dep in departments\">\r\n              <org-str-tree-view\r\n                  @showRefModal=\"showRefModal\"\r\n                  @deleteDep=\"deleteDepartment\"\r\n                  @toggleActiveClass=\"toggleActiveClass\"\r\n                  without-actions\r\n                  class=\"item\"\r\n                  :key=\"dep.id + 'dep'\"\r\n                  :department-for-tree=\"dep\"\r\n              >\r\n              </org-str-tree-view>\r\n            </template>\r\n          </ul>\r\n          <template v-else>\r\n            <h5>Ҳозирча бўлинмалар қўшилмаган</h5>\r\n          </template>\r\n          <!-- TREE VIEW -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-xl-8\">\r\n      <div class=\"card fixed-user-employee-list-card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row mb-2\">\r\n            <div class=\"col-sm-4\">\r\n              <h5 class=\"mb-0\">{{ selectedDep }}</h5>\r\n            </div>\r\n            <div class=\"col-sm-4\">\r\n              <div class=\"text-center\">\r\n                <h4>\r\n                  {{activeTab === 'employees' ? $t('submodules.employees.title') : $t('submodules.users.title')}}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-4\">\r\n              <div class=\"text-sm-end\">\r\n                <b-btn\r\n                    type=\"button\"\r\n                    class=\"btn btn-success btn-rounded mb-2 me-2\"\r\n                    :to=\"activeTab === 'employees' ? {name: 'CreateEmployee'} : {name: 'CreateUser'}\"\r\n                >\r\n                  <i class=\"mdi mdi-plus me-1\"></i> {{ $t('actions.add') }}\r\n                </b-btn>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12\">\r\n              <b-tabs\r\n                  v-model=\"activeTabIndex\"\r\n                  justified\r\n                  nav-class=\"nav-tabs-custom\"\r\n                  content-class=\"p-3 text-muted\"\r\n              >\r\n                <b-tab\r\n                    style=\"max-height: 50vh; overflow: auto;\"\r\n                    active\r\n                    @click=\"fetchItemsByActiveTab('employees')\"\r\n                >\r\n                  <template v-slot:title>\r\n                    <span class=\"d-inline-block d-sm-none\">\r\n                        <i class=\"fas fa-home\"></i>\r\n                    </span>\r\n                    <span class=\"d-none d-sm-inline-block\">{{ $t('submodules.employees.title') }}</span>\r\n                  </template>\r\n                  <b-table\r\n                      :items=\"employees\"\r\n                      :fields=\"employeeHeaders\"\r\n                      :busy.sync=\"loadingTableItems\"\r\n                      sticky-header=\"sticky-header\"\r\n                      id=\"employees-table\"\r\n                      class=\"custom-b-table max-height-40\"\r\n                      responsive\r\n                      striped\r\n                      bordered\r\n                      small\r\n                      hover\r\n                      show-empty\r\n                  >\r\n                    <template #cell(index)=\"data\">\r\n                      {{ util_paginate(data.index, searchPayloadEmployees.page, searchPayloadEmployees.itemsPerPage) }}\r\n                    </template>\r\n                    <template #cell(fullName)=\"data\">\r\n                      {{ data.item.lastName }} {{ data.item.firstName }}\r\n                      {{ data.item.middleName ? data.item.middleName : '' }}\r\n                    </template>\r\n                    <template #cell(positionName)=\"data\">\r\n                      <div class=\"d-flex justify-content-between\">\r\n                        <span>\r\n                          {{\r\n                            getName({\r\n                              nameRu: data.item.directoryPositionNameRu,\r\n                              nameLt: data.item.directoryPositionNameLt,\r\n                              nameUz: data.item.directoryPositionNameUz,\r\n                            })\r\n                          }}\r\n                        </span>\r\n                      </div>\r\n                    </template>\r\n                    <template #cell(departmentName)=\"data\">\r\n                      <div class=\"d-flex justify-content-between\">\r\n                        <span>\r\n                          {{\r\n                            getName({\r\n                              nameRu: data.item.departmentNameRu,\r\n                              nameLt: data.item.departmentNameLt,\r\n                              nameUz: data.item.departmentNameUz,\r\n                            })\r\n                          }}\r\n                        </span>\r\n                      </div>\r\n                    </template>\r\n                    <template #cell(status)=\"data\">\r\n                      <p class=\"mb-0\" style=\"font-size: .95rem;\">\r\n                        <span :class=\"['badge', data.item.statusNameEn === 'ACTIVE' ? 'bg-success' :\r\n                                                data.item.statusNameEn === 'DELETED' ? 'bg-danger' : 'bg-info']\">\r\n                          {{\r\n                            getName({\r\n                              nameRu: data.item.statusNameRu,\r\n                              nameLt: data.item.statusNameLt,\r\n                              nameUz: data.item.statusNameUz,\r\n                            })\r\n                          }}\r\n                        </span>\r\n                      </p>\r\n                    </template>\r\n                    <template #cell(actions)=\"data\">\r\n                      <div class=\"general-table__actions d-flex justify-content-center\">\r\n                        <b-btn\r\n                            variant=\"link\"\r\n                            class=\"text-decoration-none p-0\"\r\n                            style=\"font-size: 1.2rem; margin-right: 1rem;\"\r\n                        >\r\n                          <i\r\n                              @click=\"editItem(data.item.id, 'employees')\"\r\n                              class=\"mdi mdi-circle-edit-outline edit\"\r\n                          ></i>\r\n                        </b-btn>\r\n                        <b-btn\r\n                            variant=\"link\"\r\n                            class=\"text-decoration-none p-0 text-danger\"\r\n                            style=\"font-size: 1.2rem;\"\r\n                        >\r\n                          <i\r\n                              @click=\"deleteItem(data.item.id, 'employees')\"\r\n                              class=\"mdi mdi-trash-can delete\"\r\n                          ></i>\r\n                        </b-btn>\r\n                      </div>\r\n                    </template>\r\n                    <template #empty=\"\">\r\n                      <h4 class=\"text-center\">{{ activeDep.id ? $t('not_found') : $t('choose_department') }}</h4>\r\n                    </template>\r\n                    <template #table-busy>\r\n                      <div class=\"text-center my-2\">\r\n                        <b-spinner\r\n                            variant=\"primary\"\r\n                            class=\"align-middle\"\r\n                        ></b-spinner>\r\n                      </div>\r\n                    </template>\r\n                  </b-table>\r\n                  <b-pagination\r\n                      v-model=\"searchPayloadEmployees.page\"\r\n                      :total-rows=\"totalEmployees\"\r\n                      :per-page=\"searchPayloadEmployees.itemsPerPage\"\r\n                      aria-controls=\"my-table\"\r\n                      class=\"justify-content-end\"\r\n                  ></b-pagination>\r\n                </b-tab>\r\n                <b-tab @click=\"fetchItemsByActiveTab('users')\" style=\"max-height: 50vh; overflow: auto;\">\r\n                  <template v-slot:title>\r\n                    <span class=\"d-inline-block d-sm-none\">\r\n                        <i class=\"far fa-user\"></i>\r\n                    </span>\r\n                    <span class=\"d-none d-sm-inline-block\">{{ $t('submodules.users.title') }}</span>\r\n                  </template>\r\n                  <b-table\r\n                      :items=\"users\"\r\n                      :fields=\"userHeaders\"\r\n                      :busy.sync=\"loadingTableItems\"\r\n                      id=\"users-table\"\r\n                      class=\"custom-b-table\"\r\n                      responsive\r\n                      striped\r\n                      bordered\r\n                      small\r\n                      hover\r\n                      show-empty\r\n                  >\r\n                    <template #cell(index)=\"data\">\r\n                      {{ util_paginate(data.index, searchPayloadUsers.page, searchPayloadUsers.itemsPerPage) }}\r\n                    </template>\r\n                    <template #cell(roleNames)=\"data\">\r\n                      <div class=\"d-flex justify-content-between\">\r\n                        <p\r\n                            v-for=\"(role, index) in data.item.roleNames\"\r\n                            :key=\"`${role}-${index}`\"\r\n                            class=\"mb-0\"\r\n                            style=\"flex-basis: 0; flex-grow: 1; font-size: .95rem;\"\r\n                        ><span class=\"badge bg-primary badge-pill\">{{ role }}</span></p>\r\n                      </div>\r\n                    </template>\r\n                    <template #cell(status)=\"data\">\r\n                      <p class=\"mb-0\" style=\"font-size: .95rem;\" >\r\n                        <span :class=\"['badge', data.item.statusUz === 'ACTIVE' ? 'bg-success' :\r\n                                                data.item.statusUz === 'DELETED' ? 'bg-danger' : 'bg-info']\">\r\n                          {{\r\n                            getName({\r\n                              nameRu: data.item.statusRu,\r\n                              nameLt: data.item.statusLt,\r\n                              nameUz: data.item.statusUz,\r\n                            })\r\n                          }}\r\n                        </span>\r\n                      </p>\r\n                    </template>\r\n                    <template #cell(actions)=\"data\">\r\n                      <div\r\n                          v-if=\"data.item.id !== currentUserId\"\r\n                          class=\"general-table__actions d-flex justify-content-center\"\r\n                      >\r\n                        <b-btn\r\n                            v-if=\"data.item.statusUz !== 'DELETED'\"\r\n                            variant=\"link\"\r\n                            class=\"text-decoration-none p-0\"\r\n                            style=\"font-size: 1.2rem; margin-right: 1rem;\"\r\n                        >\r\n                          <i\r\n                              @click=\"editItem(data.item.id, 'users')\"\r\n                              class=\"mdi mdi-circle-edit-outline edit\"\r\n                          ></i>\r\n                        </b-btn>\r\n                        <b-btn\r\n                            v-if=\"data.item.statusUz !== 'DELETED'\"\r\n                            variant=\"link\"\r\n                            class=\"text-decoration-none p-0\"\r\n                            style=\"font-size: 1.2rem; margin-right: 1rem;\"\r\n                        >\r\n                          <i\r\n                              @click=\"updateDepPerms(data.item)\"\r\n                              class=\"mdi mdi-office-building edit\"\r\n                          ></i>\r\n                        </b-btn>\r\n                        <b-btn\r\n                            v-if=\"data.item.statusUz !== 'DELETED'\"\r\n                            variant=\"link\"\r\n                            class=\"text-decoration-none p-0 text-danger\"\r\n                            style=\"font-size: 1.2rem;\"\r\n                        >\r\n                          <i\r\n                              @click=\"deleteItem(data.item.id, 'users')\"\r\n                              class=\"mdi mdi-trash-can delete\"\r\n                          ></i>\r\n                        </b-btn>\r\n                      </div>\r\n                    </template>\r\n                    <template #empty=\"\">\r\n                      <h4 class=\"text-center\">{{ activeDep.id ? $t('not_found') : $t('choose_department') }}</h4>\r\n                    </template>\r\n                    <template #table-busy>\r\n                      <div class=\"text-center my-2\">\r\n                        <b-spinner\r\n                            variant=\"primary\"\r\n                            class=\"align-middle\"\r\n                        ></b-spinner>\r\n                      </div>\r\n                    </template>\r\n                  </b-table>\r\n                  <b-pagination\r\n                      v-model=\"searchPayloadUsers.page\"\r\n                      :total-rows=\"totalUsers\"\r\n                      :per-page=\"searchPayloadUsers.itemsPerPage\"\r\n                      aria-controls=\"my-table\"\r\n                      class=\"justify-content-end\"\r\n                  ></b-pagination>\r\n                </b-tab>\r\n              </b-tabs>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport {TokenService} from '@/shared/services/storage.service'\r\nimport appConfig from \"@/app.config\";\r\nimport OrgStrTreeView from '@/modules/management/components/OrgStrTreeView.vue'\r\nimport crudAndListsService from '@/shared/services/crud_and_list.service'\r\nimport helperService from '@/shared/services/helper.service'\r\n\r\nconst MAIN_API_URL_USERS = 'user'\r\nconst MAIN_API_URL_EMPLOYEES = 'employee'\r\nexport default {\r\n  page: {\r\n    title: \"Users and Employees\",\r\n    meta: [{name: \"description\", content: appConfig.description}],\r\n  },\r\n  components: {\r\n    OrgStrTreeView\r\n  },\r\n  data() {\r\n    return {\r\n      currentUserId: TokenService.getUserId(),\r\n      title: \"Users and Employees\",\r\n      selectedDep: '',\r\n      activeDep: {},\r\n      loadingTableItems: false,\r\n      activeTabIndex: 0,\r\n      departments: [],\r\n      users: [],\r\n      totalUsers: 0,\r\n      employees: [],\r\n      totalEmployees: 0,\r\n      searchPayloadEmployees: {},\r\n      searchPayloadUsers: {}\r\n    };\r\n  },\r\n  /*\r\n  COMPUTED */\r\n  computed: {\r\n    ...mapState('managementUsersAndEmployees', ['userHeaders', 'employeeHeaders']),\r\n    activeTab() {\r\n      if (this.activeTabIndex === 0) {\r\n        return 'employees'\r\n      } else if (this.activeTabIndex === 1) {\r\n        return 'users'\r\n      } else {\r\n        return ''\r\n      }\r\n    },\r\n    userInfo() {\r\n      return TokenService.getUserInfo()\r\n    }\r\n  },\r\n  methods: {\r\n    getActiveTabIndexByTabName(tabName){\r\n      if (tabName === 'employees') {\r\n        return 0;\r\n      } else if (tabName === 'users') {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    },\r\n    updateDepPerms(user) {\r\n      this.$router.push({\r\n        name: 'UpdateUserPermissionsToDepartments',\r\n        params: {id: user.id},\r\n        query: {name: user.employeeFullName}\r\n      })\r\n    },\r\n    async fetchDepartments() {\r\n      await crudAndListsService.searchList('department', this.var_default_search_payload, null, true)\r\n          .then(res => {\r\n            this.departments = []\r\n            if (res.data.id) {\r\n              this.departments.push(res.data)\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    deleteItem(id, tabName = this.activeTab) {\r\n      this.$bvModal.msgBoxConfirm('Are you sure?', {\r\n        okTitle: this.$t('actions.confirm'),\r\n        cancelTitle: this.$t('actions.cancel')\r\n      })\r\n          .then(value => {\r\n            if (value) {\r\n              if (tabName === 'employees') {\r\n                crudAndListsService\r\n                    .deleteById(MAIN_API_URL_EMPLOYEES, id)\r\n                    .then((res) => {\r\n                      this.fetchItemsByActiveTab()\r\n                    })\r\n                    .catch(e => {\r\n                      console.log(e)\r\n                    })\r\n              } else if (tabName === 'users') {\r\n                crudAndListsService\r\n                    .deleteById(MAIN_API_URL_USERS, id)\r\n                    .then((res) => {\r\n                      if (this.userInfo.id === id) {\r\n                        this.$store.dispatch('auth/logout')\r\n                      }\r\n                      this.fetchItemsByActiveTab()\r\n                    })\r\n                    .catch(e => {\r\n                      console.log(e)\r\n                    })\r\n              }\r\n            }\r\n          })\r\n          .catch(err => {\r\n            // An error occurred\r\n          })\r\n    },\r\n    editItem(id, tabName = this.activeTab) {\r\n      this.$router.push(tabName === 'users' ?\r\n          {name: 'UpdateUser', params: {id: id}} :\r\n          tabName === 'employees' ?\r\n              {name: 'UpdateEmployee', params: {id: id}} :\r\n              this.$toast('Илтимос табни қайта босинг ва яна уриниб кўринг', {type: 'info'}))\r\n    },\r\n    async fetchItemsByActiveTab(tab = this.activeTab) {\r\n      this.urlPushState({\r\n        't': tab\r\n      })\r\n      if (this.activeDep.id) {\r\n        if (tab === 'employees') {\r\n          this.loadingTableItems = true\r\n          let searchPayload = this.searchPayloadEmployees;\r\n          this.employees = [];\r\n          this.totalEmployees = 0\r\n          await helperService\r\n              .searchEmployeesByDep(\r\n                  searchPayload,\r\n                  this.activeDep.id\r\n              )\r\n              .then((res) => {\r\n                this.employees = res.data.list;\r\n                this.totalEmployees = res.data.total\r\n              })\r\n              .catch(e => {\r\n                console.log(e)\r\n              })\r\n              .finally(() => {\r\n                this.loadingTableItems = false\r\n              });\r\n        } else if (tab === 'users') {\r\n          this.loadingTableItems = true\r\n          let payload = {\r\n            data: this.searchPayloadUsers,\r\n            depId: this.activeDep.id,\r\n          };\r\n          this.users = [];\r\n          this.totalUsers = 0\r\n          await crudAndListsService\r\n              .searchByDepId(MAIN_API_URL_USERS, payload)\r\n              .then((res) => {\r\n                this.users = res.data.list;\r\n                this.totalUsers = res.data.total\r\n              })\r\n              .catch(e => {\r\n                console.log(e)\r\n              })\r\n              .finally(() => {\r\n                this.loadingTableItems = false\r\n              });\r\n        }\r\n      }\r\n    },\r\n    async giveActiveClassToDep(treeArr, activeId, step = 0, parents = {}) {\r\n      for (const el of treeArr) {\r\n        if (el.id === activeId) {\r\n          document.getElementById(`depId-${activeId}`).classList.add('active')\r\n        } else {\r\n          document.getElementById(`depId-${el.id}`).classList.remove('active')\r\n          if (el.children && el.children.length > 0) {\r\n            await this.giveActiveClassToDep(el.children, activeId, step, parents);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    showRefModal() {\r\n\r\n    },\r\n    deleteDepartment() {\r\n\r\n    },\r\n    async toggleActiveClass(activeDep) {\r\n      if (!activeDep) {\r\n        activeDep = await this.findDepartmentById(this.$route.query.d, null, true)\r\n      }\r\n      if (parseInt(this.$route.query.d) !== activeDep.id) {\r\n        await this.urlPushState({\r\n          'd': activeDep.id\r\n        })\r\n      }\r\n      this.activeDep = Object.assign({}, activeDep)\r\n      await this.giveActiveClassToDep(this.departments, activeDep.id)\r\n      this.selectedDep = activeDep.nameUz\r\n      this.openDepartmentTreeStyle(activeDep)\r\n    },\r\n    async openDepartmentTreeStyle(activeDep){\r\n      if (!activeDep.parentId) {\r\n        return false;\r\n      }\r\n      const parent = await this.findDepartmentById(activeDep.parentId, null, true)\r\n      await this.openDepartmentTreeStyle(parent)\r\n      const self = document.getElementById(`dep-toggle-icon-id-${activeDep.id}`)\r\n      if (self) {\r\n        self.click();\r\n      }\r\n    },\r\n    async findDepartmentById(id, children = null, activate = true) {\r\n      if (!this.departments) {\r\n        await this.fetchDepartments()\r\n      }\r\n      if (typeof id === 'string') {\r\n        id = parseInt(id)\r\n      }\r\n      if (!children) {\r\n        children = this.departments\r\n      }\r\n      for (const el of children) {\r\n        if (el.id === id) {\r\n          return el\r\n        }\r\n        if (el.children && el.children.length > 0) {\r\n          const res = await this.findDepartmentById(id, el.children)\r\n          if (res) {\r\n            return res\r\n          }\r\n        }\r\n      }\r\n    },\r\n  },\r\n  async created() {\r\n    await this.fetchDepartments()\r\n    this.searchPayloadEmployees = Object.assign({}, this.var_default_search_payload)\r\n    this.searchPayloadUsers = Object.assign({}, this.var_default_search_payload)\r\n    if (this.$route.query.d) {\r\n      const dep = await this.findDepartmentById(this.$route.query.d)\r\n      await this.toggleActiveClass(dep)\r\n      if (this.$route.query.t) {\r\n        this.activeTabIndex = this.getActiveTabIndexByTabName(this.$route.query.t);\r\n        await this.fetchItemsByActiveTab(this.$route.query.t)\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    activeDep: {\r\n      deep: true,\r\n      handler() {\r\n        this.fetchItemsByActiveTab(this.$route.query.t);\r\n      },\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style scoped lang='scss'>\r\n.hoverable {\r\n  font-size: 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  .org-str-actions {\r\n    display: flex;\r\n    min-width: 20%;\r\n    align-items: center;\r\n\r\n    .btn {\r\n      line-height: 1;\r\n\r\n      &:focus {\r\n        outline: none !important;\r\n        box-shadow: none;\r\n      }\r\n    }\r\n\r\n    i {\r\n      font-size: 1.3rem;\r\n    }\r\n  }\r\n}\r\n\r\n.max-height-40 {\r\n  max-height: 40vh;\r\n}\r\n\r\n.max-height-40 {\r\n  max-height: 40vh;\r\n}\r\n\r\n.dep-name {\r\n  display: inline-block;\r\n  margin: 0;\r\n}\r\n\r\n::v-deep .org-str-actions {\r\n  visibility: hidden;\r\n}\r\n\r\n::v-deep li > div {\r\n  &:hover {\r\n    .org-str-actions {\r\n      visibility: visible !important;\r\n      @media (max-width: 568px) {\r\n        display: flex !important;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n::v-deep li div div:first-child,\r\n.add,\r\n.delete,\r\n.edit {\r\n  display: inline-block;\r\n  margin: 6px 0;\r\n  cursor: pointer;\r\n}\r\n\r\n::v-deep li div {\r\n  &:hover {\r\n    p {\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n}\r\n\r\n::v-deep li .active {\r\n  font-weight: bold;\r\n}\r\n\r\n.mdi {\r\n  margin-right: 0.8em;\r\n}\r\n\r\n.building-icon {\r\n  color: #f0d45f;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n\r\n  .mdi-office-building-outline {\r\n    font-size: 1.4rem;\r\n  }\r\n}\r\n\r\n.org-str-title {\r\n  font-size: 1.2rem;\r\n}\r\n</style>"]}]}