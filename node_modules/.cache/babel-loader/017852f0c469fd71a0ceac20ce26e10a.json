{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\components\\CreateFormContractor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\components\\CreateFormContractor.vue","mtime":1677469283067},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9BQ1JVIFBST0pFQ1QvRmFpciBUZWNoL2FjcnUtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7Ci8qKiBZT1UgTVVTVCBTRU5EIHt7IE1BSU5fQVBJX1VSTCB9fSBUTyBDUlVEX1NFUlZJQ0UgKi8KaW1wb3J0IGNydWRBbmRMaXN0c1NlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvY3J1ZF9hbmRfbGlzdC5zZXJ2aWNlIjsKaW1wb3J0IGhlbHBlclNlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvaGVscGVyLnNlcnZpY2UiOwp2YXIgTUFJTl9BUElfVVJMID0gJ2NvbnRyYWN0b3InOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNyZWF0ZUZvcm1Db250cmFjdG9yIiwKICAvKiogUFJPUFMgKi8KICBwcm9wczogewogICAgY3VzdG9tSXNNb2RlQ3JlYXRlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICAvKiogQ09NUE9ORU5UUyAqLwogIGNvbXBvbmVudHM6IHt9LAogIC8qKiBEQVRBICovZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvdW5kZXJzRmllbGRzOiBbewogICAgICAgIGxhYmVsOiAiIyIsCiAgICAgICAgdGhDbGFzczogInRleHQtY2VudGVyIiwKICAgICAgICB0ZENsYXNzOiAidGV4dC1jZW50ZXIiLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICBrZXk6ICJpbmRleCIKICAgICAgfSwgewogICAgICAgIGtleTogJ2Z1bGxOYW1lJywKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLm5hbWUnKQogICAgICB9LCB7CiAgICAgICAga2V5OiAnaW5uJywKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmlubicpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdwbmZsJywKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnBlcnNvbmFsX251bWJlcicpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICd0eXBlJywKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnR5cGUnKQogICAgICB9LCB7CiAgICAgICAga2V5OiAnZm91bmRlclNoYXJlUGVyY2VudCcsCiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5zaGFyZV9wZXJjZW50YWdlJykKICAgICAgfSwgewogICAgICAgIGtleTogJ2ZvdW5kZXJTaGFyZVN1bScsCiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5zaGFyZV9zdW0nKQogICAgICB9XSwKICAgICAgb3JpZ2luYWxEdG86IHsKICAgICAgICBhZGRyZXNzRHRvOiB7fSwKICAgICAgICBmb3VuZGVyc0R0b3M6IFtdCiAgICAgIH0sCiAgICAgIG9yaWdpbmFsSW5uOiBudWxsLAogICAgICBvcmlnaW5hbFBpbmZsOiBudWxsLAogICAgICAvLyBDT05UUkFDVE9SIFNFTEVDVF9BTkRfQ1JFQVRFIFZBUlMKICAgICAgaGFzTmV4dFBhZ2VDb250cmFjdG9yczogZmFsc2UsCiAgICAgIGNvbnRyYWN0b3JzOiBbXSwKICAgICAgZGVib3VuY2U6IG51bGwsCiAgICAgIGlzTG9hZGluZ0NvbnRyYWN0b3JzOiBmYWxzZSwKICAgICAgY29udHJhY3RvckNyZWF0ZU1vZGFsOiBmYWxzZSwKICAgICAgY29udHJhY3RvclNlYXJjaFBheWxvYWQ6IHt9LAogICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgZm9ybU9mT3duZXJzaGlwczogW10sCiAgICAgIHJlZ2lvbnM6IFtdLAogICAgICBkaXN0cmljdHM6IFtdLAogICAgICBzdGF0dXNlczogW10sCiAgICAgIGVkaXRpbmdJdGVtOiB7CiAgICAgICAgaXNZdXI6IHRydWUsCiAgICAgICAgYWRkcmVzc0R0bzoge30sCiAgICAgICAgZm91bmRlcnNEdG9zOiBbXQogICAgICB9LAogICAgICBkZWZhdWx0Rm91bmRlcjogewogICAgICAgIGZvdW5kZXJOYW1lOiBudWxsLAogICAgICAgIHBlcmNlbnRhZ2U6IG51bGwKICAgICAgfQogICAgfTsKICB9LAogIC8qKiBDT01QVVRFRCAqLwogIGNvbXB1dGVkOiB7CiAgICBpc01vZGVDcmVhdGU6IGZ1bmN0aW9uIGlzTW9kZUNyZWF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tSXNNb2RlQ3JlYXRlID8gdGhpcy5jdXN0b21Jc01vZGVDcmVhdGUgOiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnQ3JlYXRlQ29udHJhY3Rvcic7CiAgICB9LAogICAgY29tcHV0ZWRPYnNlcnZlcjogZnVuY3Rpb24gY29tcHV0ZWRPYnNlcnZlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJlZnMub2JzZXJ2ZXI7CiAgICB9LAogICAgY29tcHV0ZWRGb3VuZGVyc0R0b3M6IGZ1bmN0aW9uIGNvbXB1dGVkRm91bmRlcnNEdG9zKCkgewogICAgICB2YXIgX3RoaXMkZWRpdGluZ0l0ZW0kcmVnLCBfdGhpcyRlZGl0aW5nSXRlbSRyZWcyOwogICAgICBpZiAoKChfdGhpcyRlZGl0aW5nSXRlbSRyZWcgPSB0aGlzLmVkaXRpbmdJdGVtLnJlZ0NvbnRyYWN0b3JEdG8pID09PSBudWxsIHx8IF90aGlzJGVkaXRpbmdJdGVtJHJlZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGVkaXRpbmdJdGVtJHJlZzIgPSBfdGhpcyRlZGl0aW5nSXRlbSRyZWcuZm91bmRlcnMpID09PSBudWxsIHx8IF90aGlzJGVkaXRpbmdJdGVtJHJlZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGVkaXRpbmdJdGVtJHJlZzIubGVuZ3RoKSA+IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5lZGl0aW5nSXRlbS5yZWdDb250cmFjdG9yRHRvLmZvdW5kZXJzLm1hcChmdW5jdGlvbiAoZm91bmRlciwgaW5kZXgpIHsKICAgICAgICAgIGlmIChmb3VuZGVyLmZvdW5kZXJJbmRpdmlkdWFsKSB7CiAgICAgICAgICAgIHZhciBfZm91bmRlciRmb3VuZGVySW5kaXYsIF9mb3VuZGVyJGZvdW5kZXJJbmRpdjIsIF9mb3VuZGVyJGZvdW5kZXJJbmRpdjMsIF9mb3VuZGVyJGZvdW5kZXJJbmRpdjQsIF9mb3VuZGVyJGZvdW5kZXJJbmRpdjUsIF9mb3VuZGVyJGZvdW5kZXJJbmRpdjY7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgICAgIGZ1bGxOYW1lOiAiIi5jb25jYXQoZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC5sYXN0TmFtZSwgIiAiKS5jb25jYXQoZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC5maXJzdE5hbWUsICIgIikuY29uY2F0KGZvdW5kZXIuZm91bmRlckluZGl2aWR1YWwubWlkZGxlTmFtZSksCiAgICAgICAgICAgICAgaW5uOiAoX2ZvdW5kZXIkZm91bmRlckluZGl2ID0gZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC50aW4pICE9PSBudWxsICYmIF9mb3VuZGVyJGZvdW5kZXJJbmRpdiAhPT0gdm9pZCAwID8gX2ZvdW5kZXIkZm91bmRlckluZGl2IDogbnVsbCwKICAgICAgICAgICAgICBwbmZsOiAoX2ZvdW5kZXIkZm91bmRlckluZGl2MiA9IGZvdW5kZXIuZm91bmRlckluZGl2aWR1YWwucGluZmwpICE9PSBudWxsICYmIF9mb3VuZGVyJGZvdW5kZXJJbmRpdjIgIT09IHZvaWQgMCA/IF9mb3VuZGVyJGZvdW5kZXJJbmRpdjIgOiBudWxsLAogICAgICAgICAgICAgIHR5cGU6IG51bGwsCiAgICAgICAgICAgICAgaXNMZWdhbDogZmFsc2UsCiAgICAgICAgICAgICAgZm91bmRlclNoYXJlUGVyY2VudDogKF9mb3VuZGVyJGZvdW5kZXJJbmRpdjMgPSAoX2ZvdW5kZXIkZm91bmRlckluZGl2NCA9IGZvdW5kZXIuZm91bmRlckluZGl2aWR1YWwpID09PSBudWxsIHx8IF9mb3VuZGVyJGZvdW5kZXJJbmRpdjQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mb3VuZGVyJGZvdW5kZXJJbmRpdjQuZm91bmRlclNoYXJlUGVyY2VudCkgIT09IG51bGwgJiYgX2ZvdW5kZXIkZm91bmRlckluZGl2MyAhPT0gdm9pZCAwID8gX2ZvdW5kZXIkZm91bmRlckluZGl2MyA6IG51bGwsCiAgICAgICAgICAgICAgZm91bmRlclNoYXJlU3VtOiAoX2ZvdW5kZXIkZm91bmRlckluZGl2NSA9IChfZm91bmRlciRmb3VuZGVySW5kaXY2ID0gZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbCkgPT09IG51bGwgfHwgX2ZvdW5kZXIkZm91bmRlckluZGl2NiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZvdW5kZXIkZm91bmRlckluZGl2Ni5mb3VuZGVyU2hhcmVTdW0pICE9PSBudWxsICYmIF9mb3VuZGVyJGZvdW5kZXJJbmRpdjUgIT09IHZvaWQgMCA/IF9mb3VuZGVyJGZvdW5kZXJJbmRpdjUgOiBudWxsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZm91bmRlci5mb3VuZGVyTGVnYWwpIHsKICAgICAgICAgICAgdmFyIF9mb3VuZGVyJGZvdW5kZXJMZWdhbCwgX2ZvdW5kZXIkZm91bmRlckxlZ2FsMiwgX2ZvdW5kZXIkZm91bmRlckxlZ2FsMywgX2ZvdW5kZXIkZm91bmRlckxlZ2FsNCwgX2ZvdW5kZXIkZm91bmRlckxlZ2FsNSwgX2ZvdW5kZXIkZm91bmRlckxlZ2FsNiwgX2ZvdW5kZXIkZm91bmRlckxlZ2FsNywgX2ZvdW5kZXIkZm91bmRlckxlZ2FsODsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBpbmRleDogaW5kZXgsCiAgICAgICAgICAgICAgZnVsbE5hbWU6IChfZm91bmRlciRmb3VuZGVyTGVnYWwgPSAoX2ZvdW5kZXIkZm91bmRlckxlZ2FsMiA9IGZvdW5kZXIuZm91bmRlckxlZ2FsKSA9PT0gbnVsbCB8fCBfZm91bmRlciRmb3VuZGVyTGVnYWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZm91bmRlciRmb3VuZGVyTGVnYWwyLm5hbWUpICE9PSBudWxsICYmIF9mb3VuZGVyJGZvdW5kZXJMZWdhbCAhPT0gdm9pZCAwID8gX2ZvdW5kZXIkZm91bmRlckxlZ2FsIDogbnVsbCwKICAgICAgICAgICAgICBpbm46IChfZm91bmRlciRmb3VuZGVyTGVnYWwzID0gKF9mb3VuZGVyJGZvdW5kZXJMZWdhbDQgPSBmb3VuZGVyLmZvdW5kZXJMZWdhbCkgPT09IG51bGwgfHwgX2ZvdW5kZXIkZm91bmRlckxlZ2FsNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZvdW5kZXIkZm91bmRlckxlZ2FsNC50aW4pICE9PSBudWxsICYmIF9mb3VuZGVyJGZvdW5kZXJMZWdhbDMgIT09IHZvaWQgMCA/IF9mb3VuZGVyJGZvdW5kZXJMZWdhbDMgOiBudWxsLAogICAgICAgICAgICAgIHBuZmw6IG51bGwsCiAgICAgICAgICAgICAgdHlwZTogbnVsbCwKICAgICAgICAgICAgICBpc0xlZ2FsOiB0cnVlLAogICAgICAgICAgICAgIGZvdW5kZXJTaGFyZVBlcmNlbnQ6IChfZm91bmRlciRmb3VuZGVyTGVnYWw1ID0gKF9mb3VuZGVyJGZvdW5kZXJMZWdhbDYgPSBmb3VuZGVyLmZvdW5kZXJMZWdhbCkgPT09IG51bGwgfHwgX2ZvdW5kZXIkZm91bmRlckxlZ2FsNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZvdW5kZXIkZm91bmRlckxlZ2FsNi5mb3VuZGVyU2hhcmVQZXJjZW50KSAhPT0gbnVsbCAmJiBfZm91bmRlciRmb3VuZGVyTGVnYWw1ICE9PSB2b2lkIDAgPyBfZm91bmRlciRmb3VuZGVyTGVnYWw1IDogbnVsbCwKICAgICAgICAgICAgICBmb3VuZGVyU2hhcmVTdW06IChfZm91bmRlciRmb3VuZGVyTGVnYWw3ID0gKF9mb3VuZGVyJGZvdW5kZXJMZWdhbDggPSBmb3VuZGVyLmZvdW5kZXJMZWdhbCkgPT09IG51bGwgfHwgX2ZvdW5kZXIkZm91bmRlckxlZ2FsOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZvdW5kZXIkZm91bmRlckxlZ2FsOC5mb3VuZGVyU2hhcmVTdW0pICE9PSBudWxsICYmIF9mb3VuZGVyJGZvdW5kZXJMZWdhbDcgIT09IHZvaWQgMCA/IF9mb3VuZGVyJGZvdW5kZXJMZWdhbDcgOiBudWxsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zOwogICAgfQogIH0sCiAgLyoqIE1FVEhPRFMgKi8KICBtZXRob2RzOiB7CiAgICAvLyBDT05UUkFDVE9SIFNFTEVDVF9BTkRfQ1JFQVRFIE1FVEhPRFMKICAgIGNvbnRyYWN0b3JSZWFjaGVkRW5kT2ZMaXN0OiBmdW5jdGlvbiBjb250cmFjdG9yUmVhY2hlZEVuZE9mTGlzdChlKSB7CiAgICAgIGlmIChlICYmICF0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzKSB7CiAgICAgICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzKCk7CiAgICAgIH0KICAgIH0sCiAgICBkZWJvdW5jZVNlYXJjaENvbnRyYWN0b3JzOiBmdW5jdGlvbiBkZWJvdW5jZVNlYXJjaENvbnRyYWN0b3JzKHNlYXJjaFRleHQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy5kZWJvdW5jZSk7CiAgICAgICAgICAgICAgX3RoaXMuZGVib3VuY2UgPSBzZXRUaW1lb3V0KCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkKHNlYXJjaFRleHQpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgICAgfSkpLCAxMDAwKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY3VzdG9tTGFiZWxDb250cmFjdG9yOiBmdW5jdGlvbiBjdXN0b21MYWJlbENvbnRyYWN0b3Iob3B0KSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuY29udHJhY3RvcnMuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmlkID09IG9wdDsKICAgICAgfSk7CiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQoc2VsZWN0ZWQuZnVsbE5hbWUpOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBmZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQ6IGZ1bmN0aW9uIGZldGNoQ29udHJhY3RvcnNXaXRoS2V5d29yZChrZXl3b3JkKSB7CiAgICAgIHZhciBtYWtlRmlyc3RTZWxlY3RlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgIHRoaXMuY29udHJhY3RvcnMgPSBbXTsKICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5wYWdlID0gMTsKICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5rZXl3b3JkID0ga2V5d29yZCA/IGtleXdvcmQgOiAnJzsKICAgICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzKG1ha2VGaXJzdFNlbGVjdGVkKTsKICAgIH0sCiAgICBmZXRjaENvbnRyYWN0b3JzOiBmdW5jdGlvbiBmZXRjaENvbnRyYWN0b3JzKG1ha2VGaXJzdFNlbGVjdGVkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMyLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnRCeSA9IFtdOwogICAgICAgICAgICAgIF90aGlzMi5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5zb3J0QnkucHVzaCgnY3JlYXRlZCcpOwogICAgICAgICAgICAgIF90aGlzMi5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5zb3J0RGVzYyA9IFtdOwogICAgICAgICAgICAgIF90aGlzMi5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5zb3J0RGVzYy5wdXNoKHRydWUpOwogICAgICAgICAgICAgIF90aGlzMi5pc0xvYWRpbmdDb250cmFjdG9ycyA9IHRydWU7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBjcnVkQW5kTGlzdHNTZXJ2aWNlLnNlYXJjaExpc3RXaXRoS2V5d29yZCgnY29udHJhY3RvcicsIF90aGlzMi5jb250cmFjdG9yU2VhcmNoUGF5bG9hZCwgJ2J5LWNvbnRyYWN0b3InLCAhX3RoaXMyLmN1c3RvbUlzTW9kZUNyZWF0ZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICB2YXIgX3RoaXMyJGNvbnRyYWN0b3JzOwogICAgICAgICAgICAgICAgKF90aGlzMiRjb250cmFjdG9ycyA9IF90aGlzMi5jb250cmFjdG9ycykucHVzaC5hcHBseShfdGhpczIkY29udHJhY3RvcnMsIF90b0NvbnN1bWFibGVBcnJheShyZXMuZGF0YS5saXN0KSk7CiAgICAgICAgICAgICAgICBfdGhpczIuaGFzTmV4dFBhZ2VDb250cmFjdG9ycyA9IHJlcy5kYXRhLnRvdGFsIC8gX3RoaXMyLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLml0ZW1zUGVyUGFnZSA+IF90aGlzMi5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5wYWdlOwogICAgICAgICAgICAgICAgX3RoaXMyLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgKz0gMTsKICAgICAgICAgICAgICAgIGlmIChtYWtlRmlyc3RTZWxlY3RlZCkgewogICAgICAgICAgICAgICAgICBfdGhpczIuZWRpdGluZ0l0ZW0ucGFyZW50SWQgPSBfdGhpczIuY29udHJhY3RvcnMubGVuZ3RoID8gX3RoaXMyLmNvbnRyYWN0b3JzWzBdLmlkIDogbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICBfdGhpczIuY29udHJhY3RvcnMgPSBbXTsKICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzMi5pc0xvYWRpbmdDb250cmFjdG9ycyA9IGZhbHNlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBuZXdSZWZDcmVhdGVkOiBmdW5jdGlvbiBuZXdSZWZDcmVhdGVkKGZvcm1OYW1lKSB7CiAgICAgIGlmIChmb3JtTmFtZSA9PT0gJ0NyZWF0ZUZvcm1Db250cmFjdG9yJykgewogICAgICAgIHRoaXMuZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkKCcnLCB0cnVlKTsKICAgICAgfQogICAgfSwKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgYWRkRm91bmRlckR0bzogZnVuY3Rpb24gYWRkRm91bmRlckR0bygpIHsKICAgICAgdmFyIHRtcCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEZvdW5kZXIpOwogICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcy5wdXNoKHRtcCk7CiAgICB9LAogICAgc2V0RGVmYXVsdEFjdGl2ZVN0YXR1czogZnVuY3Rpb24gc2V0RGVmYXVsdEFjdGl2ZVN0YXR1cygpIHsKICAgICAgdmFyIGFjdGl2ZVN0YXR1cyA9IHRoaXMuc3RhdHVzZXMuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICByZXR1cm4gZWwuY29kZSA9PT0gJ0FDVElWRSc7CiAgICAgIH0pOwogICAgICBpZiAoYWN0aXZlU3RhdHVzKSB7CiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5zdGF0dXNJZCA9IGFjdGl2ZVN0YXR1cy5pZDsKICAgICAgfQogICAgfSwKICAgIHJlZ2lvblNlbGVjdGVkOiBmdW5jdGlvbiByZWdpb25TZWxlY3RlZCgkZXZlbnQpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGRvbnRSZXNldERpc3RyaWN0OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBkb250UmVzZXREaXN0cmljdCA9IF9hcmd1bWVudHMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgICAgICAgICAgaWYgKCFkb250UmVzZXREaXN0cmljdCkgewogICAgICAgICAgICAgICAgX3RoaXMzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8uZGlzdHJpY3RJZCA9IG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIEdFVCBESVNUUklDVFMKICAgICAgICAgICAgICBpZiAoISRldmVudCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gaGVscGVyU2VydmljZS5nZXRHZW9Mb2NhdGlvbnNCeVBhcmVudElkKCRldmVudCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBfdGhpczMuZGlzdHJpY3RzID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB2YWxpZGF0ZUlubjogZnVuY3Rpb24gdmFsaWRhdGVJbm4oKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGhlbHBlclNlcnZpY2UudmFsaWRhdGVJbm5Gcm9tQXBpKF90aGlzNC5lZGl0aW5nSXRlbS5pbm4pOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YSkgewogICAgICAgICAgICAgICAgX3RoaXM0LmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHsKICAgICAgICAgICAgICAgICAgSU5OOiBbX3RoaXM0LiR0KCd2YWxpZGF0b3IuaW5uJyldCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdmFsaWRhdGVQaW5mbDogZnVuY3Rpb24gdmFsaWRhdGVQaW5mbCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIV90aGlzNS5lZGl0aW5nSXRlbS5waW5mbCkgewogICAgICAgICAgICAgICAgX3RoaXM1LmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHsKICAgICAgICAgICAgICAgICAgcGluZmw6IFtfdGhpczUuJHQoJ3ZhbGlkYXRvci5yZXF1aXJlZCcpXQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChfdGhpczUuZWRpdGluZ0l0ZW0ucGluZmwubGVuZ3RoICE9PSAxNCkgewogICAgICAgICAgICAgICAgX3RoaXM1LmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHsKICAgICAgICAgICAgICAgICAgcGluZmw6IFtfdGhpczUuJHQoJ3ZhbGlkYXRvci5yZWdleCcpXQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRGb3VuZGVyc0Zyb21Tb2xpcTogZnVuY3Rpb24gc2V0Rm91bmRlcnNGcm9tU29saXEoKSB7CiAgICAgIHZhciBmb3VuZGVyc0Zyb21Tb2xpcSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CiAgICAgIHZhciBmb3VuZGVyc0R0b3MgPSBmb3VuZGVyc0Zyb21Tb2xpcS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgdmFyIGZvdW5kZXJEdG8gPSB7CiAgICAgICAgICBjb250cmFjdG9ySWQ6IG51bGwsCiAgICAgICAgICBmb3VuZGVyQWRkcmVzc0lkOiBudWxsLAogICAgICAgICAgZm91bmRlckNvbnRhY3RJZDogbnVsbCwKICAgICAgICAgIGZvdW5kZXJJbmRpdmlkdWFsSWQ6IG51bGwsCiAgICAgICAgICBmb3VuZGVyTGVnYWxJZDogbnVsbCwKICAgICAgICAgIGZvdW5kZXJTaGFyZVBlcmNlbnQ6IGVsLmZvdW5kZXJJbmRpdmlkdWFsID8gZWwuZm91bmRlckluZGl2aWR1YWwuZm91bmRlclNoYXJlUGVyY2VudCA6IGVsLmZvdW5kZXJMZWdhbCA/IGVsLmZvdW5kZXJMZWdhbC5mb3VuZGVyU2hhcmVQZXJjZW50IDogbnVsbCwKICAgICAgICAgIGZvdW5kZXJTaGFyZVN1bTogZWwuZm91bmRlckluZGl2aWR1YWwgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC5mb3VuZGVyU2hhcmVTdW0gOiBlbC5mb3VuZGVyTGVnYWwgPyBlbC5mb3VuZGVyTGVnYWwuZm91bmRlclNoYXJlU3VtIDogbnVsbCwKICAgICAgICAgIGZ1bGxOYW1lOiBlbC5mb3VuZGVyTGVnYWwgPyBlbC5mb3VuZGVyTGVnYWwubmFtZSA6IGVsLmZvdW5kZXJJbmRpdmlkdWFsID8gIiIuY29uY2F0KGVsLmZvdW5kZXJJbmRpdmlkdWFsLmZpcnN0TmFtZSwgIiAiKS5jb25jYXQoZWwuZm91bmRlckluZGl2aWR1YWwubGFzdE5hbWUsICIgIikuY29uY2F0KGVsLmZvdW5kZXJJbmRpdmlkdWFsLm1pZGRsZU5hbWUgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC5taWRkbGVOYW1lIDogJycpIDogbnVsbCwKICAgICAgICAgIGlkOiBudWxsLAogICAgICAgICAgaW5uOiBlbC5mb3VuZGVyTGVnYWwgPyBlbC5mb3VuZGVyTGVnYWwudGluIDogZWwuZm91bmRlckluZGl2aWR1YWwgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC50aW4gOiBudWxsLAogICAgICAgICAgaXNMZWdhbDogZWwuZm91bmRlckxlZ2FsID8gdHJ1ZSA6IGVsLmZvdW5kZXJJbmRpdmlkdWFsID8gZmFsc2UgOiBudWxsLAogICAgICAgICAgcG5mbDogZWwuZm91bmRlckluZGl2aWR1YWwgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC5waW5mbCA6IG51bGwKICAgICAgICB9OwogICAgICAgIGlmIChmb3VuZGVyRHRvLmlubikgewogICAgICAgICAgcmV0dXJuIGZvdW5kZXJEdG87CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdmb3VuZGVyc0R0b3MnLCBmb3VuZGVyc0R0b3MpOwogICAgfSwKICAgIGZpbmRDb250cmFjdG9yQnlJbm46IGZ1bmN0aW9uIGZpbmRDb250cmFjdG9yQnlJbm4oKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICBpZiAodGhpcy5jb21wdXRlZE9ic2VydmVyLmZpZWxkcy5JTk4udmFsaWQpIGhlbHBlclNlcnZpY2UudmFsaWRhdGVJbm5Gcm9tQXBpKHRoaXMuZWRpdGluZ0l0ZW0uaW5uLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgIHZhciBfaXNZdXIgPSBfdGhpczYuZWRpdGluZ0l0ZW0uaXNZdXI7CiAgICAgICAgICBpZiAoX3RoaXM2LmVkaXRpbmdJdGVtLmlubiAhPSBfdGhpczYub3JpZ2luYWxJbm4pIHsKICAgICAgICAgICAgaGVscGVyU2VydmljZS5nZXRDb250cmFjdG9ySW5mb0J5SW5uRm9yQ3JlYXRlKF90aGlzNi5lZGl0aW5nSXRlbS5pbm4sIF90aGlzNi5lZGl0aW5nSXRlbS5waW5mbCwgX3RoaXM2LmVkaXRpbmdJdGVtLmlzWXVyLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczYuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCByZXMuZGF0YSk7CiAgICAgICAgICAgICAgX3RoaXM2LmVkaXRpbmdJdGVtLmlzWXVyID0gX2lzWXVyOwogICAgICAgICAgICAgIF90aGlzNi5zZXREZWZhdWx0QWN0aXZlU3RhdHVzKCk7CiAgICAgICAgICAgICAgLy8gRkVUQ0ggRElTVFJJQ1RTCiAgICAgICAgICAgICAgX3RoaXM2LnJlZ2lvblNlbGVjdGVkKF90aGlzNi5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkLCB0cnVlKTsKICAgICAgICAgICAgICAvLyBDSEVDSyBBTkQgU0VUIEZPVU5ERVJTIEZST00gU09MSVEKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEucmVnQ29udHJhY3RvckR0byAmJiByZXMuZGF0YS5yZWdDb250cmFjdG9yRHRvLmZvdW5kZXJzKSB7CiAgICAgICAgICAgICAgICBfdGhpczYuc2V0Rm91bmRlcnNGcm9tU29saXEocmVzLmRhdGEucmVnQ29udHJhY3RvckR0by5mb3VuZGVycyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzNi5zZXRGb3VuZGVyc0Zyb21Tb2xpcSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAvLyB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHsgSU5OOiBbdGhpcy4kdCgndmFsaWRhdG9yLmlubl9leGlzdCcpXSB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoZWxwZXJTZXJ2aWNlLmdldENvbnRyYWN0b3JJbmZvQnlJbm5Gb3JVcGRhdGUoX3RoaXM2LmVkaXRpbmdJdGVtLmlubiwgX3RoaXM2LmVkaXRpbmdJdGVtLnBpbmZsLCBfdGhpczYuZWRpdGluZ0l0ZW0uaXNZdXIsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzNi5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHJlcy5kYXRhKTsKICAgICAgICAgICAgICBfdGhpczYuZWRpdGluZ0l0ZW0uaXNZdXIgPSBfaXNZdXI7CiAgICAgICAgICAgICAgX3RoaXM2LiRzZXQoX3RoaXM2LmVkaXRpbmdJdGVtLCAnYWRkcmVzc0R0bycsIF90aGlzNi5vcmlnaW5hbER0by5hZGRyZXNzRHRvKTsKICAgICAgICAgICAgICBfdGhpczYuJHNldChfdGhpczYuZWRpdGluZ0l0ZW0sICdtb2JpbGVOdW1iZXInLCBfdGhpczYub3JpZ2luYWxEdG8ubW9iaWxlTnVtYmVyKTsKICAgICAgICAgICAgICBfdGhpczYuJHNldChfdGhpczYuZWRpdGluZ0l0ZW0sICdlbWFpbCcsIF90aGlzNi5vcmlnaW5hbER0by5lbWFpbCk7CiAgICAgICAgICAgICAgX3RoaXM2LiRzZXQoX3RoaXM2LmVkaXRpbmdJdGVtLCAnY2FuUmVnaXN0ZXInLCBfdGhpczYub3JpZ2luYWxEdG8uY2FuUmVnaXN0ZXIpOwogICAgICAgICAgICAgIF90aGlzNi5zZXREZWZhdWx0QWN0aXZlU3RhdHVzKCk7CiAgICAgICAgICAgICAgLy8gRkVUQ0ggRElTVFJJQ1RTCiAgICAgICAgICAgICAgX3RoaXM2LnJlZ2lvblNlbGVjdGVkKF90aGlzNi5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkLCB0cnVlKTsKICAgICAgICAgICAgICAvLyBDSEVDSyBBTkQgU0VUIEZPVU5ERVJTIEZST00gU09MSVEKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEucmVnQ29udHJhY3RvckR0byAmJiByZXMuZGF0YS5yZWdDb250cmFjdG9yRHRvLmZvdW5kZXJzKSB7CiAgICAgICAgICAgICAgICBfdGhpczYuc2V0Rm91bmRlcnNGcm9tU29saXEocmVzLmRhdGEucmVnQ29udHJhY3RvckR0by5mb3VuZGVycyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzNi5zZXRGb3VuZGVyc0Zyb21Tb2xpcSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAvLyB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHsgSU5OOiBbdGhpcy4kdCgndmFsaWRhdG9yLmlubl9leGlzdCcpXSB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNi5jb21wdXRlZE9ic2VydmVyLnNldEVycm9ycyh7CiAgICAgICAgICAgIElOTjogW190aGlzNi4kdCgndmFsaWRhdG9yLmlubicpXQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCiAgICBmaW5kQ29udHJhY3RvckJ5UGluZmw6IGZ1bmN0aW9uIGZpbmRDb250cmFjdG9yQnlQaW5mbCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIGlmICh0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuZmllbGRzLlBJTkZMLnZhbGlkKSBpZiAodGhpcy5lZGl0aW5nSXRlbS5waW5mbCAhPT0gdGhpcy5vcmlnaW5hbFBpbmZsKSB7CiAgICAgICAgdmFyIF9pc1l1cjIgPSB0aGlzLmVkaXRpbmdJdGVtLmlzWXVyOwogICAgICAgIGhlbHBlclNlcnZpY2UuZ2V0Q29udHJhY3RvckluZm9CeUlubkZvckNyZWF0ZSh0aGlzLmVkaXRpbmdJdGVtLmlubiwgdGhpcy5lZGl0aW5nSXRlbS5waW5mbCwgdGhpcy5lZGl0aW5nSXRlbS5pc1l1ciwgdHJ1ZSkudGhlbihmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTsKICAgICAgICAgIF90aGlzNy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGRhdGEpOwogICAgICAgICAgX3RoaXM3LmVkaXRpbmdJdGVtLmlzWXVyID0gX2lzWXVyMjsKICAgICAgICAgIF90aGlzNy5zZXREZWZhdWx0QWN0aXZlU3RhdHVzKCk7CiAgICAgICAgICAvLyBGRVRDSCBESVNUUklDVFMKICAgICAgICAgIF90aGlzNy5yZWdpb25TZWxlY3RlZChfdGhpczcuZWRpdGluZ0l0ZW0uYWRkcmVzc0R0by5yZWdpb25JZCwgdHJ1ZSk7CiAgICAgICAgICAvLyBDSEVDSyBBTkQgU0VUIEZPVU5ERVJTIEZST00gU09MSVEKICAgICAgICAgIGlmIChkYXRhLnJlZ0NvbnRyYWN0b3JEdG8gJiYgZGF0YS5yZWdDb250cmFjdG9yRHRvLmZvdW5kZXJzKSB7CiAgICAgICAgICAgIF90aGlzNy5zZXRGb3VuZGVyc0Zyb21Tb2xpcShkYXRhLnJlZ0NvbnRyYWN0b3JEdG8uZm91bmRlcnMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM3LnNldEZvdW5kZXJzRnJvbVNvbGlxKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHt9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBoZWxwZXJTZXJ2aWNlLmdldENvbnRyYWN0b3JJbmZvQnlJbm5Gb3JVcGRhdGUodGhpcy5lZGl0aW5nSXRlbS5pbm4sIHRoaXMuZWRpdGluZ0l0ZW0ucGluZmwsIHRoaXMuZWRpdGluZ0l0ZW0uaXNZdXIsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM3LmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgcmVzLmRhdGEpOwogICAgICAgICAgX3RoaXM3LmVkaXRpbmdJdGVtLmlzWXVyID0gaXNZdXI7CiAgICAgICAgICBfdGhpczcuJHNldChfdGhpczcuZWRpdGluZ0l0ZW0sICdhZGRyZXNzRHRvJywgX3RoaXM3Lm9yaWdpbmFsRHRvLmFkZHJlc3NEdG8pOwogICAgICAgICAgX3RoaXM3LiRzZXQoX3RoaXM3LmVkaXRpbmdJdGVtLCAnbW9iaWxlTnVtYmVyJywgX3RoaXM3Lm9yaWdpbmFsRHRvLm1vYmlsZU51bWJlcik7CiAgICAgICAgICBfdGhpczcuJHNldChfdGhpczcuZWRpdGluZ0l0ZW0sICdlbWFpbCcsIF90aGlzNy5vcmlnaW5hbER0by5lbWFpbCk7CiAgICAgICAgICBfdGhpczcuJHNldChfdGhpczcuZWRpdGluZ0l0ZW0sICdjYW5SZWdpc3RlcicsIF90aGlzNy5vcmlnaW5hbER0by5jYW5SZWdpc3Rlcik7CiAgICAgICAgICBfdGhpczcuc2V0RGVmYXVsdEFjdGl2ZVN0YXR1cygpOwogICAgICAgICAgLy8gRkVUQ0ggRElTVFJJQ1RTCiAgICAgICAgICBfdGhpczcucmVnaW9uU2VsZWN0ZWQoX3RoaXM3LmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8ucmVnaW9uSWQsIHRydWUpOwogICAgICAgICAgLy8gQ0hFQ0sgQU5EIFNFVCBGT1VOREVSUyBGUk9NIFNPTElRCiAgICAgICAgICBpZiAocmVzLmRhdGEucmVnQ29udHJhY3RvckR0byAmJiByZXMuZGF0YS5yZWdDb250cmFjdG9yRHRvLmZvdW5kZXJzKSB7CiAgICAgICAgICAgIF90aGlzNy5zZXRGb3VuZGVyc0Zyb21Tb2xpcShyZXMuZGF0YS5yZWdDb250cmFjdG9yRHRvLmZvdW5kZXJzKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzNy5zZXRGb3VuZGVyc0Zyb21Tb2xpcSgpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAvLyB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHsgSU5OOiBbdGhpcy4kdCgndmFsaWRhdG9yLmlubl9leGlzdCcpXSB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGN1c3RvbUxhYmVsRGlzdHJpY3Q6IGZ1bmN0aW9uIGN1c3RvbUxhYmVsRGlzdHJpY3Qob3B0KSB7CiAgICAgIHZhciBzZWxlY3RlZERpc3RyaWN0ID0gdGhpcy5kaXN0cmljdHMuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmlkID09IG9wdDsKICAgICAgfSk7CiAgICAgIGlmIChzZWxlY3RlZERpc3RyaWN0KSB7CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh0aGlzLmdldE5hbWUoewogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZERpc3RyaWN0Lm5hbWVSdSwKICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWREaXN0cmljdC5uYW1lTHQsCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkRGlzdHJpY3QubmFtZVV6CiAgICAgICAgfSkpOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBjdXN0b21MYWJlbFJlZ2lvbjogZnVuY3Rpb24gY3VzdG9tTGFiZWxSZWdpb24ob3B0KSB7CiAgICAgIHZhciBzZWxlY3RlZFJlZ2lvbiA9IHRoaXMucmVnaW9ucy5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuaWQgPT0gb3B0OwogICAgICB9KTsKICAgICAgaWYgKHNlbGVjdGVkUmVnaW9uKSB7CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh0aGlzLmdldE5hbWUoewogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZFJlZ2lvbi5uYW1lUnUsCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkUmVnaW9uLm5hbWVMdCwKICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWRSZWdpb24ubmFtZVV6CiAgICAgICAgfSkpOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBjdXN0b21MYWJlbEZvcm1PZk93bmVyc2hpcDogZnVuY3Rpb24gY3VzdG9tTGFiZWxGb3JtT2ZPd25lcnNoaXAob3B0KSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuZm9ybU9mT3duZXJzaGlwcy5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuaWQgPT0gb3B0OwogICAgICB9KTsKICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh0aGlzLmdldE5hbWUoewogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwKICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6CiAgICAgICAgfSkpOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIGlzSW5uVmFsaWQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LnZhbGlkYXRlSW5uKCk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBpc0lublZhbGlkID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgaWYgKGlzSW5uVmFsaWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfdGhpczguY29tcHV0ZWRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4oZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzOC5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczguZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zID0gX3RoaXM4LmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwuZm91bmRlck5hbWUgJiYgZWwuZm91bmRlck5hbWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoICYmIGVsLnBlcmNlbnRhZ2U7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpczguaXNNb2RlQ3JlYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmVkaXRpbmdJdGVtLmlkID0gX3RoaXM4LiRyb3V0ZS5wYXJhbXMuaWQudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLnVwZGF0ZShNQUlOX0FQSV9VUkwsIF90aGlzOC5lZGl0aW5nSXRlbSwgbnVsbCwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczguY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgewogICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzRHRvOiB7fQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0KF90aGlzOC4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC4kZW1pdCgnc2F2ZWQnLCByZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5jcmVhdGUoTUFJTl9BUElfVVJMLCBfdGhpczguZWRpdGluZ0l0ZW0sIG51bGwsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmNvbXB1dGVkT2JzZXJ2ZXIucmVzZXQoKTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc0R0bzoge30KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdChfdGhpczguJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczguJGVtaXQoJ3NhdmVkJywgcmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczguJHRvYXN0KF90aGlzOC4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgLyoqIENSRUFURUQgKi9jcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIC8vIEZPUiBDT05UUkFDVE9SIFNFTEVDVF9BTkRfQURECiAgICAgICAgICAgIF90aGlzOS5jb250cmFjdG9yU2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIF90aGlzOS52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCk7CiAgICAgICAgICAgIF90aGlzOS5mZXRjaENvbnRyYWN0b3JzKCk7CiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIF90aGlzOS52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZC5pdGVtc1BlclBhZ2UgPSA1MDA7CiAgICAgICAgICAgIGlmICghX3RoaXM5LmlzTW9kZUNyZWF0ZSkgewogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEVtcHR5KE1BSU5fQVBJX1VSTCwgbnVsbCwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXM5LmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgcmVzLmRhdGEpOwogICAgICAgICAgICAgIF90aGlzOS5lZGl0aW5nSXRlbS5pc1l1ciA9IHRydWU7CiAgICAgICAgICAgICAgLyogaWYgKCF0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcyB8fCAhdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcyA9IFtdDQogICAgICAgICAgICAgICAgICBsZXQgdG1wRm91bmRlciA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEZvdW5kZXIpDQogICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcy5wdXNoKHRtcEZvdW5kZXIpDQogICAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gOTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gOTsKICAgICAgICAgICAgcmV0dXJuIGNydWRBbmRMaXN0c1NlcnZpY2UuZ2V0QnlJZChNQUlOX0FQSV9VUkwsIF90aGlzOS4kcm91dGUucGFyYW1zLmlkLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuaXNZdXIgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJlcy5kYXRhLmlzWXVyID0gQm9vbGVhbighcmVzLmRhdGEucGluZmwgJiYgcmVzLmRhdGEuaW5uKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXM5LmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgcmVzLmRhdGEpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzOS5lZGl0aW5nSXRlbS5pbm4sIF90aGlzOS5lZGl0aW5nSXRlbSk7CiAgICAgICAgICAgICAgX3RoaXM5Lm9yaWdpbmFsSW5uID0gX3RoaXM5LmVkaXRpbmdJdGVtLmlubjsKICAgICAgICAgICAgICBfdGhpczkub3JpZ2luYWxQaW5mbCA9IF90aGlzOS5lZGl0aW5nSXRlbS5waW5mbDsKICAgICAgICAgICAgICBfdGhpczkub3JpZ2luYWxEdG8gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhKSk7CiAgICAgICAgICAgICAgLyogaWYgKCF0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcyB8fCAhdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcyA9IFtdDQogICAgICAgICAgICAgICAgICBsZXQgdG1wRm91bmRlciA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEZvdW5kZXIpDQogICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcy5wdXNoKHRtcEZvdW5kZXIpDQogICAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgICBpZiAoX3RoaXM5LmVkaXRpbmdJdGVtLnBhcmVudElkKSB7CiAgICAgICAgICAgICAgICB2YXIgcGFyZW50SWR4ID0gX3RoaXM5LmNvbnRyYWN0b3JzLmZpbmRJbmRleChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsLmlkID09IF90aGlzOS5lZGl0aW5nSXRlbS5wYXJlbnRJZDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKHBhcmVudElkeCA8IDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM5LmNvbnRyYWN0b3JzLnB1c2goX3RoaXM5LmVkaXRpbmdJdGVtLnBhcmVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgLy8gR0VUIFNUQVRVU0VTCiAgICAgICAgICAgIGhlbHBlclNlcnZpY2UuZ2V0UmVmQnlDb2RlKCdzdGF0dXMnLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczkuc3RhdHVzZXMgPSByZXMuZGF0YS5jaGlsZHJlbjsKICAgICAgICAgICAgICBpZiAoX3RoaXM5LmlzTW9kZUNyZWF0ZSkgewogICAgICAgICAgICAgICAgX3RoaXM5LnNldERlZmF1bHRBY3RpdmVTdGF0dXMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyBHRVQgUkVHSU9OUwogICAgICAgICAgICBoZWxwZXJTZXJ2aWNlLmZldGNoUmVnaW9ucyh0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczkucmVnaW9ucyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIF90aGlzOS5yZWdpb25TZWxlY3RlZChfdGhpczkuZWRpdGluZ0l0ZW0uYWRkcmVzc0R0by5yZWdpb25JZCwgdHJ1ZSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyBHRVQgRk9STV9PRl9PV05FUlNISVAKICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0KCdkaXJlY3RvcnkvZm9ybS1vZi1vd25lcnNoaXBzJywgX3RoaXM5LnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLCBudWxsLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczkuZm9ybU9mT3duZXJzaGlwcyA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTgpOwogICAgfSkpKCk7CiAgfSwKICB3YXRjaDogewogICAgJ2VkaXRpbmdJdGVtLmlzWXVyJzogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgICAgY29uc29sZS5sb2cobmV3VmFsLCBvbGRWYWwpOwogICAgICAgIGlmIChuZXdWYWwgIT09IG9sZFZhbCkgewogICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IHsKICAgICAgICAgICAgaXNZdXI6IG5ld1ZhbCwKICAgICAgICAgICAgYWRkcmVzc0R0bzoge30sCiAgICAgICAgICAgIGZvdW5kZXJzRHRvczogW10KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;AA0VA;AACA;AACA;AACA;AACA;EACAA;EACA;EACAC;IACAC;MACAC;MACAC;IACA;EACA;EACA;EACAC;EACA,WACAC;IACA;MACAC,iBACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAA;QACAJ;MACA,GACA;QACAI;QACAJ;MACA,GACA;QACAI;QACAJ;MACA,GACA;QACAI;QACAJ;MACA,GACA;QACAI;QACAJ;MACA,GACA;QACAI;QACAJ;MACA,EACA;MACAK;QACAC;QACAC;MACA;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAf;QACAC;MACA;MACAe;QACAC;QACAC;MACA;IACA;EACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACA;UACA;YAAA;YACA;cACAC;cACAC;cACAC;cACAC;cACArC;cACAsC;cACAC;cACAC;YACA;UACA;UACA;YAAA;YACA;cACAN;cACAC;cACAC;cACAC;cACArC;cACAsC;cACAC;cACAC;YACA;UACA;QACA;MACA;MACA;IACA;EACA;EACA;EACAC;IACA;IACAC;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACAC;cACA;gBAAA;kBAAA;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;QAAA;MAAA;MACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACA;cACA;cACA;cACA;cAAA;cAAA,OACAC,qIACAC;gBAAA;gBACA;gBACA;gBACA;gBACA;kBACA;gBACA;cACA,GACAC;gBACAC;gBACA;cACA,GACAC;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QAAA;MAAA;MACA;QACA;MACA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAAC;cACA;gBACA;cACA;cACA;cAAA,KACAC;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACAC,gDACAV;gBACA;cACA,GACAC;gBACAC;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAS;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACAD;YAAA;cAAAE;cACA;gBACA;kBAAAC;gBAAA;cACA;cAAA,kCACAD;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAE;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;gBACA;kBAAAC;gBAAA;cACA;cACA;gBACA;kBAAAA;gBAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MACA;QACA;UACAC;UACAC;UACAC;UACAC;UACAC;UACA/B;UACAC;UACAL;UACAoC;UACAnC;UACAE;UACAD;QACA;QACA;UACA;QACA;MACA;MACA;IACA;IACAmC;MAAA;MACA,4CACAb,6DACAV;QACA;UACA;UACA;YACAU,gIACAV;cACA;cACA;cACA;cACA;cACA;cACA;cACA;gBACA;cACA;gBACA;cACA;YACA,GACAC;cACA;YAAA,CACA;UACA;YACAS,gIACAV;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;gBACA;cACA;gBACA;cACA;YACA,GACAC;cACA;YAAA,CACA;UACA;QACA;UACA;YAAAY;UAAA;QACA;MACA,GACAZ;QACAC;MACA;IACA;IACAsB;MAAA;MACA,8CACA;QACA;QACAd,0HACAV;UAAA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YACA;UACA;YACA;UACA;QACA,GACAC,oBACA;MACA;QACAS,0HACAV;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YACA;UACA;YACA;UACA;QACA,GACAC;UACA;QAAA,CACA;MACA;IACA;IACAwB;MACA;QAAA;MAAA;MACA;QACA;UACAC;UACAC;UACAC;QACA;MAEA;MACA;IACA;IACAC;MACA;QAAA;MAAA;MACA;QACA;UACAH;UACAC;UACAC;QACA;MAEA;MACA;IACA;IACAE;MACA;QAAA;MAAA;MACA;QACA;UACAJ;UACAC;UACAC;QACA;MAEA;MACA;IACA;IACAG;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;YAAA;cAAAC;cAAA,IACAA;gBAAA;gBAAA;cAAA;cAAA;YAAA;cAGA;gBACA;kBACA;oBACA;sBACA;oBACA;kBACA;kBACA;oBACA;oBACAjC;sBACA;sBACA;wBAAArC;sBAAA;sBACA;sBACA;wBAAAX;sBAAA;sBACA;oBACA;kBACA;oBACAgD;sBACA;sBACA;wBAAArC;sBAAA;sBACA;wBAAAX;sBAAA;sBACA;oBACA;kBACA;gBACA;kBACA;oBAAAA;kBAAA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;EACA;EACA,cACAkF;IAAA;IAAA;MAAA;QAAA;UAAA;YACA;YACA;YACA;YACA;YACA;YAAA,KACA;cAAA;cAAA;YAAA;YACAlC,uDACAC;cACA;cACA;cACA;AACA;AACA;AACA;AACA;YACA,GACAC;cACAC;YACA;YAAA;YAAA;UAAA;YAAA;YAAA,OAEAH,yEACAC;cACA;gBACAY;cACA;cACA;cACAV;cACA;cACA;cACA;cACA;AACA;AACA;AACA;AACA;cACA;gBACA;kBAAA;gBAAA;gBACA;kBACA;gBACA;cACA;YACA,GACAD;cACAC;YACA;UAAA;YAEA;YACAQ,2CACAV;cACA;cACA;gBACA;cACA;YACA,GACAC;cACAC;YACA;YACA;YACAQ,iCACAV;cACA;cACA;YACA,GACAC;cACAC;YACA;YACA;YACAH,oBACAmC,0FACAlC;cACA;YACA,GACAC;cACAC;YACA;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EACA;EACAiC;IACA;MACAC;QACAlC;QACA;UACA;YACAzB;YACAf;YACAC;UACA;QACA;MACA;MACA0E;IACA;EACA;AACA","names":["name","props","customIsModeCreate","type","default","components","data","foundersFields","label","thClass","tdClass","sortable","key","originalDto","addressDto","foundersDtos","originalInn","originalPinfl","hasNextPageContractors","contractors","debounce","isLoadingContractors","contractorCreateModal","contractorSearchPayload","formOfOwnerships","regions","districts","statuses","editingItem","isYur","defaultFounder","founderName","percentage","computed","isModeCreate","computedObserver","computedFoundersDtos","index","fullName","inn","pnfl","isLegal","founderSharePercent","founderShareSum","methods","contractorReachedEndOfList","debounceSearchContractors","clearTimeout","customLabelContractor","fetchContractorsWithKeyword","fetchContractors","crudAndListsService","then","catch","console","finally","newRefCreated","addFounderDto","setDefaultActiveStatus","regionSelected","dontResetDistrict","$event","helperService","validateInn","res","INN","validatePinfl","pinfl","setFoundersFromSoliq","contractorId","founderAddressId","founderContactId","founderIndividualId","founderLegalId","id","findContractorByInn","findContractorByPinfl","customLabelDistrict","nameRu","nameLt","nameUz","customLabelRegion","customLabelFormOfOwnership","save","isInnValid","created","searchList","watch","handler","deep"],"sourceRoot":"src/shared/views/components","sources":["CreateFormContractor.vue"],"sourcesContent":["<template>\r\n  <ValidationObserver ref=\"observer\" v-slot=\"{}\" >\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\" class=\"mb-4 text-bold\">\r\n        <div class=\"base-input-wrapper base-form-input base-form-component\">\r\n          <label class=\"base-form-component__label\" :class=\"{'font-weight-bold': !editingItem.isYur}\">\r\n            {{ $t('column.yatt_contragent') }}\r\n          </label>\r\n          <b-form-checkbox v-model=\"editingItem.isYur\" switch>\r\n            <span :class=\"{'font-weight-bold': editingItem.isYur}\">\r\n              {{ $t('column.legal_contragent') }}\r\n            </span>\r\n          </b-form-checkbox>\r\n        </div>\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            v-show=\"editingItem.isYur\"\r\n            v-model=\"editingItem.inn\"\r\n            name=\"INN\"\r\n            mask=\"#########\"\r\n            class=\"required\"\r\n            placeholder=\"123456789\"\r\n            with-input-append\r\n            :rules=\"{required: editingItem.isYur, regex: /\\b\\d{9}\\b/}\"\r\n            :label=\"$t('column.inn')\"\r\n            @blur=\"validateInn\"\r\n            @keyup.enter=\"findContractorByInn\"\r\n        >\r\n          <template v-slot:append-slot>\r\n            <b-button\r\n                @click=\"findContractorByInn\"\r\n                variant=\"outline-primary\"\r\n                id=\"contractorSearchButton\"\r\n                style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n            >\r\n              <i class=\"mdi mdi-account-search\"></i>\r\n            </b-button>\r\n          </template>\r\n        </BaseInputWithValidation>\r\n        <BaseInputWithValidation\r\n            v-show=\"!editingItem.isYur\"\r\n            v-model=\"editingItem.pinfl\"\r\n            name=\"PINFL\"\r\n            mask=\"##############\"\r\n            class=\"required\"\r\n            placeholder=\"12345678901234\"\r\n            with-input-append\r\n            :rules=\"{required: !editingItem.isYur, regex: /\\b\\d{14}\\b/}\"\r\n            :label=\"$t('column.personal_number')\"\r\n            @blur=\"validatePinfl\"\r\n            @keyup.enter=\"findContractorByPinfl\"\r\n        >\r\n          <template v-slot:append-slot>\r\n            <b-button\r\n                @click=\"findContractorByPinfl\"\r\n                variant=\"outline-primary\"\r\n                id=\"contractorSearchButton\"\r\n                style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n            >\r\n              <i class=\"mdi mdi-account-search\"></i>\r\n            </b-button>\r\n          </template>\r\n        </BaseInputWithValidation>\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <!-- PARENT -->\r\n        <BaseMultiselectWithValidation\r\n            not-required\r\n            v-model=\"editingItem.parentId\"\r\n            :has-next-page=\"hasNextPageContractors\"\r\n            @reachedEndOfList=\"contractorReachedEndOfList\"\r\n            @search-change=\"debounceSearchContractors\"\r\n            :searchable=\"true\"\r\n            preserve-search\r\n            :clear-on-select=\"false\"\r\n            :loading=\"isLoadingContractors\"\r\n            :internal-search=\"false\"\r\n            :options=\"contractors.map(e => e.id)\"\r\n            :label=\"$t('column.superior_parent')\"\r\n            :placeholder=\"$t('column.contractor')\"\r\n            :custom-label=\"customLabelContractor\"\r\n            open-direction=\"bottom\"\r\n            :max-height=\"600\"\r\n            :show-labels=\"false\"\r\n            with-create-addition\r\n        >\r\n          <template v-slot:append-slot>\r\n            <b-button\r\n                @click=\"contractorCreateModal = true\"\r\n                variant=\"outline-primary\"\r\n                style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n            >\r\n              <i class=\"mdi mdi-plus-circle\"></i>\r\n            </b-button>\r\n          </template>\r\n        </BaseMultiselectWithValidation>\r\n        <BaseModalForCreate\r\n            v-model=\"contractorCreateModal\"\r\n            without-list-search\r\n            use-component-save-fn\r\n            mainApiUrl=\"contractor\"\r\n            createFormName=\"CreateFormContractor\"\r\n            @new-ref-created-without-list-search=\"newRefCreated\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            rules=\"required\"\r\n            v-model=\"editingItem.fullName\"\r\n            :label=\"$t('column.full_name')\"\r\n            :placeholder=\"$t('column.full_name')\"\r\n            class=\"required\"\r\n        />\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            rules=\"required\"\r\n            v-model=\"editingItem.shortname\"\r\n            :label=\"$t('column.short_name')\"\r\n            :placeholder=\"$t('column.short_name')\"\r\n            class=\"required\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            rules=\"required\"\r\n            v-model=\"editingItem.director\"\r\n            :label=\"$t('column.director')\"\r\n            :placeholder=\"$t('column.director')\"\r\n            class=\"required\"\r\n        />\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.accounter\"\r\n            :label=\"$t('column.accounter')\"\r\n            :placeholder=\"$t('column.accounter')\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            :rules=\"{required: false, regex: /\\b\\d{5}\\b/}\"\r\n            class=\"\"\r\n            v-model=\"editingItem.oked\"\r\n            mask=\"#####\"\r\n            :label=\"$t('column.oked')\"\r\n            placeholder=\"12345\"\r\n        />\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.vatCode\"\r\n            :label=\"$t('column.vat_code')\"\r\n            :placeholder=\"$t('column.vat_code')\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseMultiselectWithValidation\r\n            rules=\"required\"\r\n            class=\"required\"\r\n            v-model=\"editingItem.addressDto.regionId\"\r\n            @select=\"regionSelected\"\r\n            :options=\"regions.map(e => e.id)\"\r\n            :label=\"$t('column.region')\"\r\n            :custom-label=\"customLabelRegion\"\r\n            :placeholder=\"$t('column.region')\"\r\n            open-direction=\"bottom\"\r\n            :max-height=\"600\"\r\n            :show-labels=\"false\"\r\n        />\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseMultiselectWithValidation\r\n            rules=\"required\"\r\n            class=\"required\"\r\n            v-model=\"editingItem.addressDto.districtId\"\r\n            :options=\"districts.map(e => e.id)\"\r\n            :label=\"$t('column.district')\"\r\n            :custom-label=\"customLabelDistrict\"\r\n            :placeholder=\"$t('column.district')\"\r\n            open-direction=\"bottom\"\r\n            :max-height=\"600\"\r\n            :show-labels=\"false\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.address\"\r\n            :label=\"$t('column.address')\"\r\n            :placeholder=\"$t('column.address')\"\r\n        />\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.mobileNumber\"\r\n            :label=\"$t('column.mobile_number')\"\r\n            mask=\"+998#########\"\r\n            placeholder=\"+998#########\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseMultiselectWithValidation\r\n            not-required\r\n            v-model=\"editingItem.formOfOwnershipId\"\r\n            :options=\"formOfOwnerships.map(e => e.id)\"\r\n            :label=\"$t('submodules.form_of_ownership.title')\"\r\n            :custom-label=\"customLabelFormOfOwnership\"\r\n            placeholder=\"\"\r\n            open-direction=\"bottom\"\r\n            :max-height=\"600\"\r\n            :show-labels=\"false\"\r\n        />\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\">\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.faxNumber\"\r\n            :label=\"$t('column.fax_number')\"\r\n            :placeholder=\"$t('column.fax_number')\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\" >\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.phoneNumber\"\r\n            :label=\"$t('column.phone_number')\"\r\n            mask=\"+998#########\"\r\n            placeholder=\"+998#########\"\r\n        />\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\" >\r\n        <BaseInputWithValidation\r\n            rules=\"email\"\r\n            v-model=\"editingItem.email\"\r\n            :label=\"$t('column.mail')\"\r\n            :placeholder=\"$t('column.mail')\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col sm=\"12\" md=\"6\" >\r\n        <!-- STATUS -->\r\n        <BaseSelectWithValidation\r\n            v-model=\"editingItem.statusId\"\r\n            class=\"required\"\r\n            rules=\"required\"\r\n            :label=\"$t('column.status')\"\r\n            value-field=\"id\"\r\n        >\r\n          <template #first>\r\n            <b-form-select-option :value=\"null\" disabled >{{ $t('column.status') }}</b-form-select-option>\r\n            <b-form-select-option v-for=\"(status, index) in statuses\" :key=\"`${status}-${index}`\" :value=\"status.id\" >\r\n              {{\r\n                getName({\r\n                  nameRu: status.nameRu,\r\n                  nameLt: status.nameLt,\r\n                  nameUz: status.nameUz,\r\n                })\r\n              }}\r\n            </b-form-select-option>\r\n          </template>\r\n        </BaseSelectWithValidation>\r\n      </b-col>\r\n      <b-col sm=\"12\" md=\"6\" >\r\n        <div class=\"form-check form-check-right\">\r\n          <input\r\n              v-model=\"editingItem.canRegister\"\r\n              class=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              id=\"formCheckIsLegal\"\r\n          />\r\n          <label\r\n              class=\"form-check-label font-weight-normal\"\r\n              for=\"formCheckIsLegal\"\r\n          >\r\n            {{ $t('column.can_login') }}\r\n          </label>\r\n        </div>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row class=\"mb-3\">\r\n      <b-col cols=\"12\">\r\n        <h5 class=\"m-0 text-center\">\r\n          {{ $t('column.founders') }}\r\n        </h5>\r\n        <hr class=\"my-2\">\r\n        <b-table\r\n            :items=\"computedFoundersDtos\"\r\n            :fields=\"foundersFields\"\r\n            sticky-header=\"400px\"\r\n            bordered\r\n            small\r\n            hover\r\n            show-empty\r\n            striped\r\n        >\r\n          <!-- NUMBER OF ITEM -->\r\n          <template #cell(index)=\"data\">\r\n            {{\r\n              data.index + 1\r\n            }}\r\n          </template>\r\n          <!-- FOUNDER_SHARE_SUM -->\r\n          <template #cell(founderShareSum)=\"data\">\r\n            {{ data.item.founderShareSum | toCurrency }}\r\n          </template>\r\n          <!-- TYPE -->\r\n          <template #cell(type)=\"data\">\r\n            <b-badge\r\n                :variant=\"data.item.isLegal ? 'primary' : 'success'\"\r\n                class=\"font-weight-bold\"\r\n                style=\"font-size: .7rem;\"\r\n            >{{ data.item.isLegal ? $t('column.legal_entity') : $t('column.individual') }}\r\n            </b-badge>\r\n          </template>\r\n          <!-- EMPTY SLOT -->\r\n          <template #empty=\"\">\r\n            <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n          </template>\r\n        </b-table>\r\n      </b-col>\r\n    </b-row>\r\n  </ValidationObserver>\r\n</template>\r\n<script>\r\n/** YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport helperService from \"@/shared/services/helper.service\"\r\nconst MAIN_API_URL = 'contractor'\r\nexport default {\r\n  name: \"CreateFormContractor\",\r\n  /** PROPS */\r\n  props: {\r\n    customIsModeCreate: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  /** COMPONENTS */\r\n  components: {},\r\n  /** DATA */\r\n  data() {\r\n    return {\r\n      foundersFields: [\r\n        {\r\n          label: \"#\",\r\n          thClass: \"text-center\",\r\n          tdClass: \"text-center\",\r\n          sortable: false,\r\n          key: \"index\",\r\n        },\r\n        {\r\n          key: 'fullName',\r\n          label: this.$t('column.name'),\r\n        },\r\n        {\r\n          key: 'inn',\r\n          label: this.$t('column.inn'),\r\n        },\r\n        {\r\n          key: 'pnfl',\r\n          label: this.$t('column.personal_number'),\r\n        },\r\n        {\r\n          key: 'type',\r\n          label: this.$t('column.type'),\r\n        },\r\n        {\r\n          key: 'founderSharePercent',\r\n          label: this.$t('column.share_percentage'),\r\n        },\r\n        {\r\n          key: 'founderShareSum',\r\n          label: this.$t('column.share_sum'),\r\n        },\r\n      ],\r\n      originalDto: {\r\n        addressDto: {},\r\n        foundersDtos: []\r\n      },\r\n      originalInn: null,\r\n      originalPinfl: null,\r\n      // CONTRACTOR SELECT_AND_CREATE VARS\r\n      hasNextPageContractors: false,\r\n      contractors: [],\r\n      debounce: null,\r\n      isLoadingContractors: false,\r\n      contractorCreateModal: false,\r\n      contractorSearchPayload: {},\r\n      // ---------------------------------\r\n      formOfOwnerships: [],\r\n      regions: [],\r\n      districts: [],\r\n      statuses: [],\r\n      editingItem: {\r\n        isYur: true,\r\n        addressDto: {},\r\n        foundersDtos: []\r\n      },\r\n      defaultFounder: {\r\n        founderName: null,\r\n        percentage: null\r\n      }\r\n    }\r\n  },\r\n  /** COMPUTED */\r\n  computed: {\r\n    isModeCreate() {\r\n      return this.customIsModeCreate ? this.customIsModeCreate : this.$route.name === 'CreateContractor'\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    },\r\n    computedFoundersDtos(){\r\n      if (this.editingItem.regContractorDto?.founders?.length > 0) {\r\n        return this.editingItem.regContractorDto.founders.map((founder, index) => {\r\n          if (founder.founderIndividual) {\r\n            return {\r\n              index: index,\r\n              fullName: `${founder.founderIndividual.lastName} ${founder.founderIndividual.firstName} ${founder.founderIndividual.middleName}`,\r\n              inn: founder.founderIndividual.tin ?? null,\r\n              pnfl: founder.founderIndividual.pinfl ?? null,\r\n              type: null,\r\n              isLegal: false,\r\n              founderSharePercent: founder.founderIndividual?.founderSharePercent ?? null,\r\n              founderShareSum: founder.founderIndividual?.founderShareSum ?? null,\r\n            }\r\n          }\r\n          if (founder.founderLegal) {\r\n            return {\r\n              index: index,\r\n              fullName: founder.founderLegal?.name ?? null,\r\n              inn: founder.founderLegal?.tin ?? null,\r\n              pnfl: null,\r\n              type: null,\r\n              isLegal: true,\r\n              founderSharePercent: founder.founderLegal?.founderSharePercent ?? null,\r\n              founderShareSum: founder.founderLegal?.founderShareSum ?? null,\r\n            }\r\n          }\r\n        })\r\n      }\r\n      return this.editingItem.foundersDtos\r\n    },\r\n  },\r\n  /** METHODS */\r\n  methods: {\r\n    // CONTRACTOR SELECT_AND_CREATE METHODS\r\n    contractorReachedEndOfList(e) {\r\n      if (e && !this.isLoadingContractors) {\r\n        this.fetchContractors()\r\n      }\r\n    },\r\n    async debounceSearchContractors(searchText) {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(async () => {\r\n        await this.fetchContractorsWithKeyword(searchText);\r\n      }, 1000);\r\n    },\r\n    customLabelContractor(opt) {\r\n      let selected = this.contractors.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${selected.fullName}`\r\n      }\r\n      return ``;\r\n    },\r\n    fetchContractorsWithKeyword(keyword, makeFirstSelected = false) {\r\n      this.contractors = []\r\n      this.contractorSearchPayload.page = 1\r\n      this.contractorSearchPayload.keyword = keyword ? keyword : ''\r\n      this.fetchContractors(makeFirstSelected)\r\n    },\r\n    async fetchContractors(makeFirstSelected) {\r\n      this.contractorSearchPayload.sortBy = []\r\n      this.contractorSearchPayload.sortBy.push('created')\r\n      this.contractorSearchPayload.sortDesc = []\r\n      this.contractorSearchPayload.sortDesc.push(true)\r\n      this.isLoadingContractors = true\r\n      await crudAndListsService.searchListWithKeyword('contractor', this.contractorSearchPayload, 'by-contractor', !this.customIsModeCreate)\r\n          .then(res => {\r\n            this.contractors.push(...res.data.list)\r\n            this.hasNextPageContractors = res.data.total / this.contractorSearchPayload.itemsPerPage > this.contractorSearchPayload.page\r\n            this.contractorSearchPayload.page += 1\r\n            if (makeFirstSelected) {\r\n              this.editingItem.parentId = this.contractors.length ? this.contractors[0].id : null\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n            this.contractors = []\r\n          })\r\n          .finally(() => {\r\n            this.isLoadingContractors = false\r\n          })\r\n    },\r\n    newRefCreated(formName) {\r\n      if (formName === 'CreateFormContractor') {\r\n        this.fetchContractorsWithKeyword('', true)\r\n      }\r\n    },\r\n    // ------------------------------------\r\n    addFounderDto() {\r\n      let tmp = Object.assign({}, this.defaultFounder)\r\n      this.editingItem.foundersDtos.push(tmp)\r\n    },\r\n    setDefaultActiveStatus() {\r\n      let activeStatus = this.statuses.find(el => el.code === 'ACTIVE')\r\n      if (activeStatus) {\r\n        this.editingItem.statusId = activeStatus.id\r\n      }\r\n    },\r\n    async regionSelected($event, dontResetDistrict = false) {\r\n      if (!dontResetDistrict) {\r\n        this.editingItem.addressDto.districtId = null\r\n      }\r\n      // GET DISTRICTS\r\n      if ($event)\r\n        await helperService.getGeoLocationsByParentId($event)\r\n            .then(res => {\r\n              this.districts = res.data\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n            })\r\n    },\r\n    async validateInn() {\r\n      let res = await helperService.validateInnFromApi(this.editingItem.inn)\r\n      if (!res.data) {\r\n        this.computedObserver.setErrors({INN: [this.$t('validator.inn')]});\r\n      }\r\n      return res.data\r\n    },\r\n    async validatePinfl() {\r\n      if (!this.editingItem.pinfl) {\r\n        this.computedObserver.setErrors({pinfl: [this.$t('validator.required')]});\r\n      }\r\n      if (this.editingItem.pinfl.length !== 14) {\r\n        this.computedObserver.setErrors({pinfl: [this.$t('validator.regex')]});\r\n      }\r\n    },\r\n    setFoundersFromSoliq(foundersFromSoliq = []) {\r\n      let foundersDtos = foundersFromSoliq.filter(el => {\r\n        let founderDto = {\r\n          contractorId: null,\r\n          founderAddressId: null,\r\n          founderContactId: null,\r\n          founderIndividualId: null,\r\n          founderLegalId: null,\r\n          founderSharePercent: el.founderIndividual ? el.founderIndividual.founderSharePercent : el.founderLegal ? el.founderLegal.founderSharePercent : null,\r\n          founderShareSum: el.founderIndividual ? el.founderIndividual.founderShareSum : el.founderLegal ? el.founderLegal.founderShareSum : null,\r\n          fullName: el.founderLegal ? el.founderLegal.name : el.founderIndividual ? `${el.founderIndividual.firstName} ${el.founderIndividual.lastName} ${el.founderIndividual.middleName ? el.founderIndividual.middleName : ''}` : null,\r\n          id: null,\r\n          inn: el.founderLegal ? el.founderLegal.tin : el.founderIndividual ? el.founderIndividual.tin : null,\r\n          isLegal: el.founderLegal ? true : el.founderIndividual ? false : null,\r\n          pnfl: el.founderIndividual ? el.founderIndividual.pinfl : null,\r\n        }\r\n        if (founderDto.inn) {\r\n          return founderDto\r\n        }\r\n      })\r\n      this.$set(this.editingItem, 'foundersDtos', foundersDtos);\r\n    },\r\n    findContractorByInn() {\r\n      if (this.computedObserver.fields.INN.valid)\r\n        helperService.validateInnFromApi(this.editingItem.inn, true)\r\n            .then(res => {\r\n              if (res.data) {\r\n                let isYur = this.editingItem.isYur;\r\n                if (this.editingItem.inn != this.originalInn) {\r\n                  helperService.getContractorInfoByInnForCreate(this.editingItem.inn, this.editingItem.pinfl, this.editingItem.isYur, true)\r\n                      .then(res => {\r\n                        this.editingItem = Object.assign({}, res.data)\r\n                        this.editingItem.isYur = isYur\r\n                        this.setDefaultActiveStatus()\r\n                        // FETCH DISTRICTS\r\n                        this.regionSelected(this.editingItem.addressDto.regionId, true)\r\n                        // CHECK AND SET FOUNDERS FROM SOLIQ\r\n                        if (res.data.regContractorDto && res.data.regContractorDto.founders) {\r\n                          this.setFoundersFromSoliq(res.data.regContractorDto.founders)\r\n                        } else {\r\n                          this.setFoundersFromSoliq()\r\n                        }\r\n                      })\r\n                      .catch(e => {\r\n                        // this.computedObserver.setErrors({ INN: [this.$t('validator.inn_exist')] });\r\n                      })\r\n                } else {\r\n                  helperService.getContractorInfoByInnForUpdate(this.editingItem.inn, this.editingItem.pinfl, this.editingItem.isYur, true)\r\n                      .then(res => {\r\n                        this.editingItem = Object.assign({}, res.data)\r\n                        this.editingItem.isYur = isYur\r\n                        this.$set(this.editingItem, 'addressDto', this.originalDto.addressDto)\r\n                        this.$set(this.editingItem, 'mobileNumber', this.originalDto.mobileNumber)\r\n                        this.$set(this.editingItem, 'email', this.originalDto.email)\r\n                        this.$set(this.editingItem, 'canRegister', this.originalDto.canRegister)\r\n                        this.setDefaultActiveStatus()\r\n                        // FETCH DISTRICTS\r\n                        this.regionSelected(this.editingItem.addressDto.regionId, true)\r\n                        // CHECK AND SET FOUNDERS FROM SOLIQ\r\n                        if (res.data.regContractorDto && res.data.regContractorDto.founders) {\r\n                          this.setFoundersFromSoliq(res.data.regContractorDto.founders)\r\n                        } else {\r\n                          this.setFoundersFromSoliq()\r\n                        }\r\n                      })\r\n                      .catch(e => {\r\n                        // this.computedObserver.setErrors({ INN: [this.$t('validator.inn_exist')] });\r\n                      })\r\n                }\r\n              } else {\r\n                this.computedObserver.setErrors({INN: [this.$t('validator.inn')]});\r\n              }\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n            })\r\n    },\r\n    findContractorByPinfl() {\r\n      if (this.computedObserver.fields.PINFL.valid)\r\n        if (this.editingItem.pinfl !== this.originalPinfl) {\r\n          let isYur = this.editingItem.isYur;\r\n          helperService.getContractorInfoByInnForCreate(this.editingItem.inn, this.editingItem.pinfl, this.editingItem.isYur, true)\r\n              .then(({ data }) => {\r\n                this.editingItem = Object.assign({}, data)\r\n                this.editingItem.isYur = isYur\r\n                this.setDefaultActiveStatus()\r\n                // FETCH DISTRICTS\r\n                this.regionSelected(this.editingItem.addressDto.regionId, true)\r\n                // CHECK AND SET FOUNDERS FROM SOLIQ\r\n                if (data.regContractorDto && data.regContractorDto.founders) {\r\n                  this.setFoundersFromSoliq(data.regContractorDto.founders)\r\n                } else {\r\n                  this.setFoundersFromSoliq()\r\n                }\r\n              })\r\n              .catch(e => {\r\n              })\r\n        } else {\r\n          helperService.getContractorInfoByInnForUpdate(this.editingItem.inn, this.editingItem.pinfl, this.editingItem.isYur, true)\r\n              .then(res => {\r\n                this.editingItem = Object.assign({}, res.data)\r\n                this.editingItem.isYur = isYur\r\n                this.$set(this.editingItem, 'addressDto', this.originalDto.addressDto)\r\n                this.$set(this.editingItem, 'mobileNumber', this.originalDto.mobileNumber)\r\n                this.$set(this.editingItem, 'email', this.originalDto.email)\r\n                this.$set(this.editingItem, 'canRegister', this.originalDto.canRegister)\r\n                this.setDefaultActiveStatus()\r\n                // FETCH DISTRICTS\r\n                this.regionSelected(this.editingItem.addressDto.regionId, true)\r\n                // CHECK AND SET FOUNDERS FROM SOLIQ\r\n                if (res.data.regContractorDto && res.data.regContractorDto.founders) {\r\n                  this.setFoundersFromSoliq(res.data.regContractorDto.founders)\r\n                } else {\r\n                  this.setFoundersFromSoliq()\r\n                }\r\n              })\r\n              .catch(e => {\r\n                // this.computedObserver.setErrors({ INN: [this.$t('validator.inn_exist')] });\r\n              })\r\n        }\r\n    },\r\n    customLabelDistrict(opt) {\r\n      let selectedDistrict = this.districts.find(e => e.id == opt);\r\n      if (selectedDistrict) {\r\n        return `${this.getName({\r\n          nameRu: selectedDistrict.nameRu,\r\n          nameLt: selectedDistrict.nameLt,\r\n          nameUz: selectedDistrict.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelRegion(opt) {\r\n      let selectedRegion = this.regions.find(e => e.id == opt);\r\n      if (selectedRegion) {\r\n        return `${this.getName({\r\n          nameRu: selectedRegion.nameRu,\r\n          nameLt: selectedRegion.nameLt,\r\n          nameUz: selectedRegion.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelFormOfOwnership(opt) {\r\n      let selected = this.formOfOwnerships.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    async save() {\r\n      let isInnValid = await this.validateInn()\r\n      if (!isInnValid) {\r\n        return\r\n      }\r\n      this.computedObserver.validate().then(valid => {\r\n        if (valid) {\r\n          if (this.editingItem.foundersDtos) {\r\n            this.editingItem.foundersDtos = this.editingItem.foundersDtos.filter(el => {\r\n              return el.founderName && el.founderName.toString().trim().length && el.percentage\r\n            })\r\n          }\r\n          if (!this.isModeCreate) {\r\n            this.editingItem.id = this.$route.params.id.toString()\r\n            crudAndListsService.update(MAIN_API_URL, this.editingItem, null, true).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {addressDto: {}});\r\n              // this.$router.go(-1)\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n              this.$emit('saved', res.data)\r\n            })\r\n          } else {\r\n            crudAndListsService.create(MAIN_API_URL, this.editingItem, null, true).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {addressDto: {}});\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n              this.$emit('saved', res.data)\r\n            })\r\n          }\r\n        } else {\r\n          this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n        }\r\n      });\r\n    }\r\n  },\r\n  /** CREATED */\r\n  async created() {\r\n    // FOR CONTRACTOR SELECT_AND_ADD\r\n    this.contractorSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n    this.fetchContractors()\r\n    // -----------------------------\r\n    this.var_default_search_payload.itemsPerPage = 500\r\n    if (this.isModeCreate) {\r\n      crudAndListsService.getEmpty(MAIN_API_URL, null, true)\r\n          .then(res => {\r\n            this.editingItem = Object.assign({}, res.data)\r\n            this.editingItem.isYur = true;\r\n            /* if (!this.editingItem.foundersDtos || !this.editingItem.foundersDtos.length) {\r\n                this.editingItem.foundersDtos = []\r\n                let tmpFounder = Object.assign({}, this.defaultFounder)\r\n                this.editingItem.foundersDtos.push(tmpFounder)\r\n            } */\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    } else {\r\n      await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, true)\r\n          .then(res => {\r\n            if (res.data.isYur === null) {\r\n              res.data.isYur = Boolean(!res.data.pinfl && res.data.inn);\r\n            }\r\n            this.editingItem = Object.assign({}, res.data)\r\n            console.log(this.editingItem.inn, this.editingItem)\r\n            this.originalInn = this.editingItem.inn\r\n            this.originalPinfl = this.editingItem.pinfl\r\n            this.originalDto = JSON.parse(JSON.stringify(res.data))\r\n            /* if (!this.editingItem.foundersDtos || !this.editingItem.foundersDtos.length) {\r\n                this.editingItem.foundersDtos = []\r\n                let tmpFounder = Object.assign({}, this.defaultFounder)\r\n                this.editingItem.foundersDtos.push(tmpFounder)\r\n            } */\r\n            if (this.editingItem.parentId) {\r\n              let parentIdx = this.contractors.findIndex(el => el.id == this.editingItem.parentId)\r\n              if (parentIdx < 0) {\r\n                this.contractors.push(this.editingItem.parent)\r\n              }\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    }\r\n    // GET STATUSES\r\n    helperService.getRefByCode('status', true)\r\n        .then(res => {\r\n          this.statuses = res.data.children\r\n          if (this.isModeCreate) {\r\n            this.setDefaultActiveStatus()\r\n          }\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n    // GET REGIONS\r\n    helperService.fetchRegions(true)\r\n        .then(res => {\r\n          this.regions = res.data\r\n          this.regionSelected(this.editingItem.addressDto.regionId, true)\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n    // GET FORM_OF_OWNERSHIP\r\n    crudAndListsService\r\n        .searchList('directory/form-of-ownerships', this.var_default_search_payload, null, true)\r\n        .then((res) => {\r\n          this.formOfOwnerships = res.data.list;\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n  },\r\n  watch: {\r\n    'editingItem.isYur': {\r\n      handler(newVal, oldVal){\r\n        console.log(newVal, oldVal)\r\n        if ( newVal !== oldVal) {\r\n          this.editingItem = {\r\n            isYur: newVal,\r\n            addressDto: {},\r\n            foundersDtos: []\r\n          }\r\n        }\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n.col-form-label {\r\n  padding-top: 0;\r\n}\r\nul {\r\n  list-style-type: none;\r\n}\r\n</style>"]}]}