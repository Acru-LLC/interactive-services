{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\e-auction-info\\CreateOrUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\e-auction-info\\CreateOrUpdate.vue","mtime":1682419536604},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CnZhciBNQUlOX0FQSV9VUkwgPSAnZS1hdWN0aW9uLWluZm8nOwppbXBvcnQgQmFzZVNlbGVjdFdpdGhWYWxpZGF0aW9uIGZyb20gIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvYmFzZS9CYXNlU2VsZWN0V2l0aFZhbGlkYXRpb24udnVlIjsKaW1wb3J0IGFwaVNlcnZpY2UgZnJvbSAiLi4vLi4vLi4vLi4vc2hhcmVkL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsKaW1wb3J0IHN0YXRpc3RpY3NTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2ludGVncmF0aW9uL3N0YXRpc3RpY3Muc2VydmljZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ3JlYXRlT3JVcGRhdGUiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhOiB7CiAgICAgICAgYXVjdGlvbl9kYXRlOiBudWxsLAogICAgICAgIHNvYXRvOiBudWxsLAogICAgICAgIGFyZWFfc29hdG86ICIiCiAgICAgIH0sCiAgICAgIGRpc3RyaWN0czogW10sCiAgICAgIHJlZ2lvbnM6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzTW9kZUNyZWF0ZTogZnVuY3Rpb24gaXNNb2RlQ3JlYXRlKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gIkludGVncmF0aW9uRUF1Y3Rpb25JbmZvQ3JlYXRlIjsKICAgIH0sCiAgICBjb21wdXRlZE9ic2VydmVyOiBmdW5jdGlvbiBjb21wdXRlZE9ic2VydmVyKCkgewogICAgICByZXR1cm4gdGhpcy4kcmVmcy5vYnNlcnZlcjsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAnZGF0YS5zb2F0byc6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihlKSB7CiAgICAgICAgdGhpcy5nZXREaXN0cmljdHNXaXRoU29hdG9zKGUuaWQpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIudmFsaWRhdGUoKS50aGVuKGZ1bmN0aW9uICh2YWxpZCwgYSkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgYXBpU2VydmljZS5wb3N0KE1BSU5fQVBJX1VSTCArICIvZGVwbG95LWluZm9ybWF0aW9uP2F1Y3Rpb25fZGF0ZT0iLmNvbmNhdChfdGhpcy5kYXRhLmF1Y3Rpb25fZGF0ZSwgIiZzb2F0bz0iKS5jb25jYXQoX3RoaXMuZGF0YS5zb2F0by5zb2F0bywgIiZhcmVhX3NvYXRvPSIpLmNvbmNhdChfdGhpcy5kYXRhLmFyZWFfc29hdG8pLCBudWxsLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpOwogICAgICAgICAgICBfdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHt9KTsKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgIF90aGlzLiR0b2FzdChfdGhpcy4kdCgibWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5IiksIHsKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8qKg0KICAgICAqIEdldCBSZWdpb25MaXN0DQogICAgICovCiAgICBnZXRSZWdpb25zV2l0aFNvYXRvczogZnVuY3Rpb24gZ2V0UmVnaW9uc1dpdGhTb2F0b3MoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBzdGF0aXN0aWNzU2VydmljZS5nZXRHZW9ncmFmaWNhbFJlZ2lvbnNXaXRoU29hdG9zKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLnJlZ2lvbnMgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGlzdHJpY3RzV2l0aFNvYXRvczogZnVuY3Rpb24gZ2V0RGlzdHJpY3RzV2l0aFNvYXRvcyhwYXJlbnRJZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgc3RhdGlzdGljc1NlcnZpY2UuZ2V0R2VvZ3JhZmljYWxEaXN0cmljdHNXaXRoU29hdG9zKHBhcmVudElkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMuZGlzdHJpY3RzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gNTAwOwogICAgdGhpcy5nZXRSZWdpb25zV2l0aFNvYXRvcygpOwogIH0sCiAgY29tcG9uZW50czogewogICAgQmFzZVNlbGVjdFdpdGhWYWxpZGF0aW9uOiBCYXNlU2VsZWN0V2l0aFZhbGlkYXRpb24KICB9Cn07"},{"version":3,"mappings":";;AA0EA;AACA;AACA;AACA;AAEA;EACAA;EACAC;IACA;MACAA;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;QACA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACA;UACAC;YACA;YACA;YACA;YACA;cAAAC;YAAA;UACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MAAA;MACAC;QACA;MACA;IACA;IACAC;MAAA;MACAD;QACA;MACA;IACA;EACA;EACAE;IACA;IACA;EACA;EACAC;IAAAC;EAAA;AACA","names":["name","data","auction_date","soato","area_soato","districts","regions","computed","isModeCreate","computedObserver","watch","handler","methods","save","apiService","type","getRegionsWithSoatos","statisticsService","getDistrictsWithSoatos","created","components","BaseSelectWithValidation"],"sourceRoot":"src/modules/integration/modules/e-auction-info","sources":["CreateOrUpdate.vue"],"sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      :custom-title=\"isModeCreate ? $t('actions.create') : $t('actions.update')\"\r\n      has-save-suspend\r\n      @save=\"save\"\r\n  >\r\n    <ValidationObserver ref=\"observer\" v-slot=\"{}\">\r\n      <b-row class=\"mb-3\">\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseDatePickerWithValidation\r\n              rules=\"required\"\r\n              required\r\n              format=\"DD.MM.YYYY\"\r\n              :label=\"$t('submodules.integration.e_auction_info.date')\"\r\n              :placeholder=\"$t('submodules.integration.e_auction_info.date')\"\r\n              v-model=\"data.auction_date\"\r\n          />\r\n        </b-col>\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseSelectWithValidation\r\n              v-model=\"data.soato\"\r\n              class=\"required\"\r\n              rules=\"required\"\r\n              :label=\"$t('submodules.integration.e_auction_info.region_saoto')\"\r\n              value-field=\"id\"\r\n          >\r\n            <template #first>\r\n              <b-form-select-option\r\n                  :value=\"null\"\r\n                  disabled\r\n              >{{ $t('submodules.integration.e_auction_info.region_saoto') }}\r\n              </b-form-select-option>\r\n            </template>\r\n            <b-form-select-option v-for=\"(region, index) in regions\"\r\n                                  :key=\"`${region}-${index}`\"\r\n                                  :value=\"region\">{{\r\n                getName({\r\n                  nameRu: region.nameRu,\r\n                  nameLt: region.nameLt,\r\n                  nameUz: region.nameUz,\r\n                })\r\n              }} ({{ region.soato }})\r\n            </b-form-select-option>\r\n          </BaseSelectWithValidation>\r\n        </b-col>\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseSelectWithValidation\r\n              v-model=\"data.area_soato\"\r\n              :label=\"$t('submodules.integration.e_auction_info.district_saoto')\"\r\n              value-field=\"id\"\r\n          >\r\n            <template #first>\r\n              <b-form-select-option\r\n                  :value=\"null\"\r\n                  disabled\r\n              >{{ $t('submodules.integration.e_auction_info.district_saoto') }}\r\n              </b-form-select-option>\r\n            </template>\r\n            <b-form-select-option v-for=\"(district, index) in districts\" :key=\"`${district}-${index}`\"\r\n                                  :value=\"district.soato\">{{\r\n                getName({\r\n                  nameRu: district.nameRu,\r\n                  nameLt: district.nameLt,\r\n                  nameUz: district.nameUz,\r\n                })\r\n              }} ({{ district.soato }})\r\n            </b-form-select-option>\r\n          </BaseSelectWithValidation>\r\n        </b-col>\r\n      </b-row>\r\n    </ValidationObserver>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'e-auction-info'\r\nimport BaseSelectWithValidation from \"../../../../components/base/BaseSelectWithValidation.vue\";\r\nimport apiService from \"../../../../shared/services/api.service\";\r\nimport statisticsService from \"@/shared/services/integration/statistics.service.js\"\r\n\r\nexport default {\r\n  name: \"CreateOrUpdate\",\r\n  data() {\r\n    return {\r\n      data: {\r\n        auction_date: null,\r\n        soato: null,\r\n        area_soato: \"\"\r\n      },\r\n      districts: [],\r\n      regions: []\r\n    };\r\n  },\r\n  computed: {\r\n    isModeCreate() {\r\n      return this.$route.name === \"IntegrationEAuctionInfoCreate\";\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer;\r\n    }\r\n  },\r\n  watch: {\r\n    'data.soato': {\r\n      handler(e) {\r\n        this.getDistrictsWithSoatos(e.id)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    save() {\r\n      this.computedObserver.validate().then((valid, a) => {\r\n        if (valid) {\r\n          apiService.post(MAIN_API_URL + `/deploy-information?auction_date=${this.data.auction_date}&soato=${this.data.soato.soato}&area_soato=${this.data.area_soato}`, null, true).then(res => {\r\n            this.computedObserver.reset();\r\n            this.editingItem = Object.assign({}, {});\r\n            this.$router.go(-1);\r\n            this.$toast(this.$t(\"messages.saved_successfully\"), {type: \"success\"});\r\n          });\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * Get RegionList\r\n     */\r\n    getRegionsWithSoatos() {\r\n      statisticsService.getGeograficalRegionsWithSoatos().then(res => {\r\n        this.regions = res.data\r\n      })\r\n    },\r\n    getDistrictsWithSoatos(parentId) {\r\n      statisticsService.getGeograficalDistrictsWithSoatos(parentId).then(res => {\r\n        this.districts = res.data\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.var_default_search_payload.itemsPerPage = 500;\r\n    this.getRegionsWithSoatos()\r\n  },\r\n  components: {BaseSelectWithValidation}\r\n}\r\n</script>\r\n<style scoped>\r\n.base-form-component {\r\n  display: block;\r\n}\r\n\r\n.base-form-component__label {\r\n  padding: 10px 0;\r\n}\r\n</style>"]}]}