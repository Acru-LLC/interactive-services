{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\wordTemplates\\templates\\CreateForm.vue?vue&type=style&index=0&id=d59f1712&scoped=true&lang=css&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\wordTemplates\\templates\\CreateForm.vue","mtime":1676525470901},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1667355376309},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1675061970775},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1667355363746},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouY29sLWZvcm0tbGFiZWwgew0KICBwYWRkaW5nLXRvcDogMDsNCn0NCg0KdWwgew0KICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7DQp9DQo="},{"version":3,"sources":["CreateForm.vue"],"names":[],"mappings":";AA2VA;AACA;AACA;;AAEA;AACA;AACA","file":"CreateForm.vue","sourceRoot":"src/modules/wordTemplates/templates","sourcesContent":["<template>\r\n  <ValidationObserver\r\n      ref=\"observer\"\r\n      v-slot=\"{}\"\r\n  >\r\n    <div>\r\n      <div>\r\n        <b-card-group style=\"padding: 0 250px 0 250px\">\r\n          <b-card\r\n              style=\"border: 1px solid\"\r\n              border-variant=\"success\"\r\n              :header=\"$t('word_templates.create_template')\"\r\n              header-bg-variant=\"success\"\r\n              header-text-variant=\"white\"\r\n              align=\"center\"\r\n\r\n          >\r\n            <b-card-text style=\"  padding: 30px;\">\r\n              <b-row>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"12\"\r\n                >\r\n                  <BaseMultiselectWithValidation\r\n                      rules=\"required\"\r\n                      class=\"required\"\r\n                      label-on-top\r\n                      v-model=\"editingItem.categoryId\"\r\n                      :options=\"category.map(e => e.id)\"\r\n                      :label=\"$t('word_templates.categories')\"\r\n                      :placeholder=\"$t('word_templates.categories')\"\r\n                      open-direction=\"bottom\"\r\n                      :show-labels=\"false\"\r\n                      :custom-label=\"customLabelCategory\"\r\n                      @search-change=\"fetchCategoryList\"\r\n                  />\r\n                </b-col>\r\n\r\n\r\n              </b-row>\r\n              <b-row>\r\n                <b-col\r\n                    class=\"mt-3\"\r\n                    sm=\"12\"\r\n                    md=\"12\"\r\n                >\r\n\r\n                  <div id=\"App\">\r\n                    <div class=\"editor\">\r\n                      <vue-mce\r\n                          @init=\"handleInit\"\r\n                          @destroy=\"handleDestroy\"\r\n                          @change=\"handleChange\"\r\n                          @input=\"handleInput\"\r\n                          @error=\"handleError\"\r\n                          v-model=\"output\"\r\n                          :config=\"config\"\r\n                          name=\"qwerty\"\r\n                          ref=\"ref\"\r\n                      />\r\n                    </div>\r\n                    <div class=\"output\">\r\n                      <h3 class=\"output__title\">Output:</h3>\r\n                      <div v-html=\"output\"></div>\r\n                    </div>\r\n                  </div>\r\n\r\n<!--                  <quill-editor-->\r\n<!--                      class=\"editor\"-->\r\n<!--                      ref=\"myQuillEditor\"-->\r\n<!--                      v-model=\"editingItem.bodyHtml\"-->\r\n<!--                      :options=\"editorOption\"-->\r\n<!--                      @blur=\"onEditorBlur($event)\"-->\r\n<!--                      @focus=\"onEditorFocus($event)\"-->\r\n<!--                      @ready=\"onEditorReady($event)\"-->\r\n<!--                      @change=\"onEditorChange($event)\"-->\r\n<!--                  />-->\r\n<!--                  <div class=\"example\">-->\r\n<!--                    <quill-editor-->\r\n<!--                        class=\"editor\"-->\r\n<!--                        ref=\"myTextEditor\"-->\r\n<!--                        v-model=\"editingItem.bodyHtml\"-->\r\n<!--                        :options=\"editorOption\"-->\r\n<!--                        @change=\"onEditorChange\"-->\r\n<!--                        @blur=\"onEditorBlur($event)\"-->\r\n<!--                        @focus=\"onEditorFocus($event)\"-->\r\n<!--                        @ready=\"onEditorReady($event)\"-->\r\n<!--                    />-->\r\n<!--                    <div class=\"output code\">-->\r\n<!--                      <code class=\"hljs\" v-html=\"contentCode\"></code>-->\r\n<!--                    </div>-->\r\n<!--                    <div class=\"output ql-snow\">-->\r\n<!--                      <div class=\"ql-editor\" v-html=\"content\"></div>-->\r\n<!--                    </div>-->\r\n<!--                  </div>-->\r\n                </b-col>\r\n              </b-row>\r\n\r\n\r\n            </b-card-text>\r\n          </b-card>\r\n        </b-card-group>\r\n      </div>\r\n    </div>\r\n  </ValidationObserver>\r\n</template>\r\n<script>\r\nimport { component } from 'vue-mce';\r\nimport hljs from 'highlight.js'\r\nimport debounce from 'lodash/debounce'\r\n// highlight.js style\r\nimport 'highlight.js/styles/tomorrow.css'\r\n// import theme style\r\nimport 'quill/dist/quill.core.css'\r\nimport 'quill/dist/quill.snow.css'\r\nimport \"quill/dist/quill.core.css\";\r\nimport \"quill/dist/quill.snow.css\";\r\nimport \"quill/dist/quill.bubble.css\";\r\nimport {quillEditor} from \"vue-quill-editor\";\r\nimport Service from \"@/modules/letter/letterService\";\r\n\r\nconst MAIN_API_URL = 'templates'\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport i18n from \"@/i18n\";\r\n\r\n\r\nexport default {\r\n  name: \"CreateForm\",\r\n  props: {\r\n    customIsModeCreate: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  /*\r\n  * COMPONENTS */\r\n  components: {\r\n    quillEditor,\r\n    'vue-mce': component,\r\n  },\r\n  /*\r\n  * DATA */\r\n  data() {\r\n    return {\r\n      config: {\r\n        theme: 'modern',\r\n        fontsize_formats: \"8px 10px 12px 14px 16px 18px 20px 22px 24px 26px 39px 34px 38px 42px 48px\",\r\n        plugins: 'print preview fullpage powerpaste searchreplace autolink',\r\n        toolbar1: 'formatselect fontsizeselect | bold italic strikethrough forecolor backcolor link',\r\n      },\r\n      editorOption: {\r\n        modules: {\r\n          toolbar: [\r\n            ['bold', 'italic', 'underline', 'strike'],\r\n            ['blockquote', 'code-block'],\r\n            [{'header': 1}, {'header': 2}],\r\n            [{'list': 'ordered'}, {'list': 'bullet'}],\r\n            [{'script': 'sub'}, {'script': 'super'}],\r\n            [{'indent': '-1'}, {'indent': '+1'}],\r\n            [{'direction': 'rtl'}],\r\n            [{'size': ['small', false, 'large', 'huge']}],\r\n            [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n            [{'font': []}],\r\n            [{'color': []}, {'background': []}],\r\n            [{'align': []}],\r\n            ['clean'],\r\n            ['link', 'image', 'video']\r\n          ],\r\n          syntax: {\r\n            highlight: text => hljs.highlightAuto(text).value\r\n          }\r\n        }\r\n      },\r\n      content: \"\",\r\n      categoryId: null,\r\n      category: [],\r\n      editingItem: {},\r\n      statuses: []\r\n    }\r\n  },\r\n  /*\r\n  * COMPUTED */\r\n  computed: {\r\n    isModeCreate() {\r\n      return this.customIsModeCreate ? this.customIsModeCreate : this.$route.name === 'CreateTemplates'\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    },\r\n    editor() {\r\n      return this.$refs.myTextEditor.quill\r\n    },\r\n    contentCode() {\r\n      return hljs.highlightAuto(this.editingItem.bodyHtml).value\r\n    }\r\n\r\n  },\r\n  mounted() {\r\n    console.log('this is Quill instance:', this.editor)\r\n  },\r\n  /*\r\n  * METHODS */\r\n  methods: {\r\n    handleInit (editor) {\r\n      /* This handler fires when tinymce editor is successfully initialized.\r\n         Receives tinymce editor instance as argument\r\n\r\n         You can save the editor instance to variable and\r\n         call editor.setContent(yourContent) any time you want */\r\n    },\r\n\r\n    handleError (err) {\r\n      /* Fires when an error occurred. Receives error object */\r\n    },\r\n\r\n    handleInput (value) {\r\n      /* Fires whenever editor content changes. Receives generated HTML */\r\n    },\r\n\r\n    handleChange (value) {\r\n      /* Fires only when editor emits focusout event. Receives generated HTML */\r\n    },\r\n\r\n    handleDestroy (editor) {\r\n      /* Fires before VueMce component destroys. Receives tinymce editor instance */\r\n    },\r\n    onEditorChange: debounce(function(value) {\r\n      this.editingItem.bodyHtml = value.html\r\n    }, 466),\r\n    onEditorBlur(editor) {\r\n      console.log('editor blur!', editor)\r\n    },\r\n    onEditorFocus(editor) {\r\n      console.log('editor focus!', editor)\r\n    },\r\n    onEditorReady(editor) {\r\n      console.log('editor ready!', editor)\r\n    },\r\n    // onEditorBlur() {\r\n    // },\r\n    // onEditorFocus() {\r\n    // },\r\n    // onEditorReady() {\r\n    // },\r\n    // onEditorChange(delta) {\r\n    //   this.editingItem.nameUz = delta.text;\r\n    // },\r\n    customLabelCategory(opt) {\r\n      let selected = this.category.find(e => e.id === opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    fetchCategoryList(keyword = '', callback = null) {\r\n      Service.searchList('template/category', this.var_default_search_payload, null, true)\r\n          .then(res => {\r\n            this.category = res.data.list\r\n            callback();\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    async getTemplatesCategory() {\r\n      await crudAndListsService.searchListWithKeyword(\"template/category\", this.var_default_search_payload)\r\n          .then(res => {\r\n            this.category = res.data.list\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    treeClosed(veeName) {\r\n      this.computedObserver.refs[veeName].validate();\r\n    },\r\n    normalizer(node) {\r\n      if (!node.children || node.children.length === 0) {\r\n        delete node.children\r\n        return {\r\n          id: node.id,\r\n          label: node.name,\r\n        }\r\n      }\r\n      return {\r\n        id: node.id,\r\n        label: node.name,\r\n        children: node.children && node.children.length > 0 ? node.children : [],\r\n      }\r\n    },\r\n    save() {\r\n      this.computedObserver.validate().then(valid => {\r\n        if (valid) {\r\n          if (this.editingItem.id) {\r\n            crudAndListsService.update(MAIN_API_URL, this.editingItem).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {});\r\n              this.$router.go(-1)\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n            })\r\n          } else {\r\n            crudAndListsService.create(MAIN_API_URL, this.editingItem).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {});\r\n              this.$router.go(-1)\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n            })\r\n          }\r\n        } else {\r\n          this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n        }\r\n      });\r\n    }\r\n  },\r\n  /*\r\n  * CREATED */\r\n  async created() {\r\n    this.var_default_search_payload.itemsPerPage = 500\r\n    if (this.isModeCreate) {\r\n      await crudAndListsService.getEmpty(MAIN_API_URL)\r\n          .then(res => {\r\n            this.editingItem = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n\r\n    } else {\r\n      await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, false)\r\n          .then(res => {\r\n            this.editingItem = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    }\r\n\r\n    await this.getTemplatesCategory();\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.col-form-label {\r\n  padding-top: 0;\r\n}\r\n\r\nul {\r\n  list-style-type: none;\r\n}\r\n</style>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.example {\r\n  display: flex;\r\n  flex-direction: column;\r\n  .editor {\r\n    height: 30rem;\r\n    overflow: hidden;\r\n  }\r\n  .output {\r\n    width: 100%;\r\n    height: 20rem;\r\n    margin: 0;\r\n    border: 1px solid #ccc;\r\n    overflow-y: auto;\r\n    resize: vertical;\r\n    &.code {\r\n      padding: 1rem;\r\n      height: 16rem;\r\n    }\r\n    &.ql-snow {\r\n      border-top: none;\r\n      height: 24rem;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}