{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\reestr-contractors\\modules\\natural\\CreateOrUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\reestr-contractors\\modules\\natural\\CreateOrUpdate.vue","mtime":1667352074518},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBNQUlOX0FQSV9VUkwgPSAncmVlc3RyL2NvbnRyYWN0b3ItcmVlc3RyLWRvY3VtZW50cycNCmNvbnN0IEFQUEVORF9BUElfVVJMX05BVFVSQUwgPSAnZXN0ZXN0dmVuaXknDQpjb25zdCBBUFBFTkRfQVBJX1VSTF9ET01JTkFOVCA9ICdkYW1pbmlyaXVzaGl5Jw0KY29uc3QgT0tFRF9BUElfVVJMID0gJ3JlZXN0ci9pbmZvLW9rZWQnDQpjb25zdCBTS1BfQVBJX1VSTCA9ICdyZWVzdHIvaW5mby1za3AnDQpjb25zdCBUTlZFRF9BUElfVVJMID0gJ3JlZXN0ci9pbmZvLXRudmVkJw0KY29uc3QgUFJJQ0VfQVBQUk9WQUxfQVBJX1VSTCA9ICdyZWVzdHIvY29udHJhY3Rvci1yZWVzdHItZG9jdW1lbnRzL2dldC9wcmljZS1hcHByb3ZhbCcNCmNvbnN0IEFOTk9VTkNFRF9NRURJQV9BUElfVVJMID0gJ3JlZXN0ci9jb250cmFjdG9yLXJlZXN0ci1kb2N1bWVudHMvZ2V0L2Fubm91bmNlZC1tZWRpYScNCmNvbnN0IENPTU1JU1NJT05fQVBQTElDQVRJT05fQVBJX1VSTCA9ICdyZWVzdHIvY29udHJhY3Rvci1yZWVzdHItZG9jdW1lbnRzL2dldC9jb21taXNzaW9uLWFwcGxpY2F0aW9uJw0KLyoNCiogWU9VIE1VU1QgU0VORCB7eyBNQUlOX0FQSV9VUkwgfX0gVE8gQ1JVRF9TRVJWSUNFICovDQppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UiDQppbXBvcnQgaGVscGVyU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSINCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJDcmVhdGVPclVwZGF0ZSIsDQogICAgLyoNCiAgICAqIENPTVBPTkVOVFMgKi8NCiAgICBjb21wb25lbnRzOiB7fSwNCiAgICAvKg0KICAgICogREFUQSAqLw0KICAgIGRhdGEgKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZWRpdGluZ0l0ZW06IHt9LA0KICAgICAgICAgICAgcHVibGljUGF0aDogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsDQogICAgICAgICAgICBkZWZhdWx0Q29tbWlzc2lvbkFwcGxpY2F0aW9uRHRvOiB7fSwNCiAgICAgICAgICAgIGRlZmF1bHRBbm5vdW5jZWRNZWRpYUR0bzoge30sDQogICAgICAgICAgICBkZWZhdWx0UHJpY2VBcHByb3ZhbER0bzoge30sDQogICAgICAgICAgICByZWdpb25zOiBbXSwNCiAgICAgICAgICAgIGRpc3RyaWN0czogW10sDQogICAgICAgICAgICBoYXNOZXh0UGFnZUNvbnRyYWN0b3JzOiBmYWxzZSwNCiAgICAgICAgICAgIGhhc05leHRQYWdlUHJvZHVjdE9yU2VydmljZXM6IGZhbHNlLA0KICAgICAgICAgICAgY29udHJhY3RvcnM6IFtdLA0KICAgICAgICAgICAgZGVib3VuY2U6IG51bGwsDQogICAgICAgICAgICBpc0xvYWRpbmdDb250cmFjdG9yczogZmFsc2UsDQogICAgICAgICAgICBpc0xvYWRpbmdQcm9kdWN0T3JTZXJ2aWNlczogZmFsc2UsDQogICAgICAgICAgICBjb250cmFjdG9yU2VhcmNoUGF5bG9hZDoge30sDQogICAgICAgICAgICBwcm9kdWN0T3JTZXJ2aWNlc1NlYXJjaFBheWxvYWQ6IHt9LA0KICAgICAgICAgICAgcHJvZHVjdFR5cGVzOiBbXSwNCiAgICAgICAgICAgIHByb2R1Y3RzOiBbXSwNCiAgICAgICAgICAgIHVuaXRzOiBbXSwNCiAgICAgICAgICAgIC8vIE9LRUQgVkFSSUFCTEVTDQogICAgICAgICAgICBva2VkczogW10sDQogICAgICAgICAgICBoYXNOZXh0UGFnZU9rZWQ6IGZhbHNlLA0KICAgICAgICAgICAgaXNMb2FkaW5nT2tlZDogZmFsc2UsDQogICAgICAgICAgICBva2VkU2VhcmNoUGF5bG9hZDoge30sDQogICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAvLyBTS1AgVkFSSUFCTEVTDQogICAgICAgICAgICBza3BzOiBbXSwNCiAgICAgICAgICAgIGhhc05leHRQYWdlU2twOiBmYWxzZSwNCiAgICAgICAgICAgIGlzTG9hZGluZ1NrcDogZmFsc2UsDQogICAgICAgICAgICBza3BTZWFyY2hQYXlsb2FkOiB7fSwNCiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgIC8vIFROVkVEIFZBUklBQkxFUw0KICAgICAgICAgICAgdG52ZWRzOiBbXSwNCiAgICAgICAgICAgIGhhc05leHRQYWdlVG52ZWQ6IGZhbHNlLA0KICAgICAgICAgICAgaXNMb2FkaW5nVG52ZWQ6IGZhbHNlLA0KICAgICAgICAgICAgdG52ZWRTZWFyY2hQYXlsb2FkOiB7fSwNCiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgIGNvbnRyYWN0b3JDcmVhdGVNb2RhbDogZmFsc2UsDQogICAgICAgICAgICBncm91cE9mSW5kaXZpZHVhbHM6IFtdDQogICAgICAgIH0NCiAgICB9LA0KICAgIC8qDQogICAgKiBDT01QVVRFRCAqLw0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGNvbXB1dGVkT2JzZXJ2ZXIgKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnMub2JzZXJ2ZXINCiAgICAgICAgfSwNCiAgICAgICAgaXNNb2RlQ3JlYXRlICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnQ3JlYXRlTmF0dXJhbENvbnRyYWN0b3JSZWVzdHInIHx8IHRoaXMuJHJvdXRlLm5hbWUgPT09ICdDcmVhdGVEb21pbmFudENvbnRyYWN0b3JSZWVzdHInDQogICAgICAgIH0sDQogICAgICAgIGlzRG9taW5hbnQgKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLm5hbWUgPT09ICdDcmVhdGVEb21pbmFudENvbnRyYWN0b3JSZWVzdHInIHx8IHRoaXMuJHJvdXRlLm5hbWUgPT09ICdVcGRhdGVEb21pbmFudENvbnRyYWN0b3JSZWVzdHInDQogICAgICAgIH0sDQogICAgICAgIGlzTmF0dXJhbCAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gJ0NyZWF0ZU5hdHVyYWxDb250cmFjdG9yUmVlc3RyJyB8fCB0aGlzLiRyb3V0ZS5uYW1lID09PSAnVXBkYXRlTmF0dXJhbENvbnRyYWN0b3JSZWVzdHInDQogICAgICAgIH0sDQogICAgICAgIGNvbnRyYWN0b3JIYXNQYXJlbnQgKCkgew0KICAgICAgICAgICAgbGV0IGNvbnRyYWN0b3IgPSB0aGlzLmNvbnRyYWN0b3JzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5lZGl0aW5nSXRlbS5jb250cmFjdG9ySWQpDQogICAgICAgICAgICBpZiAoY29udHJhY3Rvcikgew0KICAgICAgICAgICAgICAgIHJldHVybiBjb250cmFjdG9yLnBhcmVudA0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgLyoNCiAgICAqIE1FVEhPRFMgKi8NCiAgICBtZXRob2RzOiB7DQogICAgICAgIHNhdmUgKCkgew0KICAgICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnZhbGlkYXRlKCkudGhlbihhc3luYyB2YWxpZCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRG9taW5hbnQgJiYgIXRoaXMuZWRpdGluZ0l0ZW0ub2tlZElkICYmICF0aGlzLmVkaXRpbmdJdGVtLnNrcElkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5va2VkX29yX3NrcF9pc19yZXF1aXJlZCcpLCB7IHR5cGU6ICdlcnJvcicgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEb21pbmFudCB8fCAhdGhpcy5lZGl0aW5nSXRlbS5pc1JlcHVibGljICYmIHRoaXMuY29udHJhY3Rvckhhc1BhcmVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5pc0dyb3VwID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBsZXQgdG1wUHJpY2VBcHByb3ZhbEZpbGVzID0gKHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbEZpbGVzICYmIHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbEZpbGVzLmxlbmd0aCkgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbEZpbGVzKSkgOiBbXQ0KICAgICAgICAgICAgICAgICAgICBsZXQgdG1wUHJvZHVjdE9yU2VydmljZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZUlkKSkNCiAgICAgICAgICAgICAgICAgICAgbGV0IHRtcEFubm91bmNlZE1lZGlhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmVkaXRpbmdJdGVtLmFubm91bmNlZE1lZGlhRHRvcykpDQogICAgICAgICAgICAgICAgICAgIGxldCB0bXBQcmljZUFwcHJvdmFsRHRvcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRHRvcykpDQogICAgICAgICAgICAgICAgICAgIGxldCB0bXBDb21taXNzaW9ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lZGl0aW5nSXRlbS5jb21taXNzaW9uQXBwbGljYXRpb25EdG9zKSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkID0gYXdhaXQgdGhpcy5tYWtlQW5kUmV0dXJuRm9ybURhdGFGb3JCYXNlNjQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyU2VydmljZS51cGRhdGVSZWVzdHIoTUFJTl9BUElfVVJMLCBwYXlsb2FkLCBgZm9yLWFjY2VwdGFuY2UtJHt0aGlzLmlzRG9taW5hbnQgPyBBUFBFTkRfQVBJX1VSTF9ET01JTkFOVCA6IHRoaXMuaXNOYXR1cmFsID8gQVBQRU5EX0FQSV9VUkxfTkFUVVJBTCA6ICcnfS8ke3RoaXMuZWRpdGluZ0l0ZW0uaWR9YCwgdHJ1ZSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHt9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkID0gYXdhaXQgdGhpcy5tYWtlQW5kUmV0dXJuRm9ybURhdGFGb3JCYXNlNjQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5jcmVhdGUoTUFJTl9BUElfVVJMLCBwYXlsb2FkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBmb3ItYWNjZXB0YW5jZS0ke3RoaXMuaXNEb21pbmFudCA/IEFQUEVORF9BUElfVVJMX0RPTUlOQU5UIDogdGhpcy5pc05hdHVyYWwgPyBBUFBFTkRfQVBJX1VSTF9OQVRVUkFMIDogJyd9YCwgdHJ1ZSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVzZXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwge30pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7IHR5cGU6ICdzdWNjZXNzJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlSWQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRtcFByb2R1Y3RPclNlcnZpY2VzKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5jb21taXNzaW9uQXBwbGljYXRpb25EdG9zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0bXBDb21taXNzaW9ucykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uYW5ub3VuY2VkTWVkaWFEdG9zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0bXBBbm5vdW5jZWRNZWRpYSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbER0b3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRtcFByaWNlQXBwcm92YWxEdG9zKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRmlsZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRtcFByaWNlQXBwcm92YWxGaWxlcykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzJyksIHsgdHlwZTogJ2Vycm9yJyB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgc2V0RmlsZXNGcm9tU2VydmVyICgpIHsNCiAgICAgICAgICAgIC8vIElMT1ZBDQogICAgICAgICAgICBmZXRjaCh0aGlzLnB1YmxpY1BhdGggKyB0aGlzLmVkaXRpbmdJdGVtLmZpbGVVcmwpDQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmJsb2IoKSkNCiAgICAgICAgICAgICAgICAudGhlbigobXlCbG9iKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIG15QmxvYi5uYW1lID0gZi5uYW1lOw0KICAgICAgICAgICAgICAgICAgICBteUJsb2IubGFzdE1vZGlmaWVkID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbXlGaWxlID0gbmV3IEZpbGUoW215QmxvYl0sIGYubmFtZSwgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbXlCbG9iLnR5cGUsDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLnB1YmxpY1BhdGggKyBmLnVybDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5zdXBwbGVtZW50RG9jVXBsb2FkZXIuJHJlZnMuZHJvcHpvbmUubWFudWFsbHlBZGRGaWxlKG15RmlsZSwgdXJsKTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IGNvbnNvbGUubG9nKGUpKTsNCg0KICAgICAgICAgICAgLy8gdGhpcy5lZGl0aW5nSXRlbS5vYmplY3RQaG90b0xpc3QuZm9yRWFjaChmID0+IHsNCiAgICAgICAgICAgIC8vICAgICBmZXRjaCh0aGlzLnB1YmxpY1BhdGggKyBmLnVybCkNCiAgICAgICAgICAgIC8vICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmJsb2IoKSkNCiAgICAgICAgICAgIC8vICAgICAgICAgLnRoZW4oKG15QmxvYikgPT4gew0KICAgICAgICAgICAgLy8gICAgICAgICAgICAgbXlCbG9iLm5hbWUgPSBmLm5hbWU7DQogICAgICAgICAgICAvLyAgICAgICAgICAgICBteUJsb2IubGFzdE1vZGlmaWVkID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IG15RmlsZSA9IG5ldyBGaWxlKFtteUJsb2JdLCBmLm5hbWUsIHsNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB0eXBlOiBteUJsb2IudHlwZSwNCiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyAgICAgICAgICAgICBsZXQgdXJsID0gdGhpcy5wdWJsaWNQYXRoICsgZi51cmw7DQogICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLiRyZWZzLnBob3Rvc1VwbG9hZGVyLiRyZWZzLmRyb3B6b25lLm1hbnVhbGx5QWRkRmlsZShteUZpbGUsIHVybCk7DQogICAgICAgICAgICAvLyAgICAgICAgIH0pDQogICAgICAgICAgICAvLyAgICAgICAgIC5jYXRjaChlID0+IGNvbnNvbGUubG9nKGUpKTsNCiAgICAgICAgICAgIC8vIH0pDQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIHJlZ2lvblNlbGVjdGVkICgkZXZlbnQsIGRvbnRSZXNldERpc3RyaWN0ID0gZmFsc2UpIHsNCiAgICAgICAgICAgIGlmICghZG9udFJlc2V0RGlzdHJpY3QpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpc3RyaWN0SWRzID0gW10NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIEdFVCBESVNUUklDVFMNCiAgICAgICAgICAgIGlmICgkZXZlbnQpDQogICAgICAgICAgICAgICAgYXdhaXQgaGVscGVyU2VydmljZS5nZXRHZW9Mb2NhdGlvbnNCeVBhcmVudElkKCRldmVudCkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzdHJpY3RzID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgYWRkQ29tbWlzc2lvbkFwcGxpY2F0aW9uRHRvICgpIHsNCiAgICAgICAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRDb21taXNzaW9uQXBwbGljYXRpb25EdG8pDQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmNvbW1pc3Npb25BcHBsaWNhdGlvbkR0b3MucHVzaCh0bXApDQogICAgICAgIH0sDQogICAgICAgIGFkZEFubm91bmNlZE1lZGlhRHRvICgpIHsNCiAgICAgICAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRBbm5vdW5jZWRNZWRpYUR0bykNCiAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uYW5ub3VuY2VkTWVkaWFEdG9zLnB1c2godG1wKQ0KICAgICAgICB9LA0KICAgICAgICBhZGRQcmljZUFwcHJvdmFsRHRvICgpIHsNCiAgICAgICAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRQcmljZUFwcHJvdmFsRHRvKQ0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRHRvcy5wdXNoKHRtcCkNCiAgICAgICAgfSwNCiAgICAgICAgbmV3UmVmQ3JlYXRlZCAoZm9ybU5hbWUpIHsNCiAgICAgICAgICAgIGlmIChmb3JtTmFtZSA9PSAnQ3JlYXRlRm9ybUNvbnRyYWN0b3InKSB7DQogICAgICAgICAgICAgICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoJycsIHRydWUpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8qIG1ha2VBbmRSZXR1cm5RdWVyeVBhcmFtcyAoKSB7DQogICAgICAgICAgICBsZXQgcXVlcnlTdHJpbmcgPSBgY29udHJhY3RvcklkPSR7dGhpcy5lZGl0aW5nSXRlbS5jb250cmFjdG9ySWR9DQogICAgICAgICAgICAgICAgICAgICAgICAgJmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VUeXBlSWQ9JHt0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VUeXBlSWR9DQogICAgICAgICAgICAgICAgICAgICAgICAgJmdvdmVybm1lbnRQZXJjZW50YWdlPSR7dGhpcy5lZGl0aW5nSXRlbS5nb3Zlcm5tZW50UGVyY2VudGFnZX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAmb3JkZXJOdW1iZXI9JHt0aGlzLmVkaXRpbmdJdGVtLm9yZGVyTnVtYmVyfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICZyZWVzdHJBY2NlcHRlZERhdGU9JHt0aGlzLmVkaXRpbmdJdGVtLnJlZXN0ckFjY2VwdGVkRGF0ZX1gDQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VJZC5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBgJmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VJZD0ke2lkfWANCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICByZXR1cm4gcXVlcnlTdHJpbmcNCiAgICAgICAgfSwgKi8NCiAgICAgICAgZ2V0QmFzZTY0IChmaWxlKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7DQogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCk7DQogICAgICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSBlcnJvciA9PiByZWplY3QoZXJyb3IpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIG1ha2VBbmRSZXR1cm5Gb3JtRGF0YUZvckJhc2U2NCAoKSB7DQogICAgICAgICAgICAvLyB0aGlzLmVkaXRpbmdJdGVtLnN1cHBsZW1lbnREb2NzID0gdGhpcy5lZGl0aW5nSXRlbS5zdXBwbGVtZW50RG9jcy5tYXAoZiA9PiBmLmZpbGUuZGF0YVVSTCkNCiAgICAgICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgICAgIC8qIGlmICh0aGlzLmVkaXRpbmdJdGVtLnByaWNlQXBwcm92YWxGaWxlcyAmJiB0aGlzLmVkaXRpbmdJdGVtLnByaWNlQXBwcm92YWxGaWxlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRmlsZXNbMF0uZmlsZS5kYXRhVVJMKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbEZpbGVzID0gdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRmlsZXNbMF0uZmlsZS5kYXRhVVJMDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuZ2V0QmFzZTY0KHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbEZpbGVzWzBdLmZpbGUpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbEZpbGVzID0gcmVzDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSAqLw0KICAgICAgICAgICAgLyogbGV0IGJhc2U2NFByaWNlRmlsZXMgPSBbXQ0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbEZpbGVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRmlsZXMuZm9yRWFjaChhc3luYyBmID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGYuZmlsZS5kYXRhVVJMKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBiYXNlNjRQcmljZUZpbGVzLnB1c2goZi5maWxlLmRhdGFVUkwpDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5nZXRCYXNlNjQoZi5maWxlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0UHJpY2VGaWxlcy5wdXNoKHJlcykNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnByaWNlQXBwcm92YWxGaWxlcyA9IGJhc2U2NFByaWNlRmlsZXMgKi8NCiAgICAgICAgICAgIC8qIHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbEZpbGVzID0gdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRmlsZXMgPyB0aGlzLmVkaXRpbmdJdGVtLnByaWNlQXBwcm92YWxGaWxlcy5tYXAoYXN5bmMgZnVuY3Rpb24gKGYpIHsNCiAgICAgICAgICAgICAgICBsZXQgdXJsID0gbnVsbA0KICAgICAgICAgICAgICAgIGlmIChmLmZpbGUuZGF0YVVSTCkgew0KICAgICAgICAgICAgICAgICAgICB1cmwgPSBmLmZpbGUuZGF0YVVSTA0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCB2bS5nZXRCYXNlNjQoZi5maWxlKQ0KICAgICAgICAgICAgICAgICAgICB1cmwgPSByZXMNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHVybA0KICAgICAgICAgICAgfSkgOiBbXSAqLw0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5hbm5vdW5jZWRNZWRpYUR0b3MgPSBhd2FpdCB0aGlzLmVkaXRpbmdJdGVtLmFubm91bmNlZE1lZGlhRHRvcy5maWx0ZXIoZWwgPT4gew0KICAgICAgICAgICAgICAgIGlmIChlbC5hbm5vdW5jZWRNZWRpYU5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGJhc2U2NEFubm91bmNlbWVudEZpbGVzID0gW10NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmFubm91bmNlZE1lZGlhRmlsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmFubm91bmNlZE1lZGlhRmlsZXMuZm9yRWFjaChhc3luYyBmID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5maWxlLmRhdGFVUkwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZTY0QW5ub3VuY2VtZW50RmlsZXMucHVzaChmLmZpbGUuZGF0YVVSTCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5nZXRCYXNlNjQoZi5maWxlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlNjRBbm5vdW5jZW1lbnRGaWxlcy5wdXNoKHJlcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsLmFubm91bmNlZE1lZGlhRmlsZXMgPSBiYXNlNjRBbm5vdW5jZW1lbnRGaWxlcw0KICAgICAgICAgICAgICAgICAgICAvKiBlbC5hbm5vdW5jZWRNZWRpYUZpbGVzID0gZWwuYW5ub3VuY2VkTWVkaWFGaWxlcyA/IGVsLmFubm91bmNlZE1lZGlhRmlsZXMubWFwKGFzeW5jIGZ1bmN0aW9uIChmKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gbnVsbA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYuZmlsZS5kYXRhVVJMKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gZi5maWxlLmRhdGFVUkwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHZtLmdldEJhc2U2NChmLmZpbGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gcmVzDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsDQogICAgICAgICAgICAgICAgICAgIH0pIDogW10gKi8NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRHRvcyA9IGF3YWl0IHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbER0b3MuZmlsdGVyKGVsID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoZWwucHJpY2VBcHByb3ZhbE51bWJlcikgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYmFzZTY0UHJpY2VBcHByb3ZhbEZpbGVzID0gW10NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLnByaWNlQXBwcm92YWxGaWxlcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwucHJpY2VBcHByb3ZhbEZpbGVzLmZvckVhY2goYXN5bmMgZiA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYuZmlsZS5kYXRhVVJMKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NFByaWNlQXBwcm92YWxGaWxlcy5wdXNoKGYuZmlsZS5kYXRhVVJMKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLmdldEJhc2U2NChmLmZpbGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U2NFByaWNlQXBwcm92YWxGaWxlcy5wdXNoKHJlcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsLnByaWNlQXBwcm92YWxGaWxlcyA9IGJhc2U2NFByaWNlQXBwcm92YWxGaWxlcw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmNvbW1pc3Npb25BcHBsaWNhdGlvbkR0b3MgPSB0aGlzLmVkaXRpbmdJdGVtLmNvbW1pc3Npb25BcHBsaWNhdGlvbkR0b3MuZmlsdGVyKGVsID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoZWwuY29tbWVuY2VtZW50TnVtYmVyICYmIGVsLmluaXRpYXRvck5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC8vIHRoaXMuZWRpdGluZ0l0ZW0ub2tlZElkcyA9IFtdDQogICAgICAgICAgICAvLyB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VJZCA9IHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZUlkLm1hcChlbCA9PiB7DQogICAgICAgICAgICAvLyAgICAgdGhpcy5lZGl0aW5nSXRlbS5va2VkSWRzLnB1c2goZWwub2tlZElkKQ0KICAgICAgICAgICAgLy8gICAgIHJldHVybiBlbC5pZA0KICAgICAgICAgICAgLy8gfSkNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRpbmdJdGVtLnN1cHBsZW1lbnREb2NzICYmIHRoaXMuZWRpdGluZ0l0ZW0uc3VwcGxlbWVudERvY3NbMF0uZmlsZS5kYXRhVVJMKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5maWxlID0gdGhpcy5lZGl0aW5nSXRlbS5zdXBwbGVtZW50RG9jc1swXS5maWxlLmRhdGFVUkwNCiAgICAgICAgICAgICAgICAvLyBkZWxldGUgdGhpcy5lZGl0aW5nSXRlbS5zdXBwbGVtZW50RG9jcw0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRpbmdJdGVtDQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uc3VwcGxlbWVudERvY3MpIHsNCiAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5nZXRCYXNlNjQodGhpcy5lZGl0aW5nSXRlbS5zdXBwbGVtZW50RG9jc1swXS5maWxlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZmlsZSA9IHJlcw0KICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGlzLmVkaXRpbmdJdGVtLnN1cHBsZW1lbnREb2NzDQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWRpdGluZ0l0ZW0NCiAgICAgICAgICAgICAgICAvKiB0aGlzLmdldEJhc2U2NCh0aGlzLmVkaXRpbmdJdGVtLnN1cHBsZW1lbnREb2NzWzBdLmZpbGUpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pICovDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRpbmdJdGVtDQogICAgICAgICAgICB9DQoNCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxSZWdpb24gKG9wdCkgew0KICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5yZWdpb25zLmZpbmQoZSA9PiBlLnJlZ2lvbklkID09IChvcHQucmVnaW9uSWQgPyBvcHQucmVnaW9uSWQgOiBvcHQpKTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgICAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLnJlZ2lvbk5hbWVSdSwNCiAgICAgICAgICAgICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5yZWdpb25OYW1lTHQsDQogICAgICAgICAgICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQucmVnaW9uTmFtZVV6LA0KICAgICAgICAgICAgICAgIH0pfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxEaXN0cmljdCAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWREaXN0cmljdCA9IHRoaXMuZGlzdHJpY3RzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWREaXN0cmljdCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgICAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkRGlzdHJpY3QubmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkRGlzdHJpY3QubmFtZUx0LA0KICAgICAgICAgICAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkRGlzdHJpY3QubmFtZVV6LA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH1gDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYGA7DQogICAgICAgIH0sDQogICAgICAgIGN1c3RvbUxhYmVsUHJvZHVjdCAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLnByb2R1Y3RzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgICAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVeiwNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9YA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGBgOw0KICAgICAgICB9LA0KICAgICAgICBjdXN0b21MYWJlbFVuaXQgKG9wdCkgew0KICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy51bml0cy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICAgICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxHcm91cE9mSW5kaXZpZHVhbHMgKG9wdCkgew0KICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5ncm91cE9mSW5kaXZpZHVhbHMuZmluZChlID0+IGUuaWQgPT0gb3B0KTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZWxlY3RlZC5uYW1lfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxQcm9kdWN0VHlwZSAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLnByb2R1Y3RUeXBlcy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICAgICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgcHJvZHVjdFR5cGVTZWxlY3RlZCAoJGV2ZW50LCBkb250UmVzZXREaXN0cmljdCA9IGZhbHNlKSB7DQogICAgICAgICAgICBpZiAoIWRvbnRSZXNldERpc3RyaWN0KSB7DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlSWQgPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0T3JTZXJ2aWNlc1NlYXJjaFBheWxvYWQucGFnZSA9IDENCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgkZXZlbnQpIHsNCiAgICAgICAgICAgICAgICAvLyBHRVQgUFJPRFVDVF9PUl9TRVJWSUNFUw0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hQcm9kdWN0T3JTZXJ2aWNlcygkZXZlbnQpDQogICAgICAgICAgICAgICAgLy8gYXdhaXQgaGVscGVyU2VydmljZS5nZXRQcm9kdWN0c0J5UHJvZGVjdFR5cGVJZCgkZXZlbnQpDQogICAgICAgICAgICAgICAgLy8gICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnByb2R1Y3RzID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgICAvLyAgICAgfSkNCiAgICAgICAgICAgICAgICAvLyAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdDQogICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgIC8vICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjb250cmFjdG9yUmVhY2hlZEVuZE9mTGlzdCAoZSkgew0KICAgICAgICAgICAgaWYgKGUgJiYgIXRoaXMuaXNMb2FkaW5nQ29udHJhY3RvcnMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmZldGNoQ29udHJhY3RvcnMoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBwcm9kdWN0T3JTZXJ2aWNlc1JlYWNoZWRFbmRPZkxpc3QgKGUpIHsNCiAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5mZXRjaFByb2R1Y3RPclNlcnZpY2VzKHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZVR5cGVJZCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxDb250cmFjdG9yIChvcHQpIHsNCiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuY29udHJhY3RvcnMuZmluZChlID0+IGUuaWQgPT0gb3B0KTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZWxlY3RlZC5mdWxsTmFtZX1gDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYGA7DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGRlYm91bmNlU2VhcmNoUHJvZHVjdE9yU2VydmljZXMgKHNlYXJjaFRleHQpIHsNCiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlKTsNCiAgICAgICAgICAgIHRoaXMuZGVib3VuY2UgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoUHJvZHVjdE9yU2VydmljZXNXaXRoS2V5d29yZChzZWFyY2hUZXh0KTsNCiAgICAgICAgICAgIH0sIDEwMDApOw0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBkZWJvdW5jZVNlYXJjaENvbnRyYWN0b3JzIChzZWFyY2hUZXh0KSB7DQogICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZSk7DQogICAgICAgICAgICB0aGlzLmRlYm91bmNlID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5mZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoc2VhcmNoVGV4dCk7DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmV0Y2hQcm9kdWN0T3JTZXJ2aWNlc1dpdGhLZXl3b3JkIChrZXl3b3JkKSB7DQogICAgICAgICAgICB0aGlzLnByb2R1Y3RzID0gW10NCiAgICAgICAgICAgIHRoaXMucHJvZHVjdE9yU2VydmljZXNTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxDQogICAgICAgICAgICB0aGlzLnByb2R1Y3RPclNlcnZpY2VzU2VhcmNoUGF5bG9hZC5rZXl3b3JkID0ga2V5d29yZCA/IGtleXdvcmQgOiAnJw0KICAgICAgICAgICAgdGhpcy5mZXRjaFByb2R1Y3RPclNlcnZpY2VzKHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZVR5cGVJZCkNCiAgICAgICAgfSwNCiAgICAgICAgLy8gT0tFRCBNRVRIT0RTDQogICAgICAgIG9rZWRSZWFjaGVkRW5kT2ZMaXN0IChlKSB7DQogICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hPa2VkcygpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGRlYm91bmNlU2VhcmNoT2tlZCAoc2VhcmNoVGV4dCkgew0KICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2UpOw0KICAgICAgICAgICAgdGhpcy5kZWJvdW5jZSA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hPa2Vkc1dpdGhLZXl3b3JkKHNlYXJjaFRleHQpOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH0sDQogICAgICAgIGZldGNoT2tlZHNXaXRoS2V5d29yZCAoa2V5d29yZCkgew0KICAgICAgICAgICAgdGhpcy5va2VkcyA9IFtdDQogICAgICAgICAgICB0aGlzLm9rZWRTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxDQogICAgICAgICAgICB0aGlzLm9rZWRTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnDQogICAgICAgICAgICB0aGlzLmZldGNoT2tlZHMoKQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBmZXRjaE9rZWRzICgpIHsNCiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nT2tlZCA9IHRydWUNCiAgICAgICAgICAgIGF3YWl0IGNydWRBbmRMaXN0c1NlcnZpY2Uuc2VhcmNoTGlzdFdpdGhLZXl3b3JkKE9LRURfQVBJX1VSTCwgdGhpcy5va2VkU2VhcmNoUGF5bG9hZCkNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm9rZWRzLnB1c2goLi4ucmVzLmRhdGEubGlzdCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNOZXh0UGFnZU9rZWQgPSByZXMuZGF0YS50b3RhbCAvIHRoaXMub2tlZFNlYXJjaFBheWxvYWQuaXRlbXNQZXJQYWdlID4gdGhpcy5va2VkU2VhcmNoUGF5bG9hZC5wYWdlDQogICAgICAgICAgICAgICAgICAgIHRoaXMub2tlZFNlYXJjaFBheWxvYWQucGFnZSArPSAxDQogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc01vZGVDcmVhdGUgJiYgdGhpcy5lZGl0aW5nSXRlbS5va2VkSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZEl0bSA9IHRoaXMub2tlZHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLm9rZWRJZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRJdG0gJiYgdGhpcy5lZGl0aW5nSXRlbS5pbmZvT2tlZER0bykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2tlZHMucHVzaCh0aGlzLmVkaXRpbmdJdGVtLmluZm9Pa2VkRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgICAgIHRoaXMub2tlZHMgPSBbXQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZ09rZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGN1c3RvbUxhYmVsT2tlZCAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLm9rZWRzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VsZWN0ZWQuY29kZX0gLSAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICAgICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgICAgICAgICAgfSl9YA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGBgOw0KICAgICAgICB9LA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQogICAgICAgIC8vIFNLUCBNRVRIT0RTDQogICAgICAgIHNrcFJlYWNoZWRFbmRPZkxpc3QgKGUpIHsNCiAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5mZXRjaFNrcHMoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBkZWJvdW5jZVNlYXJjaFNrcCAoc2VhcmNoVGV4dCkgew0KICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2UpOw0KICAgICAgICAgICAgdGhpcy5kZWJvdW5jZSA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hTa3BzV2l0aEtleXdvcmQoc2VhcmNoVGV4dCk7DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmV0Y2hTa3BzV2l0aEtleXdvcmQgKGtleXdvcmQpIHsNCiAgICAgICAgICAgIHRoaXMuc2twcyA9IFtdDQogICAgICAgICAgICB0aGlzLnNrcFNlYXJjaFBheWxvYWQucGFnZSA9IDENCiAgICAgICAgICAgIHRoaXMuc2twU2VhcmNoUGF5bG9hZC5rZXl3b3JkID0ga2V5d29yZCA/IGtleXdvcmQgOiAnJw0KICAgICAgICAgICAgdGhpcy5mZXRjaFNrcHMoKQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBmZXRjaFNrcHMgKCkgew0KICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdTa3AgPSB0cnVlDQogICAgICAgICAgICBhd2FpdCBjcnVkQW5kTGlzdHNTZXJ2aWNlLnNlYXJjaExpc3RXaXRoS2V5d29yZChTS1BfQVBJX1VSTCwgdGhpcy5za3BTZWFyY2hQYXlsb2FkKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2twcy5wdXNoKC4uLnJlcy5kYXRhLmxpc3QpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzTmV4dFBhZ2VTa3AgPSByZXMuZGF0YS50b3RhbCAvIHRoaXMuc2twU2VhcmNoUGF5bG9hZC5pdGVtc1BlclBhZ2UgPiB0aGlzLnNrcFNlYXJjaFBheWxvYWQucGFnZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNrcFNlYXJjaFBheWxvYWQucGFnZSArPSAxDQogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc01vZGVDcmVhdGUgJiYgdGhpcy5lZGl0aW5nSXRlbS5za3BJZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kSXRtID0gdGhpcy5za3BzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5lZGl0aW5nSXRlbS5za3BJZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRJdG0gJiYgdGhpcy5lZGl0aW5nSXRlbS5pbmZvU0tQRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5za3BzLnB1c2godGhpcy5lZGl0aW5nSXRlbS5pbmZvU0tQRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2twcyA9IFtdDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nU2twID0gZmFsc2UNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBjdXN0b21MYWJlbFNrcCAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLnNrcHMuZmluZChlID0+IGUuaWQgPT0gb3B0KTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZWxlY3RlZC5jb2RlfSAtICR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgICAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVeiwNCiAgICAgICAgICAgICAgICB9KX1gDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYGA7DQogICAgICAgIH0sDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCiAgICAgICAgLy8gVE5WRUQgTUVUSE9EUw0KICAgICAgICB0bnZlZFJlYWNoZWRFbmRPZkxpc3QgKGUpIHsNCiAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5mZXRjaFRudmVkcygpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGRlYm91bmNlU2VhcmNoVG52ZWQgKHNlYXJjaFRleHQpIHsNCiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlKTsNCiAgICAgICAgICAgIHRoaXMuZGVib3VuY2UgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoVG52ZWRzV2l0aEtleXdvcmQoc2VhcmNoVGV4dCk7DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmV0Y2hUbnZlZHNXaXRoS2V5d29yZCAoa2V5d29yZCkgew0KICAgICAgICAgICAgdGhpcy50bnZlZHMgPSBbXQ0KICAgICAgICAgICAgdGhpcy50bnZlZFNlYXJjaFBheWxvYWQucGFnZSA9IDENCiAgICAgICAgICAgIHRoaXMudG52ZWRTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnDQogICAgICAgICAgICB0aGlzLmZldGNoVG52ZWRzKCkNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZmV0Y2hUbnZlZHMgKCkgew0KICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdUbnZlZCA9IHRydWUNCiAgICAgICAgICAgIGF3YWl0IGNydWRBbmRMaXN0c1NlcnZpY2Uuc2VhcmNoTGlzdFdpdGhLZXl3b3JkKFROVkVEX0FQSV9VUkwsIHRoaXMudG52ZWRTZWFyY2hQYXlsb2FkKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudG52ZWRzLnB1c2goLi4ucmVzLmRhdGEubGlzdCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNOZXh0UGFnZVRudmVkID0gcmVzLmRhdGEudG90YWwgLyB0aGlzLnRudmVkU2VhcmNoUGF5bG9hZC5pdGVtc1BlclBhZ2UgPiB0aGlzLnRudmVkU2VhcmNoUGF5bG9hZC5wYWdlDQogICAgICAgICAgICAgICAgICAgIHRoaXMudG52ZWRTZWFyY2hQYXlsb2FkLnBhZ2UgKz0gMQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNNb2RlQ3JlYXRlICYmIHRoaXMuZWRpdGluZ0l0ZW0udG52ZWRJZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kSXRtID0gdGhpcy50bnZlZHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLnRudmVkSWQpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kSXRtICYmIHRoaXMuZWRpdGluZ0l0ZW0uaW5mb1ROVkVERHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50bnZlZHMucHVzaCh0aGlzLmVkaXRpbmdJdGVtLmluZm9UTlZFRER0bykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRudmVkcyA9IFtdDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nVG52ZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGN1c3RvbUxhYmVsVG52ZWQgKG9wdCkgew0KICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy50bnZlZHMuZmluZChlID0+IGUuaWQgPT0gb3B0KTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZWxlY3RlZC5jb2RlfSAtICR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgICAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVeiwNCiAgICAgICAgICAgICAgICB9KX1gDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYGA7DQogICAgICAgIH0sDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIGFzeW5jIGZldGNoUHJvZHVjdE9yU2VydmljZXMgKHR5cGVJZCkgew0KICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdQcm9kdWN0T3JTZXJ2aWNlcyA9IHRydWUNCiAgICAgICAgICAgIGF3YWl0IGhlbHBlclNlcnZpY2UuZ2V0UHJvZHVjdE9yU2VydmljZXNCeVR5cGVJZCh0eXBlSWQsIHRoaXMucHJvZHVjdE9yU2VydmljZXNTZWFyY2hQYXlsb2FkKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdHMucHVzaCguLi5yZXMuZGF0YS5saXN0KQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc05leHRQYWdlUHJvZHVjdE9yU2VydmljZXMgPSByZXMuZGF0YS50b3RhbCAvIHRoaXMucHJvZHVjdE9yU2VydmljZXNTZWFyY2hQYXlsb2FkLml0ZW1zUGVyUGFnZSA+IHRoaXMucHJvZHVjdE9yU2VydmljZXNTZWFyY2hQYXlsb2FkLnBhZ2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0T3JTZXJ2aWNlc1NlYXJjaFBheWxvYWQucGFnZSArPSAxDQogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc01vZGVDcmVhdGUgJiYgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZEl0bSA9IHRoaXMucHJvZHVjdHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VJZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRJdG0gJiYgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cy5wdXNoKHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZUR0bykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzID0gW10NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdQcm9kdWN0T3JTZXJ2aWNlcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkIChrZXl3b3JkLCBtYWtlRmlyc3RTZWxlY3RlZCA9IGZhbHNlKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JzID0gW10NCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQucGFnZSA9IDENCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQua2V5d29yZCA9IGtleXdvcmQgPyBrZXl3b3JkIDogJycNCiAgICAgICAgICAgIC8vIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuc29ydEJ5ID0gW10NCiAgICAgICAgICAgIC8vIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuc29ydEJ5LnB1c2goJ2NyZWF0ZWQnKQ0KICAgICAgICAgICAgLy8gdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5zb3J0RGVzYyA9IFtdDQogICAgICAgICAgICAvLyB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnREZXNjLnB1c2goZmFsc2UpDQogICAgICAgICAgICB0aGlzLmZldGNoQ29udHJhY3RvcnMobWFrZUZpcnN0U2VsZWN0ZWQpDQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGZldGNoQ29udHJhY3RvcnMgKG1ha2VGaXJzdFNlbGVjdGVkKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnRCeSA9IFtdDQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnRCeS5wdXNoKCdjcmVhdGVkJykNCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuc29ydERlc2MgPSBbXQ0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5zb3J0RGVzYy5wdXNoKHRydWUpDQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gdHJ1ZQ0KICAgICAgICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQoJ2NvbnRyYWN0b3InLCB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLCAnYnktY29udHJhY3RvcicpDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycy5wdXNoKC4uLnJlcy5kYXRhLmxpc3QpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzTmV4dFBhZ2VDb250cmFjdG9ycyA9IHJlcy5kYXRhLnRvdGFsIC8gdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5pdGVtc1BlclBhZ2UgPiB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5wYWdlICs9IDENCiAgICAgICAgICAgICAgICAgICAgaWYgKG1ha2VGaXJzdFNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmNvbnRyYWN0b3JJZCA9IHRoaXMuY29udHJhY3RvcnMubGVuZ3RoID8gdGhpcy5jb250cmFjdG9yc1swXS5pZCA6IG51bGwNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNNb2RlQ3JlYXRlICYmIHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvcklkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udHJhY3RvckZvdW5kID0gdGhpcy5jb250cmFjdG9ycy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvcklkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250cmFjdG9yRm91bmQgJiYgdGhpcy5lZGl0aW5nSXRlbS5jb250cmFjdG9yRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycy5wdXNoKHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvckR0bykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JzID0gW10NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdDb250cmFjdG9ycyA9IGZhbHNlDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIC8qDQogICAgKiBDUkVBVEVEICovDQogICAgYXN5bmMgY3JlYXRlZCAoKSB7DQogICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKQ0KICAgICAgICB0aGlzLnByb2R1Y3RPclNlcnZpY2VzU2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgICAgIHRoaXMub2tlZFNlYXJjaFBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKQ0KICAgICAgICB0aGlzLnNrcFNlYXJjaFBheWxvYWQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKQ0KICAgICAgICB0aGlzLnRudmVkU2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gNTAwDQogICAgICAgIGlmICh0aGlzLmlzTW9kZUNyZWF0ZSkgew0KICAgICAgICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5nZXRFbXB0eShNQUlOX0FQSV9VUkwpDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UuZ2V0RW1wdHlDdXN0b21VcmwoYCR7QU5OT1VOQ0VEX01FRElBX0FQSV9VUkx9L2VtcHR5YCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0QW5ub3VuY2VkTWVkaWFEdG8gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5lZGl0aW5nSXRlbS5hbm5vdW5jZWRNZWRpYUR0b3MgfHwgIXRoaXMuZWRpdGluZ0l0ZW0uYW5ub3VuY2VkTWVkaWFEdG9zLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmFubm91bmNlZE1lZGlhRHRvcyA9IFtdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRBbm5vdW5jZWRNZWRpYUR0bykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5hbm5vdW5jZWRNZWRpYUR0b3MucHVzaCh0bXApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEVtcHR5Q3VzdG9tVXJsKGAke1BSSUNFX0FQUFJPVkFMX0FQSV9VUkx9L2VtcHR5YCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0UHJpY2VBcHByb3ZhbER0byA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVkaXRpbmdJdGVtLnByaWNlQXBwcm92YWxEdG9zIHx8ICF0aGlzLmVkaXRpbmdJdGVtLnByaWNlQXBwcm92YWxEdG9zLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnByaWNlQXBwcm92YWxEdG9zID0gW10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRtcCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdFByaWNlQXBwcm92YWxEdG8pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbER0b3MucHVzaCh0bXApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEVtcHR5Q3VzdG9tVXJsKGAke0NPTU1JU1NJT05fQVBQTElDQVRJT05fQVBJX1VSTH0vZW1wdHlgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRDb21taXNzaW9uQXBwbGljYXRpb25EdG8gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5lZGl0aW5nSXRlbS5jb21taXNzaW9uQXBwbGljYXRpb25EdG9zIHx8ICF0aGlzLmVkaXRpbmdJdGVtLmNvbW1pc3Npb25BcHBsaWNhdGlvbkR0b3MubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uY29tbWlzc2lvbkFwcGxpY2F0aW9uRHRvcyA9IFtdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRDb21taXNzaW9uQXBwbGljYXRpb25EdG8pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uY29tbWlzc2lvbkFwcGxpY2F0aW9uRHRvcy5wdXNoKHRtcCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGF3YWl0IGNydWRBbmRMaXN0c1NlcnZpY2UuZ2V0QnlJZChNQUlOX0FQSV9VUkwsIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuZG9jdW1lbnRTdGF0dXNDb2RlICE9ICdQRU5ESU5HJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNldEZpbGVzRnJvbVNlcnZlcigpDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVkaXRpbmdJdGVtLmFubm91bmNlZE1lZGlhRHRvcyB8fCAhdGhpcy5lZGl0aW5nSXRlbS5hbm5vdW5jZWRNZWRpYUR0b3MubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEVtcHR5Q3VzdG9tVXJsKGAke0FOTk9VTkNFRF9NRURJQV9BUElfVVJMfS9lbXB0eWApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0QW5ub3VuY2VkTWVkaWFEdG8gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZWRpdGluZ0l0ZW0uYW5ub3VuY2VkTWVkaWFEdG9zIHx8ICF0aGlzLmVkaXRpbmdJdGVtLmFubm91bmNlZE1lZGlhRHRvcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uYW5ub3VuY2VkTWVkaWFEdG9zID0gW10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRBbm5vdW5jZWRNZWRpYUR0bykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uYW5ub3VuY2VkTWVkaWFEdG9zLnB1c2godG1wKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRHRvcyB8fCAhdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRHRvcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UuZ2V0RW1wdHlDdXN0b21VcmwoYCR7UFJJQ0VfQVBQUk9WQUxfQVBJX1VSTH0vZW1wdHlgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFByaWNlQXBwcm92YWxEdG8gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbER0b3MgfHwgIXRoaXMuZWRpdGluZ0l0ZW0ucHJpY2VBcHByb3ZhbER0b3MubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnByaWNlQXBwcm92YWxEdG9zID0gW10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRQcmljZUFwcHJvdmFsRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5wcmljZUFwcHJvdmFsRHRvcy5wdXNoKHRtcCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZWRpdGluZ0l0ZW0uY29tbWlzc2lvbkFwcGxpY2F0aW9uRHRvcyB8fCAhdGhpcy5lZGl0aW5nSXRlbS5jb21taXNzaW9uQXBwbGljYXRpb25EdG9zLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5nZXRFbXB0eUN1c3RvbVVybChgJHtDT01NSVNTSU9OX0FQUExJQ0FUSU9OX0FQSV9VUkx9L2VtcHR5YCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRDb21taXNzaW9uQXBwbGljYXRpb25EdG8gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZWRpdGluZ0l0ZW0uY29tbWlzc2lvbkFwcGxpY2F0aW9uRHRvcyB8fCAhdGhpcy5lZGl0aW5nSXRlbS5jb21taXNzaW9uQXBwbGljYXRpb25EdG9zLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5jb21taXNzaW9uQXBwbGljYXRpb25EdG9zID0gW10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRDb21taXNzaW9uQXBwbGljYXRpb25EdG8pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmNvbW1pc3Npb25BcHBsaWNhdGlvbkR0b3MucHVzaCh0bXApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICAvLyBHRVQgQ09OVFJBQ1RPUlMNCiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaENvbnRyYWN0b3JzKCkNCg0KICAgICAgICAvLyBHRVQgT0tFRFMNCiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaE9rZWRzKCkNCg0KICAgICAgICBpZiAodGhpcy5pc0RvbWluYW50KSB7DQogICAgICAgICAgICAvLyBHRVQgU0tQUw0KICAgICAgICAgICAgYXdhaXQgdGhpcy5mZXRjaFNrcHMoKQ0KDQogICAgICAgICAgICAvLyBHRVQgVE5WRURTDQogICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoVG52ZWRzKCkNCg0KICAgICAgICAgICAgLy8gR0VUIEdST1VQX09GX0lORElWSURVQUxTDQogICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlDQogICAgICAgICAgICAgICAgLnNlYXJjaExpc3QoJ3JlZXN0ci9ncm91cC1vZi1pbmRpdmlkdWFscycsIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwT2ZJbmRpdmlkdWFscyA9IHJlcy5kYXRhLmxpc3Q7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEdFVCBSRUdJT05TDQogICAgICAgIGF3YWl0IGhlbHBlclNlcnZpY2UuZmV0Y2hSZWdpb25zRm9yQ29udHJhY3RvclJlZXN0ckJ5Q3VycmVudFVzZXJJZCgpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMucmVnaW9ucyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RlZCh0aGlzLmVkaXRpbmdJdGVtLnJlZ2lvbklkLCB0cnVlKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgfSkNCg0KICAgICAgICBpZiAodGhpcy4kcm91dGUubmFtZS5pbmNsdWRlcygnQ3JlYXRlJykgfHwgdGhpcy4kcm91dGUubmFtZS5pbmNsdWRlcygnVXBkYXRlJykpIHsNCiAgICAgICAgICAgIC8vIEdFVCBQUk9EVUNUX09SX1NFUlZJQ0VfVFlQRVMNCiAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UNCiAgICAgICAgICAgICAgICAuc2VhcmNoTGlzdCgnZGlyZWN0b3J5L3Byb2R1Y3Qtb3Itc2VydmljZS10eXBlcycsIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQsIHRoaXMuaXNEb21pbmFudCA/IEFQUEVORF9BUElfVVJMX0RPTUlOQU5UIDogdGhpcy5pc05hdHVyYWwgPyBBUFBFTkRfQVBJX1VSTF9OQVRVUkFMIDogJycpDQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RUeXBlcyA9IHJlcy5kYXRhLmxpc3Q7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdFR5cGVTZWxlY3RlZCh0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VUeXBlSWQsIHRydWUpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEdFVCBVTklUUw0KICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlDQogICAgICAgICAgICAuc2VhcmNoTGlzdFdpdGhLZXl3b3JkKCdkaXJlY3RvcnkvdW5pdHMnLCB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKQ0KICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMudW5pdHMgPSByZXMuZGF0YS5saXN0Ow0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgfSkNCiAgICB9DQp9DQo="},{"version":3,"sources":["CreateOrUpdate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAs6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateOrUpdate.vue","sourceRoot":"src/modules/reestr-contractors/modules/natural","sourcesContent":["<template>\r\n    <base-create-or-update-wrapper\r\n        @save=\"save\"\r\n        has-save-suspend\r\n        :custom-title=\"$t('actions.add_to_reestr')\"\r\n    >\r\n        <ValidationObserver\r\n            ref=\"observer\"\r\n            v-slot=\"{}\"\r\n        >\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseInputWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.orderNumber\"\r\n                        :label=\"$t('column.order_number')\"\r\n                        :placeholder=\"$t('column.order_number')\"\r\n                    />\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseDatePickerWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        :label=\"$t('column.added_date_to_reestr')\"\r\n                        :placeholder=\"$t('column.added_date_to_reestr')\"\r\n                        disable-after\r\n                        v-model=\"editingItem.reestrAcceptedDate\"\r\n                        lang=\"ru\"\r\n                    ></BaseDatePickerWithValidation>\r\n                </b-col>\r\n            </b-row>\r\n\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.contractorId\"\r\n                        :has-next-page=\"hasNextPageContractors\"\r\n                        @reachedEndOfList=\"contractorReachedEndOfList\"\r\n                        @search-change=\"debounceSearchContractors\"\r\n                        :searchable=\"true\"\r\n                        :allow-empty=\"false\"\r\n                        preserve-search\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingContractors\"\r\n                        :internal-search=\"false\"\r\n                        :options=\"contractors.map(e => e.id)\"\r\n                        :label=\"$t('column.business_entity')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelContractor\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                        with-create-addition\r\n                    >\r\n                        <template v-slot:append-slot>\r\n                            <b-button\r\n                                @click=\"contractorCreateModal = true\"\r\n                                variant=\"outline-primary\"\r\n                                style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n                            >\r\n                                <i class=\"mdi mdi-plus-circle\"></i>\r\n                            </b-button>\r\n                        </template>\r\n                    </BaseMultiselectWithValidation>\r\n                    <BaseModalForCreate\r\n                        v-model=\"contractorCreateModal\"\r\n                        without-list-search\r\n                        use-component-save-fn\r\n                        mainApiUrl=\"contractor\"\r\n                        createFormName=\"CreateFormContractor\"\r\n                        @new-ref-created-without-list-search=\"newRefCreated\"\r\n                    />\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.directoryProductOrServiceTypeId\"\r\n                        @select=\"productTypeSelected\"\r\n                        :options=\"productTypes.map(e => e.id)\"\r\n                        :label=\"$t('column.product_or_service_type')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelProductType\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <!-- $can('republic', 'for reestr') -->\r\n                    <b-row>\r\n                        <b-col :cols=\"$can('republic', 'for reestr') ? 8 : 12\">\r\n                            <BaseMultiselectWithValidation\r\n                                v-if=\"editingItem.isRepublic && !editingItem.contractorId\"\r\n                                rules=\"required\"\r\n                                class=\"required\"\r\n                                disabled\r\n                                :custom-styles=\"$can('republic', 'for reestr') ? `grid-template-columns: 38% 62%;` : ''\"\r\n                                :options=\"regions.map(e => e.regionId)\"\r\n                                :value=\"null\"\r\n                                :label=\"$t('column.region')\"\r\n                                :placeholder=\"$t('messages.please_select_business_entity')\"\r\n                                :custom-label=\"customLabelRegion\"\r\n                                open-direction=\"bottom\"\r\n                                :max-height=\"600\"\r\n                                :show-labels=\"false\"\r\n                            />\r\n                            <BaseMultiselectWithValidation\r\n                                v-else-if=\"editingItem.isRepublic && !contractorHasParent\"\r\n                                rules=\"required\"\r\n                                class=\"required\"\r\n                                multiple\r\n                                :hide-selected=\"true\"\r\n                                :close-on-select=\"false\"\r\n                                :custom-styles=\"$can('republic', 'for reestr') ? `grid-template-columns: 38% 62%;` : ''\"\r\n                                v-model=\"editingItem.regionIds\"\r\n                                :options=\"regions.map(e => e.regionId)\"\r\n                                @select=\"regionSelected\"\r\n                                :label=\"$t('column.region')\"\r\n                                placeholder=\"\"\r\n                                :custom-label=\"customLabelRegion\"\r\n                                open-direction=\"bottom\"\r\n                                :max-height=\"600\"\r\n                                :show-labels=\"false\"\r\n                            />\r\n                            <BaseMultiselectWithValidation\r\n                                v-else\r\n                                rules=\"required\"\r\n                                class=\"required\"\r\n                                :custom-styles=\"$can('republic', 'for reestr') ? `grid-template-columns: 38% 62%;` : ''\"\r\n                                v-model=\"editingItem.regionId\"\r\n                                :options=\"regions.map(e => e.regionId)\"\r\n                                @select=\"regionSelected\"\r\n                                :label=\"$t('column.region')\"\r\n                                placeholder=\"\"\r\n                                :custom-label=\"customLabelRegion\"\r\n                                open-direction=\"bottom\"\r\n                                :max-height=\"600\"\r\n                                :show-labels=\"false\"\r\n                            />\r\n                        </b-col>\r\n                        <b-col\r\n                            cols=\"4\"\r\n                            v-if=\"$can('republic', 'for reestr')\"\r\n                        >\r\n                            <div class=\"form-check form-check-right\">\r\n                                <input\r\n                                    v-model=\"editingItem.isRepublic\"\r\n                                    class=\"form-check-input\"\r\n                                    type=\"checkbox\"\r\n                                    id=\"formCheckIsLegal\"\r\n                                />\r\n                                <label\r\n                                    class=\"form-check-label font-weight-normal\"\r\n                                    for=\"formCheckIsLegal\"\r\n                                >\r\n                                    {{ $t('column.is_republic') }}\r\n                                </label>\r\n                            </div>\r\n                        </b-col>\r\n                    </b-row>\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.directoryProductOrServiceId\"\r\n                        :options=\"products.map(el => el.id)\"\r\n                        :label=\"$t('submodules.product_or_services.title')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelProduct\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                        :has-next-page=\"hasNextPageProductOrServices\"\r\n                        @reachedEndOfList=\"productOrServicesReachedEndOfList\"\r\n                        @search-change=\"debounceSearchProductOrServices\"\r\n                        :searchable=\"true\"\r\n                        :allow-empty=\"false\"\r\n                        preserve-search\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingProductOrServices\"\r\n                        :internal-search=\"false\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <b-row\r\n                v-if=\"isDominant && editingItem.isRepublic && !contractorHasParent\"\r\n                class=\"mb-3\"\r\n            >\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <b-row>\r\n                        <b-col cols=\"8\">\r\n                            <BaseMultiselectWithValidation\r\n                                v-if=\"editingItem.isGroup\"\r\n                                rules=\"required\"\r\n                                class=\"required\"\r\n                                custom-styles=\"grid-template-columns: 38% 62%;\"\r\n                                v-model=\"editingItem.groupOfIndividualsId\"\r\n                                :options=\"groupOfIndividuals.map(e => e.id)\"\r\n                                :label=\"$t('column.group_of_individuals')\"\r\n                                placeholder=\"\"\r\n                                :custom-label=\"customLabelGroupOfIndividuals\"\r\n                                open-direction=\"bottom\"\r\n                                :max-height=\"600\"\r\n                                :show-labels=\"false\"\r\n                            />\r\n                        </b-col>\r\n                        <b-col cols=\"4\">\r\n                            <div class=\"form-check form-check-right\">\r\n                                <input\r\n                                    v-model=\"editingItem.isGroup\"\r\n                                    class=\"form-check-input\"\r\n                                    type=\"checkbox\"\r\n                                    id=\"formCheckIsGroup\"\r\n                                />\r\n                                <label\r\n                                    class=\"form-check-label font-weight-normal\"\r\n                                    for=\"formCheckIsGroup\"\r\n                                >\r\n                                    {{ $t('column.is_group') }}\r\n                                </label>\r\n                            </div>\r\n                        </b-col>\r\n                    </b-row>\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        v-if=\"!editingItem.isRepublic\"\r\n                        not-required\r\n                        v-model=\"editingItem.districtIds\"\r\n                        multiple\r\n                        :close-on-select=\"false\"\r\n                        :hide-selected=\"true\"\r\n                        :options=\"districts.map(e => e.id)\"\r\n                        :label=\"$t('column.district')\"\r\n                        :custom-label=\"customLabelDistrict\"\r\n                        placeholder=\"\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    />\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        v-if=\"isDominant\"\r\n                        not-required\r\n                        v-model=\"editingItem.okedId\"\r\n                        :options=\"okeds.map(e => e.id)\"\r\n                        :label=\"$t('column.oked')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelOked\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                        :has-next-page=\"hasNextPageOked\"\r\n                        @reachedEndOfList=\"okedReachedEndOfList\"\r\n                        @search-change=\"debounceSearchOked\"\r\n                        :searchable=\"true\"\r\n                        preserve-search\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingOked\"\r\n                        :internal-search=\"false\"\r\n                    />\r\n                    <BaseMultiselectWithValidation\r\n                        v-else\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        :allow-empty=\"false\"\r\n                        v-model=\"editingItem.okedId\"\r\n                        :options=\"okeds.map(e => e.id)\"\r\n                        :label=\"$t('column.oked')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelOked\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                        :has-next-page=\"hasNextPageOked\"\r\n                        @reachedEndOfList=\"okedReachedEndOfList\"\r\n                        @search-change=\"debounceSearchOked\"\r\n                        :searchable=\"true\"\r\n                        preserve-search\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingOked\"\r\n                        :internal-search=\"false\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <b-row\r\n                v-if=\"isDominant\"\r\n                class=\"mb-3\"\r\n            >\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        not-required\r\n                        v-model=\"editingItem.tnvedId\"\r\n                        :options=\"tnveds.map(e => e.id)\"\r\n                        :label=\"$t('column.tnved_code')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelTnved\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                        :has-next-page=\"hasNextPageTnved\"\r\n                        @reachedEndOfList=\"tnvedReachedEndOfList\"\r\n                        @search-change=\"debounceSearchTnved\"\r\n                        :searchable=\"true\"\r\n                        preserve-search\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingTnved\"\r\n                        :internal-search=\"false\"\r\n                    />\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        not-required\r\n                        v-model=\"editingItem.skpId\"\r\n                        :options=\"skps.map(e => e.id)\"\r\n                        :label=\"$t('column.skp_code')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelSkp\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                        :has-next-page=\"hasNextPageSkp\"\r\n                        @reachedEndOfList=\"skpReachedEndOfList\"\r\n                        @search-change=\"debounceSearchSkp\"\r\n                        :searchable=\"true\"\r\n                        preserve-search\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingSkp\"\r\n                        :internal-search=\"false\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseInputWithValidation\r\n                        rules=\"required|positive\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.governmentPercentage\"\r\n                        :label=\"$t('column.government_percentage')\"\r\n                        :placeholder=\"$t('column.government_percentage')\"\r\n                    />\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.unitId\"\r\n                        :options=\"units.map(el => el.id)\"\r\n                        :label=\"$t('column.unit')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelUnit\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <ValidationProvider\r\n                        v-if=\"isModeCreate\"\r\n                        name=\"supplementDoc\"\r\n                        rules=\"required\"\r\n                        mode=\"passive\"\r\n                    >\r\n                        <template v-slot:default=\"\">\r\n                            <BaseFileUploaderWithValidation\r\n                                class=\"required\"\r\n                                ref=\"supplementDocUploader\"\r\n                                v-model=\"editingItem.supplementDocs\"\r\n                                data-vv-name=\"supplementDocFile\"\r\n                                data-vv-as=\"SupplementDocFile\"\r\n                                :max-files=\"1\"\r\n                                :label-on-top=\"false\"\r\n                                :label=\"$t('column.ilova')\"\r\n                            ></BaseFileUploaderWithValidation>\r\n                        </template>\r\n                    </ValidationProvider>\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseTextareaWithValidation\r\n                        not-required\r\n                        v-model=\"editingItem.comment\"\r\n                        max-rows=\"8\"\r\n                        :label=\"$t('column.comment')\"\r\n                        :placeholder=\"$t('column.comment')\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n\r\n            <!-- PRICE_APPROVAL_BASIS -->\r\n            <b-row\r\n                v-if=\"isNatural\"\r\n                class=\"mb-3\"\r\n            >\r\n                <b-col cols=\"12\">\r\n                    <h5 class=\"m-0 text-center\">\r\n                        {{ $t('column.price_approval_basis') }}\r\n                    </h5>\r\n                    <hr class=\"my-2\">\r\n                </b-col>\r\n                <b-col\r\n                    v-for=\"(el, index) in editingItem.priceApprovalDtos\"\r\n                    :key=\"`price-approval-dto-${index}`\"\r\n                    cols=\"12\"\r\n                >\r\n                    <b-row class=\"mb-3\">\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <b-row>\r\n                                <b-col\r\n                                    sm=\"12\"\r\n                                    md=\"6\"\r\n                                >\r\n                                    <BaseDatePickerWithValidation\r\n                                        not-required\r\n                                        custom-styles=\"grid-template-columns: 40% 60%;\"\r\n                                        :label=\"$t('column.date')\"\r\n                                        disable-after\r\n                                        v-model=\"el.priceApprovalDate\"\r\n                                        lang=\"ru\"\r\n                                    ></BaseDatePickerWithValidation>\r\n                                </b-col>\r\n                                <b-col\r\n                                    sm=\"12\"\r\n                                    md=\"6\"\r\n                                >\r\n                                    <BaseDatePickerWithValidation\r\n                                        not-required\r\n                                        custom-styles=\"grid-template-columns: 40% 60%;\"\r\n                                        :label=\"$t('column.effective_date_price')\"\r\n                                        disable-after\r\n                                        v-model=\"el.priceEffectiveDate\"\r\n                                        lang=\"ru\"\r\n                                    ></BaseDatePickerWithValidation>\r\n                                </b-col>\r\n                            </b-row>\r\n\r\n                        </b-col>\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                not-required\r\n                                v-model=\"el.priceApprovalNumber\"\r\n                                :label=\"$t('column.number')\"\r\n                            />\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row class=\"mb-3\">\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <ValidationProvider\r\n                                v-if=\"isModeCreate\"\r\n                                name=\"priceApprovalFiles\"\r\n                                rules=\"\"\r\n                                mode=\"passive\"\r\n                            >\r\n                                <template v-slot:default=\"\">\r\n                                    <BaseFileUploaderWithValidation\r\n                                        not-required\r\n                                        v-model=\"el.priceApprovalFiles\"\r\n                                        :max-files=\"5\"\r\n                                        :label-on-top=\"false\"\r\n                                        :label=\"$t('column.file')\"\r\n                                    ></BaseFileUploaderWithValidation>\r\n                                </template>\r\n                            </ValidationProvider>\r\n                        </b-col>\r\n\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <b-row>\r\n                                <b-col\r\n                                    cols=\"12\"\r\n                                    class=\"mb-3\"\r\n                                >\r\n                                    <BaseInputWithValidation\r\n                                        rules=\"positiveNotZero\"\r\n                                        v-model=\"el.currentPriceWithDuty\"\r\n                                        :label=\"$t('column.current_price_with_duty')\"\r\n                                    />\r\n                                </b-col>\r\n                                <b-col\r\n                                    cols=\"12\"\r\n                                    class=\"mb-3\"\r\n                                >\r\n                                    <BaseInputWithValidation\r\n                                        rules=\"positiveNotZero\"\r\n                                        v-model=\"el.currentPriceWithoutDuty\"\r\n                                        :label=\"$t('column.current_price_without_duty')\"\r\n                                    />\r\n                                </b-col>\r\n                                <b-col\r\n                                    sm=\"12\"\r\n                                    md=\"10\"\r\n                                    class=\"mb-3\"\r\n                                >\r\n                                    <BaseTextareaWithValidation\r\n                                        not-required\r\n                                        v-model=\"el.additionalInformation\"\r\n                                        custom-styles=\"grid-template-columns: 30% 70%;\"\r\n                                        :label=\"$t('column.additional_info')\"\r\n                                    />\r\n                                </b-col>\r\n                                <b-col\r\n                                    sm=\"12\"\r\n                                    md=\"2\"\r\n                                    class=\"d-flex align-items-start justify-content-end\"\r\n                                >\r\n                                    <b-btn\r\n                                        v-if=\"index == editingItem.priceApprovalDtos.length - 1\"\r\n                                        variant=\"success\"\r\n                                        class=\"mr-2\"\r\n                                        size=\"sm\"\r\n                                        @click=\"addPriceApprovalDto\"\r\n                                    ><i class=\"mdi mdi-plus\"></i></b-btn>\r\n                                    <b-btn\r\n                                        v-if=\"editingItem.priceApprovalDtos.length > 1\"\r\n                                        variant=\"danger\"\r\n                                        size=\"sm\"\r\n                                        @click=\"editingItem.priceApprovalDtos.splice(index, 1)\"\r\n                                    ><i class=\"mdi mdi-trash-can\"></i></b-btn>\r\n                                </b-col>\r\n                            </b-row>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <hr class=\"my-2\">\r\n                </b-col>\r\n            </b-row>\r\n            <!-- <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <b-row>\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseDatePickerWithValidation\r\n                                not-required\r\n                                custom-styles=\"grid-template-columns: 40% 60%;\"\r\n                                :label=\"$t('column.date')\"\r\n                                disable-after\r\n                                v-model=\"editingItem.priceApprovalDate\"\r\n                                lang=\"ru\"\r\n                            ></BaseDatePickerWithValidation>\r\n                        </b-col>\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseDatePickerWithValidation\r\n                                not-required\r\n                                custom-styles=\"grid-template-columns: 40% 60%;\"\r\n                                :label=\"$t('column.effective_date_price')\"\r\n                                disable-after\r\n                                v-model=\"editingItem.priceEffectiveDate\"\r\n                                lang=\"ru\"\r\n                            ></BaseDatePickerWithValidation>\r\n                        </b-col>\r\n                    </b-row>\r\n\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseInputWithValidation\r\n                        not-required\r\n                        v-model=\"editingItem.priceApprovalNumber\"\r\n                        :label=\"$t('column.number')\"\r\n                    />\r\n                </b-col> -->\r\n            <!-- <b-row\r\n                v-if=\"isNatural\"\r\n                class=\"mb-3\"\r\n            >\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <ValidationProvider\r\n                        v-if=\"isModeCreate\"\r\n                        name=\"priceApprovalFiles\"\r\n                        rules=\"\"\r\n                        mode=\"passive\"\r\n                    >\r\n                        <template v-slot:default=\"\">\r\n                            <BaseFileUploaderWithValidation\r\n                                not-required\r\n                                v-model=\"editingItem.priceApprovalFiles\"\r\n                                :max-files=\"5\"\r\n                                :label-on-top=\"false\"\r\n                                :label=\"$t('column.file')\"\r\n                            ></BaseFileUploaderWithValidation>\r\n                        </template>\r\n                    </ValidationProvider>\r\n                </b-col>\r\n\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <b-row>\r\n                        <b-col\r\n                            cols=\"12\"\r\n                            class=\"mb-3\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                rules=\"positiveNotZero\"\r\n                                v-model=\"editingItem.currentPriceWithDuty\"\r\n                                :label=\"$t('column.current_price_with_duty')\"\r\n                            />\r\n                        </b-col>\r\n                        <b-col\r\n                            cols=\"12\"\r\n                            class=\"mb-3\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                rules=\"positiveNotZero\"\r\n                                v-model=\"editingItem.currentPriceWithoutDuty\"\r\n                                :label=\"$t('column.current_price_without_duty')\"\r\n                            />\r\n                        </b-col>\r\n                        <b-col\r\n                            cols=\"12\"\r\n                            class=\"mb-3\"\r\n                        >\r\n                            <BaseTextareaWithValidation\r\n                                not-required\r\n                                v-model=\"editingItem.additionalInformation\"\r\n                                :label=\"$t('column.additional_info')\"\r\n                            />\r\n                        </b-col>\r\n                    </b-row>\r\n                </b-col>\r\n                <hr class=\"my-2\">\r\n            </b-row> -->\r\n            <!-- END OF PRICE_APPROVAL_BASIS FORM -->\r\n            <!-- ANNOUNCED_MEDIA_DTO -->\r\n            <b-row\r\n                v-if=\"isNatural\"\r\n                class=\"mb-3\"\r\n            >\r\n                <b-col cols=\"12\">\r\n                    <h5 class=\"m-0 text-center\">\r\n                        {{ $t('column.announced_media') }}\r\n                    </h5>\r\n                    <hr class=\"my-2\">\r\n                </b-col>\r\n\r\n                <b-col\r\n                    v-for=\"(el, index) in editingItem.announcedMediaDtos\"\r\n                    :key=\"`announced-media-${index}`\"\r\n                    cols=\"12\"\r\n                >\r\n                    <b-row class=\"mb-3\">\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                not-required\r\n                                v-model=\"el.announcedMediaName\"\r\n                                :label=\"$t('column.name')\"\r\n                            />\r\n                        </b-col>\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                not-required\r\n                                v-model=\"el.announcedMediaLink\"\r\n                                :label=\"$t('column.link')\"\r\n                            />\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row class=\"mb-3\">\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <ValidationProvider\r\n                                v-if=\"isModeCreate\"\r\n                                name=\"annuncedMediaFiles\"\r\n                                rules=\"\"\r\n                                mode=\"passive\"\r\n                            >\r\n                                <template v-slot:default=\"\">\r\n                                    <BaseFileUploaderWithValidation\r\n                                        not-required\r\n                                        v-model=\"el.announcedMediaFiles\"\r\n                                        :max-files=\"10\"\r\n                                        :label-on-top=\"false\"\r\n                                        :label=\"$t('column.files')\"\r\n                                    ></BaseFileUploaderWithValidation>\r\n                                </template>\r\n                            </ValidationProvider>\r\n                        </b-col>\r\n\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"5\"\r\n                        >\r\n                            <BaseDatePickerWithValidation\r\n                                not-required\r\n                                custom-styles=\"grid-template-columns: 30% 70%;\"\r\n                                :label=\"$t('column.date')\"\r\n                                disable-after\r\n                                v-model=\"el.announcedMediaDate\"\r\n                                lang=\"ru\"\r\n                            ></BaseDatePickerWithValidation>\r\n                        </b-col>\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"1\"\r\n                            class=\"d-flex align-items-start justify-content-end\"\r\n                        >\r\n                            <b-btn\r\n                                v-if=\"index == editingItem.announcedMediaDtos.length - 1\"\r\n                                variant=\"success\"\r\n                                class=\"mr-2\"\r\n                                size=\"sm\"\r\n                                @click=\"addAnnouncedMediaDto\"\r\n                            ><i class=\"mdi mdi-plus\"></i></b-btn>\r\n                            <b-btn\r\n                                v-if=\"editingItem.announcedMediaDtos.length > 1\"\r\n                                variant=\"danger\"\r\n                                size=\"sm\"\r\n                                @click=\"editingItem.announcedMediaDtos.splice(index, 1)\"\r\n                            ><i class=\"mdi mdi-trash-can\"></i></b-btn>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <hr class=\"my-2\">\r\n                </b-col>\r\n            </b-row>\r\n            <!-- END OF ANNOUNCED_MEDIA_DTO FORM -->\r\n\r\n            <!-- COMMISSION_APPLICATION_DTO -->\r\n            <b-row class=\"mb-3\">\r\n                <b-col cols=\"12\">\r\n                    <h5 class=\"m-0 text-center\">\r\n                        {{ $t('column.commission_applications') }}\r\n                    </h5>\r\n                    <hr class=\"my-2\">\r\n                </b-col>\r\n\r\n                <b-col\r\n                    v-for=\"(el, index) in editingItem.commissionApplicationDtos\"\r\n                    :key=\"`commission-application-${index}`\"\r\n                    cols=\"12\"\r\n                >\r\n                    <b-row class=\"mb-3\">\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseDatePickerWithValidation\r\n                                not-required\r\n                                :label=\"$t('column.date')\"\r\n                                disable-after\r\n                                v-model=\"el.commencementDate\"\r\n                                lang=\"ru\"\r\n                            ></BaseDatePickerWithValidation>\r\n                        </b-col>\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                not-required\r\n                                v-model=\"el.commencementNumber\"\r\n                                :label=\"$t('column.number')\"\r\n                            />\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row class=\"mb-3\">\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                not-required\r\n                                v-model=\"el.initiatorName\"\r\n                                :label=\"$t('column.initiator')\"\r\n                            />\r\n                        </b-col>\r\n\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                not-required\r\n                                v-model=\"el.completionWorkType\"\r\n                                :label=\"$t('column.finishing_type')\"\r\n                            />\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row class=\"mb-3\">\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                rules=\"positiveNotZero\"\r\n                                v-model=\"el.instructionAmount\"\r\n                                :label=\"$t('column.showcase_amount')\"\r\n                            />\r\n                        </b-col>\r\n\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"6\"\r\n                        >\r\n                            <BaseInputWithValidation\r\n                                rules=\"positiveNotZero\"\r\n                                v-model=\"el.residueAmount\"\r\n                                :label=\"$t('column.remainder_amount')\"\r\n                            />\r\n                        </b-col>\r\n                    </b-row>\r\n                    <b-row class=\"mb-3\">\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"5\"\r\n                        >\r\n                            <BaseDatePickerWithValidation\r\n                                not-required\r\n                                :label=\"$t('column.finishing_date')\"\r\n                                custom-styles=\"grid-template-columns: 30% 70%;\"\r\n                                disable-after\r\n                                v-model=\"el.completionWorkDate\"\r\n                                lang=\"ru\"\r\n                            ></BaseDatePickerWithValidation>\r\n                        </b-col>\r\n                        <b-col\r\n                            sm=\"12\"\r\n                            md=\"1\"\r\n                            class=\"d-flex align-items-start justify-content-end\"\r\n                        >\r\n                            <b-btn\r\n                                v-if=\"index == editingItem.commissionApplicationDtos.length - 1\"\r\n                                variant=\"success\"\r\n                                class=\"mr-2\"\r\n                                size=\"sm\"\r\n                                @click=\"addCommissionApplicationDto\"\r\n                            ><i class=\"mdi mdi-plus\"></i></b-btn>\r\n                            <b-btn\r\n                                v-if=\"editingItem.commissionApplicationDtos.length > 1\"\r\n                                variant=\"danger\"\r\n                                size=\"sm\"\r\n                                @click=\"editingItem.commissionApplicationDtos.splice(index, 1)\"\r\n                            ><i class=\"mdi mdi-trash-can\"></i></b-btn>\r\n                        </b-col>\r\n                    </b-row>\r\n                    <hr class=\"my-2\">\r\n                </b-col>\r\n            </b-row>\r\n            <!-- END OF COMMISSION_APPLICATION_DTO FORM -->\r\n        </ValidationObserver>\r\n    </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'reestr/contractor-reestr-documents'\r\nconst APPEND_API_URL_NATURAL = 'estestveniy'\r\nconst APPEND_API_URL_DOMINANT = 'daminiriushiy'\r\nconst OKED_API_URL = 'reestr/info-oked'\r\nconst SKP_API_URL = 'reestr/info-skp'\r\nconst TNVED_API_URL = 'reestr/info-tnved'\r\nconst PRICE_APPROVAL_API_URL = 'reestr/contractor-reestr-documents/get/price-approval'\r\nconst ANNOUNCED_MEDIA_API_URL = 'reestr/contractor-reestr-documents/get/announced-media'\r\nconst COMMISSION_APPLICATION_API_URL = 'reestr/contractor-reestr-documents/get/commission-application'\r\n/*\r\n* YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport helperService from \"@/shared/services/helper.service\"\r\n\r\nexport default {\r\n    name: \"CreateOrUpdate\",\r\n    /*\r\n    * COMPONENTS */\r\n    components: {},\r\n    /*\r\n    * DATA */\r\n    data () {\r\n        return {\r\n            editingItem: {},\r\n            publicPath: process.env.BASE_URL,\r\n            defaultCommissionApplicationDto: {},\r\n            defaultAnnouncedMediaDto: {},\r\n            defaultPriceApprovalDto: {},\r\n            regions: [],\r\n            districts: [],\r\n            hasNextPageContractors: false,\r\n            hasNextPageProductOrServices: false,\r\n            contractors: [],\r\n            debounce: null,\r\n            isLoadingContractors: false,\r\n            isLoadingProductOrServices: false,\r\n            contractorSearchPayload: {},\r\n            productOrServicesSearchPayload: {},\r\n            productTypes: [],\r\n            products: [],\r\n            units: [],\r\n            // OKED VARIABLES\r\n            okeds: [],\r\n            hasNextPageOked: false,\r\n            isLoadingOked: false,\r\n            okedSearchPayload: {},\r\n            // ----------------\r\n            // SKP VARIABLES\r\n            skps: [],\r\n            hasNextPageSkp: false,\r\n            isLoadingSkp: false,\r\n            skpSearchPayload: {},\r\n            // ----------------\r\n            // TNVED VARIABLES\r\n            tnveds: [],\r\n            hasNextPageTnved: false,\r\n            isLoadingTnved: false,\r\n            tnvedSearchPayload: {},\r\n            // ----------------\r\n            contractorCreateModal: false,\r\n            groupOfIndividuals: []\r\n        }\r\n    },\r\n    /*\r\n    * COMPUTED */\r\n    computed: {\r\n        computedObserver () {\r\n            return this.$refs.observer\r\n        },\r\n        isModeCreate () {\r\n            return this.$route.name === 'CreateNaturalContractorReestr' || this.$route.name === 'CreateDominantContractorReestr'\r\n        },\r\n        isDominant () {\r\n            return this.$route.name === 'CreateDominantContractorReestr' || this.$route.name === 'UpdateDominantContractorReestr'\r\n        },\r\n        isNatural () {\r\n            return this.$route.name === 'CreateNaturalContractorReestr' || this.$route.name === 'UpdateNaturalContractorReestr'\r\n        },\r\n        contractorHasParent () {\r\n            let contractor = this.contractors.find(el => el.id == this.editingItem.contractorId)\r\n            if (contractor) {\r\n                return contractor.parent\r\n            } else {\r\n                return false\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    * METHODS */\r\n    methods: {\r\n        save () {\r\n            this.computedObserver.validate().then(async valid => {\r\n                if (valid) {\r\n                    if (this.isDominant && !this.editingItem.okedId && !this.editingItem.skpId) {\r\n                        this.$toast(this.$t('messages.oked_or_skp_is_required'), { type: 'error' });\r\n                        return\r\n                    }\r\n                    if (!this.isDominant || !this.editingItem.isRepublic && this.contractorHasParent) {\r\n                        this.editingItem.isGroup = false\r\n                    }\r\n                    let tmpPriceApprovalFiles = (this.editingItem.priceApprovalFiles && this.editingItem.priceApprovalFiles.length) ? JSON.parse(JSON.stringify(this.editingItem.priceApprovalFiles)) : []\r\n                    let tmpProductOrServices = JSON.parse(JSON.stringify(this.editingItem.directoryProductOrServiceId))\r\n                    let tmpAnnouncedMedia = JSON.parse(JSON.stringify(this.editingItem.announcedMediaDtos))\r\n                    let tmpPriceApprovalDtos = JSON.parse(JSON.stringify(this.editingItem.priceApprovalDtos))\r\n                    let tmpCommissions = JSON.parse(JSON.stringify(this.editingItem.commissionApplicationDtos))\r\n                    if (this.editingItem.id) {\r\n                        let payload = await this.makeAndReturnFormDataForBase64()\r\n                        helperService.updateReestr(MAIN_API_URL, payload, `for-acceptance-${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}/${this.editingItem.id}`, true).then(res => {\r\n                            this.computedObserver.reset()\r\n                            this.editingItem = Object.assign({}, {});\r\n                            this.$router.go(-1)\r\n                            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                        })\r\n                    } else {\r\n                        let payload = await this.makeAndReturnFormDataForBase64()\r\n                        crudAndListsService.create(MAIN_API_URL, payload,\r\n                            `for-acceptance-${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}`, true).then(res => {\r\n                                this.computedObserver.reset()\r\n                                this.editingItem = Object.assign({}, {});\r\n                                this.$router.go(-1)\r\n                                this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                            })\r\n                            .catch(e => {\r\n                                this.editingItem.directoryProductOrServiceId = JSON.parse(JSON.stringify(tmpProductOrServices))\r\n                                this.editingItem.commissionApplicationDtos = JSON.parse(JSON.stringify(tmpCommissions))\r\n                                this.editingItem.announcedMediaDtos = JSON.parse(JSON.stringify(tmpAnnouncedMedia))\r\n                                this.editingItem.priceApprovalDtos = JSON.parse(JSON.stringify(tmpPriceApprovalDtos))\r\n                                this.editingItem.priceApprovalFiles = JSON.parse(JSON.stringify(tmpPriceApprovalFiles))\r\n                            })\r\n                    }\r\n                } else {\r\n                    this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                }\r\n            });\r\n        },\r\n        async setFilesFromServer () {\r\n            // ILOVA\r\n            fetch(this.publicPath + this.editingItem.fileUrl)\r\n                .then((res) => res.blob())\r\n                .then((myBlob) => {\r\n                    myBlob.name = f.name;\r\n                    myBlob.lastModified = new Date();\r\n                    const myFile = new File([myBlob], f.name, {\r\n                        type: myBlob.type,\r\n                    });\r\n\r\n                    let url = this.publicPath + f.url;\r\n                    this.$refs.supplementDocUploader.$refs.dropzone.manuallyAddFile(myFile, url);\r\n                })\r\n                .catch(e => console.log(e));\r\n\r\n            // this.editingItem.objectPhotoList.forEach(f => {\r\n            //     fetch(this.publicPath + f.url)\r\n            //         .then((res) => res.blob())\r\n            //         .then((myBlob) => {\r\n            //             myBlob.name = f.name;\r\n            //             myBlob.lastModified = new Date();\r\n            //             const myFile = new File([myBlob], f.name, {\r\n            //                 type: myBlob.type,\r\n            //             });\r\n\r\n            //             let url = this.publicPath + f.url;\r\n            //             this.$refs.photosUploader.$refs.dropzone.manuallyAddFile(myFile, url);\r\n            //         })\r\n            //         .catch(e => console.log(e));\r\n            // })\r\n        },\r\n        async regionSelected ($event, dontResetDistrict = false) {\r\n            if (!dontResetDistrict) {\r\n                this.editingItem.districtIds = []\r\n            }\r\n            // GET DISTRICTS\r\n            if ($event)\r\n                await helperService.getGeoLocationsByParentId($event)\r\n                    .then(res => {\r\n                        this.districts = res.data\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e)\r\n                    })\r\n        },\r\n        addCommissionApplicationDto () {\r\n            let tmp = Object.assign({}, this.defaultCommissionApplicationDto)\r\n            this.editingItem.commissionApplicationDtos.push(tmp)\r\n        },\r\n        addAnnouncedMediaDto () {\r\n            let tmp = Object.assign({}, this.defaultAnnouncedMediaDto)\r\n            this.editingItem.announcedMediaDtos.push(tmp)\r\n        },\r\n        addPriceApprovalDto () {\r\n            let tmp = Object.assign({}, this.defaultPriceApprovalDto)\r\n            this.editingItem.priceApprovalDtos.push(tmp)\r\n        },\r\n        newRefCreated (formName) {\r\n            if (formName == 'CreateFormContractor') {\r\n                this.fetchContractorsWithKeyword('', true)\r\n            }\r\n        },\r\n        /* makeAndReturnQueryParams () {\r\n            let queryString = `contractorId=${this.editingItem.contractorId}\r\n                         &directoryProductOrServiceTypeId=${this.editingItem.directoryProductOrServiceTypeId}\r\n                         &governmentPercentage=${this.editingItem.governmentPercentage}\r\n                         &orderNumber=${this.editingItem.orderNumber}\r\n                         &reestrAcceptedDate=${this.editingItem.reestrAcceptedDate}`\r\n            this.editingItem.directoryProductOrServiceId.forEach(id => {\r\n                queryString += `&directoryProductOrServiceId=${id}`\r\n            })\r\n            return queryString\r\n        }, */\r\n        getBase64 (file) {\r\n            return new Promise((resolve, reject) => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(file);\r\n                reader.onload = () => resolve(reader.result);\r\n                reader.onerror = error => reject(error);\r\n            });\r\n        },\r\n        async makeAndReturnFormDataForBase64 () {\r\n            // this.editingItem.supplementDocs = this.editingItem.supplementDocs.map(f => f.file.dataURL)\r\n            let vm = this\r\n            /* if (this.editingItem.priceApprovalFiles && this.editingItem.priceApprovalFiles.length) {\r\n                if (this.editingItem.priceApprovalFiles[0].file.dataURL) {\r\n                    this.editingItem.priceApprovalFiles = this.editingItem.priceApprovalFiles[0].file.dataURL\r\n                } else {\r\n                    let res = await this.getBase64(this.editingItem.priceApprovalFiles[0].file)\r\n                    this.editingItem.priceApprovalFiles = res\r\n                }\r\n            } */\r\n            /* let base64PriceFiles = []\r\n            if (this.editingItem.priceApprovalFiles) {\r\n                this.editingItem.priceApprovalFiles.forEach(async f => {\r\n                    if (f.file.dataURL) {\r\n                        base64PriceFiles.push(f.file.dataURL)\r\n                    } else {\r\n                        let res = await this.getBase64(f.file)\r\n                        base64PriceFiles.push(res)\r\n                    }\r\n                })\r\n            }\r\n            this.editingItem.priceApprovalFiles = base64PriceFiles */\r\n            /* this.editingItem.priceApprovalFiles = this.editingItem.priceApprovalFiles ? this.editingItem.priceApprovalFiles.map(async function (f) {\r\n                let url = null\r\n                if (f.file.dataURL) {\r\n                    url = f.file.dataURL\r\n                } else {\r\n                    let res = await vm.getBase64(f.file)\r\n                    url = res\r\n                }\r\n                return url\r\n            }) : [] */\r\n            this.editingItem.announcedMediaDtos = await this.editingItem.announcedMediaDtos.filter(el => {\r\n                if (el.announcedMediaName) {\r\n                    let base64AnnouncementFiles = []\r\n                    if (el.announcedMediaFiles) {\r\n                        el.announcedMediaFiles.forEach(async f => {\r\n                            if (f.file.dataURL) {\r\n                                base64AnnouncementFiles.push(f.file.dataURL)\r\n                            } else {\r\n                                let res = await this.getBase64(f.file)\r\n                                base64AnnouncementFiles.push(res)\r\n                            }\r\n                        })\r\n                    }\r\n                    el.announcedMediaFiles = base64AnnouncementFiles\r\n                    /* el.announcedMediaFiles = el.announcedMediaFiles ? el.announcedMediaFiles.map(async function (f) {\r\n                        let url = null\r\n                        if (f.file.dataURL) {\r\n                            url = f.file.dataURL\r\n                        } else {\r\n                            let res = await vm.getBase64(f.file)\r\n                            url = res\r\n                        }\r\n                        return url\r\n                    }) : [] */\r\n                    return el\r\n                }\r\n            })\r\n\r\n            this.editingItem.priceApprovalDtos = await this.editingItem.priceApprovalDtos.filter(el => {\r\n                if (el.priceApprovalNumber) {\r\n                    let base64PriceApprovalFiles = []\r\n                    if (el.priceApprovalFiles) {\r\n                        el.priceApprovalFiles.forEach(async f => {\r\n                            if (f.file.dataURL) {\r\n                                base64PriceApprovalFiles.push(f.file.dataURL)\r\n                            } else {\r\n                                let res = await this.getBase64(f.file)\r\n                                base64PriceApprovalFiles.push(res)\r\n                            }\r\n                        })\r\n                    }\r\n                    el.priceApprovalFiles = base64PriceApprovalFiles\r\n                    return el\r\n                }\r\n            })\r\n\r\n            this.editingItem.commissionApplicationDtos = this.editingItem.commissionApplicationDtos.filter(el => {\r\n                if (el.commencementNumber && el.initiatorName) {\r\n                    return el\r\n                }\r\n            })\r\n            // this.editingItem.okedIds = []\r\n            // this.editingItem.directoryProductOrServiceId = this.editingItem.directoryProductOrServiceId.map(el => {\r\n            //     this.editingItem.okedIds.push(el.okedId)\r\n            //     return el.id\r\n            // })\r\n            if (this.editingItem.supplementDocs && this.editingItem.supplementDocs[0].file.dataURL) {\r\n                this.editingItem.file = this.editingItem.supplementDocs[0].file.dataURL\r\n                // delete this.editingItem.supplementDocs\r\n                return this.editingItem\r\n            } else if (this.editingItem.supplementDocs) {\r\n                let res = await this.getBase64(this.editingItem.supplementDocs[0].file)\r\n                this.editingItem.file = res\r\n                // delete this.editingItem.supplementDocs\r\n                return this.editingItem\r\n                /* this.getBase64(this.editingItem.supplementDocs[0].file).then(data => {\r\n                    \r\n                }) */\r\n            } else {\r\n                return this.editingItem\r\n            }\r\n\r\n        },\r\n        customLabelRegion (opt) {\r\n            let selected = this.regions.find(e => e.regionId == (opt.regionId ? opt.regionId : opt));\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.regionNameRu,\r\n                    nameLt: selected.regionNameLt,\r\n                    nameUz: selected.regionNameUz,\r\n                })}`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelDistrict (opt) {\r\n            let selectedDistrict = this.districts.find(e => e.id == opt);\r\n            if (selectedDistrict) {\r\n                return `${this.getName({\r\n                    nameRu: selectedDistrict.nameRu,\r\n                    nameLt: selectedDistrict.nameLt,\r\n                    nameUz: selectedDistrict.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelProduct (opt) {\r\n            let selected = this.products.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelUnit (opt) {\r\n            let selected = this.units.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelGroupOfIndividuals (opt) {\r\n            let selected = this.groupOfIndividuals.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${selected.name}`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelProductType (opt) {\r\n            let selected = this.productTypes.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        async productTypeSelected ($event, dontResetDistrict = false) {\r\n            if (!dontResetDistrict) {\r\n                this.products = []\r\n                this.editingItem.directoryProductOrServiceId = null\r\n                this.productOrServicesSearchPayload.page = 1\r\n            }\r\n            if ($event) {\r\n                // GET PRODUCT_OR_SERVICES\r\n                await this.fetchProductOrServices($event)\r\n                // await helperService.getProductsByProdectTypeId($event)\r\n                //     .then(res => {\r\n                //         this.products = res.data\r\n                //     })\r\n                //     .catch(e => {\r\n                //         this.products = []\r\n                //         console.log(e)\r\n                //     })\r\n            }\r\n        },\r\n        contractorReachedEndOfList (e) {\r\n            if (e && !this.isLoadingContractors) {\r\n                this.fetchContractors()\r\n            }\r\n        },\r\n        productOrServicesReachedEndOfList (e) {\r\n            if (e) {\r\n                this.fetchProductOrServices(this.editingItem.directoryProductOrServiceTypeId)\r\n            }\r\n        },\r\n        customLabelContractor (opt) {\r\n            let selected = this.contractors.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${selected.fullName}`\r\n            }\r\n            return ``;\r\n        },\r\n        async debounceSearchProductOrServices (searchText) {\r\n            clearTimeout(this.debounce);\r\n            this.debounce = setTimeout(async () => {\r\n                await this.fetchProductOrServicesWithKeyword(searchText);\r\n            }, 1000);\r\n        },\r\n        async debounceSearchContractors (searchText) {\r\n            clearTimeout(this.debounce);\r\n            this.debounce = setTimeout(async () => {\r\n                await this.fetchContractorsWithKeyword(searchText);\r\n            }, 1000);\r\n        },\r\n        fetchProductOrServicesWithKeyword (keyword) {\r\n            this.products = []\r\n            this.productOrServicesSearchPayload.page = 1\r\n            this.productOrServicesSearchPayload.keyword = keyword ? keyword : ''\r\n            this.fetchProductOrServices(this.editingItem.directoryProductOrServiceTypeId)\r\n        },\r\n        // OKED METHODS\r\n        okedReachedEndOfList (e) {\r\n            if (e) {\r\n                this.fetchOkeds()\r\n            }\r\n        },\r\n        async debounceSearchOked (searchText) {\r\n            clearTimeout(this.debounce);\r\n            this.debounce = setTimeout(async () => {\r\n                await this.fetchOkedsWithKeyword(searchText);\r\n            }, 1000);\r\n        },\r\n        fetchOkedsWithKeyword (keyword) {\r\n            this.okeds = []\r\n            this.okedSearchPayload.page = 1\r\n            this.okedSearchPayload.keyword = keyword ? keyword : ''\r\n            this.fetchOkeds()\r\n        },\r\n        async fetchOkeds () {\r\n            this.isLoadingOked = true\r\n            await crudAndListsService.searchListWithKeyword(OKED_API_URL, this.okedSearchPayload)\r\n                .then(res => {\r\n                    this.okeds.push(...res.data.list)\r\n                    this.hasNextPageOked = res.data.total / this.okedSearchPayload.itemsPerPage > this.okedSearchPayload.page\r\n                    this.okedSearchPayload.page += 1\r\n                    if (!this.isModeCreate && this.editingItem.okedId) {\r\n                        let foundItm = this.okeds.find(el => el.id == this.editingItem.okedId)\r\n                        if (!foundItm && this.editingItem.infoOkedDto) {\r\n                            this.okeds.push(this.editingItem.infoOkedDto)\r\n                        }\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                    this.okeds = []\r\n                })\r\n                .finally(() => {\r\n                    this.isLoadingOked = false\r\n                })\r\n        },\r\n        customLabelOked (opt) {\r\n            let selected = this.okeds.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${selected.code} - ${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })}`\r\n            }\r\n            return ``;\r\n        },\r\n        // --------------------------\r\n\r\n        // SKP METHODS\r\n        skpReachedEndOfList (e) {\r\n            if (e) {\r\n                this.fetchSkps()\r\n            }\r\n        },\r\n        async debounceSearchSkp (searchText) {\r\n            clearTimeout(this.debounce);\r\n            this.debounce = setTimeout(async () => {\r\n                await this.fetchSkpsWithKeyword(searchText);\r\n            }, 1000);\r\n        },\r\n        fetchSkpsWithKeyword (keyword) {\r\n            this.skps = []\r\n            this.skpSearchPayload.page = 1\r\n            this.skpSearchPayload.keyword = keyword ? keyword : ''\r\n            this.fetchSkps()\r\n        },\r\n        async fetchSkps () {\r\n            this.isLoadingSkp = true\r\n            await crudAndListsService.searchListWithKeyword(SKP_API_URL, this.skpSearchPayload)\r\n                .then(res => {\r\n                    this.skps.push(...res.data.list)\r\n                    this.hasNextPageSkp = res.data.total / this.skpSearchPayload.itemsPerPage > this.skpSearchPayload.page\r\n                    this.skpSearchPayload.page += 1\r\n                    if (!this.isModeCreate && this.editingItem.skpId) {\r\n                        let foundItm = this.skps.find(el => el.id == this.editingItem.skpId)\r\n                        if (!foundItm && this.editingItem.infoSKPDto) {\r\n                            this.skps.push(this.editingItem.infoSKPDto)\r\n                        }\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                    this.skps = []\r\n                })\r\n                .finally(() => {\r\n                    this.isLoadingSkp = false\r\n                })\r\n        },\r\n        customLabelSkp (opt) {\r\n            let selected = this.skps.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${selected.code} - ${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })}`\r\n            }\r\n            return ``;\r\n        },\r\n        // --------------------------\r\n\r\n        // TNVED METHODS\r\n        tnvedReachedEndOfList (e) {\r\n            if (e) {\r\n                this.fetchTnveds()\r\n            }\r\n        },\r\n        async debounceSearchTnved (searchText) {\r\n            clearTimeout(this.debounce);\r\n            this.debounce = setTimeout(async () => {\r\n                await this.fetchTnvedsWithKeyword(searchText);\r\n            }, 1000);\r\n        },\r\n        fetchTnvedsWithKeyword (keyword) {\r\n            this.tnveds = []\r\n            this.tnvedSearchPayload.page = 1\r\n            this.tnvedSearchPayload.keyword = keyword ? keyword : ''\r\n            this.fetchTnveds()\r\n        },\r\n        async fetchTnveds () {\r\n            this.isLoadingTnved = true\r\n            await crudAndListsService.searchListWithKeyword(TNVED_API_URL, this.tnvedSearchPayload)\r\n                .then(res => {\r\n                    this.tnveds.push(...res.data.list)\r\n                    this.hasNextPageTnved = res.data.total / this.tnvedSearchPayload.itemsPerPage > this.tnvedSearchPayload.page\r\n                    this.tnvedSearchPayload.page += 1\r\n                    if (!this.isModeCreate && this.editingItem.tnvedId) {\r\n                        let foundItm = this.tnveds.find(el => el.id == this.editingItem.tnvedId)\r\n                        if (!foundItm && this.editingItem.infoTNVEDDto) {\r\n                            this.tnveds.push(this.editingItem.infoTNVEDDto)\r\n                        }\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                    this.tnveds = []\r\n                })\r\n                .finally(() => {\r\n                    this.isLoadingTnved = false\r\n                })\r\n        },\r\n        customLabelTnved (opt) {\r\n            let selected = this.tnveds.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${selected.code} - ${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })}`\r\n            }\r\n            return ``;\r\n        },\r\n        // --------------------------\r\n        async fetchProductOrServices (typeId) {\r\n            this.isLoadingProductOrServices = true\r\n            await helperService.getProductOrServicesByTypeId(typeId, this.productOrServicesSearchPayload)\r\n                .then(res => {\r\n                    this.products.push(...res.data.list)\r\n                    this.hasNextPageProductOrServices = res.data.total / this.productOrServicesSearchPayload.itemsPerPage > this.productOrServicesSearchPayload.page\r\n                    this.productOrServicesSearchPayload.page += 1\r\n                    if (!this.isModeCreate && this.editingItem.directoryProductOrServiceId) {\r\n                        let foundItm = this.products.find(el => el.id == this.editingItem.directoryProductOrServiceId)\r\n                        if (!foundItm && this.editingItem.directoryProductOrServiceDto) {\r\n                            this.products.push(this.editingItem.directoryProductOrServiceDto)\r\n                        }\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                    this.products = []\r\n                })\r\n                .finally(() => {\r\n                    this.isLoadingProductOrServices = false\r\n                })\r\n        },\r\n        fetchContractorsWithKeyword (keyword, makeFirstSelected = false) {\r\n            this.contractors = []\r\n            this.contractorSearchPayload.page = 1\r\n            this.contractorSearchPayload.keyword = keyword ? keyword : ''\r\n            // this.contractorSearchPayload.sortBy = []\r\n            // this.contractorSearchPayload.sortBy.push('created')\r\n            // this.contractorSearchPayload.sortDesc = []\r\n            // this.contractorSearchPayload.sortDesc.push(false)\r\n            this.fetchContractors(makeFirstSelected)\r\n        },\r\n        async fetchContractors (makeFirstSelected) {\r\n            this.contractorSearchPayload.sortBy = []\r\n            this.contractorSearchPayload.sortBy.push('created')\r\n            this.contractorSearchPayload.sortDesc = []\r\n            this.contractorSearchPayload.sortDesc.push(true)\r\n            this.isLoadingContractors = true\r\n            await crudAndListsService.searchListWithKeyword('contractor', this.contractorSearchPayload, 'by-contractor')\r\n                .then(res => {\r\n                    this.contractors.push(...res.data.list)\r\n                    this.hasNextPageContractors = res.data.total / this.contractorSearchPayload.itemsPerPage > this.contractorSearchPayload.page\r\n                    this.contractorSearchPayload.page += 1\r\n                    if (makeFirstSelected) {\r\n                        this.editingItem.contractorId = this.contractors.length ? this.contractors[0].id : null\r\n                    }\r\n                    if (!this.isModeCreate && this.editingItem.contractorId) {\r\n                        let contractorFound = this.contractors.find(el => el.id == this.editingItem.contractorId)\r\n                        if (!contractorFound && this.editingItem.contractorDto) {\r\n                            this.contractors.push(this.editingItem.contractorDto)\r\n                        }\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                    this.contractors = []\r\n                })\r\n                .finally(() => {\r\n                    this.isLoadingContractors = false\r\n                })\r\n        },\r\n    },\r\n    /*\r\n    * CREATED */\r\n    async created () {\r\n        this.contractorSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n        this.productOrServicesSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n        this.okedSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n        this.skpSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n        this.tnvedSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n        this.var_default_search_payload.itemsPerPage = 500\r\n        if (this.isModeCreate) {\r\n            await crudAndListsService.getEmpty(MAIN_API_URL)\r\n                .then(res => {\r\n                    this.editingItem = res.data\r\n                    crudAndListsService.getEmptyCustomUrl(`${ANNOUNCED_MEDIA_API_URL}/empty`)\r\n                        .then(res => {\r\n                            this.defaultAnnouncedMediaDto = res.data\r\n                            if (!this.editingItem.announcedMediaDtos || !this.editingItem.announcedMediaDtos.length) {\r\n                                this.editingItem.announcedMediaDtos = []\r\n                                let tmp = Object.assign({}, this.defaultAnnouncedMediaDto)\r\n                                this.editingItem.announcedMediaDtos.push(tmp)\r\n                            }\r\n                        })\r\n                        .catch(e => {\r\n                            console.log(e)\r\n                        })\r\n\r\n                    crudAndListsService.getEmptyCustomUrl(`${PRICE_APPROVAL_API_URL}/empty`)\r\n                        .then(res => {\r\n                            this.defaultPriceApprovalDto = res.data\r\n                            if (!this.editingItem.priceApprovalDtos || !this.editingItem.priceApprovalDtos.length) {\r\n                                this.editingItem.priceApprovalDtos = []\r\n                                let tmp = Object.assign({}, this.defaultPriceApprovalDto)\r\n                                this.editingItem.priceApprovalDtos.push(tmp)\r\n                            }\r\n                        })\r\n                        .catch(e => {\r\n                            console.log(e)\r\n                        })\r\n\r\n                    crudAndListsService.getEmptyCustomUrl(`${COMMISSION_APPLICATION_API_URL}/empty`)\r\n                        .then(res => {\r\n                            this.defaultCommissionApplicationDto = res.data\r\n                            if (!this.editingItem.commissionApplicationDtos || !this.editingItem.commissionApplicationDtos.length) {\r\n                                this.editingItem.commissionApplicationDtos = []\r\n                                let tmp = Object.assign({}, this.defaultCommissionApplicationDto)\r\n                                this.editingItem.commissionApplicationDtos.push(tmp)\r\n                            }\r\n                        })\r\n                        .catch(e => {\r\n                            console.log(e)\r\n                        })\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n\r\n        } else {\r\n            await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, true)\r\n                .then(res => {\r\n                    if (res.data.documentStatusCode != 'PENDING') {\r\n                        this.$router.go(-1)\r\n                    }\r\n                    this.editingItem = res.data\r\n                    // this.setFilesFromServer()\r\n\r\n                    if (!this.editingItem.announcedMediaDtos || !this.editingItem.announcedMediaDtos.length) {\r\n                        crudAndListsService.getEmptyCustomUrl(`${ANNOUNCED_MEDIA_API_URL}/empty`)\r\n                            .then(res => {\r\n                                this.defaultAnnouncedMediaDto = res.data\r\n                                if (!this.editingItem.announcedMediaDtos || !this.editingItem.announcedMediaDtos.length) {\r\n                                    this.editingItem.announcedMediaDtos = []\r\n                                    let tmp = Object.assign({}, this.defaultAnnouncedMediaDto)\r\n                                    this.editingItem.announcedMediaDtos.push(tmp)\r\n                                }\r\n                            })\r\n                            .catch(e => {\r\n                                console.log(e)\r\n                            })\r\n                    }\r\n\r\n                    if (!this.editingItem.priceApprovalDtos || !this.editingItem.priceApprovalDtos.length) {\r\n                        crudAndListsService.getEmptyCustomUrl(`${PRICE_APPROVAL_API_URL}/empty`)\r\n                            .then(res => {\r\n                                this.defaultPriceApprovalDto = res.data\r\n                                if (!this.editingItem.priceApprovalDtos || !this.editingItem.priceApprovalDtos.length) {\r\n                                    this.editingItem.priceApprovalDtos = []\r\n                                    let tmp = Object.assign({}, this.defaultPriceApprovalDto)\r\n                                    this.editingItem.priceApprovalDtos.push(tmp)\r\n                                }\r\n                            })\r\n                            .catch(e => {\r\n                                console.log(e)\r\n                            })\r\n                    }\r\n\r\n                    if (!this.editingItem.commissionApplicationDtos || !this.editingItem.commissionApplicationDtos.length) {\r\n                        crudAndListsService.getEmptyCustomUrl(`${COMMISSION_APPLICATION_API_URL}/empty`)\r\n                            .then(res => {\r\n                                this.defaultCommissionApplicationDto = res.data\r\n                                if (!this.editingItem.commissionApplicationDtos || !this.editingItem.commissionApplicationDtos.length) {\r\n                                    this.editingItem.commissionApplicationDtos = []\r\n                                    let tmp = Object.assign({}, this.defaultCommissionApplicationDto)\r\n                                    this.editingItem.commissionApplicationDtos.push(tmp)\r\n                                }\r\n                            })\r\n                            .catch(e => {\r\n                                console.log(e)\r\n                            })\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        }\r\n        // GET CONTRACTORS\r\n        await this.fetchContractors()\r\n\r\n        // GET OKEDS\r\n        await this.fetchOkeds()\r\n\r\n        if (this.isDominant) {\r\n            // GET SKPS\r\n            await this.fetchSkps()\r\n\r\n            // GET TNVEDS\r\n            await this.fetchTnveds()\r\n\r\n            // GET GROUP_OF_INDIVIDUALS\r\n            crudAndListsService\r\n                .searchList('reestr/group-of-individuals', this.var_default_search_payload)\r\n                .then((res) => {\r\n                    this.groupOfIndividuals = res.data.list;\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        }\r\n\r\n        // GET REGIONS\r\n        await helperService.fetchRegionsForContractorReestrByCurrentUserId()\r\n            .then(res => {\r\n                this.regions = res.data\r\n                this.regionSelected(this.editingItem.regionId, true)\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            })\r\n\r\n        if (this.$route.name.includes('Create') || this.$route.name.includes('Update')) {\r\n            // GET PRODUCT_OR_SERVICE_TYPES\r\n            crudAndListsService\r\n                .searchList('directory/product-or-service-types', this.var_default_search_payload, this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : '')\r\n                .then((res) => {\r\n                    this.productTypes = res.data.list;\r\n                    this.productTypeSelected(this.editingItem.directoryProductOrServiceTypeId, true)\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        }\r\n\r\n        // GET UNITS\r\n        crudAndListsService\r\n            .searchListWithKeyword('directory/units', this.var_default_search_payload)\r\n            .then((res) => {\r\n                this.units = res.data.list;\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            })\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.col-form-label {\r\n    padding-top: 0;\r\n}\r\n\r\nul {\r\n    list-style-type: none;\r\n}\r\n</style>"]}]}