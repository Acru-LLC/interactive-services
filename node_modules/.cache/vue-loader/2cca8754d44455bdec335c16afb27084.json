{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\modules\\products\\bakery-stations\\modules\\list_and_crud\\components\\MapInModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\modules\\products\\bakery-stations\\modules\\list_and_crud\\components\\MapInModal.vue","mtime":1674799497743},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAibW9tZW50IjsNCmltcG9ydCB7IExNYXAsIExNYXJrZXIsIExUaWxlTGF5ZXIgfSBmcm9tICJ2dWUyLWxlYWZsZXQiOw0KLy8gaW1wb3J0IHsgZGVsZXRlRXZlbnQgfSBmcm9tICIuL2FwaSI7DQovLyBpbXBvcnQgInZ1ZS13ZWF0aGVyLXdpZGdldC9kaXN0L2Nzcy92dWUtd2VhdGhlci13aWRnZXQuY3NzIjsNCi8vIGltcG9ydCBWdWVXZWF0aGVyV2lkZ2V0IGZyb20gInZ1ZS13ZWF0aGVyLXdpZGdldCI7DQovLyBkZWZpbmUgY3VzdG9tIG1hcmtlcg0KaW1wb3J0IEwgZnJvbSAnbGVhZmxldCcNCmltcG9ydCAqIGFzIGVzcmlfZ2VvIGZyb20gJ2VzcmktbGVhZmxldC1nZW9jb2Rlcic7DQppbXBvcnQgVnVlMkxlYWZsZXRMb2NhdGVjb250cm9sIGZyb20gJ3Z1ZTItbGVhZmxldC1sb2NhdGVjb250cm9sJw0KLy8gaW1wb3J0IExEcmF3IGZyb20gJ2xlYWZsZXQtZHJhdyc7DQovLyBJbXBvcnQgbGVhZmxldCBkcmF3IGNzcyBhbmQgaWNvbnMgZm9yIGRyYXcgdG9vbGJhcg0KLy8gaW1wb3J0ICdsZWFmbGV0LWRyYXcvZGlzdC9sZWFmbGV0LmRyYXcuY3NzJzsNCnZhciBNeUN1c3RvbU1hcmtlciA9IEwuSWNvbi5leHRlbmQoew0KICAgIG9wdGlvbnM6IHsNCiAgICAgICAgc2hhZG93VXJsOiBudWxsLA0KICAgICAgICBpY29uQW5jaG9yOiBuZXcgTC5Qb2ludCgxMiwgMTIpLA0KICAgICAgICBpY29uU2l6ZTogbmV3IEwuUG9pbnQoMjQsIDMwKSwNCiAgICAgICAgaWNvblVybDogcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL21hcC1tYXJrZXIucG5nJykNCiAgICB9DQp9KTsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBkYXRhICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGNlbnRlcjogTC5sYXRMbmcoNDEuMzgxMTY2LCA2NC41NzM1ODE5KSwNCiAgICAgICAgICAgIG1hcmtlcjogbnVsbCwNCiAgICAgICAgICAgIGxhdDogbnVsbCwNCiAgICAgICAgICAgIGxuZzogbnVsbCwNCiAgICAgICAgICAgIHVybDogImh0dHA6Ly97c30udGlsZS5vc20ub3JnL3t6fS97eH0ve3l9LnBuZyIsDQogICAgICAgICAgICBhdHRyaWJ1dGlvbjoNCiAgICAgICAgICAgICAgICAnJmNvcHk7IDxhIGhyZWY9Imh0dHA6Ly9vc20ub3JnL2NvcHlyaWdodCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJw0KICAgICAgICB9Ow0KICAgIH0sDQogICAgcHJvcHM6IHsNCiAgICAgICAgdmlzaWJsZTogew0KICAgICAgICAgICAgdHlwZTogQm9vbGVhbg0KICAgICAgICB9LA0KICAgICAgICBldmVudDogew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICB0eXBlOiBPYmplY3QNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBhZGRNYXJrZXIgKGUpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLm1hcmtlcikgew0KICAgICAgICAgICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubWFya2VyKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMubGF0ID0gZS5sYXRsbmcubGF0DQogICAgICAgICAgICB0aGlzLmxuZyA9IGUubGF0bG5nLmxuZw0KICAgICAgICAgICAgdGhpcy5tYXJrZXIgPSBuZXcgTC5NYXJrZXIoZS5sYXRsbmcsIHsgaWNvbjogbmV3IE15Q3VzdG9tTWFya2VyKCkgfSkuYWRkVG8odGhpcy5tYXApOw0KICAgICAgICB9LA0KICAgICAgICBkcmF3Q3JlYXRlZCAoZSkgew0KICAgICAgICAgICAgdmFyIHR5cGUgPSBlLmxheWVyVHlwZSwNCiAgICAgICAgICAgICAgICBsYXllciA9IGUubGF5ZXI7DQoNCiAgICAgICAgICAgIGlmICh0eXBlID09PSAnbWFya2VyJykgew0KICAgICAgICAgICAgICAgIC8vIGxheWVyLmJpbmRQb3B1cCgnQSBwb3B1cCEnKTsNCiAgICAgICAgICAgICAgICB0aGlzLmxhdCA9IGUubGF5ZXIuX2xhdGxuZy5sYXQNCiAgICAgICAgICAgICAgICB0aGlzLmxuZyA9IGUubGF5ZXIuX2xhdGxuZy5sbmcNCiAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVHcm91cC5hZGRMYXllcihsYXllcik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfSwNCiAgICAgICAgc2F2ZUxvY2F0aW9uIChlKSB7DQogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQoNCiAgICAgICAgICAgIGlmICh0aGlzLm1hcmtlciAmJiB0aGlzLmxhdCAmJiB0aGlzLmxuZykgew0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NhdmVMb2NhdGlvbicsIHsgbGF0OiB0aGlzLmxhdCwgbG5nOiB0aGlzLmxuZyB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBkZWxldGVFdmVudExvY2FsIChpZCkgew0KICAgICAgICAgICAgLy8gYXdhaXQgZGVsZXRlRXZlbnQoaWQpOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgicmVmcmVzaCIpOw0KICAgICAgICAgICAgdGhpcy4kZW1pdCgiY2xlYXIiKTsNCiAgICAgICAgfSwNCiAgICAgICAgbW9kYWxTaG93biAoKSB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLm15bWFwLm1hcE9iamVjdC5pbnZhbGlkYXRlU2l6ZSgpOw0KICAgICAgICAgICAgICAgIHRoaXMubWFwID0gdGhpcy4kcmVmcy5teW1hcC5tYXBPYmplY3Q7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMubWFya2VyKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubWFya2VyKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnQubGF0ICYmIHRoaXMuZXZlbnQubG5nKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubGF0ID0gdGhpcy5ldmVudC5sYXQNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sbmcgPSB0aGlzLmV2ZW50LmxuZw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtlciA9IG5ldyBMLk1hcmtlcih0aGlzLmV2ZW50LCB7IGljb246IG5ldyBNeUN1c3RvbU1hcmtlcigpIH0pLmFkZFRvKHRoaXMubWFwKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAuc2V0Vmlldyh0aGlzLmV2ZW50LCAxNyk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXQgPSBudWxsDQogICAgICAgICAgICAgICAgICAgIHRoaXMubG5nID0gbnVsbA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoQ29udHJvbCA9IG5ldyBlc3JpX2dlby5nZW9zZWFyY2goew0KICAgICAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcmlfZ2VvLmFyY2dpc09ubGluZVByb3ZpZGVyKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBUEkgS2V5IHRvIGJlIHBhc3NlZCB0byB0aGUgQXJjR0lTIE9ubGluZSBHZW9jb2RpbmcgU2VydmljZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaWtleTogJ0FBUEs5YWNmMzc4NjBhOTI0MDM3YjE1MTMyZTQ5MGRkYzIwZU9MSng3WEIxZU1DU3BDejlHSHNZRExlaWJiVkkwRnp6aDMxaDFOOWJfY043T0lBWXJ5THpCeGtKNU5Cd0kwM2wnDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICB1c2VNYXBCb3VuZHM6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy4kdCgnY29sdW1uLnNlYXJjaCcpDQogICAgICAgICAgICAgICAgfSkuYWRkVG8odGhpcy5tYXApOw0KDQogICAgICAgICAgICAgICAgLy8gdmFyIHJlc3VsdHMgPSBuZXcgTC5MYXllckdyb3VwKCkuYWRkVG8odGhpcy5tYXApOw0KICAgICAgICAgICAgICAgIGxldCB2bSA9IHRoaXMNCiAgICAgICAgICAgICAgICBzZWFyY2hDb250cm9sLm9uKCdyZXN1bHRzJywgZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0cy5jbGVhckxheWVycygpOw0KICAgICAgICAgICAgICAgICAgICAvKiBmb3IgKHZhciBpID0gZGF0YS5yZXN1bHRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmFkZExheWVyKEwubWFya2VyKGRhdGEucmVzdWx0c1tpXS5sYXRsbmcpKTsNCiAgICAgICAgICAgICAgICAgICAgfSAqLw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXN1bHRzWzBdKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdm0uYWRkTWFya2VyKGRhdGEucmVzdWx0c1swXSkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0sIDEwMCk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgTE1hcCwNCiAgICAgICAgTFRpbGVMYXllciwNCiAgICAgICAgJ3YtbG9jYXRlY29udHJvbCc6IFZ1ZTJMZWFmbGV0TG9jYXRlY29udHJvbA0KICAgIH0NCn07DQo="},{"version":3,"sources":["MapInModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MapInModal.vue","sourceRoot":"src/modules/products/bakery-stations/modules/list_and_crud/components","sourcesContent":["<template>\r\n    <div>\r\n        <b-modal\r\n            size=\"xl\"\r\n            :visible=\"visible\"\r\n            @hidden=\"$emit('clear')\"\r\n            :title=\"$t('column.map')\"\r\n            @shown=\"modalShown\"\r\n            title-class=\"font-18\"\r\n            :ok-title=\"$t('actions.save')\"\r\n            @ok=\"saveLocation\"\r\n            @cancel=\"$emit('close')\"\r\n            ok-variant=\"success\"\r\n            :cancel-title=\"$t('actions.cancel')\"\r\n            cancel-variant=\"danger\"\r\n            no-close-on-backdrop\r\n            no-close-on-esc\r\n            hide-header-close\r\n        >\r\n            <b-container class=\"text-left\">\r\n                <!-- MAP WRAPPER -->\r\n                <div class=\"map-wrapper\">\r\n                    <l-map\r\n                        :center=\"center\"\r\n                        :zoom=\"6\"\r\n                        ref=\"mymap\"\r\n                        @click=\"addMarker\"\r\n                    >\r\n                        <l-tile-layer\r\n                            :url=\"url\"\r\n                            :attribution=\"attribution\"\r\n                        ></l-tile-layer>\r\n                        <v-locatecontrol />\r\n                        <!-- <l-marker :lat-lng=\"center\"></l-marker> -->\r\n                    </l-map>\r\n                </div>\r\n            </b-container>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// import * as moment from \"moment\";\r\nimport { LMap, LMarker, LTileLayer } from \"vue2-leaflet\";\r\n// import { deleteEvent } from \"./api\";\r\n// import \"vue-weather-widget/dist/css/vue-weather-widget.css\";\r\n// import VueWeatherWidget from \"vue-weather-widget\";\r\n// define custom marker\r\nimport L from 'leaflet'\r\nimport * as esri_geo from 'esri-leaflet-geocoder';\r\nimport Vue2LeafletLocatecontrol from 'vue2-leaflet-locatecontrol'\r\n// import LDraw from 'leaflet-draw';\r\n// Import leaflet draw css and icons for draw toolbar\r\n// import 'leaflet-draw/dist/leaflet.draw.css';\r\nvar MyCustomMarker = L.Icon.extend({\r\n    options: {\r\n        shadowUrl: null,\r\n        iconAnchor: new L.Point(12, 12),\r\n        iconSize: new L.Point(24, 30),\r\n        iconUrl: require('@/assets/images/map-marker.png')\r\n    }\r\n});\r\nexport default {\r\n    data () {\r\n        return {\r\n            center: L.latLng(41.381166, 64.5735819),\r\n            marker: null,\r\n            lat: null,\r\n            lng: null,\r\n            url: \"http://{s}.tile.osm.org/{z}/{x}/{y}.png\",\r\n            attribution:\r\n                '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n        };\r\n    },\r\n    props: {\r\n        visible: {\r\n            type: Boolean\r\n        },\r\n        event: {\r\n            required: true,\r\n            type: Object\r\n        }\r\n    },\r\n    methods: {\r\n        addMarker (e) {\r\n            if (this.marker) {\r\n                this.map.removeLayer(this.marker);\r\n            }\r\n            this.lat = e.latlng.lat\r\n            this.lng = e.latlng.lng\r\n            this.marker = new L.Marker(e.latlng, { icon: new MyCustomMarker() }).addTo(this.map);\r\n        },\r\n        drawCreated (e) {\r\n            var type = e.layerType,\r\n                layer = e.layer;\r\n\r\n            if (type === 'marker') {\r\n                // layer.bindPopup('A popup!');\r\n                this.lat = e.layer._latlng.lat\r\n                this.lng = e.layer._latlng.lng\r\n                this.featureGroup.addLayer(layer);\r\n            }\r\n\r\n        },\r\n        saveLocation (e) {\r\n            e.preventDefault();\r\n\r\n            if (this.marker && this.lat && this.lng) {\r\n                this.$emit('saveLocation', { lat: this.lat, lng: this.lng })\r\n            }\r\n        },\r\n        async deleteEventLocal (id) {\r\n            // await deleteEvent(id);\r\n            this.$emit(\"refresh\");\r\n            this.$emit(\"clear\");\r\n        },\r\n        modalShown () {\r\n            setTimeout(() => {\r\n                this.$refs.mymap.mapObject.invalidateSize();\r\n                this.map = this.$refs.mymap.mapObject;\r\n                if (this.marker) {\r\n                    this.map.removeLayer(this.marker);\r\n                }\r\n                if (this.event.lat && this.event.lng) {\r\n                    this.lat = this.event.lat\r\n                    this.lng = this.event.lng\r\n                    this.marker = new L.Marker(this.event, { icon: new MyCustomMarker() }).addTo(this.map);\r\n                    this.map.setView(this.event, 17);\r\n                } else {\r\n                    this.lat = null\r\n                    this.lng = null\r\n                }\r\n                var searchControl = new esri_geo.geosearch({\r\n                    providers: [\r\n                        esri_geo.arcgisOnlineProvider({\r\n                            // API Key to be passed to the ArcGIS Online Geocoding Service\r\n                            apikey: 'AAPK9acf37860a924037b15132e490ddc20eOLJx7XB1eMCSpCz9GHsYDLeibbVI0Fzzh31h1N9b_cN7OIAYryLzBxkJ5NBwI03l'\r\n                        })\r\n                    ],\r\n                    useMapBounds: false,\r\n                    placeholder: this.$t('column.search')\r\n                }).addTo(this.map);\r\n\r\n                // var results = new L.LayerGroup().addTo(this.map);\r\n                let vm = this\r\n                searchControl.on('results', function (data) {\r\n                    // results.clearLayers();\r\n                    /* for (var i = data.results.length - 1; i >= 0; i--) {\r\n                        results.addLayer(L.marker(data.results[i].latlng));\r\n                    } */\r\n                    if (data.results[0])\r\n                        vm.addMarker(data.results[0])\r\n                });\r\n            }, 100);\r\n        }\r\n    },\r\n    components: {\r\n        LMap,\r\n        LTileLayer,\r\n        'v-locatecontrol': Vue2LeafletLocatecontrol\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep.map-wrapper {\r\n    width: 100%;\r\n    height: 600px;\r\n    #mapSearchContainer {\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 40px;\r\n        height: 30px;\r\n        width: 180px;\r\n        z-index: 110;\r\n        font-size: 10pt;\r\n        color: #5d5d5d;\r\n        border: solid 1px #bbb;\r\n        background-color: #f8f8f8;\r\n    }\r\n}\r\n</style>"]}]}