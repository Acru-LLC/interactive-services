{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\letter\\income\\income.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\letter\\income\\income.vue","mtime":1676881249320},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgU2VydmljZSBmcm9tICIuLi9sZXR0ZXJTZXJ2aWNlIjsNCmltcG9ydCB7Y25mRG9jLCBzaG93TXNnU3VjY2Vzc30gZnJvbSAiQC9oZWxwZXIiOw0KaW1wb3J0IFNpZ25LZXlzIGZyb20gIi4uL1NpZ25LZXlzLnZ1ZSI7DQppbXBvcnQgUmVjZWl2ZXJzIGZyb20gIi4vcmVjZWl2ZXJzLnZ1ZSI7DQppbXBvcnQgRWRpdG9yIGZyb20gIi4uL2NyZWF0ZS9mcm9hbC5lZGl0b3IudnVlIjsNCmltcG9ydCBNb2RhbCBmcm9tICIuLi9jcmVhdGUvbW9kYWwudnVlIjsNCmltcG9ydCBoZWxwZXJTZXJ2aWNlIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2hlbHBlci5zZXJ2aWNlJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHtTaWduS2V5cywgUmVjZWl2ZXJzLCBFZGl0b3IsIE1vZGFsfSwNCiAgd2F0Y2g6IHsNCiAgICBwYWdlKCkgew0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICBzZWFyY2hWYWx1ZSh2KSB7DQogICAgICB0aGlzLmdldExpc3QoKTsNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByZWplY3RlZFNlZUxvYWRlcjogZmFsc2UsDQogICAgICByZWplY3RlZExldHRlcjogbnVsbCwNCiAgICAgIHZpZXdGaWxlTW9kYWw6IGZhbHNlLA0KICAgICAgZmlsZVVwbG9hZFBhdGg6IG51bGwsDQogICAgICBpc1JlamVjdGVkU2VlTW9kYWw6IGZhbHNlLA0KICAgICAgc2lnbmF0dXJlU2VlTW9kYWw6IGZhbHNlLA0KICAgICAgcmVhc29uUmVqZWN0ZWRTZWU6ICIiLA0KICAgICAgY29tbWlzc2lvblR5cGVJZDogbnVsbCwNCiAgICAgIGNvbW1pc3Npb25Db21tZW50OiAnJywNCiAgICAgIGNvbW1pc3Npb25Db21wbGV0aW9uRGF0ZTogbnVsbCwNCiAgICAgIGNvbW1pc3Npb25Nb2RhbExvYWRlcjogZmFsc2UsDQogICAgICBjb21taXNzaW9uVHlwZXM6IFtdLA0KICAgICAgY29tbWlzc2lvbnNNb2RhbDogZmFsc2UsDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIHNyYzogbnVsbCwNCiAgICAgIG51bVBhZ2VzOiB1bmRlZmluZWQsDQogICAgICByZWFzb25SZWplY3RlZDogIiIsDQogICAgICByZWFzb25Gb3JSZXZpZXc6ICIiLA0KICAgICAgc2VsZWN0ZWRUckl0ZW06IHt9LA0KICAgICAgYWN0aXZlOiAiIiwNCiAgICAgIHNlbmRUeXBlTGlzdDogWw0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoImZvclNpZ25hdHVyZSIpLA0KICAgICAgICAgIHZhbHVlOiAiU0lHTkFUVVJFIiwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCJmb3JBZ3JlZW1lbnQiKSwNCiAgICAgICAgICB2YWx1ZTogIkFHUkVFTUVOVCIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgiZm9yUmV2aWV3IiksDQogICAgICAgICAgdmFsdWU6ICJSRVZJRVciLA0KICAgICAgICB9LA0KICAgICAgXSwNCiAgICAgIHRpdGxlOiB0aGlzLiR0KCJyZWNlaXZlZCIpLA0KICAgICAgaXRlbXM6IFsNCiAgICAgICAgew0KICAgICAgICAgIHRleHQ6IHRoaXMuJHQoIm1lbnUiKSwNCiAgICAgICAgICBocmVmOiAiLyIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0ZXh0OiB0aGlzLiR0KCJyZWNlaXZlZCIpLA0KICAgICAgICAgIGFjdGl2ZTogdHJ1ZSwNCiAgICAgICAgfSwNCiAgICAgIF0sDQogICAgICBsaXN0OiBbXSwNCiAgICAgIHNlYXJjaFZhbHVlOiAiIiwNCiAgICAgIHBhZ2U6IDEsDQogICAgICBsaW1pdDogMjAsDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIHRvdGFsOiAxLA0KICAgICAgaXNNb2RhbDogZmFsc2UsDQogICAgICBjdXJyZW50SXRlbToge30sDQogICAgICBzaWduYXR1cmVNb2RhbDogZmFsc2UsDQogICAgICBsb2FkZXJCdXR0b246IGZhbHNlLA0KICAgICAgaXNNb2RhbEtleXM6IGZhbHNlLA0KICAgICAgYWdyZWVtZW50Q291bnQ6IDAsDQogICAgICBzaWduYXR1cmVDb3VudDogMCwNCiAgICAgIHJldmlld0NvdW50OiAwLA0KICAgICAgbG9hZGVyUmVjZWl2ZXI6IGZhbHNlLA0KICAgICAgaW5mb0RhdGE6IHt9LA0KICAgICAgdmlzYUluZm9CeUlkOiB7fSwNCiAgICAgIHJlamVjdGVkTG9hZGVyOiBmYWxzZSwNCiAgICAgIGlzUmVqZWN0ZWRNb2RhbDogZmFsc2UsDQogICAgICBpc0ZvclJldmlld01vZGFsOiBmYWxzZSwNCiAgICAgIHZpZXdNb2RhbDogZmFsc2UsDQogICAgICBmaWxlc0xpc3Q6IFtdLA0KICAgICAgcHJvamVjdEZpbGVzTGlzdDogW10sDQogICAgICB2aWV3TW9kYWxCZWZvcmVTaWduZWQ6IGZhbHNlLA0KICAgICAgbG9hZGVyUGRmOiBmYWxzZSwNCiAgICAgIGlsb3ZhVXBsb2FkUGF0aDogbnVsbCwNCiAgICAgIHZpZXdJbG92YU1vZGFsOiBmYWxzZSwNCiAgICAgIGJhc2U2NDogbnVsbCwNCiAgICAgIGVkaXRNb2RhbDogZmFsc2UsDQogICAgICBsb2FkZXI6IGZhbHNlLA0KICAgICAgY29udGV4dFRleHQ6ICIiLA0KICAgICAgaWNvbjogew0KICAgICAgICBwZGY6IHJlcXVpcmUoJ0AvYXNzZXRzL3BkZi5wbmcnKSwNCiAgICAgIH0sDQogICAgICBzZW5kTGV0dGVyVG9DaGFpcm1hbjogew0KICAgICAgICBtb2RhbDogZmFsc2UsDQogICAgICAgIGNvbW1lbnQ6ICIiLA0KICAgICAgICBsb2FkZXI6IGZhbHNlLA0KICAgICAgfQ0KICAgIH07DQogIH0sDQogIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgYXdhaXQgdGhpcy5nZXRMaXN0KCk7DQogICAgYXdhaXQgdGhpcy5nZXRJbmNvbWVUb3RhbENvdW50KCk7DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgcGFyYW1zKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLmxpbWl0LA0KICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZSAtIDEsDQogICAgICAgIH0sDQogICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2hWYWx1ZSwNCiAgICAgIH07DQogICAgfSwNCiAgICBjb21wdXRlZE1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub1JlamVjdCgpIHsNCiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVHJJdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCAhPT0gJ0ZST01fRFhBJw0KICAgICAgICAgICYmIHRoaXMuc2VsZWN0ZWRUckl0ZW0uYXBwbGljYXRpb25UeXBlSW5Qcm9qZWN0ICE9PSAnTk9UX0JFTE9ORycNCiAgICAgICAgICAmJiBbJ1NFTlRfRk9SX1JFSkVDVCcsICdSRUpFQ1RFRCcsICdUT19JTlZPS0VfU0lHTkVEJywgJ1RPX1NJR05fRklOSVNIX0xFVFRFUicsDQogICAgICAgICAgICAnRklOSVNIX0xFVFRFUl9TSUdOX0FORF9TRU5EJywgJ1NFTkRfU0lHTl9UT19SRVRVUk4nLCAnU0VORF9TSUdOJ10uaW5kZXhPZih0aGlzLnNlbGVjdGVkVHJJdGVtLnN0YXR1cykgPT09IC0xDQogICAgICAgICAgJiYgdGhpcy5zZWxlY3RlZFRySXRlbS5pc0ZvckNvbW1pc3Npb24gJiYgIXRoaXMuc2VsZWN0ZWRUckl0ZW0uaXNIZWFkT2ZEZXBhcnRtZW50Ow0KICAgIH0sDQogICAgY29tcHV0ZWRNYWtlU2lnbmVkQ29tcHJvbWlzZURlY2lzaW9uVG9BY2NlcHQoKSB7DQogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFRySXRlbS5hcHBsaWNhdGlvblR5cGVJblByb2plY3QgIT09ICdGUk9NX0RYQScNCiAgICAgICAgICAmJiB0aGlzLnNlbGVjdGVkVHJJdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCAhPT0gJ05PVF9CRUxPTkcnDQogICAgICAgICAgJiYgWydSRUpFQ1RFRCddLmluZGV4T2YodGhpcy5zZWxlY3RlZFRySXRlbS5zdGF0dXMpID09PSAtMQ0KICAgICAgICAgICYmIHRoaXMuc2VsZWN0ZWRUckl0ZW0uaXNGb3JDb21taXNzaW9uICYmICF0aGlzLnNlbGVjdGVkVHJJdGVtLmlzSGVhZE9mRGVwYXJ0bWVudDsNCiAgICB9LA0KICAgIHNpZ25JdGVtQnV0dG9uTGFiZWwoKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZFRySXRlbS5hY3Rpb24gPT09ICJTSUdOQVRVUkUiKSB7DQogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVHJJdGVtLnN0YXR1cyA9PT0gJ1NFTkRfU0lHTicpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy4kdCgic3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19zdGF0dXMuc2VuZF9mb3JfY29tbWlzc2lvbiIpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRoaXMuJHQoInN1Ym1vZHVsZXMucmVwb3J0cy5tYWtlX3NpZ24iKQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVHJJdGVtLmFjdGlvbiA9PT0gJ1JFVklFVycpIHsNCiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUckl0ZW0uaXNGb3JDb21taXNzaW9uICYmICF0aGlzLnNlbGVjdGVkVHJJdGVtLmlzSGVhZE9mRGVwYXJ0bWVudCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLiR0KCJzdWJtb2R1bGVzLmNvbW1pc3Npb24uZG9jX3N0YXR1cy5mb3JfYmVnaW5fY29tbWlzc2lvbiIpDQogICAgICAgIH0NCiAgICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdGVkVHJJdGVtLnN0YXR1cykgew0KICAgICAgICAgIGNhc2UgJ1NFTlRfRk9SX1JFSkVDVCc6DQogICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRUckl0ZW0uaXNSZWplY3RMZXR0ZXJDcmVhdGVkKSB7DQogICAgICAgICAgICAgIHJldHVybiB0aGlzLiR0KCJzdWJtb2R1bGVzLmNvbW1pc3Npb24uZG9jX2J1dHRvbi5jcmVhdGVfbGV0dGVyIikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgJ1JFSkVDVEVEJzoNCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHQoInN1Ym1vZHVsZXMuY29tbWlzc2lvbi5kb2Nfc3RhdHVzLmNvbmZpcm1hdGlvbl90aGF0X2xldHRlcl9oYXNfcmVhY2hlZCIpDQogICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiR0KCJjb25maXJtIikNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkVHJJdGVtLmFjdGlvbiA9PT0gJ0FHUkVFTUVOVCcpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJHQoInN1Ym1vZHVsZXMucmVwb3J0cy5tYWtlX2FncmVlbWVudCIpDQogICAgICB9DQogICAgICByZXR1cm4gIiINCiAgICB9LA0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICBzaG93UmVqZWN0ZWRCeVJhaXNNb2RhbChpdGVtKSB7DQogICAgICB0aGlzLmN1cnJlbnRJdGVtID0gaXRlbTsNCiAgICAgIHRoaXMuaXNSZWplY3RlZFNlZU1vZGFsID0gdHJ1ZTsNCiAgICB9LA0KICAgIHJlamVjdFNlZUNvbmZpcm0oKSB7DQogICAgICBjbmZEb2ModGhpcy4kdCgibWVzc2FnZXMucmVqZWN0X3RpdGxlIikpLnRoZW4oKHJzKSA9PiB7DQogICAgICAgIGlmIChycy52YWx1ZSkgew0KICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VlTW9kYWwgPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIHNpZ25TdWNjZXNzU2VlKGRhdGEpIHsNCiAgICAgIGxldCBwYXlsb2FkID0gew0KICAgICAgICBzaWduZWRDb250ZW50OiBkYXRhLmNvbnRlbnQsDQogICAgICAgIGlubjogZGF0YS5pbm4sDQogICAgICAgIHBuZmw6IGRhdGEucG5mbA0KICAgICAgfQ0KICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdGVkVHJJdGVtLmFjdGlvbikgew0KICAgICAgICBjYXNlICdSRVZJRVcnOg0KICAgICAgICAgIHN3aXRjaCAodGhpcy5zZWxlY3RlZFRySXRlbS5zdGF0dXMpIHsNCiAgICAgICAgICAgIGNhc2UgJ1NFTkRfU0VFTl9DTE9TRUQnOg0KICAgICAgICAgICAgICBhd2FpdCBTZXJ2aWNlLmxldHRlckNhbmNlbGxlZChwYXlsb2FkLCB0aGlzLnNlbGVjdGVkVHJJdGVtLmxldHRlcklkLCB0aGlzLnNlbGVjdGVkVHJJdGVtLmlkLCB0aGlzLnJlYXNvblJlamVjdGVkU2VlKQ0KICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVqZWN0ZWRTZWVNb2RhbCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZVNlZU1vZGFsID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UHJvamVjdHMoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUb3RhbENvdW50KCk7DQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgICBicmVhazsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICBhd2FpdCBTZXJ2aWNlLm9ubHlEb2NTaWduRm9yUlJlamVjdGVkQnlSYWlzKHBheWxvYWQsIHRoaXMuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWQsIHRoaXMuc2VsZWN0ZWRUckl0ZW0uaWQsIHRoaXMucmVhc29uUmVqZWN0ZWRTZWUpDQogICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzUmVqZWN0ZWRTZWVNb2RhbCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlU2VlTW9kYWwgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBsZXQgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNlbGVjdGVkVHJJdGVtKTsNCiAgICAgICAgICAgICAgICBhd2FpdCBzaG93TXNnU3VjY2Vzcyh0aGlzLiR0KCJzdWNjZXNzRG9jU2lnbmVkIikpOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG90YWxDb3VudCgpOw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgIC8vIHRoaXMuY2F0Y2hFcnIoZXJyKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfSwNCiAgICBvcGVuU2lnbmF0dXJlTW9kYWxGb3JDb21taXNzaW9uKCkgew0KICAgICAgaWYgKHRoaXMuY29tbWlzc2lvblR5cGVJZCkgew0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFRySXRlbS5hY3Rpb24gPT09ICdSRVZJRVcnDQogICAgICAgICAgICAmJiB0aGlzLnNlbGVjdGVkVHJJdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCA9PT0gJ0lOTkVSJw0KICAgICAgICAgICAgJiYgKHRoaXMuc2VsZWN0ZWRUckl0ZW0uc3RhdHVzID09PSAnU0VOVF9UT19NQU5BR0VNRU5UJykNCiAgICAgICAgICAgICYmIHRoaXMuc2VsZWN0ZWRUckl0ZW0ucHJvamVjdFR5cGUgPT09ICdCRUZPUkVfQ09NTUlTU0lPTicpIHsNCiAgICAgICAgICBpZiAoIXRoaXMuY29tbWlzc2lvbkNvbXBsZXRpb25EYXRlKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwge3R5cGU6ICdlcnJvcid9KTsNCiAgICAgICAgICB9DQogICAgICAgICAgU2VydmljZS5tYWtlUmV2aWV3Rm9yQ29tbWlzc2lvbk1hbmFnZW1lbnQodGhpcy5zZWxlY3RlZFRySXRlbS5pZCwgdGhpcy5jb21taXNzaW9uVHlwZUlkLCB0aGlzLmNvbW1pc3Npb25Db21tZW50LCB0aGlzLmNvbW1pc3Npb25Db21wbGV0aW9uRGF0ZSkNCiAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGF3YWl0IHNob3dNc2dTdWNjZXNzKHRoaXMuJHQoInN1Y2Nlc3NEb2NTaWduZWQiKSk7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0cygpOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG90YWxDb3VudCgpOw0KICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlTW9kYWwgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbW1pc3Npb25zTW9kYWwgPSBmYWxzZTsNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdGhpcy5jb21taXNzaW9uc01vZGFsID0gZmFsc2U7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuc2lnbmF0dXJlTW9kYWwgPSB0cnVlDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzJyksIHt0eXBlOiAnZXJyb3InfSk7DQogICAgICB9DQogICAgfSwNCiAgICBjdXN0b21MYWJlbENvbW1pc3Npb25UeXBlcyhvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuY29tbWlzc2lvblR5cGVzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsDQogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgIH0pDQogICAgICAgIH1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBjaGFuZ2VUZXh0KHRleHQpIHsNCiAgICAgIHRoaXMuY29udGV4dFRleHQgPSB0ZXh0Ow0KICAgIH0sDQogICAgb2tNb2RhbCgpIHsNCiAgICAgIGxldCB0ZXh0ID0gdGhpcy4kcmVmcy5lZGl0b3JSZWYudGV4dDsNCiAgICAgIHRoaXMuJHJlZnMuZWRpdE1vZGFsUmVmLmxvYWRpbmcodHJ1ZSk7DQogICAgICBTZXJ2aWNlLnNhdmVMZXR0ZXJCb2R5KHRoaXMuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWQsIHRleHQpDQogICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgbGV0IHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZWxlY3RlZFRySXRlbSk7DQogICAgICAgICAgICB0aGlzLnN1Y2Nlc3NFZGl0ZWQoKTsNCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7DQogICAgICAgICAgICB0aGlzLmVkaXRNb2RhbCA9IGZhbHNlOw0KICAgICAgICAgICAgLyogc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgIGxldCBuZXdkYXRhID0gdGhpcy5saXN0LmZpbmQoKGUpID0+IGUuaWQgPT0gdGVtcERhdGEuaWQpOw0KICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVHJJdGVtID0gbmV3ZGF0YTsNCiAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXRSZWNlaXZlcnModGhpcy5zZWxlY3RlZFRySXRlbSk7DQogICAgICAgICAgICB9LCA1MDApOyAqLw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmVkaXRNb2RhbFJlZi5sb2FkaW5nKGZhbHNlKTsNCiAgICAgICAgICB9KTsNCiAgICB9LA0KICAgIHZpZXdNb2RhbENsaWNrKCkgew0KICAgICAgdGhpcy4kcmVmcy5lZGl0TW9kYWxSZWYubG9hZGluZ1BkZih0cnVlKTsNCiAgICAgIHRoaXMudmlld01vZGFsQmVmb3JlU2lnbmVkID0gdHJ1ZTsNCiAgICAgIHRoaXMubG9hZGVyUGRmID0gdHJ1ZTsNCiAgICAgIHRoaXMuYmFzZTY0ID0gbnVsbDsNCg0KICAgICAgU2VydmljZS5jb252ZXJ0KHRoaXMuY29udGV4dFRleHQpDQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuYmFzZTY0ID0gcmVzLmRhdGE7DQogICAgICAgICAgICB9LCA0MDApOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5sb2FkZXJQZGYgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMuZWRpdE1vZGFsUmVmLmxvYWRpbmdQZGYoZmFsc2UpOw0KICAgICAgICAgIH0pOw0KICAgIH0sDQogICAgZWRpdExldHRlcihpdGVtKSB7DQogICAgICAvKiB0aGlzLmVkaXRNb2RhbCA9IHRydWU7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgU2VydmljZS5nZXRCb2R5KGl0ZW0ubGV0dGVySWQpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGxldCBlZGl0b3IgPSB0aGlzLiRyZWZzLmVkaXRvclJlZjsNCiAgICAgICAgICBpZiAoZWRpdG9yKSB7DQogICAgICAgICAgICBpZiAoIXRoaXMuX2VtcHR5KHJlcy5kYXRhKSkgew0KICAgICAgICAgICAgICBlZGl0b3Iuc2V0VGV4dENvbnRlbnQocmVzLmRhdGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9LCA0MDApOyAqLw0KDQogICAgfSwNCiAgICB2aWV3UHJvamVjdChzZWxlY3RlZExldHRlcikgew0KICAgICAgLyogdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICAgIG5hbWU6IHNlbGVjdGVkTGV0dGVyLnByb2plY3RUeXBlID09PSAnQ09NTUlTU0lPTicgPyAnQ29tbWlzc2lvblByb2plY3RzJyA6ICdQcm9qZWN0c01haW4nLA0KICAgICAgICAgIHF1ZXJ5OiB7IHBhZ2U6ICJvdmVydmlldyIsIGlkOiBzZWxlY3RlZExldHRlci5wcm9qZWN0SWQgfSwNCiAgICAgIH0pOyAqLw0KICAgICAgbGV0IHJvdXRlRGF0YSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsNCiAgICAgICAgbmFtZTogc2VsZWN0ZWRMZXR0ZXIucHJvamVjdFR5cGUgPT09ICdDT01NSVNTSU9OJyA/ICdDb21taXNzaW9uUHJvamVjdHMnIDogJ1Byb2plY3RzTWFpbicsDQogICAgICAgIHF1ZXJ5OiB7cGFnZTogIm92ZXJ2aWV3IiwgaWQ6IHNlbGVjdGVkTGV0dGVyLnByb2plY3RJZH0sDQogICAgICB9KTsNCiAgICAgIHdpbmRvdy5vcGVuKHJvdXRlRGF0YS5ocmVmLCAnX2JsYW5rJyk7DQogICAgfSwNCiAgICB2aWV3SWxvdmEoaXRlbSkgew0KICAgICAgY29uc3QgZXh0ID0gdGhpcy5nZXRFeHQoaXRlbS51cGxvYWRQYXRoID8gaXRlbS51cGxvYWRQYXRoIDogaXRlbS51cmwpDQogICAgICBpZiAoZXh0ID09PSAicGRmIikgew0KICAgICAgICB0aGlzLmlsb3ZhVXBsb2FkUGF0aCA9IGl0ZW0udXBsb2FkUGF0aCA/IGl0ZW0udXBsb2FkUGF0aCA6IGl0ZW0udXJsOw0KICAgICAgICB0aGlzLnZpZXdJbG92YU1vZGFsID0gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuY29udmVydFRvUGRmKGl0ZW0pLnRoZW4oKHVwbG9hZFBhdGgpID0+IHsNCiAgICAgICAgICBpZiAodXBsb2FkUGF0aCkgew0KICAgICAgICAgICAgdGhpcy5pbG92YVVwbG9hZFBhdGggPSB1cGxvYWRQYXRoOw0KICAgICAgICAgICAgdGhpcy52aWV3SWxvdmFNb2RhbCA9IHRydWU7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG9wZW5Pbmx5T2ZmaWNlKGxldHRlcklkKSB7DQogICAgICBsZXQgcm91dGVEYXRhID0gdGhpcy4kcm91dGVyLnJlc29sdmUoew0KICAgICAgICBuYW1lOiAiT2ZmaWNlLURPQ1VNRU5ULWNvbW1pc3Npb24iLA0KICAgICAgICBxdWVyeToge2lkOiBsZXR0ZXJJZCwgcGFnZTogIkdFVCJ9LA0KICAgICAgfSk7DQogICAgICB3aW5kb3cub3Blbihyb3V0ZURhdGEuaHJlZiwgIl9ibGFuayIpOw0KICAgIH0sDQogICAgdmlld0lsb3ZhUHJvamVjdCh1cGxvYWRQYXRoKSB7DQogICAgICBpZiAodGhpcy5nZXRFeHQodXBsb2FkUGF0aCkgPT09ICJwZGYiKSB7DQogICAgICAgIHRoaXMuaWxvdmFVcGxvYWRQYXRoID0gdXBsb2FkUGF0aDsNCiAgICAgICAgdGhpcy52aWV3SWxvdmFNb2RhbCA9IHRydWU7DQogICAgICB9DQogICAgfSwNCiAgICBjb252ZXJ0VG9QZGYoc2VsZWN0ZWRJdGVtLCBmb3JTaWduID0gZmFsc2UpIHsNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHsNCiAgICAgICAgbGV0IGNvbmZpZyA9IHsNCiAgICAgICAgICB1cmw6IGAke3NlbGVjdGVkSXRlbS51cmx9YCwNCiAgICAgICAgICBvdXRwdXR0eXBlOiAiLnBkZiIsDQogICAgICAgICAgZm9yU2lnbjogZm9yU2lnbiwNCiAgICAgICAgICBrZXk6IHNlbGVjdGVkSXRlbS5rZXksDQogICAgICAgIH07DQogICAgICAgIFNlcnZpY2UuY29udmVydFRvUGRmQnlBcGkoY29uZmlnKQ0KICAgICAgICAgICAgLnRoZW4oKHJzKSA9PiB7DQogICAgICAgICAgICAgIGlmIChycy5kYXRhLnVwbG9hZFBhdGgpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLnNyYyA9IGAke3RoaXMuYmFzZVVybH0vJHtycy5kYXRhLnVwbG9hZFBhdGh9YDsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICByZXMocnMuZGF0YS51cGxvYWRQYXRoKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXMoZmFsc2UpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7DQogICAgICAgICAgICAgIC8vIHRoaXMuY2F0Y2hFcnIoZSk7DQogICAgICAgICAgICAgIHJlaihlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRCeUlkTGV0dGVyKCkgew0KICAgICAgU2VydmljZS5nZXRCeUlkTGV0dGVyKHRoaXMuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWQpDQogICAgICAgICAgLnRoZW4oKHJzKSA9PiB7DQogICAgICAgICAgICB0aGlzLmN1cnJlbnREb2MgPSBycy5kYXRhOw0KICAgICAgICAgICAgdGhpcy5sb2FkZXJQZGYgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5jb252ZXJ0VG9QZGYocnMuZGF0YSkudGhlbigodXBsb2FkUGF0aCkgPT4gew0KICAgICAgICAgICAgICBpZiAoIXVwbG9hZFBhdGgpIHsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVydFRvUGRmKHJzLmRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZXJQZGYgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZXJQZGYgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9LCA0MDAwKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRlclBkZiA9IGZhbHNlOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaCgoZSkgPT4gew0KICAgICAgICAgIH0pOw0KICAgIH0sDQogICAgdmlld0xldHRlcigpIHsNCiAgICAgIHRoaXMudmlld01vZGFsQmVmb3JlU2lnbmVkID0gdHJ1ZTsNCiAgICAgIHRoaXMubG9hZGVyUGRmID0gdHJ1ZTsNCiAgICAgIHRoaXMuYmFzZTY0ID0gbnVsbDsNCiAgICAgIFNlcnZpY2Uudmlld1BkZkJ5TGV0dGVySWQodGhpcy5zZWxlY3RlZFRySXRlbS5sZXR0ZXJJZCkNCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5iYXNlNjQgPSByZXMuZGF0YTsNCiAgICAgICAgICAgIH0sIDMwMCk7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmxvYWRlclBkZiA9IGZhbHNlOw0KICAgICAgICAgIH0pOw0KICAgIH0sDQogICAgdmlld0RvY0JlZm9yZVNpZ25lZCgpIHsNCiAgICAgIC8vIHRoaXMudmlld01vZGFsQmVmb3JlU2lnbmVkID0gdHJ1ZTsNCiAgICAgIC8vIHRoaXMuZ2V0QnlJZExldHRlcigpOw0KICAgICAgdGhpcy52aWV3TGV0dGVyKCk7DQogICAgfSwNCiAgICBzZXRDdXJyZW50UGFnZShwYWdlKSB7DQogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsNCiAgICB9LA0KICAgIGdldEF0dGFjaGVkRmlsZXNCeUlkKGlkKSB7DQogICAgICBTZXJ2aWNlLmdldEF0dGFjaGVkRmlsZXNCeUlkKGlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy5maWxlc0xpc3QgPSByZXMuZGF0YTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0UHJvamVjdExldHRlcnNCeUxldHRlcklkKGRhdGEpIHsNCiAgICAgIFNlcnZpY2UucHJvamVjdExldHRlcnNCeUxldHRlcklkKGRhdGEubGV0dGVySWQpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLnByb2plY3RGaWxlc0xpc3QgPSByZXMuZGF0YTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgc2F2ZVJlamVjdGVkKHBheWxvYWQpIHsNCiAgICAgIHRoaXMuY29udmVydFRvUGRmKHRoaXMuc2VsZWN0ZWRUckl0ZW0pLnRoZW4ocjEgPT4gew0KICAgICAgICB0aGlzLnJlamVjdGVkTG9hZGVyID0gdHJ1ZTsNCiAgICAgICAgU2VydmljZS5zYXZlUmVqZWN0ZWQoDQogICAgICAgICAgICB0aGlzLnNlbGVjdGVkVHJJdGVtLmxldHRlcklkLA0KICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRySXRlbS5pZCwNCiAgICAgICAgICAgIHRoaXMucmVhc29uUmVqZWN0ZWQsDQogICAgICAgICAgICBwYXlsb2FkDQogICAgICAgICkNCiAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5pc1JlamVjdGVkTW9kYWwgPSBmYWxzZTsNCiAgICAgICAgICAgICAgbGV0IHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZWxlY3RlZFRySXRlbSk7DQogICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3VjY2Vzc1NhdmVkKCk7DQogICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7DQogICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0SW5jb21lVG90YWxDb3VudCgpOw0KICAgICAgICAgICAgICAvKiBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgbmV3ZGF0YSA9IHRoaXMubGlzdC5maW5kKChlKSA9PiBlLmlkID09IHRlbXBEYXRhLmlkKTsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVHJJdGVtID0gbmV3ZGF0YTsNCiAgICAgICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVjZWl2ZXJzKHRoaXMuc2VsZWN0ZWRUckl0ZW0pOw0KICAgICAgICAgICAgICB9LCA1MDApOyAqLw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5yZWplY3RlZExvYWRlciA9IGZhbHNlOw0KICAgICAgICAgICAgfSk7DQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlVG9SZWplY3QoKSB7DQogICAgICB0aGlzLmNuZigpLnRoZW4oKHJzKSA9PiB7DQogICAgICAgIGlmIChycy52YWx1ZSkgew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvbGV0dGVyL3RvLXJlamVjdC8ke3RoaXMuc2VsZWN0ZWRUckl0ZW0uaWR9LyR7dGhpcy5zZWxlY3RlZFRySXRlbS5sZXR0ZXJJZH1gKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBzaG93UmVqZWN0ZWRNb2RhbCgpIHsNCiAgICAgIHN3aXRjaCAodGhpcy5zZWxlY3RlZFRySXRlbS5hY3Rpb24pIHsNCiAgICAgICAgY2FzZSAnU0lHTkFUVVJFJzoNCiAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2VsZWN0ZWRUckl0ZW0uc3RhdHVzKSB7DQogICAgICAgICAgICBjYXNlICdTRU5EX0ZPUl9DT01NSVNTSU9OJzoNCiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUb1JlamVjdCgpOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgJ1NFTkRfU0lHTic6DQogICAgICAgICAgICAgIHRoaXMuaXNGb3JSZXZpZXdNb2RhbCA9IHRydWU7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgdGhpcy5pc1JlamVjdGVkTW9kYWwgPSB0cnVlOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICB9DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ1JFVklFVyc6DQogICAgICAgICAgaWYgKHRoaXMuY29tcHV0ZWRNYWtlU2lnbmVkQ29tcHJvbWlzZURlY2lzaW9uVG9SZWplY3QpIHsNCiAgICAgICAgICAgIHRoaXMuaGFuZGxlTWFrZVNpZ25lZENvbXByb21pc2VEZWNpc2lvblRvUmVqZWN0KCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zZWxlY3RlZFRySXRlbS5zdGF0dXMpIHsNCiAgICAgICAgICAgICAgY2FzZSAnU0VORF9TRUVOX0NMT1NFRCc6DQogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVMZXR0ZXJDYW5jZWxsZWQodGhpcy5zZWxlY3RlZFRySXRlbSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgdGhpcy5pc1JlamVjdGVkTW9kYWwgPSB0cnVlOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBicmVhazsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICB0aGlzLmlzUmVqZWN0ZWRNb2RhbCA9IHRydWU7DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVNYWtlU2lnbmVkQ29tcHJvbWlzZURlY2lzaW9uVG9SZWplY3QoKSB7DQogICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaChgL2xldHRlci9pbmNvbWUvJHt0aGlzLnNlbGVjdGVkVHJJdGVtLmxldHRlcklkfS8ke3RoaXMuc2VsZWN0ZWRUckl0ZW0uaWR9P3R5cGU9Y29tcHJvbWlzZS1kZWNpc2lvbi10by1yZWplY3RgKTsNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZU1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub0FjY2VwdCgpIHsNCiAgICAgIGF3YWl0IHRoaXMuJHJvdXRlci5wdXNoKGAvbGV0dGVyL2luY29tZS8ke3RoaXMuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWR9LyR7dGhpcy5zZWxlY3RlZFRySXRlbS5pZH0/dHlwZT1jb21wcm9taXNlLWRlY2lzaW9uLXRvLWFjY2VwdGApOw0KICAgIH0sDQogICAgdmlld0RvY1NpZ25lZCgpIHsNCiAgICAgIHRoaXMudmlld01vZGFsID0gdHJ1ZTsNCiAgICB9LA0KICAgIGdldEluY29tZVRvdGFsQ291bnQoKSB7DQogICAgICBTZXJ2aWNlLmdldEluY29tZVRvdGFsQ291bnQoKS50aGVuKChycykgPT4gew0KICAgICAgICB0aGlzLmFncmVlbWVudENvdW50ID0gcnMuZGF0YS5hZ3JlZW1lbnQ7DQogICAgICAgIHRoaXMucmV2aWV3Q291bnQgPSBycy5kYXRhLnJldmlldzsNCiAgICAgICAgdGhpcy5zaWduYXR1cmVDb3VudCA9IHJzLmRhdGEuc2lnbmF0dXJlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBhc3luYyBzaWduU3VjY2VzcyhkYXRhKSB7DQogICAgICBsZXQgcGF5bG9hZCA9IHsNCiAgICAgICAgc2lnbmVkQ29udGVudDogZGF0YS5jb250ZW50LA0KICAgICAgICBpbm46IGRhdGEuaW5uLA0KICAgICAgICBwbmZsOiBkYXRhLnBuZmwNCiAgICAgIH07DQogICAgICBpZiAodGhpcy5pc1JlamVjdGVkTW9kYWwpIHsNCiAgICAgICAgdGhpcy5pc01vZGFsS2V5cyA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7DQogICAgICAgIHRoaXMuc2F2ZVJlamVjdGVkKHBheWxvYWQpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBzd2l0Y2ggKHRoaXMuc2VsZWN0ZWRUckl0ZW0uc3RhdHVzKSB7DQogICAgICAgICAgY2FzZSAnQ09NTUlTU0lPTl9TRU5EJzoNCiAgICAgICAgICAgIFNlcnZpY2Uub25seURvY1NpZ24ocGF5bG9hZCwgdGhpcy5zZWxlY3RlZFRySXRlbS5pZCkNCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLmlzTW9kYWxLZXlzID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICBsZXQgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNlbGVjdGVkVHJJdGVtKTsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IHNob3dNc2dTdWNjZXNzKHRoaXMuJHQoInN1Y2Nlc3NEb2NTaWduZWQiKSk7DQogICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOw0KICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRJbmNvbWVUb3RhbENvdW50KCk7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAnTk9UX0JFTE9ORyc6DQogICAgICAgICAgICBhd2FpdCBTZXJ2aWNlLm9ubHlEb2NTaWduKHBheWxvYWQsIHRoaXMuc2VsZWN0ZWRUckl0ZW0uaWQpDQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgYXdhaXQgU2VydmljZS5vbmx5RG9jU2lnbk5vdEJlbG9uZyhwYXlsb2FkLCB0aGlzLnNlbGVjdGVkVHJJdGVtLmlkKQ0KICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHsNCg0KDQogICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRjaEVycihlcnIpOw0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICB0aGlzLmlzTW9kYWxLZXlzID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICBsZXQgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNlbGVjdGVkVHJJdGVtKTsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IHNob3dNc2dTdWNjZXNzKHRoaXMuJHQoInN1Y2Nlc3NEb2NTaWduZWQiKSk7DQogICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOw0KICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRJbmNvbWVUb3RhbENvdW50KCk7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAnU0VORF9TSUdOX1RPX1JFVFVSTic6DQogICAgICAgICAgICBTZXJ2aWNlLnNpZ25Eb2MocGF5bG9hZCwgdGhpcy5zZWxlY3RlZFRySXRlbS5pZCwgdGhpcy5jb21taXNzaW9uVHlwZUlkLCB0aGlzLmNvbW1pc3Npb25Db21tZW50KQ0KICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuaXNNb2RhbEtleXMgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmF0dXJlTW9kYWwgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWlzc2lvbnNNb2RhbCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgbGV0IHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZWxlY3RlZFRySXRlbSk7DQogICAgICAgICAgICAgICAgICBhd2FpdCBzaG93TXNnU3VjY2Vzcyh0aGlzLiR0KCJzdWNjZXNzRG9jU2lnbmVkIikpOw0KICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0SW5jb21lVG90YWxDb3VudCgpOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgJ1NFTkRfU0lHTic6DQogICAgICAgICAgICBTZXJ2aWNlLmxldHRlckNhbmNlbGxlZChwYXlsb2FkLCB0aGlzLnNlbGVjdGVkVHJJdGVtLmxldHRlcklkLCB0aGlzLnNlbGVjdGVkVHJJdGVtLmlkLCB0aGlzLnJlYXNvbkZvclJldmlldykNCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLmlzTW9kYWxLZXlzID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICB0aGlzLnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICB0aGlzLmlzRm9yUmV2aWV3TW9kYWwgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVhc29uRm9yUmV2aWV3ID0gJyc7DQogICAgICAgICAgICAgICAgICBsZXQgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNlbGVjdGVkVHJJdGVtKTsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IHNob3dNc2dTdWNjZXNzKHRoaXMuJHQoInN1Y2Nlc3NEb2NTaWduZWQiKSk7DQogICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOw0KICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRJbmNvbWVUb3RhbENvdW50KCk7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgIFNlcnZpY2Uuc2lnbkRvYyhwYXlsb2FkLCB0aGlzLnNlbGVjdGVkVHJJdGVtLmlkLCB0aGlzLmNvbW1pc3Npb25UeXBlSWQsIHRoaXMuY29tbWlzc2lvbkNvbW1lbnQpDQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy5pc01vZGFsS2V5cyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVNb2RhbCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgdGhpcy5jb21taXNzaW9uc01vZGFsID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICBsZXQgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNlbGVjdGVkVHJJdGVtKTsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IHNob3dNc2dTdWNjZXNzKHRoaXMuJHQoInN1Y2Nlc3NEb2NTaWduZWQiKSk7DQogICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOw0KICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRJbmNvbWVUb3RhbENvdW50KCk7DQogICAgICAgICAgICAgICAgICAvKiBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld2RhdGEgPSB0aGlzLmxpc3QuZmluZCgoZSkgPT4gZS5pZCA9PSB0ZW1wRGF0YS5pZCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUckl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBuZXdkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRSZWNlaXZlcnModGhpcy5zZWxlY3RlZFRySXRlbSk7DQogICAgICAgICAgICAgICAgICB9LCAxMDAwKTsgKi8NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UmVjZWl2ZXJzKGl0ZW0pIHsNCiAgICAgIHRoaXMubG9hZGVyUmVjZWl2ZXIgPSB0cnVlOw0KICAgICAgU2VydmljZS5nZXRSZWNlaXZlcnMoaXRlbS5sZXR0ZXJJZCkNCiAgICAgICAgICAudGhlbigocnMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuaW5mb0RhdGEgPSBycy5kYXRhOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5sb2FkZXJSZWNlaXZlciA9IGZhbHNlOw0KICAgICAgICAgIH0pOw0KICAgIH0sDQogICAgYXN5bmMgZ2V0VmlzYUluZm9CeUlkKCkgew0KICAgICAgYXdhaXQgaGVscGVyU2VydmljZS5nZXRWaXNhQWxsSW5mb0J5SWQodGhpcy5zZWxlY3RlZFRySXRlbS5hcHBsaWNhdGlvbklkRnJvbURYQSwgZmFsc2UpDQogICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgIHRoaXMudmlzYUluZm9CeUlkID0gcmVzLmRhdGENCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgfSkNCiAgICB9LA0KICAgIGFzeW5jIGNsaWNrVHJJdGVtKGl0ZW0pIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkVHJJdGVtLmlkID09PSBpdGVtLmlkKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRUckl0ZW0gPSB7fTsNCiAgICAgICAgdGhpcy5pbmZvRGF0YSA9IHt9Ow0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZWxlY3RlZFRySXRlbSA9IGl0ZW07DQogICAgICAgIGF3YWl0IHRoaXMuZ2V0QXR0YWNoZWRGaWxlc0J5SWQoaXRlbS5sZXR0ZXJJZCk7DQogICAgICAgIGF3YWl0IHRoaXMuZ2V0UmVjZWl2ZXJzKGl0ZW0pOw0KICAgICAgICBpZiAoWydGUk9NX0RYQScsICdOT1RfQkVMT05HJ10uaW5jbHVkZXMoaXRlbS5hcHBsaWNhdGlvblR5cGVJblByb2plY3QpKSB7DQogICAgICAgICAgYXdhaXQgdGhpcy5nZXRWaXNhSW5mb0J5SWQoKTsNCiAgICAgICAgICBhd2FpdCB0aGlzLmdldFByb2plY3RMZXR0ZXJzQnlMZXR0ZXJJZChpdGVtKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnZpc2FJbmZvQnlJZCA9IHt9DQogICAgICAgICAgdGhpcy5wcm9qZWN0RmlsZXNMaXN0ID0gW10NCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXRlbS5pc1JlamVjdExldHRlckNyZWF0ZWQpIHsNCiAgICAgICAgICBTZXJ2aWNlLmdldFJlamVjdExldHRlcihpdGVtLmxldHRlcklkKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLnJlamVjdGVkTGV0dGVyID0gcmVzLmRhdGE7DQogICAgICAgICAgfSkuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5yZWplY3RlZExldHRlciA9IG51bGw7DQogICAgICAgICAgdGhpcy5maWxlVXBsb2FkUGF0aCA9IG51bGw7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHNpZ25hdHVyZUl0ZW0oKSB7DQogICAgICB0aGlzLmlzTW9kYWxLZXlzID0gdHJ1ZTsNCiAgICB9LA0KICAgIHNlbGVjdFNlbmRUeXBlKHYpIHsNCiAgICAgIHRoaXMuc2VsZWN0ZWRUckl0ZW0gPSB7fTsNCiAgICAgIHRoaXMuaW5mb0RhdGEgPSB7fTsNCiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PSB2KSB7DQogICAgICAgIHRoaXMuYWN0aXZlID0gIiI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmFjdGl2ZSA9IHY7DQogICAgICB9DQogICAgICB0aGlzLmdldExpc3QoKTsNCiAgICB9LA0KICAgIG1ha2VBZ3JlZShpdGVtKSB7DQogICAgICB0aGlzLmNuZigpLnRoZW4oKHJzKSA9PiB7DQogICAgICAgIGlmIChycy52YWx1ZSkgew0KICAgICAgICAgIFNlcnZpY2UubWFrZUFncmVlKGl0ZW0ubGV0dGVySWQpLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgbGV0IHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZWxlY3RlZFRySXRlbSk7DQogICAgICAgICAgICBhd2FpdCB0aGlzLnN1Y2Nlc3NTYXZlZCgpOw0KICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0SW5jb21lVG90YWxDb3VudCgpOw0KICAgICAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAvLyAgIGxldCBuZXdkYXRhID0gdGhpcy5saXN0LmZpbmQoKGUpID0+IGUuaWQgPT0gdGVtcERhdGEuaWQpOw0KICAgICAgICAgICAgLy8gICB0aGlzLnNlbGVjdGVkVHJJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgbmV3ZGF0YSk7DQogICAgICAgICAgICAvLyAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7DQogICAgICAgICAgICAvLyAgIHRoaXMuZ2V0UmVjZWl2ZXJzKHRoaXMuc2VsZWN0ZWRUckl0ZW0pOw0KICAgICAgICAgICAgLy8gfSwgNTAwKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBmZXRjaENvbW1pc3Npb25UeXBlcyhjYWxsYmFjayA9ICgpID0+ICh7fSkpIHsNCiAgICAgIFNlcnZpY2Uuc2VhcmNoTGlzdCgnZGlyZWN0b3J5L2NvbW1pc3Npb24vY29tbWlzc2lvbi10eXBlJywgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCwgbnVsbCwgdHJ1ZSkNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5jb21taXNzaW9uVHlwZXMgPSByZXMuZGF0YS5saXN0DQogICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICB9KQ0KICAgIH0sDQogICAgbWFrZVJldmlld0ZvckNvbW1pc3Npb24oaXRlbSkgew0KICAgICAgdGhpcy5jbmYoKS50aGVuKChycykgPT4gew0KICAgICAgICBpZiAocnMudmFsdWUpIHsNCiAgICAgICAgICBTZXJ2aWNlLm1ha2VSZXZpZXdGb3JDb21taXNzaW9uKGl0ZW0uaWQsIGl0ZW0uY29tbWVudCkudGhlbihhc3luYyAoKSA9PiB7DQogICAgICAgICAgICBhd2FpdCB0aGlzLnN1Y2Nlc3NTYXZlZCgpOw0KICAgICAgICAgICAgYXdhaXQgdGhpcy4kcm91dGVyLnB1c2goIi9wcm9qZWN0cy9jb21taXNzaW9uIik7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgbGV0dGVyTWFrZVZpZXdlZChpdGVtKSB7DQogICAgICB0aGlzLmNuZigpLnRoZW4oKHJzKSA9PiB7DQogICAgICAgIGlmIChycy52YWx1ZSkgew0KICAgICAgICAgIFNlcnZpY2UubWFrZUNvbXByb21pc2VEZWNpc2lvblZpZXdlZChpdGVtLmlkKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuZm9yY2VSb3V0ZVJlbG9hZCgpDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgbGV0dGVyUmVqZWN0Vmlld2VkKGl0ZW0pIHsNCiAgICAgIHRoaXMuY25mKCkudGhlbigocnMpID0+IHsNCiAgICAgICAgaWYgKHJzLnZhbHVlKSB7DQogICAgICAgICAgU2VydmljZS5tYWtlVmlld2VkTGV0dGVyVG9SZWplY3QoaXRlbS5pZCkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmZvcmNlUm91dGVSZWxvYWQoKQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIG1ha2VSZXZpZXdGb3JDb21taXNzaW9uV2l0aENvbW1lbnQoaXRlbSkgew0KICAgICAgaWYgKHRoaXMuY29tbWlzc2lvblR5cGVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICByZXR1cm4gdGhpcy5mZXRjaENvbW1pc3Npb25UeXBlcygoKSA9PiB7DQogICAgICAgICAgdGhpcy5jb21taXNzaW9uc01vZGFsID0gdHJ1ZTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICB0aGlzLmNvbW1pc3Npb25zTW9kYWwgPSB0cnVlOw0KICAgIH0sDQogICAgbWFrZVJldmlldyhpdGVtKSB7DQogICAgICB0aGlzLmNuZigpLnRoZW4oKHJzKSA9PiB7DQogICAgICAgIGlmIChycy52YWx1ZSkgew0KICAgICAgICAgIFNlcnZpY2UubWFrZVJldmlldyhpdGVtLmxldHRlcklkKS50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIC8vIGxldCB0ZW1wRGF0YSA9IHRoaXMuc2VsZWN0ZWRUckl0ZW07DQogICAgICAgICAgICBsZXQgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNlbGVjdGVkVHJJdGVtKTsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3VjY2Vzc1NhdmVkKCk7DQogICAgICAgICAgICBhd2FpdCB0aGlzLmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOw0KICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRJbmNvbWVUb3RhbENvdW50KCk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgbWFrZVJldmlld0xldHRlcihpdGVtKSB7DQogICAgICB0aGlzLmNuZigpLnRoZW4oKHJzKSA9PiB7DQogICAgICAgIGlmIChycy52YWx1ZSkgew0KICAgICAgICAgIFNlcnZpY2UubWFrZUFncmVlZExldHRlcihpdGVtLmlkKS50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIGxldCB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2VsZWN0ZWRUckl0ZW0pOw0KICAgICAgICAgICAgYXdhaXQgdGhpcy5zdWNjZXNzU2F2ZWQoKTsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7DQogICAgICAgICAgICBhd2FpdCB0aGlzLmdldEluY29tZVRvdGFsQ291bnQoKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICByZWplY3RDb25maXJtKCkgew0KICAgICAgY25mRG9jKHRoaXMuJHQoIm1lc3NhZ2VzLnJlamVjdF90aXRsZSIpKS50aGVuKChycykgPT4gew0KICAgICAgICBpZiAocnMudmFsdWUpIHsNCiAgICAgICAgICB0aGlzLnNpZ25hdHVyZU1vZGFsID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBmb3JSZXZpZXcoKSB7DQogICAgICBjbmZEb2ModGhpcy4kdCgibWVzc2FnZXMueW91X3N1cmVfdGl0bGUiKSkudGhlbigocnMpID0+IHsNCiAgICAgICAgaWYgKHJzLnZhbHVlKSB7DQogICAgICAgICAgdGhpcy5zaWduYXR1cmVNb2RhbCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgdmlld0ZpbGUodXBsb2FkUGF0aCkgew0KICAgICAgaWYgKHRoaXMuZ2V0RXh0KHVwbG9hZFBhdGgpID09PSAicGRmIikgew0KICAgICAgICB0aGlzLmZpbGVVcGxvYWRQYXRoID0gdXBsb2FkUGF0aDsNCiAgICAgICAgdGhpcy52aWV3RmlsZU1vZGFsID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNpZ25JdGVtVG9NYW5hZ2VtZW50KGl0ZW0pIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKA0KICAgICAgICAgIGAvbGV0dGVyL2luY29tZS90by1tYW5hZ2VtZW50LyR7aXRlbS5sZXR0ZXJJZH0vJHtpdGVtLmlkfWANCiAgICAgICk7DQogICAgfSwNCiAgICBoYW5kbGVTZW5kTGV0dGVyVG9DaGFpcm1hbigpIHsNCiAgICAgIHRoaXMuY25mKCkudGhlbigoe3ZhbHVlfSkgPT4gew0KICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICB0aGlzLnNlbmRMZXR0ZXJUb0NoYWlybWFuLmxvYWRlciA9IHRydWUNCiAgICAgICAgICBTZXJ2aWNlLmhhbmRsZVNlbmRMZXR0ZXJUb0NoYWlybWFuKHRoaXMucmVqZWN0ZWRMZXR0ZXIuaWQsIHRoaXMuc2VuZExldHRlclRvQ2hhaXJtYW4uY29tbWVudCkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICAgIHRoaXMuc2VuZExldHRlclRvQ2hhaXJtYW4ubG9hZGVyID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuc2VuZExldHRlclRvQ2hhaXJtYW4ubW9kYWwgPSBmYWxzZQ0KICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbmRMZXR0ZXJUb0NoYWlybWFuLmxvYWRlciA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5zZW5kTGV0dGVyVG9DaGFpcm1hbi5tb2RhbCA9IGZhbHNlDQogICAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlTGV0dGVyQ2FuY2VsbGVkKGl0ZW0pIHsNCiAgICAgIHRoaXMuaXNSZWplY3RlZFNlZU1vZGFsID0gdHJ1ZTsNCiAgICB9LA0KDQogICAgYXN5bmMgc2lnbkFjY2VwdGVkSXRlbShpdGVtKSB7DQogICAgICBpZiAoaXRlbS5hcHBsaWNhdGlvblR5cGVJblByb2plY3QgPT09ICdGUk9NX0RYQScgJiYgaXRlbS5zdGF0dXMgPT09ICdTRU5EX1NJR04nDQogICAgICAgICAgJiYgaXRlbS5hY3Rpb24gPT09ICdTSUdOQVRVUkUnKSB7DQogICAgICAgIGF3YWl0IFNlcnZpY2Uuc2V0TGV0dGVyUmVqdE9yQWNjZXB0KGl0ZW0ubGV0dGVySWQsIGZhbHNlKS50aGVuKChycykgPT4gew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKA0KICAgICAgICAgICAgICBgL2xldHRlci9pbmNvbWUvJHtpdGVtLmxldHRlcklkfS8ke2l0ZW0uaWR9YA0KICAgICAgICAgICk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBhc3luYyBzaWduUmVqZWN0ZWRJdGVtKGl0ZW0pIHsNCiAgICAgIGlmIChpdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCA9PT0gJ0ZST01fRFhBJyAmJiBpdGVtLnN0YXR1cyA9PT0gJ1NFTkRfU0lHTicNCiAgICAgICAgICAmJiBpdGVtLmFjdGlvbiA9PT0gJ1NJR05BVFVSRScpIHsNCiAgICAgICAgYXdhaXQgU2VydmljZS5zZXRMZXR0ZXJSZWp0T3JBY2NlcHQoaXRlbS5sZXR0ZXJJZCwgdHJ1ZSkudGhlbigocnMpID0+IHsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgNCiAgICAgICAgICAgICAgYC9sZXR0ZXIvaW5jb21lLyR7aXRlbS5sZXR0ZXJJZH0vJHtpdGVtLmlkfWANCiAgICAgICAgICApOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIHNpZ25JdGVtKGl0ZW0pIHsNCiAgICAgIHN3aXRjaCAoaXRlbS5hY3Rpb24pIHsNCiAgICAgICAgY2FzZSAnU0lHTkFUVVJFJzoNCiAgICAgICAgICB0aGlzLmN1cnJlbnRJdGVtID0gaXRlbTsNCiAgICAgICAgICBpZiAoaXRlbS5hcHBsaWNhdGlvblR5cGVJblByb2plY3QgPT09ICdGUk9NX0RYQScpIHsNCiAgICAgICAgICAgIHN3aXRjaCAoaXRlbS5zdGF0dXMpIHsNCiAgICAgICAgICAgICAgY2FzZSAnU0VORF9TSUdOJzoNCiAgICAgICAgICAgICAgICBhd2FpdCBTZXJ2aWNlLnNldExldHRlclJlanRPckFjY2VwdChpdGVtLmxldHRlcklkLCB0cnVlKS50aGVuKChycykgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgYC9sZXR0ZXIvaW5jb21lLyR7aXRlbS5sZXR0ZXJJZH0vJHtpdGVtLmlkfWANCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ0NPTU1JU1NJT05fU0VORCc6DQogICAgICAgICAgICAgICAgYXdhaXQgU2VydmljZS5zZXRMZXR0ZXJSZWp0T3JBY2NlcHQoaXRlbS5sZXR0ZXJJZCwgdHJ1ZSkudGhlbigocnMpID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKA0KICAgICAgICAgICAgICAgICAgICAgIGAvbGV0dGVyL2luY29tZS8ke2l0ZW0ubGV0dGVySWR9LyR7aXRlbS5pZH1gDQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgIGNuZkRvYyh0aGlzLiR0KCJkb2NDb25maXJtIikpLnRoZW4oKHJzKSA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAocnMudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVNb2RhbCA9IHRydWU7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCA9PT0gJ05PVF9CRUxPTkcnKSB7DQogICAgICAgICAgICBpZiAoaXRlbS5maWxlVHlwZSAhPT0gJ3BkZicpIHsNCiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb252ZXJ0VG9QZGYoaXRlbSkudGhlbihhc3luYyByID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIXIudXBsb2FkUGF0aCkgew0KICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMucHJvamVjdF9maWxlc19jb252ZXJ0X3BkZl9lcnJvcicpLCB7dHlwZTogJ2Vycm9yJ30pDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICghci51cGxvYWRQYXRoLmVuZHNXaXRoKCcucGRmJykpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLnByb2plY3RfZmlsZXNfY29udmVydF9wZGZfZXJyb3InKSwge3R5cGU6ICdlcnJvcid9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IGNvbnNvbGUubG9nKGUpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7DQogICAgICAgICAgICAgIGNhc2UgJ1NFTkRfU0lHTic6DQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9sZXR0ZXIvaW5jb21lLyR7aXRlbS5sZXR0ZXJJZH0vJHtpdGVtLmlkfWApOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICBjYXNlICdGT1JfUkVHSU9OJzoNCiAgICAgICAgICAgICAgICBhd2FpdCBTZXJ2aWNlLnNldExldHRlclJlanRPckFjY2VwdChpdGVtLmxldHRlcklkLCB0cnVlKS50aGVuKChycykgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgYC9sZXR0ZXIvaW5jb21lLyR7aXRlbS5sZXR0ZXJJZH0vJHtpdGVtLmlkfWANCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ0ZPUl9OT1RfQkVMT05HJzoNCiAgICAgICAgICAgICAgICBhd2FpdCBTZXJ2aWNlLnNldExldHRlclJlanRPckFjY2VwdChpdGVtLmxldHRlcklkLCB0cnVlKS50aGVuKChycykgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgYC9sZXR0ZXIvaW5jb21lLyR7aXRlbS5sZXR0ZXJJZH0vJHtpdGVtLmlkfWANCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ0NPTU1JU1NJT05fU0VORCc6DQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9sZXR0ZXIvaW5jb21lLyR7aXRlbS5sZXR0ZXJJZH0vJHtpdGVtLmlkfWApOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICBjYXNlICdTRU5EX1NJR05fRklOSVNIJzoNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaChgL2xldHRlci9tYWtlLXNpZ25lZC10by1jbG9zZWQvJHtpdGVtLmlkfS8ke2l0ZW0ubGV0dGVySWR9YCk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ0ZPUl9OT1RfQ09NUExFVEVEJzoNCiAgICAgICAgICAgICAgICBhd2FpdCBTZXJ2aWNlLnNldExldHRlclJlanRPckFjY2VwdChpdGVtLmxldHRlcklkLCB0cnVlKS50aGVuKChycykgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgYC9sZXR0ZXIvaW5jb21lLyR7aXRlbS5sZXR0ZXJJZH0vJHtpdGVtLmlkfWANCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ1NFTkRfRk9SX0NPTU1JU1NJT04nOg0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHJvdXRlci5wdXNoKGAvbGV0dGVyL2JlZm9yZS1jb21taXNzaW9uLyR7aXRlbS5pZH0vJHtpdGVtLmxldHRlcklkfWApOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICBjYXNlICdTRU5EX1NJR05fVE9fUkVUVVJOJzoNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaChgL2xldHRlci9pbmNvbWUvJHtpdGVtLmxldHRlcklkfS8ke2l0ZW0uaWR9YCk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgJ1RPX1NJR05fUkVKRUNUX0xFVFRFUic6DQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4kcm91dGVyLnB1c2goYC9sZXR0ZXIvdG8tcmVqZWN0LyR7aXRlbS5pZH0vJHtpdGVtLmxldHRlcklkfWApOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICBjYXNlICdUT19TSUdOX0ZJTklTSF9MRVRURVInOg0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHJvdXRlci5wdXNoKGAvbGV0dGVyL2JlZm9yZS1jb21taXNzaW9uLyR7aXRlbS5pZH0vJHtpdGVtLmxldHRlcklkfWApOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgIGF3YWl0IGNuZkRvYyh0aGlzLiR0KCJkb2NDb25maXJtIikpLnRoZW4oKHJzKSA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAocnMudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVNb2RhbCA9IHRydWU7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICdBR1JFRU1FTlQnOg0KICAgICAgICAgIHRoaXMuY3VycmVudEl0ZW0gPSBpdGVtOw0KICAgICAgICAgIHN3aXRjaCAoaXRlbS5zdGF0dXMpIHsNCiAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgIHRoaXMubWFrZUFncmVlKGl0ZW0pOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICB9DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ1JFVklFVyc6DQogICAgICAgICAgdGhpcy5jdXJyZW50SXRlbSA9IGl0ZW07DQogICAgICAgICAgaWYgKHRoaXMuY29tcHV0ZWRNYWtlU2lnbmVkQ29tcHJvbWlzZURlY2lzaW9uVG9BY2NlcHQpIHsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTWFrZVNpZ25lZENvbXByb21pc2VEZWNpc2lvblRvQWNjZXB0KCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50SXRlbS5pc0ZvckNvbW1pc3Npb24gJiYgdGhpcy5jdXJyZW50SXRlbS5pc0hlYWRPZkRlcGFydG1lbnQpIHsNCiAgICAgICAgICAgICAgdGhpcy5sZXR0ZXJNYWtlVmlld2VkKGl0ZW0pDQogICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgc3dpdGNoIChpdGVtLnN0YXR1cykgew0KICAgICAgICAgICAgICAgIGNhc2UgJ1NFTkRfRk9SX0NPTU1JU1NJT04nOg0KICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlUmV2aWV3Rm9yQ29tbWlzc2lvbihpdGVtKTsNCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ1NFTlRfVE9fTUFOQUdFTUVOVCc6DQogICAgICAgICAgICAgICAgICB0aGlzLm1ha2VSZXZpZXdGb3JDb21taXNzaW9uV2l0aENvbW1lbnQoaXRlbSk7DQogICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdTRU5UX0ZPUl9SRUpFQ1QnOg0KICAgICAgICAgICAgICAgICAgLy8gWGF0IHlhcmF0aXNoIHR1Z21hc2lkYSBzaHUgam95Z2Ega2VsYXlhcHRpLg0KICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRSZWplY3RMZXR0ZXIoaXRlbSk7DQogICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdUT19JTlZPS0VfU0lHTkVEJzoNCiAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVJldmlld0xldHRlcihpdGVtKTsNCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ1NFTkRfU0VFTl9DTE9TRUQnOg0KICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbmYoKS50aGVuKChycykgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocnMudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlLm1ha2VBZ3JlZWRMZXR0ZXJUb0Nsb3NlZChpdGVtLmlkKS50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2VsZWN0ZWRUckl0ZW0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zdWNjZXNzU2F2ZWQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldEluY29tZVRvdGFsQ291bnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdGSU5JU0hfTEVUVEVSX1NJR05fQU5EX1NFTkQnOg0KICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbmYoKS50aGVuKChycykgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocnMudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlLm1ha2VWaWV3ZWRMZXR0ZXJUb0ZpbmlzaChpdGVtLmlkKS50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2VsZWN0ZWRUckl0ZW0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zdWNjZXNzU2F2ZWQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldEluY29tZVRvdGFsQ291bnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdSRUpFQ1RFRCc6DQogICAgICAgICAgICAgICAgICB0aGlzLmxldHRlclJlamVjdFZpZXdlZChpdGVtKQ0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVJldmlldyhpdGVtKTsNCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2F2ZSgpIHsNCiAgICAgIGlmICghdGhpcy4kcmVmcy5hZGRSZWYuY2hlY2tWYWxpZGl0eSgpKSB7DQogICAgICAgIFNlcnZpY2UudXBsb2FkKHRoaXMuJHJlZnMuYWRkUmVmLmZvcm0pLnRoZW4oKHJzKSA9PiB7DQogICAgICAgICAgaWYgKHJzLmRhdGEpIHsNCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgICAgbGV0IHJvdXRlRGF0YSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsNCiAgICAgICAgICAgICAgbmFtZTogIk9mZmljZS1ET0NVTUVOVC1jb21taXNzaW9uIiwNCiAgICAgICAgICAgICAgcXVlcnk6IHtwYWdlOiAiR0VUIiwgaWQ6IHJzLmRhdGEuaWR9LA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB3aW5kb3cub3Blbihyb3V0ZURhdGEuaHJlZiwgIl9ibGFuayIpOw0KICAgICAgICAgICAgdGhpcy5pc01vZGFsID0gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZW50ZXJJbmZvKCk7DQogICAgICB9DQogICAgfSwNCiAgICBhZGQoKSB7DQogICAgICB0aGlzLmlzTW9kYWwgPSB0cnVlOw0KICAgIH0sDQogICAgZ2V0TGlzdChyZXNldCA9IGZhbHNlLCByZXNldElkKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgU2VydmljZS5nZXRMaXN0TGV0dGVySW5jb21lKHRoaXMucGFyYW1zLCB0aGlzLmFjdGl2ZSkNCiAgICAgICAgICAudGhlbigoe2RhdGF9KSA9PiB7DQogICAgICAgICAgICB0aGlzLmxpc3QgPSBkYXRhLmxpc3Q7DQogICAgICAgICAgICB0aGlzLnRvdGFsID0gZGF0YS50b3RhbDsNCiAgICAgICAgICAgIGlmIChyZXNldCkgew0KICAgICAgICAgICAgICBsZXQgbmV3ZGF0YSA9IHRoaXMubGlzdC5maW5kKChlKSA9PiBlLmlkID09PSByZXNldElkKTsNCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRySXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIG5ld2RhdGEpOw0KICAgICAgICAgICAgICAvLyB0aGlzLiRmb3JjZVVwZGF0ZSgpOw0KICAgICAgICAgICAgICB0aGlzLmdldFJlY2VpdmVycyh0aGlzLnNlbGVjdGVkVHJJdGVtKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICB9KTsNCiAgICB9LA0KICAgIHVwbG9hZFJlamVjdExldHRlcihpdGVtKSB7DQogICAgICB0aGlzLmNuZigpLnRoZW4oKHt2YWx1ZX0pID0+IHsNCiAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgU2VydmljZS51cGxvYWRSZWplY3RMZXR0ZXIoaXRlbS5pZCwgJ0xFVFRFUl9SRUpFQ1QnLCAiUmFkIGV0aXNoIHhhdGkiKS50aGVuKChycykgPT4gew0KICAgICAgICAgICAgbGV0IHJvdXRlRGF0YSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsNCiAgICAgICAgICAgICAgbmFtZTogIk9mZmljZS1ET0NVTUVOVC1jb21taXNzaW9uIiwNCiAgICAgICAgICAgICAgcXVlcnk6IHtpZDogcnMuZGF0YS5pZCwgcGFnZTogIkdFVCJ9LA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgICAgIHRoaXMuZ2V0SW5jb21lVG90YWxDb3VudCgpOw0KICAgICAgICAgICAgd2luZG93Lm9wZW4ocm91dGVEYXRhLmhyZWYsICJfYmxhbmsiKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["income.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"income.vue","sourceRoot":"src/modules/letter/income","sourcesContent":["<script>\r\nimport Service from \"../letterService\";\r\nimport {cnfDoc, showMsgSuccess} from \"@/helper\";\r\nimport SignKeys from \"../SignKeys.vue\";\r\nimport Receivers from \"./receivers.vue\";\r\nimport Editor from \"../create/froal.editor.vue\";\r\nimport Modal from \"../create/modal.vue\";\r\nimport helperService from '@/shared/services/helper.service'\r\n\r\nexport default {\r\n  components: {SignKeys, Receivers, Editor, Modal},\r\n  watch: {\r\n    page() {\r\n      this.getList();\r\n    },\r\n    searchValue(v) {\r\n      this.getList();\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      rejectedSeeLoader: false,\r\n      rejectedLetter: null,\r\n      viewFileModal: false,\r\n      fileUploadPath: null,\r\n      isRejectedSeeModal: false,\r\n      signatureSeeModal: false,\r\n      reasonRejectedSee: \"\",\r\n      commissionTypeId: null,\r\n      commissionComment: '',\r\n      commissionCompletionDate: null,\r\n      commissionModalLoader: false,\r\n      commissionTypes: [],\r\n      commissionsModal: false,\r\n      currentPage: 1,\r\n      src: null,\r\n      numPages: undefined,\r\n      reasonRejected: \"\",\r\n      reasonForReview: \"\",\r\n      selectedTrItem: {},\r\n      active: \"\",\r\n      sendTypeList: [\r\n        {\r\n          label: this.$t(\"forSignature\"),\r\n          value: \"SIGNATURE\",\r\n        },\r\n        {\r\n          label: this.$t(\"forAgreement\"),\r\n          value: \"AGREEMENT\",\r\n        },\r\n        {\r\n          label: this.$t(\"forReview\"),\r\n          value: \"REVIEW\",\r\n        },\r\n      ],\r\n      title: this.$t(\"received\"),\r\n      items: [\r\n        {\r\n          text: this.$t(\"menu\"),\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: this.$t(\"received\"),\r\n          active: true,\r\n        },\r\n      ],\r\n      list: [],\r\n      searchValue: \"\",\r\n      page: 1,\r\n      limit: 20,\r\n      loading: false,\r\n      total: 1,\r\n      isModal: false,\r\n      currentItem: {},\r\n      signatureModal: false,\r\n      loaderButton: false,\r\n      isModalKeys: false,\r\n      agreementCount: 0,\r\n      signatureCount: 0,\r\n      reviewCount: 0,\r\n      loaderReceiver: false,\r\n      infoData: {},\r\n      visaInfoById: {},\r\n      rejectedLoader: false,\r\n      isRejectedModal: false,\r\n      isForReviewModal: false,\r\n      viewModal: false,\r\n      filesList: [],\r\n      projectFilesList: [],\r\n      viewModalBeforeSigned: false,\r\n      loaderPdf: false,\r\n      ilovaUploadPath: null,\r\n      viewIlovaModal: false,\r\n      base64: null,\r\n      editModal: false,\r\n      loader: false,\r\n      contextText: \"\",\r\n      icon: {\r\n        pdf: require('@/assets/pdf.png'),\r\n      },\r\n      sendLetterToChairman: {\r\n        modal: false,\r\n        comment: \"\",\r\n        loader: false,\r\n      }\r\n    };\r\n  },\r\n  async created() {\r\n    await this.getList();\r\n    await this.getIncomeTotalCount();\r\n  },\r\n  computed: {\r\n    params() {\r\n      return {\r\n        params: {\r\n          itemsPerPage: this.limit,\r\n          page: this.page - 1,\r\n        },\r\n        search: this.searchValue,\r\n      };\r\n    },\r\n    computedMakeSignedCompromiseDecisionToReject() {\r\n      return this.selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n          && this.selectedTrItem.applicationTypeInProject !== 'NOT_BELONG'\r\n          && ['SENT_FOR_REJECT', 'REJECTED', 'TO_INVOKE_SIGNED', 'TO_SIGN_FINISH_LETTER',\r\n            'FINISH_LETTER_SIGN_AND_SEND', 'SEND_SIGN_TO_RETURN', 'SEND_SIGN'].indexOf(this.selectedTrItem.status) === -1\r\n          && this.selectedTrItem.isForCommission && !this.selectedTrItem.isHeadOfDepartment;\r\n    },\r\n    computedMakeSignedCompromiseDecisionToAccept() {\r\n      return this.selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n          && this.selectedTrItem.applicationTypeInProject !== 'NOT_BELONG'\r\n          && ['REJECTED'].indexOf(this.selectedTrItem.status) === -1\r\n          && this.selectedTrItem.isForCommission && !this.selectedTrItem.isHeadOfDepartment;\r\n    },\r\n    signItemButtonLabel() {\r\n      if (this.selectedTrItem.action === \"SIGNATURE\") {\r\n        if (this.selectedTrItem.status === 'SEND_SIGN') {\r\n          return this.$t(\"submodules.commission.doc_status.send_for_commission\")\r\n        }\r\n        return this.$t(\"submodules.reports.make_sign\")\r\n      } else if (this.selectedTrItem.action === 'REVIEW') {\r\n        if (this.selectedTrItem.isForCommission && !this.selectedTrItem.isHeadOfDepartment) {\r\n          return this.$t(\"submodules.commission.doc_status.for_begin_commission\")\r\n        }\r\n        switch (this.selectedTrItem.status) {\r\n          case 'SENT_FOR_REJECT':\r\n            if (!this.selectedTrItem.isRejectLetterCreated) {\r\n              return this.$t(\"submodules.commission.doc_button.create_letter\")\r\n            }\r\n            break;\r\n          case 'REJECTED':\r\n              return this.$t(\"submodules.commission.doc_status.confirmation_that_letter_has_reached\")\r\n          default:\r\n            return this.$t(\"confirm\")\r\n        }\r\n      } else if (this.selectedTrItem.action === 'AGREEMENT') {\r\n        return this.$t(\"submodules.reports.make_agreement\")\r\n      }\r\n      return \"\"\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    showRejectedByRaisModal(item) {\r\n      this.currentItem = item;\r\n      this.isRejectedSeeModal = true;\r\n    },\r\n    rejectSeeConfirm() {\r\n      cnfDoc(this.$t(\"messages.reject_title\")).then((rs) => {\r\n        if (rs.value) {\r\n          this.signatureSeeModal = true;\r\n        }\r\n      });\r\n    },\r\n    async signSuccessSee(data) {\r\n      let payload = {\r\n        signedContent: data.content,\r\n        inn: data.inn,\r\n        pnfl: data.pnfl\r\n      }\r\n      switch (this.selectedTrItem.action) {\r\n        case 'REVIEW':\r\n          switch (this.selectedTrItem.status) {\r\n            case 'SEND_SEEN_CLOSED':\r\n              await Service.letterCancelled(payload, this.selectedTrItem.letterId, this.selectedTrItem.id, this.reasonRejectedSee)\r\n                  .then(async () => {\r\n                    this.isRejectedSeeModal = false;\r\n                    this.signatureSeeModal = false;\r\n                    this.getProjects();\r\n                    this.getTotalCount();\r\n                  })\r\n                  .catch((err) => {\r\n                    // this.catchErr(err);\r\n                  });\r\n              break;\r\n          }\r\n          break;\r\n        default:\r\n          await Service.onlyDocSignForRRejectedByRais(payload, this.selectedTrItem.letterId, this.selectedTrItem.id, this.reasonRejectedSee)\r\n              .then(async () => {\r\n                this.isRejectedSeeModal = false;\r\n                this.signatureSeeModal = false;\r\n                let tempData = Object.assign({}, this.selectedTrItem);\r\n                await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                this.getList();\r\n                this.getTotalCount();\r\n              })\r\n              .catch((err) => {\r\n                // this.catchErr(err);\r\n              });\r\n          break;\r\n      }\r\n    },\r\n    openSignatureModalForCommission() {\r\n      if (this.commissionTypeId) {\r\n        if (this.selectedTrItem.action === 'REVIEW'\r\n            && this.selectedTrItem.applicationTypeInProject === 'INNER'\r\n            && (this.selectedTrItem.status === 'SENT_TO_MANAGEMENT')\r\n            && this.selectedTrItem.projectType === 'BEFORE_COMMISSION') {\r\n          if (!this.commissionCompletionDate) {\r\n            return this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n          }\r\n          Service.makeReviewForCommissionManagement(this.selectedTrItem.id, this.commissionTypeId, this.commissionComment, this.commissionCompletionDate)\r\n              .then(async () => {\r\n                await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                this.getProjects();\r\n                this.getTotalCount();\r\n                this.signatureModal = false;\r\n                this.commissionsModal = false;\r\n              })\r\n              .catch((err) => {\r\n                // this.catchErr(err);\r\n              })\r\n              .finally(() => {\r\n                this.signatureModal = false;\r\n                this.commissionsModal = false;\r\n              });\r\n        } else {\r\n          this.signatureModal = true\r\n        }\r\n      } else {\r\n        this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n      }\r\n    },\r\n    customLabelCommissionTypes(opt) {\r\n      let selected = this.commissionTypes.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    changeText(text) {\r\n      this.contextText = text;\r\n    },\r\n    okModal() {\r\n      let text = this.$refs.editorRef.text;\r\n      this.$refs.editModalRef.loading(true);\r\n      Service.saveLetterBody(this.selectedTrItem.letterId, text)\r\n          .then(() => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            this.successEdited();\r\n            this.getList(true, tempData.id);\r\n            this.editModal = false;\r\n            /* setTimeout(() => {\r\n              let newdata = this.list.find((e) => e.id == tempData.id);\r\n              this.selectedTrItem = newdata;\r\n              this.$forceUpdate();\r\n              this.getReceivers(this.selectedTrItem);\r\n            }, 500); */\r\n          })\r\n          .catch((e) => {\r\n          })\r\n          .finally(() => {\r\n            this.$refs.editModalRef.loading(false);\r\n          });\r\n    },\r\n    viewModalClick() {\r\n      this.$refs.editModalRef.loadingPdf(true);\r\n      this.viewModalBeforeSigned = true;\r\n      this.loaderPdf = true;\r\n      this.base64 = null;\r\n\r\n      Service.convert(this.contextText)\r\n          .then((res) => {\r\n            setTimeout(() => {\r\n              this.base64 = res.data;\r\n            }, 400);\r\n          })\r\n          .finally(() => {\r\n            this.loaderPdf = false;\r\n            this.$refs.editModalRef.loadingPdf(false);\r\n          });\r\n    },\r\n    editLetter(item) {\r\n      /* this.editModal = true;\r\n      setTimeout(() => {\r\n        Service.getBody(item.letterId).then((res) => {\r\n          let editor = this.$refs.editorRef;\r\n          if (editor) {\r\n            if (!this._empty(res.data)) {\r\n              editor.setTextContent(res.data);\r\n            }\r\n          }\r\n        });\r\n      }, 400); */\r\n\r\n    },\r\n    viewProject(selectedLetter) {\r\n      /* this.$router.push({\r\n          name: selectedLetter.projectType === 'COMMISSION' ? 'CommissionProjects' : 'ProjectsMain',\r\n          query: { page: \"overview\", id: selectedLetter.projectId },\r\n      }); */\r\n      let routeData = this.$router.resolve({\r\n        name: selectedLetter.projectType === 'COMMISSION' ? 'CommissionProjects' : 'ProjectsMain',\r\n        query: {page: \"overview\", id: selectedLetter.projectId},\r\n      });\r\n      window.open(routeData.href, '_blank');\r\n    },\r\n    viewIlova(item) {\r\n      const ext = this.getExt(item.uploadPath ? item.uploadPath : item.url)\r\n      if (ext === \"pdf\") {\r\n        this.ilovaUploadPath = item.uploadPath ? item.uploadPath : item.url;\r\n        this.viewIlovaModal = true;\r\n      } else {\r\n        this.convertToPdf(item).then((uploadPath) => {\r\n          if (uploadPath) {\r\n            this.ilovaUploadPath = uploadPath;\r\n            this.viewIlovaModal = true;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    openOnlyOffice(letterId) {\r\n      let routeData = this.$router.resolve({\r\n        name: \"Office-DOCUMENT-commission\",\r\n        query: {id: letterId, page: \"GET\"},\r\n      });\r\n      window.open(routeData.href, \"_blank\");\r\n    },\r\n    viewIlovaProject(uploadPath) {\r\n      if (this.getExt(uploadPath) === \"pdf\") {\r\n        this.ilovaUploadPath = uploadPath;\r\n        this.viewIlovaModal = true;\r\n      }\r\n    },\r\n    convertToPdf(selectedItem, forSign = false) {\r\n      return new Promise((res, rej) => {\r\n        let config = {\r\n          url: `${selectedItem.url}`,\r\n          outputtype: \".pdf\",\r\n          forSign: forSign,\r\n          key: selectedItem.key,\r\n        };\r\n        Service.convertToPdfByApi(config)\r\n            .then((rs) => {\r\n              if (rs.data.uploadPath) {\r\n                this.$nextTick(() => {\r\n                  this.src = `${this.baseUrl}/${rs.data.uploadPath}`;\r\n                });\r\n                res(rs.data.uploadPath);\r\n              } else {\r\n                res(false);\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              // this.catchErr(e);\r\n              rej(e);\r\n            });\r\n      });\r\n    },\r\n    getByIdLetter() {\r\n      Service.getByIdLetter(this.selectedTrItem.letterId)\r\n          .then((rs) => {\r\n            this.currentDoc = rs.data;\r\n            this.loaderPdf = true;\r\n            this.convertToPdf(rs.data).then((uploadPath) => {\r\n              if (!uploadPath) {\r\n                setTimeout(() => {\r\n                  this.convertToPdf(rs.data)\r\n                      .then(() => {\r\n                        this.loaderPdf = false;\r\n                      })\r\n                      .catch((e) => {\r\n                        this.loaderPdf = false;\r\n                      });\r\n                }, 4000);\r\n              } else {\r\n                this.loaderPdf = false;\r\n              }\r\n            });\r\n          })\r\n          .catch((e) => {\r\n          });\r\n    },\r\n    viewLetter() {\r\n      this.viewModalBeforeSigned = true;\r\n      this.loaderPdf = true;\r\n      this.base64 = null;\r\n      Service.viewPdfByLetterId(this.selectedTrItem.letterId)\r\n          .then((res) => {\r\n            setTimeout(() => {\r\n              this.base64 = res.data;\r\n            }, 300);\r\n          })\r\n          .finally(() => {\r\n            this.loaderPdf = false;\r\n          });\r\n    },\r\n    viewDocBeforeSigned() {\r\n      // this.viewModalBeforeSigned = true;\r\n      // this.getByIdLetter();\r\n      this.viewLetter();\r\n    },\r\n    setCurrentPage(page) {\r\n      this.currentPage = page;\r\n    },\r\n    getAttachedFilesById(id) {\r\n      Service.getAttachedFilesById(id).then((res) => {\r\n        this.filesList = res.data;\r\n      });\r\n    },\r\n    getProjectLettersByLetterId(data) {\r\n      Service.projectLettersByLetterId(data.letterId).then((res) => {\r\n        this.projectFilesList = res.data;\r\n      });\r\n    },\r\n    saveRejected(payload) {\r\n      this.convertToPdf(this.selectedTrItem).then(r1 => {\r\n        this.rejectedLoader = true;\r\n        Service.saveRejected(\r\n            this.selectedTrItem.letterId,\r\n            this.selectedTrItem.id,\r\n            this.reasonRejected,\r\n            payload\r\n        )\r\n            .then(async () => {\r\n              this.isRejectedModal = false;\r\n              let tempData = Object.assign({}, this.selectedTrItem);\r\n              await this.successSaved();\r\n              await this.getList(true, tempData.id);\r\n              await this.getIncomeTotalCount();\r\n              /* setTimeout(() => {\r\n                let newdata = this.list.find((e) => e.id == tempData.id);\r\n                this.selectedTrItem = newdata;\r\n                this.$forceUpdate();\r\n                this.getReceivers(this.selectedTrItem);\r\n              }, 500); */\r\n            })\r\n            .finally(() => {\r\n              this.rejectedLoader = false;\r\n            });\r\n      })\r\n    },\r\n    handleToReject() {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          this.$router.push(`/letter/to-reject/${this.selectedTrItem.id}/${this.selectedTrItem.letterId}`);\r\n        }\r\n      });\r\n    },\r\n    showRejectedModal() {\r\n      switch (this.selectedTrItem.action) {\r\n        case 'SIGNATURE':\r\n          switch (this.selectedTrItem.status) {\r\n            case 'SEND_FOR_COMMISSION':\r\n              this.handleToReject();\r\n              break;\r\n            case 'SEND_SIGN':\r\n              this.isForReviewModal = true;\r\n              break;\r\n            default:\r\n              this.isRejectedModal = true;\r\n              break;\r\n          }\r\n          break;\r\n        case 'REVIEW':\r\n          if (this.computedMakeSignedCompromiseDecisionToReject) {\r\n            this.handleMakeSignedCompromiseDecisionToReject();\r\n          } else {\r\n            switch (this.selectedTrItem.status) {\r\n              case 'SEND_SEEN_CLOSED':\r\n                this.handleLetterCancelled(this.selectedTrItem);\r\n                break;\r\n              default:\r\n                this.isRejectedModal = true;\r\n                break;\r\n            }\r\n          }\r\n          break;\r\n        default:\r\n          this.isRejectedModal = true;\r\n          break;\r\n      }\r\n    },\r\n    async handleMakeSignedCompromiseDecisionToReject() {\r\n      await this.$router.push(`/letter/income/${this.selectedTrItem.letterId}/${this.selectedTrItem.id}?type=compromise-decision-to-reject`);\r\n    },\r\n    async handleMakeSignedCompromiseDecisionToAccept() {\r\n      await this.$router.push(`/letter/income/${this.selectedTrItem.letterId}/${this.selectedTrItem.id}?type=compromise-decision-to-accept`);\r\n    },\r\n    viewDocSigned() {\r\n      this.viewModal = true;\r\n    },\r\n    getIncomeTotalCount() {\r\n      Service.getIncomeTotalCount().then((rs) => {\r\n        this.agreementCount = rs.data.agreement;\r\n        this.reviewCount = rs.data.review;\r\n        this.signatureCount = rs.data.signature;\r\n      });\r\n    },\r\n    async signSuccess(data) {\r\n      let payload = {\r\n        signedContent: data.content,\r\n        inn: data.inn,\r\n        pnfl: data.pnfl\r\n      };\r\n      if (this.isRejectedModal) {\r\n        this.isModalKeys = false;\r\n        this.signatureModal = false;\r\n        this.saveRejected(payload)\r\n      } else {\r\n        switch (this.selectedTrItem.status) {\r\n          case 'COMMISSION_SEND':\r\n            Service.onlyDocSign(payload, this.selectedTrItem.id)\r\n                .then(async () => {\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                })\r\n                .catch((err) => {\r\n                  // this.catchErr(err);\r\n                });\r\n            break;\r\n          case 'NOT_BELONG':\r\n            await Service.onlyDocSign(payload, this.selectedTrItem.id)\r\n                .then(async () => {\r\n                  await Service.onlyDocSignNotBelong(payload, this.selectedTrItem.id)\r\n                      .then(async () => {\r\n\r\n\r\n                      })\r\n                      .catch((err) => {\r\n                        this.catchErr(err);\r\n                      });\r\n\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                })\r\n                .catch((err) => {\r\n                  // this.catchErr(err);\r\n                });\r\n            break;\r\n          case 'SEND_SIGN_TO_RETURN':\r\n            Service.signDoc(payload, this.selectedTrItem.id, this.commissionTypeId, this.commissionComment)\r\n                .then(async () => {\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  this.commissionsModal = false;\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                })\r\n                .catch((err) => {\r\n                });\r\n            break;\r\n          case 'SEND_SIGN':\r\n            Service.letterCancelled(payload, this.selectedTrItem.letterId, this.selectedTrItem.id, this.reasonForReview)\r\n                .then(async () => {\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  this.isForReviewModal = false;\r\n                  this.reasonForReview = '';\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                })\r\n                .catch((err) => {\r\n                });\r\n            break;\r\n          default:\r\n            Service.signDoc(payload, this.selectedTrItem.id, this.commissionTypeId, this.commissionComment)\r\n                .then(async () => {\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  this.commissionsModal = false;\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                  /* setTimeout(() => {\r\n                    let newdata = this.list.find((e) => e.id == tempData.id);\r\n                    this.selectedTrItem = Object.assign({}, newdata);\r\n                    this.$forceUpdate();\r\n                    this.getReceivers(this.selectedTrItem);\r\n                  }, 1000); */\r\n                })\r\n                .catch((err) => {\r\n                  // this.catchErr(err);\r\n                });\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    getReceivers(item) {\r\n      this.loaderReceiver = true;\r\n      Service.getReceivers(item.letterId)\r\n          .then((rs) => {\r\n            this.infoData = rs.data;\r\n          })\r\n          .finally(() => {\r\n            this.loaderReceiver = false;\r\n          });\r\n    },\r\n    async getVisaInfoById() {\r\n      await helperService.getVisaAllInfoById(this.selectedTrItem.applicationIdFromDXA, false)\r\n          .then(res => {\r\n            this.visaInfoById = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          }).finally(() => {\r\n          })\r\n    },\r\n    async clickTrItem(item) {\r\n      if (this.selectedTrItem.id === item.id) {\r\n        this.selectedTrItem = {};\r\n        this.infoData = {};\r\n      } else {\r\n        this.selectedTrItem = item;\r\n        await this.getAttachedFilesById(item.letterId);\r\n        await this.getReceivers(item);\r\n        if (['FROM_DXA', 'NOT_BELONG'].includes(item.applicationTypeInProject)) {\r\n          await this.getVisaInfoById();\r\n          await this.getProjectLettersByLetterId(item);\r\n        } else {\r\n          this.visaInfoById = {}\r\n          this.projectFilesList = []\r\n        }\r\n        if (item.isRejectLetterCreated) {\r\n          Service.getRejectLetter(item.letterId).then(res => {\r\n            this.rejectedLetter = res.data;\r\n          }).catch(e => {\r\n            console.log(e)\r\n          })\r\n        } else {\r\n          this.rejectedLetter = null;\r\n          this.fileUploadPath = null;\r\n        }\r\n      }\r\n    },\r\n    signatureItem() {\r\n      this.isModalKeys = true;\r\n    },\r\n    selectSendType(v) {\r\n      this.selectedTrItem = {};\r\n      this.infoData = {};\r\n      if (this.active == v) {\r\n        this.active = \"\";\r\n      } else {\r\n        this.active = v;\r\n      }\r\n      this.getList();\r\n    },\r\n    makeAgree(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeAgree(item.letterId).then(async () => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            await this.getIncomeTotalCount();\r\n            // setTimeout(() => {\r\n            //   let newdata = this.list.find((e) => e.id == tempData.id);\r\n            //   this.selectedTrItem = Object.assign({}, newdata);\r\n            //   this.$forceUpdate();\r\n            //   this.getReceivers(this.selectedTrItem);\r\n            // }, 500);\r\n          });\r\n        }\r\n      });\r\n    },\r\n    fetchCommissionTypes(callback = () => ({})) {\r\n      Service.searchList('directory/commission/commission-type', this.var_default_search_payload, null, true)\r\n          .then(res => {\r\n            this.commissionTypes = res.data.list\r\n            callback();\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    makeReviewForCommission(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeReviewForCommission(item.id, item.comment).then(async () => {\r\n            await this.successSaved();\r\n            await this.$router.push(\"/projects/commission\");\r\n          });\r\n        }\r\n      });\r\n    },\r\n    letterMakeViewed(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeCompromiseDecisionViewed(item.id).then(() => {\r\n            this.forceRouteReload()\r\n          });\r\n        }\r\n      });\r\n    },\r\n    letterRejectViewed(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeViewedLetterToReject(item.id).then(() => {\r\n            this.forceRouteReload()\r\n          });\r\n        }\r\n      });\r\n    },\r\n    makeReviewForCommissionWithComment(item) {\r\n      if (this.commissionTypes.length === 0) {\r\n        return this.fetchCommissionTypes(() => {\r\n          this.commissionsModal = true;\r\n        });\r\n      }\r\n      this.commissionsModal = true;\r\n    },\r\n    makeReview(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeReview(item.letterId).then(async () => {\r\n            // let tempData = this.selectedTrItem;\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            await this.getIncomeTotalCount();\r\n          });\r\n        }\r\n      });\r\n    },\r\n    makeReviewLetter(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeAgreedLetter(item.id).then(async () => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            await this.getIncomeTotalCount();\r\n          });\r\n        }\r\n      });\r\n    },\r\n    rejectConfirm() {\r\n      cnfDoc(this.$t(\"messages.reject_title\")).then((rs) => {\r\n        if (rs.value) {\r\n          this.signatureModal = true;\r\n        }\r\n      });\r\n    },\r\n    forReview() {\r\n      cnfDoc(this.$t(\"messages.you_sure_title\")).then((rs) => {\r\n        if (rs.value) {\r\n          this.signatureModal = true;\r\n        }\r\n      });\r\n    },\r\n    viewFile(uploadPath) {\r\n      if (this.getExt(uploadPath) === \"pdf\") {\r\n        this.fileUploadPath = uploadPath;\r\n        this.viewFileModal = true;\r\n      }\r\n    },\r\n    signItemToManagement(item) {\r\n      this.$router.push(\r\n          `/letter/income/to-management/${item.letterId}/${item.id}`\r\n      );\r\n    },\r\n    handleSendLetterToChairman() {\r\n      this.cnf().then(({value}) => {\r\n        if (value) {\r\n          this.sendLetterToChairman.loader = true\r\n          Service.handleSendLetterToChairman(this.rejectedLetter.id, this.sendLetterToChairman.comment).then(() => {\r\n            this.getList();\r\n            this.sendLetterToChairman.loader = false\r\n            this.sendLetterToChairman.modal = false\r\n          })\r\n              .finally(() => {\r\n                this.sendLetterToChairman.loader = false\r\n                this.sendLetterToChairman.modal = false\r\n              })\r\n        }\r\n      });\r\n    },\r\n    handleLetterCancelled(item) {\r\n      this.isRejectedSeeModal = true;\r\n    },\r\n\r\n    async signAcceptedItem(item) {\r\n      if (item.applicationTypeInProject === 'FROM_DXA' && item.status === 'SEND_SIGN'\r\n          && item.action === 'SIGNATURE') {\r\n        await Service.setLetterRejtOrAccept(item.letterId, false).then((rs) => {\r\n          this.$router.push(\r\n              `/letter/income/${item.letterId}/${item.id}`\r\n          );\r\n        });\r\n      }\r\n    },\r\n\r\n    async signRejectedItem(item) {\r\n      if (item.applicationTypeInProject === 'FROM_DXA' && item.status === 'SEND_SIGN'\r\n          && item.action === 'SIGNATURE') {\r\n        await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n          this.$router.push(\r\n              `/letter/income/${item.letterId}/${item.id}`\r\n          );\r\n        });\r\n      }\r\n    },\r\n    async signItem(item) {\r\n      switch (item.action) {\r\n        case 'SIGNATURE':\r\n          this.currentItem = item;\r\n          if (item.applicationTypeInProject === 'FROM_DXA') {\r\n            switch (item.status) {\r\n              case 'SEND_SIGN':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              case 'COMMISSION_SEND':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              default:\r\n                cnfDoc(this.$t(\"docConfirm\")).then((rs) => {\r\n                  if (rs.value) {\r\n                    this.signatureModal = true;\r\n                  }\r\n                });\r\n                break;\r\n            }\r\n          } else if (item.applicationTypeInProject === 'NOT_BELONG') {\r\n            if (item.fileType !== 'pdf') {\r\n              await this.convertToPdf(item).then(async r => {\r\n                if (!r.uploadPath) {\r\n                  this.$toast(this.$t('messages.project_files_convert_pdf_error'), {type: 'error'})\r\n                } else if (!r.uploadPath.endsWith('.pdf')) {\r\n                  this.$toast(this.$t('messages.project_files_convert_pdf_error'), {type: 'error'})\r\n                }\r\n              })\r\n                  .catch(e => console.log(e))\r\n            }\r\n          } else {\r\n            switch (item.status) {\r\n              case 'SEND_SIGN':\r\n                this.$router.push(`/letter/income/${item.letterId}/${item.id}`);\r\n                break;\r\n              case 'FOR_REGION':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              case 'FOR_NOT_BELONG':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              case 'COMMISSION_SEND':\r\n                this.$router.push(`/letter/income/${item.letterId}/${item.id}`);\r\n                break;\r\n              case 'SEND_SIGN_FINISH':\r\n                await this.$router.push(`/letter/make-signed-to-closed/${item.id}/${item.letterId}`);\r\n                break;\r\n              case 'FOR_NOT_COMPLETED':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              case 'SEND_FOR_COMMISSION':\r\n                await this.$router.push(`/letter/before-commission/${item.id}/${item.letterId}`);\r\n                break;\r\n              case 'SEND_SIGN_TO_RETURN':\r\n                await this.$router.push(`/letter/income/${item.letterId}/${item.id}`);\r\n                break;\r\n              case 'TO_SIGN_REJECT_LETTER':\r\n                await this.$router.push(`/letter/to-reject/${item.id}/${item.letterId}`);\r\n                break;\r\n              case 'TO_SIGN_FINISH_LETTER':\r\n                await this.$router.push(`/letter/before-commission/${item.id}/${item.letterId}`);\r\n                break;\r\n              default:\r\n                await cnfDoc(this.$t(\"docConfirm\")).then((rs) => {\r\n                  if (rs.value) {\r\n                    this.signatureModal = true;\r\n                  }\r\n                });\r\n                break;\r\n            }\r\n          }\r\n          break;\r\n        case 'AGREEMENT':\r\n          this.currentItem = item;\r\n          switch (item.status) {\r\n            default:\r\n              this.makeAgree(item);\r\n              break;\r\n          }\r\n          break;\r\n        case 'REVIEW':\r\n          this.currentItem = item;\r\n          if (this.computedMakeSignedCompromiseDecisionToAccept) {\r\n            await this.handleMakeSignedCompromiseDecisionToAccept();\r\n          } else {\r\n            if (!this.currentItem.isForCommission && this.currentItem.isHeadOfDepartment) {\r\n              this.letterMakeViewed(item)\r\n            } else\r\n              switch (item.status) {\r\n                case 'SEND_FOR_COMMISSION':\r\n                  this.makeReviewForCommission(item);\r\n                  break;\r\n                case 'SENT_TO_MANAGEMENT':\r\n                  this.makeReviewForCommissionWithComment(item);\r\n                  break;\r\n                case 'SENT_FOR_REJECT':\r\n                  // Xat yaratish tugmasida shu joyga kelayapti.\r\n                  this.uploadRejectLetter(item);\r\n                  break;\r\n                case 'TO_INVOKE_SIGNED':\r\n                  this.makeReviewLetter(item);\r\n                  break;\r\n                case 'SEND_SEEN_CLOSED':\r\n                  await this.cnf().then((rs) => {\r\n                    if (rs.value) {\r\n                      Service.makeAgreedLetterToClosed(item.id).then(async () => {\r\n                        let tempData = Object.assign({}, this.selectedTrItem);\r\n                        await this.successSaved();\r\n                        await this.getList(true, tempData.id);\r\n                        await this.getIncomeTotalCount();\r\n                      });\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'FINISH_LETTER_SIGN_AND_SEND':\r\n                  await this.cnf().then((rs) => {\r\n                    if (rs.value) {\r\n                      Service.makeViewedLetterToFinish(item.id).then(async () => {\r\n                        let tempData = Object.assign({}, this.selectedTrItem);\r\n                        await this.successSaved();\r\n                        await this.getList(true, tempData.id);\r\n                        await this.getIncomeTotalCount();\r\n                      });\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'REJECTED':\r\n                  this.letterRejectViewed(item)\r\n                  break;\r\n                default:\r\n                  this.makeReview(item);\r\n                  break;\r\n              }\r\n          }\r\n          break;\r\n      }\r\n    },\r\n    save() {\r\n      if (!this.$refs.addRef.checkValidity()) {\r\n        Service.upload(this.$refs.addRef.form).then((rs) => {\r\n          if (rs.data) {\r\n            this.getList();\r\n            let routeData = this.$router.resolve({\r\n              name: \"Office-DOCUMENT-commission\",\r\n              query: {page: \"GET\", id: rs.data.id},\r\n            });\r\n            window.open(routeData.href, \"_blank\");\r\n            this.isModal = false;\r\n          }\r\n        });\r\n      } else {\r\n        this.enterInfo();\r\n      }\r\n    },\r\n    add() {\r\n      this.isModal = true;\r\n    },\r\n    getList(reset = false, resetId) {\r\n      this.loading = true;\r\n      Service.getListLetterIncome(this.params, this.active)\r\n          .then(({data}) => {\r\n            this.list = data.list;\r\n            this.total = data.total;\r\n            if (reset) {\r\n              let newdata = this.list.find((e) => e.id === resetId);\r\n              this.selectedTrItem = Object.assign({}, newdata);\r\n              // this.$forceUpdate();\r\n              this.getReceivers(this.selectedTrItem);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            // this.catchErr(err);\r\n          })\r\n          .finally(() => {\r\n            this.loading = false;\r\n          });\r\n    },\r\n    uploadRejectLetter(item) {\r\n      this.cnf().then(({value}) => {\r\n        if (value) {\r\n          Service.uploadRejectLetter(item.id, 'LETTER_REJECT', \"Rad etish xati\").then((rs) => {\r\n            let routeData = this.$router.resolve({\r\n              name: \"Office-DOCUMENT-commission\",\r\n              query: {id: rs.data.id, page: \"GET\"},\r\n            });\r\n            this.getList();\r\n            this.getIncomeTotalCount();\r\n            window.open(routeData.href, \"_blank\");\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"col-md-12 text-center\">\r\n      <div class=\"h4 mb-4 d-inline-block\">{{ $t('submodules.reports.report_income') }}</div>\r\n    </div>\r\n    <b-modal v-model=\"isRejectedSeeModal\" :title=\"$t('submodules.reports.reasonRejected')\" scrollable size=\"md\">\r\n      <b-form-textarea v-model=\"reasonRejectedSee\" rows=\"5\"></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"danger\" @click=\"rejectSeeConfirm\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"rejectedSeeLoader\" rounded=\"sm\">\r\n            {{ $t(\"submodules.reports.rejected\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal v-model=\"signatureSeeModal\" :title=\"$t('submodules.reports.make_sign')\" hide-footer scrollable size=\"lg\">\r\n      <SignKeys :dataToSign=\"selectedTrItem\" @sign=\"signSuccessSee\"/>\r\n    </b-modal>\r\n    <Modal\r\n        ref=\"editModalRef\"\r\n        :cancelText=\"'actions.cancel'\"\r\n        :okText=\"'actions.save'\"\r\n        :scroll=\"true\"\r\n        :signerHide=\"false\"\r\n        :size=\"'xl'\"\r\n        :title=\"selectedTrItem.fileName\"\r\n        :value=\"editModal\"\r\n        :variantOk=\"'success'\"\r\n        @closeModal=\"editModal = false\"\r\n        @okModal=\"okModal\"\r\n        @viewModalClick=\"viewModalClick\"\r\n    >\r\n      <template v-slot:body>\r\n        <div>\r\n          <Editor ref=\"editorRef\" @changeText=\"changeText\"/>\r\n        </div>\r\n      </template>\r\n    </Modal>\r\n    <b-modal v-model=\"viewIlovaModal\" :title=\"$t('actions.view')\" scrollable size=\"xl\">\r\n      <div v-if=\"ilovaUploadPath\" style=\"height: 700px\">\r\n        <embed\r\n            :src=\"`${baseUrl}/${ilovaUploadPath}`\"\r\n            height=\"800\"\r\n            type=\"application/pdf\"\r\n            width=\"100%\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewIlovaModal = false\">{{ $t(\"actions.close\") }}</b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal\r\n        v-model=\"signatureModal\"\r\n        :title=\"`${$t('submodules.reports.make_sign')}`\"\r\n        hide-footer\r\n        scrollable\r\n        size=\"lg\"\r\n    >\r\n      <SignKeys :dataToSign=\"selectedTrItem\" @sign=\"signSuccess\"/>\r\n    </b-modal>\r\n\r\n    <!-- for view document -->\r\n    <b-modal\r\n        v-model=\"viewModal\"\r\n        :title=\"selectedTrItem.id ? selectedTrItem.fileName : ''\"\r\n        scrollable\r\n        size=\"xl\"\r\n    >\r\n      <div v-if=\"selectedTrItem.url\" style=\"height: 700px\">\r\n        <embed\r\n            :src=\"`${baseUrl}/${selectedTrItem.url}`\"\r\n            height=\"800\"\r\n            type=\"application/pdf\"\r\n            width=\"100%\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewModal = false\">{{ $t(\"actions.close\") }}</b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <!-- modal view before modal -->\r\n    <b-modal\r\n        v-model=\"viewModalBeforeSigned\"\r\n        :title=\"selectedTrItem.id ? selectedTrItem.fileName : ''\"\r\n        body-bg-variant=\"light\"\r\n        scrollable\r\n        size=\"xl\"\r\n    >\r\n      <b-overlay :opacity=\"1\" :show=\"loaderPdf\" rounded=\"lg\" variant=\"white\">\r\n        <div style=\"min-height: 700px\">\r\n          <embed\r\n              v-if=\"base64\"\r\n              :src=\"`data:application/pdf;base64, ${base64}`\"\r\n              :style=\"`min-height:${heightWindow-250}px`\"\r\n              style=\"width: 100%;\"\r\n          />\r\n        </div>\r\n      </b-overlay>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewModalBeforeSigned = false\">{{ $t(\"actions.close\") }}</b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <!-- COMMISSIONS MODAL -->\r\n    <b-modal\r\n        v-model=\"commissionsModal\"\r\n        :title=\"`${$t('submodules.commission.title')}`\"\r\n        scrollable\r\n        size=\"md\"\r\n    >\r\n      <BaseMultiselectWithValidation\r\n          v-model=\"commissionTypeId\"\r\n          :custom-label=\"customLabelCommissionTypes\"\r\n          :label=\"$t('submodules.commission.special_commission_type.title')\"\r\n          :max-height=\"600\"\r\n          :options=\"commissionTypes.map(e => e.id)\"\r\n          :show-labels=\"false\"\r\n          class=\"required\"\r\n          label-on-top\r\n          open-direction=\"bottom\"\r\n          placeholder=\"\"\r\n          rules=\"required\"\r\n      ></BaseMultiselectWithValidation>\r\n\r\n      <BaseDatePickerWithValidation\r\n          v-model=\"commissionCompletionDate\"\r\n          :label=\"$t('date')\"\r\n          :placeholder=\"$t('date')\"\r\n          lang=\"ru\"\r\n          required\r\n      />\r\n      <b-form-textarea\r\n          v-model=\"commissionComment\"\r\n          :placeholder=\"$t('submodules.doc.summary')\"\r\n          class=\"mt-3\"\r\n          rows=\"5\"\r\n      ></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"success\" @click=\"openSignatureModalForCommission\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"commissionModalLoader\" rounded=\"sm\">\r\n            {{ $t(\"actions.continue\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n        v-model=\"isRejectedModal\"\r\n        :title=\"`${$t('submodules.reports.reasonRejected')}`\"\r\n        scrollable\r\n        size=\"md\"\r\n    >\r\n      <b-form-textarea v-model=\"reasonRejected\" rows=\"5\"></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"danger\" @click=\"rejectConfirm\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"rejectedLoader\" rounded=\"sm\">\r\n            {{ $t(\"submodules.reports.rejected\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n        v-model=\"isForReviewModal\"\r\n        :title=\"`${$t('column.comment')}`\"\r\n        scrollable\r\n        size=\"md\"\r\n    >\r\n      <b-form-textarea v-model=\"reasonForReview\" rows=\"5\"></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"warning\" @click=\"forReview\" :disabled=\"!reasonForReview\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"rejectedLoader\" rounded=\"sm\">\r\n            {{ $t(\"submodules.commission.returnsee\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n        v-model=\"sendLetterToChairman.modal\"\r\n        :title=\"`${$t('submodules.commission.send_for_sign')}`\"\r\n        scrollable\r\n        size=\"md\"\r\n    >\r\n      <b-form-textarea v-model=\"sendLetterToChairman.comment\" rows=\"5\"></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"success\" @click=\"handleSendLetterToChairman\">\r\n          <b-overlay\r\n              :opacity=\"0.1\"\r\n              :show=\"sendLetterToChairman.loader\"\r\n              rounded=\"sm\"\r\n          >\r\n            {{ $t(\"submodules.commission.send_for_sign\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body p-2\">\r\n            <div class=\"row\">\r\n              <div class=\"col-sm-4\">\r\n                <div class=\"d-inline-block mt-1 ml-2\">\r\n                  <div class=\"search-box\">\r\n                    <div class=\"position-relative\">\r\n                      <input\r\n                          v-model=\"searchValue\"\r\n                          :placeholder=\"$t('actions.search')\"\r\n                          class=\"form-control rounded bg-light border-light\"\r\n                          style=\"width: 300px\"\r\n                          type=\"text\"\r\n                      />\r\n                      <i class=\"mdi mdi-magnify search-icon\"></i>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-8\">\r\n                <div class=\"text-sm-right\">\r\n                  <div class=\"mr-3 float-right\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                      <div\r\n                          v-for=\"(dc, index) in sendTypeList\"\r\n                          :key=\"index + 'doc'\"\r\n                          :class=\"dc.value === active ? 'my-card-active' : ''\"\r\n                          class=\"card m-0 my-card-hovered_2 mr-3\"\r\n                          @click.prevent=\"selectSendType(dc.value)\"\r\n                      >\r\n                        <div class=\" card-body p-0 text-center d-flex align-items-center justify-content-center \">\r\n                          <div>\r\n                            <div class=\"d-flex align-items-center\">\r\n                              <img\r\n                                  :src=\"\r\n                                    dc.value === 'SIGNATURE'\r\n                                      ? require('@/assets/doc/2.png')\r\n                                      : dc.value === 'REVIEW'\r\n                                      ? require('@/assets/doc/3.png')\r\n                                      : require('@/assets/doc/4.png')\r\n                                  \"\r\n                                  alt=\"DOC\"\r\n                                  height=\"30\"\r\n                              />\r\n\r\n                              <div class=\"ml-2\">\r\n                                <p class=\"m-0\">\r\n                                  {{ dc.label }}\r\n                                </p>\r\n                              </div>\r\n                              <div class=\"ml-2\">\r\n                                <b-badge v-if=\" dc.value === 'AGREEMENT' && agreementCount > 0 \" variant=\"success\">\r\n                                  {{ agreementCount }}\r\n                                </b-badge>\r\n\r\n                                <b-badge v-if=\" dc.value === 'SIGNATURE' && signatureCount > 0 \" variant=\"success\">\r\n                                  {{ signatureCount }}\r\n                                </b-badge>\r\n\r\n                                <b-badge v-if=\" dc.value === 'REVIEW' && reviewCount > 0 \" variant=\"success\">\r\n                                  {{ reviewCount }}\r\n                                </b-badge>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-7\">\r\n            <div class=\"card card-body\">\r\n              <div class=\"table-responsive\">\r\n                <b-overlay :opacity=\"0.1\" :show=\"loading\" rounded=\"sm\">\r\n                  <table class=\"table table-centered table-striped table-nowrap table-hover\">\r\n                    <thead class=\"thead-light\">\r\n                    <tr>\r\n                      <th class=\"text-center\" scope=\"col\" style=\"width: 70px\">№</th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"column.created_by\") }}\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"submodules.doc.founder\") }}\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"docDate\") }}\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"docName\") }}\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"puropseOfSending\") }}\r\n                      </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr v-if=\"list.length == 0\" class=\"text-center\">\r\n                      <td :style=\"loading ? 'height:50px' : ''\" colspan=\"9\" style=\"vertical-align: middle\">\r\n                        <h5>\r\n                          {{ $t(\"messages.data_not_found\") }}\r\n                        </h5>\r\n                      </td>\r\n                    </tr>\r\n                    <tr\r\n                        v-for=\"(item, index) in list\"\r\n                        :key=\"index + 'CREATE_DOC'\"\r\n                        :class=\"\r\n                            selectedTrItem.id == item.id\r\n                              ? 'bg-soft-primary text-primary'\r\n                              : item.status === 'CANCELED' || item.cancelled\r\n                              ? 'bg-soft-danger text-danger'\r\n                              : item.isViewed ? 'bg-soft-success text-dark' : 'bg-white text-dark font-weight-bold'\r\n                          \"\r\n                        class=\"p_cursor\"\r\n                        @click.prevent=\"clickTrItem(item)\"\r\n                    >\r\n                      <td class=\"text-center\">\r\n                        <strong>\r\n                          {{ paginate(index, limit, page - 1) }}</strong>\r\n                      </td>\r\n                      <td class=\"text-left\">\r\n                        {{ item.ownerLastName ? item.ownerLastName : '' }}\r\n                        {{ item.ownerFirstName ? item.ownerFirstName : '' }}\r\n                        {{ item.ownerParentName ? item.ownerParentName : '' }}\r\n                      </td>\r\n                      <td class=\"text-left\">\r\n                        {{ item.senderLastName ? item.senderLastName : '' }}\r\n                        {{ item.senderFirstName ? item.senderFirstName : '' }}\r\n                        {{ item.senderParentName ? item.senderParentName : '' }}\r\n                      </td>\r\n                      <td :class=\"!item.isRead ? 'font-weight-bold' : ''\" class=\"text-center\">\r\n                        {{ item.date }}\r\n                      </td>\r\n                      <td :class=\"!item.isRead ? 'font-weight-bold' : ''\" class=\"text-center\">\r\n                        <p class=\"pre m-0\">{{ item.fileName }}</p>\r\n                      </td>\r\n                      <td\r\n                          :class=\"!item.isRead ? 'font-weight-bold' : ''\"\r\n                          class=\"text-center p-0\"\r\n                      >\r\n                        {{\r\n                          item.action === \"SIGNATURE\"\r\n                              ? $t(\"forSignature\")\r\n                              : item.action === \"AGREEMENT\"\r\n                                  ? $t(\"forAgreement\")\r\n                                  : item.action === \"REVIEW\"\r\n                                      ? $t(\"forReview\")\r\n                                      : \"\"\r\n                        }}\r\n                        <i\r\n                            v-if=\"item.action === 'SIGNATURE' && item.signed\"\r\n                            class=\"mdi mdi-check-all font-size-22 p-0 ml-2 text-success\"\r\n                        ></i>\r\n\r\n                        <i\r\n                            v-if=\"item.action === 'AGREEMENT' && item.isAgreed\"\r\n                            class=\"mdi mdi-handshake font-size-22 ml-2 text-success\"\r\n                        ></i>\r\n\r\n                        <i\r\n                            v-if=\"item.action === 'REVIEW' && item.isViewed\"\r\n                            class=\"mdi mdi-file-eye font-size-18 font-size-16 ml-2 text-success\"\r\n                        ></i>\r\n                      </td>\r\n                    </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </b-overlay>\r\n              </div>\r\n              <div v-if=\"total > 0\" class=\"row\">\r\n                <div class=\"col-lg-12\">\r\n                  <b-pagination v-model=\"page\" :per-page=\"limit\" :total-rows=\"total\" class=\"m-0\" size=\"sm\"/>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-5\">\r\n            <div class=\"card card-body\">\r\n              <table class=\"table m-0\">\r\n                <tbody>\r\n                <tr v-if=\"selectedTrItem.id\">\r\n                  <td class=\"text-muted text-center p-0\" colspan=\"2\">\r\n                    <div class=\"p-4\">\r\n                      <div v-if=\"['SIGNED', 'CANCELED'].indexOf(selectedTrItem.status) === -1\">\r\n                        <b-button-group v-if=\"\r\n                                (selectedTrItem.action === 'SIGNATURE' &&\r\n                                  !selectedTrItem.signed) ||\r\n                                (selectedTrItem.action === 'AGREEMENT' &&\r\n                                  !selectedTrItem.isAgreed) ||\r\n                                (selectedTrItem.action === 'REVIEW' &&\r\n                                  !selectedTrItem.isViewed && !selectedTrItem.cancelled)\r\n                              \">\r\n                          <!-- DXA uchun project yaratish  -->\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status === 'SEND_FOR_COMMISSION'\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ $t('actions.for_start_commission') }}\r\n                          </b-button>\r\n                          <!-- Boshqalar uchun tasdiqlash, korish, imzolash  -->\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject !== 'FROM_DXA' && selectedTrItem.applicationTypeInProject !== 'NOT_BELONG'\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ signItemButtonLabel }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject === 'NOT_BELONG'\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ $t(\"submodules.reports.make_sign\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n                                 && selectedTrItem.status ==='SEND_FOR_COMMISSION'\r\n                                 && selectedTrItem.action === 'SIGNATURE'\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ $t(\"submodules.reports.make_sign\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"(selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status !=='SEND_FOR_COMMISSION' && selectedTrItem.action !== 'SIGNATURE')\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{\r\n                              selectedTrItem.action === \"REVIEW\"\r\n                                  ? $t(\"confirm\")\r\n                                  : selectedTrItem.action === \"AGREEMENT\"\r\n                                      ? $t(\"submodules.reports.make_agreement\")\r\n                                      : \"\"\r\n                            }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"(selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status ==='SEND_SIGN'\r\n                              && selectedTrItem.action ==='SIGNATURE')\"\r\n                              variant=\"success\"\r\n                              @click=\"signAcceptedItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ $t(\"submodules.reports.doc_make_sign\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"(selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status ==='SEND_SIGN'\r\n                              && selectedTrItem.action ==='SIGNATURE') \"\r\n                              variant=\"danger\"\r\n                              @click=\"signRejectedItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"submodules.reports.doc_reject_make_sign\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n                                 && selectedTrItem.applicationTypeInProject !=='NOT_BELONG'\r\n                                 && ['TO_SIGN_REJECT_LETTER', 'SENT_FOR_REJECT', 'REJECTED', 'TO_INVOKE_SIGNED', 'TO_SIGN_FINISH_LETTER',\r\n                                 'FINISH_LETTER_SIGN_AND_SEND', 'SEND_SIGN_TO_RETURN', 'SEND_SIGN'].indexOf(selectedTrItem.status) === -1\r\n                                 && !selectedTrItem.isForCommission && !selectedTrItem.isHeadOfDepartment\"\r\n                              variant=\"danger\"\r\n                              @click=\"showRejectedModal\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"submodules.reports.rejected\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"computedMakeSignedCompromiseDecisionToReject\"\r\n                              variant=\"danger\"\r\n                              @click=\"showRejectedModal\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"submodules.commission.doc_status.reject_begin_commission\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n                                 && selectedTrItem.applicationTypeInProject !=='NOT_BELONG'\r\n                                 && ['SEND_SIGN'].indexOf(selectedTrItem.status) !== -1 && !selectedTrItem.isHeadOfDepartment\"\r\n                              variant=\"warning\"\r\n                              @click=\"showRejectedModal\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"submodules.commission.returnsee\") }}\r\n                          </b-button>\r\n                          <!--Rasmiylatirishda hato kamchiliklar tufayli qaytarildi-->\r\n                          <b-button\r\n                              v-if=\"(selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status === 'SEND_SIGN')\"\r\n                              v-b-tooltip.hover.top\r\n                              :title=\"$t('submodules.commission.returnByRais')\"\r\n                              class=\"ml-1\"\r\n                              variant=\"warning\"\r\n                              @click=\"showRejectedByRaisModal(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"column.return\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"['TO_SIGN_REJECT_LETTER'].indexOf(selectedTrItem.status) === -1 && selectedTrItem.action === 'SIGNATURE' && selectedTrItem.fileType === 'docx'\"\r\n                              :to=\"{\r\n                                name: 'Office-DOCUMENT-commission',\r\n                                query: { id: selectedTrItem.letterId, page: 'GET' },\r\n                              }\"\r\n                              target=\"_blank\"\r\n                              variant=\"light\"\r\n                          >\r\n                            <i class=\"fa fa-pencil-alt\"></i><br>\r\n                            {{ $t(\"actions.edit\") }}\r\n                          </b-button>\r\n                        </b-button-group>\r\n                        <!-- Loyihani korish va attachmentni  korish -->\r\n                        <b-button-group>\r\n                          <!-- loyihani korish-->\r\n                          <b-button\r\n                              v-if=\"['TO_SIGN_REJECT_LETTER', 'REJECTED', 'TO_INVOKE_SIGNED', 'FINISH_LETTER_SIGN_AND_SEND'].indexOf(selectedTrItem.status) === -1\"\r\n                              variant=\"info\"\r\n                              @click=\"viewProject(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-eye\"></i><br>\r\n                            {{ $t(\"actions.view_project\") }}\r\n                          </b-button>\r\n                          <!-- Xujjatni ko'rish -->\r\n                          <b-button variant=\"primary\" @click=\"viewIlova(selectedTrItem)\"\r\n                                    v-if=\"getExt(selectedTrItem.uploadPath ? selectedTrItem.uploadPath : selectedTrItem.url) === 'pdf'\">\r\n                            <i class=\"fa fa-eye\"></i><br>\r\n                            {{ $t(\"actions.view_document\") }}\r\n                          </b-button>\r\n                          <!-- Xujjatni docx bolsa only ofisga otish ko'rish [pastroqda bir bi xil tugma bor] -->\r\n                          <b-button\r\n                              variant=\"outline-info\"\r\n                              @click=\"openOnlyOffice(selectedTrItem.letterId)\"\r\n                              v-if=\"selectedTrItem.applicationTypeInProject === 'FROM_DXA' && getExt(selectedTrItem.uploadPath ? selectedTrItem.uploadPath : selectedTrItem.url) === 'docx'\">\r\n                            <i class=\"fa fa-pen\"></i><br>\r\n                            {{ $t(\"actions.edit\") }}\r\n                          </b-button>\r\n                        </b-button-group>\r\n                      </div>\r\n                      <b-button-group v-else>\r\n                        <b-button variant=\"info\" @click=\"viewProject(selectedTrItem)\">\r\n                          <i class=\"fa fa-eye\"></i><br>\r\n                          {{ $t(\"actions.view_project\") }}\r\n                        </b-button>\r\n                        <!-- Xujjatni ko'rish -->\r\n                        <b-button\r\n                            variant=\"primary\"\r\n                            @click=\"viewIlova(selectedTrItem)\"\r\n                            v-if=\"getExt(selectedTrItem.uploadPath ? selectedTrItem.uploadPath : selectedTrItem.url) === 'pdf'\"\r\n                        >\r\n                          <i class=\"fa fa-eye\"></i><br>\r\n                          {{ $t(\"actions.view_document\") }}\r\n                        </b-button>\r\n                        <!-- Xujjatni docx bolsa only ofisga otish ko'rish [teparoqda bior xil tugma bor] -->\r\n                        <b-button\r\n                            variant=\"outline-info\"\r\n                            @click=\"openOnlyOffice(selectedTrItem.letterId)\"\r\n                            v-if=\"getExt(selectedTrItem.uploadPath ? selectedTrItem.uploadPath : selectedTrItem.url) === 'docx' && selectedTrItem.status !== 'CANCELED'\"\r\n                        >\r\n                          <i class=\"fa fa-pen\"></i><br>\r\n                          {{ $t(\"actions.edit\") }}\r\n                        </b-button>\r\n                      </b-button-group>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>\r\n                      {{ $t(\"docName\") }}\r\n                    </b>\r\n                  </td>\r\n                  <td>\r\n                    {{ selectedTrItem.id && selectedTrItem.fileName ? selectedTrItem.fileName : \"\" }}\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>\r\n                      {{ $t(\"docCreatedDate\") }}\r\n                    </b>\r\n                  </td>\r\n                  <td>\r\n                    {{ selectedTrItem.created }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>\r\n                      {{ $t(\"submodules.dxa.dxa_application_number\") }}\r\n                    </b>\r\n                  </td>\r\n                  <td>\r\n                    {{ visaInfoById.applicationRegNumber }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>\r\n                      {{ $t(\"submodules.commission.income_date\") }}\r\n                    </b>\r\n                  </td>\r\n                  <td>\r\n                    {{ visaInfoById.dateCameFromDxa }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b> {{ $t(\"submodules.dxa.application_type\") }}</b> <br>\r\n                  </td>\r\n                  <td>\r\n                    <span v-if=\"visaInfoById.applicationType === 'FOR_SALE'\" class=\"text-left\" style=\"font-size: 12px\">\r\n                      {{ $t(\"submodules.dxa.dxa_application_1\") }}\r\n                    </span>\r\n                    <span\r\n                        v-else-if=\"visaInfoById.applicationType === 'FOR_ADD'\"\r\n                        class=\"text-left\"\r\n                        style=\"font-size: 12px\"\r\n                    > {{ $t(\"submodules.dxa.dxa_application_2\") }}\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n                <tr v-if=\"selectedTrItem.isForCommission\">\r\n                  <td colspan=\"2\">\r\n                    <div class=\"p-2 bg-gradient bg-info rounded text-white\">\r\n                      {{ $t(\"submodules.commission.doc_status.send_for_commission\") }}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"whoSent\") }}</b>\r\n                  </td>\r\n                  <td class=\"pl-0\">\r\n                    <ul v-if=\"selectedTrItem.id\" id=\"il\" class=\"list-unstyled chat-list\">\r\n                      <li>\r\n                        <div class=\"media d-flex\" style=\"align-items: center\">\r\n                          <div class=\"align-self-center mr-3\"></div>\r\n                          <div v-if=\"selectedTrItem.senderUploadPath\" class=\"align-self-center mr-3\">\r\n                            <img\r\n                                :src=\"`${hrUrl}/${selectedTrItem.senderUploadPath}`\"\r\n                                alt\r\n                                class=\"rounded-circle avatar-sm\"\r\n                                height=\"auto\"\r\n                            />\r\n                          </div>\r\n                          <div v-if=\"!selectedTrItem.senderUploadPath\" class=\"avatar-sm align-self-center mr-3\">\r\n                            <span class=\" avatar-title rounded-circle bg-soft-primary text-white\">\r\n                              {{ selectedTrItem.senderFirstName.charAt(0) }}\r\n                            </span>\r\n                          </div>\r\n                          <div class=\"media-body overflow-hidden\">\r\n                            <h5 class=\"font-size-14 mb-1\">\r\n                              {{\r\n                                `${selectedTrItem.senderLastName} ${selectedTrItem.senderFirstName} ${selectedTrItem.senderParentName}`\r\n                              }}\r\n                            </h5>\r\n                            <p class=\"m-0\">\r\n                              {{\r\n                                getName({\r\n                                  nameLt: selectedTrItem.senderDepNameLt,\r\n                                  nameRu: selectedTrItem.senderDepNameRu,\r\n                                  nameUz: selectedTrItem.senderDepNameUz,\r\n                                })\r\n                              }}\r\n                            </p>\r\n                            <p class=\"m-0\">\r\n                              {{\r\n                                getName({\r\n                                  nameLt: selectedTrItem.senderPositionNameLt,\r\n                                  nameRu: selectedTrItem.senderPositionNameRu,\r\n                                  nameUz: selectedTrItem.senderPositionNameUz,\r\n                                })\r\n                              }}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"puropseOfSending\") }}</b>\r\n                  </td>\r\n                  <td>\r\n                    {{\r\n                      selectedTrItem.id\r\n                          ? selectedTrItem.action === \"SIGNATURE\"\r\n                              ? $t(\"forSignature\")\r\n                              : selectedTrItem.action === \"AGREEMENT\"\r\n                                  ? $t(\"forAgreement\")\r\n                                  : selectedTrItem.action === \"REVIEW\"\r\n                                      ? $t(\"forReview\")\r\n                                      : \"\"\r\n                          : \"\"\r\n                    }}\r\n                  </td>\r\n                </tr>\r\n                <tr v-if=\"selectedTrItem.comment !== null && selectedTrItem.comment !== ''\">\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"column.comment\") }}</b>\r\n                  </td>\r\n                  <td>\r\n                    {{ selectedTrItem.comment }}\r\n                  </td>\r\n                </tr>\r\n                <tr v-if=\"filesList.length > 0\">\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"letter_ilovalar\") }}</b>\r\n                  </td>\r\n                  <td></td>\r\n                </tr>\r\n                <tr v-for=\"(item, index) in filesList\" :key=\"index + 'FILE'\" class=\"mt-3\">\r\n                  <td class=\"p-2\" colspan=\"2\">\r\n                    <div class=\"d-flex align-items-center bg-light p-2 justify-content-between\">\r\n                      <div class=\"d-flex align-items-center\">\r\n                        <a\r\n                            :download=\"getExt(item.uploadPath) === 'pdf' ? false: item.uploadPath\"\r\n                            :href=\"getExt(item.uploadPath) === 'pdf' ? `#` : `${baseUrl}/${item.uploadPath}`\"\r\n                            @click=\"viewIlova(item)\"\r\n                        >\r\n                          <FileView :uploadPath=\"item.fileName\" class=\"my-card-hovered\"/>\r\n                        </a>\r\n                        <span class=\"ml-2\">\r\n                          {{ item.fileName }}\r\n                        </span>\r\n                      </div>\r\n                      <a\r\n                          :href=\"`${baseUrl}/${item.uploadPath}`\"\r\n                          class=\"mr-3 p-1 btn btn-sm btn-light\"\r\n                          download\r\n                      >\r\n                        <i class=\"bx bx-download font-size-20\"></i>\r\n                      </a>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n                <tr v-if=\"selectedTrItem.isRejectLetterCreated && rejectedLetter\">\r\n                  <td class=\"text-muted\">\r\n                    <a :download=\"getExt(rejectedLetter.url) === 'pdf' ? false : rejectedLetter.url\"\r\n                       :href=\"getExt(rejectedLetter.url) === 'pdf' ? `#` : `${baseUrl}/${rejectedLetter.url}`\"\r\n                       @click=\"viewFile(rejectedLetter.url)\"\r\n                    >\r\n                      <FileView :uploadPath=\"rejectedLetter.url\" class=\"d-inline-block my-card-hovered\"/>\r\n                      <b class=\"align-top d-inline-block p-2 py-3\">{{ rejectedLetter.fileName }}</b>\r\n                    </a>\r\n                  </td>\r\n                  <td>\r\n                    <b-btn variant=\"success m-2\" @click=\"sendLetterToChairman.modal = true\"\r\n                           v-if=\"rejectedLetter.status === 'CREATED'\">\r\n                      <i class=\"fa fa-file-signature\"></i>\r\n                      {{ $t('submodules.commission.send_for_sign') }}\r\n                    </b-btn>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"qabulQiluvchilar\") }}</b>\r\n                  </td>\r\n                  <td></td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n              <b-overlay\r\n                  :opacity=\"0.1\"\r\n                  :show=\"loaderReceiver\"\r\n                  rounded=\"sm\"\r\n              >\r\n                <Receivers\r\n                    :selectedAgreement=\"infoData.agreement\"\r\n                    :selectedReview=\"infoData.review\"\r\n                    :selectedSignature=\"infoData.signature\"\r\n                />\r\n              </b-overlay>\r\n              <!-- COMMISSION FILES -->\r\n              <div class=\"wrapper\" v-if=\"selectedTrItem && projectFilesList.length\">\r\n                <span CLASS=\"fromcenter\">{{ $t('commission_attached_files') }}</span>\r\n              </div>\r\n              <div\r\n                  v-if=\"selectedTrItem && projectFilesList.length\"\r\n                  class=\"card card-body card-tabs mt-1\"\r\n                  style=\"min-height: 10em; width: 100%\"\r\n              >\r\n                <tr v-for=\"(item, index) in projectFilesList\" :key=\"index + 'FILE'\" class=\"mt-1\">\r\n                  <div class=\"d-flex align-items-center bg-light p-2 justify-content-between\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                      <a :download=\"getExt(item.url) === 'PDF' || getExt(item.url) === 'pdf' ? false : item.url\"\r\n                         :href=\"getExt(item.url) === 'PDF' || getExt(item.url) === 'pdf' ? `#` : `${baseUrl}/${item.url}`\"\r\n                         @click=\"viewIlovaProject(item.url)\"\r\n                      >\r\n                        <BaseFileViewer :uploadPath=\"item.url\" class=\"my-card-hovered\"/>\r\n                      </a>\r\n                      <span class=\"ml-2\">\r\n                        {{ item.fileName }}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </tr>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <b-modal\r\n        v-model=\"viewFileModal\"\r\n        :title=\"$t('actions.view')\"\r\n        scrollable\r\n        size=\"xl\"\r\n    >\r\n      <div\r\n          v-if=\"fileUploadPath\"\r\n          style=\"height: 700px\"\r\n      >\r\n        <embed\r\n            :src=\"`${baseUrl}/${fileUploadPath}`\"\r\n            height=\"800\"\r\n            type=\"application/pdf\"\r\n            width=\"100%\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button\r\n            variant=\"secondary\"\r\n            @click=\"viewFileModal = false\"\r\n        >{{\r\n            $t(\"actions.close\")\r\n          }}\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n  </div>\r\n  <!-- </Layout> -->\r\n</template>\r\n\r\n<style>\r\n.bg-class {\r\n  background-color: #fbfbfb !important;\r\n}\r\n</style>"]}]}