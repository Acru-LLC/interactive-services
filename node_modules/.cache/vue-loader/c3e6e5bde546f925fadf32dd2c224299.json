{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\organizitional\\components\\gatherModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\organizitional\\components\\gatherModal.vue","mtime":1674799497821},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge3ZhbGlkYXRpb25NaXhpbn0gZnJvbSAidnVlbGlkYXRlIjsNCmltcG9ydCB7cmVxdWlyZWR9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7DQppbXBvcnQgU2VydmljZSBmcm9tICIuLi8uLi9yZXBvcnRTZXJ2aWNlIjsNCg0KaW1wb3J0IFZpZXdSZXBvcnRNb2RhbCBmcm9tICIuL3ZpZXdSZXBvcnRNb2RhbC52dWUiOw0KaW1wb3J0IHtnX2xhYmVsfSBmcm9tICJAL2hlbHBlciI7DQppbXBvcnQgR2F0aGVyVmlld1JlcG9ydCBmcm9tICIuL2dhdGhlclZpZXdSZXBvcnQudnVlIjsNCg0KaW1wb3J0IFRhYmxlIGZyb20gIi4vdGFibGVfZ2F0aGVyX3JlcG9ydC52dWUiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBHYXRoZXJWaWV3UmVwb3J0LA0KICAgIFRhYmxlLA0KICAgIFZpZXdSZXBvcnRNb2RhbCwNCiAgfSwNCiAgdmFsaWRhdGlvbnM6IHsNCiAgICBmb3JtOiB7DQogICAgICB0YWJsZUlkOiB7DQogICAgICAgIHJlcXVpcmVkLA0KICAgICAgfSwNCiAgICAgIGNoaWxkRGF0ZVR5cGVJZDogew0KICAgICAgICByZXF1aXJlZCwNCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCiAgbWl4aW5zOiBbdmFsaWRhdGlvbk1peGluXSwNCiAgbWV0aG9kczogew0KICAgIHZpZXdSZXBvcnQoaXRlbSkgew0KICAgICAgdGhpcy5zZWxlY3RlZFRySXRlbSA9IGl0ZW07DQogICAgICB0aGlzLnZpZXdSZXBvcnRNb2RhbCA9IHRydWU7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmcy52aWV3UmVwb3J0TW9kYWxSZWZfMi5nZXRCeUlkKA0KICAgICAgICAgICAgaXRlbS5kb2NUYWJsZUlkLA0KICAgICAgICAgICAgaXRlbS5yZXBvcnRJZCwNCiAgICAgICAgICAgIGl0ZW0uc3RhdHVzDQogICAgICAgICk7DQogICAgICB9LCA0MDApOw0KICAgIH0sDQoNCiAgICBzaG93UmVzdWx0KCkgew0KDQogICAgICBsZXQgb2JqID0gdGhpcy52YWx1ZUxpc3QuZmlsdGVyKGUgPT4gZS5pZCA9PSB0aGlzLmZvcm0udGFibGVJZC5pZCkNCg0KICAgICAgaWYgKCF0aGlzLmNoZWNrVmFsaWRpdHkoKSkgew0KICAgICAgICB0aGlzLmxvYWRlckJ1dHRvbiA9IHRydWU7DQoNCiAgICAgICAgaWYgKG9ialswXS5oYXNEeW5hbWljUm93c0ZvclRhYmxlKSB7DQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnZpZXdHYXRoZXJSZXBvcnRSZWYNCiAgICAgICAgICAgICAgICAuZ2V0QnlXaXRoUmVwb3J0SWQodGhpcy5mb3JtLnRhYmxlSWQuaWQsIHRoaXMuZm9ybSkNCiAgICAgICAgICAgICAgICAudGhlbigoe3JlcG9ydCwgZGF0YX0pID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0TGlzdCA9IHJlcG9ydDsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0RGF0YSA9IGRhdGE7DQogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlckJ1dHRvbiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlckJ1dHRvbiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICB9LCA0MDApOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy4kcmVmcy52aWV3R2F0aGVyUmVwb3J0UmVmDQogICAgICAgICAgICAgICAgLmdldEJ5SWQodGhpcy5mb3JtLnRhYmxlSWQuaWQsIHRoaXMuZm9ybSkNCiAgICAgICAgICAgICAgICAudGhlbigoe3JlcG9ydCwgZGF0YX0pID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0TGlzdCA9IHJlcG9ydDsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3J0RGF0YSA9IGRhdGE7DQogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlckJ1dHRvbiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlckJ1dHRvbiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICB9LCA0MDApOw0KICAgICAgICB9DQogICAgfQ0KICB9LA0KICBnZXRMaXN0RGF0ZVR5cGVzQ2hpbGQoKSB7DQogICAgaWYgKHRoaXMuZm9ybS50YWJsZUlkKSB7DQogICAgICBTZXJ2aWNlLmdldExpc3REYXRlVHlwZXNDaGlsZCgNCiAgICAgICAgICB0aGlzLnBhcmFtczIsDQogICAgICAgICAgdGhpcy5mb3JtLnRhYmxlSWQuZGF0ZVR5cGVJZA0KICAgICAgKS50aGVuKChycykgPT4gew0KICAgICAgICB0aGlzLmxpc3QgPSBycy5kYXRhLmxpc3Q7DQogICAgICB9KTsNCiAgICB9DQogIH0sDQogIHNlYXJjaEl0ZW0ocSkgew0KICAgIHRoaXMuc2VhcmNoID0gcTsNCiAgICB0aGlzLmdldExpc3RUYWJsZSgpOw0KICB9LA0KICBnZXRWYWx1ZSh2KSB7DQogICAgdGhpcy5mb3JtLnRhYmxlSWQgPSB2Ow0KICAgIHRoaXMuZ2V0TGlzdERhdGVUeXBlc0NoaWxkKCk7DQogIH0sDQoNCiAgc2VhcmNoSXRlbTIocSkgew0KICAgIHRoaXMuc2VhcmNoMiA9IHE7DQogICAgdGhpcy5nZXRMaXN0RGF0ZVR5cGVzQ2hpbGQoKTsNCiAgfSwNCiAgZ2V0VmFsdWUyKHYpIHsNCiAgICB0aGlzLmZvcm0uY2hpbGREYXRlVHlwZUlkID0gdjsNCiAgfSwNCiAgY2hlY2tWYWxpZGl0eSgpIHsNCiAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7DQogICAgdGhpcy4kdi5mb3JtLiR0b3VjaCgpOw0KICAgIHJldHVybiB0aGlzLiR2LmZvcm0uJGFueUVycm9yOw0KICB9LA0KICBzZXRGb3JtRGF0YShpdGVtKSB7DQogICAgdGhpcy5mb3JtID0gey4uLnRoaXMuZm9ybSwgLi4uaXRlbX07DQogIH0sDQogIGdldExpc3RUYWJsZSgpIHsNCiAgICBTZXJ2aWNlLmdldE93blRhYmxlRm9yR2F0aGVyKHRoaXMucGFyYW1zKQ0KICAgICAgICAudGhlbigocnMpID0+IHsNCiAgICAgICAgICBpZiAocnMuZGF0YSkgew0KICAgICAgICAgICAgdGhpcy52YWx1ZUxpc3QgPSBycy5kYXRhLmxpc3Q7DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGUpID0+IHt9KTsNCiAgfSwNCn0NCiwNCmNyZWF0ZWQoKQ0Kew0KICB0aGlzLmdldExpc3RUYWJsZSgpOw0KfQ0KLA0KY29tcHV0ZWQ6IHsNCiAgcGFyYW1zKCkNCiAgew0KICAgIHJldHVybiB7DQogICAgICBwYXJhbXM6IHsNCiAgICAgICAgbGltaXQ6IDIwLA0KICAgICAgICBwYWdlOiAwLA0KICAgICAgfSwNCiAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2gsDQogICAgfTsNCiAgfQ0KLA0KICBwYXJhbXMyKCkNCiAgew0KICAgIHJldHVybiB7DQogICAgICBwYXJhbXM6IHsNCiAgICAgICAgbGltaXQ6IDIwLA0KICAgICAgICBwYWdlOiAwLA0KICAgICAgfSwNCiAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2gyLA0KICAgIH07DQogIH0NCiwNCn0NCiwNCmRhdGEoKQ0Kew0KICByZXR1cm4gew0KICAgIHJlcG9ydERhdGE6IFtdLA0KICAgIHZpZXdSZXBvcnRNb2RhbDogZmFsc2UsDQogICAgc2VsZWN0ZWRUckl0ZW06IHt9LA0KICAgIHJlcG9ydExpc3Q6IFtdLA0KICAgIGxvYWRlckJ1dHRvbjogZmFsc2UsDQogICAgc2VhcmNoMjogIiIsDQogICAgbGlzdDogW10sDQogICAgZ19sYWJlbDogZ19sYWJlbCwNCiAgICBzdWJtaXR0ZWQ6IGZhbHNlLA0KICAgIHZhbHVlTGlzdDogW10sDQogICAgc2VhcmNoOiAiIiwNCiAgICByZXBvcnRJbmZvOiB7fSwNCiAgICBmb3JtOiB7DQogICAgICBkYXRlOiAiIiwNCiAgICAgIHRhYmxlSWQ6IG51bGwsDQogICAgICBjaGlsZERhdGVUeXBlSWQ6IG51bGwsDQogICAgfSwNCiAgfTsNCn0NCiwNCn0NCjsNCg=="},{"version":3,"sources":["gatherModal.vue"],"names":[],"mappings":";AAoHA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"gatherModal.vue","sourceRoot":"src/modules/report/organizitional/components","sourcesContent":["<template>\r\n  <div style=\"width: 100%\">\r\n    <b-card no-body class=\"pt-3 pb-3 pl-4 pr-4\">\r\n      <b-row>\r\n        <b-col cols=\"3\">\r\n          <label class=\"m-0\">{{ $t(\"reportTemplates\") }}</label>\r\n          <MultiselectCustomized\r\n              :submitted=\"submitted\"\r\n              ref=\"refSelect\"\r\n              :label=\"g_label('nameLt', 'nameRu', 'nameUz')\"\r\n              :options=\"valueList\"\r\n              @searchItem=\"searchItem\"\r\n              @value=\"getValue\"\r\n          />\r\n        </b-col>\r\n        <b-col cols=\"3\">\r\n          <label class=\"m-0\">{{ $t(\"dateTypes\") }}</label>\r\n          <MultiselectCustomized\r\n              :submitted=\"submitted\"\r\n              ref=\"refSelect\"\r\n              :label=\"g_label('nameLt', 'nameRu', 'nameUz')\"\r\n              :options=\"list\"\r\n              @searchItem=\"searchItem2\"\r\n              @value=\"getValue2\"\r\n              v-model=\"reportInfo\"\r\n          />\r\n        </b-col>\r\n\r\n        <b-col cols=\"3\">\r\n          <b-button\r\n              @click=\"showResult\"\r\n              variant=\"primary\"\r\n              style=\"margin-top: 19px\"\r\n          >\r\n            <b-overlay :show=\"loaderButton\" rounded=\"sm\" opacity=\"0.1\">\r\n              <i class=\"fa fa-eye mr-1\"></i>\r\n              {{ $t(\"actions.view\") }}\r\n            </b-overlay>\r\n          </b-button>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row class=\"mt-5\">\r\n        <b-col cols=\"12\">\r\n          <GatherViewReport ref=\"viewGatherReportRef\"/>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row v-if=\"reportList.length > 0\">\r\n        <b-col cols=\"12\">\r\n          <div class=\"d-flex align-items-center mb-3\">\r\n            <!-- <img\r\n              class=\"avatar-xs\"\r\n              :src=\"require('@/assets/report.png')\"\r\n              alt=\"\"\r\n            /> -->\r\n            <h5 class=\"m-0 ml-2\">\r\n              {{ $t(\"gatherReports\") }}\r\n            </h5>\r\n          </div>\r\n          <Table\r\n              @clickTr=\"viewReport\"\r\n              :page=\"1\"\r\n              :limit=\"1000\"\r\n              ref=\"income_table\"\r\n              :list=\"reportList\"\r\n              :loading=\"loaderButton\"\r\n          >\r\n            <template v-slot:thead>\r\n              <tr class=\"tr-text-center\">\r\n                <th class=\"text-center\" style=\"width: 10px !important\">\r\n                  <span class=\"d-block\">â„–</span>\r\n                </th>\r\n                <th style=\"width: 25%\">{{ $t(\"column.department\") }}</th>\r\n                <th style=\"width: 25%\">{{ $t(\"madeByReport\") }}</th>\r\n                <th>{{ $t(\"date\") }}</th>\r\n\r\n                <th class=\"text-center\">\r\n                  {{ $t(\"column.status\") }}\r\n                </th>\r\n\r\n                <th style=\"width: 14% !important\" class=\"text-center\">\r\n                  {{ $t(\"column.actions\") }}\r\n                </th>\r\n              </tr>\r\n            </template>\r\n          </Table>\r\n        </b-col>\r\n      </b-row>\r\n    </b-card>\r\n\r\n    <!-- view modal -->\r\n    <b-modal\r\n        id=\"widthM\"\r\n        v-model=\"viewReportModal\"\r\n        scrollable\r\n        size=\"xl\"\r\n        :title=\"`${getName({\r\n        nameLt: selectedTrItem.docTableNameLt,\r\n        nameRu: selectedTrItem.docTableNameRu,\r\n        nameUz: selectedTrItem.docTableNameUz,\r\n      })}`\"\r\n    >\r\n      <ViewReportModal ref=\"viewReportModalRef_2\"/>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewReportModal = false\">\r\n          {{ $t(\"actions.close\") }}\r\n        </b-button\r\n        >\r\n      </template>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {validationMixin} from \"vuelidate\";\r\nimport {required} from \"vuelidate/lib/validators\";\r\nimport Service from \"../../reportService\";\r\n\r\nimport ViewReportModal from \"./viewReportModal.vue\";\r\nimport {g_label} from \"@/helper\";\r\nimport GatherViewReport from \"./gatherViewReport.vue\";\r\n\r\nimport Table from \"./table_gather_report.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    GatherViewReport,\r\n    Table,\r\n    ViewReportModal,\r\n  },\r\n  validations: {\r\n    form: {\r\n      tableId: {\r\n        required,\r\n      },\r\n      childDateTypeId: {\r\n        required,\r\n      },\r\n    },\r\n  },\r\n  mixins: [validationMixin],\r\n  methods: {\r\n    viewReport(item) {\r\n      this.selectedTrItem = item;\r\n      this.viewReportModal = true;\r\n      setTimeout(() => {\r\n        this.$refs.viewReportModalRef_2.getById(\r\n            item.docTableId,\r\n            item.reportId,\r\n            item.status\r\n        );\r\n      }, 400);\r\n    },\r\n\r\n    showResult() {\r\n\r\n      let obj = this.valueList.filter(e => e.id == this.form.tableId.id)\r\n\r\n      if (!this.checkValidity()) {\r\n        this.loaderButton = true;\r\n\r\n        if (obj[0].hasDynamicRowsForTable) {\r\n          setTimeout(() => {\r\n            this.$refs.viewGatherReportRef\r\n                .getByWithReportId(this.form.tableId.id, this.form)\r\n                .then(({report, data}) => {\r\n                  this.reportList = report;\r\n                  this.reportData = data;\r\n                  this.loaderButton = false;\r\n                })\r\n                .catch((e) => {\r\n                  this.loaderButton = false;\r\n                  // this.catchErr(e);\r\n                });\r\n          }, 400);\r\n        } else {\r\n          setTimeout(() => {\r\n            this.$refs.viewGatherReportRef\r\n                .getById(this.form.tableId.id, this.form)\r\n                .then(({report, data}) => {\r\n                  this.reportList = report;\r\n                  this.reportData = data;\r\n                  this.loaderButton = false;\r\n                })\r\n                .catch((e) => {\r\n                  this.loaderButton = false;\r\n                  // this.catchErr(e);\r\n                });\r\n          }, 400);\r\n        }\r\n    }\r\n  },\r\n  getListDateTypesChild() {\r\n    if (this.form.tableId) {\r\n      Service.getListDateTypesChild(\r\n          this.params2,\r\n          this.form.tableId.dateTypeId\r\n      ).then((rs) => {\r\n        this.list = rs.data.list;\r\n      });\r\n    }\r\n  },\r\n  searchItem(q) {\r\n    this.search = q;\r\n    this.getListTable();\r\n  },\r\n  getValue(v) {\r\n    this.form.tableId = v;\r\n    this.getListDateTypesChild();\r\n  },\r\n\r\n  searchItem2(q) {\r\n    this.search2 = q;\r\n    this.getListDateTypesChild();\r\n  },\r\n  getValue2(v) {\r\n    this.form.childDateTypeId = v;\r\n  },\r\n  checkValidity() {\r\n    this.submitted = true;\r\n    this.$v.form.$touch();\r\n    return this.$v.form.$anyError;\r\n  },\r\n  setFormData(item) {\r\n    this.form = {...this.form, ...item};\r\n  },\r\n  getListTable() {\r\n    Service.getOwnTableForGather(this.params)\r\n        .then((rs) => {\r\n          if (rs.data) {\r\n            this.valueList = rs.data.list;\r\n          }\r\n        })\r\n        .catch((e) => {});\r\n  },\r\n}\r\n,\r\ncreated()\r\n{\r\n  this.getListTable();\r\n}\r\n,\r\ncomputed: {\r\n  params()\r\n  {\r\n    return {\r\n      params: {\r\n        limit: 20,\r\n        page: 0,\r\n      },\r\n      search: this.search,\r\n    };\r\n  }\r\n,\r\n  params2()\r\n  {\r\n    return {\r\n      params: {\r\n        limit: 20,\r\n        page: 0,\r\n      },\r\n      search: this.search2,\r\n    };\r\n  }\r\n,\r\n}\r\n,\r\ndata()\r\n{\r\n  return {\r\n    reportData: [],\r\n    viewReportModal: false,\r\n    selectedTrItem: {},\r\n    reportList: [],\r\n    loaderButton: false,\r\n    search2: \"\",\r\n    list: [],\r\n    g_label: g_label,\r\n    submitted: false,\r\n    valueList: [],\r\n    search: \"\",\r\n    reportInfo: {},\r\n    form: {\r\n      date: \"\",\r\n      tableId: null,\r\n      childDateTypeId: null,\r\n    },\r\n  };\r\n}\r\n,\r\n}\r\n;\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}