{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\price-stock\\Upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\price-stock\\Upload.vue","mtime":1675054786265},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcHJpY2VTdG9ja1NlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvaW50ZWdyYXRpb24vcHJpY2VTdG9jay5zZXJ2aWNlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmaWxlOiBudWxsLA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgY29tcHV0ZWRPYnNlcnZlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyOw0KICAgIH0sDQogICAgaXNSZWFsaXphdGlvbigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnSW50ZWdyYXRpb25QcmljZVN0b2NrUmVhbGl6YXRpb25VcGxvYWQnOw0KICAgIH0sDQogICAgZ2V0VGVtcGxhdGVVcmwoKXsNCiAgICAgIGlmICh0aGlzLmlzUmVhbGl6YXRpb24pIHsNCiAgICAgICAgcmV0dXJuICcvdGVtcGxhdGUvaW50ZWdyYXRpb24vYmlyamEtcmVhbGl6YXRzaXlhLXNoYWJsb24ueGxzeCc7DQogICAgICB9DQogICAgICByZXR1cm4gJy90ZW1wbGF0ZS9pbnRlZ3JhdGlvbi9iaXJqYS12c3RhdmxlbmllLXMtcmVhbGl6YXRzaWVpLXNoYWJsb24ueGxzeCc7DQogICAgfSwNCiAgfSwNCiAgd2F0Y2g6IHt9LA0KICBtZXRob2RzOiB7DQogICAgc2F2ZSgpIHsNCiAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4oYXN5bmMgdmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5pc1JlYWxpemF0aW9uKSB7DQogICAgICAgICAgICBhd2FpdCBwcmljZVN0b2NrU2VydmljZS51cGxvYWRCeUV4Y2VsUmVhbGl6YXRpb24odGhpcy5maWxlWzBdKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMuZmlsZSA9IG51bGwNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGF3YWl0IHByaWNlU3RvY2tTZXJ2aWNlLnVwbG9hZEJ5RXhjZWxFbWJlZGRpbmdSZWFsaXphdGlvbih0aGlzLmZpbGVbMF0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5maWxlID0gbnVsbA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnJlc2V0KCkNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgibWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5IiksIHsgdHlwZTogInN1Y2Nlc3MiIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgibWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMiKSwgeyB0eXBlOiAiZXJyb3IiIH0pDQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9DQo="},{"version":3,"sources":["Upload.vue"],"names":[],"mappings":";AA+BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Upload.vue","sourceRoot":"src/modules/integration/modules/price-stock","sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      :custom-title=\"$t('actions.upload')\"\r\n      has-save-suspend\r\n      @save=\"save\"\r\n  >\r\n    <ValidationObserver ref=\"observer\" v-slot=\"{}\">\r\n      <b-row class=\"mb-3\">\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseFileUploaderWithValidation\r\n              v-model=\"file\"\r\n              data-vv-name=\"file\"\r\n              data-vv-as=\"file\"\r\n              :multiple=\"false\"\r\n              :max-files=\"1\"\r\n              :label=\"$t('actions.excel_file_upload')\"\r\n          ></BaseFileUploaderWithValidation>\r\n        </b-col>\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <p>\r\n            {{ $t('actions.download_template') }}\r\n          </p>\r\n          <a class=\"btn btn-info\" target=\"_blank\" :href=\"getTemplateUrl\" download>\r\n            {{ $t('actions.download_template') }}\r\n          </a>\r\n        </b-col>\r\n      </b-row>\r\n    </ValidationObserver>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nimport priceStockService from \"@/shared/services/integration/priceStock.service\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      file: null,\r\n    };\r\n  },\r\n  computed: {\r\n    computedObserver() {\r\n      return this.$refs.observer;\r\n    },\r\n    isRealization() {\r\n      return this.$route.name === 'IntegrationPriceStockRealizationUpload';\r\n    },\r\n    getTemplateUrl(){\r\n      if (this.isRealization) {\r\n        return '/template/integration/birja-realizatsiya-shablon.xlsx';\r\n      }\r\n      return '/template/integration/birja-vstavlenie-s-realizatsiei-shablon.xlsx';\r\n    },\r\n  },\r\n  watch: {},\r\n  methods: {\r\n    save() {\r\n      this.computedObserver.validate().then(async valid => {\r\n        if (valid) {\r\n          if (this.isRealization) {\r\n            await priceStockService.uploadByExcelRealization(this.file[0]).then(res => {\r\n              this.file = null\r\n            })\r\n          } else {\r\n            await priceStockService.uploadByExcelEmbeddingRealization(this.file[0]).then(res => {\r\n              this.file = null\r\n            })\r\n          }\r\n          this.computedObserver.reset()\r\n          this.$router.go(-1)\r\n          this.$toast(this.$t(\"messages.saved_successfully\"), { type: \"success\" })\r\n        } else {\r\n          this.$toast(this.$t(\"messages.fill_required_fields\"), { type: \"error\" })\r\n        }\r\n      });\r\n    },\r\n  },\r\n}\r\n</script>"]}]}