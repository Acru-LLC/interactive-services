{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\references\\modules\\product\\CreateOrUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\references\\modules\\product\\CreateOrUpdate.vue","mtime":1675054786283},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBNQUlOX0FQSV9VUkwgPSAncHJpY2UvcHJvZHVjdCcNCi8qKiBZT1UgTVVTVCBTRU5EIHt7IE1BSU5fQVBJX1VSTCB9fSBUTyBDUlVEX1NFUlZJQ0UgKi8NCmltcG9ydCBjcnVkQW5kTGlzdHNTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2NydWRfYW5kX2xpc3Quc2VydmljZSINCmltcG9ydCB7UHJvZHVjdFR5cGUsIFByb2R1Y3RQcm9kdWN0VHlwZX0gZnJvbSAnQC9oZWxwZXJzL2NvbnN0YW50cycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgLyoqIERBVEEgKi8NCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZWRpdGluZ0l0ZW06IHt9LA0KICAgICAgc3RhdHVzZXM6IFtdLA0KICAgICAgdW5pdHM6IFtdLA0KICAgIH0NCiAgfSwNCiAgLyoqIENPTVBVVEVEICovDQogIGNvbXB1dGVkOiB7DQogICAgaXNNb2RlQ3JlYXRlKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLm5hbWUgPT09ICdSZWZlcmVuY2VzUHJvZHVjdENyZWF0ZScNCiAgICB9LA0KICAgIGNvbXB1dGVkT2JzZXJ2ZXIoKSB7DQogICAgICByZXR1cm4gdGhpcy4kcmVmcy5vYnNlcnZlcg0KICAgIH0sDQogICAgcHJvZHVjdFR5cGUoKSB7DQogICAgICByZXR1cm4gUHJvZHVjdFR5cGUNCiAgICB9LA0KICAgIHByb2R1Y3RQcm9kdWN0VHlwZSgpIHsNCiAgICAgIHJldHVybiBQcm9kdWN0UHJvZHVjdFR5cGUNCiAgICB9LA0KICB9LA0KICAvKiogTUVUSE9EUyAqLw0KICBtZXRob2RzOiB7DQogICAgdHJlZUNsb3NlZCh2ZWVOYW1lKSB7DQogICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVmc1t2ZWVOYW1lXS52YWxpZGF0ZSgpOw0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxVbml0IChvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMudW5pdHMuZmluZChlID0+IGUuaWQgPT0gKG9wdC5pZCA/IG9wdC5pZCA6IG9wdCkpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGBgOw0KICAgIH0sDQogICAgc2F2ZSgpIHsNCiAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4odmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nSXRlbS5pZCkgew0KICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS51cGRhdGUoTUFJTl9BUElfVVJMLCB0aGlzLmVkaXRpbmdJdGVtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB7fSk7DQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkNCiAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5jcmVhdGUoTUFJTl9BUElfVVJMLCB0aGlzLmVkaXRpbmdJdGVtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB7fSk7DQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkNCiAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwgeyB0eXBlOiAnZXJyb3InIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICB9LA0KICAvKiogQ1JFQVRFRCAqLw0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIGlmICh0aGlzLmlzTW9kZUNyZWF0ZSkgew0KICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5nZXRFbXB0eShNQUlOX0FQSV9VUkwpDQogICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSByZXMuZGF0YQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICB9KQ0KICAgIH0gZWxzZSB7DQogICAgICBhd2FpdCBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEJ5SWQoTUFJTl9BUElfVVJMLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsIGZhbHNlKQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gcmVzLmRhdGENCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgfSkNCiAgICB9DQogICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0KCdkaXJlY3RvcnkvdW5pdHMnLCB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy51bml0cyA9IHJlcy5kYXRhLmxpc3Q7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICB9KQ0KICB9DQp9DQo="},{"version":3,"sources":["CreateOrUpdate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateOrUpdate.vue","sourceRoot":"src/modules/references/modules/product","sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      @save=\"save\"\r\n      has-save-suspend\r\n      :custom-title=\"$t('actions.update')\"\r\n  >\r\n    <ValidationObserver ref=\"observer\" v-slot=\"{}\">\r\n      <b-row class=\"mb-3\">\r\n        <b-col sm=\"4\">\r\n          <BaseInputWithValidation\r\n              rules=\"required\"\r\n              class=\"required\"\r\n              v-model=\"editingItem.nameUz\"\r\n              label-on-top\r\n              :label=\"$t('column.name_uz')\"\r\n              :placeholder=\"''\"\r\n          />\r\n        </b-col>\r\n        <b-col sm=\"4\">\r\n          <BaseInputWithValidation\r\n              not-required\r\n              v-model=\"editingItem.nameLt\"\r\n              label-on-top\r\n              :label=\"$t('column.name_lt')\"\r\n              :placeholder=\"''\"\r\n          />\r\n        </b-col>\r\n        <b-col sm=\"4\">\r\n          <BaseInputWithValidation\r\n              not-required\r\n              v-model=\"editingItem.nameRu\"\r\n              label-on-top\r\n              :label=\"$t('column.name_ru')\"\r\n              :placeholder=\"''\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n      <b-row class=\"mb-3\">\r\n        <b-col sm=\"4\">\r\n          <BaseMultiselectWithValidation\r\n              not-required\r\n              v-model=\"editingItem.unitId\"\r\n              label-on-top\r\n              :options=\"units.map(el => el.id)\"\r\n              :label=\"$t('column.units')\"\r\n              :custom-label=\"customLabelUnit\"\r\n              :placeholder=\"''\"\r\n              open-direction=\"bottom\"\r\n              :max-height=\"600\"\r\n              :show-labels=\"false\"\r\n          />\r\n        </b-col>\r\n        <b-col sm=\"4\">\r\n          {{ $t('actions.export_import_type')}}\r\n          <b-form-select>\r\n            <b-form-select-option :value=\"key\" v-for=\"(value, key) in productType\" :key=\"key\">\r\n              {{ value }}\r\n            </b-form-select-option>\r\n          </b-form-select>\r\n        </b-col>\r\n        <b-col sm=\"4\">\r\n          {{ $t('actions.product_type')}}\r\n          <b-form-select>\r\n            <b-form-select-option :value=\"key\" v-for=\"(value, key) in productProductType\" :key=\"key\">\r\n              {{ value }}\r\n            </b-form-select-option>\r\n          </b-form-select>\r\n        </b-col>\r\n      </b-row>\r\n    </ValidationObserver>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'price/product'\r\n/** YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport {ProductType, ProductProductType} from '@/helpers/constants'\r\nexport default {\r\n  /** DATA */\r\n  data() {\r\n    return {\r\n      editingItem: {},\r\n      statuses: [],\r\n      units: [],\r\n    }\r\n  },\r\n  /** COMPUTED */\r\n  computed: {\r\n    isModeCreate() {\r\n      return this.$route.name === 'ReferencesProductCreate'\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    },\r\n    productType() {\r\n      return ProductType\r\n    },\r\n    productProductType() {\r\n      return ProductProductType\r\n    },\r\n  },\r\n  /** METHODS */\r\n  methods: {\r\n    treeClosed(veeName) {\r\n      this.computedObserver.refs[veeName].validate();\r\n    },\r\n    customLabelUnit (opt) {\r\n      let selected = this.units.find(e => e.id == (opt.id ? opt.id : opt));\r\n      if (selected) {\r\n        return this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n      }\r\n      return ``;\r\n    },\r\n    save() {\r\n      this.computedObserver.validate().then(valid => {\r\n        if (valid) {\r\n          if (this.editingItem.id) {\r\n            crudAndListsService.update(MAIN_API_URL, this.editingItem).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {});\r\n              this.$router.go(-1)\r\n              this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n            })\r\n          } else {\r\n            crudAndListsService.create(MAIN_API_URL, this.editingItem).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {});\r\n              this.$router.go(-1)\r\n              this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n            })\r\n          }\r\n        } else {\r\n          this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n        }\r\n      });\r\n    },\r\n  },\r\n  /** CREATED */\r\n  async created() {\r\n    if (this.isModeCreate) {\r\n      await crudAndListsService.getEmpty(MAIN_API_URL)\r\n          .then(res => {\r\n            this.editingItem = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    } else {\r\n      await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, false)\r\n          .then(res => {\r\n            this.editingItem = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    }\r\n    await crudAndListsService.searchList('directory/units', this.var_default_search_payload)\r\n        .then((res) => {\r\n          this.units = res.data.list;\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.col-form-label {\r\n  padding-top: 0;\r\n}\r\n\r\nul {\r\n  list-style-type: none;\r\n}\r\n</style>"]}]}