{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\auth\\components\\ESigns.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\auth\\components\\ESigns.vue","mtime":1667352074588},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSGVscGVyU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9hdXRoLnNlcnZpY2UiOw0KaW1wb3J0IEF1dGhTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2F1dGguc2VydmljZSI7DQppbXBvcnQgQXBwU2V0dGluZ3MgZnJvbSAiQC9zZXR0aW5ncyI7DQoNCnZhciBFSU1aT19NQUpPUiA9IDM7DQp2YXIgRUlNWk9fTUlOT1IgPSAzNzsNCmNvbnN0IGVycm9yQ0FQSVdTID0gJ9Ce0YjQuNCx0LrQsCDRgdC+0LXQtNC40L3QtdC90LjRjyDRgSBFLUlNWk8uINCS0L7Qt9C80L7QttC90L4g0YMg0LLQsNGBINC90LUg0YPRgdGC0LDQvdC+0LLQu9C10L0g0LzQvtC00YPQu9GMIEUtSU1aTyDQuNC70Lgg0JHRgNCw0YPQt9C10YAgRS1JTVpPLic7DQpjb25zdCBlcnJvckJyb3dzZXJXUyA9ICfQkdGA0LDRg9C30LXRgCDQvdC1INC/0L7QtNC00LXRgNC20LjQstCw0LXRgiDRgtC10YXQvdC+0LvQvtCz0LjRjiBXZWJTb2NrZXQuINCj0YHRgtCw0L3QvtCy0LjRgtC1INC/0L7RgdC70LXQtNC90Y7RjiDQstC10YDRgdC40Y4g0LHRgNCw0YPQt9C10YDQsC4nOw0KY29uc3QgZXJyb3JVcGRhdGVBcHAgPSAn0JLQndCY0JzQkNCd0JjQlSAhISEg0KPRgdGC0LDQvdC+0LLQuNGC0LUg0L3QvtCy0YPRjiDQstC10YDRgdC40Y4g0L/RgNC40LvQvtC20LXQvdC40Y8gRS1JTVpPINC40LvQuCDQkdGA0LDRg9C30LXRgNCwIEUtSU1aTy48YnIgLz48YSBocmVmPSJodHRwczovL2UtaW16by51ei9tYWluL2Rvd25sb2Fkcy8iIHJvbGU9ImJ1dHRvbiI+0KHQutCw0YfQsNGC0Ywg0J/QniBFLUlNWk88L2E+JzsNCmNvbnN0IGVycm9yV3JvbmdQYXNzd29yZCA9ICfQn9Cw0YDQvtC70Ywg0L3QtdCy0LXRgNC90YvQuS4nOw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIGZvckxvZ2luOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIGRhdGFUb1NpZ246IHsNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG5hbWU6ICJFU2lnbnMiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzaWduU2VsZWN0QnRuRGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgb3BlbkNvbmZpcm1Nb2RhbDogZmFsc2UsDQogICAgICBzaWduTW9kYWw6IGZhbHNlLA0KICAgICAgU2VhcmNoVGV4dDogJycsDQogICAgICBhbGVydFNob3c6IGZhbHNlLA0KICAgICAgYWxlcnRNc2c6ICcnLA0KICAgICAgYWxlcnRUeXBlOiAnJywNCiAgICAgIGRhdGFUb1NpZ25JZk5vdDoge30sDQogICAgICBwdWJsaWNQYXRoOiBwcm9jZXNzLmVudi5CQVNFX1VSTCwNCiAgICAgIEludm9pY2U6IHt9LA0KICAgICAgcGtjczc6IG51bGwsDQogICAgICBzaWduQnlJbXpvVGV4dDogbnVsbCwNCiAgICAgIHZvOiBudWxsLA0KICAgICAga2V5c0xpc3Q6IFtdLA0KICAgICAgZnVsbEtleUxpc3Q6IFtdLA0KICAgICAgYWxlcnRNZXNzYWdlOiBudWxsLA0KICAgICAgc2hvd01lc3NhZ2U6IGZhbHNlLA0KICAgICAgY3VycmVudEFsZXJ0Q291bnRlcjogNSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgY29uZmlybURpYWxvZzogZmFsc2UsDQogICAgICBjdXJyZW50SXRlbTogbnVsbCwNCiAgICAgIG1vZGFsVGl0bGU6IG51bGwsDQogICAgICBsb2FkaW5nQnV0dG9uOiBmYWxzZSwNCiAgICAgIEFwcFNldHRpbmdzOiBBcHBTZXR0aW5ncw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGRlYm91bmNlU2VhcmNoKGV2ZW50KSB7DQogICAgICBsZXQgdm0gPSB0aGlzOw0KDQogICAgICBjbGVhclRpbWVvdXQodm0uZGVib3VuY2UpOw0KICAgICAgdm0uZGVib3VuY2UgPSBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdm0ua2V5RmlsdGVyKGV2ZW50KTsNCiAgICAgIH0sIDUwMCk7DQogICAgfSwNCiAgICBrZXlGaWx0ZXIodGV4dCkgew0KICAgICAgbGV0IHZhbHVlID0gdGV4dC50b1VwcGVyQ2FzZSgpOw0KICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgIHRoaXMua2V5c0xpc3QgPSB0aGlzLmZ1bGxLZXlMaXN0LmZpbHRlcigoZWwpID0+IHsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIGVsLkNOLmluY2x1ZGVzKHZhbHVlKSB8fA0KICAgICAgICAgICAgICBlbC5PLmluY2x1ZGVzKHZhbHVlKSB8fA0KICAgICAgICAgICAgICBlbC5ULmluY2x1ZGVzKHZhbHVlKSB8fA0KICAgICAgICAgICAgICBlbC5USU4uaW5jbHVkZXModmFsdWUpIHx8DQogICAgICAgICAgICAgIGVsLlVJRC5pbmNsdWRlcyh2YWx1ZSkgfHwNCiAgICAgICAgICAgICAgZWwubmFtZS5pbmNsdWRlcyh2YWx1ZSkgfHwNCiAgICAgICAgICAgICAgZWwuc2VyaWFsTnVtYmVyLmluY2x1ZGVzKHZhbHVlKQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgcmV0dXJuIGVsOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmtleXNMaXN0ID0gdGhpcy5mdWxsS2V5TGlzdDsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIHNpZ25CeUVpbXpvKCkgew0KICAgICAgdGhpcy5sb2FkaW5nQnV0dG9uID0gdHJ1ZTsNCiAgICAgIGxldCB2bSA9IHRoaXM7DQogICAgICBsZXQgZGF0YSA9IG51bGwNCiAgICAgIGlmICh0aGlzLmRhdGFUb1NpZ24gJiYgdGhpcy5kYXRhVG9TaWduLmtleSkgew0KICAgICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoe2tleTogdGhpcy5kYXRhVG9TaWduLmtleSwgaW5uOiB0aGlzLmRhdGFUb1NpZ24uaW5ufSkNCiAgICAgICAgLy8gZGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YVRvU2lnbikNCiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhVG9TaWduSWZOb3QgJiYgdGhpcy5kYXRhVG9TaWduSWZOb3Qua2V5KSB7DQogICAgICAgIGRhdGEgPSBKU09OLnN0cmluZ2lmeSh7DQogICAgICAgICAga2V5OiB0aGlzLmRhdGFUb1NpZ25JZk5vdC5rZXksDQogICAgICAgICAgUE5GTDogdGhpcy5kYXRhVG9TaWduSWZOb3QuUE5GTCwNCiAgICAgICAgICBUSU46IHRoaXMuZGF0YVRvU2lnbklmTm90LlRJTg0KICAgICAgICB9KQ0KICAgICAgICAvLyBkYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhVG9TaWduSWZOb3QpDQogICAgICB9DQogICAgICAvLyB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KCh0aGlzLmRhdGFUb1NpZ24gJiYgdGhpcy5kYXRhVG9TaWduLmtleSkgPyB7IGtleTogdGhpcy5kYXRhVG9TaWduLmtleSwgaW5uOiB0aGlzLmRhdGFUb1NpZ24uaW5uIH0gOiAodGhpcy5kYXRhVG9TaWduSWZOb3QgJiYgdGhpcy5kYXRhVG9TaWduSWZOb3Qua2V5KSA/IHsga2V5OiB0aGlzLmRhdGFUb1NpZ25JZk5vdC5rZXksIGlubjogdGhpcy5kYXRhVG9TaWduSWZOb3QuaW5uIH0gOiB7IGtleTogbnVsbCwgaW5uOiBudWxsIH0pOw0KICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgICBFSU1aT0NsaWVudC5sb2FkS2V5KHZtLmN1cnJlbnRJdGVtLCBmdW5jdGlvbiAoaWQpIHsNCiAgICAgICAgICAgICAgRUlNWk9DbGllbnQuY3JlYXRlUGtjczcoaWQsIGRhdGEsIG51bGwsIGZ1bmN0aW9uIChwa2NzNykgew0KICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwa2NzNyk7DQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlLCByKSB7DQogICAgICAgICAgICAgICAgICByZWplY3QoJ2Vycm9yJyk7DQogICAgICAgICAgICAgICAgICB2bS5sb2FkaW5nQnV0dG9uID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICBpZiAocikgew0KICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmluZGV4T2YoIkJhZFBhZGRpbmdFeGNlcHRpb24iKSAhPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uJHRvYXN0KGVycm9yV3JvbmdQYXNzd29yZCwgeyB0eXBlOiAnZXJyb3InIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIDE7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2V5SWQnKS5pbm5lckhUTUwgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICB2bS4kdG9hc3QoZXJyb3JCcm93c2VyV1MsIHsgdHlwZTogJ2Vycm9yJyB9KTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGlmIChlKSB2bS53c0Vycm9yKGUpOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgcikgew0KICAgICAgICAgICAgICByZWplY3QoJ2Vycm9yJyk7DQogICAgICAgICAgICAgIHZtLmxvYWRpbmdCdXR0b24gPSBmYWxzZTsNCiAgICAgICAgICAgICAgaWYgKHIpIHsNCiAgICAgICAgICAgICAgICAgIGlmIChyLmluZGV4T2YoIkJhZFBhZGRpbmdFeGNlcHRpb24iKSAhPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICB2bS4kdG9hc3QoZXJyb3JXcm9uZ1Bhc3N3b3JkLCB7IHR5cGU6ICdlcnJvcicgfSk7DQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIHZtLiR0b2FzdChyLCB7IHR5cGU6ICdlcnJvcicgfSk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB2bS4kdG9hc3QoZXJyb3JCcm93c2VyV1MsIHsgdHlwZTogJ2Vycm9yJyB9KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoZSkgdm0ud3NFcnJvcihlKTsNCiAgICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgICAgcHJvbWlzZS50aGVuKA0KICAgICAgICAgIHN1Y2Nlc3MgPT4gew0KICAgICAgICAgICAgICB2bS4kZW1pdCgnc2lnbicsIHN1Y2Nlc3MsIHZtLmRhdGFUb1NpZ25JZk5vdC5USU4sIHZtLmRhdGFUb1NpZ25JZk5vdC5QTkZMKTsNCiAgICAgICAgICB9LA0KICAgICAgICAgIGVycm9yID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgIH0sDQogICAgICApLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgIHZtLmNvbmZpcm1EaWFsb2cgPSBmYWxzZTsNCiAgICAgICAgICB2bS5sb2FkaW5nQnV0dG9uID0gZmFsc2U7DQogICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgY29udGludWVSZWdpc3RyYXRpb24oaXNDb25maXJtZWQpIHsNCiAgICAgIGlmIChpc0NvbmZpcm1lZCkgew0KICAgICAgICBpZiAodGhpcy5mb3JMb2dpbikgew0KICAgICAgICAgIGF3YWl0IHRoaXMuc2lnbkJ5RWltem8oKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRJdGVtLlRJTi5zdGFydHNXaXRoKCc0JykgfHwgdGhpcy5jdXJyZW50SXRlbS5USU4uc3RhcnRzV2l0aCgnNScpIHx8IHRoaXMuY3VycmVudEl0ZW0uVElOLnN0YXJ0c1dpdGgoJzYnKSkgew0KICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnYXV0aC5zZWxlY3RfanVyaWRpY2FsX3NpZ25hdHVyZScpLCB7dHlwZTogJ2Vycm9yJ30pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnNpZ25TZWxlY3RCdG5EaXNhYmxlZCA9IHRydWUNCiAgICAgICAgICAgIGF3YWl0IEF1dGhTZXJ2aWNlLmlzT3JnUmVnaXN0ZXJlZCh0aGlzLmN1cnJlbnRJdGVtLlRJTiwgdGhpcy5jdXJyZW50SXRlbS5VSUQsIHRoaXMuY3VycmVudEl0ZW0uVCkNCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAgICAgICAgIGxldCBwYXlsb2FkID0gew0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZURhdGE6IHJlc3BvbnNlLmRhdGEsDQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtOiB0aGlzLmN1cnJlbnRJdGVtDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJrZXlTZWxlY3RlZCIsIHBheWxvYWQpOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7DQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmZpbmFsbHkoKGUpID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuc2lnblNlbGVjdEJ0bkRpc2FibGVkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgIC8vIHRoaXMuaGlkZU1vZGFsKCJvcGVuQ29uZmlybU1vZGFsIik7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBhcHBMb2FkKCkgew0KICAgICAgbGV0IHZtID0gdGhpczsNCiAgICAgIEVJTVpPQ2xpZW50LkFQSV9LRVlTID0gQXBwU2V0dGluZ3MuYXBpX2tleXM7DQogICAgICBhd2FpdCBFSU1aT0NsaWVudC5jaGVja1ZlcnNpb24oYXN5bmMgZnVuY3Rpb24gKG1ham9yLCBtaW5vcikgew0KICAgICAgICB2YXIgbmV3VmVyc2lvbiA9IEVJTVpPX01BSk9SICogMTAwICsgRUlNWk9fTUlOT1I7DQogICAgICAgIHZhciBpbnN0YWxsZWRWZXJzaW9uID0gcGFyc2VJbnQobWFqb3IpICogMTAwICsgcGFyc2VJbnQobWlub3IpOw0KICAgICAgICBpZiAoaW5zdGFsbGVkVmVyc2lvbiA8IG5ld1ZlcnNpb24pIHsNCiAgICAgICAgICAvLyB2bS5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgdm0uJHRvYXN0KGVycm9yVXBkYXRlQXBwLCB7dHlwZTogJ2Vycm9yJ30pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGF3YWl0IEVJTVpPQ2xpZW50Lmluc3RhbGxBcGlLZXlzKGFzeW5jIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGF3YWl0IHZtLnVpTG9hZEtleXMoKQ0KICAgICAgICAgICAgLy8gdm0ubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgfSwgZnVuY3Rpb24gKGUsIHIpIHsNCiAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChyKSB7DQogICAgICAgICAgICAgIHZtLiR0b2FzdChyLCB7dHlwZTogJ2Vycm9yJ30pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdm0ud3NFcnJvcihlLCB2bS4kdCgnYWN0aW9ucy5lcnJvcicpLCAnZXJyb3InKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSwgZnVuY3Rpb24gKGUsIHIpIHsNCiAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICBpZiAocikgew0KICAgICAgICAgIHZtLiR0b2FzdChyLCB7dHlwZTogJ2Vycm9yJ30pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZtLiR0b2FzdCh2bS4kdCgnYXV0aC5pc19lX3NpZ25hdHVyZV9pbnN0YWxsZWQnKSwge3R5cGU6ICdlcnJvcid9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICByZXR1cm4gMTsNCiAgICB9LA0KICAgIGFzeW5jIG9wZW5TaWduTW9kYWwoaXRlbSkgew0KICAgICAgdGhpcy5jdXJyZW50SXRlbSA9IGl0ZW07DQogICAgICB0aGlzLm1vZGFsVGl0bGUgPSBpdGVtLnNlcmlhbE51bWJlciArICIgLSAiICsgaXRlbS5DTjsNCiAgICAgIGlmICghdGhpcy5kYXRhVG9TaWduIHx8ICF0aGlzLmRhdGFUb1NpZ24ua2V5KSB7DQogICAgICAgIGF3YWl0IEF1dGhTZXJ2aWNlLmdldEtleUZvckxvZ2luU2lnbihpdGVtLlRJTiwgaXRlbS5VSUQsIGl0ZW0uUElORkwpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuZGF0YVRvU2lnbklmTm90ID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIC8vIHRoaXMuY29uZmlybURpYWxvZyA9IHRydWU7DQogICAgICAvKiB0aGlzLnVpU2hvd0NvbmZpcm0oew0KICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuZm9yTG9naW4gPyB0aGlzLiR0KCdhdXRoLmNvbnRpbnVlX2xvZ2luX3dpdGhfdGhpc19zaWduYXR1cmUnKSA6IHRoaXMuJHQoJ2F1dGguY29udGludWVfcmVnX3dpdGhfdGhpc19zaWduYXR1cmUnKSwNCiAgICAgICAgICBjYWxsYmFjazogdGhpcy5jb250aW51ZVJlZ2lzdHJhdGlvbg0KICAgICAgfSkgKi8NCiAgICAgIHRoaXMuJGJ2TW9kYWwubXNnQm94Q29uZmlybSh0aGlzLmZvckxvZ2luID8NCiAgICAgICAgICA8aDUgY2xhc3M9Im1iLTAiPnt0aGlzLiR0KCdhdXRoLmNvbnRpbnVlX2xvZ2luX3dpdGhfdGhpc19zaWduYXR1cmUnKX08L2g1PiA6DQogICAgICAgICAgPGg1IGNsYXNzPSJtYi0wIj57dGhpcy4kdCgnYXV0aC5jb250aW51ZV9yZWdfd2l0aF90aGlzX3NpZ25hdHVyZScpfTwvaDU+LCB7DQogICAgICAgIG9rVGl0bGU6IHRoaXMuJHQoJ2FjdGlvbnMuY29uZmlybScpLA0KICAgICAgICBjYW5jZWxUaXRsZTogdGhpcy4kdCgnYWN0aW9ucy5jYW5jZWwnKQ0KICAgICAgfSkNCiAgICAgICAgICAudGhlbih2YWx1ZSA9PiB7DQogICAgICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICAgICAgdGhpcy5jb250aW51ZVJlZ2lzdHJhdGlvbih2YWx1ZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgLy8gQW4gZXJyb3Igb2NjdXJyZWQNCiAgICAgICAgICB9KQ0KICAgIH0sDQogICAgaGlkZU1vZGFsKG1vZGFsKSB7DQogICAgICB0aGlzLiRkYXRhW21vZGFsXSA9IGZhbHNlOw0KICAgIH0sDQogICAgYXN5bmMgdGltZXN0YW1wZXIoc2lnbmF0dXJlX2hleCwgY2FsbGJhY2ssIGZhaWwpIHsNCg0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgSGVscGVyU2VydmljZS5nZXRUaW1lc3RhbXBlcihzaWduYXR1cmVfaGV4KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZS5kYXRhLmRhdGEpDQogICAgICAgIH0pOw0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICBpZiAoZS5yZXF1ZXN0KSB7DQogICAgICAgICAgZmFpbChlLnJlcXVlc3QucmVzcG9uc2UpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICB9LA0KICAgIGdldERhdGVGb3JtYXQoZGF0ZSkgew0KICAgICAgbGV0IGRhdGEgPSBuZXcgRGF0ZShkYXRlKTsNCiAgICAgIGxldCBtb250aCA9IGRhdGEuZ2V0TW9udGgoKSArIDENCiAgICAgIHJldHVybiBkYXRhLmdldERhdGUoKS50b1N0cmluZygpICsgIi4iICsgKG1vbnRoIDw9IDkgPyAiMCIgKyBtb250aCA6IG1vbnRoKS50b1N0cmluZygpICsgIi4iICsgZGF0YS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7DQogICAgfSwNCg0KICAgIGFzeW5jIGdldEltem8oKSB7DQogICAgICBsZXQgdm0gPSB0aGlzOw0KICAgICAgRUlNWk9DbGllbnQuaW5zdGFsbEFwaUtleXMoZnVuY3Rpb24gKCkgew0KICAgICAgICB2bS51aUxvYWRLZXlzKCk7DQogICAgICB9LCBmdW5jdGlvbiAoZSwgcikgew0KICAgICAgICBpZiAocikgew0KICAgICAgICAgIHZtLiR0b2FzdChyLCB7dHlwZTogJ2Vycm9yJ30pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZtLndzRXJyb3IoZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgYXN5bmMgdWlDcmVhdGVJdGVtKGl0bWtleSwgdm8pIHsNCiAgICAgIGxldCB2bSA9IHRoaXM7DQogICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgIHZvLmV4cGlyZWQgPSBkYXRlcy5jb21wYXJlKG5vdywgdm8udmFsaWRUbykgPiAwOw0KICAgICAgdmFyIGl0bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOw0KICAgICAgaXRtLnZhbHVlID0gaXRta2V5Ow0KICAgICAgaXRtLnRleHQgPSB2by5DTjsNCiAgICAgIGlmICghdm8uZXhwaXJlZCkgew0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBpdG0uc3R5bGUuY29sb3IgPSAnZ3JheSc7DQogICAgICAgIGl0bS50ZXh0ID0gaXRtLnRleHQgKyAnICjRgdGA0L7QuiDQuNGB0YLQtdC6KSc7DQogICAgICB9DQogICAgICB2bS5rZXlzTGlzdC5wdXNoKHZvKTsNCiAgICAgIHZtLmZ1bGxLZXlMaXN0LnB1c2godm8pOw0KICAgICAgaXRtLnNldEF0dHJpYnV0ZSgndm8nLCBKU09OLnN0cmluZ2lmeSh2bykpOw0KICAgICAgaXRtLnNldEF0dHJpYnV0ZSgnaWQnLCBpdG1rZXkpOw0KICAgICAgcmV0dXJuIGl0bTsNCiAgICB9LA0KICAgIGFzeW5jIHVpTG9hZEtleXMoKSB7DQogICAgICBsZXQgdm0gPSB0aGlzOw0KICAgICAgYXdhaXQgRUlNWk9DbGllbnQubGlzdEFsbFVzZXJLZXlzKGFzeW5jIGZ1bmN0aW9uIChvLCBpKSB7DQogICAgICAgIHZhciBpdGVtSWQgPSAiaXRtLSIgKyBvLnNlcmlhbE51bWJlciArICItIiArIGk7DQogICAgICAgIHJldHVybiBpdGVtSWQ7DQogICAgICB9LCBhc3luYyBmdW5jdGlvbiAoaXRlbUlkLCB2KSB7DQogICAgICAgIGxldCBpdGVtID0gYXdhaXQgdm0udWlDcmVhdGVJdGVtKGl0ZW1JZCwgdik7DQogICAgICAgIHJldHVybiBpdGVtDQogICAgICB9LCBmdW5jdGlvbiAoaXRlbXMsIGZpcnN0SWQpIHsNCiAgICAgICAgdm0ua2V5c0xpc3QgPSB2bS5mdWxsS2V5TGlzdDsNCiAgICAgICAgLy92bS51aUZpbGxDb21ibyhpdGVtcyk7DQogICAgICAgIC8vdm0udWlDb21ib1NlbGVjdChmaXJzdElkKTsNCiAgICAgIH0sIGZ1bmN0aW9uIChlLCByKSB7DQogICAgICAgIHZtLiR0b2FzdChlcnJvckNBUElXUyArICIgOiAiICsgZSwge3R5cGU6ICdlcnJvcid9KTsNCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIDENCiAgICB9LA0KICAgIGFzeW5jIHdzRXJyb3IoKSB7DQogICAgICBpZiAoZSkgew0KICAgICAgICB0aGlzLiR0b2FzdChlcnJvckNBUElXUyArICIgOiAiICsgZSwge3R5cGU6ICdlcnJvcid9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJHRvYXN0KGVycm9yQnJvd3NlcldTLCB7dHlwZTogJ2Vycm9yJ30pOw0KICAgICAgfQ0KICAgIH0sDQogICAgdWlDb21ib1NlbGVjdChpdG0pIHsNCiAgICAgIGlmIChpdG0pIHsNCiAgICAgICAgdmFyIGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaXRtKTsNCiAgICAgICAgaWQuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICd0cnVlJyk7DQogICAgICB9DQogICAgfSwNCg0KICAgIGNiQ2hhbmdlZChjKSB7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2V5SWQnKS5pbm5lckhUTUwgPSAnJzsNCiAgICB9LA0KICAgIHVpQ2xlYXJDb21ibygpIHsNCiAgICAgIHZhciBjb21ibyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2VpbXpvX2tleXMnKTsNCiAgICAgIGNvbWJvLmxlbmd0aCA9IDA7DQogICAgfSwNCg0KICAgIHVpRmlsbENvbWJvKGl0ZW1zKSB7DQogICAgICB2YXIgY29tYm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcl9laW16b19rZXlzJyk7DQogICAgICB0aGlzLml0ZW1MaXN0ID0gaXRlbXM7DQoNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICB0aGlzLmFwcExvYWQoKQ0KICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfSkNCiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgfQ0KfQ0K"},{"version":3,"sources":["ESigns.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ESigns.vue","sourceRoot":"src/shared/views/auth/components","sourcesContent":["<template>\r\n  <div>\r\n    <b-card class=\"e-signs-wrapper-card\">\r\n      <b-card-title>\r\n        <b-row>\r\n          <b-col\r\n              md=\"4\"\r\n              sm=\"12\"\r\n          >\r\n            <h4>{{ $t('auth.e_signatures') }}</h4>\r\n          </b-col>\r\n          <b-col\r\n              md=\"5\"\r\n              sm=\"12\"\r\n          >\r\n            <b-form-input\r\n                v-model=\"SearchText\"\r\n                :placeholder=\"$t('auth.e_sign_search')\"\r\n                size=\"sm\"\r\n                @input=\"debounceSearch\"\r\n            >\r\n              <template #append-content>\r\n                <i class=\"mdi mdi-search\"></i>\r\n              </template>\r\n            </b-form-input>\r\n          </b-col>\r\n          <b-col\r\n              v-if=\"forLogin\"\r\n              class=\"text-sm-end\"\r\n              sm=\"3\"\r\n          >\r\n            <b-button\r\n                class=\"btn btn-warning\"\r\n                size=\"sm\"\r\n                @click=\"$router.push({name: 'Login'})\"\r\n            >\r\n              {{ $t(\"actions.back\") }}\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n      </b-card-title>\r\n      <b-card-body :style=\"forLogin ? {'max-height': '60vh', 'overflow': 'auto'} : ''\">\r\n        <div v-if=\"loading\">\r\n          <div style=\"\r\n                        position: absolute;\r\n                        left: 0;\r\n                        top: 0;\r\n                        bottom: 0;\r\n                        right: 0;\r\n                        background-color: rgb(255, 255, 255, 0.4);\r\n                        \">\r\n            <div style=\"\r\n                            position: absolute;\r\n                            bottom: 50%;\r\n                            left: 50%;\r\n                            transform: translateX(-50%);\r\n                        \">\r\n              <b-spinner color=\"success\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-else>\r\n          <div v-if=\"keysList.length === 0\">\r\n            <b-card\r\n                md=\"12\"\r\n                sm=\"12\"\r\n            >\r\n              <b-card-body>\r\n                <h1 class=\"text-center text-danger\">\r\n                  {{ $t('auth.no_e_signatures_found') }}\r\n                </h1>\r\n              </b-card-body>\r\n            </b-card>\r\n          </div>\r\n          <b-row v-else>\r\n            <b-col\r\n                v-for=\"(item, index) in keysList\"\r\n                :key=\"`signkey-${index}`\"\r\n                :md=\"forLogin ? 6 : 4\"\r\n                :sm=\"6\"\r\n                :xl=\"forLogin ? 6 : 3\"\r\n            >\r\n              <b-card\r\n                  accent-color=\"primary\"\r\n                  body-class=\"p-0\"\r\n                  class=\"mr-3 mb-3 e-sign-card p-0\"\r\n              >\r\n                <b-card-title>{{ item.serialNumber }} - {{ item.CN }}</b-card-title>\r\n                <b-card-body>\r\n                  <b-row>\r\n                    <!-- <img\r\n                        :src=\"`${publicPath}img/key.jpg`\"\r\n                        alt=\"E-Key\"\r\n                        style=\"width: 4rem; height: auto;\"\r\n                    /> -->\r\n                    <p class=\"ml-2\">\r\n                      <i\r\n                          class=\"mdi mdi-file-key-outline\"\r\n                          style=\"color: #556ee6; font-size: 2.5rem;\"\r\n                      ></i><b>{{ $t('auth.certificate_number') }}</b>: {{ item.serialNumber }}\r\n                    </p>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <p class=\"ml-2 mt-2\"><b>{{ $t('column.inn') }}</b>: {{ item.TIN }}</p>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <p class=\"ml-2\"><b>{{ $t('column.fio') }}</b>: {{ item.CN }}</p>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <p class=\"ml-2\"><b>{{ $t('auth.organisation') }}</b>: {{ item.O }}</p>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <p class=\"ml-2\">\r\n                      <b class=\"small\">{{ $t('auth.certificate_validity_period') }}</b>:\r\n                      {{ getDateFormat(item.validFrom) }} -\r\n                      {{ getDateFormat(item.validTo) }}\r\n                    </p>\r\n                    <p></p>\r\n                  </b-row>\r\n                </b-card-body>\r\n                <footer class=\"d-flex justify-content-end\">\r\n                                    <span\r\n                                        v-if=\"item.expired\"\r\n                                        class=\"text-danger font-weight-bold\"\r\n                                    >\r\n                                        {{ $t('auth.certificate_expired') }}</span>\r\n                  <button\r\n                      v-else-if=\"signSelectBtnDisabled\"\r\n                      class=\"btn btn-primary btn-sm\"\r\n                      disabled\r\n                  >\r\n                    {{ $t('auth.continue_with_this_signature') }}\r\n                  </button>\r\n                  <button\r\n                      v-else\r\n                      class=\"btn btn-primary btn-sm\"\r\n                      @click=\"openSignModal(item)\"\r\n                  >\r\n                    {{ $t('auth.continue_with_this_signature') }}\r\n                  </button>\r\n                </footer>\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n        </div>\r\n      </b-card-body>\r\n      <footer\r\n          v-if=\"!forLogin\"\r\n          class=\"d-flex justify-content-end\"\r\n      >\r\n        <button\r\n            class=\"btn btn-warning\"\r\n            @click=\"$router.push({name: 'Login'})\"\r\n        >\r\n          {{ $t(\"actions.back\") }}\r\n        </button>\r\n      </footer>\r\n    </b-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HelperService from \"@/shared/services/auth.service\";\r\nimport AuthService from \"@/shared/services/auth.service\";\r\nimport AppSettings from \"@/settings\";\r\n\r\nvar EIMZO_MAJOR = 3;\r\nvar EIMZO_MINOR = 37;\r\nconst errorCAPIWS = 'Ошибка соединения с E-IMZO. Возможно у вас не установлен модуль E-IMZO или Браузер E-IMZO.';\r\nconst errorBrowserWS = 'Браузер не поддерживает технологию WebSocket. Установите последнюю версию браузера.';\r\nconst errorUpdateApp = 'ВНИМАНИЕ !!! Установите новую версию приложения E-IMZO или Браузера E-IMZO.<br /><a href=\"https://e-imzo.uz/main/downloads/\" role=\"button\">Скачать ПО E-IMZO</a>';\r\nconst errorWrongPassword = 'Пароль неверный.';\r\nexport default {\r\n  props: {\r\n    forLogin: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    dataToSign: {\r\n      default: () => {\r\n      }\r\n    }\r\n  },\r\n  name: \"ESigns\",\r\n  data() {\r\n    return {\r\n      signSelectBtnDisabled: false,\r\n      openConfirmModal: false,\r\n      signModal: false,\r\n      SearchText: '',\r\n      alertShow: false,\r\n      alertMsg: '',\r\n      alertType: '',\r\n      dataToSignIfNot: {},\r\n      publicPath: process.env.BASE_URL,\r\n      Invoice: {},\r\n      pkcs7: null,\r\n      signByImzoText: null,\r\n      vo: null,\r\n      keysList: [],\r\n      fullKeyList: [],\r\n      alertMessage: null,\r\n      showMessage: false,\r\n      currentAlertCounter: 5,\r\n      loading: false,\r\n      confirmDialog: false,\r\n      currentItem: null,\r\n      modalTitle: null,\r\n      loadingButton: false,\r\n      AppSettings: AppSettings\r\n    }\r\n  },\r\n  methods: {\r\n    debounceSearch(event) {\r\n      let vm = this;\r\n\r\n      clearTimeout(vm.debounce);\r\n      vm.debounce = setTimeout(() => {\r\n        vm.keyFilter(event);\r\n      }, 500);\r\n    },\r\n    keyFilter(text) {\r\n      let value = text.toUpperCase();\r\n      if (value) {\r\n        this.keysList = this.fullKeyList.filter((el) => {\r\n          if (\r\n              el.CN.includes(value) ||\r\n              el.O.includes(value) ||\r\n              el.T.includes(value) ||\r\n              el.TIN.includes(value) ||\r\n              el.UID.includes(value) ||\r\n              el.name.includes(value) ||\r\n              el.serialNumber.includes(value)\r\n          ) {\r\n            return el;\r\n          }\r\n        });\r\n      } else {\r\n        this.keysList = this.fullKeyList;\r\n      }\r\n    },\r\n    async signByEimzo() {\r\n      this.loadingButton = true;\r\n      let vm = this;\r\n      let data = null\r\n      if (this.dataToSign && this.dataToSign.key) {\r\n        data = JSON.stringify({key: this.dataToSign.key, inn: this.dataToSign.inn})\r\n        // data = JSON.stringify(this.dataToSign)\r\n      } else if (this.dataToSignIfNot && this.dataToSignIfNot.key) {\r\n        data = JSON.stringify({\r\n          key: this.dataToSignIfNot.key,\r\n          PNFL: this.dataToSignIfNot.PNFL,\r\n          TIN: this.dataToSignIfNot.TIN\r\n        })\r\n        // data = JSON.stringify(this.dataToSignIfNot)\r\n      }\r\n      // var data = JSON.stringify((this.dataToSign && this.dataToSign.key) ? { key: this.dataToSign.key, inn: this.dataToSign.inn } : (this.dataToSignIfNot && this.dataToSignIfNot.key) ? { key: this.dataToSignIfNot.key, inn: this.dataToSignIfNot.inn } : { key: null, inn: null });\r\n      const promise = new Promise((resolve, reject) => {\r\n          EIMZOClient.loadKey(vm.currentItem, function (id) {\r\n              EIMZOClient.createPkcs7(id, data, null, function (pkcs7) {\r\n                  resolve(pkcs7);\r\n              }, function (e, r) {\r\n                  reject('error');\r\n                  vm.loadingButton = false;\r\n                  if (r) {\r\n                      if (r.indexOf(\"BadPaddingException\") !== -1) {\r\n                          vm.$toast(errorWrongPassword, { type: 'error' });\r\n                      } else {\r\n                          1;\r\n                      }\r\n                  } else {\r\n                      document.getElementById('keyId').innerHTML = '';\r\n                      vm.$toast(errorBrowserWS, { type: 'error' });\r\n                  }\r\n                  if (e) vm.wsError(e);\r\n              });\r\n          }, function (e, r) {\r\n              reject('error');\r\n              vm.loadingButton = false;\r\n              if (r) {\r\n                  if (r.indexOf(\"BadPaddingException\") !== -1) {\r\n                      vm.$toast(errorWrongPassword, { type: 'error' });\r\n                  } else {\r\n                      vm.$toast(r, { type: 'error' });\r\n                  }\r\n              } else {\r\n                  vm.$toast(errorBrowserWS, { type: 'error' });\r\n              }\r\n              if (e) vm.wsError(e);\r\n          });\r\n      });\r\n      promise.then(\r\n          success => {\r\n              vm.$emit('sign', success, vm.dataToSignIfNot.TIN, vm.dataToSignIfNot.PNFL);\r\n          },\r\n          error => {\r\n            console.log(error)\r\n          },\r\n      ).finally(() => {\r\n          vm.confirmDialog = false;\r\n          vm.loadingButton = false;\r\n      })\r\n    },\r\n    async continueRegistration(isConfirmed) {\r\n      if (isConfirmed) {\r\n        if (this.forLogin) {\r\n          await this.signByEimzo()\r\n        } else {\r\n          if (this.currentItem.TIN.startsWith('4') || this.currentItem.TIN.startsWith('5') || this.currentItem.TIN.startsWith('6')) {\r\n            this.$toast(this.$t('auth.select_juridical_signature'), {type: 'error'});\r\n          } else {\r\n            this.signSelectBtnDisabled = true\r\n            await AuthService.isOrgRegistered(this.currentItem.TIN, this.currentItem.UID, this.currentItem.T)\r\n                .then((response) => {\r\n                  let payload = {\r\n                    responseData: response.data,\r\n                    currentItem: this.currentItem\r\n                  }\r\n                  this.$emit(\"keySelected\", payload);\r\n                })\r\n                .catch((e) => {\r\n                  console.log(e)\r\n                })\r\n                .finally((e) => {\r\n                  this.signSelectBtnDisabled = false\r\n                  // this.hideModal(\"openConfirmModal\");\r\n                });\r\n          }\r\n        }\r\n      }\r\n    },\r\n    async appLoad() {\r\n      let vm = this;\r\n      EIMZOClient.API_KEYS = AppSettings.api_keys;\r\n      await EIMZOClient.checkVersion(async function (major, minor) {\r\n        var newVersion = EIMZO_MAJOR * 100 + EIMZO_MINOR;\r\n        var installedVersion = parseInt(major) * 100 + parseInt(minor);\r\n        if (installedVersion < newVersion) {\r\n          // vm.loading = false;\r\n          vm.$toast(errorUpdateApp, {type: 'error'});\r\n        } else {\r\n          await EIMZOClient.installApiKeys(async function () {\r\n            await vm.uiLoadKeys()\r\n            // vm.loading = false\r\n          }, function (e, r) {\r\n            vm.loading = false;\r\n            if (r) {\r\n              vm.$toast(r, {type: 'error'});\r\n            } else {\r\n              vm.wsError(e, vm.$t('actions.error'), 'error');\r\n            }\r\n          });\r\n        }\r\n      }, function (e, r) {\r\n        vm.loading = false;\r\n        if (r) {\r\n          vm.$toast(r, {type: 'error'});\r\n        } else {\r\n          vm.$toast(vm.$t('auth.is_e_signature_installed'), {type: 'error'});\r\n        }\r\n      });\r\n      return 1;\r\n    },\r\n    async openSignModal(item) {\r\n      this.currentItem = item;\r\n      this.modalTitle = item.serialNumber + \" - \" + item.CN;\r\n      if (!this.dataToSign || !this.dataToSign.key) {\r\n        await AuthService.getKeyForLoginSign(item.TIN, item.UID, item.PINFL).then(response => {\r\n          this.dataToSignIfNot = response.data;\r\n        })\r\n      }\r\n      // this.confirmDialog = true;\r\n      /* this.uiShowConfirm({\r\n          content: this.forLogin ? this.$t('auth.continue_login_with_this_signature') : this.$t('auth.continue_reg_with_this_signature'),\r\n          callback: this.continueRegistration\r\n      }) */\r\n      this.$bvModal.msgBoxConfirm(this.forLogin ?\r\n          <h5 class=\"mb-0\">{this.$t('auth.continue_login_with_this_signature')}</h5> :\r\n          <h5 class=\"mb-0\">{this.$t('auth.continue_reg_with_this_signature')}</h5>, {\r\n        okTitle: this.$t('actions.confirm'),\r\n        cancelTitle: this.$t('actions.cancel')\r\n      })\r\n          .then(value => {\r\n            if (value) {\r\n              this.continueRegistration(value)\r\n            }\r\n          })\r\n          .catch(err => {\r\n            // An error occurred\r\n          })\r\n    },\r\n    hideModal(modal) {\r\n      this.$data[modal] = false;\r\n    },\r\n    async timestamper(signature_hex, callback, fail) {\r\n\r\n      try {\r\n        await HelperService.getTimestamper(signature_hex).then(response => {\r\n          callback(response.data.data)\r\n        });\r\n      } catch (e) {\r\n        if (e.request) {\r\n          fail(e.request.response);\r\n        }\r\n      }\r\n\r\n    },\r\n    getDateFormat(date) {\r\n      let data = new Date(date);\r\n      let month = data.getMonth() + 1\r\n      return data.getDate().toString() + \".\" + (month <= 9 ? \"0\" + month : month).toString() + \".\" + data.getFullYear().toString();\r\n    },\r\n\r\n    async getImzo() {\r\n      let vm = this;\r\n      EIMZOClient.installApiKeys(function () {\r\n        vm.uiLoadKeys();\r\n      }, function (e, r) {\r\n        if (r) {\r\n          vm.$toast(r, {type: 'error'});\r\n        } else {\r\n          vm.wsError(e);\r\n        }\r\n      });\r\n    },\r\n    async uiCreateItem(itmkey, vo) {\r\n      let vm = this;\r\n      var now = new Date();\r\n      vo.expired = dates.compare(now, vo.validTo) > 0;\r\n      var itm = document.createElement(\"option\");\r\n      itm.value = itmkey;\r\n      itm.text = vo.CN;\r\n      if (!vo.expired) {\r\n\r\n      } else {\r\n        itm.style.color = 'gray';\r\n        itm.text = itm.text + ' (срок истек)';\r\n      }\r\n      vm.keysList.push(vo);\r\n      vm.fullKeyList.push(vo);\r\n      itm.setAttribute('vo', JSON.stringify(vo));\r\n      itm.setAttribute('id', itmkey);\r\n      return itm;\r\n    },\r\n    async uiLoadKeys() {\r\n      let vm = this;\r\n      await EIMZOClient.listAllUserKeys(async function (o, i) {\r\n        var itemId = \"itm-\" + o.serialNumber + \"-\" + i;\r\n        return itemId;\r\n      }, async function (itemId, v) {\r\n        let item = await vm.uiCreateItem(itemId, v);\r\n        return item\r\n      }, function (items, firstId) {\r\n        vm.keysList = vm.fullKeyList;\r\n        //vm.uiFillCombo(items);\r\n        //vm.uiComboSelect(firstId);\r\n      }, function (e, r) {\r\n        vm.$toast(errorCAPIWS + \" : \" + e, {type: 'error'});\r\n      });\r\n      return 1\r\n    },\r\n    async wsError() {\r\n      if (e) {\r\n        this.$toast(errorCAPIWS + \" : \" + e, {type: 'error'});\r\n      } else {\r\n        this.$toast(errorBrowserWS, {type: 'error'});\r\n      }\r\n    },\r\n    uiComboSelect(itm) {\r\n      if (itm) {\r\n        var id = document.getElementById(itm);\r\n        id.setAttribute('selected', 'true');\r\n      }\r\n    },\r\n\r\n    cbChanged(c) {\r\n      document.getElementById('keyId').innerHTML = '';\r\n    },\r\n    uiClearCombo() {\r\n      var combo = document.getElementById('user_eimzo_keys');\r\n      combo.length = 0;\r\n    },\r\n\r\n    uiFillCombo(items) {\r\n      var combo = document.getElementById('user_eimzo_keys');\r\n      this.itemList = items;\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.loading = true;\r\n    this.appLoad()\r\n        .catch(e => {\r\n          this.loading = false\r\n        })\r\n    this.loading = false;\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.card {\r\n  -webkit-box-shadow: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.e-signs-wrapper-card {\r\n  .card-title,\r\n  footer {\r\n    padding: 1.25rem;\r\n  }\r\n}\r\n\r\n.e-sign-card {\r\n  -webkit-box-shadow: 0rem 0.75rem 3rem rgb(18 38 63 / 15%);\r\n  box-shadow: 0rem 0.75rem 3rem rgb(18 38 63 / 15%);\r\n}\r\n</style>"]}]}