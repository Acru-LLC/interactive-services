{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\fire-price\\modules\\price-bozor\\Confirm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\fire-price\\modules\\price-bozor\\Confirm.vue","mtime":1674799497621},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UiOw0KDQpjb25zdCBNQUlOX0FQSV9VUkwgPSAnZS1hdWN0aW9uLWluZm8nDQppbXBvcnQgYXBpU2VydmljZSBmcm9tICIuLi8uLi8uLi8uLi9zaGFyZWQvc2VydmljZXMvYXBpLnNlcnZpY2UiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJDb25maXJtIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXRlbTogbnVsbCwNCiAgICAgIGhhc05leHRQYWdlQ29udHJhY3RvcnM6IGZhbHNlLA0KICAgICAgaXNMb2FkaW5nQ29udHJhY3RvcnM6IGZhbHNlLA0KICAgICAgY29udHJhY3RvcnM6IFtdLA0KICAgICAgY29udHJhY3RvclNlYXJjaFBheWxvYWQ6IHsNCiAgICAgICAgaXRlbXNQZXJQYWdlOiAxMCwNCiAgICAgIH0sDQogICAgICBkZWJvdW5jZTogZmFsc2UsDQogICAgICBmb3JtOiB7DQogICAgICAgIGVBdWN0aW9uSW5mb0lkOiBudWxsLA0KICAgICAgICBjb250cmFjdG9ySWQ6IG51bGwsDQogICAgICB9LA0KICAgICAgc3RhdHVzZXM6IFtdDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHZpZXdJdGVtcygpIHsNCiAgICAgIGxldCByZXN1bHQgPSBbXTsNCiAgICAgIGlmICghdGhpcy5pdGVtKSByZXR1cm4gcmVzdWx0Ow0KICAgICAgZm9yIChjb25zdCBpbmRleCBpbiB0aGlzLml0ZW0pIHsNCiAgICAgICAgaWYgKHRoaXMubGFiZWxzW2luZGV4XSkgew0KICAgICAgICAgIHJlc3VsdC5wdXNoKHsNCiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsc1tpbmRleF0sDQogICAgICAgICAgICB2YWx1ZTogdGhpcy5pdGVtW2luZGV4XSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9LA0KICAgIGxhYmVscygpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGFkZHJlc3M6ICAgICB0aGlzLiR0KCdzdWJtb2R1bGVzLmludGVncmF0aW9uLmVfYXVjdGlvbl9pbmZvLmFkZHJlc3MnKSwNCiAgICAgICAgYXJlYTogICAgICAgIHRoaXMuJHQoJ3N1Ym1vZHVsZXMuaW50ZWdyYXRpb24uZV9hdWN0aW9uX2luZm8uYXJlYScpLA0KICAgICAgICBsb3Q6ICAgICAgICAgdGhpcy4kdCgnc3VibW9kdWxlcy5pbnRlZ3JhdGlvbi5lX2F1Y3Rpb25faW5mby5sb3QnKSwNCiAgICAgICAgb3Zlcl90aW1lOiAgIHRoaXMuJHQoJ3N1Ym1vZHVsZXMuaW50ZWdyYXRpb24uZV9hdWN0aW9uX2luZm8ub3Zlcl90aW1lJyksDQogICAgICAgIHByaWNlOiAgICAgICB0aGlzLiR0KCdzdWJtb2R1bGVzLmludGVncmF0aW9uLmVfYXVjdGlvbl9pbmZvLnByaWNlJyksDQogICAgICAgIHByb3BlcnR5OiAgICB0aGlzLiR0KCdzdWJtb2R1bGVzLmludGVncmF0aW9uLmVfYXVjdGlvbl9pbmZvLnByb3BlcnR5JyksDQogICAgICAgIHJlZ2lvbjogICAgICB0aGlzLiR0KCdzdWJtb2R1bGVzLmludGVncmF0aW9uLmVfYXVjdGlvbl9pbmZvLnJlZ2lvbicpLA0KICAgICAgICB3aW5fYW1vdW50OiAgdGhpcy4kdCgnc3VibW9kdWxlcy5pbnRlZ3JhdGlvbi5lX2F1Y3Rpb25faW5mby53aW5fYW1vdW50JyksDQogICAgICAgIHdpbm5lcjogICAgICB0aGlzLiR0KCdzdWJtb2R1bGVzLmludGVncmF0aW9uLmVfYXVjdGlvbl9pbmZvLndpbm5lcicpLA0KICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWRPYnNlcnZlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgZ2V0QnlJZCgpIHsNCiAgICAgIGNvbnN0IHsgZUF1Y3Rpb25JbmZvSWQgfSA9IHRoaXMuZm9ybQ0KICAgICAgYXdhaXQgYXBpU2VydmljZS5nZXQoTUFJTl9BUElfVVJMICsgJy9nZXQvJyArIGVBdWN0aW9uSW5mb0lkLCB0cnVlKQ0KICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgdGhpcy5pdGVtID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICAgIH0pDQogICAgfSwNCiAgICBjb250cmFjdG9yUmVhY2hlZEVuZE9mTGlzdChlKSB7DQogICAgICBpZiAoZSAmJiAhdGhpcy5pc0xvYWRpbmdDb250cmFjdG9ycykgew0KICAgICAgICB0aGlzLmZldGNoQ29udHJhY3RvcnMoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgZGVib3VuY2VTZWFyY2hDb250cmFjdG9ycyhzZWFyY2hUZXh0KSB7DQogICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZSk7DQogICAgICB0aGlzLmRlYm91bmNlID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7DQogICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkKHNlYXJjaFRleHQpOw0KICAgICAgfSwgMTAwMCk7DQogICAgfSwNCiAgICBmZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoa2V5d29yZCwgbWFrZUZpcnN0U2VsZWN0ZWQgPSBmYWxzZSkgew0KICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnDQogICAgICB0aGlzLmZldGNoQ29udHJhY3RvcnMobWFrZUZpcnN0U2VsZWN0ZWQpDQogICAgfSwNCiAgICBhc3luYyBmZXRjaENvbnRyYWN0b3JzKG1ha2VGaXJzdFNlbGVjdGVkKSB7DQogICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gdHJ1ZQ0KICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQoJ2NvbnRyYWN0b3InLCB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLCAnYnktY29udHJhY3RvcicsICF0aGlzLmN1c3RvbUlzTW9kZUNyZWF0ZSkNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycy5wdXNoKC4uLnJlcy5kYXRhLmxpc3QpDQogICAgICAgICAgICB0aGlzLmhhc05leHRQYWdlQ29udHJhY3RvcnMgPSByZXMuZGF0YS50b3RhbCAvIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuaXRlbXNQZXJQYWdlID4gdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5wYWdlDQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgKz0gMQ0KICAgICAgICAgICAgaWYgKG1ha2VGaXJzdFNlbGVjdGVkKSB7DQogICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucGFyZW50SWQgPSB0aGlzLmNvbnRyYWN0b3JzLmxlbmd0aCA/IHRoaXMuY29udHJhY3RvcnNbMF0uaWQgOiBudWxsDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgfSkNCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gZmFsc2UNCiAgICAgICAgICB9KQ0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxDb250cmFjdG9yKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5jb250cmFjdG9ycy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHtzZWxlY3RlZC5mdWxsTmFtZX1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBzYXZlKCkgew0KICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnZhbGlkYXRlKCkudGhlbih2YWxpZCA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGFwaVNlcnZpY2UucG9zdChNQUlOX0FQSV9VUkwgKyBgL2NvbmZpcm1gLCB0aGlzLmZvcm0sIHRydWUpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgICAgICAgIGVBdWN0aW9uSW5mb0lkOiBudWxsLA0KICAgICAgICAgICAgICBjb250cmFjdG9ySWQ6IG51bGwsDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pOw0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwgeyB0eXBlOiAnZXJyb3InIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sDQogIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5mb3JtLmVBdWN0aW9uSW5mb0lkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOw0KICAgIGF3YWl0IHRoaXMuZ2V0QnlJZCgpOw0KICB9DQp9DQo="},{"version":3,"sources":["Confirm.vue"],"names":[],"mappings":";AAwCA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Confirm.vue","sourceRoot":"src/modules/integration/modules/moliya-vazirlik","sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      :custom-title=\"$t('actions.confirm')\"\r\n      has-save-suspend\r\n      @save=\"save\"\r\n  >\r\n    <ValidationObserver ref=\"observer\" v-slot=\"{}\">\r\n      <b-row class=\"mb-3\">\r\n        <b-col md=\"5\" sm=\"12\">\r\n          <BaseMultiselectWithValidation\r\n              v-model=\"form.contractorId\"\r\n              not-required\r\n              label-on-top\r\n              preserve-search\r\n              with-create-addition\r\n              open-direction=\"bottom\"\r\n              :max-height=\"600\"\r\n              :searchable=\"true\"\r\n              :show-labels=\"false\"\r\n              :clear-on-select=\"false\"\r\n              :internal-search=\"false\"\r\n              :loading=\"isLoadingContractors\"\r\n              :label=\"$t('column.contractor')\"\r\n              :custom-label=\"customLabelContractor\"\r\n              :placeholder=\"$t('column.contractor')\"\r\n              :options=\"contractors.map((e) => e.id)\"\r\n              :has-next-page=\"hasNextPageContractors\"\r\n              @search-change=\"debounceSearchContractors\"\r\n              @reachedEndOfList=\"contractorReachedEndOfList\"\r\n          >\r\n          </BaseMultiselectWithValidation>\r\n        </b-col>\r\n        <b-col md=\"7\" sm=\"12\">\r\n          <b-table :items=\"viewItems\" hover striped thead-class=\"d-none\" bordered small/>\r\n        </b-col>\r\n      </b-row>\r\n    </ValidationObserver>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\";\r\n\r\nconst MAIN_API_URL = 'e-auction-info'\r\nimport apiService from \"../../../../shared/services/api.service\";\r\n\r\nexport default {\r\n  name: \"Confirm\",\r\n  data() {\r\n    return {\r\n      item: null,\r\n      hasNextPageContractors: false,\r\n      isLoadingContractors: false,\r\n      contractors: [],\r\n      contractorSearchPayload: {\r\n        itemsPerPage: 10,\r\n      },\r\n      debounce: false,\r\n      form: {\r\n        eAuctionInfoId: null,\r\n        contractorId: null,\r\n      },\r\n      statuses: []\r\n    }\r\n  },\r\n  computed: {\r\n    viewItems() {\r\n      let result = [];\r\n      if (!this.item) return result;\r\n      for (const index in this.item) {\r\n        if (this.labels[index]) {\r\n          result.push({\r\n            label: this.labels[index],\r\n            value: this.item[index],\r\n          });\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    labels() {\r\n      return {\r\n        address:     this.$t('submodules.integration.e_auction_info.address'),\r\n        area:        this.$t('submodules.integration.e_auction_info.area'),\r\n        lot:         this.$t('submodules.integration.e_auction_info.lot'),\r\n        over_time:   this.$t('submodules.integration.e_auction_info.over_time'),\r\n        price:       this.$t('submodules.integration.e_auction_info.price'),\r\n        property:    this.$t('submodules.integration.e_auction_info.property'),\r\n        region:      this.$t('submodules.integration.e_auction_info.region'),\r\n        win_amount:  this.$t('submodules.integration.e_auction_info.win_amount'),\r\n        winner:      this.$t('submodules.integration.e_auction_info.winner'),\r\n      }\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    }\r\n  },\r\n  methods: {\r\n    async getById() {\r\n      const { eAuctionInfoId } = this.form\r\n      await apiService.get(MAIN_API_URL + '/get/' + eAuctionInfoId, true)\r\n          .then((response) => {\r\n            this.item = response.data\r\n          })\r\n    },\r\n    contractorReachedEndOfList(e) {\r\n      if (e && !this.isLoadingContractors) {\r\n        this.fetchContractors()\r\n      }\r\n    },\r\n    async debounceSearchContractors(searchText) {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(async () => {\r\n        await this.fetchContractorsWithKeyword(searchText);\r\n      }, 1000);\r\n    },\r\n    fetchContractorsWithKeyword(keyword, makeFirstSelected = false) {\r\n      this.contractors = []\r\n      this.contractorSearchPayload.page = 1\r\n      this.contractorSearchPayload.keyword = keyword ? keyword : ''\r\n      this.fetchContractors(makeFirstSelected)\r\n    },\r\n    async fetchContractors(makeFirstSelected) {\r\n      this.isLoadingContractors = true\r\n      await crudAndListsService.searchListWithKeyword('contractor', this.contractorSearchPayload, 'by-contractor', !this.customIsModeCreate)\r\n          .then(res => {\r\n            this.contractors.push(...res.data.list)\r\n            this.hasNextPageContractors = res.data.total / this.contractorSearchPayload.itemsPerPage > this.contractorSearchPayload.page\r\n            this.contractorSearchPayload.page += 1\r\n            if (makeFirstSelected) {\r\n              this.editingItem.parentId = this.contractors.length ? this.contractors[0].id : null\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n            this.contractors = []\r\n          })\r\n          .finally(() => {\r\n            this.isLoadingContractors = false\r\n          })\r\n    },\r\n    customLabelContractor(opt) {\r\n      let selected = this.contractors.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${selected.fullName}`\r\n      }\r\n      return ``;\r\n    },\r\n    save() {\r\n      this.computedObserver.validate().then(valid => {\r\n        if (valid) {\r\n          apiService.post(MAIN_API_URL + `/confirm`, this.form, true).then(res => {\r\n            this.computedObserver.reset()\r\n            this.form = {\r\n              eAuctionInfoId: null,\r\n              contractorId: null,\r\n            };\r\n            this.$router.go(-1)\r\n            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n          })\r\n        } else {\r\n          this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  async created() {\r\n    this.form.eAuctionInfoId = this.$route.params.id;\r\n    await this.getById();\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.base-form-component {\r\n  display: block;\r\n}\r\n\r\n.base-form-component__label {\r\n  padding: 10px 0;\r\n}\r\n</style>"]}]}