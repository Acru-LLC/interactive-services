{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\references\\modules\\advertisement\\modules\\minimum_collections\\CreateOrUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\references\\modules\\advertisement\\modules\\minimum_collections\\CreateOrUpdate.vue","mtime":1667352074528},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBNQUlOX0FQSV9VUkwgPSAnZGlyZWN0b3J5L21pbmltdW0tY29sbGVjdGlvbnMnDQpjb25zdCBNQUlOX0FQSV9VUkxfRVhURU5ERUQgPSAnZGlyZWN0b3J5L2V4dGVuZGVkLW1pbmltdW0tY29sbGVjdGlvbnMnDQovKg0KKiBZT1UgTVVTVCBTRU5EIHt7IE1BSU5fQVBJX1VSTCB9fSBUTyBDUlVEX1NFUlZJQ0UgKi8NCmltcG9ydCBjcnVkQW5kTGlzdHNTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2NydWRfYW5kX2xpc3Quc2VydmljZSINCmltcG9ydCBoZWxwZXJTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2hlbHBlci5zZXJ2aWNlIg0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkNyZWF0ZU9yVXBkYXRlIiwNCiAgICAvKg0KICAgICogQ09NUE9ORU5UUyAqLw0KICAgIGNvbXBvbmVudHM6IHsNCg0KICAgIH0sDQogICAgLyoNCiAgICAqIERBVEEgKi8NCiAgICBkYXRhICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGVkaXRpbmdJdGVtOiB7fSwNCiAgICAgICAgICAgIHNob3dWb2x1bWVUeXBlc1JvdzogZmFsc2UsDQogICAgICAgICAgICBlZGl0aW5nSXRlbUZvck11bHRpcGxlOiB7fSwNCiAgICAgICAgICAgIGN1cnJlbnRFZGl0aW5nSXRlbToge30sDQogICAgICAgICAgICBtaW5pbXVtQ29sbGVjdGlvbnM6IFtdLA0KICAgICAgICAgICAgY3JlYXRlTXVsdGlwbGVNaW5pbXVtQ29sbGVjdGlvbnNNb2RhbDogZmFsc2UsDQogICAgICAgICAgICBzaW5nbGVNaW5pbXVtQ29sbGVjdGlvblVwZGF0ZU1vZGFsOiBmYWxzZSwNCiAgICAgICAgICAgIHN0YXR1c2VzOiBbXSwNCiAgICAgICAgICAgIHJlZ2lvbnM6IFtdLA0KICAgICAgICAgICAgdW5pdHM6IFtdLA0KICAgICAgICAgICAgYWRMb2NhdGlvblR5cGVzOiBbXSwNCiAgICAgICAgICAgIGFkRGVzaWduVHlwZXM6IFtdLA0KICAgICAgICAgICAgYWRWb2x1bWVUeXBlczogW10sDQogICAgICAgICAgICBkaXN0cmljdHM6IFtdLA0KICAgICAgICAgICAgYWREZXNpZ25UeXBlc0J5TWluQ29sbFR5cGVGb3JFeHRlbmRlZDogW10sDQogICAgICAgICAgICB0YWJsZUZpZWxkczogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICIjIiwNCiAgICAgICAgICAgICAgICAgICAgdGhDbGFzczogInRleHQtY2VudGVyIiwNCiAgICAgICAgICAgICAgICAgICAgdGRDbGFzczogInRleHQtY2VudGVyIiwNCiAgICAgICAgICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBrZXk6ICJpbmRleCIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uYWRfbG9jYXRpb25fdHlwZScpLCBrZXk6ICJhZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlTmFtZSIgfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uYWRfZGVzaWduX3R5cGUnKSwga2V5OiAiYWR2ZXJ0aXNlbWVudERlc2lnblR5cGVOYW1lIiB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6IHRoaXMuJHQoJ3N1Ym1vZHVsZXMuYWRfdm9sdW1lX3R5cGVzLnRpdGxlJyksIGtleTogImFkdmVydGlzZW1lbnRWb2x1bWVUeXBlTmFtZSIgfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ucmVnaW9uJyksIGtleTogInJlZ2lvbk5hbWUiIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmRpc3RyaWN0JyksIGtleTogImRpc3RyaWN0TmFtZSIgfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4udW5pdCcpLCBrZXk6ICJ1bml0U2hvcnROYW1lIiB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5taW5pbXVtX2NvbGxlY3Rpb24nKSwga2V5OiAiY29zdCIgfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uc3RhdHVzJyksIGtleTogInN0YXR1cyIgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uYWN0aW9ucycpLA0KICAgICAgICAgICAgICAgICAgICBrZXk6ICJhY3Rpb25zIiwNCiAgICAgICAgICAgICAgICAgICAgdGhDbGFzczogInRleHQtY2VudGVyIiwNCiAgICAgICAgICAgICAgICAgICAgdGRDbGFzczogInRleHQtY2VudGVyIiwNCiAgICAgICAgICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIF0sDQogICAgICAgIH0NCiAgICB9LA0KICAgIC8qDQogICAgKiBDT01QVVRFRCAqLw0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGlzTW9kZUNyZWF0ZSAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gJ0NyZWF0ZU1pbmltdW1Db2xsZWN0aW9uJw0KICAgICAgICB9LA0KICAgICAgICBpc09uRXh0ZW5kZWRQYWdlICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnVXBkYXRlTWluaW11bUNvbGxlY3Rpb25FeHRlbmRlZCcNCiAgICAgICAgfSwNCiAgICAgICAgY29tcHV0ZWRPYnNlcnZlciAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kcmVmcy5vYnNlcnZlcg0KICAgICAgICB9LA0KICAgICAgICBtdWx0aXBsZU1pbmltdW1Db2xsZWN0aW9uc0NvbXB1dGVkT2JzZXJ2ZXIgKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnNbJ211bHRpcGxlLW1pbmltdW0tY29sbGVjdGlvbnMtb2JzZXJ2ZXInXQ0KICAgICAgICB9LA0KICAgICAgICBzaW5nbGVNaW5pbXVtQ29sbGVjdGlvblVwZGF0ZUNvbXB1dGVkT2JzZXJ2ZXIgKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnNbJ3NpbmdsZS1taW5pbXVtLWNvbGxlY3Rpb24tdXBkYXRlLW9ic2VydmVyJ10NCiAgICAgICAgfQ0KICAgIH0sDQogICAgLyoNCiAgICAqIE1FVEhPRFMgKi8NCiAgICBtZXRob2RzOiB7DQogICAgICAgIGFkVm9sdW1lVHlwZXNTZWxlY3RlZCAoKSB7DQogICAgICAgICAgICB0aGlzLnNob3dWb2x1bWVUeXBlc1JvdyA9IGZhbHNlDQogICAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zaG93Vm9sdW1lVHlwZXNSb3cgPSB0cnVlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIHJlZ2lvblNlbGVjdGVkICgkZXZlbnQsIGFkTG9jYXRpb25UeXBlSWQsIGRvbnRSZXNldERpc3RyaWN0ID0gZmFsc2UpIHsNCiAgICAgICAgICAgIGlmICghZG9udFJlc2V0RGlzdHJpY3QpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpc3RyaWN0SWQgPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpc3RyaWN0cyA9IFtdDQogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlzdHJpY3RJZCA9IG51bGwNCiAgICAgICAgICAgICAgICAvLyBSRVNFVCBBRF9ERVNJR05fVFlQRQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVJZCA9IG51bGwNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVzID0gW10NCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZUlkID0gbnVsbA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gR0VUIERJU1RSSUNUUw0KICAgICAgICAgICAgaWYgKCRldmVudCkgew0KICAgICAgICAgICAgICAgIGlmIChhZExvY2F0aW9uVHlwZUlkKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEdFVCBBRF9ERVNJR05fVFlQRVMNCiAgICAgICAgICAgICAgICAgICAgaGVscGVyU2VydmljZQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmdldEFkRGVzaWduVHlwZXNCeUFkTG9jYXRpb25UeXBlSWQoYWRMb2NhdGlvblR5cGVJZCwgJGV2ZW50LmlkID8gJGV2ZW50LmlkIDogJGV2ZW50KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWREZXNpZ25UeXBlcyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01vZGVDcmVhdGUgfHwgdGhpcy5lZGl0aW5nSXRlbS5pc0V4dGVuZGVkKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGhlbHBlclNlcnZpY2UuZ2V0R2VvTG9jYXRpb25zQnlQYXJlbnRJZCgkZXZlbnQuaWQgPyAkZXZlbnQuaWQgOiAkZXZlbnQpDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzdHJpY3RzID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvKiBtYWtlRGlyZWN0b3J5QWREZXNpZ25UeXBlc0ZvckV4dGVuZGVkICgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuaXNFeHRlbmRlZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuYWREZXNpZ25UeXBlc0J5TWluQ29sbFR5cGVGb3JFeHRlbmRlZCA9IFtdDQogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5TWluaW11bUNvbGxlY3Rpb25UeXBlcykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5TWluaW11bUNvbGxlY3Rpb25UeXBlcyA9IFtdDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlNaW5pbXVtQ29sbGVjdGlvblR5cGVzLmZvckVhY2gobWluQ29sbGVjdGlvblR5cGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcE1pbkNvbGxUeXBlV2l0aERlc2lnblR5cGUgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtaW5Db2xsZWN0aW9uVHlwZUlkOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWluQ29sbGVjdGlvblR5cGVOYW1lVXo6ICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgYWREZXNpZ25UeXBlc0J5TWluQ29sbGVjdGlvblR5cGU6IFtdDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRlbXBNaW5Db2xsVHlwZVdpdGhEZXNpZ25UeXBlLCAnbWluQ29sbGVjdGlvblR5cGVJZCcsIG1pbkNvbGxlY3Rpb25UeXBlLmlkKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGVtcE1pbkNvbGxUeXBlV2l0aERlc2lnblR5cGUsICdtaW5Db2xsZWN0aW9uVHlwZU5hbWVVeicsIG1pbkNvbGxlY3Rpb25UeXBlLm5hbWVVeikNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZXMgPSBbXQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZXMuZm9yRWFjaChhZERlc2lnblR5cGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBBZERlc2lnblR5cGUgPSBPYmplY3QuYXNzaWduKHt9LCBhZERlc2lnblR5cGUpDQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTWluQ29sbFR5cGVXaXRoRGVzaWduVHlwZS5hZERlc2lnblR5cGVzQnlNaW5Db2xsZWN0aW9uVHlwZS5wdXNoKHRlbXBBZERlc2lnblR5cGUpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWREZXNpZ25UeXBlc0J5TWluQ29sbFR5cGVGb3JFeHRlbmRlZC5wdXNoKHRlbXBNaW5Db2xsVHlwZVdpdGhEZXNpZ25UeXBlKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sICovDQogICAgICAgIHVwZGF0ZVNpbmdsZU1pbmltdW1Db2xsZWN0aW9uIChlKSB7DQogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAvLyBUT0RPOiBEVUJMSUNBVEUgTElLS0EgVEVLU0hJUiAoWFVEREkgU0hVTkRBWUkgVEFCTEUgR0EgUU8nU0hJTE1BR0FOIEJPJ0xTSU4pDQogICAgICAgICAgICB0aGlzLnNpbmdsZU1pbmltdW1Db2xsZWN0aW9uVXBkYXRlQ29tcHV0ZWRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4odmFsaWQgPT4gew0KICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uaXNFeHRlbmRlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlzdHJpY3ROYW1lVXogPSB0aGlzLmRpc3RyaWN0cy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpc3RyaWN0SWQpLm5hbWVVeg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlzdHJpY3ROYW1lUnUgPSB0aGlzLmRpc3RyaWN0cy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpc3RyaWN0SWQpLm5hbWVSdQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlzdHJpY3ROYW1lTHQgPSB0aGlzLmRpc3RyaWN0cy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpc3RyaWN0SWQpLm5hbWVMdA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVOYW1lVXogPSB0aGlzLmFkRGVzaWduVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZUlkKS5uYW1lVXoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlTmFtZVJ1ID0gdGhpcy5hZERlc2lnblR5cGVzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVJZCkubmFtZVJ1DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZU5hbWVMdCA9IHRoaXMuYWREZXNpZ25UeXBlcy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlSWQpLm5hbWVMdA0KDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZU5hbWVVeiA9IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPyB0aGlzLmFkVm9sdW1lVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZUlkKS5uYW1lVXogOiBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZU5hbWVSdSA9IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPyB0aGlzLmFkVm9sdW1lVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZUlkKS5uYW1lUnUgOiBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZU5hbWVMdCA9IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPyB0aGlzLmFkVm9sdW1lVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZUlkKS5uYW1lTHQgOiBudWxsDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGVOYW1lVXogPSB0aGlzLmFkTG9jYXRpb25UeXBlcy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGVJZCkubmFtZVV6DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlTmFtZVJ1ID0gdGhpcy5hZExvY2F0aW9uVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlSWQpLm5hbWVSdQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZU5hbWVMdCA9IHRoaXMuYWRMb2NhdGlvblR5cGVzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZUlkKS5uYW1lTHQNCg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0ucmVnaW9uTmFtZVV6ID0gdGhpcy5yZWdpb25zLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0ucmVnaW9uSWQpLm5hbWVVeg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0ucmVnaW9uTmFtZVJ1ID0gdGhpcy5yZWdpb25zLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0ucmVnaW9uSWQpLm5hbWVSdQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0ucmVnaW9uTmFtZUx0ID0gdGhpcy5yZWdpb25zLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0ucmVnaW9uSWQpLm5hbWVMdA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uc3RhdHVzTmFtZVV6ID0gdGhpcy5zdGF0dXNlcy5maW5kKHMgPT4gcy5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5zdGF0dXNJZCkubmFtZVV6DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5zdGF0dXNOYW1lUnUgPSB0aGlzLnN0YXR1c2VzLmZpbmQocyA9PiBzLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnN0YXR1c0lkKS5uYW1lUnUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnN0YXR1c05hbWVMdCA9IHRoaXMuc3RhdHVzZXMuZmluZChzID0+IHMuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uc3RhdHVzSWQpLm5hbWVMdA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0udW5pdFNob3J0TmFtZVV6ID0gdGhpcy51bml0cy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnVuaXRJZCkuc2hvcnROYW1lVXoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnVuaXRTaG9ydE5hbWVSdSA9IHRoaXMudW5pdHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS51bml0SWQpLnNob3J0TmFtZVJ1DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS51bml0U2hvcnROYW1lTHQgPSB0aGlzLnVuaXRzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0udW5pdElkKS5zaG9ydE5hbWVMdA0KDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5taW5pbXVtQ29sbGVjdGlvbnMsIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmluZGV4LCB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlTWluaW11bUNvbGxlY3Rpb25VcGRhdGVNb2RhbCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHt9KQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVOYW1lVXogPSB0aGlzLmFkRGVzaWduVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZUlkKS5uYW1lVXoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlTmFtZVJ1ID0gdGhpcy5hZERlc2lnblR5cGVzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVJZCkubmFtZVJ1DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZU5hbWVMdCA9IHRoaXMuYWREZXNpZ25UeXBlcy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlSWQpLm5hbWVMdA0KDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZU5hbWVVeiA9IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPyB0aGlzLmFkVm9sdW1lVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZUlkKS5uYW1lVXogOiBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZU5hbWVSdSA9IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPyB0aGlzLmFkVm9sdW1lVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZUlkKS5uYW1lUnUgOiBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZU5hbWVMdCA9IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPyB0aGlzLmFkVm9sdW1lVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZUlkKS5uYW1lTHQgOiBudWxsDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGVOYW1lVXogPSB0aGlzLmFkTG9jYXRpb25UeXBlcy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGVJZCkubmFtZVV6DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlTmFtZVJ1ID0gdGhpcy5hZExvY2F0aW9uVHlwZXMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlSWQpLm5hbWVSdQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZU5hbWVMdCA9IHRoaXMuYWRMb2NhdGlvblR5cGVzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZUlkKS5uYW1lTHQNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnJlZ2lvbk5hbWVVeiA9IHRoaXMucmVnaW9ucy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnJlZ2lvbklkKS5uYW1lVXoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnJlZ2lvbk5hbWVSdSA9IHRoaXMucmVnaW9ucy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnJlZ2lvbklkKS5uYW1lUnUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnJlZ2lvbk5hbWVMdCA9IHRoaXMucmVnaW9ucy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnJlZ2lvbklkKS5uYW1lTHQNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnN0YXR1c05hbWVVeiA9IHRoaXMuc3RhdHVzZXMuZmluZChzID0+IHMuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uc3RhdHVzSWQpLm5hbWVVeg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0uc3RhdHVzTmFtZVJ1ID0gdGhpcy5zdGF0dXNlcy5maW5kKHMgPT4gcy5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5zdGF0dXNJZCkubmFtZVJ1DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5zdGF0dXNOYW1lTHQgPSB0aGlzLnN0YXR1c2VzLmZpbmQocyA9PiBzLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnN0YXR1c0lkKS5uYW1lTHQNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnVuaXRTaG9ydE5hbWVVeiA9IHRoaXMudW5pdHMuZmluZChlbCA9PiBlbC5pZCA9PSB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS51bml0SWQpLnNob3J0TmFtZVV6DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS51bml0U2hvcnROYW1lUnUgPSB0aGlzLnVuaXRzLmZpbmQoZWwgPT4gZWwuaWQgPT0gdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0udW5pdElkKS5zaG9ydE5hbWVSdQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0udW5pdFNob3J0TmFtZUx0ID0gdGhpcy51bml0cy5maW5kKGVsID0+IGVsLmlkID09IHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLnVuaXRJZCkuc2hvcnROYW1lTHQNCg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMubWluaW11bUNvbGxlY3Rpb25zLCB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5pbmRleCwgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZU1pbmltdW1Db2xsZWN0aW9uVXBkYXRlTW9kYWwgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB7fSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzJyksIHsgdHlwZTogJ2Vycm9yJyB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgYWRMb2NhdGlvblR5cGVTZWxlY3RlZCAoYWRMb2NhdGlvblR5cGVPYmplY3RPcklkLCBkb250UmVzZXRBZERlc2lnblR5cGUgPSBmYWxzZSkgew0KICAgICAgICAgICAgaWYgKCFkb250UmVzZXRBZERlc2lnblR5cGUpIHsNCiAgICAgICAgICAgICAgICAvLyBSRVNFVCBBRF9ERVNJR05fVFlQRQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVJZCA9IG51bGwNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVzID0gW10NCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZUlkID0gbnVsbA0KICAgICAgICAgICAgICAgIC8vIFJFU0VUIEFEX1ZPTFVNRV9UWVBFDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZUlkID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZXMgPSBbXQ0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPSBudWxsDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoYWRMb2NhdGlvblR5cGVPYmplY3RPcklkKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RlQ3JlYXRlID8gKHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5yZWdpb24gJiYgdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnJlZ2lvbi5pZCkgOiB0aGlzLmVkaXRpbmdJdGVtLnJlZ2lvbklkKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEdFVCBBRF9ERVNJR05fVFlQRVMNCiAgICAgICAgICAgICAgICAgICAgaGVscGVyU2VydmljZQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmdldEFkRGVzaWduVHlwZXNCeUFkTG9jYXRpb25UeXBlSWQoYWRMb2NhdGlvblR5cGVPYmplY3RPcklkLmlkID8gYWRMb2NhdGlvblR5cGVPYmplY3RPcklkLmlkIDogYWRMb2NhdGlvblR5cGVPYmplY3RPcklkLCB0aGlzLmlzTW9kZUNyZWF0ZSA/IHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5yZWdpb24uaWQgOiB0aGlzLmVkaXRpbmdJdGVtLnJlZ2lvbklkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWREZXNpZ25UeXBlcyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBHRVQgQURfVk9MVU1FX1RZUEVTDQogICAgICAgICAgICAgICAgaGVscGVyU2VydmljZQ0KICAgICAgICAgICAgICAgICAgICAuZ2V0QWRWb2x1bWVUeXBlc0J5QWRMb2NhdGlvblR5cGVJZChhZExvY2F0aW9uVHlwZU9iamVjdE9ySWQuaWQgPyBhZExvY2F0aW9uVHlwZU9iamVjdE9ySWQuaWQgOiBhZExvY2F0aW9uVHlwZU9iamVjdE9ySWQpDQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRWb2x1bWVUeXBlcyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGVkaXRJdGVtIChpdGVtLCBpbmRleCkgew0KICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKQ0KICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY3VycmVudEVkaXRpbmdJdGVtLCAnaW5kZXgnLCBpbmRleCkNCiAgICAgICAgICAgIHRoaXMuc2luZ2xlTWluaW11bUNvbGxlY3Rpb25VcGRhdGVNb2RhbCA9IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlSXRlbSAoaXRlbSwgaW5kZXgpIHsNCiAgICAgICAgICAgIHRoaXMuJGJ2TW9kYWwubXNnQm94Q29uZmlybSh0aGlzLiR0KCdtZXNzYWdlcy5kZWxldGVfdGl0bGUnKSwgew0KICAgICAgICAgICAgICAgIG9rVGl0bGU6IHRoaXMuJHQoJ2FjdGlvbnMuY29uZmlybScpLA0KICAgICAgICAgICAgICAgIGNhbmNlbFRpdGxlOiB0aGlzLiR0KCdhY3Rpb25zLmNhbmNlbCcpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC50aGVuKHZhbHVlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbmltdW1Db2xsZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyBBbiBlcnJvciBvY2N1cnJlZA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGNyZWF0ZU9yVXBkYXRlSXRlbSAobW9kZSkgew0KICAgICAgICAgICAgaWYgKG1vZGUgPT0gJ2NyZWF0ZScpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIudmFsaWRhdGUoKS50aGVuKHZhbGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUgPSBPYmplY3QuYXNzaWduKHt9LCB7fSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVTdGF0dXMgPSB0aGlzLnN0YXR1c2VzLmZpbmQoZWwgPT4gZWwuY29kZSA9PSAnQUNUSVZFJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVTdGF0dXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuc3RhdHVzSWQgPSBhY3RpdmVTdGF0dXMuaWQNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTXVsdGlwbGVNaW5pbXVtQ29sbGVjdGlvbnNNb2RhbCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzJyksIHsgdHlwZTogJ2Vycm9yJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHJlc2V0RWRpdGluZ0l0ZW0gKCkgew0KICAgICAgICAgICAgbGV0IGRlY2lzaW9uTnVtYmVyID0gdGhpcy5lZGl0aW5nSXRlbS5kZWNpc2lvbk51bWJlcg0KICAgICAgICAgICAgbGV0IGRlY2lzaW9uRGF0ZSA9IHRoaXMuZWRpdGluZ0l0ZW0uZGVjaXNpb25EYXRlDQogICAgICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSB0aGlzLmVkaXRpbmdJdGVtLmRlc2NyaXB0aW9uDQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwge30pDQogICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5lZGl0aW5nSXRlbSwgJ2RlY2lzaW9uTnVtYmVyJywgZGVjaXNpb25OdW1iZXIpDQogICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5lZGl0aW5nSXRlbSwgJ2RlY2lzaW9uRGF0ZScsIGRlY2lzaW9uRGF0ZSkNCiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmVkaXRpbmdJdGVtLCAnZGVzY3JpcHRpb24nLCBkZXNjcmlwdGlvbikNCiAgICAgICAgfSwNCiAgICAgICAgY3JlYXRlTWluQ29sbGVjdGlvbnNGcm9tQWREZXNpZ25UeXBlc0Zvck11bHRpcGxlU2F2ZUZuIChlYWNoRGlzdHJpY3QgPSBmYWxzZSwgZWFjaFZvbHVtZVR5cGUgPSBmYWxzZSkgew0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlcy5mb3JFYWNoKGFkRGVzaWduVHlwZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5yZXNldEVkaXRpbmdJdGVtKCkNCiAgICAgICAgICAgICAgICBpZiAoZWFjaERpc3RyaWN0KSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlzdHJpY3RJZCA9IGVhY2hEaXN0cmljdC5pZA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpc3RyaWN0TmFtZVV6ID0gZWFjaERpc3RyaWN0Lm5hbWVVeg0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpc3RyaWN0TmFtZVJ1ID0gZWFjaERpc3RyaWN0Lm5hbWVSdQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpc3RyaWN0TmFtZUx0ID0gZWFjaERpc3RyaWN0Lm5hbWVMdA0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uaXNFeHRlbmRlZCA9IHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5pc0V4dGVuZGVkDQoNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlSWQgPSBhZERlc2lnblR5cGUuaWQNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlTmFtZVV6ID0gYWREZXNpZ25UeXBlLm5hbWVVeg0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVOYW1lUnUgPSBhZERlc2lnblR5cGUubmFtZVJ1DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZU5hbWVMdCA9IGFkRGVzaWduVHlwZS5uYW1lTHQNCg0KICAgICAgICAgICAgICAgIGlmIChlYWNoVm9sdW1lVHlwZSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPSBlYWNoVm9sdW1lVHlwZS5pZA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlTmFtZVV6ID0gZWFjaFZvbHVtZVR5cGUubmFtZVV6DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudFZvbHVtZVR5cGVOYW1lUnUgPSBlYWNoVm9sdW1lVHlwZS5uYW1lUnUNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZU5hbWVMdCA9IGVhY2hWb2x1bWVUeXBlLm5hbWVMdA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmNvc3QgPSBlYWNoVm9sdW1lVHlwZS5jb3N0DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5jb3N0ID0gYWREZXNpZ25UeXBlLmNvc3QNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGVJZCA9IHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlLmlkDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlTmFtZVV6ID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGUubmFtZVV6DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlTmFtZVJ1ID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGUubmFtZVJ1DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlTmFtZUx0ID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGUubmFtZUx0DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5yZWdpb25JZCA9IHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5yZWdpb24uaWQNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnJlZ2lvbk5hbWVVeiA9IHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5yZWdpb24ubmFtZVV6DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5yZWdpb25OYW1lUnUgPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUucmVnaW9uLm5hbWVSdQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucmVnaW9uTmFtZUx0ID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnJlZ2lvbi5uYW1lTHQNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnN0YXR1c0lkID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnN0YXR1c0lkDQoNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnN0YXR1c05hbWVVeiA9IHRoaXMuc3RhdHVzZXMuZmluZChzID0+IHMuaWQgPT0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnN0YXR1c0lkKS5uYW1lVXoNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnN0YXR1c05hbWVSdSA9IHRoaXMuc3RhdHVzZXMuZmluZChzID0+IHMuaWQgPT0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnN0YXR1c0lkKS5uYW1lUnUNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnN0YXR1c05hbWVMdCA9IHRoaXMuc3RhdHVzZXMuZmluZChzID0+IHMuaWQgPT0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnN0YXR1c0lkKS5uYW1lTHQNCg0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0udW5pdElkID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnVuaXQuaWQNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnVuaXRTaG9ydE5hbWVVeiA9IHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS51bml0LnNob3J0TmFtZVV6DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS51bml0U2hvcnROYW1lUnUgPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUudW5pdC5zaG9ydE5hbWVSdQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0udW5pdFNob3J0TmFtZUx0ID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnVuaXQuc2hvcnROYW1lTHQNCg0KICAgICAgICAgICAgICAgIGxldCBjb3BpZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0aW5nSXRlbSkNCg0KICAgICAgICAgICAgICAgIGNvcGllZEl0ZW0uZGVjaXNpb25OdW1iZXIgPSB0aGlzLmVkaXRpbmdJdGVtLmRlY2lzaW9uTnVtYmVyDQogICAgICAgICAgICAgICAgY29waWVkSXRlbS5jcmVhdGVkRGF0ZSA9IHRoaXMuZWRpdGluZ0l0ZW0uY3JlYXRlZERhdGUNCiAgICAgICAgICAgICAgICBjb3BpZWRJdGVtLmRlc2NyaXB0aW9uID0gdGhpcy5lZGl0aW5nSXRlbS5kZXNjcmlwdGlvbg0KDQogICAgICAgICAgICAgICAgdGhpcy5taW5pbXVtQ29sbGVjdGlvbnMucHVzaChjb3BpZWRJdGVtKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgc2F2ZU11bHRpcGxlTWluaW11bUNvbGxlY3Rpb25zIChlKSB7DQogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQoNCiAgICAgICAgICAgIHRoaXMubXVsdGlwbGVNaW5pbXVtQ29sbGVjdGlvbnNDb21wdXRlZE9ic2VydmVyLnZhbGlkYXRlKCkudGhlbih2YWxpZCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5pc0V4dGVuZGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlzdHJpY3RzLmZvckVhY2goZGlzdHJpY3QgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudFZvbHVtZVR5cGVzICYmIHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudFZvbHVtZVR5cGVzLmZvckVhY2godm9sdW1lVHlwZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU1pbkNvbGxlY3Rpb25zRnJvbUFkRGVzaWduVHlwZXNGb3JNdWx0aXBsZVNhdmVGbihkaXN0cmljdCwgdm9sdW1lVHlwZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU1pbkNvbGxlY3Rpb25zRnJvbUFkRGVzaWduVHlwZXNGb3JNdWx0aXBsZVNhdmVGbihkaXN0cmljdCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Vm9sdW1lVHlwZXMgJiYgdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlcy5mb3JFYWNoKHZvbHVtZVR5cGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU1pbkNvbGxlY3Rpb25zRnJvbUFkRGVzaWduVHlwZXNGb3JNdWx0aXBsZVNhdmVGbihmYWxzZSwgdm9sdW1lVHlwZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU1pbkNvbGxlY3Rpb25zRnJvbUFkRGVzaWduVHlwZXNGb3JNdWx0aXBsZVNhdmVGbigpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZXMuZm9yRWFjaChhZERlc2lnblR5cGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRFZGl0aW5nSXRlbSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZUlkID0gYWREZXNpZ25UeXBlLmlkDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50RGVzaWduVHlwZU5hbWVVeiA9IGFkRGVzaWduVHlwZS5uYW1lVXoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlTmFtZVJ1ID0gYWREZXNpZ25UeXBlLm5hbWVSdQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVOYW1lTHQgPSBhZERlc2lnblR5cGUubmFtZUx0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5jb3N0ID0gYWREZXNpZ25UeXBlLmNvc3QNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZUlkID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGUuaWQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGVOYW1lVXogPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZS5uYW1lVXoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGVOYW1lUnUgPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZS5uYW1lUnUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRMb2NhdGlvblR5cGVOYW1lTHQgPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZS5uYW1lTHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnJlZ2lvbklkID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnJlZ2lvbi5pZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucmVnaW9uTmFtZVV6ID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnJlZ2lvbi5uYW1lVXoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnJlZ2lvbk5hbWVSdSA9IHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS5yZWdpb24ubmFtZVJ1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5yZWdpb25OYW1lTHQgPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUucmVnaW9uLm5hbWVMdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uc3RhdHVzSWQgPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuc3RhdHVzSWQNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uc3RhdHVzTmFtZVV6ID0gdGhpcy5zdGF0dXNlcy5maW5kKHMgPT4gcy5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuc3RhdHVzSWQpLm5hbWVVeg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uc3RhdHVzTmFtZVJ1ID0gdGhpcy5zdGF0dXNlcy5maW5kKHMgPT4gcy5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuc3RhdHVzSWQpLm5hbWVSdQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uc3RhdHVzTmFtZUx0ID0gdGhpcy5zdGF0dXNlcy5maW5kKHMgPT4gcy5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuc3RhdHVzSWQpLm5hbWVMdA0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS51bml0SWQgPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUudW5pdC5pZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0udW5pdFNob3J0TmFtZVV6ID0gdGhpcy5lZGl0aW5nSXRlbUZvck11bHRpcGxlLnVuaXQuc2hvcnROYW1lVXoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnVuaXRTaG9ydE5hbWVSdSA9IHRoaXMuZWRpdGluZ0l0ZW1Gb3JNdWx0aXBsZS51bml0LnNob3J0TmFtZVJ1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS51bml0U2hvcnROYW1lTHQgPSB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUudW5pdC5zaG9ydE5hbWVMdA0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvcGllZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmVkaXRpbmdJdGVtKQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkSXRlbS5kZWNpc2lvbk51bWJlciA9IHRoaXMuZWRpdGluZ0l0ZW0uZGVjaXNpb25OdW1iZXINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3BpZWRJdGVtLmNyZWF0ZWREYXRlID0gdGhpcy5lZGl0aW5nSXRlbS5jcmVhdGVkRGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcGllZEl0ZW0uZGVzY3JpcHRpb24gPSB0aGlzLmVkaXRpbmdJdGVtLmRlc2NyaXB0aW9uDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbmltdW1Db2xsZWN0aW9ucy5wdXNoKGNvcGllZEl0ZW0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KSAqLw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTXVsdGlwbGVNaW5pbXVtQ29sbGVjdGlvbnNNb2RhbCA9IGZhbHNlDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwgeyB0eXBlOiAnZXJyb3InIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBjdXN0b21MYWJlbEFkTG9jYXRpb25UeXBlIChvcHQpIHsNCiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuYWRMb2NhdGlvblR5cGVzLmZpbmQoZSA9PiBlLmlkID09IChvcHQuaWQgPyBvcHQuaWQgOiBvcHQpKTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgICAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLm5hbWVSdSwNCiAgICAgICAgICAgICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsDQogICAgICAgICAgICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH1gDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYGA7DQogICAgICAgIH0sDQogICAgICAgIGN1c3RvbUxhYmVsRGlzdHJpY3QgKG9wdCkgew0KICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5kaXN0cmljdHMuZmluZChlID0+IGUuaWQgPT0gKG9wdC5pZCA/IG9wdC5pZCA6IG9wdCkpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICAgICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxBZERlc2lnblR5cGUgKG9wdCkgew0KICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5hZERlc2lnblR5cGVzLmZpbmQoZSA9PiBlLmlkID09IChvcHQuaWQgPyBvcHQuaWQgOiBvcHQpKTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgICAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLm5hbWVSdSwNCiAgICAgICAgICAgICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsDQogICAgICAgICAgICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH1gDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYGA7DQogICAgICAgIH0sDQogICAgICAgIGN1c3RvbUxhYmVsQWRWb2x1bWVUeXBlIChvcHQpIHsNCiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuYWRWb2x1bWVUeXBlcy5maW5kKGUgPT4gZS5pZCA9PSAob3B0LmlkID8gb3B0LmlkIDogb3B0KSk7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgICAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVeiwNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9YA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGBgOw0KICAgICAgICB9LA0KICAgICAgICBjdXN0b21MYWJlbFJlZ2lvbiAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLnJlZ2lvbnMuZmluZChlID0+IGUuaWQgPT0gKG9wdC5pZCA/IG9wdC5pZCA6IG9wdCkpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICAgICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxVbml0IChvcHQpIHsNCiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMudW5pdHMuZmluZChlID0+IGUuaWQgPT0gKG9wdC5pZCA/IG9wdC5pZCA6IG9wdCkpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICAgICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgdHJlZUNsb3NlZCAodmVlTmFtZSkgew0KICAgICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnJlZnNbdmVlTmFtZV0udmFsaWRhdGUoKTsNCiAgICAgICAgfSwNCiAgICAgICAgbm9ybWFsaXplciAobm9kZSkgew0KICAgICAgICAgICAgaWYgKCFub2RlLmNoaWxkcmVuIHx8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgZGVsZXRlIG5vZGUuY2hpbGRyZW4NCiAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICBpZDogbm9kZS5pZCwNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lUnU6IG5vZGUubmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUx0OiBub2RlLm5hbWVMdCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVVejogbm9kZS5uYW1lVXosDQogICAgICAgICAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgaWQ6IG5vZGUuaWQsDQogICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgIG5hbWVSdTogbm9kZS5uYW1lUnUsDQogICAgICAgICAgICAgICAgICAgIG5hbWVMdDogbm9kZS5uYW1lTHQsDQogICAgICAgICAgICAgICAgICAgIG5hbWVVejogbm9kZS5uYW1lVXosDQogICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwID8gbm9kZS5jaGlsZHJlbiA6IFtdLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzYXZlICgpIHsNCiAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4odmFsaWQgPT4gew0KICAgICAgICAgICAgICAgIGlmICh2YWxpZCAmJiAodGhpcy5taW5pbXVtQ29sbGVjdGlvbnMubGVuZ3RoIHx8ICF0aGlzLmlzTW9kZUNyZWF0ZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5pbXVtQ29sbGVjdGlvbnMuZm9yRWFjaChjID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGMuZGVjaXNpb25OdW1iZXIgPSB0aGlzLmVkaXRpbmdJdGVtLmRlY2lzaW9uTnVtYmVyDQogICAgICAgICAgICAgICAgICAgICAgICBjLmNyZWF0ZWREYXRlID0gdGhpcy5lZGl0aW5nSXRlbS5jcmVhdGVkRGF0ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgYy5kZXNjcmlwdGlvbiA9IHRoaXMuZWRpdGluZ0l0ZW0uZGVzY3JpcHRpb24NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UudXBkYXRlKHRoaXMuaXNPbkV4dGVuZGVkUGFnZSA/IE1BSU5fQVBJX1VSTF9FWFRFTkRFRCA6IE1BSU5fQVBJX1VSTCwgdGhpcy5lZGl0aW5nSXRlbSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHt9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UuY3JlYXRlKE1BSU5fQVBJX1VSTCwgdGhpcy5taW5pbXVtQ29sbGVjdGlvbnMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVzZXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB7fSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7IHR5cGU6ICdzdWNjZXNzJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5maWxsX3JlcXVpcmVkX2ZpZWxkcycpLCB7IHR5cGU6ICdlcnJvcicgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIC8qDQogICAgKiBDUkVBVEVEICovDQogICAgYXN5bmMgY3JlYXRlZCAoKSB7DQogICAgICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gNTAwOw0KICAgICAgICBpZiAodGhpcy5pc01vZGVDcmVhdGUpIHsNCiAgICAgICAgICAgIGF3YWl0IGNydWRBbmRMaXN0c1NlcnZpY2UuZ2V0RW1wdHkoTUFJTl9BUElfVVJMKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBhd2FpdCBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEJ5SWQodGhpcy5pc09uRXh0ZW5kZWRQYWdlID8gTUFJTl9BUElfVVJMX0VYVEVOREVEIDogTUFJTl9BUElfVVJMLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgLy8gR0VUIFNUQVRVU0VTDQogICAgICAgIGF3YWl0IGhlbHBlclNlcnZpY2UuZ2V0UmVmQnlDb2RlKCdzdGF0dXMnKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c2VzID0gcmVzLmRhdGEuY2hpbGRyZW4NCiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01vZGVDcmVhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZVN0YXR1cyA9IHRoaXMuc3RhdHVzZXMuZmluZChlbCA9PiBlbC5jb2RlID09ICdBQ1RJVkUnKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlU3RhdHVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnN0YXR1c0lkID0gYWN0aXZlU3RhdHVzLmlkDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtRm9yTXVsdGlwbGUuc3RhdHVzSWQgPSBhY3RpdmVTdGF0dXMuaWQNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgLy8gR0VUIFJFR0lPTlMNCiAgICAgICAgYXdhaXQgaGVscGVyU2VydmljZS5mZXRjaFJlZ2lvbnMoKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lvbnMgPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uU2VsZWN0ZWQodGhpcy5lZGl0aW5nSXRlbS5yZWdpb25JZCwgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlSWQsIHRydWUpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICB9KQ0KDQogICAgICAgIC8vIEdFVCBBRF9MT0NBVElPTl9UWVBFUw0KICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlDQogICAgICAgICAgICAuc2VhcmNoTGlzdCgnZGlyZWN0b3J5L2FkdmVydGlzZW1lbnQtbG9jYXRpb24tdHlwZXMnLCB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKQ0KICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuYWRMb2NhdGlvblR5cGVzID0gcmVzLmRhdGEubGlzdDsNCiAgICAgICAgICAgICAgICB0aGlzLmFkTG9jYXRpb25UeXBlU2VsZWN0ZWQodGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlSWQsIHRydWUpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICB9KQ0KDQogICAgICAgIC8vIEdFVCBVTklUUw0KICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlDQogICAgICAgICAgICAuc2VhcmNoTGlzdCgnZGlyZWN0b3J5L3VuaXRzJywgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCkNCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnVuaXRzID0gcmVzLmRhdGEubGlzdDsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgLy8gR0VUIE1JTklNVU1fQ09MTEVDVElPTl9UWVBFUw0KICAgICAgICAvKiBjcnVkQW5kTGlzdHNTZXJ2aWNlDQogICAgICAgICAgICAuc2VhcmNoTGlzdCgnZGlyZWN0b3J5L21pbmltdW0tY29sbGVjdGlvbi10eXBlcycsIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5taW5pbXVtQ29sbGVjdGlvblR5cGVzID0gcmVzLmRhdGEubGlzdDsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgIH0pICovDQogICAgfQ0KfQ0K"},{"version":3,"sources":["CreateOrUpdate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAg2BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateOrUpdate.vue","sourceRoot":"src/modules/references/modules/advertisement/modules/minimum_collections","sourcesContent":["<template>\r\n    <base-create-or-update-wrapper\r\n        @save=\"save\"\r\n        has-save-suspend\r\n        :custom-title=\"isModeCreate ? $t('actions.create') : $t('actions.update')\"\r\n    >\r\n        <ValidationObserver\r\n            ref=\"observer\"\r\n            v-slot=\"{}\"\r\n        >\r\n            <b-row class=\"mb-3 justify-content-end\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                    :lg=\"isModeCreate ? '4' : '6'\"\r\n                >\r\n                    <BaseInputWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.decisionNumber\"\r\n                        :label=\"$t('column.decision_number')\"\r\n                        :placeholder=\"$t('column.decision_number')\"\r\n                    />\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                    :lg=\"isModeCreate ? '4' : '6'\"\r\n                >\r\n                    <BaseDatePickerWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        :label=\"$t('column.decision_date')\"\r\n                        :placeholder=\"$t('column.decision_date')\"\r\n                        v-model=\"editingItem.decisionDate\"\r\n                        lang=\"ru\"\r\n                    ></BaseDatePickerWithValidation>\r\n                </b-col>\r\n\r\n                <!-- MINIMUM_COLLECTION_TYPE SHOW ONLY ON UPDATE -->\r\n                <b-col\r\n                    v-if=\"!isModeCreate && editingItem.isExtended\"\r\n                    class=\"mt-3\"\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <!-- <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.directoryMinimumCollectionTypeId\"\r\n                        :options=\"minimumCollectionTypes.map(el => el.id)\"\r\n                        :label=\"$t('submodules.minimum_collection_types.title')\"\r\n                        :custom-label=\"customLabelMinimumCollectionType\"\r\n                        :placeholder=\"$t('submodules.minimum_collection_types.title')\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    /> -->\r\n                    <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.districtId\"\r\n                        :options=\"districts.map(e => e.id)\"\r\n                        :label=\"$t('column.district')\"\r\n                        :custom-label=\"customLabelDistrict\"\r\n                        :placeholder=\"$t('column.district')\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    />\r\n                </b-col>\r\n\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                    :lg=\"isModeCreate ? '4' : '6'\"\r\n                    :class=\"isModeCreate ? 'mt-md-2 mt-lg-0' : 'mt-3'\"\r\n                >\r\n                    <BaseTextareaWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.description\"\r\n                        max-rows=\"6\"\r\n                        :label=\"$t('column.reason')\"\r\n                        :placeholder=\"$t('column.reason')\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <!-- IF UPDATE MODE -->\r\n            <template v-if=\"!isModeCreate\">\r\n                <b-row class=\"mb-3\">\r\n                    <b-col\r\n                        sm=\"12\"\r\n                        md=\"6\"\r\n                    >\r\n                        <BaseMultiselectWithValidation\r\n                            rules=\"required\"\r\n                            class=\"required\"\r\n                            v-model=\"editingItem.regionId\"\r\n                            @select=\"regionSelected($event, editingItem.directoryAdvertisementLocationTypeId)\"\r\n                            :options=\"regions.map(el => el.id)\"\r\n                            :label=\"$t('column.region')\"\r\n                            :custom-label=\"customLabelRegion\"\r\n                            :placeholder=\"$t('column.region')\"\r\n                            open-direction=\"bottom\"\r\n                            :max-height=\"600\"\r\n                            :show-labels=\"false\"\r\n                        />\r\n                    </b-col>\r\n                    <b-col\r\n                        sm=\"12\"\r\n                        md=\"6\"\r\n                    >\r\n                        <BaseMultiselectWithValidation\r\n                            rules=\"required\"\r\n                            class=\"required\"\r\n                            v-model=\"editingItem.unitId\"\r\n                            :options=\"units.map(el => el.id)\"\r\n                            :label=\"$t('column.unit')\"\r\n                            :custom-label=\"customLabelUnit\"\r\n                            :placeholder=\"$t('column.unit')\"\r\n                            open-direction=\"bottom\"\r\n                            :max-height=\"600\"\r\n                            :show-labels=\"false\"\r\n                        />\r\n                    </b-col>\r\n                </b-row>\r\n\r\n                <b-row class=\"mb-3\">\r\n                    <b-col\r\n                        sm=\"12\"\r\n                        md=\"6\"\r\n                    >\r\n                        <BaseMultiselectWithValidation\r\n                            rules=\"required\"\r\n                            class=\"required\"\r\n                            v-model=\"editingItem.directoryAdvertisementLocationTypeId\"\r\n                            @select=\"adLocationTypeSelected\"\r\n                            :options=\"adLocationTypes.map(el => el.id)\"\r\n                            :label=\"$t('column.ad_location_type')\"\r\n                            :custom-label=\"customLabelAdLocationType\"\r\n                            :placeholder=\"$t('column.ad_location_type')\"\r\n                            open-direction=\"bottom\"\r\n                            :max-height=\"600\"\r\n                            :show-labels=\"false\"\r\n                        />\r\n                    </b-col>\r\n                    <b-col\r\n                        sm=\"12\"\r\n                        md=\"6\"\r\n                    >\r\n                        <BaseMultiselectWithValidation\r\n                            rules=\"required\"\r\n                            class=\"required\"\r\n                            v-model=\"editingItem.directoryAdvertisementDesignTypeId\"\r\n                            :options=\"adDesignTypes.map(el => el.id)\"\r\n                            :label=\"$t('column.ad_design_type')\"\r\n                            :custom-label=\"customLabelAdDesignType\"\r\n                            :placeholder=\"$t('column.ad_design_type')\"\r\n                            open-direction=\"bottom\"\r\n                            :max-height=\"600\"\r\n                            :show-labels=\"false\"\r\n                        />\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row class=\"mb-3\">\r\n                    <b-col\r\n                        sm=\"12\"\r\n                        md=\"6\"\r\n                    >\r\n                        <BaseInputWithValidation\r\n                            rules=\"required|positiveNotZero\"\r\n                            class=\"required\"\r\n                            v-model=\"editingItem.cost\"\r\n                            :label=\"$t('column.minimum_collection')\"\r\n                            :placeholder=\"$t('column.minimum_collection')\"\r\n                        />\r\n                    </b-col>\r\n                    <b-col\r\n                        sm=\"12\"\r\n                        md=\"6\"\r\n                    >\r\n                        <BaseMultiselectWithValidation\r\n                            not-required\r\n                            v-model=\"editingItem.directoryAdvertisementVolumeTypeId\"\r\n                            :options=\"adVolumeTypes.map(el => el.id)\"\r\n                            :label=\"$t('submodules.ad_volume_types.title')\"\r\n                            :custom-label=\"customLabelAdVolumeType\"\r\n                            :placeholder=\"$t('submodules.ad_volume_types.title')\"\r\n                            open-direction=\"bottom\"\r\n                            :max-height=\"600\"\r\n                            :show-labels=\"false\"\r\n                        />\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row class=\"mb-3\">\r\n                    <b-col\r\n                        sm=\"12\"\r\n                        md=\"6\"\r\n                    >\r\n                        <BaseSelectWithValidation\r\n                            v-model=\"editingItem.statusId\"\r\n                            class=\"required\"\r\n                            rules=\"required\"\r\n                            :label=\"$t('column.status')\"\r\n                            value-field=\"id\"\r\n                        >\r\n                            <template #first>\r\n                                <b-form-select-option\r\n                                    :value=\"null\"\r\n                                    disabled\r\n                                >{{ $t('column.status') }}</b-form-select-option>\r\n                                <b-form-select-option\r\n                                    v-for=\"(status, index) in statuses\"\r\n                                    :key=\"`${status}-${index}`\"\r\n                                    :value=\"status.id\"\r\n                                >{{\r\n                                  getName({\r\n                                    nameRu: status.nameRu,\r\n                                    nameLt: status.nameLt,\r\n                                    nameUz: status.nameUz,\r\n                                  })\r\n                                }}\r\n                                </b-form-select-option>\r\n                            </template>\r\n                        </BaseSelectWithValidation>\r\n                    </b-col>\r\n                    <b-col\r\n                        sm=\"12\"\r\n                        md=\"6\"\r\n                    >\r\n                    </b-col>\r\n                </b-row>\r\n            </template>\r\n\r\n            <!-- IF CREATE MODE -->\r\n            <template v-else>\r\n                <hr>\r\n                <div class=\"inner-title d-flex justify-content-between align-items-center mb-3\">\r\n                    <span></span>\r\n                    <div>\r\n                        <h5 class=\"m-0\">{{ $t('column.minimum_collections') }} <span class=\"text-danger\">*</span></h5>\r\n                    </div>\r\n                    <b-btn\r\n                        variant=\"info\"\r\n                        class=\"text-capitalize\"\r\n                        @click=\"createOrUpdateItem('create')\"\r\n                    >\r\n                        {{ $t(\"actions.create\") }}\r\n                    </b-btn>\r\n                </div>\r\n                <!-- Table data -->\r\n                <b-table\r\n                    :items=\"minimumCollections\"\r\n                    :fields=\"tableFields\"\r\n                    id=\"my-table\"\r\n                    class=\"custom-b-table\"\r\n                    responsive\r\n                    striped\r\n                    bordered\r\n                    small\r\n                    hover\r\n                    show-empty\r\n                >\r\n                    <!-- NUMBER OF ITEM -->\r\n                    <template #cell(index)=\"data\">\r\n                        {{ util_paginate(data.index, var_default_search_payload.page, var_default_search_payload.itemsPerPage) }}\r\n                    </template>\r\n\r\n                    <!-- NAME -->\r\n                    <template #cell(name)=\"data\">\r\n                        <div class=\"d-flex justify-content-between\">\r\n                            <p\r\n                                class=\"mb-0 d-flex align-items-center\"\r\n                                style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                            ><span class=\"badge bg-primary\">ЎЗ</span> : <span> {{ data.item.nameUz }}</span></p>\r\n                            <p\r\n                                class=\"mb-0 d-flex align-items-center\"\r\n                                style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                            ><span class=\"badge bg-primary\">O'Z</span> &nbsp;:&nbsp; <span> {{ data.item.nameLt }}</span></p>\r\n                            <p\r\n                                class=\"mb-0 d-flex align-items-center\"\r\n                                style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                            ><span class=\"badge bg-primary\">РУ</span> &nbsp;:&nbsp; <span> {{ data.item.nameRu }}</span></p>\r\n                        </div>\r\n                    </template>\r\n\r\n                    <!-- ADVERTISEMENT LOCATION TYPE NAME -->\r\n                    <template #cell(advertisementLocationTypeName)=\"data\">\r\n                        <p>\r\n                            {{\r\n                        getName({\r\n                          nameRu: data.item.directoryAdvertisementLocationTypeNameRu,\r\n                          nameLt: data.item.directoryAdvertisementLocationTypeNameLt,\r\n                          nameUz: data.item.directoryAdvertisementLocationTypeNameUz,\r\n                        })\r\n                      }}\r\n                        </p>\r\n                    </template>\r\n\r\n                    <!-- ADVERTISEMENT DESIGN TYPE NAME -->\r\n                    <template #cell(advertisementDesignTypeName)=\"data\">\r\n                        <p>\r\n                            {{\r\n                        getName({\r\n                          nameRu: data.item.directoryAdvertisementDesignTypeNameRu,\r\n                          nameLt: data.item.directoryAdvertisementDesignTypeNameLt,\r\n                          nameUz: data.item.directoryAdvertisementDesignTypeNameUz,\r\n                        })\r\n                      }}\r\n                        </p>\r\n                    </template>\r\n\r\n                    <!-- ADVERTISEMENT VOLUME TYPE NAME -->\r\n                    <template #cell(advertisementVolumeTypeName)=\"data\">\r\n                        <p>\r\n                            {{\r\n                        getName({\r\n                          nameRu: data.item.directoryAdvertisementVolumeTypeNameRu,\r\n                          nameLt: data.item.directoryAdvertisementVolumeTypeNameLt,\r\n                          nameUz: data.item.directoryAdvertisementVolumeTypeNameUz,\r\n                        })\r\n                      }}\r\n                        </p>\r\n                    </template>\r\n\r\n                    <!-- UNIT SHORT NAME -->\r\n                    <template #cell(unitShortName)=\"data\">\r\n                        <p>\r\n                            {{\r\n                        getName({\r\n                          nameRu: data.item.unitShortNameRu,\r\n                          nameLt: data.item.unitShortNameLt,\r\n                          nameUz: data.item.unitShortNameUz,\r\n                        })\r\n                      }}\r\n                        </p>\r\n                    </template>\r\n\r\n                    <!-- REGION -->\r\n                    <template #cell(regionName)=\"data\">\r\n                        <p>\r\n                            {{\r\n                        getName({\r\n                          nameRu: data.item.regionNameRu,\r\n                          nameLt: data.item.regionNameLt,\r\n                          nameUz: data.item.regionNameUz,\r\n                        })\r\n                      }}\r\n                        </p>\r\n                    </template>\r\n\r\n                    <!-- DISTRICT -->\r\n                    <template #cell(districtName)=\"data\">\r\n                        <p>\r\n                            {{\r\n                        getName({\r\n                          nameRu: data.item.districtNameRu,\r\n                          nameLt: data.item.districtNameLt,\r\n                          nameUz: data.item.districtNameUz,\r\n                        })\r\n                      }}\r\n                        </p>\r\n                    </template>\r\n\r\n                    <!-- STATUS -->\r\n                    <template #cell(status)=\"data\">\r\n                        <p>\r\n                            {{\r\n                        getName({\r\n                          nameRu: data.item.statusNameRu,\r\n                          nameLt: data.item.statusNameLt,\r\n                          nameUz: data.item.statusNameUz,\r\n                        })\r\n                      }}\r\n                        </p>\r\n                    </template>\r\n\r\n                    <!-- ACTIONS -->\r\n                    <template #cell(actions)=\"data\">\r\n                        <div class=\"general-table__actions d-flex justify-content-center\">\r\n                            <b-btn\r\n                                variant=\"link\"\r\n                                class=\"text-decoration-none p-0\"\r\n                                style=\"font-size: 1.2rem; margin-right: 1rem;\"\r\n                                @click=\"editItem(data.item, data.index)\"\r\n                            >\r\n                                <i class=\"mdi mdi-circle-edit-outline edit\"></i>\r\n                            </b-btn>\r\n                            <b-btn\r\n                                variant=\"link\"\r\n                                class=\"text-decoration-none p-0 text-danger\"\r\n                                style=\"font-size: 1.2rem;\"\r\n                                @click=\"deleteItem(data.item, data.index)\"\r\n                            >\r\n                                <i class=\"mdi mdi-trash-can delete\"></i>\r\n                            </b-btn>\r\n                        </div>\r\n                    </template>\r\n\r\n                    <!-- EMPTY SLOT -->\r\n                    <template #empty=\"\">\r\n                        <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                    </template>\r\n                </b-table>\r\n\r\n                <!-- MULTIPLE - MINIMUM_COLLECTIONS CREATE MODAL -->\r\n                <b-modal\r\n                    v-model=\"createMultipleMinimumCollectionsModal\"\r\n                    id=\"create-multiple-min-collections-modal-id\"\r\n                    size=\"xl\"\r\n                    :title=\"$t('column.minimum_collections')\"\r\n                    title-class=\"font-18\"\r\n                    :ok-title=\"$t('actions.save')\"\r\n                    ok-variant=\"success\"\r\n                    @ok=\"saveMultipleMinimumCollections\"\r\n                    :cancel-title=\"$t('actions.cancel')\"\r\n                    cancel-variant=\"danger\"\r\n                    no-close-on-backdrop\r\n                    no-close-on-esc\r\n                >\r\n                    <ValidationObserver\r\n                        ref=\"multiple-minimum-collections-observer\"\r\n                        v-slot=\"{}\"\r\n                    >\r\n                        <b-row class=\"mb-3\">\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"editingItemForMultiple.region\"\r\n                                    @select=\"regionSelected($event, editingItemForMultiple.directoryAdvertisementLocationType ? editingItemForMultiple.directoryAdvertisementLocationType.id : null)\"\r\n                                    :options=\"regions\"\r\n                                    :label=\"$t('column.region')\"\r\n                                    :custom-label=\"customLabelRegion\"\r\n                                    :placeholder=\"$t('column.region')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <div class=\"form-check form-check-right\">\r\n                                    <input\r\n                                        v-model=\"editingItemForMultiple.isExtended\"\r\n                                        class=\"form-check-input\"\r\n                                        type=\"checkbox\"\r\n                                        id=\"formCheckIsLegal\"\r\n                                    />\r\n                                    <label\r\n                                        class=\"form-check-label font-weight-normal\"\r\n                                        for=\"formCheckIsLegal\"\r\n                                    >\r\n                                        {{ $t('actions.select_district') }}\r\n                                    </label>\r\n                                </div>\r\n\r\n                            </b-col>\r\n                        </b-row>\r\n                        <!-- DISTRICTS ROW -->\r\n                        <b-row\r\n                            v-if=\"editingItemForMultiple.isExtended\"\r\n                            class=\"mb-3\"\r\n                        >\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    multiple\r\n                                    :close-on-select=\"false\"\r\n                                    :hide-selected=\"true\"\r\n                                    track-by=\"id\"\r\n                                    v-model=\"editingItemForMultiple.districts\"\r\n                                    :options=\"districts\"\r\n                                    :label=\"$t('column.district')\"\r\n                                    :custom-label=\"customLabelDistrict\"\r\n                                    :placeholder=\"$t('column.district')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n\r\n                            </b-col>\r\n                        </b-row>\r\n\r\n                        <b-row class=\"mb-3\">\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"editingItemForMultiple.directoryAdvertisementLocationType\"\r\n                                    @select=\"adLocationTypeSelected\"\r\n                                    :options=\"adLocationTypes\"\r\n                                    :label=\"$t('column.ad_location_type')\"\r\n                                    :custom-label=\"customLabelAdLocationType\"\r\n                                    :placeholder=\"$t('column.ad_location_type')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"editingItemForMultiple.unit\"\r\n                                    :options=\"units\"\r\n                                    :label=\"$t('column.unit')\"\r\n                                    :custom-label=\"customLabelUnit\"\r\n                                    :placeholder=\"$t('column.unit')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mb-3\">\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    multiple\r\n                                    :close-on-select=\"false\"\r\n                                    :hide-selected=\"true\"\r\n                                    v-model=\"editingItemForMultiple.directoryAdvertisementDesignTypes\"\r\n                                    track-by=\"id\"\r\n                                    :options=\"adDesignTypes\"\r\n                                    :label=\"$t('column.ad_design_type')\"\r\n                                    :custom-label=\"customLabelAdDesignType\"\r\n                                    :placeholder=\"$t('column.ad_design_type')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseSelectWithValidation\r\n                                    v-model=\"editingItemForMultiple.statusId\"\r\n                                    class=\"required\"\r\n                                    rules=\"required\"\r\n                                    :label=\"$t('column.status')\"\r\n                                    value-field=\"id\"\r\n                                >\r\n                                    <template #first>\r\n                                        <b-form-select-option\r\n                                            :value=\"null\"\r\n                                            disabled\r\n                                        >{{ $t('column.status') }}</b-form-select-option>\r\n                                        <b-form-select-option\r\n                                            v-for=\"(status, index) in statuses\"\r\n                                            :key=\"`${status}-${index}`\"\r\n                                            :value=\"status.id\"\r\n                                        >{{\r\n                                          getName({\r\n                                            nameRu: status.nameRu,\r\n                                            nameLt: status.nameLt,\r\n                                            nameUz: status.nameUz,\r\n                                          })\r\n                                        }}\r\n                                        </b-form-select-option>\r\n                                    </template>\r\n                                </BaseSelectWithValidation>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mb-3\">\r\n                            <b-col cols=\"12\">\r\n                                <BaseMultiselectWithValidation\r\n                                    not-required\r\n                                    multiple\r\n                                    :close-on-select=\"false\"\r\n                                    :hide-selected=\"true\"\r\n                                    v-model=\"editingItemForMultiple.directoryAdvertisementVolumeTypes\"\r\n                                    track-by=\"id\"\r\n                                    @input=\"adVolumeTypesSelected\"\r\n                                    :options=\"adVolumeTypes\"\r\n                                    :label=\"$t('submodules.ad_volume_types.title')\"\r\n                                    :custom-label=\"customLabelAdVolumeType\"\r\n                                    :placeholder=\"$t('submodules.ad_volume_types.title')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                        </b-row>\r\n                        <!-- MINIMAL COLLECTION COSTS  -->\r\n                        <!-- EXTENDED WITH AD_VOLUME_TYPES -->\r\n                        <b-row v-if=\"showVolumeTypesRow\">\r\n                            <hr v-if=\"showVolumeTypesRow\">\r\n                            <b-col\r\n                                v-for=\"(adVolumeType, index) in editingItemForMultiple.directoryAdvertisementVolumeTypes\"\r\n                                :key=\"`ad-volume-type-${index}`\"\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                                class=\"mb-3\"\r\n                            >\r\n                                <BaseInputWithValidation\r\n                                    rules=\"required|positiveNotZero\"\r\n                                    class=\"required\"\r\n                                    v-model=\"adVolumeType.cost\"\r\n                                    :label=\"`(M) ${adVolumeType.nameUz}`\"\r\n                                />\r\n                            </b-col>\r\n                        </b-row>\r\n                        <!-- NOT_EXTENDED -->\r\n                        <b-row v-else>\r\n                            <hr v-if=\"editingItemForMultiple.directoryAdvertisementDesignTypes ? editingItemForMultiple.directoryAdvertisementDesignTypes.length : false\">\r\n                            <b-col\r\n                                v-for=\"(adDesignType, index) in editingItemForMultiple.directoryAdvertisementDesignTypes\"\r\n                                :key=\"`ad-design-type-${index}`\"\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                                class=\"mb-3\"\r\n                            >\r\n                                <BaseInputWithValidation\r\n                                    rules=\"required|positiveNotZero\"\r\n                                    class=\"required\"\r\n                                    v-model=\"adDesignType.cost\"\r\n                                    :label=\"`(M) ${adDesignType.nameUz}`\"\r\n                                    :placeholder=\"adDesignType.nameUz\"\r\n                                />\r\n                            </b-col>\r\n                        </b-row>\r\n                    </ValidationObserver>\r\n                </b-modal>\r\n\r\n                <!-- SINGLE - MINIMUM_COLLECTION UPDATE (ON CREATE MODE) MODAL -->\r\n                <b-modal\r\n                    v-model=\"singleMinimumCollectionUpdateModal\"\r\n                    id=\"update-single-modal-id\"\r\n                    size=\"xl\"\r\n                    title=\"Minimal o'zgartirish\"\r\n                    title-class=\"font-18\"\r\n                    :ok-title=\"$t('actions.save')\"\r\n                    ok-variant=\"success\"\r\n                    @ok=\"updateSingleMinimumCollection\"\r\n                    :cancel-title=\"$t('actions.cancel')\"\r\n                    cancel-variant=\"danger\"\r\n                    no-close-on-backdrop\r\n                    no-close-on-esc\r\n                >\r\n                    <ValidationObserver\r\n                        ref=\"single-minimum-collection-update-observer\"\r\n                        v-slot=\"{}\"\r\n                    >\r\n                        <b-row class=\"mb-3\">\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"currentEditingItem.regionId\"\r\n                                    @select=\"regionSelected($event, currentEditingItem.directoryAdvertisementLocationTypeId)\"\r\n                                    :options=\"regions.map(el => el.id)\"\r\n                                    :label=\"$t('column.region')\"\r\n                                    :custom-label=\"customLabelRegion\"\r\n                                    :placeholder=\"$t('column.region')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"currentEditingItem.unitId\"\r\n                                    :options=\"units.map(el => el.id)\"\r\n                                    :label=\"$t('column.unit')\"\r\n                                    :custom-label=\"customLabelUnit\"\r\n                                    :placeholder=\"$t('column.unit')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                        </b-row>\r\n\r\n                        <!-- MINIMUM_COLLECTION_TYPES ROW -->\r\n                        <b-row\r\n                            v-if=\"currentEditingItem.isExtended\"\r\n                            class=\"mb-3\"\r\n                        >\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <!-- <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"currentEditingItem.directoryMinimumCollectionTypeId\"\r\n                                    :options=\"minimumCollectionTypes.map(el => el.id)\"\r\n                                    :label=\"$t('submodules.minimum_collection_types.title')\"\r\n                                    :custom-label=\"customLabelMinimumCollectionType\"\r\n                                    :placeholder=\"$t('submodules.minimum_collection_types.title')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                /> -->\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"currentEditingItem.districtId\"\r\n                                    :options=\"districts.map(e => e.id)\"\r\n                                    :label=\"$t('column.district')\"\r\n                                    :custom-label=\"customLabelDistrict\"\r\n                                    :placeholder=\"$t('column.district')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n\r\n                            </b-col>\r\n                        </b-row>\r\n\r\n                        <b-row class=\"mb-3\">\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"currentEditingItem.directoryAdvertisementLocationTypeId\"\r\n                                    @select=\"adLocationTypeSelected\"\r\n                                    :options=\"adLocationTypes.map(el => el.id)\"\r\n                                    :label=\"$t('column.ad_location_type')\"\r\n                                    :custom-label=\"customLabelAdLocationType\"\r\n                                    :placeholder=\"$t('column.ad_location_type')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseSelectWithValidation\r\n                                    v-model=\"currentEditingItem.statusId\"\r\n                                    class=\"required\"\r\n                                    rules=\"required\"\r\n                                    :label=\"$t('column.status')\"\r\n                                    value-field=\"id\"\r\n                                >\r\n                                    <template #first>\r\n                                        <b-form-select-option\r\n                                            :value=\"null\"\r\n                                            disabled\r\n                                        >{{ $t('column.status') }}</b-form-select-option>\r\n                                        <b-form-select-option\r\n                                            v-for=\"(status, index) in statuses\"\r\n                                            :key=\"`${status}-${index}`\"\r\n                                            :value=\"status.id\"\r\n                                        >{{\r\n                                          getName({\r\n                                            nameRu: status.nameRu,\r\n                                            nameLt: status.nameLt,\r\n                                            nameUz: status.nameUz,\r\n                                          })\r\n                                        }}\r\n                                        </b-form-select-option>\r\n                                    </template>\r\n                                </BaseSelectWithValidation>\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mb-3\">\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    rules=\"required\"\r\n                                    class=\"required\"\r\n                                    v-model=\"currentEditingItem.directoryAdvertisementDesignTypeId\"\r\n                                    :options=\"adDesignTypes.map(el => el.id)\"\r\n                                    :label=\"$t('column.ad_design_type')\"\r\n                                    :custom-label=\"customLabelAdDesignType\"\r\n                                    :placeholder=\"$t('column.ad_design_type')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseInputWithValidation\r\n                                    rules=\"required|positiveNotZero\"\r\n                                    class=\"required\"\r\n                                    v-model=\"currentEditingItem.cost\"\r\n                                    :label=\"$t('column.minimum_collection')\"\r\n                                    :placeholder=\"$t('column.minimum_collection')\"\r\n                                />\r\n                            </b-col>\r\n                        </b-row>\r\n                        <b-row class=\"mb-3\">\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                                <BaseMultiselectWithValidation\r\n                                    not-required\r\n                                    v-model=\"currentEditingItem.directoryAdvertisementVolumeTypeId\"\r\n                                    :options=\"adVolumeTypes.map(el => el.id)\"\r\n                                    :label=\"$t('submodules.ad_volume_types.title')\"\r\n                                    :custom-label=\"customLabelAdVolumeType\"\r\n                                    :placeholder=\"$t('submodules.ad_volume_types.title')\"\r\n                                    open-direction=\"bottom\"\r\n                                    :max-height=\"600\"\r\n                                    :show-labels=\"false\"\r\n                                />\r\n                            </b-col>\r\n                            <b-col\r\n                                sm=\"12\"\r\n                                md=\"6\"\r\n                            >\r\n                            </b-col>\r\n                        </b-row>\r\n                    </ValidationObserver>\r\n                </b-modal>\r\n            </template>\r\n\r\n        </ValidationObserver>\r\n    </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'directory/minimum-collections'\r\nconst MAIN_API_URL_EXTENDED = 'directory/extended-minimum-collections'\r\n/*\r\n* YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport helperService from \"@/shared/services/helper.service\"\r\n\r\nexport default {\r\n    name: \"CreateOrUpdate\",\r\n    /*\r\n    * COMPONENTS */\r\n    components: {\r\n\r\n    },\r\n    /*\r\n    * DATA */\r\n    data () {\r\n        return {\r\n            editingItem: {},\r\n            showVolumeTypesRow: false,\r\n            editingItemForMultiple: {},\r\n            currentEditingItem: {},\r\n            minimumCollections: [],\r\n            createMultipleMinimumCollectionsModal: false,\r\n            singleMinimumCollectionUpdateModal: false,\r\n            statuses: [],\r\n            regions: [],\r\n            units: [],\r\n            adLocationTypes: [],\r\n            adDesignTypes: [],\r\n            adVolumeTypes: [],\r\n            districts: [],\r\n            adDesignTypesByMinCollTypeForExtended: [],\r\n            tableFields: [\r\n                {\r\n                    label: \"#\",\r\n                    thClass: \"text-center\",\r\n                    tdClass: \"text-center\",\r\n                    sortable: false,\r\n                    key: \"index\",\r\n                },\r\n                { label: this.$t('column.ad_location_type'), key: \"advertisementLocationTypeName\" },\r\n                { label: this.$t('column.ad_design_type'), key: \"advertisementDesignTypeName\" },\r\n                { label: this.$t('submodules.ad_volume_types.title'), key: \"advertisementVolumeTypeName\" },\r\n                { label: this.$t('column.region'), key: \"regionName\" },\r\n                { label: this.$t('column.district'), key: \"districtName\" },\r\n                { label: this.$t('column.unit'), key: \"unitShortName\" },\r\n                { label: this.$t('column.minimum_collection'), key: \"cost\" },\r\n                { label: this.$t('column.status'), key: \"status\" },\r\n                {\r\n                    label: this.$t('column.actions'),\r\n                    key: \"actions\",\r\n                    thClass: \"text-center\",\r\n                    tdClass: \"text-center\",\r\n                    sortable: false\r\n                },\r\n            ],\r\n        }\r\n    },\r\n    /*\r\n    * COMPUTED */\r\n    computed: {\r\n        isModeCreate () {\r\n            return this.$route.name === 'CreateMinimumCollection'\r\n        },\r\n        isOnExtendedPage () {\r\n            return this.$route.name === 'UpdateMinimumCollectionExtended'\r\n        },\r\n        computedObserver () {\r\n            return this.$refs.observer\r\n        },\r\n        multipleMinimumCollectionsComputedObserver () {\r\n            return this.$refs['multiple-minimum-collections-observer']\r\n        },\r\n        singleMinimumCollectionUpdateComputedObserver () {\r\n            return this.$refs['single-minimum-collection-update-observer']\r\n        }\r\n    },\r\n    /*\r\n    * METHODS */\r\n    methods: {\r\n        adVolumeTypesSelected () {\r\n            this.showVolumeTypesRow = false\r\n            if (this.editingItemForMultiple.directoryAdvertisementVolumeTypes.length > 0) {\r\n                this.showVolumeTypesRow = true\r\n            }\r\n        },\r\n        async regionSelected ($event, adLocationTypeId, dontResetDistrict = false) {\r\n            if (!dontResetDistrict) {\r\n                this.editingItem.districtId = null\r\n                this.editingItemForMultiple.districts = []\r\n                this.currentEditingItem.districtId = null\r\n                // RESET AD_DESIGN_TYPE\r\n                this.editingItem.directoryAdvertisementDesignTypeId = null\r\n                this.editingItemForMultiple.directoryAdvertisementDesignTypes = []\r\n                this.currentEditingItem.directoryAdvertisementDesignTypeId = null\r\n            }\r\n            // GET DISTRICTS\r\n            if ($event) {\r\n                if (adLocationTypeId) {\r\n                    // GET AD_DESIGN_TYPES\r\n                    helperService\r\n                        .getAdDesignTypesByAdLocationTypeId(adLocationTypeId, $event.id ? $event.id : $event)\r\n                        .then((res) => {\r\n                            this.adDesignTypes = res.data\r\n                        })\r\n                        .catch(e => {\r\n                            console.log(e)\r\n                        })\r\n                }\r\n                if (this.isModeCreate || this.editingItem.isExtended) {\r\n                    await helperService.getGeoLocationsByParentId($event.id ? $event.id : $event)\r\n                        .then(res => {\r\n                            this.districts = res.data\r\n                        })\r\n                        .catch(e => {\r\n                            console.log(e)\r\n                        })\r\n                }\r\n            }\r\n        },\r\n        /* makeDirectoryAdDesignTypesForExtended () {\r\n            if (this.editingItemForMultiple.isExtended) {\r\n                this.adDesignTypesByMinCollTypeForExtended = []\r\n                if (!this.editingItemForMultiple.directoryMinimumCollectionTypes) {\r\n                    this.editingItemForMultiple.directoryMinimumCollectionTypes = []\r\n                }\r\n                this.editingItemForMultiple.directoryMinimumCollectionTypes.forEach(minCollectionType => {\r\n                    let tempMinCollTypeWithDesignType = {\r\n                        minCollectionTypeId: null,\r\n                        minCollectionTypeNameUz: '',\r\n                        adDesignTypesByMinCollectionType: []\r\n                    }\r\n                    this.$set(tempMinCollTypeWithDesignType, 'minCollectionTypeId', minCollectionType.id)\r\n                    this.$set(tempMinCollTypeWithDesignType, 'minCollectionTypeNameUz', minCollectionType.nameUz)\r\n\r\n                    if (!this.editingItemForMultiple.directoryAdvertisementDesignTypes) {\r\n                        this.editingItemForMultiple.directoryAdvertisementDesignTypes = []\r\n                    }\r\n                    this.editingItemForMultiple.directoryAdvertisementDesignTypes.forEach(adDesignType => {\r\n                        let tempAdDesignType = Object.assign({}, adDesignType)\r\n                        tempMinCollTypeWithDesignType.adDesignTypesByMinCollectionType.push(tempAdDesignType)\r\n                    })\r\n                    this.adDesignTypesByMinCollTypeForExtended.push(tempMinCollTypeWithDesignType)\r\n                })\r\n            }\r\n        }, */\r\n        updateSingleMinimumCollection (e) {\r\n            e.preventDefault();\r\n            // TODO: DUBLICATE LIKKA TEKSHIR (XUDDI SHUNDAYI TABLE GA QO'SHILMAGAN BO'LSIN)\r\n            this.singleMinimumCollectionUpdateComputedObserver.validate().then(valid => {\r\n                if (valid) {\r\n                    if (this.currentEditingItem.isExtended) {\r\n                        this.currentEditingItem.districtNameUz = this.districts.find(el => el.id == this.currentEditingItem.districtId).nameUz\r\n                        this.currentEditingItem.districtNameRu = this.districts.find(el => el.id == this.currentEditingItem.districtId).nameRu\r\n                        this.currentEditingItem.districtNameLt = this.districts.find(el => el.id == this.currentEditingItem.districtId).nameLt\r\n                        this.currentEditingItem.directoryAdvertisementDesignTypeNameUz = this.adDesignTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementDesignTypeId).nameUz\r\n                        this.currentEditingItem.directoryAdvertisementDesignTypeNameRu = this.adDesignTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementDesignTypeId).nameRu\r\n                        this.currentEditingItem.directoryAdvertisementDesignTypeNameLt = this.adDesignTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementDesignTypeId).nameLt\r\n\r\n                        this.currentEditingItem.directoryAdvertisementVolumeTypeNameUz = this.currentEditingItem.directoryAdvertisementVolumeTypeId ? this.adVolumeTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementVolumeTypeId).nameUz : null\r\n                        this.currentEditingItem.directoryAdvertisementVolumeTypeNameRu = this.currentEditingItem.directoryAdvertisementVolumeTypeId ? this.adVolumeTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementVolumeTypeId).nameRu : null\r\n                        this.currentEditingItem.directoryAdvertisementVolumeTypeNameLt = this.currentEditingItem.directoryAdvertisementVolumeTypeId ? this.adVolumeTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementVolumeTypeId).nameLt : null\r\n\r\n                        this.currentEditingItem.directoryAdvertisementLocationTypeNameUz = this.adLocationTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementLocationTypeId).nameUz\r\n                        this.currentEditingItem.directoryAdvertisementLocationTypeNameRu = this.adLocationTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementLocationTypeId).nameRu\r\n                        this.currentEditingItem.directoryAdvertisementLocationTypeNameLt = this.adLocationTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementLocationTypeId).nameLt\r\n\r\n                        this.currentEditingItem.regionNameUz = this.regions.find(el => el.id == this.currentEditingItem.regionId).nameUz\r\n                        this.currentEditingItem.regionNameRu = this.regions.find(el => el.id == this.currentEditingItem.regionId).nameRu\r\n                        this.currentEditingItem.regionNameLt = this.regions.find(el => el.id == this.currentEditingItem.regionId).nameLt\r\n                        this.currentEditingItem.statusNameUz = this.statuses.find(s => s.id == this.currentEditingItem.statusId).nameUz\r\n                        this.currentEditingItem.statusNameRu = this.statuses.find(s => s.id == this.currentEditingItem.statusId).nameRu\r\n                        this.currentEditingItem.statusNameLt = this.statuses.find(s => s.id == this.currentEditingItem.statusId).nameLt\r\n                        this.currentEditingItem.unitShortNameUz = this.units.find(el => el.id == this.currentEditingItem.unitId).shortNameUz\r\n                        this.currentEditingItem.unitShortNameRu = this.units.find(el => el.id == this.currentEditingItem.unitId).shortNameRu\r\n                        this.currentEditingItem.unitShortNameLt = this.units.find(el => el.id == this.currentEditingItem.unitId).shortNameLt\r\n\r\n                        this.$set(this.minimumCollections, this.currentEditingItem.index, this.currentEditingItem)\r\n                        this.singleMinimumCollectionUpdateModal = false\r\n                        this.currentEditingItem = Object.assign({}, {})\r\n                    } else {\r\n                        this.currentEditingItem.directoryAdvertisementDesignTypeNameUz = this.adDesignTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementDesignTypeId).nameUz\r\n                        this.currentEditingItem.directoryAdvertisementDesignTypeNameRu = this.adDesignTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementDesignTypeId).nameRu\r\n                        this.currentEditingItem.directoryAdvertisementDesignTypeNameLt = this.adDesignTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementDesignTypeId).nameLt\r\n\r\n                        this.currentEditingItem.directoryAdvertisementVolumeTypeNameUz = this.currentEditingItem.directoryAdvertisementVolumeTypeId ? this.adVolumeTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementVolumeTypeId).nameUz : null\r\n                        this.currentEditingItem.directoryAdvertisementVolumeTypeNameRu = this.currentEditingItem.directoryAdvertisementVolumeTypeId ? this.adVolumeTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementVolumeTypeId).nameRu : null\r\n                        this.currentEditingItem.directoryAdvertisementVolumeTypeNameLt = this.currentEditingItem.directoryAdvertisementVolumeTypeId ? this.adVolumeTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementVolumeTypeId).nameLt : null\r\n\r\n                        this.currentEditingItem.directoryAdvertisementLocationTypeNameUz = this.adLocationTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementLocationTypeId).nameUz\r\n                        this.currentEditingItem.directoryAdvertisementLocationTypeNameRu = this.adLocationTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementLocationTypeId).nameRu\r\n                        this.currentEditingItem.directoryAdvertisementLocationTypeNameLt = this.adLocationTypes.find(el => el.id == this.currentEditingItem.directoryAdvertisementLocationTypeId).nameLt\r\n                        this.currentEditingItem.regionNameUz = this.regions.find(el => el.id == this.currentEditingItem.regionId).nameUz\r\n                        this.currentEditingItem.regionNameRu = this.regions.find(el => el.id == this.currentEditingItem.regionId).nameRu\r\n                        this.currentEditingItem.regionNameLt = this.regions.find(el => el.id == this.currentEditingItem.regionId).nameLt\r\n                        this.currentEditingItem.statusNameUz = this.statuses.find(s => s.id == this.currentEditingItem.statusId).nameUz\r\n                        this.currentEditingItem.statusNameRu = this.statuses.find(s => s.id == this.currentEditingItem.statusId).nameRu\r\n                        this.currentEditingItem.statusNameLt = this.statuses.find(s => s.id == this.currentEditingItem.statusId).nameLt\r\n                        this.currentEditingItem.unitShortNameUz = this.units.find(el => el.id == this.currentEditingItem.unitId).shortNameUz\r\n                        this.currentEditingItem.unitShortNameRu = this.units.find(el => el.id == this.currentEditingItem.unitId).shortNameRu\r\n                        this.currentEditingItem.unitShortNameLt = this.units.find(el => el.id == this.currentEditingItem.unitId).shortNameLt\r\n\r\n                        this.$set(this.minimumCollections, this.currentEditingItem.index, this.currentEditingItem)\r\n                        this.singleMinimumCollectionUpdateModal = false\r\n                        this.currentEditingItem = Object.assign({}, {})\r\n                    }\r\n                } else {\r\n                    this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                }\r\n            });\r\n        },\r\n        async adLocationTypeSelected (adLocationTypeObjectOrId, dontResetAdDesignType = false) {\r\n            if (!dontResetAdDesignType) {\r\n                // RESET AD_DESIGN_TYPE\r\n                this.editingItem.directoryAdvertisementDesignTypeId = null\r\n                this.editingItemForMultiple.directoryAdvertisementDesignTypes = []\r\n                this.currentEditingItem.directoryAdvertisementDesignTypeId = null\r\n                // RESET AD_VOLUME_TYPE\r\n                this.editingItem.directoryAdvertisementVolumeTypeId = null\r\n                this.editingItemForMultiple.directoryAdvertisementVolumeTypes = []\r\n                this.currentEditingItem.directoryAdvertisementVolumeTypeId = null\r\n            }\r\n            if (adLocationTypeObjectOrId) {\r\n                if (this.isModeCreate ? (this.editingItemForMultiple.region && this.editingItemForMultiple.region.id) : this.editingItem.regionId) {\r\n                    // GET AD_DESIGN_TYPES\r\n                    helperService\r\n                        .getAdDesignTypesByAdLocationTypeId(adLocationTypeObjectOrId.id ? adLocationTypeObjectOrId.id : adLocationTypeObjectOrId, this.isModeCreate ? this.editingItemForMultiple.region.id : this.editingItem.regionId)\r\n                        .then((res) => {\r\n                            this.adDesignTypes = res.data\r\n                        })\r\n                        .catch(e => {\r\n                            console.log(e)\r\n                        })\r\n                }\r\n                // GET AD_VOLUME_TYPES\r\n                helperService\r\n                    .getAdVolumeTypesByAdLocationTypeId(adLocationTypeObjectOrId.id ? adLocationTypeObjectOrId.id : adLocationTypeObjectOrId)\r\n                    .then((res) => {\r\n                        this.adVolumeTypes = res.data\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e)\r\n                    })\r\n            }\r\n        },\r\n        editItem (item, index) {\r\n            this.currentEditingItem = Object.assign({}, item)\r\n            this.$set(this.currentEditingItem, 'index', index)\r\n            this.singleMinimumCollectionUpdateModal = true\r\n        },\r\n        deleteItem (item, index) {\r\n            this.$bvModal.msgBoxConfirm(this.$t('messages.delete_title'), {\r\n                okTitle: this.$t('actions.confirm'),\r\n                cancelTitle: this.$t('actions.cancel')\r\n            })\r\n                .then(value => {\r\n                    if (value) {\r\n                        this.minimumCollections.splice(index, 1)\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    // An error occurred\r\n                })\r\n        },\r\n        createOrUpdateItem (mode) {\r\n            if (mode == 'create') {\r\n                this.computedObserver.validate().then(valid => {\r\n                    if (valid) {\r\n                        this.editingItemForMultiple = Object.assign({}, {})\r\n                        let activeStatus = this.statuses.find(el => el.code == 'ACTIVE')\r\n                        if (activeStatus) {\r\n                            this.editingItemForMultiple.statusId = activeStatus.id\r\n                        }\r\n                        this.createMultipleMinimumCollectionsModal = true\r\n                    } else {\r\n                        this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        resetEditingItem () {\r\n            let decisionNumber = this.editingItem.decisionNumber\r\n            let decisionDate = this.editingItem.decisionDate\r\n            let description = this.editingItem.description\r\n            this.editingItem = Object.assign({}, {})\r\n            this.$set(this.editingItem, 'decisionNumber', decisionNumber)\r\n            this.$set(this.editingItem, 'decisionDate', decisionDate)\r\n            this.$set(this.editingItem, 'description', description)\r\n        },\r\n        createMinCollectionsFromAdDesignTypesForMultipleSaveFn (eachDistrict = false, eachVolumeType = false) {\r\n            this.editingItemForMultiple.directoryAdvertisementDesignTypes.forEach(adDesignType => {\r\n                this.resetEditingItem()\r\n                if (eachDistrict) {\r\n                    this.editingItem.districtId = eachDistrict.id\r\n                    this.editingItem.districtNameUz = eachDistrict.nameUz\r\n                    this.editingItem.districtNameRu = eachDistrict.nameRu\r\n                    this.editingItem.districtNameLt = eachDistrict.nameLt\r\n                }\r\n\r\n                this.editingItem.isExtended = this.editingItemForMultiple.isExtended\r\n\r\n                this.editingItem.directoryAdvertisementDesignTypeId = adDesignType.id\r\n                this.editingItem.directoryAdvertisementDesignTypeNameUz = adDesignType.nameUz\r\n                this.editingItem.directoryAdvertisementDesignTypeNameRu = adDesignType.nameRu\r\n                this.editingItem.directoryAdvertisementDesignTypeNameLt = adDesignType.nameLt\r\n\r\n                if (eachVolumeType) {\r\n                    this.editingItem.directoryAdvertisementVolumeTypeId = eachVolumeType.id\r\n                    this.editingItem.directoryAdvertisementVolumeTypeNameUz = eachVolumeType.nameUz\r\n                    this.editingItem.directoryAdvertisementVolumeTypeNameRu = eachVolumeType.nameRu\r\n                    this.editingItem.directoryAdvertisementVolumeTypeNameLt = eachVolumeType.nameLt\r\n                    this.editingItem.cost = eachVolumeType.cost\r\n                } else {\r\n                    this.editingItem.cost = adDesignType.cost\r\n                }\r\n\r\n                this.editingItem.directoryAdvertisementLocationTypeId = this.editingItemForMultiple.directoryAdvertisementLocationType.id\r\n                this.editingItem.directoryAdvertisementLocationTypeNameUz = this.editingItemForMultiple.directoryAdvertisementLocationType.nameUz\r\n                this.editingItem.directoryAdvertisementLocationTypeNameRu = this.editingItemForMultiple.directoryAdvertisementLocationType.nameRu\r\n                this.editingItem.directoryAdvertisementLocationTypeNameLt = this.editingItemForMultiple.directoryAdvertisementLocationType.nameLt\r\n                this.editingItem.regionId = this.editingItemForMultiple.region.id\r\n                this.editingItem.regionNameUz = this.editingItemForMultiple.region.nameUz\r\n                this.editingItem.regionNameRu = this.editingItemForMultiple.region.nameRu\r\n                this.editingItem.regionNameLt = this.editingItemForMultiple.region.nameLt\r\n                this.editingItem.statusId = this.editingItemForMultiple.statusId\r\n\r\n                this.editingItem.statusNameUz = this.statuses.find(s => s.id == this.editingItemForMultiple.statusId).nameUz\r\n                this.editingItem.statusNameRu = this.statuses.find(s => s.id == this.editingItemForMultiple.statusId).nameRu\r\n                this.editingItem.statusNameLt = this.statuses.find(s => s.id == this.editingItemForMultiple.statusId).nameLt\r\n\r\n                this.editingItem.unitId = this.editingItemForMultiple.unit.id\r\n                this.editingItem.unitShortNameUz = this.editingItemForMultiple.unit.shortNameUz\r\n                this.editingItem.unitShortNameRu = this.editingItemForMultiple.unit.shortNameRu\r\n                this.editingItem.unitShortNameLt = this.editingItemForMultiple.unit.shortNameLt\r\n\r\n                let copiedItem = Object.assign({}, this.editingItem)\r\n\r\n                copiedItem.decisionNumber = this.editingItem.decisionNumber\r\n                copiedItem.createdDate = this.editingItem.createdDate\r\n                copiedItem.description = this.editingItem.description\r\n\r\n                this.minimumCollections.push(copiedItem)\r\n            })\r\n        },\r\n        saveMultipleMinimumCollections (e) {\r\n            e.preventDefault();\r\n\r\n            this.multipleMinimumCollectionsComputedObserver.validate().then(valid => {\r\n                if (valid) {\r\n\r\n                    if (this.editingItemForMultiple.isExtended) {\r\n                        this.editingItemForMultiple.districts.forEach(district => {\r\n                            if (this.editingItemForMultiple.directoryAdvertisementVolumeTypes && this.editingItemForMultiple.directoryAdvertisementVolumeTypes.length > 0) {\r\n                                this.editingItemForMultiple.directoryAdvertisementVolumeTypes.forEach(volumeType => {\r\n                                    this.createMinCollectionsFromAdDesignTypesForMultipleSaveFn(district, volumeType)\r\n                                })\r\n                            } else {\r\n                                this.createMinCollectionsFromAdDesignTypesForMultipleSaveFn(district)\r\n                            }\r\n                        })\r\n                    } else {\r\n                        if (this.editingItemForMultiple.directoryAdvertisementVolumeTypes && this.editingItemForMultiple.directoryAdvertisementVolumeTypes.length > 0) {\r\n                            this.editingItemForMultiple.directoryAdvertisementVolumeTypes.forEach(volumeType => {\r\n                                this.createMinCollectionsFromAdDesignTypesForMultipleSaveFn(false, volumeType)\r\n                            })\r\n                        } else {\r\n                            this.createMinCollectionsFromAdDesignTypesForMultipleSaveFn()\r\n                        }\r\n\r\n                        /* this.editingItemForMultiple.directoryAdvertisementDesignTypes.forEach(adDesignType => {\r\n                            this.resetEditingItem()\r\n                            this.editingItem.directoryAdvertisementDesignTypeId = adDesignType.id\r\n                            this.editingItem.directoryAdvertisementDesignTypeNameUz = adDesignType.nameUz\r\n                            this.editingItem.directoryAdvertisementDesignTypeNameRu = adDesignType.nameRu\r\n                            this.editingItem.directoryAdvertisementDesignTypeNameLt = adDesignType.nameLt\r\n                            this.editingItem.cost = adDesignType.cost\r\n\r\n                            this.editingItem.directoryAdvertisementLocationTypeId = this.editingItemForMultiple.directoryAdvertisementLocationType.id\r\n                            this.editingItem.directoryAdvertisementLocationTypeNameUz = this.editingItemForMultiple.directoryAdvertisementLocationType.nameUz\r\n                            this.editingItem.directoryAdvertisementLocationTypeNameRu = this.editingItemForMultiple.directoryAdvertisementLocationType.nameRu\r\n                            this.editingItem.directoryAdvertisementLocationTypeNameLt = this.editingItemForMultiple.directoryAdvertisementLocationType.nameLt\r\n                            this.editingItem.regionId = this.editingItemForMultiple.region.id\r\n                            this.editingItem.regionNameUz = this.editingItemForMultiple.region.nameUz\r\n                            this.editingItem.regionNameRu = this.editingItemForMultiple.region.nameRu\r\n                            this.editingItem.regionNameLt = this.editingItemForMultiple.region.nameLt\r\n                            this.editingItem.statusId = this.editingItemForMultiple.statusId\r\n\r\n                            this.editingItem.statusNameUz = this.statuses.find(s => s.id == this.editingItemForMultiple.statusId).nameUz\r\n                            this.editingItem.statusNameRu = this.statuses.find(s => s.id == this.editingItemForMultiple.statusId).nameRu\r\n                            this.editingItem.statusNameLt = this.statuses.find(s => s.id == this.editingItemForMultiple.statusId).nameLt\r\n\r\n                            this.editingItem.unitId = this.editingItemForMultiple.unit.id\r\n                            this.editingItem.unitShortNameUz = this.editingItemForMultiple.unit.shortNameUz\r\n                            this.editingItem.unitShortNameRu = this.editingItemForMultiple.unit.shortNameRu\r\n                            this.editingItem.unitShortNameLt = this.editingItemForMultiple.unit.shortNameLt\r\n\r\n                            let copiedItem = Object.assign({}, this.editingItem)\r\n\r\n                            copiedItem.decisionNumber = this.editingItem.decisionNumber\r\n                            copiedItem.createdDate = this.editingItem.createdDate\r\n                            copiedItem.description = this.editingItem.description\r\n\r\n                            this.minimumCollections.push(copiedItem)\r\n                        }) */\r\n                    }\r\n                    this.createMultipleMinimumCollectionsModal = false\r\n                } else {\r\n                    this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                }\r\n            });\r\n        },\r\n        customLabelAdLocationType (opt) {\r\n            let selected = this.adLocationTypes.find(e => e.id == (opt.id ? opt.id : opt));\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelDistrict (opt) {\r\n            let selected = this.districts.find(e => e.id == (opt.id ? opt.id : opt));\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelAdDesignType (opt) {\r\n            let selected = this.adDesignTypes.find(e => e.id == (opt.id ? opt.id : opt));\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelAdVolumeType (opt) {\r\n            let selected = this.adVolumeTypes.find(e => e.id == (opt.id ? opt.id : opt));\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelRegion (opt) {\r\n            let selected = this.regions.find(e => e.id == (opt.id ? opt.id : opt));\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelUnit (opt) {\r\n            let selected = this.units.find(e => e.id == (opt.id ? opt.id : opt));\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.nameRu,\r\n                    nameLt: selected.nameLt,\r\n                    nameUz: selected.nameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        treeClosed (veeName) {\r\n            this.computedObserver.refs[veeName].validate();\r\n        },\r\n        normalizer (node) {\r\n            if (!node.children || node.children.length === 0) {\r\n                delete node.children\r\n                return {\r\n                    id: node.id,\r\n                    label: this.getName({\r\n                        nameRu: node.nameRu,\r\n                        nameLt: node.nameLt,\r\n                        nameUz: node.nameUz,\r\n                    }),\r\n                }\r\n            }\r\n            return {\r\n                id: node.id,\r\n                label: this.getName({\r\n                    nameRu: node.nameRu,\r\n                    nameLt: node.nameLt,\r\n                    nameUz: node.nameUz,\r\n                }),\r\n                children: node.children && node.children.length > 0 ? node.children : [],\r\n            }\r\n        },\r\n        save () {\r\n            this.computedObserver.validate().then(valid => {\r\n                if (valid && (this.minimumCollections.length || !this.isModeCreate)) {\r\n                    this.minimumCollections.forEach(c => {\r\n                        c.decisionNumber = this.editingItem.decisionNumber\r\n                        c.createdDate = this.editingItem.createdDate\r\n                        c.description = this.editingItem.description\r\n                    })\r\n                    if (this.editingItem.id) {\r\n                        crudAndListsService.update(this.isOnExtendedPage ? MAIN_API_URL_EXTENDED : MAIN_API_URL, this.editingItem).then(res => {\r\n                            this.computedObserver.reset()\r\n                            this.editingItem = Object.assign({}, {});\r\n                            this.$router.go(-1)\r\n                            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                        })\r\n                    } else {\r\n                        crudAndListsService.create(MAIN_API_URL, this.minimumCollections).then(res => {\r\n                            this.computedObserver.reset()\r\n                            this.editingItem = Object.assign({}, {});\r\n                            this.$router.go(-1)\r\n                            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                        })\r\n                    }\r\n                } else {\r\n                    this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                }\r\n            });\r\n        }\r\n    },\r\n    /*\r\n    * CREATED */\r\n    async created () {\r\n        this.var_default_search_payload.itemsPerPage = 500;\r\n        if (this.isModeCreate) {\r\n            await crudAndListsService.getEmpty(MAIN_API_URL)\r\n                .then(res => {\r\n                    this.editingItem = res.data\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        } else {\r\n            await crudAndListsService.getById(this.isOnExtendedPage ? MAIN_API_URL_EXTENDED : MAIN_API_URL, this.$route.params.id, false)\r\n                .then(res => {\r\n                    this.editingItem = res.data\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        }\r\n        // GET STATUSES\r\n        await helperService.getRefByCode('status')\r\n            .then(res => {\r\n                this.statuses = res.data.children\r\n                if (this.isModeCreate) {\r\n                    let activeStatus = this.statuses.find(el => el.code == 'ACTIVE')\r\n                    if (activeStatus) {\r\n                        this.editingItem.statusId = activeStatus.id\r\n                        this.editingItemForMultiple.statusId = activeStatus.id\r\n                    }\r\n                }\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            })\r\n\r\n        // GET REGIONS\r\n        await helperService.fetchRegions()\r\n            .then(res => {\r\n                this.regions = res.data\r\n                this.regionSelected(this.editingItem.regionId, this.editingItem.directoryAdvertisementLocationTypeId, true)\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            })\r\n\r\n        // GET AD_LOCATION_TYPES\r\n        crudAndListsService\r\n            .searchList('directory/advertisement-location-types', this.var_default_search_payload)\r\n            .then((res) => {\r\n                this.adLocationTypes = res.data.list;\r\n                this.adLocationTypeSelected(this.editingItem.directoryAdvertisementLocationTypeId, true)\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            })\r\n\r\n        // GET UNITS\r\n        crudAndListsService\r\n            .searchList('directory/units', this.var_default_search_payload)\r\n            .then((res) => {\r\n                this.units = res.data.list;\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            })\r\n\r\n        // GET MINIMUM_COLLECTION_TYPES\r\n        /* crudAndListsService\r\n            .searchList('directory/minimum-collection-types', this.var_default_search_payload)\r\n            .then((res) => {\r\n                this.minimumCollectionTypes = res.data.list;\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            }) */\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.col-form-label {\r\n    padding-top: 0;\r\n}\r\nul {\r\n    list-style-type: none;\r\n}\r\n</style>"]}]}