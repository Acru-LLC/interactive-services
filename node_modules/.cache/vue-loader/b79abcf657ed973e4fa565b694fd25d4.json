{"remainingRequest":"D:\\ACRU\\my-fairtech\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ACRU\\my-fairtech\\src\\components\\base\\BaseModalForCreate.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\ACRU\\my-fairtech\\src\\components\\base\\BaseModalForCreate.vue","mtime":1719222285775},{"path":"D:\\ACRU\\my-fairtech\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719222280288},{"path":"D:\\ACRU\\my-fairtech\\node_modules\\babel-loader\\lib\\index.js","mtime":1719222279696},{"path":"D:\\ACRU\\my-fairtech\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719222280288},{"path":"D:\\ACRU\\my-fairtech\\node_modules\\vue-loader\\lib\\index.js","mtime":1719222284893}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkJhc2VNb2RhbEZvckNyZWF0ZSIsDQogICAgcHJvcHM6IHsNCiAgICAgICAgdXNlQ29tcG9uZW50U2F2ZUZuOiB7DQogICAgICAgICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICAgICAgfSwNCiAgICAgICAgd2l0aG91dExpc3RTZWFyY2g6IHsNCiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgICAgICB9LA0KICAgICAgICBtYWluQXBpVXJsOiB7DQogICAgICAgICAgICB0eXBlOiBTdHJpbmcsDQogICAgICAgICAgICBkZWZhdWx0OiAnJw0KICAgICAgICB9LA0KICAgICAgICBjcmVhdGVGb3JtTmFtZTogew0KICAgICAgICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgICAgICAgZGVmYXVsdDogJycNCiAgICAgICAgfSwNCiAgICAgICAgbGlzdHM6IHsNCiAgICAgICAgICAgIHR5cGU6IFtPYmplY3QsIFN0cmluZ10sDQogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7DQogICAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICBhZGRpdGlvbmFsUGFyYW1zOiB7DQogICAgICAgICAgICB0eXBlOiBPYmplY3QsDQogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7DQogICAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICB2YWx1ZTogew0KICAgICAgICAgICAgdHlwZTogbnVsbA0KICAgICAgICB9DQogICAgfSwNCiAgICAvKg0KICAgICogQ09NUE9ORU5UUyAqLw0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGNvbXBvbmVudEZpbGUgKCkgew0KICAgICAgICAgICAgcmV0dXJuICgpID0+IGltcG9ydChgQC9zaGFyZWQvdmlld3MvY29tcG9uZW50cy8ke3RoaXMuY3JlYXRlRm9ybU5hbWV9LnZ1ZWApOw0KICAgICAgICB9DQogICAgfSwNCiAgICAvKg0KICAgICogREFUQSAqLw0KICAgIGRhdGEgKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgaW5uZXJWYWx1ZTogZmFsc2UNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBsaXN0U2VhcmNoQWZ0ZXJTYXZlICgpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy53aXRob3V0TGlzdFNlYXJjaCkgew0KICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UNCiAgICAgICAgICAgICAgICAgICAgLnNlYXJjaExpc3QodGhpcy5tYWluQXBpVXJsLCB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCduZXctcmVmLWNyZWF0ZWQnLCByZXMuZGF0YS5saXN0LCByZXMuZGF0YS5saXN0WzBdLmlkLCB0aGlzLmNyZWF0ZUZvcm1OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbm5lclZhbHVlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnbmV3LXJlZi1jcmVhdGVkLXdpdGhvdXQtbGlzdC1zZWFyY2gnLCB0aGlzLmNyZWF0ZUZvcm1OYW1lKQ0KICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJWYWx1ZSA9IGZhbHNlDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNhdmUgKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudXNlQ29tcG9uZW50U2F2ZUZuKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtQ3JlYXRlLnNhdmUoKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1DcmVhdGUuJHJlZnMub2JzZXJ2ZXIudmFsaWRhdGUoKS50aGVuKHZhbGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmNyZWF0ZSh0aGlzLm1haW5BcGlVcmwsIHRoaXMuJHJlZnMuZm9ybUNyZWF0ZS5lZGl0aW5nSXRlbSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybUNyZWF0ZS4kcmVmcy5vYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybUNyZWF0ZS5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybUNyZWF0ZS5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHsgYWRkcmVzc0R0bzoge30gfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtQ3JlYXRlLmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwge30pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RTZWFyY2hBZnRlclNhdmUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGlmICghdGhpcy53aXRob3V0TGlzdFNlYXJjaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2VhcmNoTGlzdCh0aGlzLm1haW5BcGlVcmwsIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnbmV3LXJlZi1jcmVhdGVkJywgcmVzLmRhdGEubGlzdCwgcmVzLmRhdGEubGlzdFswXS5pZCwgdGhpcy5jcmVhdGVGb3JtTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlubmVyVmFsdWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCduZXctcmVmLWNyZWF0ZWQtd2l0aG91dC1saXN0LXNlYXJjaCcsIHRoaXMuY3JlYXRlRm9ybU5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJWYWx1ZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAqLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7IHR5cGU6ICdzdWNjZXNzJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5maWxsX3JlcXVpcmVkX2ZpZWxkcycpLCB7IHR5cGU6ICdlcnJvcicgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgLy8gSGFuZGxlcyBpbnRlcm5hbCBtb2RlbCBjaGFuZ2VzLg0KICAgICAgICBpbm5lclZhbHVlIChuZXdWYWwpIHsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbmV3VmFsKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8gSGFuZGxlcyBleHRlcm5hbCBtb2RlbCBjaGFuZ2VzLg0KICAgICAgICB2YWx1ZSAobmV3VmFsKSB7DQogICAgICAgICAgICB0aGlzLmlubmVyVmFsdWUgPSBuZXdWYWw7DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQgKCkgew0KICAgICAgICBpZiAodGhpcy52YWx1ZSkgew0KICAgICAgICAgICAgdGhpcy5pbm5lclZhbHVlID0gdGhpcy52YWx1ZTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["BaseModalForCreate.vue"],"names":[],"mappings":";AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BaseModalForCreate.vue","sourceRoot":"src/components/base","sourcesContent":["<template>\r\n    <div>\r\n        <b-modal\r\n            v-model=\"innerValue\"\r\n            size=\"xl\"\r\n            :title=\"``\"\r\n        >\r\n            <component\r\n                v-bind:is=\"componentFile\"\r\n                :additional-params=\"additionalParams\"\r\n                ref=\"formCreate\"\r\n                :customIsModeCreate=\"true\"\r\n                @saved=\"listSearchAfterSave\"\r\n            ></component>\r\n            <template #modal-footer>\r\n                <b-button\r\n                    size=\"sm\"\r\n                    variant=\"danger\"\r\n                    @click=\"innerValue = false\"\r\n                >\r\n                    {{ $t('actions.cancel') }}\r\n                </b-button>\r\n                <b-button\r\n                    size=\"sm\"\r\n                    variant=\"success\"\r\n                    @click=\"save\"\r\n                >\r\n                    {{ $t('actions.save') }}\r\n                </b-button>\r\n            </template>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\";\r\n\r\nexport default {\r\n    name: \"BaseModalForCreate\",\r\n    props: {\r\n        useComponentSaveFn: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        withoutListSearch: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        mainApiUrl: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        createFormName: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        lists: {\r\n            type: [Object, String],\r\n            default: () => {\r\n            },\r\n        },\r\n        additionalParams: {\r\n            type: Object,\r\n            default: () => {\r\n            },\r\n        },\r\n        value: {\r\n            type: null\r\n        }\r\n    },\r\n    /*\r\n    * COMPONENTS */\r\n    computed: {\r\n        componentFile () {\r\n            return () => import(`@/shared/views/components/${this.createFormName}.vue`);\r\n        }\r\n    },\r\n    /*\r\n    * DATA */\r\n    data () {\r\n        return {\r\n            innerValue: false\r\n        }\r\n    },\r\n    methods: {\r\n        listSearchAfterSave () {\r\n            if (!this.withoutListSearch) {\r\n                crudAndListsService\r\n                    .searchList(this.mainApiUrl, this.var_default_search_payload)\r\n                    .then((res) => {\r\n                        this.$emit('new-ref-created', res.data.list, res.data.list[0].id, this.createFormName)\r\n                        this.innerValue = false\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e)\r\n                    })\r\n            } else {\r\n                this.$emit('new-ref-created-without-list-search', this.createFormName)\r\n                this.innerValue = false\r\n            }\r\n        },\r\n        save () {\r\n            if (this.useComponentSaveFn) {\r\n                this.$refs.formCreate.save()\r\n            } else {\r\n                this.$refs.formCreate.$refs.observer.validate().then(valid => {\r\n                    if (valid) {\r\n                        crudAndListsService.create(this.mainApiUrl, this.$refs.formCreate.editingItem).then(res => {\r\n                            this.$refs.formCreate.$refs.observer.reset()\r\n                            if (this.$refs.formCreate.editingItem.addressDto) {\r\n                                this.$refs.formCreate.editingItem = Object.assign({}, { addressDto: {} });\r\n                            } else {\r\n                                this.$refs.formCreate.editingItem = Object.assign({}, {});\r\n                            }\r\n                            this.listSearchAfterSave()\r\n                            /* if (!this.withoutListSearch) {\r\n                                crudAndListsService\r\n                                    .searchList(this.mainApiUrl, this.var_default_search_payload)\r\n                                    .then((res) => {\r\n                                        this.$emit('new-ref-created', res.data.list, res.data.list[0].id, this.createFormName)\r\n                                        this.innerValue = false\r\n                                    })\r\n                                    .catch(e => {\r\n                                        console.log(e)\r\n                                    })\r\n                            } else {\r\n                                this.$emit('new-ref-created-without-list-search', this.createFormName)\r\n                                this.innerValue = false\r\n                            } */\r\n                            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                        })\r\n                    } else {\r\n                        this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                    }\r\n                })\r\n            }\r\n        },\r\n    },\r\n    watch: {\r\n        // Handles internal model changes.\r\n        innerValue (newVal) {\r\n            this.$emit('input', newVal);\r\n        },\r\n        // Handles external model changes.\r\n        value (newVal) {\r\n            this.innerValue = newVal;\r\n        }\r\n    },\r\n    created () {\r\n        if (this.value) {\r\n            this.innerValue = this.value;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}