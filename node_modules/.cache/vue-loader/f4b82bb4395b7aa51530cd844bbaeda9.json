{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\e-auction-info\\CreateOrUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\e-auction-info\\CreateOrUpdate.vue","mtime":1674799496876},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpjb25zdCBNQUlOX0FQSV9VUkwgPSAnZS1hdWN0aW9uLWluZm8nDQppbXBvcnQgQmFzZVNlbGVjdFdpdGhWYWxpZGF0aW9uIGZyb20gIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvYmFzZS9CYXNlU2VsZWN0V2l0aFZhbGlkYXRpb24udnVlIjsNCmltcG9ydCBhcGlTZXJ2aWNlIGZyb20gIi4uLy4uLy4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9hcGkuc2VydmljZSI7DQppbXBvcnQgc3RhdGlzdGljc1NlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvaW50ZWdyYXRpb24vc3RhdGlzdGljcy5zZXJ2aWNlLmpzIg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJDcmVhdGVPclVwZGF0ZSIsDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGRhdGE6IHsNCiAgICAgICAgICAgICAgICBhdWN0aW9uX2RhdGU6IG51bGwsDQogICAgICAgICAgICAgICAgc29hdG86IG51bGwsDQogICAgICAgICAgICAgICAgYXJlYV9zb2F0bzogIiINCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBkaXN0cmljdHM6IFtdLA0KICAgICAgICAgICAgcmVnaW9uczogW10NCiAgICAgICAgfTsNCiAgICB9LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGlzTW9kZUNyZWF0ZSgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAiSW50ZWdyYXRpb25FQXVjdGlvbkluZm9DcmVhdGUiOw0KICAgICAgICB9LA0KICAgICAgICBjb21wdXRlZE9ic2VydmVyKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnMub2JzZXJ2ZXI7DQogICAgICAgIH0NCiAgICB9LA0KICAgIHdhdGNoOiB7DQogICAgICAnZGF0YS5zb2F0byc6IHsNCiAgICAgICAgaGFuZGxlcihlKSB7DQogICAgICAgICAgdGhpcy5nZXREaXN0cmljdHNXaXRoU29hdG9zKGUuaWQpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgc2F2ZSgpIHsNCiAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4odmFsaWQgPT4gew0KICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgICAgICAgICAgICBhcGlTZXJ2aWNlLnBvc3QoTUFJTl9BUElfVVJMICsgYC9kZXBsb3ktaW5mb3JtYXRpb24/YXVjdGlvbl9kYXRlPSR7dGhpcy5kYXRhLmF1Y3Rpb25fZGF0ZX0mc29hdG89JHt0aGlzLmRhdGEuc29hdG8uc29hdG99JmFyZWFfc29hdG89JHt0aGlzLmRhdGEuYXJlYV9zb2F0b31gLCBudWxsLCB0cnVlKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVzZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB7fSk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgibWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5IiksIHsgdHlwZTogInN1Y2Nlc3MiIH0pOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoIm1lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzIiksIHsgdHlwZTogImVycm9yIiB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIEdldCBSZWdpb25MaXN0DQogICAgICAgICAqLw0KICAgICAgICBnZXRSZWdpb25zV2l0aFNvYXRvcygpIHsNCiAgICAgICAgICBzdGF0aXN0aWNzU2VydmljZS5nZXRHZW9ncmFmaWNhbFJlZ2lvbnNXaXRoU29hdG9zKCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5yZWdpb25zID0gcmVzLmRhdGENCiAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBnZXREaXN0cmljdHNXaXRoU29hdG9zKHBhcmVudElkKSB7DQogICAgICAgICAgc3RhdGlzdGljc1NlcnZpY2UuZ2V0R2VvZ3JhZmljYWxEaXN0cmljdHNXaXRoU29hdG9zKHBhcmVudElkKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLmRpc3RyaWN0cyA9IHJlcy5kYXRhDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZC5pdGVtc1BlclBhZ2UgPSA1MDA7DQogICAgICAgIHRoaXMuZ2V0UmVnaW9uc1dpdGhTb2F0b3MoKQ0KICAgIH0sDQogICAgY29tcG9uZW50czogeyBCYXNlU2VsZWN0V2l0aFZhbGlkYXRpb24gfQ0KfQ0K"},{"version":3,"sources":["CreateOrUpdate.vue"],"names":[],"mappings":";AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateOrUpdate.vue","sourceRoot":"src/modules/integration/modules/e-auction-info","sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      :custom-title=\"isModeCreate ? $t('actions.create') : $t('actions.update')\"\r\n      has-save-suspend\r\n      @save=\"save\"\r\n  >\r\n    <ValidationObserver ref=\"observer\" v-slot=\"{}\">\r\n      <b-row class=\"mb-3\">\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseDatePickerWithValidation\r\n              rules=\"required\"\r\n              required\r\n              format=\"DD.MM.YYYY\"\r\n              :label=\"$t('submodules.integration.e_auction_info.date')\"\r\n              :placeholder=\"$t('submodules.integration.e_auction_info.date')\"\r\n              v-model=\"data.auction_date\"\r\n          />\r\n        </b-col>\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseSelectWithValidation\r\n            v-model=\"data.soato\"\r\n            class=\"required\"\r\n            rules=\"required\"\r\n            :label=\"$t('submodules.integration.e_auction_info.region_saoto')\"\r\n            value-field=\"id\"\r\n          >\r\n            <template #first>\r\n                <b-form-select-option\r\n                    :value=\"null\"\r\n                    disabled\r\n                >{{ $t('submodules.integration.e_auction_info.region_saoto') }}</b-form-select-option>\r\n            </template>\r\n            <b-form-select-option v-for=\"(region, index) in regions\" \r\n            :key=\"`${region}-${index}`\" \r\n            :value=\"region\" >{{\r\n                getName({\r\n                  nameRu: region.nameRu,\r\n                  nameLt: region.nameLt,\r\n                  nameUz: region.nameUz,\r\n                })\r\n              }} ({{region.soato}})\r\n            </b-form-select-option>\r\n          </BaseSelectWithValidation>\r\n        </b-col>\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseSelectWithValidation\r\n            v-model=\"data.area_soato\"\r\n            :label=\"$t('submodules.integration.e_auction_info.district_saoto')\"\r\n            value-field=\"id\"\r\n          >\r\n            <template #first>\r\n                <b-form-select-option\r\n                    :value=\"null\"\r\n                    disabled\r\n                >{{ $t('submodules.integration.e_auction_info.district_saoto') }}</b-form-select-option>\r\n            </template>\r\n            <b-form-select-option v-for=\"(district, index) in districts\" :key=\"`${district}-${index}`\" :value=\"district.soato\">{{\r\n                getName({\r\n                  nameRu: district.nameRu,\r\n                  nameLt: district.nameLt,\r\n                  nameUz: district.nameUz,\r\n                })\r\n              }} ({{district.soato}})\r\n            </b-form-select-option>\r\n          </BaseSelectWithValidation>\r\n        </b-col>\r\n      </b-row>\r\n    </ValidationObserver>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'e-auction-info'\r\nimport BaseSelectWithValidation from \"../../../../components/base/BaseSelectWithValidation.vue\";\r\nimport apiService from \"../../../../shared/services/api.service\";\r\nimport statisticsService from \"@/shared/services/integration/statistics.service.js\"\r\nexport default {\r\n    name: \"CreateOrUpdate\",\r\n    data() {\r\n        return {\r\n            data: {\r\n                auction_date: null,\r\n                soato: null,\r\n                area_soato: \"\"\r\n            },\r\n            districts: [],\r\n            regions: []\r\n        };\r\n    },\r\n    computed: {\r\n        isModeCreate() {\r\n            return this.$route.name === \"IntegrationEAuctionInfoCreate\";\r\n        },\r\n        computedObserver() {\r\n            return this.$refs.observer;\r\n        }\r\n    },\r\n    watch: {\r\n      'data.soato': {\r\n        handler(e) {\r\n          this.getDistrictsWithSoatos(e.id)\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n        save() {\r\n            this.computedObserver.validate().then(valid => {\r\n                if (valid) {\r\n                    apiService.post(MAIN_API_URL + `/deploy-information?auction_date=${this.data.auction_date}&soato=${this.data.soato.soato}&area_soato=${this.data.area_soato}`, null, true).then(res => {\r\n                        this.computedObserver.reset();\r\n                        this.editingItem = Object.assign({}, {});\r\n                        this.$router.go(-1);\r\n                        this.$toast(this.$t(\"messages.saved_successfully\"), { type: \"success\" });\r\n                    });\r\n                }\r\n                else {\r\n                    this.$toast(this.$t(\"messages.fill_required_fields\"), { type: \"error\" });\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * Get RegionList\r\n         */\r\n        getRegionsWithSoatos() {\r\n          statisticsService.getGeograficalRegionsWithSoatos().then(res => {\r\n            this.regions = res.data\r\n          })\r\n        },\r\n        getDistrictsWithSoatos(parentId) {\r\n          statisticsService.getGeograficalDistrictsWithSoatos(parentId).then(res => {\r\n            this.districts = res.data\r\n          })\r\n        }\r\n    },\r\n    created() {\r\n        this.var_default_search_payload.itemsPerPage = 500;\r\n        this.getRegionsWithSoatos()\r\n    },\r\n    components: { BaseSelectWithValidation }\r\n}\r\n</script>\r\n<style scoped>\r\n.base-form-component {\r\n  display: block;\r\n}\r\n.base-form-component__label {\r\n  padding: 10px 0;\r\n}\r\n</style>"]}]}