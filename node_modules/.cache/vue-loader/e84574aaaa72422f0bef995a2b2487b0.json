{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\organizitional\\components\\DepartmentsSignature.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\organizitional\\components\\DepartmentsSignature.vue","mtime":1674799497808},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgU2VydmljZSBmcm9tICIuLi8uLi9yZXBvcnRTZXJ2aWNlIjsNCmltcG9ydCBzaW1wbGViYXIgZnJvbSAic2ltcGxlYmFyLXZ1ZSI7DQppbXBvcnQgT3JnU3RyVHJlZVZpZXcgZnJvbSAiLi4vLi4vdGVtcGxhdGVzL2NvbXBvbmVudHMvT3JnU3RyVHJlZVZpZXciOw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIG5vdEluOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UsDQogICAgfSwNCiAgICBhc3luYzogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlLA0KICAgIH0sDQogICAgc2VsZWN0ZWRUckl0ZW06IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9LA0KICAgIH0sDQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBzaW1wbGViYXIsDQogICAgT3JnU3RyVHJlZVZpZXcsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGhlaWdodFdpbmRvdzogd2luZG93LmlubmVySGVpZ2h0LA0KICAgICAgLy8gZ2V0TmFtZTogZ2V0TmFtZSwNCiAgICAgIGNvbnRhY3RMaXN0OiBbXSwNCiAgICAgIGNvbnRhY3RQYWdlOiAwLA0KICAgICAgbWVtYmVyczogW10sDQogICAgICBvYmplY3RNZW1iZXJzOiB7fSwNCiAgICAgIGdyb3VwTW9kYWw6IGZhbHNlLA0KICAgICAgc2VhcmNoVmFsdWU6ICIiLA0KICAgICAgY21wS2V5OiAwLA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICByZXNldCgpIHsNCiAgICAgIHRoaXMuY21wS2V5ICs9IDE7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdGhpcy5zY3JvbGxBY3RpdmUoKTsNCiAgICAgIH0sIDIwMCk7DQogICAgfSwNCiAgICBzY3JvbGxBY3RpdmUoKSB7DQogICAgICBpZiAodGhpcy4kcmVmcy5jb250YWN0c1JlZi5TaW1wbGVCYXIpIHsNCiAgICAgICAgdGhpcy4kcmVmcy5jb250YWN0c1JlZi5TaW1wbGVCYXIuZ2V0U2Nyb2xsRWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoDQogICAgICAgICAgInNjcm9sbCIsDQogICAgICAgICAgKGUpID0+IHsNCiAgICAgICAgICAgIGxldCB7IHNjcm9sbFRvcCwgc2Nyb2xsSGVpZ2h0LCBjbGllbnRIZWlnaHQgfSA9IGV2ZW50LnRhcmdldDsNCiAgICAgICAgICAgIGNvbnN0IG9mZnNldEZvclRyaWdnZXIgPSAxOw0KICAgICAgICAgICAgaWYgKHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCAtIG9mZnNldEZvclRyaWdnZXIgPCBzY3JvbGxUb3ApIHsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkTW9yZUNvbnRhY3QoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICk7DQogICAgICB9DQogICAgfSwNCiAgICBzYXZlKCkgew0KICAgICAgdGhpcy4kZW1pdCgic2F2ZSIsIHRoaXMubWVtYmVycyk7DQogICAgICB0aGlzLm1lbWJlcnMgPSBbXTsNCiAgICAgIHRoaXMuJHNldCh0aGlzLCAnb2JqZWN0TWVtYmVycycsIHt9KTsNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICB0aGlzLmdldENvbnRhY3RzKHsgcGFnZTogMCwgbGltaXQ6IDIwIH0pOw0KICAgICAgfSwgMzAwKTsNCiAgICB9LA0KICAgIHB1c2hNZW1iZXIoZGF0YSkgew0KICAgICAgaWYgKGRhdGEuaWQgPT09IHRoaXMub2JqZWN0TWVtYmVycy5pZCkgew0KICAgICAgICB0aGlzLiRzZXQodGhpcywgJ29iamVjdE1lbWJlcnMnLCB7fSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRzZXQodGhpcywgJ29iamVjdE1lbWJlcnMnLCBkYXRhKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoZWNrKHYpIHsNCiAgICAgIGlmICh0aGlzLm9iamVjdE1lbWJlcnMuaWQgPT09IHYpIHsNCiAgICAgICAgcmV0dXJuIFsiZm9udC13ZWlnaHQtYm9sZCIsICJ0ZXh0LXByaW1hcnkiXTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldENvbnRhY3RzKHYpIHsNCiAgICAgIFNlcnZpY2UubGlzdERlcGFydG1lbnRGb3JEb2N1bWVudCh0aGlzLnNlbGVjdGVkVHJJdGVtLmlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMuY29udGFjdExpc3QgPSByZXMuZGF0YTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGxvYWRNb3JlQ29udGFjdCgpIHsNCiAgICAgIFNlcnZpY2UubGlzdERlcGFydG1lbnRGb3JEb2N1bWVudCh0aGlzLnNlbGVjdGVkVHJJdGVtLmlkKS50aGVuKGFzeW5jICh7IGRhdGEgfSkgPT4gew0KICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgLy8gdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgLy8gdGhpcy5jb250YWN0TGlzdCA9IHRoaXMuY29udGFjdExpc3QNCiAgICAgICAgICAvLyB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmNvbnRhY3RQYWdlID0gdGhpcy5jb250YWN0UGFnZSAtIDE7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdmFyIGNvbnRhaW5lcjMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKA0KICAgICAgIiNjb250YWN0LWxpc3QgLnNpbXBsZWJhci1jb250ZW50LXdyYXBwZXIiDQogICAgKTsNCiAgICBpZiAoY29udGFpbmVyMykgew0KICAgICAgY29udGFpbmVyMy5zY3JvbGxUbyh7IHRvcDogNTAwLCBiZWhhdmlvcjogInNtb290aCIgfSk7DQogICAgfQ0KDQogICAgLy8gQ29udGFjdCBsaXN0IGFjdGlvbnMNCg0KICAgIHRoaXMuc2Nyb2xsQWN0aXZlKCk7DQogIH0sDQogIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgYXdhaXQgdGhpcy5nZXRDb250YWN0cyh7IHBhZ2U6IDAsIGxpbWl0OiAyMCB9KTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBzZWFyY2hWYWx1ZTogew0KICAgICAgYXN5bmMgaGFuZGxlcigpIHsNCiAgICAgICAgYXdhaXQgdGhpcy5nZXRDb250YWN0cyh7IHBhZ2U6IDAsIGxpbWl0OiAyMCB9KTsNCiAgICAgIH0sDQogICAgfSwNCiAgICBvYmplY3RNZW1iZXJzOiB7DQogICAgICBhc3luYyBoYW5kbGVyKHYpIHsNCiAgICAgICAgaWYgKHRoaXMuYXN5bmMpIHsNCiAgICAgICAgICB0aGlzLiRlbWl0KCJhc3luY1ZhbHVlIiwgdik7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["DepartmentsSignature.vue"],"names":[],"mappings":";AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DepartmentsSignature.vue","sourceRoot":"src/modules/report/organizitional/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"card mb-0\">\r\n      <div class=\"card-body\">\r\n        <div class=\"button-items d-flex\" style=\"justify-content: space-between\">\r\n          <b-button variant=\"primary\" class=\"btn-label\">\r\n            <i class=\"bx bx-smile label-icon\"></i>\r\n            {{ `(${members.length})` }}\r\n          </b-button>\r\n          <span>\r\n            <b-button variant=\"outline-danger\" @click=\"$emit('cancel')\">\r\n              <i class=\"fa fa-times\"></i>\r\n              {{ $t(\"actions.close\") }}</b-button\r\n            >\r\n            <b-button v-if=\"!async\" variant=\"success\" @click=\"save\">\r\n              <i class=\"fa fa-save\"></i>\r\n              {{ $t(\"actions.save\") }}\r\n            </b-button>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <div class=\"p-4\">\r\n<!--          <div class=\"search-box mb-2\">-->\r\n<!--            <div class=\"position-relative\">-->\r\n<!--              <input-->\r\n<!--                type=\"text\"-->\r\n<!--                class=\"form-control\"-->\r\n<!--                v-model=\"searchValue\"-->\r\n<!--                :placeholder=\"$t('actions.filter')\"-->\r\n<!--              />-->\r\n<!--              <i class=\"bx bx-search-alt search-icon\"></i>-->\r\n<!--            </div>-->\r\n<!--          </div>-->\r\n\r\n          <simplebar\r\n            :key=\"cmpKey + 'ADS'\"\r\n            data-simplebar-auto-hide=\"false\"\r\n            :style=\"`height:${heightWindow - 165}px`\"\r\n            id=\"contact-list\"\r\n            ref=\"contactsRef\"\r\n          >\r\n\r\n            <ul id=\"il\" class=\"list-unstyled chat-list\">\r\n              <org-str-tree-view\r\n                  :departmentForTree=\"{children: contactList}\"\r\n                  :members=\"[objectMembers.id]\"\r\n                  class=\"item\"\r\n                  @toggleActiveClass=\"pushMember\"\r\n              >\r\n              </org-str-tree-view>\r\n            </ul>\r\n          </simplebar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Service from \"../../reportService\";\r\nimport simplebar from \"simplebar-vue\";\r\nimport OrgStrTreeView from \"../../templates/components/OrgStrTreeView\";\r\nexport default {\r\n  props: {\r\n    notIn: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    async: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    selectedTrItem: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  components: {\r\n    simplebar,\r\n    OrgStrTreeView,\r\n  },\r\n  data() {\r\n    return {\r\n      heightWindow: window.innerHeight,\r\n      // getName: getName,\r\n      contactList: [],\r\n      contactPage: 0,\r\n      members: [],\r\n      objectMembers: {},\r\n      groupModal: false,\r\n      searchValue: \"\",\r\n      cmpKey: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    reset() {\r\n      this.cmpKey += 1;\r\n      setTimeout(() => {\r\n        this.scrollActive();\r\n      }, 200);\r\n    },\r\n    scrollActive() {\r\n      if (this.$refs.contactsRef.SimpleBar) {\r\n        this.$refs.contactsRef.SimpleBar.getScrollElement().addEventListener(\r\n          \"scroll\",\r\n          (e) => {\r\n            let { scrollTop, scrollHeight, clientHeight } = event.target;\r\n            const offsetForTrigger = 1;\r\n            if (scrollHeight - clientHeight - offsetForTrigger < scrollTop) {\r\n              this.loadMoreContact();\r\n            }\r\n          }\r\n        );\r\n      }\r\n    },\r\n    save() {\r\n      this.$emit(\"save\", this.members);\r\n      this.members = [];\r\n      this.$set(this, 'objectMembers', {});\r\n      setTimeout(() => {\r\n        this.getContacts({ page: 0, limit: 20 });\r\n      }, 300);\r\n    },\r\n    pushMember(data) {\r\n      if (data.id === this.objectMembers.id) {\r\n        this.$set(this, 'objectMembers', {});\r\n      } else {\r\n        this.$set(this, 'objectMembers', data);\r\n      }\r\n    },\r\n    check(v) {\r\n      if (this.objectMembers.id === v) {\r\n        return [\"font-weight-bold\", \"text-primary\"];\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    getContacts(v) {\r\n      Service.listDepartmentForDocument(this.selectedTrItem.id).then((res) => {\r\n        this.$nextTick(() => {\r\n          this.contactList = res.data;\r\n        });\r\n      });\r\n    },\r\n    loadMoreContact() {\r\n      Service.listDepartmentForDocument(this.selectedTrItem.id).then(async ({ data }) => {\r\n        if (data.length > 0) {\r\n          // this.$nextTick(() => {\r\n            // this.contactList = this.contactList\r\n          // });\r\n        } else {\r\n          this.contactPage = this.contactPage - 1;\r\n        }\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    var container3 = document.querySelector(\r\n      \"#contact-list .simplebar-content-wrapper\"\r\n    );\r\n    if (container3) {\r\n      container3.scrollTo({ top: 500, behavior: \"smooth\" });\r\n    }\r\n\r\n    // Contact list actions\r\n\r\n    this.scrollActive();\r\n  },\r\n  async created() {\r\n    await this.getContacts({ page: 0, limit: 20 });\r\n  },\r\n  watch: {\r\n    searchValue: {\r\n      async handler() {\r\n        await this.getContacts({ page: 0, limit: 20 });\r\n      },\r\n    },\r\n    objectMembers: {\r\n      async handler(v) {\r\n        if (this.async) {\r\n          this.$emit(\"asyncValue\", v);\r\n        }\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}