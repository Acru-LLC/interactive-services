{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\projects\\proj-employes.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\projects\\proj-employes.vue","mtime":1677039624506},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcHJvamVjdFNlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvcHJvamVjdFNlcnZpY2UiOw0KaW1wb3J0IHNpbXBsZWJhciBmcm9tICJzaW1wbGViYXItdnVlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBwcm9wczogWyJub3RJbiJdLA0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgc2ltcGxlYmFyDQogICAgfSwNCiAgICBkYXRhICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGNvbnRhY3RMaXN0OiBbXSwNCiAgICAgICAgICAgIGNvbnRhY3RQYWdlOiAwLA0KICAgICAgICAgICAgbWVtYmVyczogW10sDQogICAgICAgICAgICBncm91cE1vZGFsOiBmYWxzZSwNCiAgICAgICAgICAgIHNlYXJjaFZhbHVlOiAiIiwNCiAgICAgICAgICAgIGNtcEtleTogMA0KICAgICAgICB9Ow0KICAgIH0sDQogICAgLyogDQogICAgQ09NUFVURUQgKi8NCiAgICBjb21wdXRlZDogew0KICAgICAgICBwcm9qZWN0VHlwZSAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PSAnQ29tbWlzc2lvblByb2plY3RzJyA/ICdDT01NSVNTSU9OJyA6ICdCRUZPUkVfQ09NTUlTU0lPTicNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBzZXRTZWxlY3RlZCAoYXJyKSB7DQogICAgICAgICAgICB0aGlzLm1lbWJlcnMgPSBhcnI7DQogICAgICAgIH0sDQogICAgICAgIHJlZnJlc2ggKCkgew0KICAgICAgICAgICAgdGhpcy5jbXBLZXkgKz0gMTsNCiAgICAgICAgfSwNCiAgICAgICAgc2F2ZSAoKSB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJzYXZlIiwgdGhpcy5tZW1iZXJzKTsNCiAgICAgICAgICAgIHRoaXMubWVtYmVycyA9IFtdOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5nZXRDb250YWN0cyh7IHBhZ2U6IDAsIGl0ZW1zUGVyUGFnZTogMjAgfSk7DQogICAgICAgICAgICB9LCAzMDApOw0KICAgICAgICB9LA0KICAgICAgICBwdXNoTWVtYmVyICh2KSB7DQogICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLm1lbWJlcnMuaW5kZXhPZih2LmVtcGxveWVlSWQpOw0KICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLm1lbWJlcnMuc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5tZW1iZXJzLnVuc2hpZnQodi5lbXBsb3llZUlkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY2hlY2sgKHYpIHsNCiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMubWVtYmVycy5pbmRleE9mKHYuZW1wbG95ZWVJZCk7DQogICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBbImZvbnQtd2VpZ2h0LWJvbGQiLCAidGV4dC1wcmltYXJ5Il07DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZ2V0Q29udGFjdHMgKHYpIHsNCiAgICAgICAgICAgIGxldCBwcm9qZWN0SWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsNCiAgICAgICAgICAgIGlmIChwcm9qZWN0SWQpIHsNCiAgICAgICAgICAgICAgICBwcm9qZWN0U2VydmljZS5saXN0TWVtYmVycyhwcm9qZWN0SWQsIHYsIHRoaXMucHJvamVjdFR5cGUpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWN0TGlzdCA9IHJlcy5kYXRhLmxpc3Q7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBsb2FkTW9yZUNvbnRhY3QgKCkgew0KICAgICAgICAgICAgbGV0IHByb2plY3RJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOw0KICAgICAgICAgICAgaWYgKHByb2plY3RJZCkgew0KICAgICAgICAgICAgICAgIHByb2plY3RTZXJ2aWNlDQogICAgICAgICAgICAgICAgICAgIC5saXN0TWVtYmVycyhwcm9qZWN0SWQsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6ICh0aGlzLmNvbnRhY3RQYWdlICs9IDEpLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiAyMA0KICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnByb2plY3RUeXBlKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoeyBkYXRhIH0pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWN0TGlzdCA9IHRoaXMuY29udGFjdExpc3QuY29uY2F0KGRhdGEubGlzdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFjdFBhZ2UgKyAtMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIG1vdW50ZWQgKCkgew0KICAgICAgICB2YXIgY29udGFpbmVyMyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoDQogICAgICAgICAgICAiI2NvbnRhY3QtbGlzdCAuc2ltcGxlYmFyLWNvbnRlbnQtd3JhcHBlciINCiAgICAgICAgKTsNCiAgICAgICAgaWYgKGNvbnRhaW5lcjMpIHsNCiAgICAgICAgICAgIGNvbnRhaW5lcjMuc2Nyb2xsVG8oeyB0b3A6IDUwMCwgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOw0KICAgICAgICB9DQogICAgICAgIC8vIENvbnRhY3QgbGlzdCBhY3Rpb25zDQogICAgICAgIGF3YWl0IHRoaXMuJHJlZnMuY29udGFjdHNSZWYuU2ltcGxlQmFyLmdldFNjcm9sbEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKA0KICAgICAgICAgICAgInNjcm9sbCIsDQogICAgICAgICAgICBlID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgeyBzY3JvbGxUb3AsIHNjcm9sbEhlaWdodCwgY2xpZW50SGVpZ2h0IH0gPSBldmVudC50YXJnZXQ7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0Rm9yVHJpZ2dlciA9IDE7DQogICAgICAgICAgICAgICAgaWYgKHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCAtIG9mZnNldEZvclRyaWdnZXIgPCBzY3JvbGxUb3ApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkTW9yZUNvbnRhY3QoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICk7DQogICAgfSwNCiAgICBhc3luYyBjcmVhdGVkICgpIHsNCiAgICAgICAgYXdhaXQgdGhpcy5nZXRDb250YWN0cyh7IHBhZ2U6IDAsIGl0ZW1zUGVyUGFnZTogMjAgfSk7DQogICAgfSwNCiAgICB3YXRjaDogew0KICAgICAgICBzZWFyY2hWYWx1ZTogew0KICAgICAgICAgICAgYXN5bmMgaGFuZGxlciAoKSB7DQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRDb250YWN0cyh7IHBhZ2U6IDAsIGl0ZW1zUGVyUGFnZTogMjAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQp9Ow0K"},{"version":3,"sources":["proj-employes.vue"],"names":[],"mappings":";AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"proj-employes.vue","sourceRoot":"src/modules/projects","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"card mb-0\">\r\n            <div class=\"card-body\">\r\n                <div\r\n                    class=\"button-items d-flex\"\r\n                    style=\"justify-content:space-between\"\r\n                >\r\n                    <b-button\r\n                        variant=\"primary\"\r\n                        class=\"btn-label\"\r\n                    >\r\n                        <i class=\"bx bx-smile label-icon\"></i>\r\n                        {{`(${members.length})`}}\r\n                    </b-button>\r\n                    <span>\r\n                        <b-button\r\n                            variant=\"outline-danger\"\r\n                            @click=\"$emit('cancel')\"\r\n                        >{{$t('actions.cancel')}}</b-button>\r\n                        <b-button\r\n                            variant=\"primary\"\r\n                            @click=\"save\"\r\n                        >\r\n                            <i class=\"fa fa-save\"></i>\r\n                            {{$t('actions.save')}}\r\n                        </b-button>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div class=\"p-4\">\r\n                    <!-- <div class=\"search-box mb-2\">\r\n            <div class=\"position-relative\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                v-model=\"searchValue\"\r\n                :placeholder=\"$t('actions.filter')\"\r\n              />\r\n              <i class=\"bx bx-search-alt search-icon\"></i>\r\n            </div>\r\n          </div>-->\r\n\r\n                    <simplebar\r\n                        style=\"height: 590px\"\r\n                        id=\"contact-list\"\r\n                        ref=\"contactsRef\"\r\n                    >\r\n                        <ul class=\"list-unstyled chat-list\">\r\n                            <li\r\n                                :id=\"contactList[contactList.length-1].id == data.id ?'lid' :'' \"\r\n                                v-for=\"data in contactList\"\r\n                                :key=\"data.employeeId\"\r\n                                @click=\"pushMember(data)\"\r\n                            >\r\n                                <a href=\"javascript: void(0);\">\r\n                                    <div\r\n                                        class=\"media d-flex\"\r\n                                        style=\"align-items:center\"\r\n                                    >\r\n                                        <div class=\"align-self-center mr-3\"></div>\r\n                                        <div\r\n                                            class=\"align-self-center mr-3\"\r\n                                            v-if=\"data.uploadPath\"\r\n                                        >\r\n                                            <img\r\n                                                :src=\"`${hrUrl}/${data.uploadPath}`\"\r\n                                                class=\"rounded-circle avatar-xs\"\r\n                                                alt\r\n                                            />\r\n                                        </div>\r\n                                        <div\r\n                                            class=\"avatar-xs align-self-center mr-3\"\r\n                                            v-if=\"!data.uploadPath\"\r\n                                        >\r\n                                            <span class=\"avatar-title rounded-circle bg-soft-primary text-white\">\r\n                                              {{ `${data.lastName.charAt(0)} ${data.firstName.charAt(0)}` }}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div class=\"media-body overflow-hidden\">\r\n                                            <h5\r\n                                                :class=\"check(data)\"\r\n                                                class=\"font-size-14 mb-1\"\r\n                                            >{{ `${data.lastName} ${data.firstName} ${data.parentName}` }}</h5>\r\n                                            <p class=\"m-0\">{{getName({nameLt:data.departmentNameLt,nameRu: data.departmentNameRu})}}</p>\r\n                                            <p class=\"m-0\">{{getName({nameLt:data.staffPositionNameLt,nameRu:data.staffPositionNameRu})}}</p>\r\n                                        </div>\r\n\r\n                                        <i\r\n                                            v-if=\"check(data)\"\r\n                                            class=\"fas fa-user-check font-size-18 text-primary\"\r\n                                        ></i>\r\n                                    </div>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </simplebar>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport projectService from \"@/shared/services/projectService\";\r\nimport simplebar from \"simplebar-vue\";\r\nexport default {\r\n    props: [\"notIn\"],\r\n    components: {\r\n        simplebar\r\n    },\r\n    data () {\r\n        return {\r\n            contactList: [],\r\n            contactPage: 0,\r\n            members: [],\r\n            groupModal: false,\r\n            searchValue: \"\",\r\n            cmpKey: 0\r\n        };\r\n    },\r\n    /* \r\n    COMPUTED */\r\n    computed: {\r\n        projectType () {\r\n            return this.$route.name == 'CommissionProjects' ? 'COMMISSION' : 'BEFORE_COMMISSION'\r\n        }\r\n    },\r\n    methods: {\r\n        setSelected (arr) {\r\n            this.members = arr;\r\n        },\r\n        refresh () {\r\n            this.cmpKey += 1;\r\n        },\r\n        save () {\r\n            this.$emit(\"save\", this.members);\r\n            this.members = [];\r\n            setTimeout(() => {\r\n                this.getContacts({ page: 0, itemsPerPage: 20 });\r\n            }, 300);\r\n        },\r\n        pushMember (v) {\r\n            let index = this.members.indexOf(v.employeeId);\r\n            if (index > -1) {\r\n                this.members.splice(index, 1);\r\n            } else {\r\n                this.members.unshift(v.employeeId);\r\n            }\r\n        },\r\n        check (v) {\r\n            let index = this.members.indexOf(v.employeeId);\r\n            if (index > -1) {\r\n                return [\"font-weight-bold\", \"text-primary\"];\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n        getContacts (v) {\r\n            let projectId = this.$route.query.id;\r\n            if (projectId) {\r\n                projectService.listMembers(projectId, v, this.projectType).then(res => {\r\n                    this.$nextTick(() => {\r\n                        this.contactList = res.data.list;\r\n                    });\r\n                });\r\n            }\r\n        },\r\n        loadMoreContact () {\r\n            let projectId = this.$route.query.id;\r\n            if (projectId) {\r\n                projectService\r\n                    .listMembers(projectId, {\r\n                        page: (this.contactPage += 1),\r\n                        itemsPerPage: 20\r\n                    }, this.projectType)\r\n                    .then(async ({ data }) => {\r\n                        if (data.list.length > 0) {\r\n                            this.$nextTick(() => {\r\n                                this.contactList = this.contactList.concat(data.list);\r\n                            });\r\n                        } else {\r\n                            this.contactPage + -1;\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n    },\r\n    async mounted () {\r\n        var container3 = document.querySelector(\r\n            \"#contact-list .simplebar-content-wrapper\"\r\n        );\r\n        if (container3) {\r\n            container3.scrollTo({ top: 500, behavior: \"smooth\" });\r\n        }\r\n        // Contact list actions\r\n        await this.$refs.contactsRef.SimpleBar.getScrollElement().addEventListener(\r\n            \"scroll\",\r\n            e => {\r\n                let { scrollTop, scrollHeight, clientHeight } = event.target;\r\n                const offsetForTrigger = 1;\r\n                if (scrollHeight - clientHeight - offsetForTrigger < scrollTop) {\r\n                    this.loadMoreContact();\r\n                }\r\n            }\r\n        );\r\n    },\r\n    async created () {\r\n        await this.getContacts({ page: 0, itemsPerPage: 20 });\r\n    },\r\n    watch: {\r\n        searchValue: {\r\n            async handler () {\r\n                await this.getContacts({ page: 0, itemsPerPage: 20 });\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}