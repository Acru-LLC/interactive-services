{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\products\\bakery-stations\\modules\\list_and_crud\\CreateOrUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\products\\bakery-stations\\modules\\list_and_crud\\CreateOrUpdate.vue","mtime":1682419455882},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpjb25zdCBNQUlOX0FQSV9VUkwgPSAnYmFrZXJ5Jw0KY29uc3QgQVBQRU5EX0FQSV9VUkxfRk9SX0dPVkVSTk1FTlQgPSAnYnktZmlyc3QtYWdlbnQnDQovKg0KKiBZT1UgTVVTVCBTRU5EIHt7IE1BSU5fQVBJX1VSTCB9fSBUTyBDUlVEX1NFUlZJQ0UgKi8NCmltcG9ydCBjcnVkQW5kTGlzdHNTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2NydWRfYW5kX2xpc3Quc2VydmljZSINCmltcG9ydCBoZWxwZXJTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2hlbHBlci5zZXJ2aWNlIg0KDQppbXBvcnQgTWFwSW5Nb2RhbCBmcm9tICcuL2NvbXBvbmVudHMvTWFwSW5Nb2RhbCcNCmltcG9ydCBDcmVhdGVGb3JtQ29udHJhY3RvciBmcm9tICdAL3NoYXJlZC92aWV3cy9jb21wb25lbnRzL0NyZWF0ZUZvcm1Db250cmFjdG9yJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJDcmVhdGVPclVwZGF0ZSIsDQogIC8qDQogICogQ09NUE9ORU5UUyAqLw0KICBjb21wb25lbnRzOiB7DQogICAgTWFwSW5Nb2RhbCwNCiAgICBDcmVhdGVGb3JtQ29udHJhY3Rvcg0KDQogIH0sDQogIC8qDQogICogREFUQSAqLw0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBub3RGb3JtYXR0ZWRNb250aGx5UGF5bWVudDogbnVsbCwNCiAgICAgIGFkU2lkZVZhbHVlOiBudWxsLA0KICAgICAgZGlzdHJpY3RNb2RhbDogZmFsc2UsDQogICAgICBxdWFydGVyc01vZGFsOiBmYWxzZSwNCiAgICAgIHN0cmVldHNNb2RhbDogZmFsc2UsDQogICAgICBtYXBNb2RhbDogZmFsc2UsDQoNCiAgICAgIGVkaXRpbmdJdGVtOiB7DQogICAgICAgIGFkZHJlc3NEdG86IHt9DQogICAgICB9LA0KICAgICAgaGFzTmV4dFBhZ2VDb250cmFjdG9yczogZmFsc2UsDQogICAgICBjb250cmFjdG9yczogW10sDQogICAgICBkZWJvdW5jZTogbnVsbCwNCiAgICAgIGlzTG9hZGluZ0NvbnRyYWN0b3JzOiBmYWxzZSwNCiAgICAgIGRpc3RyaWN0czogW10sDQogICAgICBxdWFydGVyczogW10sDQogICAgICBzdHJlZXRzOiBbXSwNCiAgICAgIGFkVHlwZXM6IFtdLA0KICAgICAgYWRHcm91cHM6IFtdLA0KICAgICAgYWRab25lczogW10sDQogICAgICBhZFNpZGVzOiBbXSwNCiAgICAgIGFkVm9sdW1lVHlwZXM6IFtdLA0KICAgICAgbG9jYWxQYXNzcG9ydEV4cGlyZURhdGU6IFtdLA0KICAgICAgY29udHJhY3RvckNyZWF0ZU1vZGFsOiBmYWxzZSwNCiAgICAgIG1pbkNvbGxlY3Rpb25WYWx1ZTogbnVsbCwNCiAgICAgIGNvZWZmaWNpZW50VmFsdWU6IG51bGwsDQogICAgICBjb250cmFjdG9yTm90Rm91bmQ6IGZhbHNlLA0KICAgICAgY29udHJhY3RvclNlYXJjaFBheWxvYWQ6IHt9LA0KICAgICAgY2hlY2tQYXNzcG9ydE51bWJlckxvYWRpbmc6IGZhbHNlLA0KICAgICAgZGJQYXNzcG9ydE51bWJlcjogJycsDQogICAgICBpc1Bhc3Nwb3J0TnVtYmVySW52YWxpZDogZmFsc2UsDQoNCiAgICAgIG1pbmltdW1Db2xsZWN0aW9uczogW10sDQogICAgICBjcmVhdGVNdWx0aXBsZU1pbmltdW1Db2xsZWN0aW9uc01vZGFsOiBmYWxzZSwNCiAgICAgIHNpbmdsZU1pbmltdW1Db2xsZWN0aW9uVXBkYXRlTW9kYWw6IGZhbHNlLA0KICAgICAgc3RhdHVzZXM6IFtdLA0KICAgICAgcmVnaW9uczogW10sDQogICAgICB1bml0czogW10sDQogICAgICBhZExvY2F0aW9uVHlwZXM6IFtdLA0KICAgICAgYWREZXNpZ25UeXBlczogW10sDQogICAgICBhZE9iamVjdFN0YXRlczogW10sDQogICAgICBkcm9wem9uZU9wdGlvbnM6IHsNCiAgICAgICAgdXJsOiAiaHR0cHM6Ly9odHRwYmluLm9yZy9wb3N0IiwNCiAgICAgICAgZGljdERlZmF1bHRNZXNzYWdlOiAn44OV44Kh44Kk44Or44KS44OJ44Ot44OD44OX44GX44Gm44GP44Gg44GV44GELicsDQogICAgICAgIHRodW1ibmFpbFdpZHRoOiAxNTAsDQogICAgICAgIG1heEZpbGVzaXplOiAxLjAsDQogICAgICAgIGFkZFJlbW92ZUxpbmtzOiB0cnVlLA0KICAgICAgICBkaWN0UmVtb3ZlRmlsZTogJ3gnLA0KICAgICAgICBtYXhGaWxlczogMywNCiAgICAgIH0sDQogICAgICBhcmNoaXRlY3REb2NGaWxlOiB7fSwNCiAgICAgIHBob3RvOiB7fSwNCiAgICAgIHBhc3Nwb3J0RG9jRmlsZToge30sDQogICAgICBwYXNzcG9ydFBob3RvOiB7fSwNCiAgICAgIHBheW1lbnREb2NGaWxlOiB7fSwNCiAgICB9DQogIH0sDQogIC8qDQogICogQ09NUFVURUQgKi8NCiAgY29tcHV0ZWQ6IHsNCiAgICBpbnB1dE1pblZhbHVlKHZhbHVlKSB7DQogICAgICByZXR1cm4gdmFsdWUuZWRpdGluZ0l0ZW0ucGFzc3BvcnRHaXZlbkRhdGUNCiAgICB9LA0KICAgIGlucHV0TWF4VmFsdWUodmFsdWUpIHsNCiAgICAgIHJldHVybiB2YWx1ZS5lZGl0aW5nSXRlbS5wYXNzcG9ydEV4cGlyZURhdGUNCiAgICB9LA0KICAgIGlzTW9kZUNyZWF0ZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09ICdDcmVhdGVCYWtlcnlTdGF0aW9uJw0KICAgIH0sDQogICAgY29tcHV0ZWRPYnNlcnZlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyDQogICAgfQ0KICB9LA0KICAvKg0KICAqIE1FVEhPRFMgKi8NCiAgbWV0aG9kczogew0KICAgIGZpbmRBbmRTZXRBZFZvbHVtZVR5cGUoKSB7DQogICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQgPSBudWxsDQoNCiAgICAgIGlmICh0aGlzLmVkaXRpbmdJdGVtLnZvbHVtZSkgew0KICAgICAgICB0aGlzLmFkVm9sdW1lVHlwZXMuZm9yRWFjaCh2VHlwZSA9PiB7DQogICAgICAgICAgaWYgKHBhcnNlRmxvYXQodGhpcy5lZGl0aW5nSXRlbS52b2x1bWUpID49IHZUeXBlLm1pbkJvcmRlciAmJiBwYXJzZUZsb2F0KHRoaXMuZWRpdGluZ0l0ZW0udm9sdW1lKSA8PSB2VHlwZS5tYXhCb3JkZXIpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudFZvbHVtZVR5cGVJZCA9IHZUeXBlLmlkDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgdGhpcy5hZFZvbHVtZVR5cGVTZWxlY3RlZCh0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnRWb2x1bWVUeXBlSWQpDQogICAgfSwNCiAgICBhZFNpZGVTZWxlY3RlZCgkZXZlbnQpIHsNCiAgICAgIGxldCBmb3VuZEFkU2lkZSA9IHRoaXMuYWRTaWRlcy5maW5kKGVsID0+IGVsLmlkID09ICRldmVudCkNCiAgICAgIHRoaXMuYWRTaWRlVmFsdWUgPSBmb3VuZEFkU2lkZSA/IGZvdW5kQWRTaWRlLmNvZGUgOiBudWxsDQogICAgICB0aGlzLmNhbGN1bGF0ZUFuZFNldE1vbnRobHlQYXltZW50KCkNCiAgICB9LA0KICAgIGFkVm9sdW1lVHlwZVNlbGVjdGVkKCRldmVudCkgew0KICAgICAgdGhpcy5nZXRNaW5Db2xsZWN0aW9uVmFsdWUodGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkLCB0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8uZGlzdHJpY3RJZCwgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50TG9jYXRpb25UeXBlSWQsIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudERlc2lnblR5cGVJZCwgJGV2ZW50KQ0KICAgIH0sDQogICAgY2FsY3VsYXRlQW5kU2V0TW9udGhseVBheW1lbnQoKSB7DQogICAgICB0aGlzLiRzZXQodGhpcy5lZGl0aW5nSXRlbSwgJ21vbnRobHlQYXltZW50JywgbnVsbCkNCiAgICAgIHRoaXMubm90Rm9ybWF0dGVkTW9udGhseVBheW1lbnQgPSBudWxsDQogICAgICBpZiAodGhpcy5taW5Db2xsZWN0aW9uVmFsdWUgJiYgdGhpcy5jb2VmZmljaWVudFZhbHVlICYmIHRoaXMuZWRpdGluZ0l0ZW0uZGVzaWduVHlwZVByaXZpbGVnZUNvZWZmaWNpZW50ICYmIHRoaXMuZWRpdGluZ0l0ZW0udm9sdW1lICYmIHRoaXMuYWRTaWRlVmFsdWUpIHsNCiAgICAgICAgbGV0IG51bSA9IChwYXJzZUZsb2F0KHRoaXMubWluQ29sbGVjdGlvblZhbHVlKSAqIHBhcnNlRmxvYXQodGhpcy5jb2VmZmljaWVudFZhbHVlKSAqIHBhcnNlRmxvYXQodGhpcy5lZGl0aW5nSXRlbS5kZXNpZ25UeXBlUHJpdmlsZWdlQ29lZmZpY2llbnQpICogcGFyc2VGbG9hdCh0aGlzLmVkaXRpbmdJdGVtLnZvbHVtZSkgKiBwYXJzZUZsb2F0KHRoaXMuYWRTaWRlVmFsdWUpKS50b0ZpeGVkKDIpDQogICAgICAgIHRoaXMubm90Rm9ybWF0dGVkTW9udGhseVBheW1lbnQgPSBudW0NCiAgICAgICAgbGV0IGZvcm1hdHRlZFBheW1lbnRWYWx1ZSA9IHRoaXMuZ2V0TnVtYmVyRm9ybWF0KG51bSkNCiAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdtb250aGx5UGF5bWVudCcsIGZvcm1hdHRlZFBheW1lbnRWYWx1ZSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJHNldCh0aGlzLmVkaXRpbmdJdGVtLCAnbW9udGhseVBheW1lbnQnLCBudWxsKQ0KICAgICAgICB0aGlzLm5vdEZvcm1hdHRlZE1vbnRobHlQYXltZW50ID0gbnVsbA0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UHJpdmlsZWdlQ29lZmZpY2llbnRWYWx1ZUJ5QWREZXNpZ25UeXBlSWQoYWREZXNpZ25UeXBlSWQpIHsNCiAgICAgIGlmIChhZERlc2lnblR5cGVJZCkgew0KICAgICAgICBoZWxwZXJTZXJ2aWNlLmdldFByaXZpbGVnZUNvZWZmaWNpZW50VmFsdWVCeUFkRGVzaWduVHlwZUlkKGFkRGVzaWduVHlwZUlkKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kZXNpZ25UeXBlUHJpdmlsZWdlQ29lZmZpY2llbnQgPSByZXMuZGF0YQ0KICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUFuZFNldE1vbnRobHlQYXltZW50KCkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiBjb25zb2xlLmxvZyhlKSkNCiAgICAgIH0NCiAgICB9LA0KICAgIG5ld1JlZkNyZWF0ZWQobmV3T3B0aW9ucywgbmV3SWQsIGZvcm1OYW1lKSB7DQogICAgICBpZiAoZm9ybU5hbWUgPT0gJ0NyZWF0ZUZvcm1HZW9SZWdpb25RdWFydGVycycpIHsNCiAgICAgICAgdGhpcy5xdWFydGVycyA9IG5ld09wdGlvbnMNCiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnF1YXJ0ZXJJZCA9IG5ld0lkDQogICAgICB9IGVsc2UgaWYgKGZvcm1OYW1lID09ICdDcmVhdGVGb3JtR2VvUmVnaW9uU3RyZWV0cycpIHsNCiAgICAgICAgdGhpcy5zdHJlZXRzID0gbmV3T3B0aW9ucw0KICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8uc3RyZWV0SWQgPSBuZXdJZA0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgb25CbHVyUGFzc3BvcnROdW1iZXJJbnB1dCh2YWx1ZSkgew0KICAgICAgaWYgKHRoaXMuaXNQYXNzcG9ydE51bWJlckludmFsaWQpIHsNCiAgICAgICAgYXdhaXQgdGhpcy5jaGVja0FkUGFzc3BvcnROdW1iZXIodmFsdWUsIHRydWUpOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgZGVib3VuY2VDaGVja1Bhc3Nwb3J0TnVtYmVyKHNlYXJjaFRleHQpIHsNCiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlKTsNCiAgICAgIHRoaXMuZGVib3VuY2UgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgYXdhaXQgdGhpcy5jaGVja0FkUGFzc3BvcnROdW1iZXIoc2VhcmNoVGV4dCk7DQogICAgICB9LCAxMDAwKTsNCiAgICB9LA0KICAgIGNoZWNrQWRQYXNzcG9ydE51bWJlcihzZWFyY2hRdWVyeSA9ICIiLCBmcm9tT25CbHVyID0gZmFsc2UpIHsNCiAgICAgIC8qDQogICAgICAgKiBBVk9JRCBNVUxUSVBMRSBSRVFVRVNUUyBBVCBPTkNFICovDQogICAgICBpZiAoIXRoaXMuZWRpdGluZ0l0ZW0uYWRkcmVzc0R0by5yZWdpb25JZCB8fCAhc2VhcmNoUXVlcnkgfHwgdGhpcy5jaGVja1Bhc3Nwb3J0TnVtYmVyTG9hZGluZyB8fCAoIXRoaXMuaXNNb2RlQ3JlYXRlICYmIHRoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnROdW1iZXIgPT0gdGhpcy5kYlBhc3Nwb3J0TnVtYmVyKSkgcmV0dXJuOw0KICAgICAgdGhpcy5jaGVja1Bhc3Nwb3J0TnVtYmVyTG9hZGluZyA9IHRydWU7DQogICAgICBoZWxwZXJTZXJ2aWNlLmNoZWNrQWRQYXNzcG9ydE51bWJlckJ5UmVnaW9uKHNlYXJjaFF1ZXJ5LCB0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8ucmVnaW9uSWQpDQogICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgIHRoaXMuaXNQYXNzcG9ydE51bWJlckludmFsaWQgPSByZXMuZGF0YTsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzUGFzc3BvcnROdW1iZXJJbnZhbGlkKSB7DQogICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5zZXRFcnJvcnMoe1Bhc3Nwb3J0TnVtYmVyOiBbdGhpcy4kdCgndmFsaWRhdG9yLmFkX3Bhc3Nwb3J0X251bWJlcl9hbHJlYWR5X2luX3VzZScpXX0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuY2hlY2tQYXNzcG9ydE51bWJlckxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgIC8qDQogICAgICAgICAgICAgICAqIEZPWURBTEFOVVZDSEkgWU9aQVlPVEdBTiBCTydMU0EgSU5QVVROSSBRQVlUQSBGT0NVUyBRSUwgKE9OX0JMVVIgRVZFTlREQU4gQk8nTFNBIEZPQ1VTIFFJTE1BKSAqLw0KICAgICAgICAgICAgaWYgKCFmcm9tT25CbHVyKSB7DQogICAgICAgICAgICAgIGxldCBwYXNzcG9ydE51bWJlcklucHV0ID0gdGhpcy4kcmVmcy5wYXNzcG9ydE51bWJlci4kZWwucXVlcnlTZWxlY3RvcigNCiAgICAgICAgICAgICAgICAgICJpbnB1dCINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgcGFzc3BvcnROdW1iZXJJbnB1dC5mb2N1cygpOw0KICAgICAgICAgICAgICB9LCA1MCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgfSwNCiAgICBzYXZlTG9jYXRpb24oZSkgew0KICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdsYXROdW1iZXInLCBlLmxhdCkNCiAgICAgIHRoaXMuJHNldCh0aGlzLmVkaXRpbmdJdGVtLCAnbG5nTnVtYmVyJywgZS5sbmcpDQogICAgICB0aGlzLm1hcE1vZGFsID0gZmFsc2UNCiAgICB9LA0KICAgIGRyYXdDcmVhdGVkKGUpIHsNCiAgICAgIHZhciB0eXBlID0gZS5sYXllclR5cGUsDQogICAgICAgICAgbGF5ZXIgPSBlLmxheWVyOw0KDQogICAgICBpZiAodHlwZSA9PT0gJ21hcmtlcicpIHsNCiAgICAgICAgbGF5ZXIuYmluZFBvcHVwKCdBIHBvcHVwIScpOw0KICAgICAgfQ0KDQogICAgICB0aGlzLmZlYXR1cmVHcm91cC5hZGRMYXllcihsYXllcik7DQogICAgfSwNCiAgICBvcGVuTWFwTW9kYWwoKSB7DQogICAgICB0aGlzLm1hcE1vZGFsID0gdHJ1ZQ0KICAgIH0sDQogICAgYXN5bmMgY29udHJhY3RvclNhdmVkKHJlcykgew0KICAgICAgdGhpcy5jb250cmFjdG9yQ3JlYXRlTW9kYWwgPSBmYWxzZQ0KICAgICAgdGhpcy5jb250cmFjdG9yTm90Rm91bmQgPSBmYWxzZQ0KICAgICAgYXdhaXQgdGhpcy5mZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoJycsIHRydWUpDQogICAgfSwNCiAgICBjcmVhdGVDb250cmFjdG9yKGUpIHsNCiAgICAgIGUucHJldmVudERlZmF1bHQoKQ0KDQogICAgICB0aGlzLiRyZWZzLmNyZWF0ZUZvcm1Db250cmFjdG9yLnNhdmUoKQ0KICAgIH0sDQogICAgdmFsaWRhdGVJbm4oKSB7DQogICAgICBoZWxwZXJTZXJ2aWNlLnZhbGlkYXRlSW5uRnJvbUFwaSh0aGlzLmVkaXRpbmdJdGVtLmlubikNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgaWYgKCFyZXMuZGF0YSkgew0KICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHtJTk46IFt0aGlzLiR0KCd2YWxpZGF0b3IuaW5uJyldfSk7DQogICAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlbGVjdGVkKG51bGwsIHRydWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgIH0pDQogICAgfSwNCiAgICBnZXRTaW5nbGVDb250cmFjdG9yQnlJbm4oKSB7DQogICAgICBpZiAodGhpcy5jb21wdXRlZE9ic2VydmVyLmZpZWxkcy5JTk4udmFsaWQpIHsNCiAgICAgICAgaGVscGVyU2VydmljZS52YWxpZGF0ZUlubkZyb21BcGkodGhpcy5lZGl0aW5nSXRlbS5pbm4pDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHsNCiAgICAgICAgICAgICAgICBoZWxwZXJTZXJ2aWNlLmdldFNpbmdsZUNvbnRyYWN0b3JCeUlubih0aGlzLmVkaXRpbmdJdGVtLmlubikNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JOb3RGb3VuZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9yU2VsZWN0ZWQocmVzLmRhdGEsIGZhbHNlLCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9yTm90Rm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnNldEVycm9ycyh7SU5OOiBbdGhpcy4kdCgndmFsaWRhdG9yLmlubicpXX0pOw0KICAgICAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlbGVjdGVkKG51bGwsIHRydWUpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlV2lkdGhMZW5ndGhJbnB1dCh3aWR0aE9yTGVuZ3RoKSB7DQogICAgICBpZiAodGhpcy5lZGl0aW5nSXRlbS53aWR0aCAmJiB0aGlzLmVkaXRpbmdJdGVtLmxlbmd0aCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0udm9sdW1lID0gcGFyc2VGbG9hdCh0aGlzLmVkaXRpbmdJdGVtLndpZHRoKSAqIHBhcnNlRmxvYXQodGhpcy5lZGl0aW5nSXRlbS5sZW5ndGgpDQogICAgICAgICAgdGhpcy5maW5kQW5kU2V0QWRWb2x1bWVUeXBlKCkNCiAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUFuZFNldE1vbnRobHlQYXltZW50KCkNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnZvbHVtZSA9IG51bGwNCiAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUFuZFNldE1vbnRobHlQYXltZW50KCkNCiAgICAgICAgICB0aGlzLmZpbmRBbmRTZXRBZFZvbHVtZVR5cGUoKQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLnZvbHVtZSA9IG51bGwNCiAgICAgICAgdGhpcy5jYWxjdWxhdGVBbmRTZXRNb250aGx5UGF5bWVudCgpDQogICAgICAgIHRoaXMuZmluZEFuZFNldEFkVm9sdW1lVHlwZSgpDQogICAgICB9DQogICAgfSwNCiAgICBhZGRQYXNzcG9ydERhdGVDaGFuZ2VkKGUpIHsNCiAgICAgIGlmIChlWzBdKSB7DQogICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnRHaXZlbkRhdGUgPSBlWzBdDQogICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucGFzc3BvcnRFeHBpcmVEYXRlID0gZVsxXQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5wYXNzcG9ydEdpdmVuRGF0ZSA9IG51bGwNCiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5wYXNzcG9ydEV4cGlyZURhdGUgPSBudWxsDQogICAgICB9DQogICAgfSwNCiAgICBjdXN0b21MYWJlbEFkU2lkZShvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuYWRTaWRlcy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICB9KX1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBjdXN0b21MYWJlbEFkVm9sdW1lVHlwZShvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuYWRWb2x1bWVUeXBlcy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICB9KX1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBjdXN0b21MYWJlbEFkWm9uZShvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuYWRab25lcy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICB9KQ0KICAgICAgICB9YA0KICAgICAgfQ0KICAgICAgcmV0dXJuIGBgOw0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxBZFJlZ2lvbkdyb3VwKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5hZEdyb3Vwcy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICB9KQ0KICAgICAgICB9YA0KICAgICAgfQ0KICAgICAgcmV0dXJuIGBgOw0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxBZFR5cGUob3B0KSB7DQogICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmFkVHlwZXMuZmluZChlID0+IGUuaWQgPT0gb3B0KTsNCiAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLm5hbWVSdSwNCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVeiwNCiAgICAgICAgfSkNCiAgICAgICAgfWANCiAgICAgIH0NCiAgICAgIHJldHVybiBgYDsNCiAgICB9LA0KICAgIGN1c3RvbUxhYmVsU3RyZWV0KG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5zdHJlZXRzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsDQogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgIH0pDQogICAgICAgIH1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBjdXN0b21MYWJlbFF1YXJ0ZXIob3B0KSB7DQogICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLnF1YXJ0ZXJzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsDQogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgIH0pDQogICAgICAgIH1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBjdXN0b21MYWJlbERpc3RyaWN0KG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5kaXN0cmljdHMuZmluZChlID0+IGUuaWQgPT0gb3B0KTsNCiAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLm5hbWVSdSwNCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVeiwNCiAgICAgICAgfSkNCiAgICAgICAgfWANCiAgICAgIH0NCiAgICAgIHJldHVybiBgYDsNCiAgICB9LA0KICAgIGFzeW5jIHJlZ2lvblNlbGVjdGVkKCRldmVudCwgZG9udFJlc2V0RGlzdHJpY3QgPSBmYWxzZSkgew0KICAgICAgaWYgKCFkb250UmVzZXREaXN0cmljdCkgew0KICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8uZGlzdHJpY3RJZCA9IG51bGwNCiAgICAgIH0NCiAgICAgIGlmICgkZXZlbnQpIHsNCiAgICAgICAgLy8gR0VUIERJU1RSSUNUUw0KICAgICAgICBhd2FpdCBoZWxwZXJTZXJ2aWNlLmdldEdlb0xvY2F0aW9uc0J5UGFyZW50SWQoJGV2ZW50KQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5kaXN0cmljdHMgPSByZXMuZGF0YQ0KICAgICAgICAgICAgICBpZiAoZG9udFJlc2V0RGlzdHJpY3QpDQogICAgICAgICAgICAgICAgdGhpcy5kaXN0cmljdFNlbGVjdGVkKHRoaXMuZWRpdGluZ0l0ZW0uYWRkcmVzc0R0by5kaXN0cmljdElkLCB0cnVlKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBnZXRDb2VmZmljaWVudFZhbHVlKGRpc3RyaWN0SWQsIGFkWm9uZUlkKSB7DQogICAgICBpZiAoZGlzdHJpY3RJZCAmJiBhZFpvbmVJZCAmJiB0aGlzLmlzQnlBZ2VuY3kpIHsNCiAgICAgICAgaGVscGVyU2VydmljZS5nZXRDb2VmZmljaWVudFZhbHVlQnlab25lQW5kRGlzdHJpY3RJZHMoZGlzdHJpY3RJZCwgYWRab25lSWQpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50VmFsdWUgPSByZXMuZGF0YSA/IHJlcy5kYXRhLmNvZWZmaWNpZW50IDogbnVsbA0KICAgICAgICAgICAgICBpZiAodGhpcy5taW5Db2xsZWN0aW9uVmFsdWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUFuZFNldE1vbnRobHlQYXltZW50KCkNCiAgICAgICAgICAgICAgICAvLyB0aGlzLiRzZXQodGhpcy5lZGl0aW5nSXRlbSwgJ21vbnRobHlQYXltZW50JywgcGFyc2VGbG9hdCh0aGlzLm1pbkNvbGxlY3Rpb25WYWx1ZSkgKiBwYXJzZUZsb2F0KHRoaXMuY29lZmZpY2llbnRWYWx1ZSkpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRWYWx1ZSA9IG51bGwNCiAgICAgICAgICAgICAgLy8gdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdtb250aGx5UGF5bWVudCcsIG51bGwpDQogICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQW5kU2V0TW9udGhseVBheW1lbnQoKQ0KICAgICAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldE1pbkNvbGxlY3Rpb25WYWx1ZShyZWdpb25JZCwgZGlzdHJpY3RJZCwgYWRMb2NhdGlvblR5cGVJZCwgYWREZXNpZ25UeXBlSWQsIGFkVm9sdW1lVHlwZUlkKSB7DQogICAgICAvLyBHRVQgTUlOSU1VTV9DT0xMRUNUSU9OIChNKSBCWSBSRUdJT04sIERJU1RSSUNUIEFORCBBRF9ERVNJR05fVFlQRSBJRFMNCiAgICAgIGlmIChyZWdpb25JZCAmJiBkaXN0cmljdElkICYmIGFkTG9jYXRpb25UeXBlSWQgJiYgYWREZXNpZ25UeXBlSWQgJiYgdGhpcy5pc0J5QWdlbmN5ICYmICF0aGlzLmVkaXRpbmdJdGVtLmlzVXpBdnRvWXVsKSB7DQogICAgICAgIGhlbHBlclNlcnZpY2UuZ2V0TWluQ29sbGVjdGlvblZhbHVlQnlSZWdpb25BbmREaXN0cmljdElkcyhyZWdpb25JZCwgZGlzdHJpY3RJZCwgYWRMb2NhdGlvblR5cGVJZCwgYWREZXNpZ25UeXBlSWQsIGFkVm9sdW1lVHlwZUlkKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5taW5Db2xsZWN0aW9uVmFsdWUgPSByZXMuZGF0YSA/IHJlcy5kYXRhLmNvc3QgOiBudWxsDQogICAgICAgICAgICAgIGlmICh0aGlzLmNvZWZmaWNpZW50VmFsdWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUFuZFNldE1vbnRobHlQYXltZW50KCkNCiAgICAgICAgICAgICAgICAvLyB0aGlzLiRzZXQodGhpcy5lZGl0aW5nSXRlbSwgJ21vbnRobHlQYXltZW50JywgcGFyc2VGbG9hdCh0aGlzLm1pbkNvbGxlY3Rpb25WYWx1ZSkgKiBwYXJzZUZsb2F0KHRoaXMuY29lZmZpY2llbnRWYWx1ZSkpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgIHRoaXMubWluQ29sbGVjdGlvblZhbHVlID0gbnVsbA0KICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUFuZFNldE1vbnRobHlQYXltZW50KCkNCiAgICAgICAgICAgICAgLy8gdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdtb250aGx5UGF5bWVudCcsIG51bGwpDQogICAgICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5taW5Db2xsZWN0aW9uVmFsdWUgPSBudWxsDQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBkaXN0cmljdFNlbGVjdGVkKCRldmVudCwgZG9udFJlc2V0UXVhcnRlciA9IGZhbHNlKSB7DQogICAgICBpZiAoIWRvbnRSZXNldFF1YXJ0ZXIpIHsNCiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnF1YXJ0ZXJJZCA9IG51bGwNCiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlBZHZlcnRpc2VtZW50Wm9uZUlkID0gbnVsbA0KICAgICAgfQ0KICAgICAgaWYgKCRldmVudCkgew0KICAgICAgICAvLyBHRVQgUVVBUlRFUlMNCiAgICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQoJ2RpcmVjdG9yeS9xdWFydGVyLW5hbWVzJywgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCwgYGdldC1ieS1kaXN0cmljdElkLyR7JGV2ZW50fWApDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICB0aGlzLnF1YXJ0ZXJzID0gcmVzLmRhdGEubGlzdA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgdGhpcy5xdWFydGVycyA9IFtdDQogICAgICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5xdWFydGVycyA9IFtdDQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBhZERlc2lnblR5cGVTZWxlY3RlZCgkZXZlbnQpIHsNCiAgICAgIHRoaXMuZ2V0TWluQ29sbGVjdGlvblZhbHVlKHRoaXMuZWRpdGluZ0l0ZW0uYWRkcmVzc0R0by5yZWdpb25JZCwgdGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLmRpc3RyaWN0SWQsIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudExvY2F0aW9uVHlwZUlkLCAkZXZlbnQsIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudFZvbHVtZVR5cGVJZCkNCiAgICAgIHRoaXMuZ2V0UHJpdmlsZWdlQ29lZmZpY2llbnRWYWx1ZUJ5QWREZXNpZ25UeXBlSWQoJGV2ZW50KQ0KICAgIH0sDQogICAgYXN5bmMgYWRab25lU2VsZWN0ZWQoJGV2ZW50KSB7DQogICAgICB0aGlzLmdldENvZWZmaWNpZW50VmFsdWUodGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLmRpc3RyaWN0SWQsICRldmVudCkNCiAgICB9LA0KICAgIGN1c3RvbU9iamVjdFN0YXRlKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5hZE9iamVjdFN0YXRlcy5maW5kKGUgPT4gZS5pZCA9PSAob3B0LmlkID8gb3B0LmlkIDogb3B0KSk7DQogICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsDQogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgIH0pDQogICAgICAgIH1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBjdXN0b21MYWJlbENvbnRyYWN0b3Iob3B0KSB7DQogICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmNvbnRyYWN0b3JzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgcmV0dXJuIGAke3NlbGVjdGVkLmZ1bGxOYW1lfWANCiAgICAgIH0NCiAgICAgIHJldHVybiBgYDsNCiAgICB9LA0KICAgIGNvbnRyYWN0b3JSZWFjaGVkRW5kT2ZMaXN0KGUpIHsNCiAgICAgIGlmIChlKSB7DQogICAgICAgIHRoaXMuZmV0Y2hDb250cmFjdG9ycygpDQogICAgICB9DQogICAgfSwNCiAgICBjb250cmFjdG9yU2VsZWN0ZWQoY29udHJhY3RvckR0b09ySWQsIGRvbnRSZXNldElubiA9IGZhbHNlLCBmcm9tSW5uU2VhcmNoID0gZmFsc2UpIHsNCiAgICAgIGxldCBmb3VuZENvbnRyYWN0b3IgPSBmcm9tSW5uU2VhcmNoID8gdGhpcy5jb250cmFjdG9ycy5maW5kKGMgPT4gYy5pZCA9PSBjb250cmFjdG9yRHRvT3JJZC5pZCkgOiB0aGlzLmNvbnRyYWN0b3JzLmZpbmQoYyA9PiBjLmlkID09IGNvbnRyYWN0b3JEdG9PcklkKQ0KICAgICAgaWYgKGZyb21Jbm5TZWFyY2ggJiYgY29udHJhY3RvckR0b09ySWQgJiYgIWZvdW5kQ29udHJhY3Rvcikgew0KICAgICAgICB0aGlzLmNvbnRyYWN0b3JzLnB1c2goY29udHJhY3RvckR0b09ySWQpDQogICAgICAgIGZvdW5kQ29udHJhY3RvciA9IGNvbnRyYWN0b3JEdG9PcklkDQogICAgICB9DQogICAgICBpZiAoZm91bmRDb250cmFjdG9yKSB7DQogICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvcklkID0gZnJvbUlublNlYXJjaCA/IGNvbnRyYWN0b3JEdG9PcklkLmlkIDogY29udHJhY3RvckR0b09ySWQNCiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5pbm4gPSBmb3VuZENvbnRyYWN0b3IuaW5uDQogICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvclBob25lTnVtYmVyID0gbnVsbA0KICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmNvbnRyYWN0b3JQaG9uZU51bWJlciA9IGZvdW5kQ29udHJhY3Rvci5tb2JpbGVOdW1iZXINCiAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdjb250cmFjdG9yQWRkcmVzcycsIGAke2ZvdW5kQ29udHJhY3Rvci5hZGRyZXNzRHRvLnJlZ2lvbk5hbWVVen0sICR7Zm91bmRDb250cmFjdG9yLmFkZHJlc3NEdG8uZGlzdHJpY3ROYW1lVXp9ICR7Zm91bmRDb250cmFjdG9yLmFkZHJlc3NEdG8uYWRkaXRpb25hbCA/ICcsJyArIGZvdW5kQ29udHJhY3Rvci5hZGRyZXNzRHRvLmFkZGl0aW9uYWwgOiAnJ31gKQ0KICAgICAgICAvLyB0aGlzLmVkaXRpbmdJdGVtLmNvbnRyYWN0b3JBZGRyZXNzID0gYCR7Zm91bmRDb250cmFjdG9yLmFkZHJlc3NEdG8ucmVnaW9uTmFtZVV6fSwgJHtmb3VuZENvbnRyYWN0b3IuYWRkcmVzc0R0by5kaXN0cmljdE5hbWVVen0gJHtmb3VuZENvbnRyYWN0b3IuYWRkcmVzc0R0by5hZGRpdGlvbmFsID8gJywnICsgZm91bmRDb250cmFjdG9yLmFkZHJlc3NEdG8uYWRkaXRpb25hbCA6ICcnfWANCiAgICAgICAgdGhpcy5jb250cmFjdG9yTm90Rm91bmQgPSBmYWxzZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCFkb250UmVzZXRJbm4pIHsNCiAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmlubiA9IG51bGwNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmNvbnRyYWN0b3JJZCA9IG51bGwNCiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5jb250cmFjdG9yUGhvbmVOdW1iZXIgPSBudWxsDQogICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvckFkZHJlc3MgPSBudWxsDQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBkZWJvdW5jZVNlYXJjaENvbnRyYWN0b3JzKHNlYXJjaFRleHQpIHsNCiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlKTsNCiAgICAgIHRoaXMuZGVib3VuY2UgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoc2VhcmNoVGV4dCk7DQogICAgICB9LCAxMDAwKTsNCiAgICB9LA0KICAgIC8qIGFzeW5jIGRlYm91bmNlU2VhcmNoQ29udHJhY3RvcnNCeUlubiAoc2VhcmNoVGV4dCkgew0KICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZSk7DQogICAgICAgIHRoaXMuZGVib3VuY2UgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0U2luZ2xlQ29udHJhY3RvckJ5SW5uKCk7DQogICAgICAgIH0sIDEwMDApOw0KICAgIH0sICovDQogICAgZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkKGtleXdvcmQsIG1ha2VTZWxlY3RlZEJ5SW5uID0gZmFsc2UsIGZyb21Db250cmFjdG9yTW9kYWxDYW5jZWwgPSBmYWxzZSkgew0KICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnDQogICAgICB0aGlzLmZldGNoQ29udHJhY3RvcnMobWFrZVNlbGVjdGVkQnlJbm4sIGZyb21Db250cmFjdG9yTW9kYWxDYW5jZWwpDQogICAgfSwNCiAgICBhc3luYyBmZXRjaENvbnRyYWN0b3JzKG1ha2VTZWxlY3RlZEJ5SW5uLCBmcm9tQ29udHJhY3Rvck1vZGFsQ2FuY2VsKSB7DQogICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gdHJ1ZQ0KICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQoJ2NvbnRyYWN0b3InLCB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLCAnYnktY29udHJhY3RvcicpDQogICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvcnMucHVzaCguLi5yZXMuZGF0YS5saXN0KQ0KICAgICAgICAgICAgaWYgKG1ha2VTZWxlY3RlZEJ5SW5uIHx8IGZyb21Db250cmFjdG9yTW9kYWxDYW5jZWwpIHsNCiAgICAgICAgICAgICAgbGV0IGZvdW5kQ29udHJhY3RvciA9IHRoaXMuY29udHJhY3RvcnMuZmluZChlbCA9PiBlbC5pbm4gPT0gdGhpcy5lZGl0aW5nSXRlbS5pbm4pDQogICAgICAgICAgICAgIGlmIChmb3VuZENvbnRyYWN0b3IpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWxlY3RlZChmb3VuZENvbnRyYWN0b3IuaWQpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuaGFzTmV4dFBhZ2VDb250cmFjdG9ycyA9IHJlcy5kYXRhLnRvdGFsIC8gdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5pdGVtc1BlclBhZ2UgPiB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UNCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQucGFnZSArPSAxDQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgfSkNCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gZmFsc2UNCiAgICAgICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgYWRMb2NhdGlvblR5cGVTZWxlY3RlZChhZExvY2F0aW9uVHlwZU9iamVjdE9ySWQsIGRvbnRSZXNldEFkRGVzaWduVHlwZSA9IGZhbHNlKSB7DQogICAgICBpZiAoIWRvbnRSZXNldEFkRGVzaWduVHlwZSkgew0KICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlSWQgPSBudWxsDQogICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudFZvbHVtZVR5cGVJZCA9IG51bGwNCiAgICAgIH0NCiAgICAgIGlmIChhZExvY2F0aW9uVHlwZU9iamVjdE9ySWQpIHsNCiAgICAgICAgdGhpcy5nZXRNaW5Db2xsZWN0aW9uVmFsdWUodGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkLCB0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8uZGlzdHJpY3RJZCwgYWRMb2NhdGlvblR5cGVPYmplY3RPcklkLmlkID8gYWRMb2NhdGlvblR5cGVPYmplY3RPcklkLmlkIDogYWRMb2NhdGlvblR5cGVPYmplY3RPcklkLCB0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeUFkdmVydGlzZW1lbnREZXNpZ25UeXBlSWQsIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5QWR2ZXJ0aXNlbWVudFZvbHVtZVR5cGVJZCkNCiAgICAgICAgLy8gR0VUIEFEX1ZPTFVNRV9UWVBFUw0KICAgICAgICBoZWxwZXJTZXJ2aWNlDQogICAgICAgICAgICAuZ2V0QWRWb2x1bWVUeXBlc0J5QWRMb2NhdGlvblR5cGVJZChhZExvY2F0aW9uVHlwZU9iamVjdE9ySWQuaWQgPyBhZExvY2F0aW9uVHlwZU9iamVjdE9ySWQuaWQgOiBhZExvY2F0aW9uVHlwZU9iamVjdE9ySWQpDQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuYWRWb2x1bWVUeXBlcyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgIHRoaXMuZmluZEFuZFNldEFkVm9sdW1lVHlwZSgpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uYWRkcmVzc0R0by5yZWdpb25JZCkgew0KICAgICAgICAgIC8vIEdFVCBBRF9ERVNJR05fVFlQRVMNCiAgICAgICAgICBoZWxwZXJTZXJ2aWNlDQogICAgICAgICAgICAgIC5nZXRBZERlc2lnblR5cGVzQnlBZExvY2F0aW9uVHlwZUlkKGFkTG9jYXRpb25UeXBlT2JqZWN0T3JJZC5pZCA/IGFkTG9jYXRpb25UeXBlT2JqZWN0T3JJZC5pZCA6IGFkTG9jYXRpb25UeXBlT2JqZWN0T3JJZCwgdGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkKQ0KICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5hZERlc2lnblR5cGVzID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgdGhpcy5hZERlc2lnblR5cGVzID0gW10NCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmFkRGVzaWduVHlwZXMgPSBbXQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmFkRGVzaWduVHlwZXMgPSBbXQ0KICAgICAgICB0aGlzLmFkVm9sdW1lVHlwZXMgPSBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxBZExvY2F0aW9uVHlwZShvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuYWRMb2NhdGlvblR5cGVzLmZpbmQoZSA9PiBlLmlkID09IChvcHQuaWQgPyBvcHQuaWQgOiBvcHQpKTsNCiAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLm5hbWVSdSwNCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVeiwNCiAgICAgICAgfSkNCiAgICAgICAgfWANCiAgICAgIH0NCiAgICAgIHJldHVybiBgYDsNCiAgICB9LA0KICAgIGN1c3RvbUxhYmVsQWREZXNpZ25UeXBlKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5hZERlc2lnblR5cGVzLmZpbmQoZSA9PiBlLmlkID09IChvcHQuaWQgPyBvcHQuaWQgOiBvcHQpKTsNCiAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLm5hbWVSdSwNCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLm5hbWVMdCwNCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVeiwNCiAgICAgICAgfSkNCiAgICAgICAgfWANCiAgICAgIH0NCiAgICAgIHJldHVybiBgYDsNCiAgICB9LA0KICAgIGN1c3RvbUxhYmVsUmVnaW9uKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5yZWdpb25zLmZpbmQoZSA9PiBlLnJlZ2lvbklkID09IChvcHQucmVnaW9uSWQgPyBvcHQucmVnaW9uSWQgOiBvcHQpKTsNCiAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLnJlZ2lvbk5hbWVSdSwNCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLnJlZ2lvbk5hbWVMdCwNCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLnJlZ2lvbk5hbWVVeiwNCiAgICAgICAgfSkNCiAgICAgICAgfWANCiAgICAgIH0NCiAgICAgIHJldHVybiBgYDsNCiAgICB9LA0KICAgIGN1c3RvbUxhYmVsVW5pdChvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMudW5pdHMuZmluZChlID0+IGUuaWQgPT0gKG9wdC5pZCA/IG9wdC5pZCA6IG9wdCkpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICB9KQ0KICAgICAgICB9YA0KICAgICAgfQ0KICAgICAgcmV0dXJuIGBgOw0KICAgIH0sDQogICAgdHJlZUNsb3NlZCh2ZWVOYW1lKSB7DQogICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVmc1t2ZWVOYW1lXS52YWxpZGF0ZSgpOw0KICAgIH0sDQogICAgbm9ybWFsaXplcihub2RlKSB7DQogICAgICBpZiAoIW5vZGUuY2hpbGRyZW4gfHwgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHsNCiAgICAgICAgZGVsZXRlIG5vZGUuY2hpbGRyZW4NCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBpZDogbm9kZS5pZCwNCiAgICAgICAgICBsYWJlbDogdGhpcy5nZXROYW1lKHsNCiAgICAgICAgICAgIG5hbWVSdTogbm9kZS5uYW1lUnUsDQogICAgICAgICAgICBuYW1lTHQ6IG5vZGUubmFtZUx0LA0KICAgICAgICAgICAgbmFtZVV6OiBub2RlLm5hbWVVeiwNCiAgICAgICAgICB9KSwNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaWQ6IG5vZGUuaWQsDQogICAgICAgIGxhYmVsOiB0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogbm9kZS5uYW1lUnUsDQogICAgICAgICAgbmFtZUx0OiBub2RlLm5hbWVMdCwNCiAgICAgICAgICBuYW1lVXo6IG5vZGUubmFtZVV6LA0KICAgICAgICB9KSwNCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwID8gbm9kZS5jaGlsZHJlbiA6IFtdLA0KICAgICAgfQ0KICAgIH0sDQogICAgc2F2ZSgpIHsNCiAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4odmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nSXRlbS5pZCB8fCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsNCiAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UudXBkYXRlKE1BSU5fQVBJX1VSTCwgdGhpcy5lZGl0aW5nSXRlbSwgZmFsc2UsIHRydWUpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnJlc2V0KCkNCiAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHthZGRyZXNzRHRvOiB7fX0pOw0KICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7dHlwZTogJ3N1Y2Nlc3MnfSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmNyZWF0ZShNQUlOX0FQSV9VUkwsIHRoaXMuZWRpdGluZ0l0ZW0sIGZhbHNlLCB0cnVlKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB7YWRkcmVzc0R0bzoge319KTsNCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5zYXZlZF9zdWNjZXNzZnVsbHknKSwge3R5cGU6ICdzdWNjZXNzJ30pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwge3R5cGU6ICdlcnJvcid9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KICAvKg0KICAqIENSRUFURUQgKi8NCiAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLml0ZW1zUGVyUGFnZSA9IDUwMDsNCiAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCkNCiAgICBpZiAodGhpcy5pc01vZGVDcmVhdGUpIHsNCiAgICAgIGF3YWl0IGNydWRBbmRMaXN0c1NlcnZpY2UuZ2V0RW1wdHkoTUFJTl9BUElfVVJMKQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gcmVzLmRhdGENCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgfSkNCiAgICB9IGVsc2Ugew0KICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5nZXRCeUlkKE1BSU5fQVBJX1VSTCwgdGhpcy4kcm91dGUucGFyYW1zLmlkLCB0cnVlLCBudWxsKQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gcmVzLmRhdGENCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgfSkNCiAgICB9DQoNCiAgICAvLyBHRVQgUkVHSU9OUw0KICAgIGF3YWl0IGhlbHBlclNlcnZpY2UuZmV0Y2hSZWdpb25zRm9yQmFrZXJ5QnlDdXJyZW50VXNlcklkKCkNCiAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLnJlZ2lvbnMgPSByZXMuZGF0YQ0KICAgICAgICAgIHRoaXMucmVnaW9uU2VsZWN0ZWQodGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvID8gdGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkIDogbnVsbCwgdHJ1ZSkNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgIH0pDQoNCiAgICAvLyBHRVQgQ09OVFJBQ1RPUlMNCiAgICBhd2FpdCB0aGlzLmZldGNoQ29udHJhY3RvcnMoKQ0KICAgIGlmICghdGhpcy5pc01vZGVDcmVhdGUpIHsNCiAgICAgIHRoaXMuY29udHJhY3RvclNlbGVjdGVkKHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvcklkKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["CreateOrUpdate.vue"],"names":[],"mappings":";AA2TA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateOrUpdate.vue","sourceRoot":"src/modules/products/bakery-stations/modules/list_and_crud","sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      @save=\"save\"\r\n      has-save-suspend\r\n      :custom-title=\"$t('submodules.ad_passport_info.title') + ' - ' + isModeCreate ? $t('actions.create') : $t('actions.update')\"\r\n  >\r\n    <ValidationObserver ref=\"observer\" v-slot=\"{}\" >\r\n      <b-row class=\"mb-3\">\r\n        <b-col sm=\"12\" md=\"6\" >\r\n          <BaseInputWithValidation\r\n              :rules=\"{required: true, regex: /\\b\\d{9}\\b/}\"\r\n              class=\"required\"\r\n              name=\"INN\"\r\n              v-model=\"editingItem.inn\"\r\n              @blur=\"validateInn\"\r\n              @keyup.enter=\"getSingleContractorByInn\"\r\n              mask=\"#########\"\r\n              :label=\"$t('submodules.bakery_stations.bakery_station_owner_inn')\"\r\n              with-input-append\r\n          >\r\n            <template v-slot:append-slot>\r\n              <!-- CONTRACTOR SEARCH BUTTON -->\r\n              <b-button\r\n                  v-if=\"!contractorNotFound\"\r\n                  @click=\"getSingleContractorByInn\"\r\n                  variant=\"outline-primary\"\r\n                  id=\"contractorSearchButton\"\r\n                  style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n              >\r\n                <i class=\"mdi mdi-account-search\"></i>\r\n              </b-button>\r\n              <!-- CONTRACTOR ADD BUTTON -->\r\n              <b-button\r\n                  v-else\r\n                  @click=\"contractorCreateModal = true\"\r\n                  variant=\"outline-info\"\r\n                  id=\"contractorSearchButton\"\r\n                  style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n              >\r\n                <i class=\"mdi mdi-plus-circle\"></i>\r\n              </b-button>\r\n            </template>\r\n          </BaseInputWithValidation>\r\n        </b-col>\r\n\r\n        <b-col sm=\"12\" md=\"6\">\r\n          <BaseMultiselectWithValidation\r\n              rules=\"required\"\r\n              class=\"required\"\r\n              v-model=\"editingItem.contractorId\"\r\n              :has-next-page=\"hasNextPageContractors\"\r\n              @select=\"contractorSelected\"\r\n              @reachedEndOfList=\"contractorReachedEndOfList\"\r\n              @search-change=\"debounceSearchContractors\"\r\n              :searchable=\"true\"\r\n              :allow-empty=\"false\"\r\n              preserve-search\r\n              :clear-on-select=\"false\"\r\n              :loading=\"isLoadingContractors\"\r\n              :internal-search=\"false\"\r\n              :options=\"contractors.map(e => e.id)\"\r\n              :label=\"$t('submodules.bakery_stations.bakery_station_owner')\"\r\n              placeholder=\"\"\r\n              :custom-label=\"customLabelContractor\"\r\n              open-direction=\"bottom\"\r\n              :max-height=\"600\"\r\n              :show-labels=\"false\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row class=\"mb-3\">\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseInputWithValidation\r\n              not-required\r\n              disabled\r\n              v-model=\"editingItem.contractorPhoneNumber\"\r\n              :label=\"$t('submodules.bakery_stations.bakery_station_owner_phone_number')\"\r\n              mask=\"+998#########\"\r\n          />\r\n        </b-col>\r\n\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseTextareaWithValidation\r\n              not-required\r\n              disabled\r\n              v-model=\"editingItem.contractorAddress\"\r\n              max-rows=\"2\"\r\n              :label=\"$t('submodules.bakery_stations.bakery_station_owner_address')\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row class=\"mb-3\">\r\n        <b-col cols=\"12\">\r\n          <h5 class=\"m-0 text-center\">\r\n            {{ $t('submodules.bakery_stations.bakery_station_exact_address') }}\r\n          </h5>\r\n          <hr>\r\n        </b-col>\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseMultiselectWithValidation\r\n              rules=\"required\"\r\n              class=\"required\"\r\n              v-model=\"editingItem.addressDto.regionId\"\r\n              @select=\"regionSelected\"\r\n              :options=\"regions.map(e => e.regionId)\"\r\n              :label=\"$t('column.region')\"\r\n              placeholder=\"\"\r\n              :custom-label=\"customLabelRegion\"\r\n              open-direction=\"bottom\"\r\n              :max-height=\"600\"\r\n              :show-labels=\"false\"\r\n          />\r\n        </b-col>\r\n\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseMultiselectWithValidation\r\n              rules=\"required\"\r\n              class=\"required\"\r\n              v-model=\"editingItem.addressDto.districtId\"\r\n              @select=\"districtSelected\"\r\n              :options=\"districts.map(e => e.id)\"\r\n              :label=\"$t('column.district')\"\r\n              placeholder=\"\"\r\n              :custom-label=\"customLabelDistrict\"\r\n              open-direction=\"bottom\"\r\n              :max-height=\"600\"\r\n              :show-labels=\"false\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row class=\"mb-3\">\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseMultiselectWithValidation\r\n              not-required\r\n              v-model=\"editingItem.addressDto.quarterId\"\r\n              :options=\"quarters.map(e => e.id)\"\r\n              :label=\"$t('column.quarter')\"\r\n              placeholder=\"\"\r\n              :custom-label=\"customLabelQuarter\"\r\n              open-direction=\"bottom\"\r\n              :max-height=\"600\"\r\n              :show-labels=\"false\"\r\n              withCreateAddition\r\n          >\r\n            <template v-slot:append-slot>\r\n              <b-button\r\n                  @click=\"quartersModal = true\"\r\n                  variant=\"outline-primary\"\r\n                  style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n              >\r\n                <i class=\"mdi mdi-plus-circle\"></i>\r\n              </b-button>\r\n            </template>\r\n          </BaseMultiselectWithValidation>\r\n          <BaseModalForCreate\r\n              v-model=\"quartersModal\"\r\n              mainApiUrl=\"directory/quarter-names\"\r\n              :additional-params=\"{regionId: editingItem.addressDto.regionId,\r\n              districtId: editingItem.addressDto.districtId}\"\r\n              createFormName=\"CreateFormGeoRegionQuarters\"\r\n              @new-ref-created=\"newRefCreated\"\r\n          />\r\n        </b-col>\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <b-row>\r\n            <b-col cols=\"6\">\r\n              <BaseInputWithValidation\r\n                  rules=\"required|positiveNotZero\"\r\n                  class=\"required\"\r\n                  :disabled=\"true\"\r\n                  v-model=\"editingItem.latNumber\"\r\n                  custom-styles=\"grid-template-columns: 51% 43%;\"\r\n                  name=\"addressLocation\"\r\n                  :label=\"$t('column.location_address')\"\r\n                  :placeholder=\"$t('column.latitude')\"\r\n              />\r\n            </b-col>\r\n            <b-col cols=\"3\">\r\n              <BaseInputWithValidation\r\n                  rules=\"required|positiveNotZero\"\r\n                  only-form-element\r\n                  v-model=\"editingItem.lngNumber\"\r\n                  :disabled=\"true\"\r\n                  custom-styles=\"grid-template-columns: unset;\"\r\n                  :placeholder=\"$t('column.longitude')\"\r\n              />\r\n            </b-col>\r\n            <b-col cols=\"3\">\r\n              <b-button\r\n                  @click=\"openMapModal\"\r\n                  variant=\"primary\"\r\n                  size=\"sm\"\r\n                  pill\r\n              >\r\n                <i class=\"mdi mdi-map-marker font-size-16 align-middle\"></i>\r\n                {{ $t('column.map') }}\r\n              </b-button>\r\n            </b-col>\r\n          </b-row>\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row class=\"mb-3\">\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseInputWithValidation\r\n              not-required\r\n              v-model=\"editingItem.addressDto.additional\"\r\n              name=\"additionalAddress\"\r\n              :label=\"$t('column.orienter')\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row class=\"mb-3\">\r\n        <b-col cols=\"12\">\r\n          <hr>\r\n        </b-col>\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseInputWithValidation\r\n              rules=\"required\"\r\n              class=\"required\"\r\n              v-model=\"editingItem.name\"\r\n              :label=\"$t('column.name')\"\r\n          />\r\n        </b-col>\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseTextareaWithValidation\r\n              not-required\r\n              v-model=\"editingItem.description\"\r\n              max-rows=\"8\"\r\n              :label=\"$t('column.comment')\"\r\n              :placeholder=\"$t('column.comment')\"\r\n          />\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <b-row class=\"mb-3\">\r\n        <b-col\r\n            sm=\"12\"\r\n            md=\"6\"\r\n        >\r\n          <BaseDatePickerWithValidation\r\n              not-required\r\n              disableAfter\r\n              v-model=\"editingItem.constructDate\"\r\n              :label=\"$t('column.created_date')\"\r\n              lang=\"ru\"\r\n          ></BaseDatePickerWithValidation>\r\n        </b-col>\r\n      </b-row>\r\n    </ValidationObserver>\r\n\r\n    <!-- CONTRACTOR CREATE MODAL -->\r\n    <b-modal\r\n        v-model=\"contractorCreateModal\"\r\n        id=\"create-multiple-min-collections-modal-id\"\r\n        size=\"xl\"\r\n        :title=\"$t('column.contractor')\"\r\n        title-class=\"font-18\"\r\n        :ok-title=\"$t('actions.save')\"\r\n        @ok=\"createContractor\"\r\n        @cancel=\"fetchContractorsWithKeyword('', false, true)\"\r\n        ok-variant=\"success\"\r\n        :cancel-title=\"$t('actions.cancel')\"\r\n        cancel-variant=\"danger\"\r\n        no-close-on-backdrop\r\n        no-close-on-esc\r\n    >\r\n      <CreateFormContractor\r\n          @saved=\"contractorSaved\"\r\n          :custom-is-mode-create=\"true\"\r\n          ref=\"createFormContractor\"\r\n      ></CreateFormContractor>\r\n    </b-modal>\r\n\r\n    <!-- MAP TO CHOOSE LOCATION OF AD_CONSTRUCTION -->\r\n    <MapInModal\r\n        :visible=\"mapModal\"\r\n        :event=\"{lat: editingItem.latNumber, lng: editingItem.lngNumber}\"\r\n        @saveLocation=\"saveLocation\"\r\n        @close=\"mapModal = false\"\r\n    ></MapInModal>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'bakery'\r\nconst APPEND_API_URL_FOR_GOVERNMENT = 'by-first-agent'\r\n/*\r\n* YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport helperService from \"@/shared/services/helper.service\"\r\n\r\nimport MapInModal from './components/MapInModal'\r\nimport CreateFormContractor from '@/shared/views/components/CreateFormContractor'\r\n\r\nexport default {\r\n  name: \"CreateOrUpdate\",\r\n  /*\r\n  * COMPONENTS */\r\n  components: {\r\n    MapInModal,\r\n    CreateFormContractor\r\n\r\n  },\r\n  /*\r\n  * DATA */\r\n  data() {\r\n    return {\r\n      notFormattedMonthlyPayment: null,\r\n      adSideValue: null,\r\n      districtModal: false,\r\n      quartersModal: false,\r\n      streetsModal: false,\r\n      mapModal: false,\r\n\r\n      editingItem: {\r\n        addressDto: {}\r\n      },\r\n      hasNextPageContractors: false,\r\n      contractors: [],\r\n      debounce: null,\r\n      isLoadingContractors: false,\r\n      districts: [],\r\n      quarters: [],\r\n      streets: [],\r\n      adTypes: [],\r\n      adGroups: [],\r\n      adZones: [],\r\n      adSides: [],\r\n      adVolumeTypes: [],\r\n      localPassportExpireDate: [],\r\n      contractorCreateModal: false,\r\n      minCollectionValue: null,\r\n      coefficientValue: null,\r\n      contractorNotFound: false,\r\n      contractorSearchPayload: {},\r\n      checkPassportNumberLoading: false,\r\n      dbPassportNumber: '',\r\n      isPassportNumberInvalid: false,\r\n\r\n      minimumCollections: [],\r\n      createMultipleMinimumCollectionsModal: false,\r\n      singleMinimumCollectionUpdateModal: false,\r\n      statuses: [],\r\n      regions: [],\r\n      units: [],\r\n      adLocationTypes: [],\r\n      adDesignTypes: [],\r\n      adObjectStates: [],\r\n      dropzoneOptions: {\r\n        url: \"https://httpbin.org/post\",\r\n        dictDefaultMessage: 'ファイルをドロップしてください.',\r\n        thumbnailWidth: 150,\r\n        maxFilesize: 1.0,\r\n        addRemoveLinks: true,\r\n        dictRemoveFile: 'x',\r\n        maxFiles: 3,\r\n      },\r\n      architectDocFile: {},\r\n      photo: {},\r\n      passportDocFile: {},\r\n      passportPhoto: {},\r\n      paymentDocFile: {},\r\n    }\r\n  },\r\n  /*\r\n  * COMPUTED */\r\n  computed: {\r\n    inputMinValue(value) {\r\n      return value.editingItem.passportGivenDate\r\n    },\r\n    inputMaxValue(value) {\r\n      return value.editingItem.passportExpireDate\r\n    },\r\n    isModeCreate() {\r\n      return this.$route.name == 'CreateBakeryStation'\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    }\r\n  },\r\n  /*\r\n  * METHODS */\r\n  methods: {\r\n    findAndSetAdVolumeType() {\r\n      this.editingItem.directoryAdvertisementVolumeTypeId = null\r\n\r\n      if (this.editingItem.volume) {\r\n        this.adVolumeTypes.forEach(vType => {\r\n          if (parseFloat(this.editingItem.volume) >= vType.minBorder && parseFloat(this.editingItem.volume) <= vType.maxBorder) {\r\n            this.editingItem.directoryAdvertisementVolumeTypeId = vType.id\r\n          }\r\n        })\r\n      }\r\n      this.adVolumeTypeSelected(this.editingItem.directoryAdvertisementVolumeTypeId)\r\n    },\r\n    adSideSelected($event) {\r\n      let foundAdSide = this.adSides.find(el => el.id == $event)\r\n      this.adSideValue = foundAdSide ? foundAdSide.code : null\r\n      this.calculateAndSetMonthlyPayment()\r\n    },\r\n    adVolumeTypeSelected($event) {\r\n      this.getMinCollectionValue(this.editingItem.addressDto.regionId, this.editingItem.addressDto.districtId, this.editingItem.directoryAdvertisementLocationTypeId, this.editingItem.directoryAdvertisementDesignTypeId, $event)\r\n    },\r\n    calculateAndSetMonthlyPayment() {\r\n      this.$set(this.editingItem, 'monthlyPayment', null)\r\n      this.notFormattedMonthlyPayment = null\r\n      if (this.minCollectionValue && this.coefficientValue && this.editingItem.designTypePrivilegeCoefficient && this.editingItem.volume && this.adSideValue) {\r\n        let num = (parseFloat(this.minCollectionValue) * parseFloat(this.coefficientValue) * parseFloat(this.editingItem.designTypePrivilegeCoefficient) * parseFloat(this.editingItem.volume) * parseFloat(this.adSideValue)).toFixed(2)\r\n        this.notFormattedMonthlyPayment = num\r\n        let formattedPaymentValue = this.getNumberFormat(num)\r\n        this.$set(this.editingItem, 'monthlyPayment', formattedPaymentValue)\r\n      } else {\r\n        this.$set(this.editingItem, 'monthlyPayment', null)\r\n        this.notFormattedMonthlyPayment = null\r\n      }\r\n    },\r\n    getPrivilegeCoefficientValueByAdDesignTypeId(adDesignTypeId) {\r\n      if (adDesignTypeId) {\r\n        helperService.getPrivilegeCoefficientValueByAdDesignTypeId(adDesignTypeId)\r\n            .then(res => {\r\n              this.editingItem.designTypePrivilegeCoefficient = res.data\r\n              this.calculateAndSetMonthlyPayment()\r\n            })\r\n            .catch(e => console.log(e))\r\n      }\r\n    },\r\n    newRefCreated(newOptions, newId, formName) {\r\n      if (formName == 'CreateFormGeoRegionQuarters') {\r\n        this.quarters = newOptions\r\n        this.editingItem.addressDto.quarterId = newId\r\n      } else if (formName == 'CreateFormGeoRegionStreets') {\r\n        this.streets = newOptions\r\n        this.editingItem.addressDto.streetId = newId\r\n      }\r\n    },\r\n    async onBlurPassportNumberInput(value) {\r\n      if (this.isPassportNumberInvalid) {\r\n        await this.checkAdPassportNumber(value, true);\r\n      }\r\n    },\r\n    async debounceCheckPassportNumber(searchText) {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(async () => {\r\n        await this.checkAdPassportNumber(searchText);\r\n      }, 1000);\r\n    },\r\n    checkAdPassportNumber(searchQuery = \"\", fromOnBlur = false) {\r\n      /*\r\n       * AVOID MULTIPLE REQUESTS AT ONCE */\r\n      if (!this.editingItem.addressDto.regionId || !searchQuery || this.checkPassportNumberLoading || (!this.isModeCreate && this.editingItem.passportNumber == this.dbPassportNumber)) return;\r\n      this.checkPassportNumberLoading = true;\r\n      helperService.checkAdPassportNumberByRegion(searchQuery, this.editingItem.addressDto.regionId)\r\n          .then(res => {\r\n            this.isPassportNumberInvalid = res.data;\r\n            if (this.isPassportNumberInvalid) {\r\n              this.computedObserver.setErrors({PassportNumber: [this.$t('validator.ad_passport_number_already_in_use')]});\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n          .finally(() => {\r\n            this.checkPassportNumberLoading = false;\r\n            /*\r\n               * FOYDALANUVCHI YOZAYOTGAN BO'LSA INPUTNI QAYTA FOCUS QIL (ON_BLUR EVENTDAN BO'LSA FOCUS QILMA) */\r\n            if (!fromOnBlur) {\r\n              let passportNumberInput = this.$refs.passportNumber.$el.querySelector(\r\n                  \"input\"\r\n              );\r\n              setTimeout(() => {\r\n                passportNumberInput.focus();\r\n              }, 50);\r\n            }\r\n          });\r\n    },\r\n    saveLocation(e) {\r\n      this.$set(this.editingItem, 'latNumber', e.lat)\r\n      this.$set(this.editingItem, 'lngNumber', e.lng)\r\n      this.mapModal = false\r\n    },\r\n    drawCreated(e) {\r\n      var type = e.layerType,\r\n          layer = e.layer;\r\n\r\n      if (type === 'marker') {\r\n        layer.bindPopup('A popup!');\r\n      }\r\n\r\n      this.featureGroup.addLayer(layer);\r\n    },\r\n    openMapModal() {\r\n      this.mapModal = true\r\n    },\r\n    async contractorSaved(res) {\r\n      this.contractorCreateModal = false\r\n      this.contractorNotFound = false\r\n      await this.fetchContractorsWithKeyword('', true)\r\n    },\r\n    createContractor(e) {\r\n      e.preventDefault()\r\n\r\n      this.$refs.createFormContractor.save()\r\n    },\r\n    validateInn() {\r\n      helperService.validateInnFromApi(this.editingItem.inn)\r\n          .then(res => {\r\n            if (!res.data) {\r\n              this.computedObserver.setErrors({INN: [this.$t('validator.inn')]});\r\n              this.contractorSelected(null, true)\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    getSingleContractorByInn() {\r\n      if (this.computedObserver.fields.INN.valid) {\r\n        helperService.validateInnFromApi(this.editingItem.inn)\r\n            .then(res => {\r\n              if (res.data) {\r\n                helperService.getSingleContractorByInn(this.editingItem.inn)\r\n                    .then(res => {\r\n                      this.contractorNotFound = false\r\n                      this.contractorSelected(res.data, false, true)\r\n                    })\r\n                    .catch(e => {\r\n                      this.contractorNotFound = true\r\n                    })\r\n              } else {\r\n                this.computedObserver.setErrors({INN: [this.$t('validator.inn')]});\r\n                this.contractorSelected(null, true)\r\n              }\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n            })\r\n      }\r\n    },\r\n    handleWidthLengthInput(widthOrLength) {\r\n      if (this.editingItem.width && this.editingItem.length) {\r\n        try {\r\n          this.editingItem.volume = parseFloat(this.editingItem.width) * parseFloat(this.editingItem.length)\r\n          this.findAndSetAdVolumeType()\r\n          this.calculateAndSetMonthlyPayment()\r\n        } catch (error) {\r\n          this.editingItem.volume = null\r\n          this.calculateAndSetMonthlyPayment()\r\n          this.findAndSetAdVolumeType()\r\n        }\r\n      } else {\r\n        this.editingItem.volume = null\r\n        this.calculateAndSetMonthlyPayment()\r\n        this.findAndSetAdVolumeType()\r\n      }\r\n    },\r\n    addPassportDateChanged(e) {\r\n      if (e[0]) {\r\n        this.editingItem.passportGivenDate = e[0]\r\n        this.editingItem.passportExpireDate = e[1]\r\n      } else {\r\n        this.editingItem.passportGivenDate = null\r\n        this.editingItem.passportExpireDate = null\r\n      }\r\n    },\r\n    customLabelAdSide(opt) {\r\n      let selected = this.adSides.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })}`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelAdVolumeType(opt) {\r\n      let selected = this.adVolumeTypes.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })}`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelAdZone(opt) {\r\n      let selected = this.adZones.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelAdRegionGroup(opt) {\r\n      let selected = this.adGroups.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelAdType(opt) {\r\n      let selected = this.adTypes.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelStreet(opt) {\r\n      let selected = this.streets.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelQuarter(opt) {\r\n      let selected = this.quarters.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelDistrict(opt) {\r\n      let selected = this.districts.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    async regionSelected($event, dontResetDistrict = false) {\r\n      if (!dontResetDistrict) {\r\n        this.editingItem.addressDto.districtId = null\r\n      }\r\n      if ($event) {\r\n        // GET DISTRICTS\r\n        await helperService.getGeoLocationsByParentId($event)\r\n            .then(res => {\r\n              this.districts = res.data\r\n              if (dontResetDistrict)\r\n                this.districtSelected(this.editingItem.addressDto.districtId, true)\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n            })\r\n      }\r\n    },\r\n    getCoefficientValue(districtId, adZoneId) {\r\n      if (districtId && adZoneId && this.isByAgency) {\r\n        helperService.getCoefficientValueByZoneAndDistrictIds(districtId, adZoneId)\r\n            .then(res => {\r\n              this.coefficientValue = res.data ? res.data.coefficient : null\r\n              if (this.minCollectionValue) {\r\n                this.calculateAndSetMonthlyPayment()\r\n                // this.$set(this.editingItem, 'monthlyPayment', parseFloat(this.minCollectionValue) * parseFloat(this.coefficientValue))\r\n              }\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n              this.coefficientValue = null\r\n              // this.$set(this.editingItem, 'monthlyPayment', null)\r\n              this.calculateAndSetMonthlyPayment()\r\n            })\r\n      }\r\n    },\r\n    getMinCollectionValue(regionId, districtId, adLocationTypeId, adDesignTypeId, adVolumeTypeId) {\r\n      // GET MINIMUM_COLLECTION (M) BY REGION, DISTRICT AND AD_DESIGN_TYPE IDS\r\n      if (regionId && districtId && adLocationTypeId && adDesignTypeId && this.isByAgency && !this.editingItem.isUzAvtoYul) {\r\n        helperService.getMinCollectionValueByRegionAndDistrictIds(regionId, districtId, adLocationTypeId, adDesignTypeId, adVolumeTypeId)\r\n            .then(res => {\r\n              this.minCollectionValue = res.data ? res.data.cost : null\r\n              if (this.coefficientValue) {\r\n                this.calculateAndSetMonthlyPayment()\r\n                // this.$set(this.editingItem, 'monthlyPayment', parseFloat(this.minCollectionValue) * parseFloat(this.coefficientValue))\r\n              }\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n              this.minCollectionValue = null\r\n              this.calculateAndSetMonthlyPayment()\r\n              // this.$set(this.editingItem, 'monthlyPayment', null)\r\n            })\r\n      } else {\r\n        this.minCollectionValue = null\r\n      }\r\n    },\r\n    async districtSelected($event, dontResetQuarter = false) {\r\n      if (!dontResetQuarter) {\r\n        this.editingItem.addressDto.quarterId = null\r\n        this.editingItem.directoryAdvertisementZoneId = null\r\n      }\r\n      if ($event) {\r\n        // GET QUARTERS\r\n        await crudAndListsService.searchListWithKeyword('directory/quarter-names', this.var_default_search_payload, `get-by-districtId/${$event}`)\r\n            .then(res => {\r\n              this.quarters = res.data.list\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n              this.quarters = []\r\n            })\r\n      } else {\r\n        this.quarters = []\r\n      }\r\n    },\r\n    async adDesignTypeSelected($event) {\r\n      this.getMinCollectionValue(this.editingItem.addressDto.regionId, this.editingItem.addressDto.districtId, this.editingItem.directoryAdvertisementLocationTypeId, $event, this.editingItem.directoryAdvertisementVolumeTypeId)\r\n      this.getPrivilegeCoefficientValueByAdDesignTypeId($event)\r\n    },\r\n    async adZoneSelected($event) {\r\n      this.getCoefficientValue(this.editingItem.addressDto.districtId, $event)\r\n    },\r\n    customObjectState(opt) {\r\n      let selected = this.adObjectStates.find(e => e.id == (opt.id ? opt.id : opt));\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelContractor(opt) {\r\n      let selected = this.contractors.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${selected.fullName}`\r\n      }\r\n      return ``;\r\n    },\r\n    contractorReachedEndOfList(e) {\r\n      if (e) {\r\n        this.fetchContractors()\r\n      }\r\n    },\r\n    contractorSelected(contractorDtoOrId, dontResetInn = false, fromInnSearch = false) {\r\n      let foundContractor = fromInnSearch ? this.contractors.find(c => c.id == contractorDtoOrId.id) : this.contractors.find(c => c.id == contractorDtoOrId)\r\n      if (fromInnSearch && contractorDtoOrId && !foundContractor) {\r\n        this.contractors.push(contractorDtoOrId)\r\n        foundContractor = contractorDtoOrId\r\n      }\r\n      if (foundContractor) {\r\n        this.editingItem.contractorId = fromInnSearch ? contractorDtoOrId.id : contractorDtoOrId\r\n        this.editingItem.inn = foundContractor.inn\r\n        this.editingItem.contractorPhoneNumber = null\r\n        this.editingItem.contractorPhoneNumber = foundContractor.mobileNumber\r\n        this.$set(this.editingItem, 'contractorAddress', `${foundContractor.addressDto.regionNameUz}, ${foundContractor.addressDto.districtNameUz} ${foundContractor.addressDto.additional ? ',' + foundContractor.addressDto.additional : ''}`)\r\n        // this.editingItem.contractorAddress = `${foundContractor.addressDto.regionNameUz}, ${foundContractor.addressDto.districtNameUz} ${foundContractor.addressDto.additional ? ',' + foundContractor.addressDto.additional : ''}`\r\n        this.contractorNotFound = false\r\n      } else {\r\n        if (!dontResetInn) {\r\n          this.editingItem.inn = null\r\n        }\r\n        this.editingItem.contractorId = null\r\n        this.editingItem.contractorPhoneNumber = null\r\n        this.editingItem.contractorAddress = null\r\n      }\r\n    },\r\n    async debounceSearchContractors(searchText) {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(async () => {\r\n        await this.fetchContractorsWithKeyword(searchText);\r\n      }, 1000);\r\n    },\r\n    /* async debounceSearchContractorsByInn (searchText) {\r\n        clearTimeout(this.debounce);\r\n        this.debounce = setTimeout(async () => {\r\n            await this.getSingleContractorByInn();\r\n        }, 1000);\r\n    }, */\r\n    fetchContractorsWithKeyword(keyword, makeSelectedByInn = false, fromContractorModalCancel = false) {\r\n      this.contractors = []\r\n      this.contractorSearchPayload.page = 1\r\n      this.contractorSearchPayload.keyword = keyword ? keyword : ''\r\n      this.fetchContractors(makeSelectedByInn, fromContractorModalCancel)\r\n    },\r\n    async fetchContractors(makeSelectedByInn, fromContractorModalCancel) {\r\n      this.isLoadingContractors = true\r\n      await crudAndListsService.searchListWithKeyword('contractor', this.contractorSearchPayload, 'by-contractor')\r\n          .then(res => {\r\n            this.contractors.push(...res.data.list)\r\n            if (makeSelectedByInn || fromContractorModalCancel) {\r\n              let foundContractor = this.contractors.find(el => el.inn == this.editingItem.inn)\r\n              if (foundContractor) {\r\n                this.contractorSelected(foundContractor.id)\r\n              }\r\n            }\r\n            this.hasNextPageContractors = res.data.total / this.contractorSearchPayload.itemsPerPage > this.contractorSearchPayload.page\r\n            this.contractorSearchPayload.page += 1\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n            this.contractors = []\r\n          })\r\n          .finally(() => {\r\n            this.isLoadingContractors = false\r\n          })\r\n    },\r\n    async adLocationTypeSelected(adLocationTypeObjectOrId, dontResetAdDesignType = false) {\r\n      if (!dontResetAdDesignType) {\r\n        this.editingItem.directoryAdvertisementDesignTypeId = null\r\n        this.editingItem.directoryAdvertisementVolumeTypeId = null\r\n      }\r\n      if (adLocationTypeObjectOrId) {\r\n        this.getMinCollectionValue(this.editingItem.addressDto.regionId, this.editingItem.addressDto.districtId, adLocationTypeObjectOrId.id ? adLocationTypeObjectOrId.id : adLocationTypeObjectOrId, this.editingItem.directoryAdvertisementDesignTypeId, this.editingItem.directoryAdvertisementVolumeTypeId)\r\n        // GET AD_VOLUME_TYPES\r\n        helperService\r\n            .getAdVolumeTypesByAdLocationTypeId(adLocationTypeObjectOrId.id ? adLocationTypeObjectOrId.id : adLocationTypeObjectOrId)\r\n            .then((res) => {\r\n              this.adVolumeTypes = res.data\r\n              this.findAndSetAdVolumeType()\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n            })\r\n        if (this.editingItem.addressDto.regionId) {\r\n          // GET AD_DESIGN_TYPES\r\n          helperService\r\n              .getAdDesignTypesByAdLocationTypeId(adLocationTypeObjectOrId.id ? adLocationTypeObjectOrId.id : adLocationTypeObjectOrId, this.editingItem.addressDto.regionId)\r\n              .then((res) => {\r\n                this.adDesignTypes = res.data\r\n              })\r\n              .catch(e => {\r\n                console.log(e)\r\n                this.adDesignTypes = []\r\n              })\r\n        } else {\r\n          this.adDesignTypes = []\r\n        }\r\n      } else {\r\n        this.adDesignTypes = []\r\n        this.adVolumeTypes = []\r\n      }\r\n    },\r\n    customLabelAdLocationType(opt) {\r\n      let selected = this.adLocationTypes.find(e => e.id == (opt.id ? opt.id : opt));\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelAdDesignType(opt) {\r\n      let selected = this.adDesignTypes.find(e => e.id == (opt.id ? opt.id : opt));\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelRegion(opt) {\r\n      let selected = this.regions.find(e => e.regionId == (opt.regionId ? opt.regionId : opt));\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.regionNameRu,\r\n          nameLt: selected.regionNameLt,\r\n          nameUz: selected.regionNameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelUnit(opt) {\r\n      let selected = this.units.find(e => e.id == (opt.id ? opt.id : opt));\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    treeClosed(veeName) {\r\n      this.computedObserver.refs[veeName].validate();\r\n    },\r\n    normalizer(node) {\r\n      if (!node.children || node.children.length === 0) {\r\n        delete node.children\r\n        return {\r\n          id: node.id,\r\n          label: this.getName({\r\n            nameRu: node.nameRu,\r\n            nameLt: node.nameLt,\r\n            nameUz: node.nameUz,\r\n          }),\r\n        }\r\n      }\r\n      return {\r\n        id: node.id,\r\n        label: this.getName({\r\n          nameRu: node.nameRu,\r\n          nameLt: node.nameLt,\r\n          nameUz: node.nameUz,\r\n        }),\r\n        children: node.children && node.children.length > 0 ? node.children : [],\r\n      }\r\n    },\r\n    save() {\r\n      this.computedObserver.validate().then(valid => {\r\n        if (valid) {\r\n          if (this.editingItem.id || this.$route.params.id) {\r\n            crudAndListsService.update(MAIN_API_URL, this.editingItem, false, true).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {addressDto: {}});\r\n              this.$router.go(-1)\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n            })\r\n          } else {\r\n            crudAndListsService.create(MAIN_API_URL, this.editingItem, false, true).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {addressDto: {}});\r\n              this.$router.go(-1)\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n            })\r\n          }\r\n        } else {\r\n          this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n        }\r\n      });\r\n    }\r\n  },\r\n  /*\r\n  * CREATED */\r\n  async created() {\r\n    this.var_default_search_payload.itemsPerPage = 500;\r\n    this.contractorSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n    if (this.isModeCreate) {\r\n      await crudAndListsService.getEmpty(MAIN_API_URL)\r\n          .then(res => {\r\n            this.editingItem = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    } else {\r\n      await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, true, null)\r\n          .then(res => {\r\n            this.editingItem = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    }\r\n\r\n    // GET REGIONS\r\n    await helperService.fetchRegionsForBakeryByCurrentUserId()\r\n        .then(res => {\r\n          this.regions = res.data\r\n          this.regionSelected(this.editingItem.addressDto ? this.editingItem.addressDto.regionId : null, true)\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n\r\n    // GET CONTRACTORS\r\n    await this.fetchContractors()\r\n    if (!this.isModeCreate) {\r\n      this.contractorSelected(this.editingItem.contractorId)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.col-form-label {\r\n  padding-top: 0;\r\n}\r\n\r\nul {\r\n  list-style-type: none;\r\n}\r\n\r\n.dz-remove {\r\n  display: inline-block !important;\r\n  width: 1.2em;\r\n  height: 1.2em;\r\n\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 5px;\r\n  z-index: 1000;\r\n\r\n  font-size: 1.2em !important;\r\n  line-height: 1em;\r\n\r\n  text-align: center;\r\n  font-weight: bold;\r\n  border: 1px solid gray !important;\r\n  border-radius: 1.2em;\r\n  color: gray;\r\n  background-color: white;\r\n  opacity: 0.5;\r\n}\r\n\r\n.dz-remove:hover {\r\n  text-decoration: none !important;\r\n  opacity: 1;\r\n}\r\n</style>"]}]}