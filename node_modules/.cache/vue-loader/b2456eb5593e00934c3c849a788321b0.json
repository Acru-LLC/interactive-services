{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\advertisement\\modules\\ad_passport_info\\components\\MapInModal.vue?vue&type=style&index=0&id=9128c7f0&lang=scss&scoped=true&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\advertisement\\modules\\ad_passport_info\\components\\MapInModal.vue","mtime":1674799496628},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1667355376309},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1667355356565},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1667355363746},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1667355361315},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCjo6di1kZWVwLm1hcC13cmFwcGVyIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDYwMHB4Ow0KICAgICNtYXBTZWFyY2hDb250YWluZXIgew0KICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgIHRvcDogMjBweDsNCiAgICAgICAgcmlnaHQ6IDQwcHg7DQogICAgICAgIGhlaWdodDogMzBweDsNCiAgICAgICAgd2lkdGg6IDE4MHB4Ow0KICAgICAgICB6LWluZGV4OiAxMTA7DQogICAgICAgIGZvbnQtc2l6ZTogMTBwdDsNCiAgICAgICAgY29sb3I6ICM1ZDVkNWQ7DQogICAgICAgIGJvcmRlcjogc29saWQgMXB4ICNiYmI7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQogICAgfQ0KfQ0K"},{"version":3,"sources":["MapInModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MapInModal.vue","sourceRoot":"src/modules/advertisement/modules/ad_passport_info/components","sourcesContent":["<template>\r\n    <div>\r\n        <b-modal\r\n            size=\"xl\"\r\n            :visible=\"visible\"\r\n            @hidden=\"$emit('clear')\"\r\n            :title=\"$t('column.map')\"\r\n            @shown=\"modalShown\"\r\n            title-class=\"font-18\"\r\n            :ok-title=\"$t('actions.save')\"\r\n            @ok=\"saveLocation\"\r\n            @cancel=\"$emit('close')\"\r\n            ok-variant=\"success\"\r\n            :cancel-title=\"$t('actions.cancel')\"\r\n            cancel-variant=\"danger\"\r\n            no-close-on-backdrop\r\n            no-close-on-esc\r\n            hide-header-close\r\n        >\r\n            <b-container class=\"text-left\">\r\n                <!-- MAP WRAPPER -->\r\n                <div class=\"map-wrapper\">\r\n                    <l-map\r\n                        :center=\"center\"\r\n                        :zoom=\"6\"\r\n                        ref=\"mymap\"\r\n                        @click=\"addMarker\"\r\n                    >\r\n                        <l-tile-layer :url=\"url\" :attribution=\"attribution\" />\r\n                        <v-locatecontrol />\r\n                        <!-- <l-marker :lat-lng=\"center\"></l-marker> -->\r\n                    </l-map>\r\n                </div>\r\n            </b-container>\r\n        </b-modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// import * as moment from \"moment\";\r\nimport { LMap, LMarker, LTileLayer } from \"vue2-leaflet\";\r\n// import { deleteEvent } from \"./api\";\r\n// import \"vue-weather-widget/dist/css/vue-weather-widget.css\";\r\n// import VueWeatherWidget from \"vue-weather-widget\";\r\n// define custom marker\r\nimport L from 'leaflet'\r\nimport * as esri_geo from 'esri-leaflet-geocoder';\r\nimport Vue2LeafletLocatecontrol from 'vue2-leaflet-locatecontrol'\r\n// import LDraw from 'leaflet-draw';\r\n// Import leaflet draw css and icons for draw toolbar\r\n// import 'leaflet-draw/dist/leaflet.draw.css';\r\nvar MyCustomMarker = L.Icon.extend({\r\n    options: {\r\n        shadowUrl: null,\r\n        iconAnchor: new L.Point(12, 12),\r\n        iconSize: new L.Point(24, 30),\r\n        iconUrl: require('@/assets/images/map-marker.png')\r\n    }\r\n});\r\nexport default {\r\n    data () {\r\n        return {\r\n            center: L.latLng(41.381166, 64.5735819),\r\n            marker: null,\r\n            lat: null,\r\n            lng: null,\r\n            url: \"http://{s}.tile.osm.org/{z}/{x}/{y}.png\",\r\n            attribution:\r\n                '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n        };\r\n    },\r\n    props: {\r\n        visible: {\r\n            type: Boolean\r\n        },\r\n        event: {\r\n            required: true,\r\n            type: Object\r\n        }\r\n    },\r\n    methods: {\r\n        addMarker (e) {\r\n            if (this.marker) {\r\n                this.map.removeLayer(this.marker);\r\n            }\r\n            this.lat = e.latlng.lat\r\n            this.lng = e.latlng.lng\r\n            this.marker = new L.Marker(e.latlng, { icon: new MyCustomMarker() }).addTo(this.map);\r\n        },\r\n        drawCreated (e) {\r\n            var type = e.layerType,\r\n                layer = e.layer;\r\n\r\n            if (type === 'marker') {\r\n                // layer.bindPopup('A popup!');\r\n                this.lat = e.layer._latlng.lat\r\n                this.lng = e.layer._latlng.lng\r\n                this.featureGroup.addLayer(layer);\r\n            }\r\n\r\n        },\r\n        saveLocation (e) {\r\n            e.preventDefault();\r\n\r\n            if (this.marker && this.lat && this.lng) {\r\n                this.$emit('saveLocation', { lat: this.lat, lng: this.lng })\r\n            }\r\n        },\r\n        async deleteEventLocal (id) {\r\n            // await deleteEvent(id);\r\n            this.$emit(\"refresh\");\r\n            this.$emit(\"clear\");\r\n        },\r\n        modalShown () {\r\n            setTimeout(() => {\r\n                this.$refs.mymap.mapObject.invalidateSize();\r\n                this.map = this.$refs.mymap.mapObject;\r\n                if (this.marker) {\r\n                    this.map.removeLayer(this.marker);\r\n                }\r\n                if (this.event.lat && this.event.lng) {\r\n                    this.lat = this.event.lat\r\n                    this.lng = this.event.lng\r\n                    this.marker = new L.Marker(this.event, { icon: new MyCustomMarker() }).addTo(this.map);\r\n                    this.map.setView(this.event, 17);\r\n                } else {\r\n                    this.lat = null\r\n                    this.lng = null\r\n                }\r\n                var searchControl = new esri_geo.geosearch({\r\n                    providers: [\r\n                        esri_geo.arcgisOnlineProvider({\r\n                            // API Key to be passed to the ArcGIS Online Geocoding Service\r\n                            apikey: 'AAPK9acf37860a924037b15132e490ddc20eOLJx7XB1eMCSpCz9GHsYDLeibbVI0Fzzh31h1N9b_cN7OIAYryLzBxkJ5NBwI03l'\r\n                        })\r\n                    ],\r\n                    useMapBounds: false,\r\n                    placeholder: this.$t('column.search')\r\n                }).addTo(this.map);\r\n\r\n                // var results = new L.LayerGroup().addTo(this.map);\r\n                let vm = this\r\n                searchControl.on('results', function (data) {\r\n                    // results.clearLayers();\r\n                    /* for (var i = data.results.length - 1; i >= 0; i--) {\r\n                        results.addLayer(L.marker(data.results[i].latlng));\r\n                    } */\r\n                    if (data.results[0])\r\n                        vm.addMarker(data.results[0])\r\n                });\r\n            }, 100);\r\n        }\r\n    },\r\n    components: {\r\n        LMap,\r\n        LTileLayer,\r\n        'v-locatecontrol': Vue2LeafletLocatecontrol\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep.map-wrapper {\r\n    width: 100%;\r\n    height: 600px;\r\n    #mapSearchContainer {\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 40px;\r\n        height: 30px;\r\n        width: 180px;\r\n        z-index: 110;\r\n        font-size: 10pt;\r\n        color: #5d5d5d;\r\n        border: solid 1px #bbb;\r\n        background-color: #f8f8f8;\r\n    }\r\n}\r\n</style>"]}]}