{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\e-auction-info\\CreateOrUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\integration\\modules\\e-auction-info\\CreateOrUpdate.vue","mtime":1677469283064},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpjb25zdCBNQUlOX0FQSV9VUkwgPSAnZS1hdWN0aW9uLWluZm8nDQppbXBvcnQgQmFzZVNlbGVjdFdpdGhWYWxpZGF0aW9uIGZyb20gIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvYmFzZS9CYXNlU2VsZWN0V2l0aFZhbGlkYXRpb24udnVlIjsNCmltcG9ydCBhcGlTZXJ2aWNlIGZyb20gIi4uLy4uLy4uLy4uL3NoYXJlZC9zZXJ2aWNlcy9hcGkuc2VydmljZSI7DQppbXBvcnQgc3RhdGlzdGljc1NlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvaW50ZWdyYXRpb24vc3RhdGlzdGljcy5zZXJ2aWNlLmpzIg0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJDcmVhdGVPclVwZGF0ZSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRhdGE6IHsNCiAgICAgICAgYXVjdGlvbl9kYXRlOiBudWxsLA0KICAgICAgICBzb2F0bzogbnVsbCwNCiAgICAgICAgYXJlYV9zb2F0bzogIiINCiAgICAgIH0sDQogICAgICBkaXN0cmljdHM6IFtdLA0KICAgICAgcmVnaW9uczogW10NCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGlzTW9kZUNyZWF0ZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAiSW50ZWdyYXRpb25FQXVjdGlvbkluZm9DcmVhdGUiOw0KICAgIH0sDQogICAgY29tcHV0ZWRPYnNlcnZlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyOw0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAnZGF0YS5zb2F0byc6IHsNCiAgICAgIGhhbmRsZXIoZSkgew0KICAgICAgICB0aGlzLmdldERpc3RyaWN0c1dpdGhTb2F0b3MoZS5pZCkNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzYXZlKCkgew0KICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnZhbGlkYXRlKCkudGhlbigodmFsaWQsIGEpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgYXBpU2VydmljZS5wb3N0KE1BSU5fQVBJX1VSTCArIGAvZGVwbG95LWluZm9ybWF0aW9uP2F1Y3Rpb25fZGF0ZT0ke3RoaXMuZGF0YS5hdWN0aW9uX2RhdGV9JnNvYXRvPSR7dGhpcy5kYXRhLnNvYXRvLnNvYXRvfSZhcmVhX3NvYXRvPSR7dGhpcy5kYXRhLmFyZWFfc29hdG99YCwgbnVsbCwgdHJ1ZSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnJlc2V0KCk7DQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwge30pOw0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsNCiAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoIm1lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseSIpLCB7dHlwZTogInN1Y2Nlc3MifSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqDQogICAgICogR2V0IFJlZ2lvbkxpc3QNCiAgICAgKi8NCiAgICBnZXRSZWdpb25zV2l0aFNvYXRvcygpIHsNCiAgICAgIHN0YXRpc3RpY3NTZXJ2aWNlLmdldEdlb2dyYWZpY2FsUmVnaW9uc1dpdGhTb2F0b3MoKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMucmVnaW9ucyA9IHJlcy5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0RGlzdHJpY3RzV2l0aFNvYXRvcyhwYXJlbnRJZCkgew0KICAgICAgc3RhdGlzdGljc1NlcnZpY2UuZ2V0R2VvZ3JhZmljYWxEaXN0cmljdHNXaXRoU29hdG9zKHBhcmVudElkKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZGlzdHJpY3RzID0gcmVzLmRhdGENCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gNTAwOw0KICAgIHRoaXMuZ2V0UmVnaW9uc1dpdGhTb2F0b3MoKQ0KICB9LA0KICBjb21wb25lbnRzOiB7QmFzZVNlbGVjdFdpdGhWYWxpZGF0aW9ufQ0KfQ0K"},{"version":3,"sources":["CreateOrUpdate.vue"],"names":[],"mappings":";AA0EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateOrUpdate.vue","sourceRoot":"src/modules/integration/modules/e-auction-info","sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      :custom-title=\"isModeCreate ? $t('actions.create') : $t('actions.update')\"\r\n      has-save-suspend\r\n      @save=\"save\"\r\n  >\r\n    <ValidationObserver ref=\"observer\" v-slot=\"{}\">\r\n      <b-row class=\"mb-3\">\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseDatePickerWithValidation\r\n              rules=\"required\"\r\n              required\r\n              format=\"DD.MM.YYYY\"\r\n              :label=\"$t('submodules.integration.e_auction_info.date')\"\r\n              :placeholder=\"$t('submodules.integration.e_auction_info.date')\"\r\n              v-model=\"data.auction_date\"\r\n          />\r\n        </b-col>\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseSelectWithValidation\r\n              v-model=\"data.soato\"\r\n              class=\"required\"\r\n              rules=\"required\"\r\n              :label=\"$t('submodules.integration.e_auction_info.region_saoto')\"\r\n              value-field=\"id\"\r\n          >\r\n            <template #first>\r\n              <b-form-select-option\r\n                  :value=\"null\"\r\n                  disabled\r\n              >{{ $t('submodules.integration.e_auction_info.region_saoto') }}\r\n              </b-form-select-option>\r\n            </template>\r\n            <b-form-select-option v-for=\"(region, index) in regions\"\r\n                                  :key=\"`${region}-${index}`\"\r\n                                  :value=\"region\">{{\r\n                getName({\r\n                  nameRu: region.nameRu,\r\n                  nameLt: region.nameLt,\r\n                  nameUz: region.nameUz,\r\n                })\r\n              }} ({{ region.soato }})\r\n            </b-form-select-option>\r\n          </BaseSelectWithValidation>\r\n        </b-col>\r\n        <b-col lg=\"4\" md=\"6\" sm=\"12\">\r\n          <BaseSelectWithValidation\r\n              v-model=\"data.area_soato\"\r\n              :label=\"$t('submodules.integration.e_auction_info.district_saoto')\"\r\n              value-field=\"id\"\r\n          >\r\n            <template #first>\r\n              <b-form-select-option\r\n                  :value=\"null\"\r\n                  disabled\r\n              >{{ $t('submodules.integration.e_auction_info.district_saoto') }}\r\n              </b-form-select-option>\r\n            </template>\r\n            <b-form-select-option v-for=\"(district, index) in districts\" :key=\"`${district}-${index}`\"\r\n                                  :value=\"district.soato\">{{\r\n                getName({\r\n                  nameRu: district.nameRu,\r\n                  nameLt: district.nameLt,\r\n                  nameUz: district.nameUz,\r\n                })\r\n              }} ({{ district.soato }})\r\n            </b-form-select-option>\r\n          </BaseSelectWithValidation>\r\n        </b-col>\r\n      </b-row>\r\n    </ValidationObserver>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'e-auction-info'\r\nimport BaseSelectWithValidation from \"../../../../components/base/BaseSelectWithValidation.vue\";\r\nimport apiService from \"../../../../shared/services/api.service\";\r\nimport statisticsService from \"@/shared/services/integration/statistics.service.js\"\r\n\r\nexport default {\r\n  name: \"CreateOrUpdate\",\r\n  data() {\r\n    return {\r\n      data: {\r\n        auction_date: null,\r\n        soato: null,\r\n        area_soato: \"\"\r\n      },\r\n      districts: [],\r\n      regions: []\r\n    };\r\n  },\r\n  computed: {\r\n    isModeCreate() {\r\n      return this.$route.name === \"IntegrationEAuctionInfoCreate\";\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer;\r\n    }\r\n  },\r\n  watch: {\r\n    'data.soato': {\r\n      handler(e) {\r\n        this.getDistrictsWithSoatos(e.id)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    save() {\r\n      this.computedObserver.validate().then((valid, a) => {\r\n        if (valid) {\r\n          apiService.post(MAIN_API_URL + `/deploy-information?auction_date=${this.data.auction_date}&soato=${this.data.soato.soato}&area_soato=${this.data.area_soato}`, null, true).then(res => {\r\n            this.computedObserver.reset();\r\n            this.editingItem = Object.assign({}, {});\r\n            this.$router.go(-1);\r\n            this.$toast(this.$t(\"messages.saved_successfully\"), {type: \"success\"});\r\n          });\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * Get RegionList\r\n     */\r\n    getRegionsWithSoatos() {\r\n      statisticsService.getGeograficalRegionsWithSoatos().then(res => {\r\n        this.regions = res.data\r\n      })\r\n    },\r\n    getDistrictsWithSoatos(parentId) {\r\n      statisticsService.getGeograficalDistrictsWithSoatos(parentId).then(res => {\r\n        this.districts = res.data\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.var_default_search_payload.itemsPerPage = 500;\r\n    this.getRegionsWithSoatos()\r\n  },\r\n  components: {BaseSelectWithValidation}\r\n}\r\n</script>\r\n<style scoped>\r\n.base-form-component {\r\n  display: block;\r\n}\r\n\r\n.base-form-component__label {\r\n  padding: 10px 0;\r\n}\r\n</style>"]}]}