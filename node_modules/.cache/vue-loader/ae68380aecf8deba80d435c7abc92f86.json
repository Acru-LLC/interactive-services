{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\management\\modules\\roles\\UpdateRolePermissions.vue?vue&type=style&index=0&id=1f3bbd00&scoped=true&lang=scss&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\management\\modules\\roles\\UpdateRolePermissions.vue","mtime":1674799497592},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1667355376309},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1667355356565},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1667355363746},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1667355361315},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCjo6di1kZWVwLnBlcm0tZ3JvdXAtd3JhcHBlciB7DQogIHBhZGRpbmc6IDFyZW07DQogIGJvcmRlcjogc29saWQgMXB4ICNjY2NjY2M7DQogIGJvcmRlci1yYWRpdXM6IDFyZW07DQogIG1hcmdpbi10b3A6IDNyZW07DQoNCiAgLnBlcm0tZ3JvdXAtdGl0bGUgew0KICAgIHBhZGRpbmc6IDAuNXJlbTsNCiAgICBtYXJnaW4tdG9wOiAtMi41cmVtOw0KICAgIHdpZHRoOiAzMCU7DQogICAgbWFyZ2luLXJpZ2h0OiBhdXRvOw0KICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgIGZvbnQtc2l6ZTogMXJlbTsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBib3JkZXItcmFkaXVzOiAxcmVtOw0KDQogICAgLnBlcm0tZ3JvdXAtdGl0bGUtaWNvbiB7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1Ow0KDQogICAgICBpIHsNCiAgICAgICAgY29sb3I6IGdyZWVuOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC5wZXJtLWdyb3VwLXRpdGxlLWxhYmVsIHsNCiAgICAgIGNvbG9yOiBncmVlbjsNCg0KICAgICAgbWFyayB7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgLnBlcm0tZ3JvdXAtc2luZ2xlLXBlcm0gew0KICAgIGZvbnQtc2l6ZTogMC45cmVtOw0KICB9DQp9DQo="},{"version":3,"sources":["UpdateRolePermissions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"UpdateRolePermissions.vue","sourceRoot":"src/modules/management/modules/roles","sourcesContent":["<template>\r\n  <base-create-or-update-wrapper\r\n      @save=\"givePermissionsToRole\"\r\n      has-save-suspend\r\n      :custom-title=\"`${editingItem.name ? editingItem.name : ''} (${$t('submodules.roles.permissions')})`\"\r\n  >\r\n    <b-container\r\n        fluid\r\n        class=\"perm-group-wrapper\"\r\n        v-for=\"(permType, index) in permsListByRoleId\"\r\n        :key=\"`permCardForRole ${permType}-${index}`\"\r\n    >\r\n      <b-row>\r\n        <b-col\r\n            cols=\"12\"\r\n            class=\"form-check perm-group-title\"\r\n        >\r\n          <mark class=\"perm-group-title-icon\"><i class=\"fa fa-check \"></i></mark>\r\n\r\n          <span\r\n              @click=\"addOrRemoveAll(permType.forType.type)\"\r\n              class=\"form-check-label perm-group-title-label\"\r\n          >\r\n                        <mark>{{\r\n                            getName({\r\n                              nameRu: permType.forType.typeNameRu,\r\n                              nameLt: permType.forType.typeNameLt,\r\n                              nameUz: permType.forType.typeNameUz,\r\n                            }) ? getName({\r\n                              nameRu: permType.forType.typeNameRu,\r\n                              nameLt: permType.forType.typeNameLt,\r\n                              nameUz: permType.forType.typeNameUz,\r\n                            }) : permType.forType.type\r\n                          }}</mark>\r\n                    </span>\r\n        </b-col>\r\n\r\n        <b-col\r\n            cols=\"12\"\r\n            class=\"perm-group-single-perm mt-3\"\r\n        >\r\n          <b-row>\r\n            <b-col\r\n                class=\"py-2\"\r\n                cols=\"3\"\r\n                v-for=\"(list, i) in permType.list\"\r\n                :key=\"`perm-checkbox-${i}`\"\r\n            >\r\n              <div class=\"form-check\">\r\n                <input\r\n                    v-model=\"editingItem.permissionIds\"\r\n                    class=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    :id=\"'permId' + list.id\"\r\n                    :value=\"list.id\"\r\n                />\r\n                <label\r\n                    class=\"form-check-label font-weight-normal\"\r\n                    :for=\"'permId' + list.id\"\r\n                >\r\n                  {{\r\n                    getName({\r\n                      nameRu: list.name_ru,\r\n                      nameLt: list.name_lt,\r\n                      nameUz: list.name_uz,\r\n                    })\r\n                  }}\r\n                </label>\r\n              </div>\r\n            </b-col>\r\n          </b-row>\r\n          <!-- <div class=\"form-check\">\r\n          </div> -->\r\n        </b-col>\r\n      </b-row>\r\n    </b-container>\r\n  </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'role'\r\n/*\r\n* YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport helperService from \"@/shared/services/helper.service\"\r\n\r\nexport default {\r\n  name: \"UpdateRolePermissions\",\r\n  /*\r\n  * COMPONENTS */\r\n  components: {},\r\n  /*\r\n  * DATA */\r\n  data() {\r\n    return {\r\n      editingItem: {},\r\n      permsListByRoleId: {}\r\n    }\r\n  },\r\n  /*\r\n  * COMPUTED */\r\n  computed: {\r\n    isModeCreate() {\r\n      return this.$route.name === 'CreateRole'\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    }\r\n  },\r\n  /*\r\n  * METHODS */\r\n  methods: {\r\n    addOrRemoveAll(permType) {\r\n      let foundPermObject = this.permsListByRoleId.find(perm => permType == perm.forType.type)\r\n      let permIdsOfPermType = []\r\n      if (foundPermObject) {\r\n        permIdsOfPermType = foundPermObject.list.map(el => {\r\n          return el.id\r\n        })\r\n      }\r\n      let allFounded = permIdsOfPermType.every(ai => this.editingItem.permissionIds.includes(ai));\r\n      if (allFounded) {\r\n        this.editingItem.permissionIds = this.editingItem.permissionIds.filter(function (el) {\r\n          return !permIdsOfPermType.includes(el);\r\n        });\r\n      } else {\r\n        permIdsOfPermType.forEach(idToAdd => {\r\n          let index = this.editingItem.permissionIds.findIndex(x => x === idToAdd);\r\n          if (index === -1) {\r\n            this.editingItem.permissionIds.push(idToAdd)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    async givePermissionsToRole() {\r\n      await helperService.updateRolePermissionsById(this.editingItem, true)\r\n          .then(res => {\r\n            this.$router.go(-1)\r\n            this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    async changePermsOfRole(item) {\r\n      this.loading = true;\r\n      this.dialogForPerms = true;\r\n      this.editingIndex = this.rolesList.indexOf(item);\r\n      this.editingItem = Object.assign({}, item);\r\n      this.currentRolePermIds = [...item.permissionIds];\r\n      await this.getPermissionsListByRoleId(item.id);\r\n      this.loading = false\r\n    },\r\n  },\r\n  /*\r\n  * CREATED */\r\n  async created() {\r\n    // GET CURRENT ROLE\r\n    await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, true)\r\n        .then(res => {\r\n          this.editingItem = res.data\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n\r\n    // GET PERMISSIONS_LIST BY ROLE ID\r\n    await helperService.permissionsListByRoleId(this.$route.params.id, true)\r\n        .then(res => {\r\n          this.permsListByRoleId = res.data\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n::v-deep.perm-group-wrapper {\r\n  padding: 1rem;\r\n  border: solid 1px #cccccc;\r\n  border-radius: 1rem;\r\n  margin-top: 3rem;\r\n\r\n  .perm-group-title {\r\n    padding: 0.5rem;\r\n    margin-top: -2.5rem;\r\n    width: 30%;\r\n    margin-right: auto;\r\n    margin-left: auto;\r\n    font-size: 1rem;\r\n    display: flex;\r\n    align-items: center;\r\n    background-color: #f5f5f5;\r\n    justify-content: center;\r\n    border-radius: 1rem;\r\n\r\n    .perm-group-title-icon {\r\n      background-color: #f5f5f5;\r\n\r\n      i {\r\n        color: green;\r\n      }\r\n    }\r\n\r\n    .perm-group-title-label {\r\n      color: green;\r\n\r\n      mark {\r\n        background-color: #f5f5f5;\r\n      }\r\n    }\r\n  }\r\n\r\n  .perm-group-single-perm {\r\n    font-size: 0.9rem;\r\n  }\r\n}\r\n</style>"]}]}