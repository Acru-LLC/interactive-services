{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\components\\CreateFormContractor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\components\\CreateFormContractor.vue","mtime":1667352074591},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovKg0KKiBZT1UgTVVTVCBTRU5EIHt7IE1BSU5fQVBJX1VSTCB9fSBUTyBDUlVEX1NFUlZJQ0UgKi8NCmltcG9ydCBjcnVkQW5kTGlzdHNTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2NydWRfYW5kX2xpc3Quc2VydmljZSINCmltcG9ydCBoZWxwZXJTZXJ2aWNlIGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL2hlbHBlci5zZXJ2aWNlIg0KDQpjb25zdCBNQUlOX0FQSV9VUkwgPSAnY29udHJhY3RvcicNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkNyZWF0ZUZvcm1Db250cmFjdG9yIiwNCiAgLyoNCiAgKiBQUk9QUyAqLw0KICBwcm9wczogew0KICAgIGN1c3RvbUlzTW9kZUNyZWF0ZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICAvKg0KICAqIENPTVBPTkVOVFMgKi8NCiAgY29tcG9uZW50czoge30sDQogIC8qDQogICogREFUQSAqLw0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmb3VuZGVyc0ZpZWxkczogWw0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICIjIiwNCiAgICAgICAgICB0aENsYXNzOiAidGV4dC1jZW50ZXIiLA0KICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsDQogICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgIGtleTogImluZGV4IiwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogJ2Z1bGxOYW1lJywNCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLm5hbWUnKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogJ2lubicsDQogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5pbm4nKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogJ3BuZmwnLA0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ucGVyc29uYWxfbnVtYmVyJyksDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICd0eXBlJywNCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnR5cGUnKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogJ2ZvdW5kZXJTaGFyZVBlcmNlbnQnLA0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uc2hhcmVfcGVyY2VudGFnZScpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAnZm91bmRlclNoYXJlU3VtJywNCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnNoYXJlX3N1bScpLA0KICAgICAgICB9LA0KICAgICAgXSwNCiAgICAgIG9yaWdpbmFsRHRvOiB7DQogICAgICAgIGFkZHJlc3NEdG86IHt9LA0KICAgICAgICBmb3VuZGVyc0R0b3M6IFtdDQogICAgICB9LA0KICAgICAgb3JpZ2luYWxJbm46IG51bGwsDQogICAgICAvLyBDT05UUkFDVE9SIFNFTEVDVF9BTkRfQ1JFQVRFIFZBUlMNCiAgICAgIGhhc05leHRQYWdlQ29udHJhY3RvcnM6IGZhbHNlLA0KICAgICAgY29udHJhY3RvcnM6IFtdLA0KICAgICAgZGVib3VuY2U6IG51bGwsDQogICAgICBpc0xvYWRpbmdDb250cmFjdG9yczogZmFsc2UsDQogICAgICBjb250cmFjdG9yQ3JlYXRlTW9kYWw6IGZhbHNlLA0KICAgICAgY29udHJhY3RvclNlYXJjaFBheWxvYWQ6IHt9LA0KICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICBmb3JtT2ZPd25lcnNoaXBzOiBbXSwNCiAgICAgIHJlZ2lvbnM6IFtdLA0KICAgICAgZGlzdHJpY3RzOiBbXSwNCiAgICAgIHN0YXR1c2VzOiBbXSwNCiAgICAgIGVkaXRpbmdJdGVtOiB7DQogICAgICAgIGFkZHJlc3NEdG86IHt9LA0KICAgICAgICBmb3VuZGVyc0R0b3M6IFtdDQogICAgICB9LA0KICAgICAgZGVmYXVsdEZvdW5kZXI6IHsNCiAgICAgICAgZm91bmRlck5hbWU6IG51bGwsDQogICAgICAgIHBlcmNlbnRhZ2U6IG51bGwNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIC8qDQogICogQ09NUFVURUQgKi8NCiAgY29tcHV0ZWQ6IHsNCiAgICBpc01vZGVDcmVhdGUoKSB7DQogICAgICByZXR1cm4gdGhpcy5jdXN0b21Jc01vZGVDcmVhdGUgPyB0aGlzLmN1c3RvbUlzTW9kZUNyZWF0ZSA6IHRoaXMuJHJvdXRlLm5hbWUgPT09ICdDcmVhdGVDb250cmFjdG9yJw0KICAgIH0sDQogICAgY29tcHV0ZWRPYnNlcnZlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyDQogICAgfSwNCiAgICBjb21wdXRlZEZvdW5kZXJzRHRvcygpew0KICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0ucmVnQ29udHJhY3RvckR0bz8uZm91bmRlcnM/Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdGluZ0l0ZW0ucmVnQ29udHJhY3RvckR0by5mb3VuZGVycy5tYXAoKGZvdW5kZXIsIGluZGV4KSA9PiB7DQogICAgICAgICAgaWYgKGZvdW5kZXIuZm91bmRlckluZGl2aWR1YWwpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgIGluZGV4OiBpbmRleCwNCiAgICAgICAgICAgICAgZnVsbE5hbWU6IGAke2ZvdW5kZXIuZm91bmRlckluZGl2aWR1YWwubGFzdE5hbWV9ICR7Zm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC5maXJzdE5hbWV9ICR7Zm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC5taWRkbGVOYW1lfWAsDQogICAgICAgICAgICAgIGlubjogZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC50aW4gPz8gbnVsbCwNCiAgICAgICAgICAgICAgcG5mbDogZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC5waW5mbCA/PyBudWxsLA0KICAgICAgICAgICAgICB0eXBlOiBudWxsLA0KICAgICAgICAgICAgICBpc0xlZ2FsOiBmYWxzZSwNCiAgICAgICAgICAgICAgZm91bmRlclNoYXJlUGVyY2VudDogZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbD8uZm91bmRlclNoYXJlUGVyY2VudCA/PyBudWxsLA0KICAgICAgICAgICAgICBmb3VuZGVyU2hhcmVTdW06IGZvdW5kZXIuZm91bmRlckluZGl2aWR1YWw/LmZvdW5kZXJTaGFyZVN1bSA/PyBudWxsLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoZm91bmRlci5mb3VuZGVyTGVnYWwpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgIGluZGV4OiBpbmRleCwNCiAgICAgICAgICAgICAgZnVsbE5hbWU6IGZvdW5kZXIuZm91bmRlckxlZ2FsPy5uYW1lID8/IG51bGwsDQogICAgICAgICAgICAgIGlubjogZm91bmRlci5mb3VuZGVyTGVnYWw/LnRpbiA/PyBudWxsLA0KICAgICAgICAgICAgICBwbmZsOiBudWxsLA0KICAgICAgICAgICAgICB0eXBlOiBudWxsLA0KICAgICAgICAgICAgICBpc0xlZ2FsOiB0cnVlLA0KICAgICAgICAgICAgICBmb3VuZGVyU2hhcmVQZXJjZW50OiBmb3VuZGVyLmZvdW5kZXJMZWdhbD8uZm91bmRlclNoYXJlUGVyY2VudCA/PyBudWxsLA0KICAgICAgICAgICAgICBmb3VuZGVyU2hhcmVTdW06IGZvdW5kZXIuZm91bmRlckxlZ2FsPy5mb3VuZGVyU2hhcmVTdW0gPz8gbnVsbCwNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgICByZXR1cm4gdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MNCiAgICB9DQogIH0sDQogIC8qDQogICogTUVUSE9EUyAqLw0KICBtZXRob2RzOiB7DQogICAgLy8gQ09OVFJBQ1RPUiBTRUxFQ1RfQU5EX0NSRUFURSBNRVRIT0RTDQogICAgY29udHJhY3RvclJlYWNoZWRFbmRPZkxpc3QoZSkgew0KICAgICAgaWYgKGUgJiYgIXRoaXMuaXNMb2FkaW5nQ29udHJhY3RvcnMpIHsNCiAgICAgICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGRlYm91bmNlU2VhcmNoQ29udHJhY3RvcnMoc2VhcmNoVGV4dCkgew0KICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2UpOw0KICAgICAgdGhpcy5kZWJvdW5jZSA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICBhd2FpdCB0aGlzLmZldGNoQ29udHJhY3RvcnNXaXRoS2V5d29yZChzZWFyY2hUZXh0KTsNCiAgICAgIH0sIDEwMDApOw0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxDb250cmFjdG9yKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5jb250cmFjdG9ycy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHtzZWxlY3RlZC5mdWxsTmFtZX1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBmZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoa2V5d29yZCwgbWFrZUZpcnN0U2VsZWN0ZWQgPSBmYWxzZSkgew0KICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnDQogICAgICB0aGlzLmZldGNoQ29udHJhY3RvcnMobWFrZUZpcnN0U2VsZWN0ZWQpDQogICAgfSwNCiAgICBhc3luYyBmZXRjaENvbnRyYWN0b3JzKG1ha2VGaXJzdFNlbGVjdGVkKSB7DQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnRCeSA9IFtdDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnRCeS5wdXNoKCdjcmVhdGVkJykNCiAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuc29ydERlc2MgPSBbXQ0KICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5zb3J0RGVzYy5wdXNoKHRydWUpDQogICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gdHJ1ZQ0KICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQoJ2NvbnRyYWN0b3InLCB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLCAnYnktY29udHJhY3RvcicsICF0aGlzLmN1c3RvbUlzTW9kZUNyZWF0ZSkNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycy5wdXNoKC4uLnJlcy5kYXRhLmxpc3QpDQogICAgICAgICAgICB0aGlzLmhhc05leHRQYWdlQ29udHJhY3RvcnMgPSByZXMuZGF0YS50b3RhbCAvIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuaXRlbXNQZXJQYWdlID4gdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5wYWdlDQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgKz0gMQ0KICAgICAgICAgICAgaWYgKG1ha2VGaXJzdFNlbGVjdGVkKSB7DQogICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucGFyZW50SWQgPSB0aGlzLmNvbnRyYWN0b3JzLmxlbmd0aCA/IHRoaXMuY29udHJhY3RvcnNbMF0uaWQgOiBudWxsDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgfSkNCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gZmFsc2UNCiAgICAgICAgICB9KQ0KICAgIH0sDQogICAgbmV3UmVmQ3JlYXRlZChmb3JtTmFtZSkgew0KICAgICAgaWYgKGZvcm1OYW1lID09ICdDcmVhdGVGb3JtQ29udHJhY3RvcicpIHsNCiAgICAgICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoJycsIHRydWUpDQogICAgICB9DQogICAgfSwNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICBhZGRGb3VuZGVyRHRvKCkgew0KICAgICAgbGV0IHRtcCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEZvdW5kZXIpDQogICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcy5wdXNoKHRtcCkNCiAgICB9LA0KICAgIHNldERlZmF1bHRBY3RpdmVTdGF0dXMoKSB7DQogICAgICBsZXQgYWN0aXZlU3RhdHVzID0gdGhpcy5zdGF0dXNlcy5maW5kKGVsID0+IGVsLmNvZGUgPT0gJ0FDVElWRScpDQogICAgICBpZiAoYWN0aXZlU3RhdHVzKSB7DQogICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uc3RhdHVzSWQgPSBhY3RpdmVTdGF0dXMuaWQNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIHJlZ2lvblNlbGVjdGVkKCRldmVudCwgZG9udFJlc2V0RGlzdHJpY3QgPSBmYWxzZSkgew0KICAgICAgaWYgKCFkb250UmVzZXREaXN0cmljdCkgew0KICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8uZGlzdHJpY3RJZCA9IG51bGwNCiAgICAgIH0NCiAgICAgIC8vIEdFVCBESVNUUklDVFMNCiAgICAgIGlmICgkZXZlbnQpDQogICAgICAgIGF3YWl0IGhlbHBlclNlcnZpY2UuZ2V0R2VvTG9jYXRpb25zQnlQYXJlbnRJZCgkZXZlbnQpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICB0aGlzLmRpc3RyaWN0cyA9IHJlcy5kYXRhDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgfSkNCiAgICB9LA0KICAgIGFzeW5jIHZhbGlkYXRlSW5uKCkgew0KICAgICAgbGV0IHJlcyA9IGF3YWl0IGhlbHBlclNlcnZpY2UudmFsaWRhdGVJbm5Gcm9tQXBpKHRoaXMuZWRpdGluZ0l0ZW0uaW5uKQ0KICAgICAgaWYgKCFyZXMuZGF0YSkgew0KICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHtJTk46IFt0aGlzLiR0KCd2YWxpZGF0b3IuaW5uJyldfSk7DQogICAgICB9DQogICAgICByZXR1cm4gcmVzLmRhdGENCiAgICAgIC8qICBoZWxwZXJTZXJ2aWNlLnZhbGlkYXRlSW5uRnJvbUFwaSh0aGlzLmVkaXRpbmdJdGVtLmlubikNCiAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgIGlmICghcmVzLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHsgSU5OOiBbdGhpcy4kdCgndmFsaWRhdG9yLmlubicpXSB9KTsNCiAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgfSkgKi8NCiAgICB9LA0KICAgIHNldEZvdW5kZXJzRnJvbVNvbGlxKGZvdW5kZXJzRnJvbVNvbGlxID0gW10pIHsNCiAgICAgIGxldCBmb3VuZGVyc0R0b3MgPSBmb3VuZGVyc0Zyb21Tb2xpcS5maWx0ZXIoZWwgPT4gew0KICAgICAgICBsZXQgZm91bmRlckR0byA9IHsNCiAgICAgICAgICBjb250cmFjdG9ySWQ6IG51bGwsDQogICAgICAgICAgZm91bmRlckFkZHJlc3NJZDogbnVsbCwNCiAgICAgICAgICBmb3VuZGVyQ29udGFjdElkOiBudWxsLA0KICAgICAgICAgIGZvdW5kZXJJbmRpdmlkdWFsSWQ6IG51bGwsDQogICAgICAgICAgZm91bmRlckxlZ2FsSWQ6IG51bGwsDQogICAgICAgICAgZm91bmRlclNoYXJlUGVyY2VudDogZWwuZm91bmRlckluZGl2aWR1YWwgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC5mb3VuZGVyU2hhcmVQZXJjZW50IDogZWwuZm91bmRlckxlZ2FsID8gZWwuZm91bmRlckxlZ2FsLmZvdW5kZXJTaGFyZVBlcmNlbnQgOiBudWxsLA0KICAgICAgICAgIGZvdW5kZXJTaGFyZVN1bTogZWwuZm91bmRlckluZGl2aWR1YWwgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC5mb3VuZGVyU2hhcmVTdW0gOiBlbC5mb3VuZGVyTGVnYWwgPyBlbC5mb3VuZGVyTGVnYWwuZm91bmRlclNoYXJlU3VtIDogbnVsbCwNCiAgICAgICAgICBmdWxsTmFtZTogZWwuZm91bmRlckxlZ2FsID8gZWwuZm91bmRlckxlZ2FsLm5hbWUgOiBlbC5mb3VuZGVySW5kaXZpZHVhbCA/IGAke2VsLmZvdW5kZXJJbmRpdmlkdWFsLmZpcnN0TmFtZX0gJHtlbC5mb3VuZGVySW5kaXZpZHVhbC5sYXN0TmFtZX0gJHtlbC5mb3VuZGVySW5kaXZpZHVhbC5taWRkbGVOYW1lID8gZWwuZm91bmRlckluZGl2aWR1YWwubWlkZGxlTmFtZSA6ICcnfWAgOiBudWxsLA0KICAgICAgICAgIGlkOiBudWxsLA0KICAgICAgICAgIGlubjogZWwuZm91bmRlckxlZ2FsID8gZWwuZm91bmRlckxlZ2FsLnRpbiA6IGVsLmZvdW5kZXJJbmRpdmlkdWFsID8gZWwuZm91bmRlckluZGl2aWR1YWwudGluIDogbnVsbCwNCiAgICAgICAgICBpc0xlZ2FsOiBlbC5mb3VuZGVyTGVnYWwgPyB0cnVlIDogZWwuZm91bmRlckluZGl2aWR1YWwgPyBmYWxzZSA6IG51bGwsDQogICAgICAgICAgcG5mbDogZWwuZm91bmRlckluZGl2aWR1YWwgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC5waW5mbCA6IG51bGwsDQogICAgICAgIH0NCiAgICAgICAgaWYgKGZvdW5kZXJEdG8uaW5uKSB7DQogICAgICAgICAgcmV0dXJuIGZvdW5kZXJEdG8NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMuJHNldCh0aGlzLmVkaXRpbmdJdGVtLCAnZm91bmRlcnNEdG9zJywgZm91bmRlcnNEdG9zKTsNCiAgICB9LA0KICAgIGZpbmRDb250cmFjdG9yQnlJbm4oKSB7DQogICAgICBpZiAodGhpcy5jb21wdXRlZE9ic2VydmVyLmZpZWxkcy5JTk4udmFsaWQpDQogICAgICAgIGhlbHBlclNlcnZpY2UudmFsaWRhdGVJbm5Gcm9tQXBpKHRoaXMuZWRpdGluZ0l0ZW0uaW5uLCB0cnVlKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uaW5uICE9IHRoaXMub3JpZ2luYWxJbm4pIHsNCiAgICAgICAgICAgICAgICAgIGhlbHBlclNlcnZpY2UuZ2V0Q29udHJhY3RvckluZm9CeUlubkZvckNyZWF0ZSh0aGlzLmVkaXRpbmdJdGVtLmlubiwgdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHJlcy5kYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0QWN0aXZlU3RhdHVzKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZFVENIIERJU1RSSUNUUw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RlZCh0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8ucmVnaW9uSWQsIHRydWUpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENIRUNLIEFORCBTRVQgRk9VTkRFUlMgRlJPTSBTT0xJUQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnJlZ0NvbnRyYWN0b3JEdG8gJiYgcmVzLmRhdGEucmVnQ29udHJhY3RvckR0by5mb3VuZGVycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvdW5kZXJzRnJvbVNvbGlxKHJlcy5kYXRhLnJlZ0NvbnRyYWN0b3JEdG8uZm91bmRlcnMpDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvdW5kZXJzRnJvbVNvbGlxKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5zZXRFcnJvcnMoeyBJTk46IFt0aGlzLiR0KCd2YWxpZGF0b3IuaW5uX2V4aXN0JyldIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIGhlbHBlclNlcnZpY2UuZ2V0Q29udHJhY3RvckluZm9CeUlubkZvclVwZGF0ZSh0aGlzLmVkaXRpbmdJdGVtLmlubiwgdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHJlcy5kYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdhZGRyZXNzRHRvJywgdGhpcy5vcmlnaW5hbER0by5hZGRyZXNzRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdtb2JpbGVOdW1iZXInLCB0aGlzLm9yaWdpbmFsRHRvLm1vYmlsZU51bWJlcikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmVkaXRpbmdJdGVtLCAnZW1haWwnLCB0aGlzLm9yaWdpbmFsRHRvLmVtYWlsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdjYW5SZWdpc3RlcicsIHRoaXMub3JpZ2luYWxEdG8uY2FuUmVnaXN0ZXIpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdEFjdGl2ZVN0YXR1cygpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZFVENIIERJU1RSSUNUUw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RlZCh0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8ucmVnaW9uSWQsIHRydWUpDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENIRUNLIEFORCBTRVQgRk9VTkRFUlMgRlJPTSBTT0xJUQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnJlZ0NvbnRyYWN0b3JEdG8gJiYgcmVzLmRhdGEucmVnQ29udHJhY3RvckR0by5mb3VuZGVycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvdW5kZXJzRnJvbVNvbGlxKHJlcy5kYXRhLnJlZ0NvbnRyYWN0b3JEdG8uZm91bmRlcnMpDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvdW5kZXJzRnJvbVNvbGlxKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5zZXRFcnJvcnMoeyBJTk46IFt0aGlzLiR0KCd2YWxpZGF0b3IuaW5uX2V4aXN0JyldIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5zZXRFcnJvcnMoe0lOTjogW3RoaXMuJHQoJ3ZhbGlkYXRvci5pbm4nKV19KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCg0KICAgICAgICAgICAgfSkNCiAgICAgIC8qIGVsc2UNCiAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVmcy5JTk4udmFsaWRhdGUoKSAqLw0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxEaXN0cmljdChvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZERpc3RyaWN0ID0gdGhpcy5kaXN0cmljdHMuZmluZChlID0+IGUuaWQgPT0gb3B0KTsNCiAgICAgIGlmIChzZWxlY3RlZERpc3RyaWN0KSB7DQogICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWREaXN0cmljdC5uYW1lUnUsDQogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZERpc3RyaWN0Lm5hbWVMdCwNCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkRGlzdHJpY3QubmFtZVV6LA0KICAgICAgICB9KQ0KICAgICAgICB9YA0KICAgICAgfQ0KICAgICAgcmV0dXJuIGBgOw0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxSZWdpb24ob3B0KSB7DQogICAgICBsZXQgc2VsZWN0ZWRSZWdpb24gPSB0aGlzLnJlZ2lvbnMuZmluZChlID0+IGUuaWQgPT0gb3B0KTsNCiAgICAgIGlmIChzZWxlY3RlZFJlZ2lvbikgew0KICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkUmVnaW9uLm5hbWVSdSwNCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkUmVnaW9uLm5hbWVMdCwNCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkUmVnaW9uLm5hbWVVeiwNCiAgICAgICAgfSkNCiAgICAgICAgfWANCiAgICAgIH0NCiAgICAgIHJldHVybiBgYDsNCiAgICB9LA0KICAgIGN1c3RvbUxhYmVsRm9ybU9mT3duZXJzaGlwKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5mb3JtT2ZPd25lcnNoaXBzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5uYW1lUnUsDQogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsDQogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5uYW1lVXosDQogICAgICAgIH0pDQogICAgICAgIH1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBhc3luYyBzYXZlKCkgew0KICAgICAgbGV0IGlzSW5uVmFsaWQgPSBhd2FpdCB0aGlzLnZhbGlkYXRlSW5uKCkNCiAgICAgIGlmICghaXNJbm5WYWxpZCkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci52YWxpZGF0ZSgpLnRoZW4odmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MpIHsNCiAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zID0gdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MuZmlsdGVyKGVsID0+IHsNCiAgICAgICAgICAgICAgcmV0dXJuIGVsLmZvdW5kZXJOYW1lICYmIGVsLmZvdW5kZXJOYW1lLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAmJiBlbC5wZXJjZW50YWdlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIXRoaXMuaXNNb2RlQ3JlYXRlKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkLnRvU3RyaW5nKCkNCiAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UudXBkYXRlKE1BSU5fQVBJX1VSTCwgdGhpcy5lZGl0aW5nSXRlbSwgbnVsbCwgdHJ1ZSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVzZXQoKQ0KICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwge2FkZHJlc3NEdG86IHt9fSk7DQogICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygtMSkNCiAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHt0eXBlOiAnc3VjY2Vzcyd9KTsNCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2F2ZWQnLCByZXMuZGF0YSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UuY3JlYXRlKE1BSU5fQVBJX1VSTCwgdGhpcy5lZGl0aW5nSXRlbSwgbnVsbCwgdHJ1ZSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVzZXQoKQ0KICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwge2FkZHJlc3NEdG86IHt9fSk7DQogICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7dHlwZTogJ3N1Y2Nlc3MnfSk7DQogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NhdmVkJywgcmVzLmRhdGEpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5maWxsX3JlcXVpcmVkX2ZpZWxkcycpLCB7dHlwZTogJ2Vycm9yJ30pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sDQogIC8qDQogICogQ1JFQVRFRCAqLw0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIC8vIEZPUiBDT05UUkFDVE9SIFNFTEVDVF9BTkRfQUREDQogICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzKCkNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gNTAwDQogICAgaWYgKHRoaXMuaXNNb2RlQ3JlYXRlKSB7DQogICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEVtcHR5KE1BSU5fQVBJX1VSTCwgbnVsbCwgdHJ1ZSkNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHJlcy5kYXRhKQ0KICAgICAgICAgICAgLyogaWYgKCF0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcyB8fCAhdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MgPSBbXQ0KICAgICAgICAgICAgICAgIGxldCB0bXBGb3VuZGVyID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0Rm91bmRlcikNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcy5wdXNoKHRtcEZvdW5kZXIpDQogICAgICAgICAgICB9ICovDQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgIH0pDQogICAgfSBlbHNlIHsNCiAgICAgIGF3YWl0IGNydWRBbmRMaXN0c1NlcnZpY2UuZ2V0QnlJZChNQUlOX0FQSV9VUkwsIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwgdHJ1ZSkNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHJlcy5kYXRhKQ0KICAgICAgICAgICAgdGhpcy5vcmlnaW5hbElubiA9IHRoaXMuZWRpdGluZ0l0ZW0uaW5uDQogICAgICAgICAgICB0aGlzLm9yaWdpbmFsRHRvID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkpDQogICAgICAgICAgICAvKiBpZiAoIXRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zIHx8ICF0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcyA9IFtdDQogICAgICAgICAgICAgICAgbGV0IHRtcEZvdW5kZXIgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRGb3VuZGVyKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zLnB1c2godG1wRm91bmRlcikNCiAgICAgICAgICAgIH0gKi8NCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRpbmdJdGVtLnBhcmVudElkKSB7DQogICAgICAgICAgICAgIGxldCBwYXJlbnRJZHggPSB0aGlzLmNvbnRyYWN0b3JzLmZpbmRJbmRleChlbCA9PiBlbC5pZCA9PSB0aGlzLmVkaXRpbmdJdGVtLnBhcmVudElkKQ0KICAgICAgICAgICAgICBpZiAocGFyZW50SWR4IDwgMCkgew0KICAgICAgICAgICAgICAgIHRoaXMuY29udHJhY3RvcnMucHVzaCh0aGlzLmVkaXRpbmdJdGVtLnBhcmVudCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICB9KQ0KICAgIH0NCg0KICAgIC8vIEdFVCBTVEFUVVNFUw0KICAgIGhlbHBlclNlcnZpY2UuZ2V0UmVmQnlDb2RlKCdzdGF0dXMnLCB0cnVlKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuc3RhdHVzZXMgPSByZXMuZGF0YS5jaGlsZHJlbg0KICAgICAgICAgIGlmICh0aGlzLmlzTW9kZUNyZWF0ZSkgew0KICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0QWN0aXZlU3RhdHVzKCkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICB9KQ0KDQogICAgLy8gR0VUIFJFR0lPTlMNCiAgICBoZWxwZXJTZXJ2aWNlLmZldGNoUmVnaW9ucyh0cnVlKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMucmVnaW9ucyA9IHJlcy5kYXRhDQogICAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RlZCh0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8ucmVnaW9uSWQsIHRydWUpDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICB9KQ0KDQogICAgLy8gR0VUIEZPUk1fT0ZfT1dORVJTSElQDQogICAgY3J1ZEFuZExpc3RzU2VydmljZQ0KICAgICAgICAuc2VhcmNoTGlzdCgnZGlyZWN0b3J5L2Zvcm0tb2Ytb3duZXJzaGlwcycsIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQsIG51bGwsIHRydWUpDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICB0aGlzLmZvcm1PZk93bmVyc2hpcHMgPSByZXMuZGF0YS5saXN0Ow0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgfSkNCiAgfQ0KfQ0K"},{"version":3,"sources":["CreateFormContractor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4YA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateFormContractor.vue","sourceRoot":"src/shared/views/components","sourcesContent":["<template>\r\n  <ValidationObserver\r\n      ref=\"observer\"\r\n      v-slot=\"{}\"\r\n  >\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            name=\"INN\"\r\n            :rules=\"{required: true, regex: /\\b\\d{9}\\b/}\"\r\n            v-model=\"editingItem.inn\"\r\n            @keyup.enter=\"findContractorByInn\"\r\n            @blur=\"validateInn\"\r\n            with-input-append\r\n            mask=\"#########\"\r\n            :label=\"$t('column.inn')\"\r\n            placeholder=\"123456789\"\r\n            class=\"required\"\r\n        >\r\n          <template v-slot:append-slot>\r\n            <b-button\r\n                @click=\"findContractorByInn\"\r\n                variant=\"outline-primary\"\r\n                id=\"contractorSearchButton\"\r\n                style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n            >\r\n              <i class=\"mdi mdi-account-search\"></i>\r\n            </b-button>\r\n            <!-- <b-tooltip\r\n                        target=\"contractorSearchButton\"\r\n                        variant=\"primary\"\r\n                    >{{ $t('document.search_contractor') }}</b-tooltip> -->\r\n          </template>\r\n        </BaseInputWithValidation>\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <!-- PARENT -->\r\n        <BaseMultiselectWithValidation\r\n            not-required\r\n            v-model=\"editingItem.parentId\"\r\n            :has-next-page=\"hasNextPageContractors\"\r\n            @reachedEndOfList=\"contractorReachedEndOfList\"\r\n            @search-change=\"debounceSearchContractors\"\r\n            :searchable=\"true\"\r\n            preserve-search\r\n            :clear-on-select=\"false\"\r\n            :loading=\"isLoadingContractors\"\r\n            :internal-search=\"false\"\r\n            :options=\"contractors.map(e => e.id)\"\r\n            :label=\"$t('column.superior_parent')\"\r\n            :placeholder=\"$t('column.contractor')\"\r\n            :custom-label=\"customLabelContractor\"\r\n            open-direction=\"bottom\"\r\n            :max-height=\"600\"\r\n            :show-labels=\"false\"\r\n            with-create-addition\r\n        >\r\n          <template v-slot:append-slot>\r\n            <b-button\r\n                @click=\"contractorCreateModal = true\"\r\n                variant=\"outline-primary\"\r\n                style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n            >\r\n              <i class=\"mdi mdi-plus-circle\"></i>\r\n            </b-button>\r\n          </template>\r\n        </BaseMultiselectWithValidation>\r\n        <BaseModalForCreate\r\n            v-model=\"contractorCreateModal\"\r\n            without-list-search\r\n            use-component-save-fn\r\n            mainApiUrl=\"contractor\"\r\n            createFormName=\"CreateFormContractor\"\r\n            @new-ref-created-without-list-search=\"newRefCreated\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            rules=\"required\"\r\n            v-model=\"editingItem.fullName\"\r\n            :label=\"$t('column.full_name')\"\r\n            :placeholder=\"$t('column.full_name')\"\r\n            class=\"required\"\r\n        />\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            rules=\"required\"\r\n            v-model=\"editingItem.shortname\"\r\n            :label=\"$t('column.short_name')\"\r\n            :placeholder=\"$t('column.short_name')\"\r\n            class=\"required\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            rules=\"required\"\r\n            v-model=\"editingItem.director\"\r\n            :label=\"$t('column.director')\"\r\n            :placeholder=\"$t('column.director')\"\r\n            class=\"required\"\r\n        />\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.accounter\"\r\n            :label=\"$t('column.accounter')\"\r\n            :placeholder=\"$t('column.accounter')\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            :rules=\"{required: false, regex: /\\b\\d{5}\\b/}\"\r\n            class=\"\"\r\n            v-model=\"editingItem.oked\"\r\n            mask=\"#####\"\r\n            :label=\"$t('column.oked')\"\r\n            placeholder=\"12345\"\r\n        />\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.vatCode\"\r\n            :label=\"$t('column.vat_code')\"\r\n            :placeholder=\"$t('column.vat_code')\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseMultiselectWithValidation\r\n            rules=\"required\"\r\n            class=\"required\"\r\n            v-model=\"editingItem.addressDto.regionId\"\r\n            @select=\"regionSelected\"\r\n            :options=\"regions.map(e => e.id)\"\r\n            :label=\"$t('column.region')\"\r\n            :custom-label=\"customLabelRegion\"\r\n            :placeholder=\"$t('column.region')\"\r\n            open-direction=\"bottom\"\r\n            :max-height=\"600\"\r\n            :show-labels=\"false\"\r\n        />\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseMultiselectWithValidation\r\n            rules=\"required\"\r\n            class=\"required\"\r\n            v-model=\"editingItem.addressDto.districtId\"\r\n            :options=\"districts.map(e => e.id)\"\r\n            :label=\"$t('column.district')\"\r\n            :custom-label=\"customLabelDistrict\"\r\n            :placeholder=\"$t('column.district')\"\r\n            open-direction=\"bottom\"\r\n            :max-height=\"600\"\r\n            :show-labels=\"false\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.address\"\r\n            :label=\"$t('column.address')\"\r\n            :placeholder=\"$t('column.address')\"\r\n        />\r\n\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.mobileNumber\"\r\n            :label=\"$t('column.mobile_number')\"\r\n            mask=\"+998#########\"\r\n            placeholder=\"+998#########\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseMultiselectWithValidation\r\n            not-required\r\n            v-model=\"editingItem.formOfOwnershipId\"\r\n            :options=\"formOfOwnerships.map(e => e.id)\"\r\n            :label=\"$t('submodules.form_of_ownership.title')\"\r\n            :custom-label=\"customLabelFormOfOwnership\"\r\n            placeholder=\"\"\r\n            open-direction=\"bottom\"\r\n            :max-height=\"600\"\r\n            :show-labels=\"false\"\r\n        />\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.faxNumber\"\r\n            :label=\"$t('column.fax_number')\"\r\n            :placeholder=\"$t('column.fax_number')\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            not-required\r\n            v-model=\"editingItem.phoneNumber\"\r\n            :label=\"$t('column.phone_number')\"\r\n            mask=\"+998#########\"\r\n            placeholder=\"+998#########\"\r\n        />\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <BaseInputWithValidation\r\n            rules=\"email\"\r\n            v-model=\"editingItem.email\"\r\n            :label=\"$t('column.mail')\"\r\n            :placeholder=\"$t('column.mail')\"\r\n        />\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <!-- STATUS -->\r\n        <BaseSelectWithValidation\r\n            v-model=\"editingItem.statusId\"\r\n            class=\"required\"\r\n            rules=\"required\"\r\n            :label=\"$t('column.status')\"\r\n            value-field=\"id\"\r\n        >\r\n          <template #first>\r\n            <b-form-select-option\r\n                :value=\"null\"\r\n                disabled\r\n            >{{ $t('column.status') }}\r\n            </b-form-select-option>\r\n            <b-form-select-option\r\n                v-for=\"(status, index) in statuses\"\r\n                :key=\"`${status}-${index}`\"\r\n                :value=\"status.id\"\r\n            >{{\r\n                getName({\r\n                  nameRu: status.nameRu,\r\n                  nameLt: status.nameLt,\r\n                  nameUz: status.nameUz,\r\n                })\r\n              }}\r\n            </b-form-select-option>\r\n          </template>\r\n        </BaseSelectWithValidation>\r\n      </b-col>\r\n      <b-col\r\n          sm=\"12\"\r\n          md=\"6\"\r\n      >\r\n        <div class=\"form-check form-check-right\">\r\n          <input\r\n              v-model=\"editingItem.canRegister\"\r\n              class=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              id=\"formCheckIsLegal\"\r\n          />\r\n          <!-- <input\r\n                  v-else\r\n                  :checked=\"isLegal\"\r\n                  disabled\r\n                  class=\"form-check-input\"\r\n                  type=\"checkbox\"\r\n                  id=\"formCheckIsLegal\"\r\n              /> -->\r\n          <label\r\n              class=\"form-check-label font-weight-normal\"\r\n              for=\"formCheckIsLegal\"\r\n          >\r\n            {{ $t('column.can_login') }}\r\n          </label>\r\n        </div>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row class=\"mb-3\">\r\n      <b-col cols=\"12\">\r\n        <h5 class=\"m-0 text-center\">\r\n          {{ $t('column.founders') }}\r\n        </h5>\r\n        <hr class=\"my-2\">\r\n        <b-table\r\n            :items=\"computedFoundersDtos\"\r\n            :fields=\"foundersFields\"\r\n            sticky-header=\"400px\"\r\n            bordered\r\n            small\r\n            hover\r\n            show-empty\r\n            striped\r\n        >\r\n          <!-- NUMBER OF ITEM -->\r\n          <template #cell(index)=\"data\">\r\n            {{\r\n              data.index + 1\r\n            }}\r\n          </template>\r\n\r\n          <!-- FOUNDER_SHARE_SUM -->\r\n          <template #cell(founderShareSum)=\"data\">\r\n            {{ data.item.founderShareSum | toCurrency }}\r\n          </template>\r\n\r\n          <!-- TYPE -->\r\n          <template #cell(type)=\"data\">\r\n            <b-badge\r\n                :variant=\"data.item.isLegal ? 'primary' : 'success'\"\r\n                class=\"font-weight-bold\"\r\n                style=\"font-size: .7rem;\"\r\n            >{{ data.item.isLegal ? $t('column.legal_entity') : $t('column.individual') }}\r\n            </b-badge>\r\n          </template>\r\n\r\n          <!-- EMPTY SLOT -->\r\n          <template #empty=\"\">\r\n            <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n          </template>\r\n        </b-table>\r\n      </b-col>\r\n    </b-row>\r\n  </ValidationObserver>\r\n</template>\r\n<script>\r\n/*\r\n* YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport helperService from \"@/shared/services/helper.service\"\r\n\r\nconst MAIN_API_URL = 'contractor'\r\nexport default {\r\n  name: \"CreateFormContractor\",\r\n  /*\r\n  * PROPS */\r\n  props: {\r\n    customIsModeCreate: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  /*\r\n  * COMPONENTS */\r\n  components: {},\r\n  /*\r\n  * DATA */\r\n  data() {\r\n    return {\r\n      foundersFields: [\r\n        {\r\n          label: \"#\",\r\n          thClass: \"text-center\",\r\n          tdClass: \"text-center\",\r\n          sortable: false,\r\n          key: \"index\",\r\n        },\r\n        {\r\n          key: 'fullName',\r\n          label: this.$t('column.name'),\r\n        },\r\n        {\r\n          key: 'inn',\r\n          label: this.$t('column.inn'),\r\n        },\r\n        {\r\n          key: 'pnfl',\r\n          label: this.$t('column.personal_number'),\r\n        },\r\n        {\r\n          key: 'type',\r\n          label: this.$t('column.type'),\r\n        },\r\n        {\r\n          key: 'founderSharePercent',\r\n          label: this.$t('column.share_percentage'),\r\n        },\r\n        {\r\n          key: 'founderShareSum',\r\n          label: this.$t('column.share_sum'),\r\n        },\r\n      ],\r\n      originalDto: {\r\n        addressDto: {},\r\n        foundersDtos: []\r\n      },\r\n      originalInn: null,\r\n      // CONTRACTOR SELECT_AND_CREATE VARS\r\n      hasNextPageContractors: false,\r\n      contractors: [],\r\n      debounce: null,\r\n      isLoadingContractors: false,\r\n      contractorCreateModal: false,\r\n      contractorSearchPayload: {},\r\n      // ---------------------------------\r\n      formOfOwnerships: [],\r\n      regions: [],\r\n      districts: [],\r\n      statuses: [],\r\n      editingItem: {\r\n        addressDto: {},\r\n        foundersDtos: []\r\n      },\r\n      defaultFounder: {\r\n        founderName: null,\r\n        percentage: null\r\n      }\r\n    }\r\n  },\r\n  /*\r\n  * COMPUTED */\r\n  computed: {\r\n    isModeCreate() {\r\n      return this.customIsModeCreate ? this.customIsModeCreate : this.$route.name === 'CreateContractor'\r\n    },\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    },\r\n    computedFoundersDtos(){\r\n      if (this.editingItem.regContractorDto?.founders?.length > 0) {\r\n        return this.editingItem.regContractorDto.founders.map((founder, index) => {\r\n          if (founder.founderIndividual) {\r\n            return {\r\n              index: index,\r\n              fullName: `${founder.founderIndividual.lastName} ${founder.founderIndividual.firstName} ${founder.founderIndividual.middleName}`,\r\n              inn: founder.founderIndividual.tin ?? null,\r\n              pnfl: founder.founderIndividual.pinfl ?? null,\r\n              type: null,\r\n              isLegal: false,\r\n              founderSharePercent: founder.founderIndividual?.founderSharePercent ?? null,\r\n              founderShareSum: founder.founderIndividual?.founderShareSum ?? null,\r\n            }\r\n          }\r\n          if (founder.founderLegal) {\r\n            return {\r\n              index: index,\r\n              fullName: founder.founderLegal?.name ?? null,\r\n              inn: founder.founderLegal?.tin ?? null,\r\n              pnfl: null,\r\n              type: null,\r\n              isLegal: true,\r\n              founderSharePercent: founder.founderLegal?.founderSharePercent ?? null,\r\n              founderShareSum: founder.founderLegal?.founderShareSum ?? null,\r\n            }\r\n          }\r\n        })\r\n      }\r\n      return this.editingItem.foundersDtos\r\n    }\r\n  },\r\n  /*\r\n  * METHODS */\r\n  methods: {\r\n    // CONTRACTOR SELECT_AND_CREATE METHODS\r\n    contractorReachedEndOfList(e) {\r\n      if (e && !this.isLoadingContractors) {\r\n        this.fetchContractors()\r\n      }\r\n    },\r\n    async debounceSearchContractors(searchText) {\r\n      clearTimeout(this.debounce);\r\n      this.debounce = setTimeout(async () => {\r\n        await this.fetchContractorsWithKeyword(searchText);\r\n      }, 1000);\r\n    },\r\n    customLabelContractor(opt) {\r\n      let selected = this.contractors.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${selected.fullName}`\r\n      }\r\n      return ``;\r\n    },\r\n    fetchContractorsWithKeyword(keyword, makeFirstSelected = false) {\r\n      this.contractors = []\r\n      this.contractorSearchPayload.page = 1\r\n      this.contractorSearchPayload.keyword = keyword ? keyword : ''\r\n      this.fetchContractors(makeFirstSelected)\r\n    },\r\n    async fetchContractors(makeFirstSelected) {\r\n      this.contractorSearchPayload.sortBy = []\r\n      this.contractorSearchPayload.sortBy.push('created')\r\n      this.contractorSearchPayload.sortDesc = []\r\n      this.contractorSearchPayload.sortDesc.push(true)\r\n      this.isLoadingContractors = true\r\n      await crudAndListsService.searchListWithKeyword('contractor', this.contractorSearchPayload, 'by-contractor', !this.customIsModeCreate)\r\n          .then(res => {\r\n            this.contractors.push(...res.data.list)\r\n            this.hasNextPageContractors = res.data.total / this.contractorSearchPayload.itemsPerPage > this.contractorSearchPayload.page\r\n            this.contractorSearchPayload.page += 1\r\n            if (makeFirstSelected) {\r\n              this.editingItem.parentId = this.contractors.length ? this.contractors[0].id : null\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n            this.contractors = []\r\n          })\r\n          .finally(() => {\r\n            this.isLoadingContractors = false\r\n          })\r\n    },\r\n    newRefCreated(formName) {\r\n      if (formName == 'CreateFormContractor') {\r\n        this.fetchContractorsWithKeyword('', true)\r\n      }\r\n    },\r\n    // ------------------------------------\r\n    addFounderDto() {\r\n      let tmp = Object.assign({}, this.defaultFounder)\r\n      this.editingItem.foundersDtos.push(tmp)\r\n    },\r\n    setDefaultActiveStatus() {\r\n      let activeStatus = this.statuses.find(el => el.code == 'ACTIVE')\r\n      if (activeStatus) {\r\n        this.editingItem.statusId = activeStatus.id\r\n      }\r\n    },\r\n    async regionSelected($event, dontResetDistrict = false) {\r\n      if (!dontResetDistrict) {\r\n        this.editingItem.addressDto.districtId = null\r\n      }\r\n      // GET DISTRICTS\r\n      if ($event)\r\n        await helperService.getGeoLocationsByParentId($event)\r\n            .then(res => {\r\n              this.districts = res.data\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n            })\r\n    },\r\n    async validateInn() {\r\n      let res = await helperService.validateInnFromApi(this.editingItem.inn)\r\n      if (!res.data) {\r\n        this.computedObserver.setErrors({INN: [this.$t('validator.inn')]});\r\n      }\r\n      return res.data\r\n      /*  helperService.validateInnFromApi(this.editingItem.inn)\r\n           .then(res => {\r\n               if (!res.data) {\r\n                   this.computedObserver.setErrors({ INN: [this.$t('validator.inn')] });\r\n               }\r\n           }) */\r\n    },\r\n    setFoundersFromSoliq(foundersFromSoliq = []) {\r\n      let foundersDtos = foundersFromSoliq.filter(el => {\r\n        let founderDto = {\r\n          contractorId: null,\r\n          founderAddressId: null,\r\n          founderContactId: null,\r\n          founderIndividualId: null,\r\n          founderLegalId: null,\r\n          founderSharePercent: el.founderIndividual ? el.founderIndividual.founderSharePercent : el.founderLegal ? el.founderLegal.founderSharePercent : null,\r\n          founderShareSum: el.founderIndividual ? el.founderIndividual.founderShareSum : el.founderLegal ? el.founderLegal.founderShareSum : null,\r\n          fullName: el.founderLegal ? el.founderLegal.name : el.founderIndividual ? `${el.founderIndividual.firstName} ${el.founderIndividual.lastName} ${el.founderIndividual.middleName ? el.founderIndividual.middleName : ''}` : null,\r\n          id: null,\r\n          inn: el.founderLegal ? el.founderLegal.tin : el.founderIndividual ? el.founderIndividual.tin : null,\r\n          isLegal: el.founderLegal ? true : el.founderIndividual ? false : null,\r\n          pnfl: el.founderIndividual ? el.founderIndividual.pinfl : null,\r\n        }\r\n        if (founderDto.inn) {\r\n          return founderDto\r\n        }\r\n      })\r\n      this.$set(this.editingItem, 'foundersDtos', foundersDtos);\r\n    },\r\n    findContractorByInn() {\r\n      if (this.computedObserver.fields.INN.valid)\r\n        helperService.validateInnFromApi(this.editingItem.inn, true)\r\n            .then(res => {\r\n              if (res.data) {\r\n                if (this.editingItem.inn != this.originalInn) {\r\n                  helperService.getContractorInfoByInnForCreate(this.editingItem.inn, true)\r\n                      .then(res => {\r\n                        this.editingItem = Object.assign({}, res.data)\r\n                        this.setDefaultActiveStatus()\r\n                        // FETCH DISTRICTS\r\n                        this.regionSelected(this.editingItem.addressDto.regionId, true)\r\n\r\n                        // CHECK AND SET FOUNDERS FROM SOLIQ\r\n                        if (res.data.regContractorDto && res.data.regContractorDto.founders) {\r\n                          this.setFoundersFromSoliq(res.data.regContractorDto.founders)\r\n                        } else {\r\n                          this.setFoundersFromSoliq()\r\n                        }\r\n                      })\r\n                      .catch(e => {\r\n                        // this.computedObserver.setErrors({ INN: [this.$t('validator.inn_exist')] });\r\n                      })\r\n                } else {\r\n                  helperService.getContractorInfoByInnForUpdate(this.editingItem.inn, true)\r\n                      .then(res => {\r\n                        this.editingItem = Object.assign({}, res.data)\r\n                        this.$set(this.editingItem, 'addressDto', this.originalDto.addressDto)\r\n                        this.$set(this.editingItem, 'mobileNumber', this.originalDto.mobileNumber)\r\n                        this.$set(this.editingItem, 'email', this.originalDto.email)\r\n                        this.$set(this.editingItem, 'canRegister', this.originalDto.canRegister)\r\n\r\n                        this.setDefaultActiveStatus()\r\n\r\n                        // FETCH DISTRICTS\r\n                        this.regionSelected(this.editingItem.addressDto.regionId, true)\r\n\r\n                        // CHECK AND SET FOUNDERS FROM SOLIQ\r\n                        if (res.data.regContractorDto && res.data.regContractorDto.founders) {\r\n                          this.setFoundersFromSoliq(res.data.regContractorDto.founders)\r\n                        } else {\r\n                          this.setFoundersFromSoliq()\r\n                        }\r\n                      })\r\n                      .catch(e => {\r\n                        // this.computedObserver.setErrors({ INN: [this.$t('validator.inn_exist')] });\r\n                      })\r\n                }\r\n              } else {\r\n                this.computedObserver.setErrors({INN: [this.$t('validator.inn')]});\r\n              }\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n\r\n            })\r\n      /* else\r\n          this.computedObserver.refs.INN.validate() */\r\n    },\r\n    customLabelDistrict(opt) {\r\n      let selectedDistrict = this.districts.find(e => e.id == opt);\r\n      if (selectedDistrict) {\r\n        return `${this.getName({\r\n          nameRu: selectedDistrict.nameRu,\r\n          nameLt: selectedDistrict.nameLt,\r\n          nameUz: selectedDistrict.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelRegion(opt) {\r\n      let selectedRegion = this.regions.find(e => e.id == opt);\r\n      if (selectedRegion) {\r\n        return `${this.getName({\r\n          nameRu: selectedRegion.nameRu,\r\n          nameLt: selectedRegion.nameLt,\r\n          nameUz: selectedRegion.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    customLabelFormOfOwnership(opt) {\r\n      let selected = this.formOfOwnerships.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    async save() {\r\n      let isInnValid = await this.validateInn()\r\n      if (!isInnValid) {\r\n        return\r\n      }\r\n      this.computedObserver.validate().then(valid => {\r\n        if (valid) {\r\n          if (this.editingItem.foundersDtos) {\r\n            this.editingItem.foundersDtos = this.editingItem.foundersDtos.filter(el => {\r\n              return el.founderName && el.founderName.toString().trim().length && el.percentage\r\n            })\r\n          }\r\n          if (!this.isModeCreate) {\r\n            this.editingItem.id = this.$route.params.id.toString()\r\n            crudAndListsService.update(MAIN_API_URL, this.editingItem, null, true).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {addressDto: {}});\r\n              // this.$router.go(-1)\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n              this.$emit('saved', res.data)\r\n            })\r\n          } else {\r\n            crudAndListsService.create(MAIN_API_URL, this.editingItem, null, true).then(res => {\r\n              this.computedObserver.reset()\r\n              this.editingItem = Object.assign({}, {addressDto: {}});\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n              this.$emit('saved', res.data)\r\n            })\r\n          }\r\n        } else {\r\n          this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n        }\r\n      });\r\n    }\r\n  },\r\n  /*\r\n  * CREATED */\r\n  async created() {\r\n    // FOR CONTRACTOR SELECT_AND_ADD\r\n    this.contractorSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n    this.fetchContractors()\r\n    // -----------------------------\r\n    this.var_default_search_payload.itemsPerPage = 500\r\n    if (this.isModeCreate) {\r\n      crudAndListsService.getEmpty(MAIN_API_URL, null, true)\r\n          .then(res => {\r\n            this.editingItem = Object.assign({}, res.data)\r\n            /* if (!this.editingItem.foundersDtos || !this.editingItem.foundersDtos.length) {\r\n                this.editingItem.foundersDtos = []\r\n                let tmpFounder = Object.assign({}, this.defaultFounder)\r\n                this.editingItem.foundersDtos.push(tmpFounder)\r\n            } */\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    } else {\r\n      await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, true)\r\n          .then(res => {\r\n            this.editingItem = Object.assign({}, res.data)\r\n            this.originalInn = this.editingItem.inn\r\n            this.originalDto = JSON.parse(JSON.stringify(res.data))\r\n            /* if (!this.editingItem.foundersDtos || !this.editingItem.foundersDtos.length) {\r\n                this.editingItem.foundersDtos = []\r\n                let tmpFounder = Object.assign({}, this.defaultFounder)\r\n                this.editingItem.foundersDtos.push(tmpFounder)\r\n            } */\r\n            if (this.editingItem.parentId) {\r\n              let parentIdx = this.contractors.findIndex(el => el.id == this.editingItem.parentId)\r\n              if (parentIdx < 0) {\r\n                this.contractors.push(this.editingItem.parent)\r\n              }\r\n            }\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    }\r\n\r\n    // GET STATUSES\r\n    helperService.getRefByCode('status', true)\r\n        .then(res => {\r\n          this.statuses = res.data.children\r\n          if (this.isModeCreate) {\r\n            this.setDefaultActiveStatus()\r\n          }\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n\r\n    // GET REGIONS\r\n    helperService.fetchRegions(true)\r\n        .then(res => {\r\n          this.regions = res.data\r\n          this.regionSelected(this.editingItem.addressDto.regionId, true)\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n\r\n    // GET FORM_OF_OWNERSHIP\r\n    crudAndListsService\r\n        .searchList('directory/form-of-ownerships', this.var_default_search_payload, null, true)\r\n        .then((res) => {\r\n          this.formOfOwnerships = res.data.list;\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.col-form-label {\r\n  padding-top: 0;\r\n}\r\n\r\nul {\r\n  list-style-type: none;\r\n}\r\n</style>"]}]}