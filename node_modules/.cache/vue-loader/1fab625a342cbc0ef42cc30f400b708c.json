{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\collection\\assemble\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\report\\collection\\assemble\\index.vue","mtime":1674799497847},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVwb3J0U2VydmljZSBmcm9tICIuLi8uLi9yZXBvcnRTZXJ2aWNlIjsNCmltcG9ydCByZXBvcnRIZWFkZXIgZnJvbSAiLi9yZXBvcnRIZWFkZXIiOw0KaW1wb3J0IFhMU1ggZnJvbSAieGxzeCI7DQppbXBvcnQgQmFzZUlucHV0V2l0aFZhbGlkYXRpb24gZnJvbSAiQC9jb21wb25lbnRzL2Jhc2UvQmFzZUlucHV0V2l0aFZhbGlkYXRpb24iOw0KaW1wb3J0IEJhc2VEYXRlUGlja2VyV2l0aFZhbGlkYXRpb24gZnJvbSAiQC9jb21wb25lbnRzL2Jhc2UvQmFzZURhdGVQaWNrZXJXaXRoVmFsaWRhdGlvbiI7DQppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBCYXNlRGF0ZVBpY2tlcldpdGhWYWxpZGF0aW9uLA0KICAgIEJhc2VJbnB1dFdpdGhWYWxpZGF0aW9uLA0KICAgIHJlcG9ydEhlYWRlcg0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0aXRsZTogdGhpcy4kdCgicmVwb3J0Um9sZXMiKSwNCiAgICAgIGxvYWRlcjogdHJ1ZSwNCiAgICAgIHNlbGVjdExvYWRJdGVtTG9hZGVyOiBudWxsLA0KICAgICAgc2VsZWN0TG9hZEl0ZW1UaW1lT3V0OiBudWxsLA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIHBhcmFtczogew0KICAgICAgICAgIGxpbWl0OiAyMCwNCiAgICAgICAgICBwYWdlOiAwLA0KICAgICAgICB9LA0KICAgICAgICBzZWFyY2g6ICIiLA0KICAgICAgICBkb2NUYWJsZUlkOiAiIiwNCiAgICAgICAgZGF0ZVR5cGVJZDogIiIsDQogICAgICB9LA0KICAgICAgdGFibGVMaXN0UGFyYW1zOiB7DQogICAgICAgIGl0ZW1zUGVyUGFnZTogMjAsDQogICAgICAgIHBhZ2U6IDAsDQogICAgICB9LA0KICAgICAgdGFibGVMaXN0OiBbXSwNCiAgICAgIHRhYmxlTGlzdExlbmd0aDogMCwNCiAgICAgIGRvY1RhYmxlRmllbGRzT3JpZ2luYWw6IFtdLA0KICAgICAgZG9jVGFibGVGaWVsZHNTZXJpYWxpemVkOiBbXSwNCiAgICAgIG93bkRvY1RhYmxlTGlzdDogW10sDQogICAgICBkYXRlVHlwZUxpc3Q6IFtdLA0KICAgICAgZGF0ZVR5cGVMaXN0UGF5bG9hZDogew0KICAgICAgICBwYWdlOiAwLA0KICAgICAgICBpdGVtc1BlclBhZ2U6IDEwMA0KICAgICAgfSwNCiAgICAgIHNlbGVjdE9wdGlvbnNCeVJlZmVyZW5jZVVybDoge30sDQogICAgICBzZWxlY3RlZERvY1JlcG9ydHM6IHsNCiAgICAgICAgaW5kZXhTZXQ6IG5ldyBTZXQoKSwNCiAgICAgICAgZG9jVGFibGVJZDogZmFsc2UsDQogICAgICAgIGRvY1RhYmxlOiBudWxsLA0KICAgICAgICBkb2NSZXBvcnRzOiB7fSwNCiAgICAgIH0sDQogICAgICBjb2xsZWN0ZWRSZXBvcnRGb3JUYWJsZVJlcG9ydDogW10sDQogICAgICBjb2xsZWN0aW5nVHlwZTogJ0FTU0VNQkxFJywNCiAgICAgIGNvbGxlY3Rpb25BdmdJZ25vcmVaZXJvOiBmYWxzZSwNCiAgICAgIGNvbGxlY3RpbmdHcm91cENvbHVtbklkOiBudWxsLA0KICAgICAgY29sbGVjdGluZ1R5cGVMaXN0OiBbDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogIkFTU0VNQkxFIiwNCiAgICAgICAgICBuYW1lOiAiWWlnJ2lzaCIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogIkNPTExFQ1RfU1VNIiwNCiAgICAgICAgICBuYW1lOiAiWWlnJ2luZGluaSB5aWcnaXNoIChTVU0pIiwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHZhbHVlOiAiQ09MTEVDVF9BVkciLA0KICAgICAgICAgIG5hbWU6ICJPJ3J0YWNoYSBxaXltYXQgeWlnJ2lzaCAoQVZHKSIsDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgc2F2ZURhdGE6IHsNCiAgICAgICAgcmVwb3J0SW5mb0ZvckdhdGhlcjogew0KICAgICAgICAgIG5hbWVVejogJycsDQogICAgICAgICAgbmFtZUx0OiAnJywNCiAgICAgICAgICBuYW1lUnU6ICcnLA0KICAgICAgICAgIGRhdGU6ICcnLA0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgfSwNCiAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICBhd2FpdCB0aGlzLmdldE93bkRvY1RhYmxlTGlzdCgpOw0KICAgIHRoaXMubG9hZGVyID0gZmFsc2U7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRPd25Eb2NUYWJsZUxpc3QoKSB7DQogICAgICByZXBvcnRTZXJ2aWNlLmdldE93blRhYmxlKHRoaXMucGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5vd25Eb2NUYWJsZUxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0RGF0ZVR5cGVMaXN0KGRhdGVUeXBlSWQpIHsNCiAgICAgIHJlcG9ydFNlcnZpY2UuZ2V0TGlzdEJ5UGFyZW50SWQoZGF0ZVR5cGVJZCwgdGhpcy5kYXRlVHlwZUxpc3RQYXlsb2FkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5kYXRlVHlwZUxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5sb2FkZXIgPSBmYWxzZTsNCiAgICAgICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZVNlYXJjaChjbGVhclNlbGVjdGVkID0gdHJ1ZSkgew0KICAgICAgaWYgKGNsZWFyU2VsZWN0ZWQpIHsNCiAgICAgICAgdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuZG9jVGFibGVJZCA9IGZhbHNlOw0KICAgICAgICB0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5pbmRleFNldCA9IG5ldyBTZXQoKTsNCiAgICAgIH0NCiAgICAgIGF3YWl0IHRoaXMuZ2V0VGFibGVMaXN0KCk7DQogICAgfSwNCiAgICBoYW5kbGVWYWxpZGF0ZUZvckNvbGxlY3RpbmcoKSB7DQogICAgICBpZiAoIXRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmRvY1RhYmxlSWQgfHwgdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuaW5kZXhTZXQuc2l6ZSA8IDIpIHsNCiAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgic3VibW9kdWxlcy5yZXBvcnRzLnNlbGVjdF9taW5pbXVtX3R3b19yZXBvcnQiKSwge3R5cGU6ICJ3YXJuaW5nIn0pDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlQ29sbGVjdCgpIHsNCiAgICAgIHRoaXMubG9hZGVyID0gdHJ1ZTsNCiAgICAgIHRoaXMuY29sbGVjdGVkUmVwb3J0Rm9yVGFibGVSZXBvcnQgPSBbXTsNCiAgICAgIHRoaXMuZG9jVGFibGVGaWVsZHNPcmlnaW5hbCA9IFtdOw0KICAgICAgdGhpcy5kb2NUYWJsZUZpZWxkc1NlcmlhbGl6ZWQgPSBbXTsNCiAgICAgIGlmICghdGhpcy5oYW5kbGVWYWxpZGF0ZUZvckNvbGxlY3RpbmcoKSkgew0KICAgICAgICB0aGlzLmxvYWRlciA9IGZhbHNlOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBhd2FpdCByZXBvcnRTZXJ2aWNlLmdldEJ5SWRUYWJsZSh0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5kb2NUYWJsZUlkKS50aGVuKGFzeW5jIHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29sdW1ucy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5kb2NUYWJsZUZpZWxkc09yaWdpbmFsID0gcmVzcG9uc2UuZGF0YS5jb2x1bW5zOw0KICAgICAgICAgIHRoaXMuZGVzZXJpYWxpemVEb2NUYWJsZUZpZWxkcyh0aGlzLmRvY1RhYmxlRmllbGRzT3JpZ2luYWwpOw0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmRvY1RhYmxlID0gcmVzcG9uc2UuZGF0YS50YWJsZTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coJ21vZGFsJykNCiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVDb2xsZWN0VmlldygpOw0KICAgICAgICB0aGlzLmxvYWRlciA9IGZhbHNlOw0KICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICB0aGlzLmxvYWRlciA9IGZhbHNlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBkZXNlcmlhbGl6ZURvY1RhYmxlRmllbGRzKGxpc3QsIGNsZWFyID0gdHJ1ZSkgew0KICAgICAgaWYgKGNsZWFyKSB7DQogICAgICAgIHRoaXMuZG9jVGFibGVGaWVsZHNTZXJpYWxpemVkID0gW107DQogICAgICB9DQogICAgICBsaXN0LmZvckVhY2goZSA9PiB7DQogICAgICAgIGlmIChlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICB0aGlzLmRlc2VyaWFsaXplRG9jVGFibGVGaWVsZHMoZS5jaGlsZHJlbiwgZmFsc2UpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZG9jVGFibGVGaWVsZHNTZXJpYWxpemVkLnB1c2goZSkNCiAgICAgICAgICBpZiAoZS50eXBlQ29kZSA9PT0gJ1NFTEVDVCcpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uc0J5UmVmZXJlbmNlVXJsW2UuaWRdID0gW107DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlQ29sbGVjdFZpZXcoKSB7DQogICAgICBpZiAoIXRoaXMuaGFuZGxlVmFsaWRhdGVGb3JDb2xsZWN0aW5nKCkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy5sb2FkZXIgPSB0cnVlOw0KICAgICAgdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuZG9jUmVwb3J0cyA9IHt9Ow0KICAgICAgYXdhaXQgdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuaW5kZXhTZXQuZm9yRWFjaCgoZG9jUmVwb3J0SWQpID0+IHsNCiAgICAgICAgdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuZG9jUmVwb3J0c1tkb2NSZXBvcnRJZF0gPSB7fQ0KICAgICAgICByZXBvcnRTZXJ2aWNlLmdldFJlcG9ydEJ5SWQoZG9jUmVwb3J0SWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgICByZXNwb25zZS5kYXRhLm1hcCh2YWx1ZSA9PiB7DQogICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5kb2NSZXBvcnRzW2RvY1JlcG9ydElkXVt2YWx1ZS5yb3dJZF0gPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmRvY1JlcG9ydHNbZG9jUmVwb3J0SWRdW3ZhbHVlLnJvd0lkXSA9IHt9Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmRvY1JlcG9ydHNbZG9jUmVwb3J0SWRdW3ZhbHVlLnJvd0lkXVt2YWx1ZS5jb2x1bW5JZF0gPSB2YWx1ZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlQ29sbGVjdGVkUmVwb3J0RHJhdygpIHsNCiAgICAgIHRoaXMuY29sbGVjdGVkUmVwb3J0Rm9yVGFibGVSZXBvcnQgPSBbXTsNCiAgICAgIHN3aXRjaCAodGhpcy5jb2xsZWN0aW5nVHlwZSkgew0KICAgICAgICBjYXNlICdBU1NFTUJMRSc6DQogICAgICAgICAgdGhpcy5oYW5kbGVDb2xsZWN0ZWRSZXBvcnREcmF3QXNzZW1ibGUoKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAnQ09MTEVDVF9TVU0nOg0KICAgICAgICAgIHRoaXMuaGFuZGxlQ29sbGVjdGVkUmVwb3J0RHJhd0NvbGxlY3RTdW0oKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAnQ09MTEVDVF9BVkcnOg0KICAgICAgICAgIHRoaXMuaGFuZGxlQ29sbGVjdGVkUmVwb3J0RHJhd0NvbGxlY3RBdmcoKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZUNvbGxlY3RlZFJlcG9ydERyYXdBc3NlbWJsZSgpIHsNCiAgICAgIGxldCBzZXF1ZW5jZSA9IDE7DQogICAgICB0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5pbmRleFNldC5mb3JFYWNoKCh2YWx1ZSkgPT4gew0KICAgICAgICBjb25zdCByZXBvcnRzID0gdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuZG9jUmVwb3J0c1t2YWx1ZV07DQogICAgICAgIGZvciAoY29uc3QgcmVwb3J0Um93SW5kZXggaW4gcmVwb3J0cykgew0KICAgICAgICAgIGNvbnN0IHJlcG9ydFJvdyA9IHJlcG9ydHNbcmVwb3J0Um93SW5kZXhdOw0KICAgICAgICAgIGxldCByZXBvcnRSb3dEYXRhID0gSlNPTi5wYXJzZSgnW10nKTsNCiAgICAgICAgICB0aGlzLmRvY1RhYmxlRmllbGRzU2VyaWFsaXplZC5mb3JFYWNoKGZpZWxkID0+IHsNCiAgICAgICAgICAgIGlmIChyZXBvcnRSb3dbZmllbGQuaWRdICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgcmVwb3J0Um93RGF0YS5wdXNoKHJlcG9ydFJvd1tmaWVsZC5pZF0pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgaWYgKGZpZWxkLnR5cGVDb2RlID09PSAnU0VRVUVOQ0UnKSB7DQogICAgICAgICAgICAgICAgcmVwb3J0Um93RGF0YS5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZXF1ZW5jZSwNCiAgICAgICAgICAgICAgICAgIHR5cGVDb2RlOiBmaWVsZC50eXBlQ29kZSwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBzZXF1ZW5jZSsrOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJlcG9ydFJvd0RhdGEucHVzaCh7fSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuY29sbGVjdGVkUmVwb3J0Rm9yVGFibGVSZXBvcnQucHVzaChyZXBvcnRSb3dEYXRhKTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUNvbGxlY3RlZFJlcG9ydERyYXdDb2xsZWN0U3VtKCkgew0KICAgICAgbGV0IHNlcXVlbmNlID0gMTsNCiAgICAgIHRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmluZGV4U2V0LmZvckVhY2goKGRvY1JlcG9ydElkKSA9PiB7DQogICAgICAgIGxldCByZXBvcnREYXRhID0gW107DQogICAgICAgIGxldCBzdW1CaWdJbnRlZ2VyQ291bnQgPSB7fTsNCiAgICAgICAgY29uc3QgcmVwb3J0cyA9IHRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmRvY1JlcG9ydHNbZG9jUmVwb3J0SWRdOw0KICAgICAgICBmb3IgKGNvbnN0IHJlcG9ydFJvd0luZGV4IGluIHJlcG9ydHMpIHsNCiAgICAgICAgICBjb25zdCByZXBvcnQgPSByZXBvcnRzW3JlcG9ydFJvd0luZGV4XTsNCiAgICAgICAgICB0aGlzLmRvY1RhYmxlRmllbGRzU2VyaWFsaXplZC5mb3JFYWNoKChkb2NUYWJsZUZpZWxkLCBkb2NUYWJsZUZpZWxkSW5kZXgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHJlcG9ydFJvd0ZpZWxkID0gcmVwb3J0W2RvY1RhYmxlRmllbGQuaWRdOw0KICAgICAgICAgICAgaWYgKGRvY1RhYmxlRmllbGQudHlwZUNvZGUgPT09ICdTRVFVRU5DRScgJiYgdHlwZW9mIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XSA9PT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdID0gew0KICAgICAgICAgICAgICAgIHZhbHVlOiBzZXF1ZW5jZSwNCiAgICAgICAgICAgICAgICB0eXBlQ29kZTogIlNFUVVFTkNFIg0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0gPSByZXBvcnRSb3dGaWVsZCAmJiAhcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdPy5pZCA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVwb3J0Um93RmllbGQpKSA6IChyZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0gfHwge30pOw0KICAgICAgICAgICAgaWYgKGRvY1RhYmxlRmllbGQudHlwZUNvZGUgPT09ICdCSUdERUNJTUFMJykgew0KICAgICAgICAgICAgICBjb25zdCB2YWx1ZUJpZ0RlY2ltYWwgPSByZXBvcnRSb3dGaWVsZD8udmFsdWVCaWdEZWNpbWFsID8/IDA7DQogICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3VtQmlnSW50ZWdlckNvdW50W2RvY1RhYmxlRmllbGQuaWRdID09PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgIHN1bUJpZ0ludGVnZXJDb3VudFtkb2NUYWJsZUZpZWxkLmlkXSA9IDA7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udmFsdWVCaWdEZWNpbWFsID09PSAndW5kZWZpbmVkJyB8fCByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udmFsdWVCaWdEZWNpbWFsID09PSBudWxsIHx8IHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZUJpZ0RlY2ltYWwgPT09ICcnKSB7DQogICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlQmlnRGVjaW1hbCA9IDA7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKHZhbHVlQmlnRGVjaW1hbCAmJiAodmFsdWVCaWdEZWNpbWFsID4gMCB8fCB2YWx1ZUJpZ0RlY2ltYWwgPCAwKSkgew0KICAgICAgICAgICAgICAgIHN1bUJpZ0ludGVnZXJDb3VudFtkb2NUYWJsZUZpZWxkLmlkXSsrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmICh2YWx1ZUJpZ0RlY2ltYWwgJiYgcmVwb3J0Um93RmllbGQ/LmlkICE9PSByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0/LmlkKSB7DQogICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlQmlnRGVjaW1hbCArPSB2YWx1ZUJpZ0RlY2ltYWw7DQogICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlID0gcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlQmlnRGVjaW1hbD8udG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIGlmIChkb2NUYWJsZUZpZWxkLnR5cGVDb2RlID09PSAnU1RSSU5HJyB8fCBkb2NUYWJsZUZpZWxkLnR5cGVDb2RlID09PSAnREFURScgfHwgZG9jVGFibGVGaWVsZC50eXBlQ29kZSA9PT0gJ1lFQVInIHx8IGRvY1RhYmxlRmllbGQudHlwZUNvZGUgPT09ICdCT09MRUFOJykgew0KICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udmFsdWUgKz0gIiwgIiArIChyZXBvcnRSb3dGaWVsZC52YWx1ZSA/PyAnJyk7DQogICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZURhdGUgKz0gIiwgIiArIChyZXBvcnRSb3dGaWVsZC52YWx1ZURhdGUgPz8gJycpOw0KICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udmFsdWVTdHJpbmcgKz0gIiwgIiArIChyZXBvcnRSb3dGaWVsZC52YWx1ZVN0cmluZyA/PyAnJyk7DQogICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZUJvb2xlYW4gKz0gIiwgIiArIChyZXBvcnRSb3dGaWVsZC52YWx1ZUJvb2xlYW4gPz8gJycpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChkb2NUYWJsZUZpZWxkLnR5cGVDb2RlID09PSAnU0VMRUNUJykgew0KICAgICAgICAgICAgICBpZiAoIXJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XSkgew0KICAgICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVwb3J0Um93RmllbGQpKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0uaWQgPSByZXBvcnRSb3dGaWVsZC5pZDsNCiAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnJvd0lkID0gcmVwb3J0Um93RmllbGQucm93SWQ7DQogICAgICAgICAgICAgIC8vIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS50eXBlQ29kZSA9ICdTVFJJTkcnOw0KICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0uY29sdW1uSWQgPSByZXBvcnRSb3dGaWVsZC5jb2x1bW5JZDsNCiAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLmRvY1JlcG9ydElkID0gcmVwb3J0Um93RmllbGQuZG9jUmVwb3J0SWQ7DQogICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS5zZWxlY3RWYWx1ZUlkID0gbnVsbDsNCiAgICAgICAgICAgICAgaWYgKHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XT8udmFsdWVTdHJpbmc/LmluZGV4T2YocmVwb3J0Um93RmllbGQuc2VsZWN0VmFsdWVOYW1lVXopID09PSAtMSkgew0KICAgICAgICAgICAgICAgIGlmIChyZXBvcnRSb3dGaWVsZD8uc2VsZWN0VmFsdWVOYW1lVXopIHsNCiAgICAgICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZVN0cmluZyArPSAocmVwb3J0Um93RmllbGQ/LnNlbGVjdFZhbHVlTmFtZVV6ID8/ICcnKSArICIsICI7DQogICAgICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udmFsdWUgKz0gKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVVeiA/PyAnJykgKyAiLCAiOw0KICAgICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnNlbGVjdFZhbHVlTmFtZVV6ICs9IChyZXBvcnRSb3dGaWVsZD8uc2VsZWN0VmFsdWVOYW1lVXogPz8gJycpICsgIiwgIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVFbikgew0KICAgICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnNlbGVjdFZhbHVlTmFtZUVuICs9IChyZXBvcnRSb3dGaWVsZD8uc2VsZWN0VmFsdWVOYW1lRW4gPz8gJycpICsgIiwgIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVMdCkgew0KICAgICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnNlbGVjdFZhbHVlTmFtZUx0ICs9IChyZXBvcnRSb3dGaWVsZD8uc2VsZWN0VmFsdWVOYW1lTHQgPz8gJycpICsgIiwgIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVSdSkgew0KICAgICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnNlbGVjdFZhbHVlTmFtZVJ1ICs9IChyZXBvcnRSb3dGaWVsZD8uc2VsZWN0VmFsdWVOYW1lUnUgPz8gJycpICsgIiwgIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdPy52YWx1ZVN0cmluZyA9PT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZVN0cmluZyA9ICcnOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmNvbGxlY3RlZFJlcG9ydEZvclRhYmxlUmVwb3J0LnB1c2gocmVwb3J0RGF0YSk7DQogICAgICAgIHNlcXVlbmNlKys7DQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlQ29sbGVjdGVkUmVwb3J0RHJhd0NvbGxlY3RBdmcoKSB7DQogICAgICBsZXQgc2VxdWVuY2UgPSAxOw0KICAgICAgdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuaW5kZXhTZXQuZm9yRWFjaCgoZG9jUmVwb3J0SWQpID0+IHsNCiAgICAgICAgbGV0IHJlcG9ydERhdGEgPSBbXTsNCiAgICAgICAgbGV0IHN1bUJpZ0ludGVnZXJDb3VudCA9IHt9Ow0KICAgICAgICBjb25zdCByZXBvcnRzID0gdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuZG9jUmVwb3J0c1tkb2NSZXBvcnRJZF07DQogICAgICAgIGZvciAoY29uc3QgcmVwb3J0Um93SW5kZXggaW4gcmVwb3J0cykgew0KICAgICAgICAgIGNvbnN0IHJlcG9ydCA9IHJlcG9ydHNbcmVwb3J0Um93SW5kZXhdOw0KICAgICAgICAgIHRoaXMuZG9jVGFibGVGaWVsZHNTZXJpYWxpemVkLmZvckVhY2goKGRvY1RhYmxlRmllbGQsIGRvY1RhYmxlRmllbGRJbmRleCkgPT4gew0KICAgICAgICAgICAgY29uc3QgcmVwb3J0Um93RmllbGQgPSByZXBvcnRbZG9jVGFibGVGaWVsZC5pZF07DQogICAgICAgICAgICBpZiAoZG9jVGFibGVGaWVsZC50eXBlQ29kZSA9PT0gJ1NFUVVFTkNFJyAmJiB0eXBlb2YgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdID09PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0gPSB7DQogICAgICAgICAgICAgICAgdmFsdWU6IHNlcXVlbmNlLA0KICAgICAgICAgICAgICAgIHR5cGVDb2RlOiAiU0VRVUVOQ0UiDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XSA9IHJlcG9ydFJvd0ZpZWxkICYmICFyZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0/LmlkID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXBvcnRSb3dGaWVsZCkpIDogKHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XSB8fCB7fSk7DQogICAgICAgICAgICBpZiAoZG9jVGFibGVGaWVsZC50eXBlQ29kZSA9PT0gJ0JJR0RFQ0lNQUwnKSB7DQogICAgICAgICAgICAgIGNvbnN0IHZhbHVlQmlnRGVjaW1hbCA9IHJlcG9ydFJvd0ZpZWxkPy52YWx1ZUJpZ0RlY2ltYWwgPz8gMDsNCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdW1CaWdJbnRlZ2VyQ291bnRbZG9jVGFibGVGaWVsZC5pZF0gPT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgc3VtQmlnSW50ZWdlckNvdW50W2RvY1RhYmxlRmllbGQuaWRdID0gMDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZUJpZ0RlY2ltYWwgPT09ICd1bmRlZmluZWQnIHx8IHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZUJpZ0RlY2ltYWwgPT09IG51bGwgfHwgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlQmlnRGVjaW1hbCA9PT0gJycpIHsNCiAgICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udmFsdWVCaWdEZWNpbWFsID0gMDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9uQXZnSWdub3JlWmVybykgew0KICAgICAgICAgICAgICAgIGlmICh2YWx1ZUJpZ0RlY2ltYWwgJiYgKHZhbHVlQmlnRGVjaW1hbCA+IDAgfHwgdmFsdWVCaWdEZWNpbWFsIDwgMCkpIHsNCiAgICAgICAgICAgICAgICAgIHN1bUJpZ0ludGVnZXJDb3VudFtkb2NUYWJsZUZpZWxkLmlkXSsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBzdW1CaWdJbnRlZ2VyQ291bnRbZG9jVGFibGVGaWVsZC5pZF0rKzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAodmFsdWVCaWdEZWNpbWFsICYmIHJlcG9ydFJvd0ZpZWxkPy5pZCAhPT0gcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdPy5pZCkgew0KICAgICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZUJpZ0RlY2ltYWwgKz0gdmFsdWVCaWdEZWNpbWFsOw0KICAgICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZSA9IHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZUJpZ0RlY2ltYWw/LnRvU3RyaW5nKCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jVGFibGVGaWVsZC50eXBlQ29kZSA9PT0gJ1NUUklORycgfHwgZG9jVGFibGVGaWVsZC50eXBlQ29kZSA9PT0gJ0RBVEUnIHx8IGRvY1RhYmxlRmllbGQudHlwZUNvZGUgPT09ICdZRUFSJyB8fCBkb2NUYWJsZUZpZWxkLnR5cGVDb2RlID09PSAnQk9PTEVBTicpIHsNCiAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlICs9ICIsICIgKyAocmVwb3J0Um93RmllbGQudmFsdWUgPz8gJycpOw0KICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udmFsdWVEYXRlICs9ICIsICIgKyAocmVwb3J0Um93RmllbGQudmFsdWVEYXRlID8/ICcnKTsNCiAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlU3RyaW5nICs9ICIsICIgKyAocmVwb3J0Um93RmllbGQudmFsdWVTdHJpbmcgPz8gJycpOw0KICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udmFsdWVCb29sZWFuICs9ICIsICIgKyAocmVwb3J0Um93RmllbGQudmFsdWVCb29sZWFuID8/ICcnKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jVGFibGVGaWVsZC50eXBlQ29kZSA9PT0gJ1NFTEVDVCcpIHsNCiAgICAgICAgICAgICAgaWYgKCFyZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0pIHsNCiAgICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcG9ydFJvd0ZpZWxkKSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLmlkID0gcmVwb3J0Um93RmllbGQuaWQ7DQogICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS5yb3dJZCA9IHJlcG9ydFJvd0ZpZWxkLnJvd0lkOw0KICAgICAgICAgICAgICAvLyByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0udHlwZUNvZGUgPSAnU1RSSU5HJzsNCiAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLmNvbHVtbklkID0gcmVwb3J0Um93RmllbGQuY29sdW1uSWQ7DQogICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS5kb2NSZXBvcnRJZCA9IHJlcG9ydFJvd0ZpZWxkLmRvY1JlcG9ydElkOw0KICAgICAgICAgICAgICBpZiAocmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdPy52YWx1ZVN0cmluZz8uaW5kZXhPZihyZXBvcnRSb3dGaWVsZC5zZWxlY3RWYWx1ZU5hbWVVeikgPT09IC0xKSB7DQogICAgICAgICAgICAgICAgaWYgKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVVeikgew0KICAgICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlICs9IChyZXBvcnRSb3dGaWVsZD8uc2VsZWN0VmFsdWVOYW1lVXogPz8gJycpICsgIiwgIjsNCiAgICAgICAgICAgICAgICAgIHJlcG9ydERhdGFbZG9jVGFibGVGaWVsZEluZGV4XS52YWx1ZVN0cmluZyArPSAocmVwb3J0Um93RmllbGQ/LnNlbGVjdFZhbHVlTmFtZVV6ID8/ICcnKSArICIsICI7DQogICAgICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0uc2VsZWN0VmFsdWVOYW1lVXogKz0gKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVVeiA/PyAnJykgKyAiLCAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocmVwb3J0Um93RmllbGQ/LnNlbGVjdFZhbHVlTmFtZUVuKSB7DQogICAgICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0uc2VsZWN0VmFsdWVOYW1lRW4gKz0gKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVFbiA/PyAnJykgKyAiLCAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocmVwb3J0Um93RmllbGQ/LnNlbGVjdFZhbHVlTmFtZUx0KSB7DQogICAgICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0uc2VsZWN0VmFsdWVOYW1lTHQgKz0gKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVMdCA/PyAnJykgKyAiLCAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocmVwb3J0Um93RmllbGQ/LnNlbGVjdFZhbHVlTmFtZVJ1KSB7DQogICAgICAgICAgICAgICAgICByZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0uc2VsZWN0VmFsdWVOYW1lUnUgKz0gKHJlcG9ydFJvd0ZpZWxkPy5zZWxlY3RWYWx1ZU5hbWVSdSA/PyAnJykgKyAiLCAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXBvcnREYXRhW2RvY1RhYmxlRmllbGRJbmRleF0/LnZhbHVlU3RyaW5nID09PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlU3RyaW5nID0gJyc7DQogICAgICAgICAgICAgICAgcmVwb3J0RGF0YVtkb2NUYWJsZUZpZWxkSW5kZXhdLnZhbHVlID0gJyc7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGZvciAoY29uc3QgaSBpbiByZXBvcnREYXRhKSB7DQogICAgICAgICAgY29uc3QgY291bnQgPSBzdW1CaWdJbnRlZ2VyQ291bnRbcmVwb3J0RGF0YVtpXS5jb2x1bW5JZF07DQogICAgICAgICAgaWYgKHJlcG9ydERhdGFbaV0udHlwZUNvZGUgPT09ICdCSUdERUNJTUFMJyAmJiBjb3VudCA+IDApIHsNCiAgICAgICAgICAgIHJlcG9ydERhdGFbaV0udmFsdWVCaWdEZWNpbWFsIC89IGNvdW50Ow0KICAgICAgICAgIH0NCiAgICAgICAgICByZXBvcnREYXRhW2ldLnNlbGVjdFZhbHVlTmFtZUVuID0gcmVwb3J0RGF0YVtpXS5zZWxlY3RWYWx1ZU5hbWVFbiA/IHJlcG9ydERhdGFbaV0uc2VsZWN0VmFsdWVOYW1lRW4udHJpbSgpLnNsaWNlKDAsIC0xKSA6ICcnOw0KICAgICAgICAgIHJlcG9ydERhdGFbaV0uc2VsZWN0VmFsdWVOYW1lTHQgPSByZXBvcnREYXRhW2ldLnNlbGVjdFZhbHVlTmFtZUx0ID8gcmVwb3J0RGF0YVtpXS5zZWxlY3RWYWx1ZU5hbWVMdC50cmltKCkuc2xpY2UoMCwgLTEpIDogJyc7DQogICAgICAgICAgcmVwb3J0RGF0YVtpXS5zZWxlY3RWYWx1ZU5hbWVSdSA9IHJlcG9ydERhdGFbaV0uc2VsZWN0VmFsdWVOYW1lUnUgPyByZXBvcnREYXRhW2ldLnNlbGVjdFZhbHVlTmFtZVJ1LnRyaW0oKS5zbGljZSgwLCAtMSkgOiAnJzsNCiAgICAgICAgICByZXBvcnREYXRhW2ldLnNlbGVjdFZhbHVlTmFtZVV6ID0gcmVwb3J0RGF0YVtpXS5zZWxlY3RWYWx1ZU5hbWVVeiA/IHJlcG9ydERhdGFbaV0uc2VsZWN0VmFsdWVOYW1lVXoudHJpbSgpLnNsaWNlKDAsIC0xKSA6ICcnOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuY29sbGVjdGVkUmVwb3J0Rm9yVGFibGVSZXBvcnQucHVzaChyZXBvcnREYXRhKTsNCiAgICAgICAgc2VxdWVuY2UrKzsNCiAgICAgIH0pDQogICAgfSwNCiAgICBzZWxlY3REb2NSZXBvcnRJdGVtKGluZGV4KSB7DQogICAgICBjb25zdCBpdGVtID0gdGhpcy50YWJsZUxpc3RbaW5kZXhdOw0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmRvY1RhYmxlSWQgPT09IGZhbHNlKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmRvY1RhYmxlSWQgPSBpdGVtLmRvY1RhYmxlSWQ7DQogICAgICB9DQogICAgICBpZiAodGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuaW5kZXhTZXQuaGFzKGl0ZW0ucmVwb3J0SWQpKSB7DQogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5kb2NUYWJsZUlkID09PSBpdGVtLmRvY1RhYmxlSWQpIHsNCiAgICAgICAgICB0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5pbmRleFNldC5kZWxldGUoaXRlbS5yZXBvcnRJZCk7DQogICAgICAgICAgdGhpcy50YWJsZUxpc3RbaW5kZXhdLnNlbGVjdGVkID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5kb2NUYWJsZUlkID09PSBpdGVtLmRvY1RhYmxlSWQpIHsNCiAgICAgICAgICB0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5pbmRleFNldC5hZGQoaXRlbS5yZXBvcnRJZCk7DQogICAgICAgICAgdGhpcy50YWJsZUxpc3RbaW5kZXhdLnNlbGVjdGVkID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREb2NSZXBvcnRzLmluZGV4U2V0LnNpemUgPT09IDApIHsNCiAgICAgICAgdGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuZG9jVGFibGVJZCA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgcHJpbnRDb2x1bW4oY29sdW1uLCBpbmRleCkgew0KICAgICAgc3dpdGNoIChjb2x1bW4udHlwZUNvZGUpIHsNCiAgICAgICAgY2FzZSAnU0VRVUVOQ0UnOg0KICAgICAgICAgIHJldHVybiBjb2x1bW4/LnZhbHVlID8/IGluZGV4ICsgMTsNCiAgICAgICAgY2FzZSAnU1RSSU5HJzoNCiAgICAgICAgICByZXR1cm4gY29sdW1uPy52YWx1ZVN0cmluZyA/PyBjb2x1bW4/LnZhbHVlID8/ICcnOw0KICAgICAgICBjYXNlICdCSUdERUNJTUFMJzoNCiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMNCiAgICAgICAgICBsZXQgdiA9IGNvbHVtbj8udmFsdWVCaWdEZWNpbWFsID8/IDA7DQogICAgICAgICAgdiA9IHYudG9GaXhlZCgyKTsNCiAgICAgICAgICBpZiAoIWlzTmFOKHYpKSB7DQogICAgICAgICAgICByZXR1cm4gdjsNCiAgICAgICAgICB9DQogICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICBjYXNlICdCT09MRUFOJzoNCiAgICAgICAgICByZXR1cm4gY29sdW1uPy52YWx1ZUJvb2xlYW4gPyB0aGlzLiR0KCdhY3Rpb25zLnllcycpIDogdGhpcy4kdCgnYWN0aW9ucy5ubycpOw0KICAgICAgICBjYXNlICdEQVRFJzoNCiAgICAgICAgICByZXR1cm4gY29sdW1uPy52YWx1ZURhdGUgPz8gJyc7DQogICAgICAgIGNhc2UgJ1lFQVInOg0KICAgICAgICAgIHJldHVybiBjb2x1bW4/LnZhbHVlU3RyaW5nID8/ICcnOw0KICAgICAgICBjYXNlICdTRUxFQ1QnOg0KICAgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoew0KICAgICAgICAgICAgbmFtZVV6OiBjb2x1bW4/LnNlbGVjdFZhbHVlTmFtZVV6LA0KICAgICAgICAgICAgbmFtZVJ1OiBjb2x1bW4/LnNlbGVjdFZhbHVlTmFtZVJ1LA0KICAgICAgICAgICAgbmFtZUx0OiBjb2x1bW4/LnNlbGVjdFZhbHVlTmFtZUx0LA0KICAgICAgICAgIH0pLnRyaW0oJyAsJyk7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgZ2V0VGFibGVMaXN0KCkgew0KICAgICAgaWYgKHRoaXMucGFyYW1zLmRvY1RhYmxlSWQgJiYgdGhpcy5wYXJhbXMuZGF0ZVR5cGVJZCkgew0KICAgICAgICB0aGlzLnRhYmxlTGlzdExlbmd0aCA9IDA7DQogICAgICAgIHRoaXMudGFibGVMaXN0TGVuZ3RoID0gMDsNCiAgICAgICAgdGhpcy50YWJsZUxpc3QgPSBbXTsNCiAgICAgICAgdGhpcy5sb2FkZXIgPSB0cnVlDQogICAgICAgIGF3YWl0IHJlcG9ydFNlcnZpY2UucmVwb3J0TGlzdEZvckNvbGxlY3Rpb24odGhpcy5wYXJhbXMuZG9jVGFibGVJZCwgdGhpcy5wYXJhbXMuZGF0ZVR5cGVJZCwgey4uLnRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWR9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5saXN0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHRoaXMudGFibGVMaXN0TGVuZ3RoID0gcmVzcG9uc2UuZGF0YS50b3RhbDsNCiAgICAgICAgICAgIHRoaXMudGFibGVMaXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0Lm1hcCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgICByZXR1cm4gey4uLml0ZW0sIHNlbGVjdGVkOiB0aGlzLnNlbGVjdGVkRG9jUmVwb3J0cy5pbmRleFNldC5oYXMoaXRlbS5yZXBvcnRJZCl9Ow0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMudGFibGVMaXN0TGVuZ3RoID0gMDsNCiAgICAgICAgICAgIHRoaXMudGFibGVMaXN0ID0gW107DQogICAgICAgICAgfQ0KICAgICAgICB9KS5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmxvYWRlciA9IGZhbHNlOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZUV4cG9ydEV4Y2VsKCkgew0KICAgICAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTsNCiAgICAgIGxldCBkYXRlRE1ZID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpICsgJy0nICsgKGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxKSArICctJyArIGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7DQogICAgICBsZXQgZmlsZU5hbWUgPSB0aGlzLmdldE5hbWUodGhpcy5zZWxlY3RlZERvY1JlcG9ydHMuZG9jVGFibGUpICsgZGF0ZURNWTsNCiAgICAgIGxldCB0YWJsZSA9IHRoaXMuJHJlZnMuY29sbGVjdGVkUmVwb3J0VGFibGU7DQogICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2JvcmRlcicsICcxJyk7DQogICAgICB0YWJsZS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIGJsYWNrJzsNCiAgICAgIHRhYmxlLmNoaWxkcmVuPy5mb3JFYWNoKHRoZWFkT3JUYm9keSA9PiB7DQogICAgICAgIHRoZWFkT3JUYm9keS5jaGlsZHJlbi5mb3JFYWNoKHRyID0+IHsNCiAgICAgICAgICB0ci5jaGlsZHJlbi5mb3JFYWNoKHRoT3JUZCA9PiB7DQogICAgICAgICAgICB0aE9yVGQud2lkdGggPSB0aE9yVGQub2Zmc2V0V2lkdGggKyAncHgnOw0KICAgICAgICAgICAgdGhPclRkLnN0eWxlLndpZHRoID0gdGhPclRkLm9mZnNldFdpZHRoICsgJ3B4JzsNCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICAgIGxldCB3YiA9IFhMU1gudXRpbHMudGFibGVfdG9fYm9vayh0YWJsZSwge3NoZWV0OiAic2hlZXQxIn0pOw0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7IC8vIHRvZG8gbmVnYSBidSBrZXJha2xpZ2luaSB0ZWtzaGlyaXNoIGtlcmFrLCBjb3B5IG9saWIgcW95Z2FubWFuDQogICAgICAgIHRoaXMubG9hZGVyRXhjZWwgPSBmYWxzZTsNCiAgICAgIH0sIDUwMCk7DQogICAgICByZXR1cm4gWExTWC53cml0ZUZpbGUod2IsIGAke2ZpbGVOYW1lfS54bHN4YCwge30pOw0KICAgIH0sDQogICAgaGFuZGxlU2F2ZURhdGFPcGVuTW9kYWwoKSB7DQogICAgICB0aGlzLiRidk1vZGFsLnNob3coJ3NhdmVEYXRhTW9kYWwnKQ0KICAgIH0sDQogICAgaGFuZGxlU2F2ZURhdGEoZSkgew0KICAgICAgdGhpcy5jb21wdXRlZE9iU2VydmVyU2F2ZURhdGEudmFsaWRhdGUoKS50aGVuKGlzVmFsaWQgPT4gew0KICAgICAgICBpZiAoIWlzVmFsaWQpIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5sb2FkZXIgPSB0cnVlDQogICAgICAgIGxldCBkYXRhID0gW107DQogICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuY29sbGVjdGVkUmVwb3J0Rm9yVGFibGVSZXBvcnQpIHsNCiAgICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLmNvbGxlY3RlZFJlcG9ydEZvclRhYmxlUmVwb3J0W2tleV0pIHsNCiAgICAgICAgICAgIGlmICghdmFsLnR5cGVDb2RlIHx8IHZhbC50eXBlQ29kZSA9PT0gJ1NFUVVFTkNFJyB8fCAhdmFsLmNvbHVtbklkIHx8ICF2YWwuZG9jUmVwb3J0SWQpIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodmFsLnR5cGVDb2RlID09PSAnU0VMRUNUJyAmJiB0eXBlb2YgdmFsLnNlbGVjdFZhbHVlSWQgPT09ICdvYmplY3QnKSB7DQogICAgICAgICAgICAgIGNvbnN0IHNlbGVjdFZhbHVlID0gdmFsLnNlbGVjdFZhbHVlSWQ7DQogICAgICAgICAgICAgIGRhdGEucHVzaCh7DQogICAgICAgICAgICAgICAgLi4udmFsLA0KICAgICAgICAgICAgICAgIGR5bmFtaWNSb3dJZDoga2V5ICsgMSwNCiAgICAgICAgICAgICAgICBzZWxlY3RWYWx1ZUlkOiBzZWxlY3RWYWx1ZT8uaWQsDQogICAgICAgICAgICAgICAgdmFsdWU6IG51bGwsDQogICAgICAgICAgICAgICAgdmFsdWVTdHJpbmc6IG51bGwsDQogICAgICAgICAgICAgICAgc2VsZWN0VmFsdWVOYW1lVXo6IHNlbGVjdFZhbHVlPy5uYW1lVXogPz8gc2VsZWN0VmFsdWU/Lm5hbWUgPz8gJycsDQogICAgICAgICAgICAgICAgc2VsZWN0VmFsdWVOYW1lUnU6IHNlbGVjdFZhbHVlPy5uYW1lUnUgPz8gc2VsZWN0VmFsdWU/Lm5hbWUgPz8gJycsDQogICAgICAgICAgICAgICAgc2VsZWN0VmFsdWVOYW1lTHQ6IHNlbGVjdFZhbHVlPy5uYW1lTHQgPz8gc2VsZWN0VmFsdWU/Lm5hbWUgPz8gJycsDQogICAgICAgICAgICAgICAgc2VsZWN0VmFsdWVOYW1lRW46IHNlbGVjdFZhbHVlPy5uYW1lRW4gPz8gc2VsZWN0VmFsdWU/Lm5hbWUgPz8gJycsDQogICAgICAgICAgICAgICAgcm93SWQ6IG51bGwNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBkYXRhLnB1c2goew0KICAgICAgICAgICAgICAuLi52YWwsDQogICAgICAgICAgICAgIGR5bmFtaWNSb3dJZDoga2V5ICsgMSwNCiAgICAgICAgICAgICAgcm93SWQ6IG51bGwNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNvbnN0IGluZm8gPSB7DQogICAgICAgICAgLi4udGhpcy5zYXZlRGF0YS5yZXBvcnRJbmZvRm9yR2F0aGVyLA0KICAgICAgICAgIHRhYmxlSWQ6IHRoaXMucGFyYW1zLmRvY1RhYmxlSWQsDQogICAgICAgICAgZGF0ZVR5cGVJZDogdGhpcy5wYXJhbXMuZGF0ZVR5cGVJZCwNCiAgICAgICAgICBnYXRoZXJUeXBlOiB0aGlzLmNvbGxlY3RpbmdUeXBlLA0KICAgICAgICB9DQogICAgICAgIHJlcG9ydFNlcnZpY2UuY3JlYXRlQW5kRmlsbEdhdGhlclJlcG9ydChpbmZvLCBkYXRhKQ0KICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5zYXZlZF9zdWNjZXNzZnVsbHknKSwge3R5cGU6ICdzdWNjZXNzJ30pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkZXIgPSBmYWxzZQ0KICAgICAgICAgICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ3NhdmVEYXRhTW9kYWwnKQ0KICAgICAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBvd25Eb2NUYWJsZXNWYWx1ZShvcHQpIHsNCiAgICAgIGxldCBpdGVtID0gdGhpcy5vd25Eb2NUYWJsZUxpc3RPcHRpb25zLmZpbmQoZSA9PiBlLnZhbHVlID09PSBvcHQpOw0KICAgICAgcmV0dXJuIGl0ZW0udGV4dCA/PyAnJw0KICAgIH0sDQogICAgbGFiZWxDb2xsZWN0ZWRTZWxlY3Qoe25hbWVVeiwgbmFtZUx0LCBuYW1lUnUsIG5hbWV9KSB7DQogICAgICByZXR1cm4gbmFtZVV6ID8gdGhpcy5nZXROYW1lKHtuYW1lVXo6IG5hbWVVeiwgbmFtZUx0OiBuYW1lTHQsIG5hbWVSdTogbmFtZVJ1fSkgOiBuYW1lDQogICAgfSwNCiAgICBmaW5kRmllbGRCeUlkKGlkKSB7DQogICAgICByZXR1cm4gdGhpcy5kb2NUYWJsZUZpZWxkc1NlcmlhbGl6ZWQuZmluZChlID0+IGUuaWQgPT09IGlkKTsNCiAgICB9LA0KICAgIGFzeW5jIHNlbGVjdEZldGNoT3B0aW9ucyhjb2x1bW4sIGtleXdvcmQpIHsNCiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNlbGVjdExvYWRJdGVtVGltZU91dCk7DQogICAgICB0aGlzLnNlbGVjdExvYWRJdGVtVGltZU91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICB0aGlzLnNlbGVjdExvYWRJdGVtTG9hZGVyID0gdHJ1ZTsNCiAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmZpbmRGaWVsZEJ5SWQoY29sdW1uLmNvbHVtbklkKTsNCiAgICAgICAgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQoZmllbGQucmVmZXJlbmNlVXJsLCB7DQogICAgICAgICAga2V5d29yZDoga2V5d29yZCwNCiAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwLA0KICAgICAgICAgIHBhZ2U6IDENCiAgICAgICAgfSwgZmllbGQucmVmZXJlbmNlQXBwZW5kVXJsKQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgaWYgKCJEZXBhcnRtZW50Rm9yRG9jdW1lbnQiID09PSBmaWVsZC5yZWZDb2RlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RPcHRpb25zQnlSZWZlcmVuY2VVcmxbZmllbGQuaWRdID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbnNCeVJlZmVyZW5jZVVybFtmaWVsZC5pZF0gPSByZXMuZGF0YS5saXN0DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RMb2FkSXRlbUxvYWRlciA9IGZhbHNlOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RMb2FkSXRlbUxvYWRlciA9IGZhbHNlOw0KICAgICAgICAgICAgfSkNCiAgICAgIH0sIDUwMCk7DQogICAgfSwNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBvd25Eb2NUYWJsZUxpc3RPcHRpb25zKCkgew0KICAgICAgaWYgKHRoaXMub3duRG9jVGFibGVMaXN0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgcmV0dXJuIHRoaXMub3duRG9jVGFibGVMaXN0Lm1hcChpdGVtID0+IHsNCiAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdGV4dDogdGhpcy5nZXROYW1lKHsNCiAgICAgICAgICAgICAgbmFtZVV6OiBpdGVtLm5hbWVVeiwNCiAgICAgICAgICAgICAgbmFtZVJ1OiBpdGVtLm5hbWVSdSwNCiAgICAgICAgICAgICAgbmFtZUx0OiBpdGVtLm5hbWVMdCwNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQsDQogICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICByZXR1cm4gW107DQogICAgfSwNCiAgICBvd25EYXRlVHlwZUxpc3RPcHRpb25zKCkgew0KICAgICAgaWYgKHRoaXMuZGF0ZVR5cGVMaXN0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVR5cGVMaXN0Lm1hcChpdGVtID0+IHsNCiAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdGV4dDogdGhpcy5nZXROYW1lKHsNCiAgICAgICAgICAgICAgbmFtZVV6OiBpdGVtLm5hbWVVeiwNCiAgICAgICAgICAgICAgbmFtZVJ1OiBpdGVtLm5hbWVSdSwNCiAgICAgICAgICAgICAgbmFtZUx0OiBpdGVtLm5hbWVMdCwNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQsDQogICAgICAgICAgfTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICByZXR1cm4gW107DQogICAgfSwNCiAgICBjb21wdXRlZE9iU2VydmVyU2F2ZURhdGEoKSB7DQogICAgICByZXR1cm4gdGhpcy4kcmVmcy5vYlNlcnZlclNhdmVEYXRhDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIGFzeW5jICdwYXJhbXMuZG9jVGFibGVJZCcoZG9jVGFibGVJZCkgew0KICAgICAgY29uc3Qge2RhdGVUeXBlSWR9ID0gdGhpcy5vd25Eb2NUYWJsZUxpc3QuZmluZChlID0+IGUuaWQgPT09IGRvY1RhYmxlSWQpOw0KICAgICAgaWYgKGRhdGVUeXBlSWQpIHsNCiAgICAgICAgdGhpcy5sb2FkZXIgPSB0cnVlDQogICAgICAgIGF3YWl0IHRoaXMuZ2V0RGF0ZVR5cGVMaXN0KGRhdGVUeXBlSWQpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmRhdGVUeXBlTGlzdCA9IFtdOw0KICAgICAgfQ0KICAgIH0sDQogICAgJ3Zhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLnBhZ2UnKCkgew0KICAgICAgaWYgKHRoaXMubG9hZGVyKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMuaGFuZGxlU2VhcmNoKGZhbHNlKTsNCiAgICB9LA0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4QA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/modules/report/collection/assemble","sourcesContent":["<template>\r\n  <div>\r\n    <b-overlay\r\n        :opacity=\"0.2\"\r\n        :show=\"loader\"\r\n    >\r\n      <div class=\"col-md-12 text-center\">\r\n        <div class=\"h4 mb-4 d-inline-block\">{{ $t('submodules.reports.collection_assemble') }}</div>\r\n      </div>\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row mb-2\">\r\n            <div class=\"col-sm-12\">\r\n              <div class=\"row mb-2\">\r\n                <div class=\"col-md-3\">\r\n                  <BaseMultiselectWithValidation\r\n                      rules=\"required\"\r\n                      class=\"required\"\r\n                      onlyFormElement\r\n                      v-model=\"params.docTableId\"\r\n                      :options=\"ownDocTableListOptions.map(e => e.value)\"\r\n                      :label=\"$t('column.value_type')\"\r\n                      label-on-top\r\n                      placeholder=\"\"\r\n                      :custom-label=\"ownDocTablesValue\"\r\n                      open-direction=\"bottom\"\r\n                      :max-height=\"600\"\r\n                      :show-labels=\"false\"\r\n                  />\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                  <b-form-select\r\n                      class=\"border-light form-control rounded\"\r\n                      v-model=\"params.dateTypeId\"\r\n                      :disabled=\"ownDateTypeListOptions.length < 1\"\r\n                      :options=\"ownDateTypeListOptions\"></b-form-select>\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                  <div class=\"search-box\">\r\n                    <div class=\"position-relative\">\r\n                      <input\r\n                          type=\"text\"\r\n                          v-model=\"params.name\"\r\n                          class=\"form-control rounded border-light\"\r\n                          :placeholder=\"$t('actions.search')\"\r\n                      />\r\n                      <i class=\"mdi mdi-magnify search-icon\"></i>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                  <b-btn @click=\"handleSearch\">{{ $t('actions.search') }}</b-btn>\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                  <b-btn variant=\"success\" @click=\"handleCollect()\"\r\n                         :disabled=\"this.selectedDocReports.indexSet.size < 2\">{{ $t('actions.collect') }}\r\n                  </b-btn>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-12\">\r\n              <table class=\"table table-hover table-striped\">\r\n                <thead>\r\n                <tr>\r\n                  <th>{{ '№' }}</th>\r\n                  <th>{{ $t('column.name') }}</th>\r\n                  <th>{{ $t('submodules.reports.report_date') }}</th>\r\n                  <th>{{ $t(\"nameShakl\") }}</th>\r\n                  <th>{{ $t(\"titleShakl\") }}</th>\r\n                  <th>{{ $t(\"dateTypes\") }}</th>\r\n                  <th>{{ $t(\"submodules.reports.yur_department\") }}</th>\r\n                  <th>{{ $t(\"submodules.reports.created_datetime\") }}</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr v-for=\"(item, index) in tableList\"\r\n                    :key=\"index\"\r\n                    class=\"cursor-pointer\"\r\n                    @click=\"selectDocReportItem(index)\"\r\n                    :class=\"{'table-info': item.selected, 'table-info': item.selected}\">\r\n                  <td>{{\r\n                      paginate(index, var_default_search_payload.itemsPerPage, var_default_search_payload.page - 1)\r\n                    }}\r\n                  </td>\r\n                  <td>\r\n                    {{\r\n                      getName({\r\n                        nameUz: item.reportNameUz,\r\n                        nameRu: item.reportNameRu,\r\n                        nameLt: item.reportNameLt,\r\n                      })\r\n                    }}\r\n                  </td>\r\n                  <td>{{ item.reportData }}</td>\r\n                  <td>{{\r\n                      getName({\r\n                        nameUz: item.docTableNameUz,\r\n                        nameRu: item.docTableNameRu,\r\n                        nameLt: item.docTableNameLt,\r\n                      })\r\n                    }}\r\n                  </td>\r\n                  <td>{{\r\n                      getName({\r\n                        nameUz: item.docTableTitleUz,\r\n                        nameRu: item.docTableTitleRu,\r\n                        nameLt: item.docTableTitleLt,\r\n                      })\r\n                    }}\r\n                  </td>\r\n                  <td>{{\r\n                      getName({\r\n                        nameUz: item.dateTypeNameUz,\r\n                        nameRu: item.dateTypeNameRu,\r\n                        nameLt: item.dateTypeNameLt,\r\n                      })\r\n                    }}\r\n                  </td>\r\n                  <td>{{\r\n                      getName({\r\n                        nameUz: item.yurDepNameUz,\r\n                        nameRu: item.yurDepNameRu,\r\n                        nameLt: item.yurDepNameLt,\r\n                      })\r\n                    }}\r\n                  </td>\r\n                  <td>{{ item.createdDate }}</td>\r\n                </tr>\r\n                <tr v-if=\"tableList.length <= 0\" :key=\"-1\">\r\n                  <td colspan=\"8\">\r\n                    <h5 class=\"text-center\">Маълумот топилмади</h5>\r\n                  </td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n              <b-pagination\r\n                  v-if=\"tableListLength > 0\"\r\n                  v-model=\"var_default_search_payload.page\"\r\n                  :total-rows=\"tableListLength\"\r\n                  :per-page=\"var_default_search_payload.itemsPerPage\"\r\n                  aria-controls=\"my-table\"\r\n                  class=\"justify-content-end\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <b-modal id=\"modal\" :title=\"$t('submodules.reports.collection_assemble')\" size=\"xl\">\r\n        <div class=\"row\">\r\n          <div class=\"col-2 my-2\">\r\n            <b-form-select\r\n                class=\"form-control rounded\"\r\n                v-model=\"collectingType\">\r\n              <b-form-select-option\r\n                  v-for=\"(item, index) in collectingTypeList\"\r\n                  :key=\"index\"\r\n                  :value=\"item.value\">\r\n                {{ item.name }}\r\n              </b-form-select-option>\r\n            </b-form-select>\r\n          </div>\r\n          <div class=\"col-1 my-2\">\r\n            <b-btn variant=\"success\" class=\"mx-1\" @click=\"handleCollectedReportDraw\">{{ $t('actions.gather') }}</b-btn>\r\n          </div>\r\n          <div class=\"col-1 my-2\">\r\n            <b-btn variant=\"info\" class=\"mx-1\" @click=\"handleExportExcel\">{{ $t('actions.excel') }}</b-btn>\r\n          </div>\r\n          <div class=\"col-6\"></div>\r\n          <div class=\"col-2 my-2\">\r\n            <b-btn variant=\"success\" block\r\n                   class=\"mx-1\"\r\n                   :disabled=\"!collectedReportForTableReport || collectedReportForTableReport.length <= 0\"\r\n                   @click=\"handleSaveDataOpenModal\">{{ $t('actions.confirm') }}\r\n            </b-btn>\r\n          </div>\r\n          <div class=\"col-2 my-2\" v-if=\"collectingType === 'COLLECT_AVG'\">\r\n            <input type=\"checkbox\" id=\"checkbox\" v-model=\"collectionAvgIgnoreZero\">\r\n            <label for=\"checkbox\">{{ $t('submodules.reports.zero_ignore') }}</label>\r\n          </div>\r\n        </div>\r\n        <table ref=\"collectedReportTable\" class=\"table table-hover table-striped table-custom-bordered\" border=\"1\"\r\n               style=\"border: 1px solid black\">\r\n          <report-header :fields=\"docTableFieldsOriginal\"></report-header>\r\n          <tbody>\r\n          <tr v-for=\"(reportRow, reportRowIndex) in collectedReportForTableReport\" :key=\"reportRowIndex\">\r\n            <td v-for=\"(reportCol, reportColIndex) in reportRow\" :key=\"reportColIndex\">\r\n              <BaseMultiselectWithValidation\r\n                  v-if=\"collectingType !== 'ASSEMBLE' && reportCol.typeCode === 'SELECT'\"\r\n                  v-model=\"collectedReportForTableReport[reportRowIndex][reportColIndex].selectValueId\"\r\n                  :options=\"selectOptionsByReferenceUrl[reportCol.columnId]\"\r\n                  :custom-label=\"labelCollectedSelect\"\r\n                  :label=\"$t('column.employee')\"\r\n                  :only-form-element=\"true\"\r\n                  :internal-search=\"false\"\r\n                  :hide-error-msg=\"false\"\r\n                  :loading=\"selectLoadItemLoader\"\r\n                  :show-labels=\"false\"\r\n                  :filterable=\"false\"\r\n                  :searchable=\"true\"\r\n                  :max-height=\"600\"\r\n                  @search-change=\"(keyword) => selectFetchOptions(reportCol, keyword)\"\r\n                  rules=\"required\"\r\n                  placeholder=\"\"\r\n              ></BaseMultiselectWithValidation>\r\n              {{ printColumn(reportCol, reportColIndex) }}\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </table>\r\n        <template #modal-footer>\r\n          <div>&nbsp;</div>\r\n        </template>\r\n      </b-modal>\r\n      <b-modal id=\"saveDataModal\" :title=\"$t('submodules.reports.collection_assemble')\" size=\"lg\">\r\n        <ValidationObserver ref=\"obServerSaveData\" v-slot=\"{}\">\r\n          <div class=\"row\">\r\n            <div class=\"col-12 my-2\">\r\n              <BaseInputWithValidation\r\n                  rules=\"required\"\r\n                  class=\"required\"\r\n                  @input=\"($event) => (saveData.reportInfoForGather.nameLt = toLatin($event))\"\r\n                  v-model=\"saveData.reportInfoForGather.nameUz\"\r\n                  :label=\"$t('column.name_uz')\"\r\n                  :placeholder=\"$t('column.name_uz')\"\r\n              />\r\n            </div>\r\n            <div class=\"col-12 my-2\">\r\n              <BaseInputWithValidation\r\n                  rules=\"required\"\r\n                  class=\"required\"\r\n                  @input=\"($event) => (saveData.reportInfoForGather.nameUz = toCyrill($event))\"\r\n                  v-model=\"saveData.reportInfoForGather.nameLt\"\r\n                  :label=\"$t('column.name_lt')\"\r\n                  :placeholder=\"$t('column.name_lt')\"\r\n              />\r\n            </div>\r\n            <div class=\"col-12 my-2\">\r\n              <BaseInputWithValidation\r\n                  rules=\"required\"\r\n                  class=\"required\"\r\n                  v-model=\"saveData.reportInfoForGather.nameRu\"\r\n                  :label=\"$t('column.name_ru')\"\r\n                  :placeholder=\"$t('column.name_ru')\"\r\n              />\r\n            </div>\r\n            <div class=\"col-12 my-2\">\r\n              <BaseDatePickerWithValidation\r\n                  rules=\"required\"\r\n                  class=\"required\"\r\n                  v-model=\"saveData.reportInfoForGather.date\"\r\n                  :label=\"$t('column.date')\"\r\n                  :placeholder=\"$t('column.date')\"\r\n                  format=\"DD.MM.YYYY\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </ValidationObserver>\r\n        <template #modal-footer>\r\n          <b-btn variant=\"success\" @click=\"handleSaveData\">\r\n            {{ $t(\"actions.save\") }}\r\n          </b-btn>\r\n        </template>\r\n      </b-modal>\r\n    </b-overlay>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport reportService from \"../../reportService\";\r\nimport reportHeader from \"./reportHeader\";\r\nimport XLSX from \"xlsx\";\r\nimport BaseInputWithValidation from \"@/components/base/BaseInputWithValidation\";\r\nimport BaseDatePickerWithValidation from \"@/components/base/BaseDatePickerWithValidation\";\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\";\r\n\r\nexport default {\r\n  components: {\r\n    BaseDatePickerWithValidation,\r\n    BaseInputWithValidation,\r\n    reportHeader\r\n  },\r\n  data() {\r\n    return {\r\n      title: this.$t(\"reportRoles\"),\r\n      loader: true,\r\n      selectLoadItemLoader: null,\r\n      selectLoadItemTimeOut: null,\r\n      params: {\r\n        params: {\r\n          limit: 20,\r\n          page: 0,\r\n        },\r\n        search: \"\",\r\n        docTableId: \"\",\r\n        dateTypeId: \"\",\r\n      },\r\n      tableListParams: {\r\n        itemsPerPage: 20,\r\n        page: 0,\r\n      },\r\n      tableList: [],\r\n      tableListLength: 0,\r\n      docTableFieldsOriginal: [],\r\n      docTableFieldsSerialized: [],\r\n      ownDocTableList: [],\r\n      dateTypeList: [],\r\n      dateTypeListPayload: {\r\n        page: 0,\r\n        itemsPerPage: 100\r\n      },\r\n      selectOptionsByReferenceUrl: {},\r\n      selectedDocReports: {\r\n        indexSet: new Set(),\r\n        docTableId: false,\r\n        docTable: null,\r\n        docReports: {},\r\n      },\r\n      collectedReportForTableReport: [],\r\n      collectingType: 'ASSEMBLE',\r\n      collectionAvgIgnoreZero: false,\r\n      collectingGroupColumnId: null,\r\n      collectingTypeList: [\r\n        {\r\n          value: \"ASSEMBLE\",\r\n          name: \"Yig'ish\",\r\n        },\r\n        {\r\n          value: \"COLLECT_SUM\",\r\n          name: \"Yig'indini yig'ish (SUM)\",\r\n        },\r\n        {\r\n          value: \"COLLECT_AVG\",\r\n          name: \"O'rtacha qiymat yig'ish (AVG)\",\r\n        },\r\n      ],\r\n      saveData: {\r\n        reportInfoForGather: {\r\n          nameUz: '',\r\n          nameLt: '',\r\n          nameRu: '',\r\n          date: '',\r\n        }\r\n      }\r\n    };\r\n  },\r\n  async created() {\r\n    await this.getOwnDocTableList();\r\n    this.loader = false;\r\n  },\r\n  methods: {\r\n    getOwnDocTableList() {\r\n      reportService.getOwnTable(this.params).then(response => {\r\n        if (response.data.list.length > 0) {\r\n          this.ownDocTableList = response.data.list;\r\n        }\r\n      });\r\n    },\r\n    getDateTypeList(dateTypeId) {\r\n      reportService.getListByParentId(dateTypeId, this.dateTypeListPayload).then(response => {\r\n        if (response.data.list.length > 0) {\r\n          this.dateTypeList = response.data.list;\r\n        }\r\n      })\r\n          .finally(() => {\r\n            this.loader = false;\r\n          });\r\n    },\r\n    async handleSearch(clearSelected = true) {\r\n      if (clearSelected) {\r\n        this.selectedDocReports.docTableId = false;\r\n        this.selectedDocReports.indexSet = new Set();\r\n      }\r\n      await this.getTableList();\r\n    },\r\n    handleValidateForCollecting() {\r\n      if (!this.selectedDocReports.docTableId || this.selectedDocReports.indexSet.size < 2) {\r\n        this.$toast(this.$t(\"submodules.reports.select_minimum_two_report\"), {type: \"warning\"})\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    async handleCollect() {\r\n      this.loader = true;\r\n      this.collectedReportForTableReport = [];\r\n      this.docTableFieldsOriginal = [];\r\n      this.docTableFieldsSerialized = [];\r\n      if (!this.handleValidateForCollecting()) {\r\n        this.loader = false;\r\n        return;\r\n      }\r\n      await reportService.getByIdTable(this.selectedDocReports.docTableId).then(async response => {\r\n        if (response.data.columns.length > 0) {\r\n          this.docTableFieldsOriginal = response.data.columns;\r\n          this.deserializeDocTableFields(this.docTableFieldsOriginal);\r\n          this.selectedDocReports.docTable = response.data.table;\r\n        }\r\n        this.$bvModal.show('modal')\r\n        await this.handleCollectView();\r\n        this.loader = false;\r\n      }).catch(() => {\r\n        this.loader = false;\r\n      });\r\n    },\r\n    deserializeDocTableFields(list, clear = true) {\r\n      if (clear) {\r\n        this.docTableFieldsSerialized = [];\r\n      }\r\n      list.forEach(e => {\r\n        if (e.children.length > 0) {\r\n          this.deserializeDocTableFields(e.children, false);\r\n        } else {\r\n          this.docTableFieldsSerialized.push(e)\r\n          if (e.typeCode === 'SELECT') {\r\n            this.selectOptionsByReferenceUrl[e.id] = [];\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async handleCollectView() {\r\n      if (!this.handleValidateForCollecting()) {\r\n        return;\r\n      }\r\n      this.loader = true;\r\n      this.selectedDocReports.docReports = {};\r\n      await this.selectedDocReports.indexSet.forEach((docReportId) => {\r\n        this.selectedDocReports.docReports[docReportId] = {}\r\n        reportService.getReportById(docReportId).then(response => {\r\n          if (response.data) {\r\n            response.data.map(value => {\r\n              if (this.selectedDocReports.docReports[docReportId][value.rowId] === undefined) {\r\n                this.selectedDocReports.docReports[docReportId][value.rowId] = {};\r\n              }\r\n              this.selectedDocReports.docReports[docReportId][value.rowId][value.columnId] = value;\r\n            });\r\n          }\r\n        });\r\n      })\r\n    },\r\n    handleCollectedReportDraw() {\r\n      this.collectedReportForTableReport = [];\r\n      switch (this.collectingType) {\r\n        case 'ASSEMBLE':\r\n          this.handleCollectedReportDrawAssemble();\r\n          break;\r\n        case 'COLLECT_SUM':\r\n          this.handleCollectedReportDrawCollectSum();\r\n          break;\r\n        case 'COLLECT_AVG':\r\n          this.handleCollectedReportDrawCollectAvg();\r\n          break;\r\n      }\r\n    },\r\n    handleCollectedReportDrawAssemble() {\r\n      let sequence = 1;\r\n      this.selectedDocReports.indexSet.forEach((value) => {\r\n        const reports = this.selectedDocReports.docReports[value];\r\n        for (const reportRowIndex in reports) {\r\n          const reportRow = reports[reportRowIndex];\r\n          let reportRowData = JSON.parse('[]');\r\n          this.docTableFieldsSerialized.forEach(field => {\r\n            if (reportRow[field.id] !== undefined) {\r\n              reportRowData.push(reportRow[field.id]);\r\n            } else {\r\n              if (field.typeCode === 'SEQUENCE') {\r\n                reportRowData.push({\r\n                  value: sequence,\r\n                  typeCode: field.typeCode,\r\n                });\r\n                sequence++;\r\n              } else {\r\n                reportRowData.push({});\r\n              }\r\n            }\r\n          })\r\n          this.collectedReportForTableReport.push(reportRowData);\r\n        }\r\n      })\r\n    },\r\n    handleCollectedReportDrawCollectSum() {\r\n      let sequence = 1;\r\n      this.selectedDocReports.indexSet.forEach((docReportId) => {\r\n        let reportData = [];\r\n        let sumBigIntegerCount = {};\r\n        const reports = this.selectedDocReports.docReports[docReportId];\r\n        for (const reportRowIndex in reports) {\r\n          const report = reports[reportRowIndex];\r\n          this.docTableFieldsSerialized.forEach((docTableField, docTableFieldIndex) => {\r\n            const reportRowField = report[docTableField.id];\r\n            if (docTableField.typeCode === 'SEQUENCE' && typeof reportData[docTableFieldIndex] === 'undefined') {\r\n              reportData[docTableFieldIndex] = {\r\n                value: sequence,\r\n                typeCode: \"SEQUENCE\"\r\n              }\r\n            }\r\n            reportData[docTableFieldIndex] = reportRowField && !reportData[docTableFieldIndex]?.id ? JSON.parse(JSON.stringify(reportRowField)) : (reportData[docTableFieldIndex] || {});\r\n            if (docTableField.typeCode === 'BIGDECIMAL') {\r\n              const valueBigDecimal = reportRowField?.valueBigDecimal ?? 0;\r\n              if (typeof sumBigIntegerCount[docTableField.id] === 'undefined') {\r\n                sumBigIntegerCount[docTableField.id] = 0;\r\n              }\r\n              if (typeof reportData[docTableFieldIndex].valueBigDecimal === 'undefined' || reportData[docTableFieldIndex].valueBigDecimal === null || reportData[docTableFieldIndex].valueBigDecimal === '') {\r\n                reportData[docTableFieldIndex].valueBigDecimal = 0;\r\n              }\r\n              if (valueBigDecimal && (valueBigDecimal > 0 || valueBigDecimal < 0)) {\r\n                sumBigIntegerCount[docTableField.id]++;\r\n              }\r\n              if (valueBigDecimal && reportRowField?.id !== reportData[docTableFieldIndex]?.id) {\r\n                reportData[docTableFieldIndex].valueBigDecimal += valueBigDecimal;\r\n                reportData[docTableFieldIndex].value = reportData[docTableFieldIndex].valueBigDecimal?.toString();\r\n              }\r\n            } else if (docTableField.typeCode === 'STRING' || docTableField.typeCode === 'DATE' || docTableField.typeCode === 'YEAR' || docTableField.typeCode === 'BOOLEAN') {\r\n              reportData[docTableFieldIndex].value += \", \" + (reportRowField.value ?? '');\r\n              reportData[docTableFieldIndex].valueDate += \", \" + (reportRowField.valueDate ?? '');\r\n              reportData[docTableFieldIndex].valueString += \", \" + (reportRowField.valueString ?? '');\r\n              reportData[docTableFieldIndex].valueBoolean += \", \" + (reportRowField.valueBoolean ?? '');\r\n            } else if (docTableField.typeCode === 'SELECT') {\r\n              if (!reportData[docTableFieldIndex]) {\r\n                reportData[docTableFieldIndex] = JSON.parse(JSON.stringify(reportRowField));\r\n              }\r\n              reportData[docTableFieldIndex].id = reportRowField.id;\r\n              reportData[docTableFieldIndex].rowId = reportRowField.rowId;\r\n              // reportData[docTableFieldIndex].typeCode = 'STRING';\r\n              reportData[docTableFieldIndex].columnId = reportRowField.columnId;\r\n              reportData[docTableFieldIndex].docReportId = reportRowField.docReportId;\r\n              reportData[docTableFieldIndex].selectValueId = null;\r\n              if (reportData[docTableFieldIndex]?.valueString?.indexOf(reportRowField.selectValueNameUz) === -1) {\r\n                if (reportRowField?.selectValueNameUz) {\r\n                  reportData[docTableFieldIndex].valueString += (reportRowField?.selectValueNameUz ?? '') + \", \";\r\n                  reportData[docTableFieldIndex].value += (reportRowField?.selectValueNameUz ?? '') + \", \";\r\n                  reportData[docTableFieldIndex].selectValueNameUz += (reportRowField?.selectValueNameUz ?? '') + \", \";\r\n                }\r\n                if (reportRowField?.selectValueNameEn) {\r\n                  reportData[docTableFieldIndex].selectValueNameEn += (reportRowField?.selectValueNameEn ?? '') + \", \";\r\n                }\r\n                if (reportRowField?.selectValueNameLt) {\r\n                  reportData[docTableFieldIndex].selectValueNameLt += (reportRowField?.selectValueNameLt ?? '') + \", \";\r\n                }\r\n                if (reportRowField?.selectValueNameRu) {\r\n                  reportData[docTableFieldIndex].selectValueNameRu += (reportRowField?.selectValueNameRu ?? '') + \", \";\r\n                }\r\n              } else if (reportData[docTableFieldIndex]?.valueString === null) {\r\n                reportData[docTableFieldIndex].valueString = '';\r\n              }\r\n            }\r\n          })\r\n        }\r\n        this.collectedReportForTableReport.push(reportData);\r\n        sequence++;\r\n      })\r\n    },\r\n    handleCollectedReportDrawCollectAvg() {\r\n      let sequence = 1;\r\n      this.selectedDocReports.indexSet.forEach((docReportId) => {\r\n        let reportData = [];\r\n        let sumBigIntegerCount = {};\r\n        const reports = this.selectedDocReports.docReports[docReportId];\r\n        for (const reportRowIndex in reports) {\r\n          const report = reports[reportRowIndex];\r\n          this.docTableFieldsSerialized.forEach((docTableField, docTableFieldIndex) => {\r\n            const reportRowField = report[docTableField.id];\r\n            if (docTableField.typeCode === 'SEQUENCE' && typeof reportData[docTableFieldIndex] === 'undefined') {\r\n              reportData[docTableFieldIndex] = {\r\n                value: sequence,\r\n                typeCode: \"SEQUENCE\"\r\n              }\r\n            }\r\n            reportData[docTableFieldIndex] = reportRowField && !reportData[docTableFieldIndex]?.id ? JSON.parse(JSON.stringify(reportRowField)) : (reportData[docTableFieldIndex] || {});\r\n            if (docTableField.typeCode === 'BIGDECIMAL') {\r\n              const valueBigDecimal = reportRowField?.valueBigDecimal ?? 0;\r\n              if (typeof sumBigIntegerCount[docTableField.id] === 'undefined') {\r\n                sumBigIntegerCount[docTableField.id] = 0;\r\n              }\r\n              if (typeof reportData[docTableFieldIndex].valueBigDecimal === 'undefined' || reportData[docTableFieldIndex].valueBigDecimal === null || reportData[docTableFieldIndex].valueBigDecimal === '') {\r\n                reportData[docTableFieldIndex].valueBigDecimal = 0;\r\n              }\r\n              if (this.collectionAvgIgnoreZero) {\r\n                if (valueBigDecimal && (valueBigDecimal > 0 || valueBigDecimal < 0)) {\r\n                  sumBigIntegerCount[docTableField.id]++;\r\n                }\r\n              } else {\r\n                sumBigIntegerCount[docTableField.id]++;\r\n              }\r\n              if (valueBigDecimal && reportRowField?.id !== reportData[docTableFieldIndex]?.id) {\r\n                reportData[docTableFieldIndex].valueBigDecimal += valueBigDecimal;\r\n                reportData[docTableFieldIndex].value = reportData[docTableFieldIndex].valueBigDecimal?.toString();\r\n              }\r\n            } else if (docTableField.typeCode === 'STRING' || docTableField.typeCode === 'DATE' || docTableField.typeCode === 'YEAR' || docTableField.typeCode === 'BOOLEAN') {\r\n              reportData[docTableFieldIndex].value += \", \" + (reportRowField.value ?? '');\r\n              reportData[docTableFieldIndex].valueDate += \", \" + (reportRowField.valueDate ?? '');\r\n              reportData[docTableFieldIndex].valueString += \", \" + (reportRowField.valueString ?? '');\r\n              reportData[docTableFieldIndex].valueBoolean += \", \" + (reportRowField.valueBoolean ?? '');\r\n            } else if (docTableField.typeCode === 'SELECT') {\r\n              if (!reportData[docTableFieldIndex]) {\r\n                reportData[docTableFieldIndex] = JSON.parse(JSON.stringify(reportRowField));\r\n              }\r\n              reportData[docTableFieldIndex].id = reportRowField.id;\r\n              reportData[docTableFieldIndex].rowId = reportRowField.rowId;\r\n              // reportData[docTableFieldIndex].typeCode = 'STRING';\r\n              reportData[docTableFieldIndex].columnId = reportRowField.columnId;\r\n              reportData[docTableFieldIndex].docReportId = reportRowField.docReportId;\r\n              if (reportData[docTableFieldIndex]?.valueString?.indexOf(reportRowField.selectValueNameUz) === -1) {\r\n                if (reportRowField?.selectValueNameUz) {\r\n                  reportData[docTableFieldIndex].value += (reportRowField?.selectValueNameUz ?? '') + \", \";\r\n                  reportData[docTableFieldIndex].valueString += (reportRowField?.selectValueNameUz ?? '') + \", \";\r\n                  reportData[docTableFieldIndex].selectValueNameUz += (reportRowField?.selectValueNameUz ?? '') + \", \";\r\n                }\r\n                if (reportRowField?.selectValueNameEn) {\r\n                  reportData[docTableFieldIndex].selectValueNameEn += (reportRowField?.selectValueNameEn ?? '') + \", \";\r\n                }\r\n                if (reportRowField?.selectValueNameLt) {\r\n                  reportData[docTableFieldIndex].selectValueNameLt += (reportRowField?.selectValueNameLt ?? '') + \", \";\r\n                }\r\n                if (reportRowField?.selectValueNameRu) {\r\n                  reportData[docTableFieldIndex].selectValueNameRu += (reportRowField?.selectValueNameRu ?? '') + \", \";\r\n                }\r\n              } else if (reportData[docTableFieldIndex]?.valueString === null) {\r\n                reportData[docTableFieldIndex].valueString = '';\r\n                reportData[docTableFieldIndex].value = '';\r\n              }\r\n            }\r\n          })\r\n        }\r\n        for (const i in reportData) {\r\n          const count = sumBigIntegerCount[reportData[i].columnId];\r\n          if (reportData[i].typeCode === 'BIGDECIMAL' && count > 0) {\r\n            reportData[i].valueBigDecimal /= count;\r\n          }\r\n          reportData[i].selectValueNameEn = reportData[i].selectValueNameEn ? reportData[i].selectValueNameEn.trim().slice(0, -1) : '';\r\n          reportData[i].selectValueNameLt = reportData[i].selectValueNameLt ? reportData[i].selectValueNameLt.trim().slice(0, -1) : '';\r\n          reportData[i].selectValueNameRu = reportData[i].selectValueNameRu ? reportData[i].selectValueNameRu.trim().slice(0, -1) : '';\r\n          reportData[i].selectValueNameUz = reportData[i].selectValueNameUz ? reportData[i].selectValueNameUz.trim().slice(0, -1) : '';\r\n        }\r\n        this.collectedReportForTableReport.push(reportData);\r\n        sequence++;\r\n      })\r\n    },\r\n    selectDocReportItem(index) {\r\n      const item = this.tableList[index];\r\n      if (this.selectedDocReports.docTableId === false) {\r\n        this.selectedDocReports.docTableId = item.docTableId;\r\n      }\r\n      if (this.selectedDocReports.indexSet.has(item.reportId)) {\r\n        if (this.selectedDocReports.docTableId === item.docTableId) {\r\n          this.selectedDocReports.indexSet.delete(item.reportId);\r\n          this.tableList[index].selected = false;\r\n        }\r\n      } else {\r\n        if (this.selectedDocReports.docTableId === item.docTableId) {\r\n          this.selectedDocReports.indexSet.add(item.reportId);\r\n          this.tableList[index].selected = true;\r\n        }\r\n      }\r\n      if (this.selectedDocReports.indexSet.size === 0) {\r\n        this.selectedDocReports.docTableId = false;\r\n      }\r\n    },\r\n    printColumn(column, index) {\r\n      switch (column.typeCode) {\r\n        case 'SEQUENCE':\r\n          return column?.value ?? index + 1;\r\n        case 'STRING':\r\n          return column?.valueString ?? column?.value ?? '';\r\n        case 'BIGDECIMAL':\r\n          // eslint-disable-next-line no-case-declarations\r\n          let v = column?.valueBigDecimal ?? 0;\r\n          v = v.toFixed(2);\r\n          if (!isNaN(v)) {\r\n            return v;\r\n          }\r\n          return '';\r\n        case 'BOOLEAN':\r\n          return column?.valueBoolean ? this.$t('actions.yes') : this.$t('actions.no');\r\n        case 'DATE':\r\n          return column?.valueDate ?? '';\r\n        case 'YEAR':\r\n          return column?.valueString ?? '';\r\n        case 'SELECT':\r\n          return this.getName({\r\n            nameUz: column?.selectValueNameUz,\r\n            nameRu: column?.selectValueNameRu,\r\n            nameLt: column?.selectValueNameLt,\r\n          }).trim(' ,');\r\n        default:\r\n          return '';\r\n      }\r\n    },\r\n    async getTableList() {\r\n      if (this.params.docTableId && this.params.dateTypeId) {\r\n        this.tableListLength = 0;\r\n        this.tableListLength = 0;\r\n        this.tableList = [];\r\n        this.loader = true\r\n        await reportService.reportListForCollection(this.params.docTableId, this.params.dateTypeId, {...this.var_default_search_payload}).then(response => {\r\n          if (response.data.list.length > 0) {\r\n            this.tableListLength = response.data.total;\r\n            this.tableList = response.data.list.map((item) => {\r\n              return {...item, selected: this.selectedDocReports.indexSet.has(item.reportId)};\r\n            });\r\n          } else {\r\n            this.tableListLength = 0;\r\n            this.tableList = [];\r\n          }\r\n        }).finally(() => {\r\n          this.loader = false;\r\n        });\r\n      }\r\n    },\r\n    handleExportExcel() {\r\n      let currentDate = new Date();\r\n      let dateDMY = currentDate.getDate() + '-' + (currentDate.getMonth() + 1) + '-' + currentDate.getFullYear();\r\n      let fileName = this.getName(this.selectedDocReports.docTable) + dateDMY;\r\n      let table = this.$refs.collectedReportTable;\r\n      table.setAttribute('border', '1');\r\n      table.style.border = '1px solid black';\r\n      table.children?.forEach(theadOrTbody => {\r\n        theadOrTbody.children.forEach(tr => {\r\n          tr.children.forEach(thOrTd => {\r\n            thOrTd.width = thOrTd.offsetWidth + 'px';\r\n            thOrTd.style.width = thOrTd.offsetWidth + 'px';\r\n          })\r\n        })\r\n      })\r\n      let wb = XLSX.utils.table_to_book(table, {sheet: \"sheet1\"});\r\n      setTimeout(() => { // todo nega bu kerakligini tekshirish kerak, copy olib qoyganman\r\n        this.loaderExcel = false;\r\n      }, 500);\r\n      return XLSX.writeFile(wb, `${fileName}.xlsx`, {});\r\n    },\r\n    handleSaveDataOpenModal() {\r\n      this.$bvModal.show('saveDataModal')\r\n    },\r\n    handleSaveData(e) {\r\n      this.computedObServerSaveData.validate().then(isValid => {\r\n        if (!isValid) {\r\n          return false;\r\n        }\r\n        this.loader = true\r\n        let data = [];\r\n        for (const key in this.collectedReportForTableReport) {\r\n          for (const val of this.collectedReportForTableReport[key]) {\r\n            if (!val.typeCode || val.typeCode === 'SEQUENCE' || !val.columnId || !val.docReportId) {\r\n              continue;\r\n            }\r\n            if (val.typeCode === 'SELECT' && typeof val.selectValueId === 'object') {\r\n              const selectValue = val.selectValueId;\r\n              data.push({\r\n                ...val,\r\n                dynamicRowId: key + 1,\r\n                selectValueId: selectValue?.id,\r\n                value: null,\r\n                valueString: null,\r\n                selectValueNameUz: selectValue?.nameUz ?? selectValue?.name ?? '',\r\n                selectValueNameRu: selectValue?.nameRu ?? selectValue?.name ?? '',\r\n                selectValueNameLt: selectValue?.nameLt ?? selectValue?.name ?? '',\r\n                selectValueNameEn: selectValue?.nameEn ?? selectValue?.name ?? '',\r\n                rowId: null\r\n              })\r\n              continue;\r\n            }\r\n            data.push({\r\n              ...val,\r\n              dynamicRowId: key + 1,\r\n              rowId: null\r\n            })\r\n          }\r\n        }\r\n        const info = {\r\n          ...this.saveData.reportInfoForGather,\r\n          tableId: this.params.docTableId,\r\n          dateTypeId: this.params.dateTypeId,\r\n          gatherType: this.collectingType,\r\n        }\r\n        reportService.createAndFillGatherReport(info, data)\r\n            .then((res) => {\r\n              this.$toast(this.$t('messages.saved_successfully'), {type: 'success'});\r\n            })\r\n            .finally(() => {\r\n              this.loader = false\r\n              this.$bvModal.hide('saveDataModal')\r\n            })\r\n      })\r\n    },\r\n    ownDocTablesValue(opt) {\r\n      let item = this.ownDocTableListOptions.find(e => e.value === opt);\r\n      return item.text ?? ''\r\n    },\r\n    labelCollectedSelect({nameUz, nameLt, nameRu, name}) {\r\n      return nameUz ? this.getName({nameUz: nameUz, nameLt: nameLt, nameRu: nameRu}) : name\r\n    },\r\n    findFieldById(id) {\r\n      return this.docTableFieldsSerialized.find(e => e.id === id);\r\n    },\r\n    async selectFetchOptions(column, keyword) {\r\n      clearTimeout(this.selectLoadItemTimeOut);\r\n      this.selectLoadItemTimeOut = setTimeout(async () => {\r\n        this.selectLoadItemLoader = true;\r\n        const field = this.findFieldById(column.columnId);\r\n        crudAndListsService.searchListWithKeyword(field.referenceUrl, {\r\n          keyword: keyword,\r\n          itemsPerPage: 10,\r\n          page: 1\r\n        }, field.referenceAppendUrl)\r\n            .then(res => {\r\n              if (\"DepartmentForDocument\" === field.refCode) {\r\n                this.selectOptionsByReferenceUrl[field.id] = res.data\r\n              } else {\r\n                this.selectOptionsByReferenceUrl[field.id] = res.data.list\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.selectLoadItemLoader = false;\r\n            })\r\n            .finally(() => {\r\n              this.selectLoadItemLoader = false;\r\n            })\r\n      }, 500);\r\n    },\r\n  },\r\n  computed: {\r\n    ownDocTableListOptions() {\r\n      if (this.ownDocTableList.length > 0) {\r\n        return this.ownDocTableList.map(item => {\r\n          return {\r\n            text: this.getName({\r\n              nameUz: item.nameUz,\r\n              nameRu: item.nameRu,\r\n              nameLt: item.nameLt,\r\n            }),\r\n            value: item.id,\r\n          };\r\n        });\r\n      }\r\n      return [];\r\n    },\r\n    ownDateTypeListOptions() {\r\n      if (this.dateTypeList.length > 0) {\r\n        return this.dateTypeList.map(item => {\r\n          return {\r\n            text: this.getName({\r\n              nameUz: item.nameUz,\r\n              nameRu: item.nameRu,\r\n              nameLt: item.nameLt,\r\n            }),\r\n            value: item.id,\r\n          };\r\n        });\r\n      }\r\n      return [];\r\n    },\r\n    computedObServerSaveData() {\r\n      return this.$refs.obServerSaveData\r\n    }\r\n  },\r\n  watch: {\r\n    async 'params.docTableId'(docTableId) {\r\n      const {dateTypeId} = this.ownDocTableList.find(e => e.id === docTableId);\r\n      if (dateTypeId) {\r\n        this.loader = true\r\n        await this.getDateTypeList(dateTypeId)\r\n      } else {\r\n        this.dateTypeList = [];\r\n      }\r\n    },\r\n    'var_default_search_payload.page'() {\r\n      if (this.loader) {\r\n        return;\r\n      }\r\n      this.handleSearch(false);\r\n    },\r\n  }\r\n};\r\n</script>\r\n"]}]}