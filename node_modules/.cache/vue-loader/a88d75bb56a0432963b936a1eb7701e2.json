{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\components\\CreateFormGroupOfIndividuals.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\shared\\views\\components\\CreateFormGroupOfIndividuals.vue","mtime":1674799498076},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpjb25zdCBNQUlOX0FQSV9VUkwgPSAncmVlc3RyL2dyb3VwLW9mLWluZGl2aWR1YWxzJw0KLyoNCiogWU9VIE1VU1QgU0VORCB7eyBNQUlOX0FQSV9VUkwgfX0gVE8gQ1JVRF9TRVJWSUNFICovDQppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UiDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAiQ3JlYXRlRm9ybUdyb3VwT2ZJbmRpdmlkdWFscyIsDQogICAgcHJvcHM6IHsNCiAgICAgICAgY3VzdG9tSXNNb2RlQ3JlYXRlOiB7DQogICAgICAgICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICAgICAgfQ0KICAgIH0sDQogICAgLyoNCiAgICAqIENPTVBPTkVOVFMgKi8NCiAgICBjb21wb25lbnRzOiB7fSwNCiAgICAvKg0KICAgICogREFUQSAqLw0KICAgIGRhdGEgKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZWRpdGluZ0l0ZW06IHt9LA0KICAgICAgICAgICAgLy8gQ09OVFJBQ1RPUiBTRUxFQ1RfQU5EX0NSRUFURSBWQVJTDQogICAgICAgICAgICBoYXNOZXh0UGFnZUNvbnRyYWN0b3JzOiBmYWxzZSwNCiAgICAgICAgICAgIGNvbnRyYWN0b3JzOiBbXSwNCiAgICAgICAgICAgIGRlYm91bmNlOiBudWxsLA0KICAgICAgICAgICAgaXNMb2FkaW5nQ29udHJhY3RvcnM6IGZhbHNlLA0KICAgICAgICAgICAgY29udHJhY3RvckNyZWF0ZU1vZGFsOiBmYWxzZSwNCiAgICAgICAgICAgIGNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkOiB7fSwNCiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICB9DQogICAgfSwNCiAgICAvKg0KICAgICogQ09NUFVURUQgKi8NCiAgICBjb21wdXRlZDogew0KICAgICAgICBpc01vZGVDcmVhdGUgKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tSXNNb2RlQ3JlYXRlID8gdGhpcy5jdXN0b21Jc01vZGVDcmVhdGUgOiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnQ3JlYXRlR3JvdXBPZkluZGl2aWR1YWxzJw0KICAgICAgICB9LA0KICAgICAgICBjb21wdXRlZE9ic2VydmVyICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyDQogICAgICAgIH0NCiAgICB9LA0KICAgIC8qDQogICAgKiBNRVRIT0RTICovDQogICAgbWV0aG9kczogew0KICAgICAgICAvLyBDT05UUkFDVE9SIFNFTEVDVF9BTkRfQ1JFQVRFIE1FVEhPRFMNCiAgICAgICAgY29udHJhY3RvclJlYWNoZWRFbmRPZkxpc3QgKGUpIHsNCiAgICAgICAgICAgIGlmIChlICYmICF0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZGVib3VuY2VTZWFyY2hDb250cmFjdG9ycyAoc2VhcmNoVGV4dCkgew0KICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2UpOw0KICAgICAgICAgICAgdGhpcy5kZWJvdW5jZSA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkKHNlYXJjaFRleHQpOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH0sDQogICAgICAgIGN1c3RvbUxhYmVsQ29udHJhY3RvciAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmNvbnRyYWN0b3JzLmZpbmQoZSA9PiBlLmlubiA9PSBvcHQpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlbGVjdGVkLmlubn0gLSAke3NlbGVjdGVkLmZ1bGxOYW1lfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkIChrZXl3b3JkLCBtYWtlRmlyc3RTZWxlY3RlZCA9IGZhbHNlKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JzID0gW10NCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQucGFnZSA9IDENCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQua2V5d29yZCA9IGtleXdvcmQgPyBrZXl3b3JkIDogJycNCiAgICAgICAgICAgIHRoaXMuZmV0Y2hDb250cmFjdG9ycyhtYWtlRmlyc3RTZWxlY3RlZCkNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZmV0Y2hDb250cmFjdG9ycyAobWFrZUZpcnN0U2VsZWN0ZWQpIHsNCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuc29ydEJ5ID0gW10NCiAgICAgICAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuc29ydEJ5LnB1c2goJ2NyZWF0ZWQnKQ0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5zb3J0RGVzYyA9IFtdDQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnREZXNjLnB1c2godHJ1ZSkNCiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nQ29udHJhY3RvcnMgPSB0cnVlDQogICAgICAgICAgICBhd2FpdCBjcnVkQW5kTGlzdHNTZXJ2aWNlLnNlYXJjaExpc3RXaXRoS2V5d29yZCgnY29udHJhY3RvcicsIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQsICdieS1jb250cmFjdG9yJykNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JzLnB1c2goLi4ucmVzLmRhdGEubGlzdCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNOZXh0UGFnZUNvbnRyYWN0b3JzID0gcmVzLmRhdGEudG90YWwgLyB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLml0ZW1zUGVyUGFnZSA+IHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQucGFnZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgKz0gMQ0KICAgICAgICAgICAgICAgICAgICBpZiAobWFrZUZpcnN0U2VsZWN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucGFyZW50SWQgPSB0aGlzLmNvbnRyYWN0b3JzLmxlbmd0aCA/IHRoaXMuY29udHJhY3RvcnNbMF0uaWQgOiBudWxsDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nQ29udHJhY3RvcnMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIG5ld1JlZkNyZWF0ZWQgKGZvcm1OYW1lKSB7DQogICAgICAgICAgICBpZiAoZm9ybU5hbWUgPT0gJ0NyZWF0ZUZvcm1Db250cmFjdG9yJykgew0KICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkKCcnLCB0cnVlKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgc2F2ZSAoKSB7DQogICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIudmFsaWRhdGUoKS50aGVuKHZhbGlkID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UudXBkYXRlKE1BSU5fQVBJX1VSTCwgdGhpcy5lZGl0aW5nSXRlbSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHt9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UuY3JlYXRlKE1BSU5fQVBJX1VSTCwgdGhpcy5lZGl0aW5nSXRlbSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHt9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzJyksIHsgdHlwZTogJ2Vycm9yJyB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgLyoNCiAgICAqIENSRUFURUQgKi8NCiAgICBhc3luYyBjcmVhdGVkICgpIHsNCiAgICAgICAgLy8gRk9SIENPTlRSQUNUT1IgU0VMRUNUX0FORF9BREQNCiAgICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hDb250cmFjdG9ycygpDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLml0ZW1zUGVyUGFnZSA9IDUwMA0KICAgICAgICBpZiAodGhpcy5pc01vZGVDcmVhdGUpIHsNCiAgICAgICAgICAgIGF3YWl0IGNydWRBbmRMaXN0c1NlcnZpY2UuZ2V0RW1wdHkoTUFJTl9BUElfVVJMKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBhd2FpdCBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEJ5SWQoTUFJTl9BUElfVVJMLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsIGZhbHNlKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["CreateFormGroupOfIndividuals.vue"],"names":[],"mappings":";AAmFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateFormGroupOfIndividuals.vue","sourceRoot":"src/shared/views/components","sourcesContent":["<template>\r\n    <ValidationObserver\r\n        ref=\"observer\"\r\n        v-slot=\"{}\"\r\n    >\r\n        <b-row class=\"mb-3\">\r\n            <b-col\r\n                sm=\"12\"\r\n                md=\"6\"\r\n            >\r\n                <BaseInputWithValidation\r\n                    rules=\"required\"\r\n                    class=\"required\"\r\n                    v-model=\"editingItem.name\"\r\n                    :label=\"$t('column.name')\"\r\n                />\r\n            </b-col>\r\n            <b-col\r\n                sm=\"12\"\r\n                md=\"6\"\r\n            >\r\n                <BaseMultiselectWithValidation\r\n                    not-required\r\n                    v-model=\"editingItem.inn\"\r\n                    :has-next-page=\"hasNextPageContractors\"\r\n                    @reachedEndOfList=\"contractorReachedEndOfList\"\r\n                    @search-change=\"debounceSearchContractors\"\r\n                    :searchable=\"true\"\r\n                    preserve-search\r\n                    :clear-on-select=\"false\"\r\n                    :loading=\"isLoadingContractors\"\r\n                    :internal-search=\"false\"\r\n                    :options=\"contractors.map(e => e.inn)\"\r\n                    :label=\"$t('column.inn')\"\r\n                    :placeholder=\"$t('column.inn')\"\r\n                    :custom-label=\"customLabelContractor\"\r\n                    open-direction=\"bottom\"\r\n                    :max-height=\"600\"\r\n                    :show-labels=\"false\"\r\n                    with-create-addition\r\n                >\r\n                    <template v-slot:append-slot>\r\n                        <b-button\r\n                            @click=\"contractorCreateModal = true\"\r\n                            variant=\"outline-primary\"\r\n                            style=\"padding: 2.5px 10px; font-size: 1.2rem;\"\r\n                        >\r\n                            <i class=\"mdi mdi-plus-circle\"></i>\r\n                        </b-button>\r\n                    </template>\r\n                </BaseMultiselectWithValidation>\r\n                <BaseModalForCreate\r\n                    v-model=\"contractorCreateModal\"\r\n                    without-list-search\r\n                    use-component-save-fn\r\n                    mainApiUrl=\"contractor\"\r\n                    createFormName=\"CreateFormContractor\"\r\n                    @new-ref-created-without-list-search=\"newRefCreated\"\r\n                />\r\n            </b-col>\r\n        </b-row>\r\n\r\n        <b-row class=\"mb-3\">\r\n            <b-col\r\n                sm=\"12\"\r\n                md=\"6\"\r\n            >\r\n\r\n            </b-col>\r\n            <b-col\r\n                sm=\"12\"\r\n                md=\"6\"\r\n            >\r\n                <BaseInputWithValidation\r\n                    rules=\"positiveNotZero\"\r\n                    v-model=\"editingItem.percentage\"\r\n                    :label=\"$t('column.share_percentage')\"\r\n                />\r\n            </b-col>\r\n        </b-row>\r\n    </ValidationObserver>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'reestr/group-of-individuals'\r\n/*\r\n* YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\n\r\nexport default {\r\n    name: \"CreateFormGroupOfIndividuals\",\r\n    props: {\r\n        customIsModeCreate: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    /*\r\n    * COMPONENTS */\r\n    components: {},\r\n    /*\r\n    * DATA */\r\n    data () {\r\n        return {\r\n            editingItem: {},\r\n            // CONTRACTOR SELECT_AND_CREATE VARS\r\n            hasNextPageContractors: false,\r\n            contractors: [],\r\n            debounce: null,\r\n            isLoadingContractors: false,\r\n            contractorCreateModal: false,\r\n            contractorSearchPayload: {},\r\n            // ---------------------------------\r\n        }\r\n    },\r\n    /*\r\n    * COMPUTED */\r\n    computed: {\r\n        isModeCreate () {\r\n            return this.customIsModeCreate ? this.customIsModeCreate : this.$route.name === 'CreateGroupOfIndividuals'\r\n        },\r\n        computedObserver () {\r\n            return this.$refs.observer\r\n        }\r\n    },\r\n    /*\r\n    * METHODS */\r\n    methods: {\r\n        // CONTRACTOR SELECT_AND_CREATE METHODS\r\n        contractorReachedEndOfList (e) {\r\n            if (e && !this.isLoadingContractors) {\r\n                this.fetchContractors()\r\n            }\r\n        },\r\n        async debounceSearchContractors (searchText) {\r\n            clearTimeout(this.debounce);\r\n            this.debounce = setTimeout(async () => {\r\n                await this.fetchContractorsWithKeyword(searchText);\r\n            }, 1000);\r\n        },\r\n        customLabelContractor (opt) {\r\n            let selected = this.contractors.find(e => e.inn == opt);\r\n            if (selected) {\r\n                return `${selected.inn} - ${selected.fullName}`\r\n            }\r\n            return ``;\r\n        },\r\n        fetchContractorsWithKeyword (keyword, makeFirstSelected = false) {\r\n            this.contractors = []\r\n            this.contractorSearchPayload.page = 1\r\n            this.contractorSearchPayload.keyword = keyword ? keyword : ''\r\n            this.fetchContractors(makeFirstSelected)\r\n        },\r\n        async fetchContractors (makeFirstSelected) {\r\n            this.contractorSearchPayload.sortBy = []\r\n            this.contractorSearchPayload.sortBy.push('created')\r\n            this.contractorSearchPayload.sortDesc = []\r\n            this.contractorSearchPayload.sortDesc.push(true)\r\n            this.isLoadingContractors = true\r\n            await crudAndListsService.searchListWithKeyword('contractor', this.contractorSearchPayload, 'by-contractor')\r\n                .then(res => {\r\n                    this.contractors.push(...res.data.list)\r\n                    this.hasNextPageContractors = res.data.total / this.contractorSearchPayload.itemsPerPage > this.contractorSearchPayload.page\r\n                    this.contractorSearchPayload.page += 1\r\n                    if (makeFirstSelected) {\r\n                        this.editingItem.parentId = this.contractors.length ? this.contractors[0].id : null\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                    this.contractors = []\r\n                })\r\n                .finally(() => {\r\n                    this.isLoadingContractors = false\r\n                })\r\n        },\r\n        newRefCreated (formName) {\r\n            if (formName == 'CreateFormContractor') {\r\n                this.fetchContractorsWithKeyword('', true)\r\n            }\r\n        },\r\n        // ------------------------------------\r\n        save () {\r\n            this.computedObserver.validate().then(valid => {\r\n                if (valid) {\r\n                    if (this.editingItem.id) {\r\n                        crudAndListsService.update(MAIN_API_URL, this.editingItem).then(res => {\r\n                            this.computedObserver.reset()\r\n                            this.editingItem = Object.assign({}, {});\r\n                            this.$router.go(-1)\r\n                            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                        })\r\n                    } else {\r\n                        crudAndListsService.create(MAIN_API_URL, this.editingItem).then(res => {\r\n                            this.computedObserver.reset()\r\n                            this.editingItem = Object.assign({}, {});\r\n                            this.$router.go(-1)\r\n                            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                        })\r\n                    }\r\n                } else {\r\n                    this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                }\r\n            });\r\n        }\r\n    },\r\n    /*\r\n    * CREATED */\r\n    async created () {\r\n        // FOR CONTRACTOR SELECT_AND_ADD\r\n        this.contractorSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n        await this.fetchContractors()\r\n        // ---------------------------------\r\n        this.var_default_search_payload.itemsPerPage = 500\r\n        if (this.isModeCreate) {\r\n            await crudAndListsService.getEmpty(MAIN_API_URL)\r\n                .then(res => {\r\n                    this.editingItem = res.data\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        } else {\r\n            await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, false)\r\n                .then(res => {\r\n                    this.editingItem = res.data\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.col-form-label {\r\n    padding-top: 0;\r\n}\r\n\r\nul {\r\n    list-style-type: none;\r\n}\r\n</style>"]}]}