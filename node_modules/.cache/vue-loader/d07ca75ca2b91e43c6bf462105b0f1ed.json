{"remainingRequest":"D:\\ACRU\\interactive-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ACRU\\interactive-services\\src\\modules\\price\\menu\\Index.vue?vue&type=style&index=0&id=3de17e2e&scoped=true&lang=scss","dependencies":[{"path":"D:\\ACRU\\interactive-services\\src\\modules\\price\\menu\\Index.vue","mtime":1709020148476},{"path":"D:\\ACRU\\interactive-services\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoqIHsNCiAgcGFkZGluZzogMDsNCiAgbWFyZ2luOiAwOw0KICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KDQo6OnYtZGVlcCAubW9kYWwtdGl0bGUgew0KICB3aWR0aDogOTclOw0KICBwYWRkaW5nOiAycHggMHB4IDBweCAxMHB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmI2NzViOw0KICBjb2xvcjogd2hpdGU7DQp9DQoNCnRhYmxlLCB0ZCwgdGggew0KICBib3JkZXI6IDFweCBzb2xpZCAjMmI2YzU4Ow0KICBjb2xvcjogIzJiNmM1ODsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBwYWRkaW5nOiA1cHggMnB4Ow0KfQ0KDQp0YWJsZSB7DQogIHdpZHRoOiAxMDAlOw0KICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KfQ0KDQo6OnYtZGVlcCBsYWJlbCB7DQogIGZvbnQtZmFtaWx5OiBpbmhlcml0ICFpbXBvcnRhbnQ7DQp9DQoNCjo6di1kZWVwIC5iYXNlLWZvcm0tY29tcG9uZW50X19sYWJlbCB7DQogIGNvbG9yOiAjODhhNTllOw0KfQ0KDQo6OnYtZGVlcCAuY3VzdG9tLXNlbGVjdCB7DQogIGJvcmRlcjogMXB4IHNvbGlkICMyYjY3NWI7DQp9DQoNCjo6di1kZWVwIC5mb3JtLWNvbnRyb2wgew0KICBib3JkZXI6IDFweCBzb2xpZCAjMmI2NzViOw0KfQ0KDQo6OnYtZGVlcCAubXgtaW5wdXQgew0KICBib3JkZXI6IDFweCBzb2xpZCAjMmI2NzViOw0KfQ0KDQo6OnYtZGVlcCAubXVsdGlzZWxlY3RfX3RhZ3Mgew0KICBib3JkZXI6IDFweCBzb2xpZCAjMmI2NzViOw0KDQp9DQoNCjo6di1kZWVwIC5iYXNlLWZvcm0tY29tcG9uZW50X19kYXRlLXBpY2tlciB7DQogIGJvcmRlcjogMXB4IHNvbGlkICMyYjY3NWI7DQogIGJvcmRlci1yYWRpdXM6IDVweDsNCn0NCg0KOjp2LWRlZXAgLnZ1ZS10cmVlc2VsZWN0IHsNCiAgYm9yZGVyOiAxcHggc29saWQgIzJiNjc1YjsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KfQ0K"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";AAuXA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/modules/price/menu","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"col-md-12 text-center\">\r\n      <div class=\"h3 mt-4 d-inline-block\" style=\"color: #2b675b; font-weight: 500\">{{ $t('fair_price.enter_cost') }}</div>\r\n    </div>\r\n    <b-card>\r\n      <b-container fluid=\"100%\">\r\n        <ValidationObserver\r\n            ref=\"observer\"\r\n            v-slot=\"{}\"\r\n        >\r\n          <b-row>\r\n            <b-col cols=\"3\" v-if=\"!$can('view', 'price-enter-cost')\">\r\n              <b-card\r\n                  style=\"border:1px solid #2b675b; border-radius: 5px; margin:15px; padding: 15px; margin-top:10px;\">\r\n                <div>\r\n                  <b-row>\r\n                    <b-col class=\"px-3 py-0\">\r\n                      <div\r\n                          style=\"font-size: 16px;  background: #2b675b; color: white; padding: 5px; width: 100%; margin-bottom: 12px; border-radius: 2px; font-weight: bold\">\r\n                        {{ $t('fair_price.info') }}\r\n                      </div>\r\n                    </b-col>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <b-col cols=\"12\" class=\"px-3\">\r\n                      <BaseSelectWithValidation\r\n                          rules=\"required\"\r\n                          class=\"required\"\r\n                          v-model=\"price_market_typeId\"\r\n                          :label=\"$t('fair_price.references.type_of_shopping')\"\r\n                          value-field=\"type\"\r\n                          label-on-top\r\n                      >\r\n                        <b-form-select-option v-for=\"(item, index) in price_market_type\"\r\n                                              :key=\"index\"\r\n                                              :value=\"item.type\">{{\r\n                            getName({\r\n                              nameRu: item.nameRu,\r\n                              nameLt: item.nameLt,\r\n                              nameUz: item.nameUz,\r\n                              nameEn: item.nameEn,\r\n                            })\r\n                          }}\r\n                        </b-form-select-option>\r\n                      </BaseSelectWithValidation>\r\n                    </b-col>\r\n                    <b-col cols=\"12\" class=\"px-3 p-1\">\r\n                      <BaseSelectWithValidation\r\n                          rules=\"required\"\r\n                          class=\"required\"\r\n                          v-model=\"editingItem.marketId\"\r\n                          :label=\"$t('fair_price.references.priceMarkets')\"\r\n                          value-field=\"id\"\r\n                          label-on-top\r\n                      >\r\n                        <b-form-select-option v-for=\"(item, index) in price_market\"\r\n                                              :key=\"index\"\r\n                                              :value=\"item.id\">{{\r\n                            item.marketName\r\n                          }}\r\n                        </b-form-select-option>\r\n                      </BaseSelectWithValidation>\r\n                    </b-col>\r\n                  </b-row>\r\n                </div>\r\n              </b-card>\r\n            </b-col>\r\n            <b-col>\r\n              <b-card style=\"border:1px solid #2b675b; border-radius: 5px; margin:15px; padding: 15px;margin-top:10px;\">\r\n                <div>\r\n                  <b-row>\r\n                    <b-col cols=\"5\" class=\"px-3 py-0\">\r\n                      <div\r\n                          style=\"font-size: 16px;background: #2b675b; color: white; padding: 5px; width: 100%; margin-bottom: 20px; border-radius: 2px; font-weight: bold\">\r\n                        {{ $t('fair_price.info_product') }}\r\n                      </div>\r\n                    </b-col>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <b-col cols=\"12\" md=\"3\" class=\"px-3 py-0\">\r\n                      <div style=\"width: 100%\">\r\n                        <span style=\"color: #2b675b\">\r\n                        {{ $t('fair_price.type_product') }}\r\n                        </span>\r\n                        <BaseTreeselectWithValidation\r\n                            :searchable=\"true\"\r\n                            :clearable=\"true\"\r\n                            open-direction=\"bottom\"\r\n                            vee-name=\"parentDepVeeName\"\r\n                            rules=\"required\"\r\n                            class=\"required\"\r\n                            :placeholder=\"$t('')\"\r\n                            ref=\"parentDep\"\r\n                            only-form-element\r\n                            form-label=\"__none\"\r\n                            v-model=\"editingItem.productId\"\r\n                            :options=\"price_product\"\r\n                            :default-expand-level=\"1\"\r\n                            :normalizer=\"normalizer\"\r\n                            name=\"parentDep\"\r\n                            custom-styles=\"\"\r\n                            @close=\"treeClosed('parentDepVeeName')\"\r\n                        ></BaseTreeselectWithValidation>\r\n                      </div>\r\n                    </b-col>\r\n                    <b-col cols=\"12\" md=\"3\" class=\"px-3\">\r\n                      <BaseInputWithValidation\r\n                          v-model=\"editingItem.minPrice\"\r\n                          :label=\"$t('fair_price.min')\"\r\n                          :placeholder=\"$t('')\"\r\n                          class=\"required\"\r\n                          rules=\"required\"\r\n                          label-on-top\r\n                      />\r\n                    </b-col>\r\n                    <b-col cols=\"12\" md=\"3\" class=\"px-3\">\r\n                      <BaseInputWithValidation\r\n                          v-model=\"editingItem.maxPrice\"\r\n                          :label=\"$t('fair_price.max')\"\r\n                          :placeholder=\"$t('')\"\r\n                          class=\"required\"\r\n                          rules=\"required\"\r\n                          label-on-top\r\n                      />\r\n                    </b-col>\r\n                    <b-col cols=\"12\" md=\"3\" class=\"px-3\" style=\"width: 100%\">\r\n                      <BaseInputWithValidation\r\n                          v-model=\"editingItem.middleSum\"\r\n                          :label=\"$t('fair_price.references.xaridorgir_narx')\"\r\n                          :placeholder=\"$t('')\"\r\n                          class=\"required\"\r\n                          rules=\"required\"\r\n                          label-on-top\r\n                      />\r\n                    </b-col>\r\n                  </b-row>\r\n                  <b-row class=\"p-1\">\r\n                    <b-col cols=\"12\" md=\"9\"></b-col>\r\n                    <b-col cols=\"12\" md=\"3\" class=\"mt-3\">\r\n                      <b-overlay\r\n                          :show=\"loader\"\r\n                          rounded\r\n                          opacity=\"0.6\"\r\n                          spinner-small\r\n                          spinner-variant=\"primary\"\r\n                          class=\"px-3\"\r\n                      >\r\n                        <b-button\r\n                            :disabled=\"loader\"\r\n                            class=\"text-capitalize float-end p-1 ml-1\"\r\n                            @click=\"saveData\"\r\n                            block\r\n                            style=\"background: #2b675b; font-size: 16px\"\r\n                        >\r\n                          {{ $t(\"actions.save\") }}\r\n                        </b-button>\r\n                      </b-overlay>\r\n\r\n                      <!--                                        <b-button  @click=\"saveData\">-->\r\n                      <!--                                            <b-overlay :opacity=\"0.1\" :show=\"loader\">-->\r\n                      <!--                                                <i class=\"fa fa-save\"></i>-->\r\n                      <!--                                                {{ $t(\"actions.save\") }}-->\r\n                      <!--                                            </b-overlay>-->\r\n                      <!--                                        </b-button>-->\r\n                    </b-col>\r\n                  </b-row>\r\n                </div>\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n        </ValidationObserver>\r\n      </b-container>\r\n    </b-card>\r\n\r\n    <b-card style=\"border:1px solid #2b675b; border-radius: 5px; padding: 15px; margin: 15px\">\r\n      <b-container fluid=\"100%\">\r\n        <AllList ref=\"allListRef\"></AllList>\r\n      </b-container>\r\n    </b-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {nrm} from \"@/helper\";\r\n// import Treeselect from \"@riophae/vue-treeselect\";\r\n\r\n// import the styles\r\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\r\n\r\n\r\nconst REF_NAME = 'court_instantions'\r\nimport AllList from \"./List.vue\"\r\nimport appConfig from \"@/app.config\";\r\nimport crudAndListsService from '@/shared/services/crud_and_list.service'\r\nimport Service from '../service'\r\nimport BaseSelectWithValidation from \"@/components/base/BaseSelectWithValidation.vue\";\r\n\r\nconst MAIN_API_URL = 'contractor-advertising-construction'\r\nexport default {\r\n  page: {\r\n    title: \"Passport info\",\r\n    meta: [{name: \"description\", content: appConfig.description}],\r\n  },\r\n  components: {BaseSelectWithValidation, AllList},\r\n  data() {\r\n    return {\r\n      submitted: false,\r\n      nrm: nrm,\r\n      loader: false,\r\n      searchKeyword: '',\r\n      editingItem: {},\r\n      price_market_typeId: null,\r\n      price_market_type: [],\r\n      price_market: [],\r\n      price_product: [],\r\n    }\r\n  },\r\n  watch: {\r\n    'price_market_typeId': {\r\n      async handler() {\r\n        await this.getprice_market();\r\n      }\r\n    },\r\n    'editingItem.maxPrice': {\r\n      async handler(newValue) {\r\n        if (this.editingItem.maxPrice) {\r\n          const result = newValue.replace(/\\D/g, \"\")\r\n              .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n          this.editingItem.maxPrice = result\r\n        }\r\n      }\r\n    },\r\n    'editingItem.minPrice': {\r\n      async handler(newValue) {\r\n        if (this.editingItem.minPrice) {\r\n          const result = newValue.replace(/\\D/g, \"\")\r\n              .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n          this.editingItem.minPrice = result\r\n        }\r\n      }\r\n    },\r\n    'editingItem.middleSum': {\r\n      async handler(newValue) {\r\n        if (this.editingItem.middleSum) {\r\n          const result = newValue.replace(/\\D/g, \"\")\r\n              .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n          this.editingItem.middleSum = result\r\n        }\r\n      }\r\n    },\r\n  },\r\n  async created() {\r\n    await this.getEmpty();\r\n    await this.getprice_market_type();\r\n    await this.getprice_product();\r\n  },\r\n  computed: {\r\n    computedObserver() {\r\n      return this.$refs.observer\r\n    }\r\n  },\r\n  methods: {\r\n    saveData() {\r\n      this.loader = true;\r\n      this.computedObserver.validate().then(valid => {\r\n        if (valid) {\r\n          this.editingItem.maxPrice = this.editingItem.maxPrice.replaceAll(' ', '')\r\n          this.editingItem.middleSum = this.editingItem.middleSum.replaceAll(' ', '')\r\n          this.editingItem.minPrice = this.editingItem.minPrice.replaceAll(' ', '')\r\n          Service.saveData(this.editingItem)\r\n              .then(async () => {\r\n                await this.successSaved();\r\n                this.computedObserver.reset()\r\n                this.editingItem = Object.assign({}, {});\r\n                this.price_market_typeId = null\r\n                await this.$refs.allListRef.fetchNotificationTableItems()\r\n              })\r\n              .finally(() => {\r\n                this.loader = false;\r\n              });\r\n        } else {\r\n          this.loader = false;\r\n          this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n        }\r\n      })\r\n\r\n\r\n    },\r\n    normalizer(node) {\r\n      if (!node.children || node.children.length === 0) {\r\n        delete node.children\r\n        return {\r\n          id: node.id,\r\n          label: this.getName({\r\n            nameRu: node.nameRu,\r\n            nameLt: node.nameLt,\r\n            nameUz: node.nameUz,\r\n          }),\r\n        }\r\n      }\r\n      return {\r\n        id: node.id,\r\n        label: this.getName({\r\n          nameRu: node.nameRu,\r\n          nameLt: node.nameLt,\r\n          nameUz: node.nameUz,\r\n        }),\r\n        children: node.children && node.children.length > 0 ? node.children : [],\r\n      }\r\n    },\r\n    treeClosed(veeName) {\r\n      this.computedObserver.refs[veeName].validate();\r\n    },\r\n    async getEmpty() {\r\n      this.var_default_search_payload.keyword = this.searchKeyword\r\n      this.var_default_search_payload.itemsPerPage = 500\r\n\r\n      await crudAndListsService.getEmpty('price_sum')\r\n          .then(res => {\r\n            this.editingItem = res.data\r\n            this.editingItem.date = this.getDateFormat(new Date(), '-');\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n\r\n    async getprice_market_type() {\r\n      this.var_default_search_payload.itemsPerPage = 500\r\n      await crudAndListsService.searchListWithKeyword(\"price_market_type\", this.var_default_search_payload)\r\n          .then(res => {\r\n            this.price_market_type = res.data.list\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n\r\n    async getprice_market() {\r\n      this.var_default_search_payload.itemsPerPage = 500\r\n      this.var_default_search_payload.type = this.price_market_typeId\r\n      Service\r\n          .searchListWithKeyword('price_market', this.var_default_search_payload)\r\n          .then((res) => {\r\n            this.price_market = res.data.list;\r\n            this.totalItems = res.data.total;\r\n          })\r\n          .catch(e => {\r\n            this.tableItems = [];\r\n            this.totalItems = 0;\r\n          })\r\n          .finally(() => {\r\n            this.loadingTableItems = false\r\n          })\r\n    },\r\n\r\n    async getprice_product() {\r\n      this.var_default_search_payload.itemsPerPage = 500\r\n      await crudAndListsService.searchListWithKeyword(this.$can('view', 'price-enter-cost') ? \"price_product\" : \"price_product/outer\", this.var_default_search_payload)\r\n          .then(res => {\r\n            this.price_product = res.data.children\r\n            this.editingItem.marketId = res.data.marketId\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n  },\r\n}\r\nconst i18n = require(\"@/i18n\");\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n* {\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n::v-deep .modal-title {\r\n  width: 97%;\r\n  padding: 2px 0px 0px 10px;\r\n  background-color: #2b675b;\r\n  color: white;\r\n}\r\n\r\ntable, td, th {\r\n  border: 1px solid #2b6c58;\r\n  color: #2b6c58;\r\n  text-align: center;\r\n  padding: 5px 2px;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n::v-deep label {\r\n  font-family: inherit !important;\r\n}\r\n\r\n::v-deep .base-form-component__label {\r\n  color: #88a59e;\r\n}\r\n\r\n::v-deep .custom-select {\r\n  border: 1px solid #2b675b;\r\n}\r\n\r\n::v-deep .form-control {\r\n  border: 1px solid #2b675b;\r\n}\r\n\r\n::v-deep .mx-input {\r\n  border: 1px solid #2b675b;\r\n}\r\n\r\n::v-deep .multiselect__tags {\r\n  border: 1px solid #2b675b;\r\n\r\n}\r\n\r\n::v-deep .base-form-component__date-picker {\r\n  border: 1px solid #2b675b;\r\n  border-radius: 5px;\r\n}\r\n\r\n::v-deep .vue-treeselect {\r\n  border: 1px solid #2b675b;\r\n  border-radius: 5px;\r\n}\r\n</style>\r\n"]}]}