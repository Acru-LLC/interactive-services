{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\reestr-contractors\\modules\\natural\\CreateOrUpdateRemoveDoc.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\reestr-contractors\\modules\\natural\\CreateOrUpdateRemoveDoc.vue","mtime":1667352074518},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBNQUlOX0FQSV9VUkwgPSAncmVlc3RyL2NvbnRyYWN0b3ItcmVlc3RyLWRvY3VtZW50cycNCmNvbnN0IEFQUEVORF9BUElfVVJMX05BVFVSQUwgPSAnY2xvc2UtZXN0ZXN0dmVuaXknDQpjb25zdCBBUFBFTkRfQVBJX1VSTF9ET01JTkFOVCA9ICdjbG9zZS1kYW1pbmlyaXVzaGl5Jw0KLyoNCiogWU9VIE1VU1QgU0VORCB7eyBNQUlOX0FQSV9VUkwgfX0gVE8gQ1JVRF9TRVJWSUNFICovDQppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UiDQppbXBvcnQgaGVscGVyU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSINCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJDcmVhdGVPclVwZGF0ZVJlbW92ZURvYyIsDQogICAgLyoNCiAgICAqIENPTVBPTkVOVFMgKi8NCiAgICBjb21wb25lbnRzOiB7fSwNCiAgICAvKg0KICAgICogREFUQSAqLw0KICAgIGRhdGEgKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZWRpdGluZ0l0ZW06IHt9LA0KICAgICAgICAgICAgcmVnaW9uczogW10sDQogICAgICAgICAgICBoYXNOZXh0UGFnZUNvbnRyYWN0b3JzOiBmYWxzZSwNCiAgICAgICAgICAgIGhhc05leHRQYWdlUHJvZHVjdE9yU2VydmljZXM6IGZhbHNlLA0KICAgICAgICAgICAgY29udHJhY3RvcnM6IFtdLA0KICAgICAgICAgICAgZGVib3VuY2U6IG51bGwsDQogICAgICAgICAgICBpc0xvYWRpbmdDb250cmFjdG9yczogZmFsc2UsDQogICAgICAgICAgICBpc0xvYWRpbmdQcm9kdWN0T3JTZXJ2aWNlczogZmFsc2UsDQogICAgICAgICAgICBjb250cmFjdG9yU2VhcmNoUGF5bG9hZDoge30sDQogICAgICAgICAgICBwcm9kdWN0T3JTZXJ2aWNlc1NlYXJjaFBheWxvYWQ6IHt9LA0KICAgICAgICAgICAgcHJvZHVjdFR5cGVzOiBbXSwNCiAgICAgICAgICAgIHByb2R1Y3RzOiBbXQ0KICAgICAgICB9DQogICAgfSwNCiAgICAvKg0KICAgICogQ09NUFVURUQgKi8NCiAgICBjb21wdXRlZDogew0KICAgICAgICBjb21wdXRlZE9ic2VydmVyICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyDQogICAgICAgIH0sDQogICAgICAgIGlzTW9kZUNyZWF0ZSAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gJ0NyZWF0ZVJlbW92ZURvY05hdHVyYWxDb250cmFjdG9yUmVlc3RyJyB8fCB0aGlzLiRyb3V0ZS5uYW1lID09PSAnQ3JlYXRlUmVtb3ZlRG9jRG9taW5hbnRDb250cmFjdG9yUmVlc3RyJw0KICAgICAgICB9LA0KICAgICAgICBwcm9kdWN0T3JTZXJ2aWNlc0J5Q29udHJhY3RvcklkICgpIHsNCiAgICAgICAgICAgIGxldCBmb3VuZENvbnRyYWN0b3IgPSB0aGlzLmNvbnRyYWN0b3JzLmZpbmQoZWwgPT4gZWwuY29udHJhY3RvcklkID09IHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvcklkKQ0KICAgICAgICAgICAgaWYgKGZvdW5kQ29udHJhY3Rvcikgew0KICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZENvbnRyYWN0b3IucHJvZHVjdE9yU2VydmljZXNCeURpc3RyaWN0DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBpc0RvbWluYW50ICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnQ3JlYXRlUmVtb3ZlRG9jRG9taW5hbnRDb250cmFjdG9yUmVlc3RyJw0KICAgICAgICB9LA0KICAgICAgICBpc05hdHVyYWwgKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLm5hbWUgPT09ICdDcmVhdGVSZW1vdmVEb2NOYXR1cmFsQ29udHJhY3RvclJlZXN0cicNCiAgICAgICAgfQ0KICAgIH0sDQogICAgLyoNCiAgICAqIE1FVEhPRFMgKi8NCiAgICBtZXRob2RzOiB7DQogICAgICAgIHNhdmUgKCkgew0KICAgICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnZhbGlkYXRlKCkudGhlbihhc3luYyB2YWxpZCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRpbmdJdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLnVwZGF0ZShNQUlOX0FQSV9VUkwsIHRoaXMubWFrZUFuZFJldHVybkZvcm1EYXRhRm9yQmFzZTY0KCkpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIucmVzZXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB7fSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7IHR5cGU6ICdzdWNjZXNzJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGF5bG9hZCA9IGF3YWl0IHRoaXMubWFrZUFuZFJldHVybkZvcm1EYXRhRm9yQmFzZTY0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2UuY3JlYXRlKE1BSU5fQVBJX1VSTCwgcGF5bG9hZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgZm9yLSR7dGhpcy5pc0RvbWluYW50ID8gQVBQRU5EX0FQSV9VUkxfRE9NSU5BTlQgOiB0aGlzLmlzTmF0dXJhbCA/IEFQUEVORF9BUElfVVJMX05BVFVSQUwgOiAnJ31gKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5yZXNldCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB7fSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuc2F2ZWRfc3VjY2Vzc2Z1bGx5JyksIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5maWxsX3JlcXVpcmVkX2ZpZWxkcycpLCB7IHR5cGU6ICdlcnJvcicgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIGNvbnRyYWN0b3JzQnlQcm9kdWN0T3JTZXJ2aWNlSWQgKHByb2R1Y3RPclNlcnZpY2VJZCkgew0KICAgICAgICAgICAgbGV0IGZvdW5kRWwgPSB0aGlzLnByb2R1Y3RzLmZpbmQoZWwgPT4gZWwucHJvZHVjdE9yU2VydmljZUlkID09IHByb2R1Y3RPclNlcnZpY2VJZCkNCiAgICAgICAgICAgIGlmIChmb3VuZEVsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kRWwuY29udHJhY3RvcnNCeURpc3RyaWN0DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvKiBtYWtlQW5kUmV0dXJuRm9ybURhdGEgKCkgew0KICAgICAgICAgICAgbGV0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uc3VwcGxlbWVudERvY3MuZm9yRWFjaChmID0+IHsNCiAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZCgiZmlsZSIsIGYuZmlsZSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgZm9ybS5hcHBlbmQoImNvbnRyYWN0b3JJZCIsIHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvcklkKQ0KICAgICAgICAgICAgZm9ybS5hcHBlbmQoInJlZ2lvbklkIiwgdGhpcy5lZGl0aW5nSXRlbS5yZWdpb25JZCkNCiAgICAgICAgICAgIC8vIGZvcm0uYXBwZW5kKCJkaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlVHlwZUlkIiwgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlVHlwZUlkKQ0KICAgICAgICAgICAgLy8gZm9ybS5hcHBlbmQoImdvdmVybm1lbnRQZXJjZW50YWdlIiwgdGhpcy5lZGl0aW5nSXRlbS5nb3Zlcm5tZW50UGVyY2VudGFnZSkNCiAgICAgICAgICAgIGZvcm0uYXBwZW5kKCJvcmRlck51bWJlciIsIHRoaXMuZWRpdGluZ0l0ZW0ub3JkZXJOdW1iZXIpDQogICAgICAgICAgICBmb3JtLmFwcGVuZCgicmVlc3RyQ2xvc2VkRGF0ZSIsIHRoaXMuZWRpdGluZ0l0ZW0ucmVlc3RyQ2xvc2VkRGF0ZSkNCiAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZUlkcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZCgiZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZUlkcyIsIGlkKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHJldHVybiBmb3JtDQogICAgICAgIH0sICovDQogICAgICAgIGdldEJhc2U2NCAoZmlsZSkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOw0KICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHJlYWRlci5yZXN1bHQpOw0KICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZXJyb3IgPT4gcmVqZWN0KGVycm9yKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBtYWtlQW5kUmV0dXJuRm9ybURhdGFGb3JCYXNlNjQgKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uc3VwcGxlbWVudERvY3NbMF0uZmlsZS5kYXRhVVJMKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5maWxlID0gdGhpcy5lZGl0aW5nSXRlbS5zdXBwbGVtZW50RG9jc1swXS5maWxlLmRhdGFVUkwNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lZGl0aW5nSXRlbQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5nZXRCYXNlNjQodGhpcy5lZGl0aW5nSXRlbS5zdXBwbGVtZW50RG9jc1swXS5maWxlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZmlsZSA9IHJlcw0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRpbmdJdGVtDQogICAgICAgICAgICB9DQoNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgcmVnaW9uU2VsZWN0ZWQgKCRldmVudCwgZG9udFJlc2V0RGVwZW5kZW50ID0gZmFsc2UsIGZvclJlcHVibGljRXZlbnQpIHsNCiAgICAgICAgICAgIGlmICghZG9udFJlc2V0RGVwZW5kZW50KSB7DQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0VHlwZXMgPSBbXQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZVR5cGVJZCA9IG51bGwNCg0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uY29udHJhY3RvcklkID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMuY29udHJhY3RvcnMgPSBbXQ0KDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlSWQgPSBudWxsDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nSXRlbS5pc1JlcHVibGljKSB7DQogICAgICAgICAgICAgICAgaGVscGVyU2VydmljZQ0KICAgICAgICAgICAgICAgICAgICAuZ2V0UmVlc3RyQnlSZXB1YmxpYyh0aGlzLmlzRG9taW5hbnQgPyBBUFBFTkRfQVBJX1VSTF9ET01JTkFOVCA6IHRoaXMuaXNOYXR1cmFsID8gQVBQRU5EX0FQSV9VUkxfTkFUVVJBTCA6ICcnKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RUeXBlcyA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RUeXBlcyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIGlmICgkZXZlbnQgfHwgdGhpcy5lZGl0aW5nSXRlbS5yZWdpb25JZCkgew0KICAgICAgICAgICAgICAgIGhlbHBlclNlcnZpY2UNCiAgICAgICAgICAgICAgICAgICAgLmdldFJlZXN0ckJ5UmVnaW9uSWQoJGV2ZW50ID8gJGV2ZW50IDogdGhpcy5lZGl0aW5nSXRlbS5yZWdpb25JZCwgdGhpcy5pc0RvbWluYW50ID8gQVBQRU5EX0FQSV9VUkxfRE9NSU5BTlQgOiB0aGlzLmlzTmF0dXJhbCA/IEFQUEVORF9BUElfVVJMX05BVFVSQUwgOiAnJykNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0VHlwZXMgPSByZXMuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0VHlwZXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxSZWdpb24gKG9wdCkgew0KICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5yZWdpb25zLmZpbmQoZSA9PiBlLnJlZ2lvbklkID09IChvcHQucmVnaW9uSWQgPyBvcHQucmVnaW9uSWQgOiBvcHQpKTsNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgICAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkLnJlZ2lvbk5hbWVSdSwNCiAgICAgICAgICAgICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5yZWdpb25OYW1lTHQsDQogICAgICAgICAgICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQucmVnaW9uTmFtZVV6LA0KICAgICAgICAgICAgICAgIH0pfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tTGFiZWxQcm9kdWN0IChvcHQpIHsNCiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMucHJvZHVjdHMuZmluZChlID0+IGUucHJvZHVjdE9yU2VydmljZUlkID09IG9wdCk7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZC5wcm9kdWN0T3JTZXJ2aWNlTmFtZVJ1LA0KICAgICAgICAgICAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLnByb2R1Y3RPclNlcnZpY2VOYW1lTHQsDQogICAgICAgICAgICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQucHJvZHVjdE9yU2VydmljZU5hbWVVeiwNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9YA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGBgOw0KICAgICAgICB9LA0KICAgICAgICBjdXN0b21MYWJlbFByb2R1Y3RUeXBlIChvcHQpIHsNCiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMucHJvZHVjdFR5cGVzLmZpbmQoZSA9PiBlLnR5cGVJZCA9PSBvcHQpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQudHlwZU5hbWVSdSwNCiAgICAgICAgICAgICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC50eXBlTmFtZUx0LA0KICAgICAgICAgICAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLnR5cGVOYW1lVXosDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBgYDsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgcHJvZHVjdFR5cGVTZWxlY3RlZCAoJGV2ZW50LCBkb250UmVzZXREaXN0cmljdCA9IGZhbHNlKSB7DQogICAgICAgICAgICBpZiAoIWRvbnRSZXNldERpc3RyaWN0KSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5jb250cmFjdG9ySWQgPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlSWQgPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoJGV2ZW50KSB7DQogICAgICAgICAgICAgICAgLy8gR0VUIFBST0RVQ1RfT1JfU0VSVklDRVMNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoQ29udHJhY3RvcnModGhpcy5lZGl0aW5nSXRlbS5yZWdpb25JZCwgJGV2ZW50KQ0KICAgICAgICAgICAgICAgIC8vIGF3YWl0IGhlbHBlclNlcnZpY2UuZ2V0UHJvZHVjdHNCeVByb2RlY3RUeXBlSWQoJGV2ZW50KQ0KICAgICAgICAgICAgICAgIC8vICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgLy8gICAgIH0pDQogICAgICAgICAgICAgICAgLy8gICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRoaXMucHJvZHVjdHMgPSBbXQ0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICAvLyAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgY29udHJhY3RvclNlbGVjdGVkICgkZXZlbnQsIGRvbnRSZXNldERlcGVuZGVudCA9IGZhbHNlKSB7DQogICAgICAgICAgICBpZiAoIWRvbnRSZXNldERlcGVuZGVudCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZUlkID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBwcm9kdWN0T3JTZXJ2aWNlU2VsZWN0ZWQgKCRldmVudCwgZG9udFJlc2V0RGVwZW5kZW50ID0gZmFsc2UpIHsNCiAgICAgICAgICAgIGlmICghZG9udFJlc2V0RGVwZW5kZW50KSB7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5jb250cmFjdG9ySWQgPSBudWxsDQogICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoJGV2ZW50KSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZVR5cGVJZCAmJiB0aGlzLmVkaXRpbmdJdGVtLmlzUmVwdWJsaWMpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdDb250cmFjdG9ycyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGVscGVyU2VydmljZS5nZXRDb250cmFjdG9yc0J5UHJvZGVjdE9yU2VydmljZVR5cGVJZEFuZFByb2R1Y3RPclNlcnZpY2VJZChgJHt0aGlzLmlzRG9taW5hbnQgPyBBUFBFTkRfQVBJX1VSTF9ET01JTkFOVCA6IHRoaXMuaXNOYXR1cmFsID8gQVBQRU5EX0FQSV9VUkxfTkFUVVJBTCA6ICcnfT90eXBlSWQ9JHt0aGlzLmVkaXRpbmdJdGVtLmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VUeXBlSWR9JnByb2R1Y3RPclNlcnZpY2VJZD0keyRldmVudH1gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JzID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdDb250cmFjdG9ycyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJhY3RvcnMgPSB0aGlzLmNvbnRyYWN0b3JzQnlQcm9kdWN0T3JTZXJ2aWNlSWQoJGV2ZW50KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8qIGNvbnRyYWN0b3JSZWFjaGVkRW5kT2ZMaXN0IChlKSB7DQogICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hDb250cmFjdG9ycygpDQogICAgICAgICAgICB9DQogICAgICAgIH0sICovDQogICAgICAgIHByb2R1Y3RPclNlcnZpY2VzUmVhY2hlZEVuZE9mTGlzdCAoZSkgew0KICAgICAgICAgICAgaWYgKGUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmZldGNoUHJvZHVjdE9yU2VydmljZXModGhpcy5lZGl0aW5nSXRlbS5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlVHlwZUlkKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjdXN0b21MYWJlbENvbnRyYWN0b3JGb3JSZXB1YmxpYyAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmNvbnRyYWN0b3JzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VsZWN0ZWQubmFtZX1gDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYGA7DQogICAgICAgIH0sDQogICAgICAgIGN1c3RvbUxhYmVsQ29udHJhY3RvciAob3B0KSB7DQogICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmNvbnRyYWN0b3JzLmZpbmQoZSA9PiBlLmNvbnRyYWN0b3JJZCA9PSBvcHQpOw0KICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlbGVjdGVkLmNvbnRyYWN0b3JGdWxsTmFtZX1gDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYGA7DQogICAgICAgIH0sDQogICAgICAgIC8qIGFzeW5jIGRlYm91bmNlU2VhcmNoUHJvZHVjdE9yU2VydmljZXMgKHNlYXJjaFRleHQpIHsNCiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlKTsNCiAgICAgICAgICAgIHRoaXMuZGVib3VuY2UgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoQ29udHJhY3RvcnNXaXRoS2V5d29yZChzZWFyY2hUZXh0KTsNCiAgICAgICAgICAgIH0sIDEwMDApOw0KICAgICAgICB9LCAqLw0KICAgICAgICAvKiBhc3luYyBkZWJvdW5jZVNlYXJjaENvbnRyYWN0b3JzIChzZWFyY2hUZXh0KSB7DQogICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZSk7DQogICAgICAgICAgICB0aGlzLmRlYm91bmNlID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5mZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoc2VhcmNoVGV4dCk7DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfSwgKi8NCiAgICAgICAgZmV0Y2hQcm9kdWN0T3JTZXJ2aWNlc1dpdGhLZXl3b3JkIChrZXl3b3JkKSB7DQogICAgICAgICAgICB0aGlzLnByb2R1Y3RzID0gW10NCiAgICAgICAgICAgIHRoaXMucHJvZHVjdE9yU2VydmljZXNTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxDQogICAgICAgICAgICB0aGlzLnByb2R1Y3RPclNlcnZpY2VzU2VhcmNoUGF5bG9hZC5rZXl3b3JkID0ga2V5d29yZCA/IGtleXdvcmQgOiAnJw0KICAgICAgICAgICAgdGhpcy5mZXRjaFByb2R1Y3RPclNlcnZpY2VzKHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZVR5cGVJZCkNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZmV0Y2hQcm9kdWN0T3JTZXJ2aWNlcyAodHlwZUlkKSB7DQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZ1Byb2R1Y3RPclNlcnZpY2VzID0gdHJ1ZQ0KICAgICAgICAgICAgYXdhaXQgaGVscGVyU2VydmljZS5nZXRQcm9kdWN0T3JTZXJ2aWNlc0J5VHlwZUlkKHR5cGVJZCwgdGhpcy5wcm9kdWN0T3JTZXJ2aWNlc1NlYXJjaFBheWxvYWQpDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cy5wdXNoKC4uLnJlcy5kYXRhLmxpc3QpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzTmV4dFBhZ2VQcm9kdWN0T3JTZXJ2aWNlcyA9IHJlcy5kYXRhLnRvdGFsIC8gdGhpcy5wcm9kdWN0T3JTZXJ2aWNlc1NlYXJjaFBheWxvYWQuaXRlbXNQZXJQYWdlID4gdGhpcy5wcm9kdWN0T3JTZXJ2aWNlc1NlYXJjaFBheWxvYWQucGFnZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RPclNlcnZpY2VzU2VhcmNoUGF5bG9hZC5wYWdlICs9IDENCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nUHJvZHVjdE9yU2VydmljZXMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8qIGZldGNoQ29udHJhY3RvcnNXaXRoS2V5d29yZCAoa2V5d29yZCkgew0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxDQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnDQogICAgICAgICAgICB0aGlzLmZldGNoQ29udHJhY3RvcnMoKQ0KICAgICAgICB9LCAqLw0KICAgICAgICBhc3luYyBmZXRjaENvbnRyYWN0b3JzIChyZWdpb25JZCwgdHlwZUlkKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nSXRlbS5pc1JlcHVibGljICYmIHR5cGVJZCkgew0KICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nUHJvZHVjdE9yU2VydmljZXMgPSB0cnVlDQogICAgICAgICAgICAgICAgaGVscGVyU2VydmljZS5zZWFyY2hSZWVzdHJMaXN0QnlSZXB1YmxpYyhgJHt0aGlzLmlzRG9taW5hbnQgPyBBUFBFTkRfQVBJX1VSTF9ET01JTkFOVCA6IHRoaXMuaXNOYXR1cmFsID8gQVBQRU5EX0FQSV9VUkxfTkFUVVJBTCA6ICcnfT90eXBlSWQ9JHt0eXBlSWR9YCkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSByZXMuZGF0YQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nUHJvZHVjdE9yU2VydmljZXMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIGlmIChyZWdpb25JZCAmJiB0eXBlSWQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZ1Byb2R1Y3RPclNlcnZpY2VzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIGF3YWl0IGNydWRBbmRMaXN0c1NlcnZpY2Uuc2VhcmNoTGlzdChNQUlOX0FQSV9VUkwsIG51bGwsIGAke3RoaXMuaXNEb21pbmFudCA/IEFQUEVORF9BUElfVVJMX0RPTUlOQU5UIDogdGhpcy5pc05hdHVyYWwgPyBBUFBFTkRfQVBJX1VSTF9OQVRVUkFMIDogJyd9P3JlZ2lvbklkPSR7cmVnaW9uSWR9JnR5cGVJZD0ke3R5cGVJZH1gKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cyA9IHJlcy5kYXRhDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzID0gW10NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmdQcm9kdWN0T3JTZXJ2aWNlcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZUlkID0gbnVsbA0KICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgIH0sDQogICAgLyoNCiAgICAqIENSRUFURUQgKi8NCiAgICBhc3luYyBjcmVhdGVkICgpIHsNCiAgICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgICAgIHRoaXMucHJvZHVjdE9yU2VydmljZXNTZWFyY2hQYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCkNCiAgICAgICAgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZC5pdGVtc1BlclBhZ2UgPSA1MDANCiAgICAgICAgaWYgKHRoaXMuaXNNb2RlQ3JlYXRlKSB7DQogICAgICAgICAgICBhd2FpdCBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEVtcHR5KE1BSU5fQVBJX1VSTCkNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5nZXRCeUlkKE1BSU5fQVBJX1VSTCwgdGhpcy4kcm91dGUucGFyYW1zLmlkLCBmYWxzZSkNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gcmVzLmRhdGENCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIC8vIEdFVCBDT05UUkFDVE9SUw0KICAgICAgICAvLyBhd2FpdCB0aGlzLmZldGNoQ29udHJhY3RvcnMoKQ0KDQogICAgICAgIC8vIEdFVCBSRUdJT05TDQogICAgICAgIGF3YWl0IGhlbHBlclNlcnZpY2UuZmV0Y2hSZWdpb25zRm9yQ29udHJhY3RvclJlZXN0ckJ5Q3VycmVudFVzZXJJZCgpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMucmVnaW9ucyA9IHJlcy5kYXRhDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICB9KQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["CreateOrUpdateRemoveDoc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateOrUpdateRemoveDoc.vue","sourceRoot":"src/modules/reestr-contractors/modules/natural","sourcesContent":["<template>\r\n    <base-create-or-update-wrapper\r\n        @save=\"save\"\r\n        has-save-suspend\r\n        :custom-title=\"$t('actions.remove_from_reestr')\"\r\n    >\r\n        <ValidationObserver\r\n            ref=\"observer\"\r\n            v-slot=\"{}\"\r\n        >\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseInputWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.orderNumber\"\r\n                        :label=\"$t('column.order_number')\"\r\n                        :placeholder=\"$t('column.order_number')\"\r\n                    />\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseDatePickerWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        :label=\"$t('column.removed_date_from_reestr')\"\r\n                        :placeholder=\"$t('column.removed_date_from_reestr')\"\r\n                        disable-after\r\n                        v-model=\"editingItem.reestrClosedDate\"\r\n                        lang=\"ru\"\r\n                    ></BaseDatePickerWithValidation>\r\n                </b-col>\r\n            </b-row>\r\n\r\n            <b-row class=\"mb-3\">\r\n                <!-- <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.regionId\"\r\n                        :options=\"regions.map(e => e.regionId)\"\r\n                        @select=\"regionSelected\"\r\n                        :allow-empty=\"false\"\r\n                        :label=\"$t('column.region')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelRegion\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    />\r\n                </b-col> -->\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <b-row>\r\n                        <b-col :cols=\"$can('republic', 'for reestr') ? 8 : 12\">\r\n                            <!-- DISABLED STATE -->\r\n                            <BaseMultiselectWithValidation\r\n                                v-if=\"editingItem.isRepublic\"\r\n                                not-required\r\n                                disabled\r\n                                :value=\"null\"\r\n                                :options=\"regions.map(e => e.regionId)\"\r\n                                :custom-styles=\"$can('republic', 'for reestr') ? `grid-template-columns: 38% 62%;` : ''\"\r\n                                :custom-label=\"customLabelRegion\"\r\n                                placeholder=\"\"\r\n                                :label=\"$t('column.region')\"\r\n                                open-direction=\"bottom\"\r\n                                :max-height=\"600\"\r\n                                :show-labels=\"false\"\r\n                            />\r\n                            <BaseMultiselectWithValidation\r\n                                v-else\r\n                                rules=\"required\"\r\n                                class=\"required\"\r\n                                v-model=\"editingItem.regionId\"\r\n                                :options=\"regions.map(e => e.regionId)\"\r\n                                :custom-styles=\"$can('republic', 'for reestr') ? `grid-template-columns: 38% 62%;` : ''\"\r\n                                @select=\"regionSelected\"\r\n                                :allow-empty=\"false\"\r\n                                :label=\"$t('column.region')\"\r\n                                placeholder=\"\"\r\n                                :custom-label=\"customLabelRegion\"\r\n                                open-direction=\"bottom\"\r\n                                :max-height=\"600\"\r\n                                :show-labels=\"false\"\r\n                            />\r\n                        </b-col>\r\n                        <b-col\r\n                            cols=\"4\"\r\n                            v-if=\"$can('republic', 'for reestr')\"\r\n                        >\r\n                            <div class=\"form-check form-check-right\">\r\n                                <input\r\n                                    v-model=\"editingItem.isRepublic\"\r\n                                    @change=\"regionSelected(null, false, $event)\"\r\n                                    class=\"form-check-input\"\r\n                                    type=\"checkbox\"\r\n                                    id=\"formCheckIsLegal\"\r\n                                />\r\n                                <label\r\n                                    class=\"form-check-label font-weight-normal\"\r\n                                    for=\"formCheckIsLegal\"\r\n                                >\r\n                                    {{ $t('column.is_republic') }}\r\n                                </label>\r\n                            </div>\r\n                        </b-col>\r\n                    </b-row>\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.directoryProductOrServiceTypeId\"\r\n                        @select=\"productTypeSelected\"\r\n                        :allow-empty=\"false\"\r\n                        :options=\"productTypes.map(e => e.typeId)\"\r\n                        :label=\"$t('column.product_or_service_type')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelProductType\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.directoryProductOrServiceId\"\r\n                        @select=\"productOrServiceSelected\"\r\n                        :options=\"products.map(e => e.productOrServiceId)\"\r\n                        :label=\"$t('submodules.product_or_services.title')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelProduct\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                        :allow-empty=\"false\"\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingProductOrServices\"\r\n                    />\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <BaseMultiselectWithValidation\r\n                        v-if=\"editingItem.isRepublic\"\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.contractorId\"\r\n                        :allow-empty=\"false\"\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingContractors\"\r\n                        :options=\"contractors.map(e => e.id)\"\r\n                        :label=\"$t('column.business_entity')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelContractorForRepublic\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    />\r\n                    <BaseMultiselectWithValidation\r\n                        v-else\r\n                        rules=\"required\"\r\n                        class=\"required\"\r\n                        v-model=\"editingItem.contractorId\"\r\n                        :allow-empty=\"false\"\r\n                        :clear-on-select=\"false\"\r\n                        :loading=\"isLoadingContractors\"\r\n                        :options=\"contractors.map(e => e.contractorId)\"\r\n                        :label=\"$t('column.business_entity')\"\r\n                        placeholder=\"\"\r\n                        :custom-label=\"customLabelContractor\"\r\n                        open-direction=\"bottom\"\r\n                        :max-height=\"600\"\r\n                        :show-labels=\"false\"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"mb-3\">\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                </b-col>\r\n                <b-col\r\n                    sm=\"12\"\r\n                    md=\"6\"\r\n                >\r\n                    <ValidationProvider\r\n                        name=\"supplementDoc\"\r\n                        rules=\"required\"\r\n                        mode=\"passive\"\r\n                    >\r\n                        <template v-slot:default=\"\">\r\n                            <BaseFileUploaderWithValidation\r\n                                class=\"required\"\r\n                                ref=\"supplementDocUploader\"\r\n                                v-model=\"editingItem.supplementDocs\"\r\n                                data-vv-name=\"supplementDocFile\"\r\n                                data-vv-as=\"SupplementDocFile\"\r\n                                :max-files=\"1\"\r\n                                :label-on-top=\"false\"\r\n                                :label=\"$t('column.ilova')\"\r\n                            ></BaseFileUploaderWithValidation>\r\n                        </template>\r\n                    </ValidationProvider>\r\n                </b-col>\r\n            </b-row>\r\n        </ValidationObserver>\r\n    </base-create-or-update-wrapper>\r\n</template>\r\n<script>\r\nconst MAIN_API_URL = 'reestr/contractor-reestr-documents'\r\nconst APPEND_API_URL_NATURAL = 'close-estestveniy'\r\nconst APPEND_API_URL_DOMINANT = 'close-daminiriushiy'\r\n/*\r\n* YOU MUST SEND {{ MAIN_API_URL }} TO CRUD_SERVICE */\r\nimport crudAndListsService from \"@/shared/services/crud_and_list.service\"\r\nimport helperService from \"@/shared/services/helper.service\"\r\n\r\nexport default {\r\n    name: \"CreateOrUpdateRemoveDoc\",\r\n    /*\r\n    * COMPONENTS */\r\n    components: {},\r\n    /*\r\n    * DATA */\r\n    data () {\r\n        return {\r\n            editingItem: {},\r\n            regions: [],\r\n            hasNextPageContractors: false,\r\n            hasNextPageProductOrServices: false,\r\n            contractors: [],\r\n            debounce: null,\r\n            isLoadingContractors: false,\r\n            isLoadingProductOrServices: false,\r\n            contractorSearchPayload: {},\r\n            productOrServicesSearchPayload: {},\r\n            productTypes: [],\r\n            products: []\r\n        }\r\n    },\r\n    /*\r\n    * COMPUTED */\r\n    computed: {\r\n        computedObserver () {\r\n            return this.$refs.observer\r\n        },\r\n        isModeCreate () {\r\n            return this.$route.name === 'CreateRemoveDocNaturalContractorReestr' || this.$route.name === 'CreateRemoveDocDominantContractorReestr'\r\n        },\r\n        productOrServicesByContractorId () {\r\n            let foundContractor = this.contractors.find(el => el.contractorId == this.editingItem.contractorId)\r\n            if (foundContractor) {\r\n                return foundContractor.productOrServicesByDistrict\r\n            } else {\r\n                return []\r\n            }\r\n        },\r\n        isDominant () {\r\n            return this.$route.name === 'CreateRemoveDocDominantContractorReestr'\r\n        },\r\n        isNatural () {\r\n            return this.$route.name === 'CreateRemoveDocNaturalContractorReestr'\r\n        }\r\n    },\r\n    /*\r\n    * METHODS */\r\n    methods: {\r\n        save () {\r\n            this.computedObserver.validate().then(async valid => {\r\n                if (valid) {\r\n                    if (this.editingItem.id) {\r\n                        crudAndListsService.update(MAIN_API_URL, this.makeAndReturnFormDataForBase64()).then(res => {\r\n                            this.computedObserver.reset()\r\n                            this.editingItem = Object.assign({}, {});\r\n                            this.$router.go(-1)\r\n                            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                        })\r\n                    } else {\r\n                        let payload = await this.makeAndReturnFormDataForBase64()\r\n                        crudAndListsService.create(MAIN_API_URL, payload,\r\n                            `for-${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}`).then(res => {\r\n                                this.computedObserver.reset()\r\n                                this.editingItem = Object.assign({}, {});\r\n                                this.$router.go(-1)\r\n                                this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n                            })\r\n                    }\r\n                } else {\r\n                    this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n                }\r\n            });\r\n        },\r\n        contractorsByProductOrServiceId (productOrServiceId) {\r\n            let foundEl = this.products.find(el => el.productOrServiceId == productOrServiceId)\r\n            if (foundEl) {\r\n                return foundEl.contractorsByDistrict\r\n            } else {\r\n                return []\r\n            }\r\n        },\r\n        /* makeAndReturnFormData () {\r\n            let form = new FormData();\r\n            this.editingItem.supplementDocs.forEach(f => {\r\n                form.append(\"file\", f.file);\r\n            })\r\n            form.append(\"contractorId\", this.editingItem.contractorId)\r\n            form.append(\"regionId\", this.editingItem.regionId)\r\n            // form.append(\"directoryProductOrServiceTypeId\", this.editingItem.directoryProductOrServiceTypeId)\r\n            // form.append(\"governmentPercentage\", this.editingItem.governmentPercentage)\r\n            form.append(\"orderNumber\", this.editingItem.orderNumber)\r\n            form.append(\"reestrClosedDate\", this.editingItem.reestrClosedDate)\r\n            this.editingItem.directoryProductOrServiceIds.forEach(id => {\r\n                form.append(\"directoryProductOrServiceIds\", id)\r\n            })\r\n            return form\r\n        }, */\r\n        getBase64 (file) {\r\n            return new Promise((resolve, reject) => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(file);\r\n                reader.onload = () => resolve(reader.result);\r\n                reader.onerror = error => reject(error);\r\n            });\r\n        },\r\n        async makeAndReturnFormDataForBase64 () {\r\n            if (this.editingItem.supplementDocs[0].file.dataURL) {\r\n                this.editingItem.file = this.editingItem.supplementDocs[0].file.dataURL\r\n                return this.editingItem\r\n            } else {\r\n                let res = await this.getBase64(this.editingItem.supplementDocs[0].file)\r\n                this.editingItem.file = res\r\n                return this.editingItem\r\n            }\r\n\r\n        },\r\n        async regionSelected ($event, dontResetDependent = false, forRepublicEvent) {\r\n            if (!dontResetDependent) {\r\n                this.productTypes = []\r\n                this.editingItem.directoryProductOrServiceTypeId = null\r\n\r\n                this.editingItem.contractorId = null\r\n                this.contractors = []\r\n\r\n                this.editingItem.directoryProductOrServiceId = null\r\n            }\r\n            if (this.editingItem.isRepublic) {\r\n                helperService\r\n                    .getReestrByRepublic(this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : '')\r\n                    .then((res) => {\r\n                        this.productTypes = res.data;\r\n                    })\r\n                    .catch(e => {\r\n                        this.productTypes = [];\r\n                    })\r\n            } else if ($event || this.editingItem.regionId) {\r\n                helperService\r\n                    .getReestrByRegionId($event ? $event : this.editingItem.regionId, this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : '')\r\n                    .then((res) => {\r\n                        this.productTypes = res.data;\r\n                    })\r\n                    .catch(e => {\r\n                        this.productTypes = [];\r\n                    })\r\n            }\r\n        },\r\n        customLabelRegion (opt) {\r\n            let selected = this.regions.find(e => e.regionId == (opt.regionId ? opt.regionId : opt));\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.regionNameRu,\r\n                    nameLt: selected.regionNameLt,\r\n                    nameUz: selected.regionNameUz,\r\n                })}`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelProduct (opt) {\r\n            let selected = this.products.find(e => e.productOrServiceId == opt);\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.productOrServiceNameRu,\r\n                    nameLt: selected.productOrServiceNameLt,\r\n                    nameUz: selected.productOrServiceNameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelProductType (opt) {\r\n            let selected = this.productTypes.find(e => e.typeId == opt);\r\n            if (selected) {\r\n                return `${this.getName({\r\n                    nameRu: selected.typeNameRu,\r\n                    nameLt: selected.typeNameLt,\r\n                    nameUz: selected.typeNameUz,\r\n                })\r\n                    }`\r\n            }\r\n            return ``;\r\n        },\r\n        async productTypeSelected ($event, dontResetDistrict = false) {\r\n            if (!dontResetDistrict) {\r\n                this.editingItem.contractorId = null\r\n                this.contractors = []\r\n                this.editingItem.directoryProductOrServiceId = null\r\n                this.products = []\r\n            }\r\n            if ($event) {\r\n                // GET PRODUCT_OR_SERVICES\r\n                await this.fetchContractors(this.editingItem.regionId, $event)\r\n                // await helperService.getProductsByProdectTypeId($event)\r\n                //     .then(res => {\r\n                //         this.products = res.data\r\n                //     })\r\n                //     .catch(e => {\r\n                //         this.products = []\r\n                //         console.log(e)\r\n                //     })\r\n            }\r\n        },\r\n        async contractorSelected ($event, dontResetDependent = false) {\r\n            if (!dontResetDependent) {\r\n                this.editingItem.directoryProductOrServiceId = null\r\n                this.products = []\r\n            }\r\n        },\r\n        async productOrServiceSelected ($event, dontResetDependent = false) {\r\n            if (!dontResetDependent) {\r\n                this.editingItem.contractorId = null\r\n                this.contractors = []\r\n            }\r\n            if ($event) {\r\n                if (this.editingItem.directoryProductOrServiceTypeId && this.editingItem.isRepublic) {\r\n                    this.isLoadingContractors = true\r\n                    await helperService.getContractorsByProdectOrServiceTypeIdAndProductOrServiceId(`${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}?typeId=${this.editingItem.directoryProductOrServiceTypeId}&productOrServiceId=${$event}`)\r\n                        .then(res => {\r\n                            this.contractors = res.data\r\n                        })\r\n                        .catch(e => {\r\n                            this.contractors = []\r\n                            console.log(e)\r\n                        })\r\n                        .finally(() => {\r\n                            this.isLoadingContractors = false\r\n                        })\r\n                } else {\r\n                    this.contractors = this.contractorsByProductOrServiceId($event)\r\n                }\r\n            } else {\r\n                this.contractors = []\r\n            }\r\n        },\r\n        /* contractorReachedEndOfList (e) {\r\n            if (e) {\r\n                this.fetchContractors()\r\n            }\r\n        }, */\r\n        productOrServicesReachedEndOfList (e) {\r\n            if (e) {\r\n                this.fetchProductOrServices(this.editingItem.directoryProductOrServiceTypeId)\r\n            }\r\n        },\r\n        customLabelContractorForRepublic (opt) {\r\n            let selected = this.contractors.find(e => e.id == opt);\r\n            if (selected) {\r\n                return `${selected.name}`\r\n            }\r\n            return ``;\r\n        },\r\n        customLabelContractor (opt) {\r\n            let selected = this.contractors.find(e => e.contractorId == opt);\r\n            if (selected) {\r\n                return `${selected.contractorFullName}`\r\n            }\r\n            return ``;\r\n        },\r\n        /* async debounceSearchProductOrServices (searchText) {\r\n            clearTimeout(this.debounce);\r\n            this.debounce = setTimeout(async () => {\r\n                await this.fetchContractorsWithKeyword(searchText);\r\n            }, 1000);\r\n        }, */\r\n        /* async debounceSearchContractors (searchText) {\r\n            clearTimeout(this.debounce);\r\n            this.debounce = setTimeout(async () => {\r\n                await this.fetchContractorsWithKeyword(searchText);\r\n            }, 1000);\r\n        }, */\r\n        fetchProductOrServicesWithKeyword (keyword) {\r\n            this.products = []\r\n            this.productOrServicesSearchPayload.page = 1\r\n            this.productOrServicesSearchPayload.keyword = keyword ? keyword : ''\r\n            this.fetchProductOrServices(this.editingItem.directoryProductOrServiceTypeId)\r\n        },\r\n        async fetchProductOrServices (typeId) {\r\n            this.isLoadingProductOrServices = true\r\n            await helperService.getProductOrServicesByTypeId(typeId, this.productOrServicesSearchPayload)\r\n                .then(res => {\r\n                    this.products.push(...res.data.list)\r\n                    this.hasNextPageProductOrServices = res.data.total / this.productOrServicesSearchPayload.itemsPerPage > this.productOrServicesSearchPayload.page\r\n                    this.productOrServicesSearchPayload.page += 1\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                    this.products = []\r\n                })\r\n                .finally(() => {\r\n                    this.isLoadingProductOrServices = false\r\n                })\r\n        },\r\n        /* fetchContractorsWithKeyword (keyword) {\r\n            this.contractors = []\r\n            this.contractorSearchPayload.page = 1\r\n            this.contractorSearchPayload.keyword = keyword ? keyword : ''\r\n            this.fetchContractors()\r\n        }, */\r\n        async fetchContractors (regionId, typeId) {\r\n            if (this.editingItem.isRepublic && typeId) {\r\n                this.isLoadingProductOrServices = true\r\n                helperService.searchReestrListByRepublic(`${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}?typeId=${typeId}`)\r\n                    .then(res => {\r\n                        this.products = res.data\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e)\r\n                        this.products = []\r\n                    })\r\n                    .finally(() => {\r\n                        this.isLoadingProductOrServices = false\r\n                    })\r\n            } else if (regionId && typeId) {\r\n                this.isLoadingProductOrServices = true\r\n                await crudAndListsService.searchList(MAIN_API_URL, null, `${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}?regionId=${regionId}&typeId=${typeId}`)\r\n                    .then(res => {\r\n                        this.products = res.data\r\n                    })\r\n                    .catch(e => {\r\n                        console.log(e)\r\n                        this.products = []\r\n                    })\r\n                    .finally(() => {\r\n                        this.isLoadingProductOrServices = false\r\n                    })\r\n            } else {\r\n                this.editingItem.directoryProductOrServiceId = null\r\n                this.products = []\r\n            }\r\n        },\r\n    },\r\n    /*\r\n    * CREATED */\r\n    async created () {\r\n        this.contractorSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n        this.productOrServicesSearchPayload = Object.assign({}, this.var_default_search_payload)\r\n        this.var_default_search_payload.itemsPerPage = 500\r\n        if (this.isModeCreate) {\r\n            await crudAndListsService.getEmpty(MAIN_API_URL)\r\n                .then(res => {\r\n                    this.editingItem = res.data\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        } else {\r\n            await crudAndListsService.getById(MAIN_API_URL, this.$route.params.id, false)\r\n                .then(res => {\r\n                    this.editingItem = res.data\r\n                })\r\n                .catch(e => {\r\n                    console.log(e)\r\n                })\r\n        }\r\n        // GET CONTRACTORS\r\n        // await this.fetchContractors()\r\n\r\n        // GET REGIONS\r\n        await helperService.fetchRegionsForContractorReestrByCurrentUserId()\r\n            .then(res => {\r\n                this.regions = res.data\r\n            })\r\n            .catch(e => {\r\n                console.log(e)\r\n            })\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.col-form-label {\r\n    padding-top: 0;\r\n}\r\n\r\nul {\r\n    list-style-type: none;\r\n}\r\n</style>"]}]}