{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\reestr-contractors\\modules\\natural\\ReestrHistoryForContractor.vue?vue&type=style&index=0&id=2b976be5&scoped=true&lang=scss&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\reestr-contractors\\modules\\natural\\ReestrHistoryForContractor.vue","mtime":1671096848983},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1667355376309},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1667355356565},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1667355363746},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1667355361315},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmEtdGFnLXVuZGVybGluZS1ob3ZlciB7DQogIDpob3ZlciB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUgIWltcG9ydGFudDsNCiAgfQ0KfQ0KDQp1bCB7DQogIHBhZGRpbmctbGVmdDogMjBweDsNCn0NCg=="},{"version":3,"sources":["ReestrHistoryForContractor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAy2CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ReestrHistoryForContractor.vue","sourceRoot":"src/modules/reestr-contractors/modules/natural","sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row mb-2 align-items-center\">\r\n            <div class=\"col-2\">\r\n              <b-btn\r\n                  variant=\"warning\"\r\n                  class=\"text-capitalize\"\r\n                  @click=\"$router.go(-1)\"\r\n              >\r\n                {{ $t('actions.back') }}\r\n              </b-btn>\r\n            </div>\r\n            <div class=\"col-8\">\r\n              <h4\r\n                  class=\"text-center font-weight-bold m-0\"\r\n                  v-if=\"tableItems.length > 0\"\r\n              >{{ tableItems[0].contractorDto.fullName }}</h4>\r\n            </div>\r\n            <div class=\"col-2\">\r\n              <div\r\n                  class=\"text-sm-end\"\r\n                  v-if=\"tableItems.length\"\r\n              >\r\n                <download-excel\r\n                    :data=\"json_data\"\r\n                    :fields=\"jsonFieldsComputed\"\r\n                    :header=\"`${tableItems[0].contractorDto.fullName}`\"\r\n                    worksheet=\"My Worksheet\"\r\n                    :name=\"`${tableItems[0].contractorDto.fullName}.xls`\"\r\n                >\r\n                  <b-btn\r\n                      @click=\"downloadExcel\"\r\n                      type=\"button\"\r\n                      class=\"btn btn-rounded bg-primary mb-2\"\r\n                  >\r\n                    <i class=\"mdi mdi-microsoft-excel me-1\"></i> {{ $t('actions.download') }}\r\n                  </b-btn>\r\n                </download-excel>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!-- Table data -->\r\n          <b-table\r\n              :items=\"tableItems\"\r\n              :fields=\"tableFields\"\r\n              :busy=\"loadingTableItems\"\r\n              @row-clicked=\"rowClicked\"\r\n              id=\"my-table\"\r\n              class=\"custom-b-table\"\r\n              responsive\r\n              bordered\r\n              small\r\n              show-empty\r\n          >\r\n            <!-- NUMBER OF ITEM -->\r\n            <template #cell(index)=\"data\">\r\n              <strong>{{ data.index + 1 }}</strong>\r\n            </template>\r\n\r\n            <!-- STATUS -->\r\n            <template #cell(status)=\"data\">\r\n              <b-badge\r\n                  :variant=\"data.item.documentStatusCode === 'PENDING' ? 'warning' : data.item.documentStatusCode === 'READY' ? 'success' : ''\">\r\n                {{\r\n                  getName({\r\n                    nameRu: data.item.documentStatusNameRu,\r\n                    nameLt: data.item.documentStatusNameLt,\r\n                    nameUz: data.item.documentStatusNameUz,\r\n                  })\r\n                }}\r\n              </b-badge>\r\n            </template>\r\n\r\n            <!-- DOCUMENT_TYPE -->\r\n            <template #cell(documentType)=\"data\">\r\n              <b-badge\r\n                  :variant=\"data.item.documentType === 'KIRITISH' ? 'success' : data.item.documentType === 'CHIQARISH' ? 'danger' : ''\">\r\n                {{\r\n                  data.item.documentType\r\n                }}\r\n              </b-badge>\r\n            </template>\r\n\r\n            <!-- LAST_MODIFIED_BY -->\r\n            <template #cell(lastModifiedBy)=\"data\">\r\n              <template v-if=\"data.item.updatedByUserName\">\r\n                {{\r\n                  data.item.updatedByEmployeeFullName ? (data.item.updatedByEmployeeFullName + ' ' + (data.item.updatedByDirectoryPositionNameUz ? ('(' + data.item.updatedByDirectoryPositionNameUz + ', ' + $t('auth.username') + ' - ' + data.item.updatedByUserName + ')') : '')) : $t('auth.username') + ' - ' + data.item.updatedByUserName\r\n                }}\r\n                <br><i>{{ data.item.updatedByDate ? data.item.updatedByDate : '' }}</i>\r\n              </template>\r\n            </template>\r\n\r\n            <!-- APPROVED_BY -->\r\n            <template #cell(approvedBy)=\"data\">\r\n              <template v-if=\"data.item.confirmedByUserName\">\r\n                {{\r\n                  data.item.confirmedByEmployeeFullName ? (data.item.confirmedByEmployeeFullName + ' ' + (data.item.confirmedByDirectoryPositionNameUz ? ('(' + data.item.confirmedByDirectoryPositionNameUz + ', ' + $t('auth.username') + ' - ' + data.item.confirmedByUserName + ')') : '')) : $t('auth.username') + ' - ' + data.item.confirmedByUserName\r\n                }}\r\n                <br><i>{{ data.item.confirmedByDate ? data.item.confirmedByDate : '' }}</i>\r\n              </template>\r\n\r\n            </template>\r\n\r\n            <template #cell(contractorFullName)=\"data\">\r\n              {{ data.item.contractorDto.fullName }} - {{ data.item.contractorDto.inn }}\r\n            </template>\r\n\r\n            <!-- PRODUCTS_OR_SERVICES -->\r\n            <template #cell(productOrServices)=\"data\">\r\n              {{\r\n                getName({\r\n                  nameRu: data.item.directoryProductOrServiceDto.nameRu,\r\n                  nameLt: data.item.directoryProductOrServiceDto.nameLt,\r\n                  nameUz: data.item.directoryProductOrServiceDto.nameUz,\r\n                })\r\n              }}\r\n            </template>\r\n\r\n            <!-- OKEDS -->\r\n            <template #cell(oked)=\"data\">\r\n              <div v-if=\"data.item.infoOkedDto\">\r\n                <strong>{{ `${data.item.infoOkedDto.code} - ` }}</strong>\r\n                {{\r\n                  getName({\r\n                    nameRu: data.item.infoOkedDto.nameRu,\r\n                    nameLt: data.item.infoOkedDto.nameLt,\r\n                    nameUz: data.item.infoOkedDto.nameUz,\r\n                  })\r\n                }}\r\n              </div>\r\n            </template>\r\n\r\n            <!-- SKP -->\r\n            <template #cell(skp)=\"data\">\r\n              <div v-if=\"data.item.infoSKPDto\">\r\n                <strong>{{ `${data.item.infoSKPDto.code} - ` }}</strong>\r\n                {{\r\n                  getName({\r\n                    nameRu: data.item.infoSKPDto.nameRu,\r\n                    nameLt: data.item.infoSKPDto.nameLt,\r\n                    nameUz: data.item.infoSKPDto.nameUz,\r\n                  })\r\n                }}\r\n              </div>\r\n            </template>\r\n\r\n            <!-- TNVED -->\r\n            <template #cell(tnved)=\"data\">\r\n              <div v-if=\"data.item.infoTNVEDDto\">\r\n                <strong>{{ `${data.item.infoTNVEDDto.code} - ` }}</strong>\r\n                {{\r\n                  getName({\r\n                    nameRu: data.item.infoTNVEDDto.nameRu,\r\n                    nameLt: data.item.infoTNVEDDto.nameLt,\r\n                    nameUz: data.item.infoTNVEDDto.nameUz,\r\n                  })\r\n                }}\r\n              </div>\r\n            </template>\r\n\r\n            <!-- PRODUCT_OR_SERVICE_TYPE -->\r\n            <template #cell(productOrServiceType)=\"data\">\r\n              <strong v-if=\"data.item.directoryProductOrServiceTypeDto\">{{\r\n                  getName({\r\n                    nameRu: data.item.directoryProductOrServiceTypeDto.nameRu,\r\n                    nameLt: data.item.directoryProductOrServiceTypeDto.nameLt,\r\n                    nameUz: data.item.directoryProductOrServiceTypeDto.nameUz,\r\n                  })\r\n                }}</strong>\r\n            </template>\r\n\r\n            <!-- UNIT -->\r\n            <template #cell(unit)=\"data\">\r\n              <strong v-if=\"data.item.unitId\">{{\r\n                  getName({\r\n                    nameRu: data.item.unitNameRu,\r\n                    nameLt: data.item.unitNameLt,\r\n                    nameUz: data.item.unitNameUz,\r\n                  })\r\n                }}</strong>\r\n            </template>\r\n\r\n            <!-- FOUNDERS_PERCENTAGE -->\r\n            <template #cell(foundersPercentage)=\"data\">\r\n              <div class=\"d-flex align-items-center flex-wrap\">\r\n                <ul>\r\n                  <li\r\n                      v-for=\"(el, index) in data.item.contractorDto.foundersDtos\"\r\n                      :key=\"`founder-${el.id}-${index}`\"\r\n                  >{{\r\n                      el.founderName\r\n                    }} <strong>({{\r\n                        el.percentage\r\n                      }})</strong>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </template>\r\n\r\n            <!-- REGION -->\r\n            <template #cell(region)=\"data\">\r\n              <div class=\"d-flex align-items-center flex-wrap\">\r\n                <ul>\r\n                  <li\r\n                      v-for=\"(el, index) in data.item.regionDtos\"\r\n                      :key=\"`region-${index}`\"\r\n                  ><strong>{{\r\n                      getName({\r\n                        nameRu: el.nameRu,\r\n                        nameLt: el.nameLt,\r\n                        nameUz: el.nameUz,\r\n                      })\r\n                    }}</strong>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </template>\r\n\r\n            <!-- DISTRICT -->\r\n            <template #cell(district)=\"data\">\r\n              <div\r\n                  v-if=\"data.item.districtDtos\"\r\n                  class=\"d-flex align-items-center flex-wrap\"\r\n              >\r\n                <ul>\r\n                  <li\r\n                      v-for=\"(el, index) in data.item.districtDtos\"\r\n                      :key=\"`district-${index}`\"\r\n                  ><strong>{{\r\n                      getName({\r\n                        nameRu: el.nameRu,\r\n                        nameLt: el.nameLt,\r\n                        nameUz: el.nameUz,\r\n                      })\r\n                    }}</strong>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </template>\r\n            <!-- INNER TABLE FOR REESTR -->\r\n            <template #row-details=\"row\">\r\n              <b-row>\r\n                <b-col cols=\"12\">\r\n                  <b-tabs\r\n                      v-model=\"row.item.activeTabIdxOfInnerTabs\"\r\n                      @input=\"setRowsInnerTabsData(row.item, row.index, $event)\"\r\n                      card\r\n                  >\r\n                    <b-tab\r\n                        v-for=\"(t, index) in tableInnerTabs\"\r\n                        :key=\"`tableInnerTab-${index}`\"\r\n                        :title=\"t.title.toUpperCase()\"\r\n                    >\r\n                      <b-tabs\r\n                          v-if=\"t.key === 'contractor'\"\r\n                          v-model=\"row.item.activeTabIdxForContractor\"\r\n                          @input=\"setRowsInnerTabsData(row.item, row.index, $event, true)\"\r\n                      >\r\n                        <b-tab\r\n                            v-for=\"(tc, indexTc) in contractorTabs\"\r\n                            :key=\"`contractorTab-${indexTc}`\"\r\n                            :title=\"tc.title\"\r\n                        >\r\n                          <b-tabs\r\n                              card\r\n                              v-if=\"tc.key === 'founders'\"\r\n                              v-model=\"row.item.activeTabIdxForContractorFounder\"\r\n                              @input=\"setRowsInnerTabsData(row.item, row.index, indexTc, true, true, $event)\"\r\n                          >\r\n                            <b-tab\r\n                                v-for=\"(tcf, indexTcf) in founderTabs\"\r\n                                :key=\"`contractorFoundersTab-${indexTcf}`\"\r\n                                :title=\"tcf.title\"\r\n                            >\r\n                              <template #title>\r\n                                {{ tcf.title }}\r\n                                <b-badge\r\n                                    v-if=\"(tcf.key === 'legal' || tcf.key === 'individual') && row.item.foundersFullData\"\r\n                                    :variant=\"tcf.key === 'legal' ? 'primary' : 'success'\"\r\n                                    class=\"font-weight-bold\"\r\n                                    style=\"font-size: .7rem;\"\r\n                                >\r\n                                  {{ tcf.key === 'legal' ? row.item.foundersFullData.founderLegalCount : row.item.foundersFullData.founderIndividualCount\r\n                                  }}\r\n                                </b-badge>\r\n                              </template>\r\n                              <b-table\r\n                                  :items=\"row.item.contractorTabItems\"\r\n                                  :fields=\"tcf.fields\"\r\n                                  :busy=\"row.item.loadingInnerData\"\r\n                                  sticky-header=\"400px\"\r\n                                  bordered\r\n                                  small\r\n                                  hover\r\n                                  show-empty\r\n                                  striped\r\n                              >\r\n                                <!-- TABLE_BUSY SLOT -->\r\n                                <template #table-busy>\r\n                                  <div class=\"text-center my-2\">\r\n                                    <b-spinner\r\n                                        variant=\"primary\"\r\n                                        class=\"align-middle\"\r\n                                    ></b-spinner>\r\n\r\n                                  </div>\r\n                                </template>\r\n\r\n                                <template #cell(index)=\"data\">\r\n                                  {{\r\n                                    data.index + 1\r\n                                  }}\r\n                                </template>\r\n\r\n                                <!-- FULL_NAME -->\r\n                                <template #cell(fullName)=\"data\">\r\n                                  {{ data.item.firstName }} {{ data.item.lastName }}\r\n                                  {{ data.item.middleName ? data.item.middleName : '' }}\r\n                                </template>\r\n\r\n                                <!-- FOUNDER_SHARE_SUM -->\r\n                                <template #cell(founderShareSum)=\"data\">\r\n                                  {{ data.item.founderShareSum | toCurrency }}\r\n                                </template>\r\n\r\n                                <!-- FOUNDER_TYPE -->\r\n                                <template #cell(founderType)=\"\">\r\n                                  <b-badge\r\n                                      v-if=\"tcf.key === 'legal' || tcf.key === 'individual'\"\r\n                                      :variant=\"tcf.key === 'legal' ? 'primary' : 'success'\"\r\n                                      class=\"font-weight-bold\"\r\n                                      style=\"font-size: .7rem;\"\r\n                                  >{{ tcf.key === 'legal' ? $t('column.legal_entity') : $t('column.individual') }}\r\n                                  </b-badge>\r\n                                </template>\r\n\r\n                                <template #empty=\"\">\r\n                                  <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                                </template>\r\n\r\n                              </b-table>\r\n                            </b-tab>\r\n                          </b-tabs>\r\n                          <b-table\r\n                              v-else\r\n                              :items=\"row.item.contractorTabItems\"\r\n                              :fields=\"tc.fields\"\r\n                              :busy=\"row.item.loadingInnerData\"\r\n                              sticky-header=\"400px\"\r\n                              bordered\r\n                              small\r\n                              hover\r\n                              show-empty\r\n                              striped\r\n                          >\r\n                            <!-- TABLE_BUSY SLOT -->\r\n                            <template #table-busy>\r\n                              <div class=\"text-center my-2\">\r\n                                <b-spinner\r\n                                    variant=\"primary\"\r\n                                    class=\"align-middle\"\r\n                                ></b-spinner>\r\n\r\n                              </div>\r\n                            </template>\r\n\r\n                            <template #cell(index)=\"data\">\r\n                              {{\r\n                                data.index + 1\r\n                              }}\r\n                            </template>\r\n                            <!-- NAME -->\r\n                            <template #cell(name)=\"data\">\r\n                              <div class=\"d-flex justify-content-between\">\r\n                                <p\r\n                                    class=\"mb-0 d-flex align-items-center\"\r\n                                    style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                                ><span class=\"badge bg-primary\">ЎЗ</span> : <span> {{ data.item.nameUz }}</span></p>\r\n                                <p\r\n                                    class=\"mb-0 d-flex align-items-center\"\r\n                                    style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                                ><span class=\"badge bg-primary\">O'Z</span> : <span> {{ data.item.nameLt }}</span></p>\r\n                                <p\r\n                                    class=\"mb-0 d-flex align-items-center\"\r\n                                    style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                                ><span class=\"badge bg-primary\">РУ</span> : <span> {{ data.item.nameRu }}</span></p>\r\n                              </div>\r\n                            </template>\r\n\r\n                            <!-- FULL_NAME -->\r\n                            <template #cell(directorOrAccounterFullName)=\"data\">\r\n                              {{ data.item.firstName }} {{ data.item.lastName }}\r\n                              {{ data.item.middleName ? data.item.middleName : '' }}\r\n                            </template>\r\n\r\n                            <!-- STATUS -->\r\n                            <template #cell(status)=\"data\">\r\n                              <div class=\"d-flex justify-content-between\">\r\n                                <p>\r\n                                  {{\r\n                                    getName({\r\n                                      nameRu: data.item.statusNameRu,\r\n                                      nameLt: data.item.statusNameLt,\r\n                                      nameUz: data.item.statusNameUz,\r\n                                    })\r\n                                  }}\r\n                                </p>\r\n                              </div>\r\n                            </template>\r\n\r\n                            <!-- PARENT -->\r\n                            <template #cell(parent)=\"data\">\r\n                                                            <span v-if=\"data.item.parent\">\r\n                                                                {{ data.item.parent.fullName }}\r\n                                                            </span>\r\n                            </template>\r\n\r\n                            <!-- STATUS -->\r\n                            <template #cell(formOfOwnership)=\"data\">\r\n                              <div class=\"d-flex justify-content-between\">\r\n                                <p>\r\n                                  {{\r\n                                    getName({\r\n                                      nameRu: data.item.formOfOwnershipNameRu,\r\n                                      nameLt: data.item.formOfOwnershipNameLt,\r\n                                      nameUz: data.item.formOfOwnershipNameUz,\r\n                                    })\r\n                                  }}\r\n                                </p>\r\n                              </div>\r\n                            </template>\r\n\r\n                            <!-- REGION NAME -->\r\n                            <template #cell(regionName)=\"data\">\r\n                              <p v-if=\"data.item.addressDto\">\r\n                                {{\r\n                                  getName({\r\n                                    nameRu: data.item.addressDto.regionNameRu,\r\n                                    nameLt: data.item.addressDto.regionNameLt,\r\n                                    nameUz: data.item.addressDto.regionNameUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                            </template>\r\n\r\n                            <!-- DISTRICT NAME -->\r\n                            <template #cell(districtName)=\"data\">\r\n                              <p v-if=\"data.item.addressDto\">\r\n                                {{\r\n                                  getName({\r\n                                    nameRu: data.item.addressDto.districtNameRu,\r\n                                    nameLt: data.item.addressDto.districtNameLt,\r\n                                    nameUz: data.item.addressDto.districtNameUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                            </template>\r\n\r\n                            <!-- CAN REGISTER -->\r\n                            <template\r\n                                v-if=\"tc.key === 'generalInfo'\"\r\n                                #cell(canRegister)=\"data\"\r\n                            >\r\n                              <div class=\"d-flex justify-content-center\">\r\n                                                                <span\r\n                                                                    class=\"badge bg-success\"\r\n                                                                    v-if=\"data.item.canRegister === true\"\r\n                                                                >HA</span>\r\n                                <span\r\n                                    class=\"badge bg-warning\"\r\n                                    v-if=\"data.item.canRegister === false\"\r\n                                >YO'Q</span>\r\n                              </div>\r\n                            </template>\r\n\r\n                            <!-- FOUNDER_SHARE_SUM -->\r\n                            <template #cell(founderShareSum)=\"data\">\r\n                              {{ data.item.founderShareSum | toCurrency }}\r\n                            </template>\r\n\r\n                            <!-- FOUNDER_TYPE -->\r\n                            <template #cell(founderType)=\"data\">\r\n                              <b-badge\r\n                                  :variant=\"data.item.isLegal ? 'primary' : 'success'\"\r\n                                  class=\"font-weight-bold\"\r\n                                  style=\"font-size: .7rem;\"\r\n                              >{{ data.item.isLegal ? $t('column.legal_entity') : $t('column.individual') }}\r\n                              </b-badge>\r\n                            </template>\r\n\r\n                            <template #empty=\"\">\r\n                              <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                            </template>\r\n\r\n                          </b-table>\r\n                        </b-tab>\r\n                      </b-tabs>\r\n                      <b-table\r\n                          v-else\r\n                          :items=\"row.item.innerTabItems\"\r\n                          :fields=\"t.fields\"\r\n                          :busy=\"row.item.loadingInnerData\"\r\n                          sticky-header=\"400px\"\r\n                          bordered\r\n                          small\r\n                          hover\r\n                          show-empty\r\n                          striped\r\n                      >\r\n                        <!-- TABLE_BUSY SLOT -->\r\n                        <template #table-busy>\r\n                          <div class=\"text-center my-2\">\r\n                            <b-spinner\r\n                                variant=\"primary\"\r\n                                class=\"align-middle\"\r\n                            ></b-spinner>\r\n\r\n                          </div>\r\n                        </template>\r\n\r\n                        <template #cell(index)=\"innerData\">\r\n                          {{\r\n                            innerData.index + 1\r\n                          }}\r\n                        </template>\r\n\r\n                        <!-- PRICE_APPROVAL_CURRENT_PRICE_WITH_DUTY -->\r\n                        <template #cell(currentPriceWithDuty)=\"data\">\r\n                          {{ data.item.currentPriceWithDuty | toCurrency }}\r\n                        </template>\r\n                        <!-- PRICE_APPROVAL_CURRENT_PRICE_WITHOUT_DUTY -->\r\n                        <template #cell(currentPriceWithoutDuty)=\"data\">\r\n                          {{ data.item.currentPriceWithoutDuty | toCurrency }}\r\n                        </template>\r\n\r\n                        <!-- COMISSION_SHOWCASE_AMOUNT -->\r\n                        <template #cell(instructionAmount)=\"data\">\r\n                          {{ data.item.instructionAmount | toCurrency }}\r\n                        </template>\r\n                        <!-- COMISSION_REMAINDER_AMOUNT -->\r\n                        <template #cell(residueAmount)=\"data\">\r\n                          {{ data.item.residueAmount | toCurrency }}\r\n                        </template>\r\n\r\n                        <template #empty=\"\">\r\n                          <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                        </template>\r\n\r\n                      </b-table>\r\n                    </b-tab>\r\n                  </b-tabs>\r\n                </b-col>\r\n                <!-- <b-col\r\n                    v-if=\"isNatural || isNaturalRepublic\"\r\n                    sm=\"5\"\r\n                >\r\n                    <h4 class=\"text-center\">{{$t('column.announced_media')}}</h4>\r\n                    <b-table\r\n                        :items=\"row.item.announcedMediaDtos ? row.item.announcedMediaDtos : []\"\r\n                        :fields=\"mediaTableFields\"\r\n                        :busy=\"row.item.loadingInnerData\"\r\n                        bordered\r\n                        small\r\n                        hover\r\n                        show-empty\r\n                        striped\r\n                        table-variant=\"info\"\r\n                    >\r\n\r\n\r\n                        <template #cell(index)=\"innerData\">\r\n                            {{\r\n                        innerData.index + 1\r\n                    }}\r\n                        </template>\r\n\r\n                        <template #empty=\"\">\r\n                            <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                        </template>\r\n\r\n                    </b-table>\r\n                </b-col>\r\n                <b-col :sm=\"isNatural || isNaturalRepublic ? '7' : '12'\">\r\n                    <h4 class=\"text-center\">{{$t('column.commission_applications')}}</h4>\r\n                    <b-table\r\n                        :items=\"row.item.commissionApplicationDtos ? row.item.commissionApplicationDtos : []\"\r\n                        :fields=\"comissionTableFields\"\r\n                        :busy=\"row.item.loadingInnerData\"\r\n                        bordered\r\n                        small\r\n                        hover\r\n                        show-empty\r\n                        striped\r\n                        table-variant=\"warning\"\r\n                    >\r\n\r\n\r\n                        <template #cell(index)=\"innerData\">\r\n                            {{\r\n                        innerData.index + 1\r\n                    }}\r\n                        </template>\r\n\r\n                        <template #empty=\"\">\r\n                            <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                        </template>\r\n\r\n                    </b-table>\r\n                </b-col> -->\r\n              </b-row>\r\n            </template>\r\n            <!-- ACTIONS -->\r\n            <template #cell(actions)=\"data\">\r\n              <div class=\"general-table__actions d-flex justify-content-center\">\r\n                <b-btn\r\n                    v-if=\"canUpdateReestr && data.item.documentStatusCode === 'PENDING' && data.item.documentType === 'KIRITISH'\"\r\n                    variant=\"link\"\r\n                    v-b-popover.hover.bottom=\"{variant: 'dark', content: $t('actions.edit')}\"\r\n                    class=\"text-decoration-none p-0\"\r\n                    style=\"font-size: 1.2rem; margin-right: 1rem;\"\r\n                    @click=\"editItem(data.item)\"\r\n                >\r\n                  <i class=\"mdi mdi-circle-edit-outline edit\" />\r\n                </b-btn>\r\n                <a v-b-popover.hover.bottom=\"{variant: 'dark', content: $t('actions.download')}\"\r\n                   style=\"font-size: 1.2rem; margin-right: 1rem;\" :href=\"`${publicPath}${data.item.fileUrl}`\" target=\"_blank\" >\r\n                  <i class=\"mdi mdi-file-download\" />\r\n                </a>\r\n                <b-btn\r\n                    v-if=\"canApproveReestr && data.item.documentStatusCode === 'PENDING'\"\r\n                    v-b-popover.hover.bottom=\"{variant: 'dark', content: $t('actions.confirm')}\"\r\n                    variant=\"link\"\r\n                    class=\"text-decoration-none p-0\"\r\n                    style=\"font-size: 1.2rem; color: green;\"\r\n                >\r\n                  <i @click=\"approveReestrDoc(data.item)\" class=\"mdi mdi-check-circle-outline edit\" />\r\n                </b-btn>\r\n              </div>\r\n            </template>\r\n\r\n            <!-- EMPTY SLOT -->\r\n            <template #empty=\"\">\r\n              <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n            </template>\r\n\r\n            <!-- TABLE_BUSY SLOT -->\r\n            <template #table-busy>\r\n              <div class=\"text-center my-2\">\r\n                <b-spinner\r\n                    variant=\"primary\"\r\n                    class=\"align-middle\"\r\n                ></b-spinner>\r\n              </div>\r\n            </template>\r\n          </b-table>\r\n\r\n          <!-- end table -->\r\n          <!-- <b-pagination\r\n              v-model=\"var_default_search_payload.page\"\r\n              :total-rows=\"totalItems\"\r\n              :per-page=\"var_default_search_payload.itemsPerPage\"\r\n              aria-controls=\"my-table\"\r\n              class=\"justify-content-end\"\r\n          ></b-pagination> -->\r\n        </div>\r\n        <!-- end card-body -->\r\n      </div>\r\n      <!-- end card -->\r\n    </div>\r\n    <!-- end col -->\r\n  </div>\r\n  <!-- end row -->\r\n</template>\r\n\r\n<script>\r\nconst MAIN_API_URL = 'reestr/contractor-reestr-documents'\r\nconst APPEND_API_URL_NATURAL = 'for-contractor/estestveniy'\r\nconst APPEND_API_URL_DOMINANT = 'for-contractor/daminiriushiy'\r\nimport crudAndListsService from '@/shared/services/crud_and_list.service'\r\nimport helperService from '@/shared/services/helper.service'\r\n\r\nexport default {\r\n  name: 'ReestrHistoryForContractorNatural',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      publicPath: process.env.BASE_URL,\r\n      // activeTabIdxForContractor: 0,\r\n      // activeTabIdxOfInnerTabs: 0,\r\n      founderTabs: [\r\n        {\r\n          key: \"legal\",\r\n          title: this.$t('column.legal_entity'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            {\r\n              key: 'name',\r\n              label: this.$t('column.name'),\r\n            },\r\n            {\r\n              key: 'tin',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'founderType',\r\n              label: this.$t('column.type'),\r\n            },\r\n            {\r\n              key: 'founderSharePercent',\r\n              label: this.$t('column.share_percentage'),\r\n            },\r\n            {\r\n              key: 'founderShareSum',\r\n              label: this.$t('column.share_sum'),\r\n            },\r\n          ]\r\n        },\r\n        {\r\n          key: \"individual\",\r\n          title: this.$t('column.individual'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            {\r\n              key: 'fullName',\r\n              label: this.$t('column.name'),\r\n            },\r\n            {\r\n              key: 'tin',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'pinfl',\r\n              label: this.$t('column.personal_number'),\r\n            },\r\n            {\r\n              key: 'founderType',\r\n              label: this.$t('column.type'),\r\n            },\r\n            {\r\n              key: 'founderSharePercent',\r\n              label: this.$t('column.share_percentage'),\r\n            },\r\n            {\r\n              key: 'founderShareSum',\r\n              label: this.$t('column.share_sum'),\r\n            },\r\n          ]\r\n        }\r\n      ],\r\n      contractorTabs: [\r\n        {\r\n          key: \"generalInfo\",\r\n          title: this.$t('column.general_info'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            { label: this.$t('column.full_name'), key: \"fullName\", thStyle: { 'min-width': '17rem' } },\r\n            { label: this.$t('column.superior_parent'), key: \"parent\" },\r\n            { label: this.$t('column.status'), key: \"status\" },\r\n            { label: this.$t('submodules.form_of_ownership.title'), key: \"formOfOwnership\" },\r\n            {\r\n              label: this.$t('column.can_login'), key: \"canRegister\", tdClass: \"text-center\",\r\n            },\r\n            { label: this.$t('column.inn'), key: \"inn\" },\r\n            { label: this.$t('column.oked'), key: \"oked\" },\r\n            // { label: this.$t('column.director'), key: \"director\" },\r\n            // { label: this.$t('column.accounter'), key: \"accounter\" },\r\n            { label: this.$t('column.mobile_number'), key: \"mobileNumber\" },\r\n            { label: this.$t('column.region'), key: \"regionName\" },\r\n            { label: this.$t('column.district'), key: \"districtName\" },\r\n            { label: this.$t('column.address'), key: \"address\" },\r\n            { label: this.$t('column.phone_number'), key: \"phoneNumber\" },\r\n            { label: this.$t('column.mail'), key: \"email\" },\r\n            { label: this.$t('column.fax_number'), key: \"faxNumber\" }\r\n          ]\r\n        },\r\n        {\r\n          key: \"director\",\r\n          title: this.$t('column.director'),\r\n          fields: [\r\n            {\r\n              key: 'index',\r\n              label: '#'\r\n            },\r\n            {\r\n              key: 'directorOrAccounterFullName',\r\n              label: this.$t('column.name')\r\n            },\r\n            {\r\n              key: 'inn',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'pnfl',\r\n              label: this.$t('column.personal_number'),\r\n            },\r\n          ]\r\n        },\r\n        {\r\n          key: \"accounter\",\r\n          title: this.$t('column.accounter'),\r\n          fields: [\r\n            {\r\n              key: 'index',\r\n              label: '#'\r\n            },\r\n            {\r\n              key: 'directorOrAccounterFullName',\r\n              label: this.$t('column.name')\r\n            },\r\n            {\r\n              key: 'inn',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'pnfl',\r\n              label: this.$t('column.personal_number'),\r\n            },\r\n          ]\r\n        },\r\n        {\r\n          key: \"founders\",\r\n          title: this.$t('column.founders'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            {\r\n              key: 'fullName',\r\n              label: this.$t('column.name'),\r\n            },\r\n            {\r\n              key: 'inn',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'pnfl',\r\n              label: this.$t('column.personal_number'),\r\n            },\r\n            {\r\n              key: 'founderType',\r\n              label: this.$t('column.type'),\r\n            },\r\n            {\r\n              key: 'founderSharePercent',\r\n              label: this.$t('column.share_percentage'),\r\n            },\r\n            {\r\n              key: 'founderShareSum',\r\n              label: this.$t('column.share_sum'),\r\n            },\r\n          ]\r\n        }\r\n      ],\r\n      tableInnerTabs: [\r\n        {\r\n          key: \"contractor\",\r\n          title: this.$t('column.business_entity'),\r\n          fields: [\r\n            {\r\n              key: 'index',\r\n              label: '#'\r\n            },\r\n            {\r\n              key: 'name',\r\n              label: this.$t('column.name')\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          key: \"prices\",\r\n          title: this.$t('column.prices'),\r\n          fields: [\r\n            { label: `${this.$t('column.price_approval_basis')} ${this.$t('column.date')}`, key: \"priceApprovalDate\" },\r\n            { label: `${this.$t('column.effective_date_price')}`, key: \"priceEffectiveDate\" },\r\n            {\r\n              label: `${this.$t('column.price_approval_basis')} ${this.$t('column.number')}`,\r\n              key: \"priceApprovalNumber\"\r\n            },\r\n            { label: `${this.$t('column.current_price_with_duty')}`, key: \"currentPriceWithDuty\" },\r\n            { label: `${this.$t('column.current_price_without_duty')}`, key: \"currentPriceWithoutDuty\" },\r\n            { label: `${this.$t('column.additional_info')}`, key: \"additionalInformation\" },\r\n          ]\r\n        },\r\n        {\r\n          key: \"announcedMedia\",\r\n          title: this.$t('column.announced_media'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            { label: this.$t('column.name'), key: \"announcedMediaName\" },\r\n            { label: this.$t('column.link'), key: \"announcedMediaLink\" },\r\n            { label: this.$t('column.date'), key: \"announcedMediaDate\" }\r\n          ]\r\n        },\r\n        {\r\n          key: \"comission\",\r\n          title: this.$t('column.commission_applications'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            { label: this.$t('column.number'), key: \"commencementNumber\" },\r\n            { label: this.$t('column.date'), key: \"commencementDate\" },\r\n            { label: this.$t('column.initiator'), key: \"initiatorName\" },\r\n            { label: this.$t('column.finishing_type'), key: \"completionWorkType\" },\r\n            { label: this.$t('column.finishing_date'), key: \"completionWorkDate\" },\r\n            { label: this.$t('column.showcase_amount'), key: \"instructionAmount\" },\r\n            { label: this.$t('column.remainder_amount'), key: \"residueAmount\" }\r\n          ]\r\n        },\r\n      ],\r\n      regionId: null,\r\n      loadingTableItems: false,\r\n      regions: [],\r\n      json_fields: {\r\n        \"Order Number\": \"orderNumber\",\r\n        \"Reestr Accepted Date\": \"reestrAcceptedDate\",\r\n        \"Reestr Closed Date\": \"reestrClosedDate\",\r\n        \"Contractor FullName\": \"contractorFullName\",\r\n        \"Government Percentage\": \"governmentPercentage\",\r\n        \"Status\": \"status\",\r\n        \"Product or Service Type\": \"productOrServiceType\",\r\n        \"Product or Services\": \"productOrServices\",\r\n        \"Unit\": \"unit\",\r\n        \"Oked\": \"oked\",\r\n        \"Skp\": \"skp\",\r\n        \"Tnved\": \"tnved\",\r\n        \"Comment\": \"comment\",\r\n      },\r\n      json_data: [],\r\n      json_meta: [\r\n        [\r\n          {\r\n            key: \"charset\",\r\n            value: \"utf-8\",\r\n          },\r\n        ],\r\n      ],\r\n      searchKeyword: '',\r\n      selected: 20,\r\n      optionsTable: [\r\n        { value: 20, text: 20 },\r\n        { value: 50, text: 50 },\r\n        { value: 100, text: 100 },\r\n        { value: 150, text: 150 },\r\n        { value: 200, text: 200 },\r\n      ],\r\n      activeDep: {},\r\n      tableItems: [],\r\n      totalItems: 0,\r\n      tableFields: [\r\n        {\r\n          label: \"#\",\r\n          thClass: \"text-center\",\r\n          tdClass: \"text-center\",\r\n          sortable: false,\r\n          key: \"index\",\r\n        },\r\n        {\r\n          label: this.$t('column.actions'),\r\n          key: \"actions\",\r\n          thClass: \"text-center\",\r\n          tdClass: \"text-center\",\r\n          sortable: false\r\n        },\r\n        { label: this.$t('column.order_number'), key: \"orderNumber\" },\r\n        { label: this.$t('column.added_date_to_reestr'), key: \"reestrAcceptedDate\" },\r\n        { label: this.$t('column.removed_date_from_reestr'), key: \"reestrClosedDate\" },\r\n        { label: this.$t('column.business_entity'), key: \"contractorFullName\" },\r\n        { label: this.$t('column.region'), key: \"region\" },\r\n        { label: this.$t('column.government_percentage'), key: \"governmentPercentage\" },\r\n        { label: this.$t('column.founders_percentage'), key: \"foundersPercentage\" },\r\n        { label: this.$t('column.document_type'), key: \"documentType\" },\r\n        { label: this.$t('column.status'), key: \"status\" },\r\n        { label: this.$t('column.product_or_service_type'), key: \"productOrServiceType\" },\r\n        { label: this.$t('submodules.product_or_services.title'), key: \"productOrServices\" },\r\n        { label: this.$t('column.unit'), key: \"unit\" },\r\n        { label: this.$t('column.oked'), key: \"oked\" },\r\n        { label: this.$t('column.comment'), key: \"comment\" },\r\n        { label: this.$t('column.last_modified_by'), key: \"lastModifiedBy\" },\r\n        { label: this.$t('column.approved_by'), key: \"approvedBy\" },\r\n      ],\r\n      /* mediaTableFields: [\r\n          {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n          },\r\n          { label: this.$t('column.name'), key: \"announcedMediaName\" },\r\n          { label: this.$t('column.link'), key: \"announcedMediaLink\" },\r\n          { label: this.$t('column.date'), key: \"announcedMediaDate\" }\r\n      ],\r\n      comissionTableFields: [\r\n          {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n          },\r\n          { label: this.$t('column.number'), key: \"commencementNumber\" },\r\n          { label: this.$t('column.date'), key: \"commencementDate\" },\r\n          { label: this.$t('column.initiator'), key: \"initiatorName\" },\r\n          { label: this.$t('column.finishing_type'), key: \"completionWorkType\" },\r\n          { label: this.$t('column.finishing_date'), key: \"completionWorkDate\" },\r\n          { label: this.$t('column.showcase_amount'), key: \"instructionAmount\" },\r\n          { label: this.$t('column.remainder_amount'), key: \"residueAmount\" }\r\n      ] */\r\n    };\r\n  },\r\n  /*\r\n  COMPUTED */\r\n  computed: {\r\n    /* activeInnerTab () {\r\n        return this.tableInnerTabs[this.activeTabIdxOfInnerTabs].key\r\n    },\r\n    activeContractorTab () {\r\n        return this.contractorTabs[this.activeTabIdxForContractor].key\r\n    }, */\r\n    numberOfPages() {\r\n      return (!this.totalItems || this.totalItems <= 0 || this.totalItems < this.var_default_search_payload.itemsPerPage) ? 1 : this.totalItems / this.var_default_search_payload.itemsPerPage\r\n    },\r\n    isDominant() {\r\n      return this.$route.name === 'ReestrHistoryForContractorDominant'\r\n    },\r\n    isNatural() {\r\n      return this.$route.name === 'ReestrHistoryForContractorNatural'\r\n    },\r\n    isDominantRepublic() {\r\n      return this.$route.name === 'ReestrHistoryForRepublicContractorDominant'\r\n    },\r\n    isNaturalRepublic() {\r\n      return this.$route.name === 'ReestrHistoryForRepublicContractorNatural'\r\n    },\r\n    jsonFieldsComputed() {\r\n      let tmp = {}\r\n      this.tableFields.forEach((field, index) => {\r\n        if (index != 0 && index != this.tableFields.length - 1) {\r\n          tmp[field.label] = field.key\r\n        }\r\n      })\r\n      return tmp\r\n    },\r\n    canUpdateReestr() {\r\n      if (this.isDominant || this.isDominantRepublic) {\r\n        return this.$can('update', 'contractor reestr document for acceptance daminiriushiy')\r\n      } else if (this.isNatural || this.isNaturalRepublic) {\r\n        return this.$can('update', 'contractor reestr document for acceptance estestveniy')\r\n      }\r\n      return false\r\n    },\r\n    canApproveReestr() {\r\n      return this.$can('contractor', 'reestr document confirmation')\r\n    }\r\n  },\r\n  methods: {\r\n    approveReestrDoc(doc) {\r\n      this.$bvModal.msgBoxConfirm(this.$t('messages.you_sure_title'), {\r\n        okTitle: this.$t('actions.confirm'),\r\n        cancelTitle: this.$t('actions.cancel')\r\n      })\r\n          .then(value => {\r\n            if (value) {\r\n              helperService\r\n                  .approveReestrDoc(doc.id)\r\n                  .then((res) => {\r\n                    this.fetchTableItems()\r\n                  })\r\n                  .catch(e => {\r\n                    console.log(e)\r\n                  })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            // An error occurred\r\n          })\r\n    },\r\n    activeInnerTab(activeTabIdxOfInnerTabs) {\r\n      return this.tableInnerTabs[activeTabIdxOfInnerTabs].key\r\n    },\r\n    activeContractorTab(activeTabIdxForContractor) {\r\n      return this.contractorTabs[activeTabIdxForContractor].key\r\n    },\r\n    setRowsInnerTabsData(item, index, selectedTabIndex, isForContractor = false, isForFounders = false, founderTabIndex = 0) {\r\n      if (this.tableInnerTabs[selectedTabIndex].key === 'contractor' || isForContractor) {\r\n        this.$set(item, 'loadingInnerData', true)\r\n        if (this.contractorTabs[selectedTabIndex].key === 'generalInfo') {\r\n          this.$set(item, 'contractorTabItems', [item.contractorDto])\r\n          this.$set(item, 'loadingInnerData', false)\r\n        } else if (this.contractorTabs[selectedTabIndex].key === 'director') {\r\n          helperService.getContractorDirector(item.contractorDto.id)\r\n              .then(res => {\r\n                this.$set(item, 'contractorTabItems', [res.data])\r\n              })\r\n              .catch(e => {\r\n                this.$set(item, 'contractorTabItems', [])\r\n                console.log(e)\r\n              })\r\n              .finally(() => {\r\n                this.$set(item, 'loadingInnerData', false)\r\n              })\r\n        } else if (this.contractorTabs[selectedTabIndex].key === 'accounter') {\r\n          helperService.getContractorAccounter(item.contractorDto.id)\r\n              .then(res => {\r\n                this.$set(item, 'contractorTabItems', [res.data])\r\n              })\r\n              .catch(e => {\r\n                this.$set(item, 'contractorTabItems', [])\r\n                console.log(e)\r\n              })\r\n              .finally(() => {\r\n                this.$set(item, 'loadingInnerData', false)\r\n              })\r\n        } else if (this.contractorTabs[selectedTabIndex].key === 'founders') {\r\n          if (isForFounders && item.foundersFullData) {\r\n            if (this.founderTabs[item.activeTabIdxForContractorFounder].key === 'legal') {\r\n              this.$set(item, 'contractorTabItems', item.foundersFullData.founderLegalDto)\r\n            } else if (this.founderTabs[item.activeTabIdxForContractorFounder].key === 'individual') {\r\n              this.$set(item, 'contractorTabItems', item.foundersFullData.founderIndividualDto)\r\n            }\r\n            this.$set(item, 'loadingInnerData', false)\r\n          } else {\r\n            helperService.getContractorFounders(item.contractorDto.id)\r\n                .then(res => {\r\n                  this.$set(item, 'foundersFullData', res.data)\r\n                  if (this.founderTabs[item.activeTabIdxForContractorFounder].key === 'legal') {\r\n                    this.$set(item, 'contractorTabItems', res.data.founderLegalDto)\r\n                  } else if (this.founderTabs[item.activeTabIdxForContractorFounder].key === 'individual') {\r\n                    this.$set(item, 'contractorTabItems', res.data.founderIndividualDto)\r\n                  }\r\n                })\r\n                .catch(e => {\r\n                  this.$set(item, 'foundersFullData', null)\r\n                  this.$set(item, 'contractorTabItems', [])\r\n                  console.log(e)\r\n                })\r\n                .finally(() => {\r\n                  this.$set(item, 'loadingInnerData', false)\r\n                })\r\n          }\r\n        }\r\n      } else if (this.tableInnerTabs[selectedTabIndex].key === 'prices') {\r\n        this.$set(item, 'innerTabItems', item.priceApprovalDtos)\r\n      } else if (this.tableInnerTabs[selectedTabIndex].key === 'announcedMedia') {\r\n        this.$set(item, 'innerTabItems', item.announcedMediaDtos)\r\n      } else if (this.tableInnerTabs[selectedTabIndex].key === 'comission') {\r\n        this.$set(item, 'innerTabItems', item.commissionApplicationDtos)\r\n      }\r\n    },\r\n    rowClicked(item, index) {\r\n      this.$set(item, '_showDetails', !item._showDetails)\r\n      if (!item.activeTabIdxOfInnerTabs) {\r\n        this.$set(item, 'activeTabIdxOfInnerTabs', 0)\r\n      }\r\n      if (!item.activeTabIdxForContractor) {\r\n        this.$set(item, 'activeTabIdxForContractor', 0)\r\n      }\r\n      if (!item.activeTabIdxForContractorFounder) {\r\n        this.$set(item, 'activeTabIdxForContractorFounder', 0)\r\n      }\r\n      this.setRowsInnerTabsData(item, index, 0, true)\r\n      // this.fetchReestrDocsByTypeId(null, item.typeId, index)\r\n    },\r\n    fetchReestrDocsByTypeId(toggleDetails, typeId, index) {\r\n      if (toggleDetails) {\r\n        toggleDetails()\r\n      }\r\n      this.$set(this.tableItems[index], 'loadingInnerData', true)\r\n      crudAndListsService\r\n          .searchList(MAIN_API_URL, null, `${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}?regionId=${this.regionId}&typeId=${typeId}`)\r\n          .then((res) => {\r\n            this.$set(this.tableItems[index], 'reestr', res.data)\r\n          })\r\n          .catch(e => {\r\n            this.$set(this.tableItems[index], 'reestr', [])\r\n          })\r\n          .finally(() => {\r\n            this.$set(this.tableItems[index], 'loadingInnerData', false)\r\n          })\r\n    },\r\n    async regionSelected($event, dontResetDistrict = false) {\r\n      if ($event) {\r\n        this.fetchTableItems()\r\n      }\r\n    },\r\n    downloadExcel() {\r\n      this.json_data = []\r\n      this.tableItems.forEach(res => {\r\n        let obj = {}\r\n        obj.orderNumber = res.orderNumber\r\n        obj.reestrAcceptedDate = res.reestrAcceptedDate\r\n        obj.reestrClosedDate = res.reestrClosedDate\r\n        obj.contractorFullName = res.contractorDto.fullName + '-' + res.contractorDto.inn\r\n        obj.governmentPercentage = res.governmentPercentage\r\n        obj.documentType = res.documentType\r\n        obj.status = this.getName({\r\n          nameLt: res.documentStatusNameLt,\r\n          nameUz: res.documentStatusNameUz,\r\n          nameRu: res.documentStatusNameRu\r\n        })\r\n        obj.productOrServiceType = this.getName({\r\n          nameLt: res.directoryProductOrServiceTypeDto.nameLt,\r\n          nameUz: res.directoryProductOrServiceTypeDto.nameUz,\r\n          nameRu: res.directoryProductOrServiceTypeDto.nameRu\r\n        })\r\n        obj.productOrServices = this.getName({\r\n          nameLt: res.directoryProductOrServiceDto.nameLt,\r\n          nameUz: res.directoryProductOrServiceDto.nameUz,\r\n          nameRu: res.directoryProductOrServiceDto.nameRu\r\n        })\r\n        obj.unit = this.getName({ nameLt: res.unitNameLt, nameUz: res.unitNameUz, nameRu: res.unitNameRu })\r\n        obj.skp = res.infoSKPDto ? res.infoSKPDto.code + '-' + this.getName({\r\n          nameLt: res.infoSKPDto.nameLt,\r\n          nameUz: res.infoSKPDto.nameUz,\r\n          nameRu: res.infoSKPDto.nameRu\r\n        }) : ''\r\n        obj.oked = res.infoOkedDto ? res.infoOkedDto.code + '-' + this.getName({\r\n          nameLt: res.infoOkedDto.nameLt,\r\n          nameUz: res.infoOkedDto.nameUz,\r\n          nameRu: res.infoOkedDto.nameRu\r\n        }) : ''\r\n        obj.tnved = res.infoTNVEDDto ? res.infoTNVEDDto.code + '-' + this.getName({\r\n          nameLt: res.infoTNVEDDto.nameLt,\r\n          nameUz: res.infoTNVEDDto.nameUz,\r\n          nameRu: res.infoTNVEDDto.nameRu\r\n        }) : ''\r\n        obj.comment = res.comment\r\n        obj.lastModifiedBy = `${res.updatedByEmployeeFullName ? (res.updatedByEmployeeFullName + ' ' + (res.updatedByDirectoryPositionNameUz ? ('(' + res.updatedByDirectoryPositionNameUz + ', ' + this.$t('auth.username') + ' - ' + res.updatedByUserName + ')') : '')) : this.$t('auth.username') + ' - ' + res.updatedByUserName + ' ' + (res.updatedByDate ? res.updatedByDate : '')}`\r\n        obj.approvedBy = `${res.confirmedByEmployeeFullName ? (res.confirmedByEmployeeFullName + ' ' + (res.confirmedByDirectoryPositionNameUz ? ('(' + res.confirmedByDirectoryPositionNameUz + ', ' + this.$t('auth.username') + ' - ' + res.confirmedByUserName + ')') : '')) : this.$t('auth.username') + ' - ' + res.confirmedByUserName + ' ' + (res.confirmedByDate ? res.confirmedByDate : '')}`\r\n        obj.foundersPercentage = ''\r\n        res.contractorDto.foundersDtos.forEach(el => {\r\n          obj.foundersPercentage += `${el.founderName} (${el.percentage}), `\r\n        })\r\n        obj.region = ''\r\n        res.regionDtos.forEach(el => {\r\n          obj.region += `${this.getName({ nameLt: el.nameLt, nameUz: el.nameUz, nameRu: el.nameRu })}, `\r\n        })\r\n        if (this.isDominant || this.isNatural) {\r\n          obj.district = ''\r\n          res.districtDtos.forEach(el => {\r\n            obj.district += `${this.getName({ nameLt: el.nameLt, nameUz: el.nameUz, nameRu: el.nameRu })}, `\r\n          })\r\n        }\r\n        if (this.isNatural || this.isNaturalRepublic) {\r\n          obj.priceApprovalDate = res.priceApprovalDate\r\n          obj.priceEffectiveDate = res.priceEffectiveDate\r\n          obj.priceApprovalNumber = res.priceApprovalNumber\r\n          obj.currentPriceWithDuty = res.currentPriceWithDuty\r\n          obj.currentPriceWithoutDuty = res.currentPriceWithoutDuty\r\n          obj.additionalInformation = res.additionalInformation\r\n        }\r\n        this.json_data.push(obj)\r\n      })\r\n    },\r\n    selectList($event) {\r\n      if ($event === 'all') {\r\n        this.var_default_search_payload.itemsPerPage = this.totalItems\r\n      } else {\r\n        this.var_default_search_payload.itemsPerPage = $event\r\n      }\r\n      this.fetchTableItems();\r\n    },\r\n    async fetchTableItems() {\r\n      if (this.isDominantRepublic || this.isNaturalRepublic) {\r\n        this.loadingTableItems = true\r\n        helperService\r\n            .searchReestrHistoryListByContractorId(`${this.isDominantRepublic ? APPEND_API_URL_DOMINANT : this.isNaturalRepublic ? APPEND_API_URL_NATURAL : ''}?contractorId=${this.$route.params.id}`, true)\r\n            .then((res) => {\r\n              this.tableItems = res.data;\r\n            })\r\n            .catch(e => {\r\n              this.tableItems = [];\r\n            })\r\n            .finally(() => {\r\n              this.loadingTableItems = false\r\n            })\r\n      } else {\r\n        this.loadingTableItems = true\r\n        // this.var_default_search_payload.keyword = this.searchKeyword\r\n        /* this.var_default_search_payload.sortDesc.push(false)\r\n        if (this.$i18n.locale === 'uz') {\r\n            this.var_default_search_payload.sortBy.push('nameLt')\r\n        } else if (this.$i18n.locale === 'ru') {\r\n            this.var_default_search_payload.sortBy.push('nameRu')\r\n        } else if (this.$i18n.locale === 'uzCyrillic') {\r\n            this.var_default_search_payload.sortBy.push('nameUz')\r\n        } */\r\n        crudAndListsService\r\n            .searchList(MAIN_API_URL, this.var_default_search_payload, `${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}?contractorId=${this.$route.params.id}`, true)\r\n            .then((res) => {\r\n              this.tableItems = res.data;\r\n            })\r\n            .catch(e => {\r\n              this.tableItems = [];\r\n            })\r\n            .finally(() => {\r\n              this.loadingTableItems = false\r\n            })\r\n      }\r\n    },\r\n    editItem(item) {\r\n      if (item.documentType === 'KIRITISH') {\r\n        this.$router.push(this.isDominant || this.isDominantRepublic ? {\r\n          name: 'UpdateDominantContractorReestr',\r\n          params: { id: item.id }\r\n        } : { name: 'UpdateNaturalContractorReestr', params: { id: item.id } })\r\n      } else if (item.documentType === 'CHIQARISH') {\r\n        this.$router.push(this.isDominant || this.isDominantRepublic ? {\r\n          name: 'UpdateRemoveDocDominantContractorReestr',\r\n          params: { id: item.id }\r\n        } : { name: 'UpdateRemoveDocNaturalContractorReestr', params: { id: item.id } })\r\n      }\r\n    }\r\n  },\r\n  /* CREATED */\r\n  created() {\r\n    if (this.isDominant || this.isDominantRepublic) {\r\n      this.tableFields.splice(12, 0, { label: this.$t('column.skp_code'), key: \"skp\" },\r\n          { label: this.$t('column.tnved_code'), key: \"tnved\" })\r\n    }\r\n    if (this.isDominant || this.isNatural) {\r\n      this.tableFields.splice(6, 0, { label: this.$t('column.district'), key: \"district\" })\r\n    }\r\n    /* if (this.isNatural || this.isNaturalRepublic) {\r\n        this.tableFields.splice(this.tableFields.length - 1, 0,\r\n            { label: `${this.$t('column.price_approval_basis')} ${this.$t('column.date')}`, key: \"priceApprovalDate\" },\r\n            { label: `${this.$t('column.effective_date_price')}`, key: \"priceEffectiveDate\" },\r\n            { label: `${this.$t('column.price_approval_basis')} ${this.$t('column.number')}`, key: \"priceApprovalNumber\" },\r\n            { label: `${this.$t('column.current_price_with_duty')}`, key: \"currentPriceWithDuty\" },\r\n            { label: `${this.$t('column.current_price_without_duty')}`, key: \"currentPriceWithoutDuty\" },\r\n            { label: `${this.$t('column.additional_info')}`, key: \"additionalInformation\" },\r\n        )\r\n    } */\r\n    this.fetchTableItems()\r\n  },\r\n  /*\r\n  WATCH */\r\n  watch: {\r\n    /* 'var_default_search_payload.page': {\r\n        handler () {\r\n            this.fetchTableItems()\r\n        }\r\n    } */\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.a-tag-underline-hover {\r\n  :hover {\r\n    text-decoration: underline !important;\r\n  }\r\n}\r\n\r\nul {\r\n  padding-left: 20px;\r\n}\r\n</style>"]}]}