{"remainingRequest":"D:\\ACRU\\interactive-services\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ACRU\\interactive-services\\src\\shared\\views\\components\\CreateFormContractor.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\ACRU\\interactive-services\\src\\shared\\views\\components\\CreateFormContractor.vue","mtime":1709020148563},{"path":"D:\\ACRU\\interactive-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ACRU\\interactive-services\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovKiogWU9VIE1VU1QgU0VORCB7eyBNQUlOX0FQSV9VUkwgfX0gVE8gQ1JVRF9TRVJWSUNFICovDQppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UiDQppbXBvcnQgaGVscGVyU2VydmljZSBmcm9tICJAL3NoYXJlZC9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSINCmNvbnN0IE1BSU5fQVBJX1VSTCA9ICdjb250cmFjdG9yJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiQ3JlYXRlRm9ybUNvbnRyYWN0b3IiLA0KICAvKiogUFJPUFMgKi8NCiAgcHJvcHM6IHsNCiAgICBjdXN0b21Jc01vZGVDcmVhdGU6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgLyoqIENPTVBPTkVOVFMgKi8NCiAgY29tcG9uZW50czoge30sDQogIC8qKiBEQVRBICovDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvdW5kZXJzRmllbGRzOiBbDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogIiMiLA0KICAgICAgICAgIHRoQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsDQogICAgICAgICAgdGRDbGFzczogInRleHQtY2VudGVyIiwNCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsDQogICAgICAgICAga2V5OiAiaW5kZXgiLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAnZnVsbE5hbWUnLA0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ubmFtZScpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAnaW5uJywNCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmlubicpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAncG5mbCcsDQogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5wZXJzb25hbF9udW1iZXInKSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGtleTogJ3R5cGUnLA0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4udHlwZScpLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAnZm91bmRlclNoYXJlUGVyY2VudCcsDQogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5zaGFyZV9wZXJjZW50YWdlJyksDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICdmb3VuZGVyU2hhcmVTdW0nLA0KICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uc2hhcmVfc3VtJyksDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgb3JpZ2luYWxEdG86IHsNCiAgICAgICAgYWRkcmVzc0R0bzoge30sDQogICAgICAgIGZvdW5kZXJzRHRvczogW10NCiAgICAgIH0sDQogICAgICBvcmlnaW5hbElubjogbnVsbCwNCiAgICAgIG9yaWdpbmFsUGluZmw6IG51bGwsDQogICAgICAvLyBDT05UUkFDVE9SIFNFTEVDVF9BTkRfQ1JFQVRFIFZBUlMNCiAgICAgIGhhc05leHRQYWdlQ29udHJhY3RvcnM6IGZhbHNlLA0KICAgICAgY29udHJhY3RvcnM6IFtdLA0KICAgICAgZGVib3VuY2U6IG51bGwsDQogICAgICBpc0xvYWRpbmdDb250cmFjdG9yczogZmFsc2UsDQogICAgICBjb250cmFjdG9yQ3JlYXRlTW9kYWw6IGZhbHNlLA0KICAgICAgY29udHJhY3RvclNlYXJjaFBheWxvYWQ6IHt9LA0KICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICBmb3JtT2ZPd25lcnNoaXBzOiBbXSwNCiAgICAgIHJlZ2lvbnM6IFtdLA0KICAgICAgZGlzdHJpY3RzOiBbXSwNCiAgICAgIHN0YXR1c2VzOiBbXSwNCiAgICAgIGVkaXRpbmdJdGVtOiB7DQogICAgICAgIGlzWXVyOiB0cnVlLA0KICAgICAgICBhZGRyZXNzRHRvOiB7fSwNCiAgICAgICAgZm91bmRlcnNEdG9zOiBbXQ0KICAgICAgfSwNCiAgICAgIGRlZmF1bHRGb3VuZGVyOiB7DQogICAgICAgIGZvdW5kZXJOYW1lOiBudWxsLA0KICAgICAgICBwZXJjZW50YWdlOiBudWxsDQogICAgICB9DQogICAgfQ0KICB9LA0KICAvKiogQ09NUFVURUQgKi8NCiAgY29tcHV0ZWQ6IHsNCiAgICBpc01vZGVDcmVhdGUoKSB7DQogICAgICByZXR1cm4gdGhpcy5jdXN0b21Jc01vZGVDcmVhdGUgPyB0aGlzLmN1c3RvbUlzTW9kZUNyZWF0ZSA6IHRoaXMuJHJvdXRlLm5hbWUgPT09ICdDcmVhdGVDb250cmFjdG9yJw0KICAgIH0sDQogICAgY29tcHV0ZWRPYnNlcnZlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm9ic2VydmVyDQogICAgfSwNCiAgICBjb21wdXRlZEZvdW5kZXJzRHRvcygpew0KICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0ucmVnQ29udHJhY3RvckR0bz8uZm91bmRlcnM/Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdGluZ0l0ZW0ucmVnQ29udHJhY3RvckR0by5mb3VuZGVycy5tYXAoKGZvdW5kZXIsIGluZGV4KSA9PiB7DQogICAgICAgICAgaWYgKGZvdW5kZXIuZm91bmRlckluZGl2aWR1YWwpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgIGluZGV4OiBpbmRleCwNCiAgICAgICAgICAgICAgZnVsbE5hbWU6IGAke2ZvdW5kZXIuZm91bmRlckluZGl2aWR1YWwubGFzdE5hbWV9ICR7Zm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC5maXJzdE5hbWV9ICR7Zm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC5taWRkbGVOYW1lfWAsDQogICAgICAgICAgICAgIGlubjogZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC50aW4gPz8gbnVsbCwNCiAgICAgICAgICAgICAgcG5mbDogZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbC5waW5mbCA/PyBudWxsLA0KICAgICAgICAgICAgICB0eXBlOiBudWxsLA0KICAgICAgICAgICAgICBpc0xlZ2FsOiBmYWxzZSwNCiAgICAgICAgICAgICAgZm91bmRlclNoYXJlUGVyY2VudDogZm91bmRlci5mb3VuZGVySW5kaXZpZHVhbD8uZm91bmRlclNoYXJlUGVyY2VudCA/PyBudWxsLA0KICAgICAgICAgICAgICBmb3VuZGVyU2hhcmVTdW06IGZvdW5kZXIuZm91bmRlckluZGl2aWR1YWw/LmZvdW5kZXJTaGFyZVN1bSA/PyBudWxsLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoZm91bmRlci5mb3VuZGVyTGVnYWwpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgIGluZGV4OiBpbmRleCwNCiAgICAgICAgICAgICAgZnVsbE5hbWU6IGZvdW5kZXIuZm91bmRlckxlZ2FsPy5uYW1lID8/IG51bGwsDQogICAgICAgICAgICAgIGlubjogZm91bmRlci5mb3VuZGVyTGVnYWw/LnRpbiA/PyBudWxsLA0KICAgICAgICAgICAgICBwbmZsOiBudWxsLA0KICAgICAgICAgICAgICB0eXBlOiBudWxsLA0KICAgICAgICAgICAgICBpc0xlZ2FsOiB0cnVlLA0KICAgICAgICAgICAgICBmb3VuZGVyU2hhcmVQZXJjZW50OiBmb3VuZGVyLmZvdW5kZXJMZWdhbD8uZm91bmRlclNoYXJlUGVyY2VudCA/PyBudWxsLA0KICAgICAgICAgICAgICBmb3VuZGVyU2hhcmVTdW06IGZvdW5kZXIuZm91bmRlckxlZ2FsPy5mb3VuZGVyU2hhcmVTdW0gPz8gbnVsbCwNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgICByZXR1cm4gdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MNCiAgICB9LA0KICB9LA0KICAvKiogTUVUSE9EUyAqLw0KICBtZXRob2RzOiB7DQogICAgLy8gQ09OVFJBQ1RPUiBTRUxFQ1RfQU5EX0NSRUFURSBNRVRIT0RTDQogICAgY29udHJhY3RvclJlYWNoZWRFbmRPZkxpc3QoZSkgew0KICAgICAgaWYgKGUgJiYgIXRoaXMuaXNMb2FkaW5nQ29udHJhY3RvcnMpIHsNCiAgICAgICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGRlYm91bmNlU2VhcmNoQ29udHJhY3RvcnMoc2VhcmNoVGV4dCkgew0KICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2UpOw0KICAgICAgdGhpcy5kZWJvdW5jZSA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICBhd2FpdCB0aGlzLmZldGNoQ29udHJhY3RvcnNXaXRoS2V5d29yZChzZWFyY2hUZXh0KTsNCiAgICAgIH0sIDEwMDApOw0KICAgIH0sDQogICAgY3VzdG9tTGFiZWxDb250cmFjdG9yKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5jb250cmFjdG9ycy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHtzZWxlY3RlZC5mdWxsTmFtZX1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBmZXRjaENvbnRyYWN0b3JzV2l0aEtleXdvcmQoa2V5d29yZCwgbWFrZUZpcnN0U2VsZWN0ZWQgPSBmYWxzZSkgew0KICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgPSAxDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLmtleXdvcmQgPSBrZXl3b3JkID8ga2V5d29yZCA6ICcnDQogICAgICB0aGlzLmZldGNoQ29udHJhY3RvcnMobWFrZUZpcnN0U2VsZWN0ZWQpDQogICAgfSwNCiAgICBhc3luYyBmZXRjaENvbnRyYWN0b3JzKG1ha2VGaXJzdFNlbGVjdGVkKSB7DQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnRCeSA9IFtdDQogICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnNvcnRCeS5wdXNoKCdjcmVhdGVkJykNCiAgICAgIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuc29ydERlc2MgPSBbXQ0KICAgICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5zb3J0RGVzYy5wdXNoKHRydWUpDQogICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gdHJ1ZQ0KICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5zZWFyY2hMaXN0V2l0aEtleXdvcmQoJ2NvbnRyYWN0b3InLCB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLCAnYnktY29udHJhY3RvcicsICF0aGlzLmN1c3RvbUlzTW9kZUNyZWF0ZSkNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycy5wdXNoKC4uLnJlcy5kYXRhLmxpc3QpDQogICAgICAgICAgICB0aGlzLmhhc05leHRQYWdlQ29udHJhY3RvcnMgPSByZXMuZGF0YS50b3RhbCAvIHRoaXMuY29udHJhY3RvclNlYXJjaFBheWxvYWQuaXRlbXNQZXJQYWdlID4gdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZC5wYWdlDQogICAgICAgICAgICB0aGlzLmNvbnRyYWN0b3JTZWFyY2hQYXlsb2FkLnBhZ2UgKz0gMQ0KICAgICAgICAgICAgaWYgKG1ha2VGaXJzdFNlbGVjdGVkKSB7DQogICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0ucGFyZW50SWQgPSB0aGlzLmNvbnRyYWN0b3JzLmxlbmd0aCA/IHRoaXMuY29udHJhY3RvcnNbMF0uaWQgOiBudWxsDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycyA9IFtdDQogICAgICAgICAgfSkNCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZ0NvbnRyYWN0b3JzID0gZmFsc2UNCiAgICAgICAgICB9KQ0KICAgIH0sDQogICAgbmV3UmVmQ3JlYXRlZChmb3JtTmFtZSkgew0KICAgICAgaWYgKGZvcm1OYW1lID09PSAnQ3JlYXRlRm9ybUNvbnRyYWN0b3InKSB7DQogICAgICAgIHRoaXMuZmV0Y2hDb250cmFjdG9yc1dpdGhLZXl3b3JkKCcnLCB0cnVlKQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgYWRkRm91bmRlckR0bygpIHsNCiAgICAgIGxldCB0bXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRGb3VuZGVyKQ0KICAgICAgdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MucHVzaCh0bXApDQogICAgfSwNCiAgICBzZXREZWZhdWx0QWN0aXZlU3RhdHVzKCkgew0KICAgICAgbGV0IGFjdGl2ZVN0YXR1cyA9IHRoaXMuc3RhdHVzZXMuZmluZChlbCA9PiBlbC5jb2RlID09PSAnQUNUSVZFJykNCiAgICAgIGlmIChhY3RpdmVTdGF0dXMpIHsNCiAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5zdGF0dXNJZCA9IGFjdGl2ZVN0YXR1cy5pZA0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgcmVnaW9uU2VsZWN0ZWQoJGV2ZW50LCBkb250UmVzZXREaXN0cmljdCA9IGZhbHNlKSB7DQogICAgICBpZiAoIWRvbnRSZXNldERpc3RyaWN0KSB7DQogICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uYWRkcmVzc0R0by5kaXN0cmljdElkID0gbnVsbA0KICAgICAgfQ0KICAgICAgLy8gR0VUIERJU1RSSUNUUw0KICAgICAgaWYgKCRldmVudCkNCiAgICAgICAgYXdhaXQgaGVscGVyU2VydmljZS5nZXRHZW9Mb2NhdGlvbnNCeVBhcmVudElkKCRldmVudCkNCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMuZGlzdHJpY3RzID0gcmVzLmRhdGENCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgdmFsaWRhdGVJbm4oKSB7DQogICAgICBsZXQgcmVzID0gYXdhaXQgaGVscGVyU2VydmljZS52YWxpZGF0ZUlubkZyb21BcGkodGhpcy5lZGl0aW5nSXRlbS5pbm4pDQogICAgICBpZiAoIXJlcy5kYXRhKSB7DQogICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5zZXRFcnJvcnMoe0lOTjogW3RoaXMuJHQoJ3ZhbGlkYXRvci5pbm4nKV19KTsNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXMuZGF0YQ0KICAgIH0sDQogICAgYXN5bmMgdmFsaWRhdGVQaW5mbCgpIHsNCiAgICAgIGlmICghdGhpcy5lZGl0aW5nSXRlbS5waW5mbCkgew0KICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHtwaW5mbDogW3RoaXMuJHQoJ3ZhbGlkYXRvci5yZXF1aXJlZCcpXX0pOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0ucGluZmwubGVuZ3RoICE9PSAxNCkgew0KICAgICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHtwaW5mbDogW3RoaXMuJHQoJ3ZhbGlkYXRvci5yZWdleCcpXX0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2V0Rm91bmRlcnNGcm9tU29saXEoZm91bmRlcnNGcm9tU29saXEgPSBbXSkgew0KICAgICAgbGV0IGZvdW5kZXJzRHRvcyA9IGZvdW5kZXJzRnJvbVNvbGlxLmZpbHRlcihlbCA9PiB7DQogICAgICAgIGxldCBmb3VuZGVyRHRvID0gew0KICAgICAgICAgIGNvbnRyYWN0b3JJZDogbnVsbCwNCiAgICAgICAgICBmb3VuZGVyQWRkcmVzc0lkOiBudWxsLA0KICAgICAgICAgIGZvdW5kZXJDb250YWN0SWQ6IG51bGwsDQogICAgICAgICAgZm91bmRlckluZGl2aWR1YWxJZDogbnVsbCwNCiAgICAgICAgICBmb3VuZGVyTGVnYWxJZDogbnVsbCwNCiAgICAgICAgICBmb3VuZGVyU2hhcmVQZXJjZW50OiBlbC5mb3VuZGVySW5kaXZpZHVhbCA/IGVsLmZvdW5kZXJJbmRpdmlkdWFsLmZvdW5kZXJTaGFyZVBlcmNlbnQgOiBlbC5mb3VuZGVyTGVnYWwgPyBlbC5mb3VuZGVyTGVnYWwuZm91bmRlclNoYXJlUGVyY2VudCA6IG51bGwsDQogICAgICAgICAgZm91bmRlclNoYXJlU3VtOiBlbC5mb3VuZGVySW5kaXZpZHVhbCA/IGVsLmZvdW5kZXJJbmRpdmlkdWFsLmZvdW5kZXJTaGFyZVN1bSA6IGVsLmZvdW5kZXJMZWdhbCA/IGVsLmZvdW5kZXJMZWdhbC5mb3VuZGVyU2hhcmVTdW0gOiBudWxsLA0KICAgICAgICAgIGZ1bGxOYW1lOiBlbC5mb3VuZGVyTGVnYWwgPyBlbC5mb3VuZGVyTGVnYWwubmFtZSA6IGVsLmZvdW5kZXJJbmRpdmlkdWFsID8gYCR7ZWwuZm91bmRlckluZGl2aWR1YWwuZmlyc3ROYW1lfSAke2VsLmZvdW5kZXJJbmRpdmlkdWFsLmxhc3ROYW1lfSAke2VsLmZvdW5kZXJJbmRpdmlkdWFsLm1pZGRsZU5hbWUgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC5taWRkbGVOYW1lIDogJyd9YCA6IG51bGwsDQogICAgICAgICAgaWQ6IG51bGwsDQogICAgICAgICAgaW5uOiBlbC5mb3VuZGVyTGVnYWwgPyBlbC5mb3VuZGVyTGVnYWwudGluIDogZWwuZm91bmRlckluZGl2aWR1YWwgPyBlbC5mb3VuZGVySW5kaXZpZHVhbC50aW4gOiBudWxsLA0KICAgICAgICAgIGlzTGVnYWw6IGVsLmZvdW5kZXJMZWdhbCA/IHRydWUgOiBlbC5mb3VuZGVySW5kaXZpZHVhbCA/IGZhbHNlIDogbnVsbCwNCiAgICAgICAgICBwbmZsOiBlbC5mb3VuZGVySW5kaXZpZHVhbCA/IGVsLmZvdW5kZXJJbmRpdmlkdWFsLnBpbmZsIDogbnVsbCwNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZm91bmRlckR0by5pbm4pIHsNCiAgICAgICAgICByZXR1cm4gZm91bmRlckR0bw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdmb3VuZGVyc0R0b3MnLCBmb3VuZGVyc0R0b3MpOw0KICAgIH0sDQogICAgZmluZENvbnRyYWN0b3JCeUlubigpIHsNCiAgICAgIGlmICh0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuZmllbGRzLklOTi52YWxpZCkNCiAgICAgICAgaGVscGVyU2VydmljZS52YWxpZGF0ZUlubkZyb21BcGkodGhpcy5lZGl0aW5nSXRlbS5pbm4sIHRydWUpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHsNCiAgICAgICAgICAgICAgICBsZXQgaXNZdXIgPSB0aGlzLmVkaXRpbmdJdGVtLmlzWXVyOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkaXRpbmdJdGVtLmlubiAhPSB0aGlzLm9yaWdpbmFsSW5uKSB7DQogICAgICAgICAgICAgICAgICBoZWxwZXJTZXJ2aWNlLmdldENvbnRyYWN0b3JJbmZvQnlJbm5Gb3JDcmVhdGUodGhpcy5lZGl0aW5nSXRlbS5pbm4sIHRoaXMuZWRpdGluZ0l0ZW0ucGluZmwsIHRoaXMuZWRpdGluZ0l0ZW0uaXNZdXIsIHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCByZXMuZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uaXNZdXIgPSBpc1l1cg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0QWN0aXZlU3RhdHVzKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZFVENIIERJU1RSSUNUUw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RlZCh0aGlzLmVkaXRpbmdJdGVtLmFkZHJlc3NEdG8ucmVnaW9uSWQsIHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDSEVDSyBBTkQgU0VUIEZPVU5ERVJTIEZST00gU09MSVENCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5yZWdDb250cmFjdG9yRHRvICYmIHJlcy5kYXRhLnJlZ0NvbnRyYWN0b3JEdG8uZm91bmRlcnMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb3VuZGVyc0Zyb21Tb2xpcShyZXMuZGF0YS5yZWdDb250cmFjdG9yRHRvLmZvdW5kZXJzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb3VuZGVyc0Zyb21Tb2xpcSgpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIuc2V0RXJyb3JzKHsgSU5OOiBbdGhpcy4kdCgndmFsaWRhdG9yLmlubl9leGlzdCcpXSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBoZWxwZXJTZXJ2aWNlLmdldENvbnRyYWN0b3JJbmZvQnlJbm5Gb3JVcGRhdGUodGhpcy5lZGl0aW5nSXRlbS5pbm4sIHRoaXMuZWRpdGluZ0l0ZW0ucGluZmwsIHRoaXMuZWRpdGluZ0l0ZW0uaXNZdXIsIHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCByZXMuZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uaXNZdXIgPSBpc1l1cg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdhZGRyZXNzRHRvJywgdGhpcy5vcmlnaW5hbER0by5hZGRyZXNzRHRvKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdtb2JpbGVOdW1iZXInLCB0aGlzLm9yaWdpbmFsRHRvLm1vYmlsZU51bWJlcikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmVkaXRpbmdJdGVtLCAnZW1haWwnLCB0aGlzLm9yaWdpbmFsRHRvLmVtYWlsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdjYW5SZWdpc3RlcicsIHRoaXMub3JpZ2luYWxEdG8uY2FuUmVnaXN0ZXIpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERlZmF1bHRBY3RpdmVTdGF0dXMoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRkVUQ0ggRElTVFJJQ1RTDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lvblNlbGVjdGVkKHRoaXMuZWRpdGluZ0l0ZW0uYWRkcmVzc0R0by5yZWdpb25JZCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENIRUNLIEFORCBTRVQgRk9VTkRFUlMgRlJPTSBTT0xJUQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnJlZ0NvbnRyYWN0b3JEdG8gJiYgcmVzLmRhdGEucmVnQ29udHJhY3RvckR0by5mb3VuZGVycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvdW5kZXJzRnJvbVNvbGlxKHJlcy5kYXRhLnJlZ0NvbnRyYWN0b3JEdG8uZm91bmRlcnMpDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvdW5kZXJzRnJvbVNvbGlxKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5zZXRFcnJvcnMoeyBJTk46IFt0aGlzLiR0KCd2YWxpZGF0b3IuaW5uX2V4aXN0JyldIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZWRPYnNlcnZlci5zZXRFcnJvcnMoe0lOTjogW3RoaXMuJHQoJ3ZhbGlkYXRvci5pbm4nKV19KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgIH0pDQogICAgfSwNCiAgICBmaW5kQ29udHJhY3RvckJ5UGluZmwoKSB7DQogICAgICBpZiAodGhpcy5jb21wdXRlZE9ic2VydmVyLmZpZWxkcy5QSU5GTC52YWxpZCkNCiAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0ucGluZmwgIT09IHRoaXMub3JpZ2luYWxQaW5mbCkgew0KICAgICAgICAgIGxldCBpc1l1ciA9IHRoaXMuZWRpdGluZ0l0ZW0uaXNZdXI7DQogICAgICAgICAgaGVscGVyU2VydmljZS5nZXRDb250cmFjdG9ySW5mb0J5SW5uRm9yQ3JlYXRlKHRoaXMuZWRpdGluZ0l0ZW0uaW5uLCB0aGlzLmVkaXRpbmdJdGVtLnBpbmZsLCB0aGlzLmVkaXRpbmdJdGVtLmlzWXVyLCB0cnVlKQ0KICAgICAgICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YSkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmlzWXVyID0gaXNZdXINCiAgICAgICAgICAgICAgICB0aGlzLnNldERlZmF1bHRBY3RpdmVTdGF0dXMoKQ0KICAgICAgICAgICAgICAgIC8vIEZFVENIIERJU1RSSUNUUw0KICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uU2VsZWN0ZWQodGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkLCB0cnVlKQ0KICAgICAgICAgICAgICAgIC8vIENIRUNLIEFORCBTRVQgRk9VTkRFUlMgRlJPTSBTT0xJUQ0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlZ0NvbnRyYWN0b3JEdG8gJiYgZGF0YS5yZWdDb250cmFjdG9yRHRvLmZvdW5kZXJzKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnNldEZvdW5kZXJzRnJvbVNvbGlxKGRhdGEucmVnQ29udHJhY3RvckR0by5mb3VuZGVycykNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb3VuZGVyc0Zyb21Tb2xpcSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaGVscGVyU2VydmljZS5nZXRDb250cmFjdG9ySW5mb0J5SW5uRm9yVXBkYXRlKHRoaXMuZWRpdGluZ0l0ZW0uaW5uLCB0aGlzLmVkaXRpbmdJdGVtLnBpbmZsLCB0aGlzLmVkaXRpbmdJdGVtLmlzWXVyLCB0cnVlKQ0KICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCByZXMuZGF0YSkNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmlzWXVyID0gaXNZdXINCiAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5lZGl0aW5nSXRlbSwgJ2FkZHJlc3NEdG8nLCB0aGlzLm9yaWdpbmFsRHRvLmFkZHJlc3NEdG8pDQogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZWRpdGluZ0l0ZW0sICdtb2JpbGVOdW1iZXInLCB0aGlzLm9yaWdpbmFsRHRvLm1vYmlsZU51bWJlcikNCiAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5lZGl0aW5nSXRlbSwgJ2VtYWlsJywgdGhpcy5vcmlnaW5hbER0by5lbWFpbCkNCiAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5lZGl0aW5nSXRlbSwgJ2NhblJlZ2lzdGVyJywgdGhpcy5vcmlnaW5hbER0by5jYW5SZWdpc3RlcikNCiAgICAgICAgICAgICAgICB0aGlzLnNldERlZmF1bHRBY3RpdmVTdGF0dXMoKQ0KICAgICAgICAgICAgICAgIC8vIEZFVENIIERJU1RSSUNUUw0KICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uU2VsZWN0ZWQodGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkLCB0cnVlKQ0KICAgICAgICAgICAgICAgIC8vIENIRUNLIEFORCBTRVQgRk9VTkRFUlMgRlJPTSBTT0xJUQ0KICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5yZWdDb250cmFjdG9yRHRvICYmIHJlcy5kYXRhLnJlZ0NvbnRyYWN0b3JEdG8uZm91bmRlcnMpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm91bmRlcnNGcm9tU29saXEocmVzLmRhdGEucmVnQ29udHJhY3RvckR0by5mb3VuZGVycykNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb3VuZGVyc0Zyb21Tb2xpcSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgLy8gdGhpcy5jb21wdXRlZE9ic2VydmVyLnNldEVycm9ycyh7IElOTjogW3RoaXMuJHQoJ3ZhbGlkYXRvci5pbm5fZXhpc3QnKV0gfSk7DQogICAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICB9LA0KICAgIGN1c3RvbUxhYmVsRGlzdHJpY3Qob3B0KSB7DQogICAgICBsZXQgc2VsZWN0ZWREaXN0cmljdCA9IHRoaXMuZGlzdHJpY3RzLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICBpZiAoc2VsZWN0ZWREaXN0cmljdCkgew0KICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXROYW1lKHsNCiAgICAgICAgICBuYW1lUnU6IHNlbGVjdGVkRGlzdHJpY3QubmFtZVJ1LA0KICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWREaXN0cmljdC5uYW1lTHQsDQogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZERpc3RyaWN0Lm5hbWVVeiwNCiAgICAgICAgfSkNCiAgICAgICAgfWANCiAgICAgIH0NCiAgICAgIHJldHVybiBgYDsNCiAgICB9LA0KICAgIGN1c3RvbUxhYmVsUmVnaW9uKG9wdCkgew0KICAgICAgbGV0IHNlbGVjdGVkUmVnaW9uID0gdGhpcy5yZWdpb25zLmZpbmQoZSA9PiBlLmlkID09IG9wdCk7DQogICAgICBpZiAoc2VsZWN0ZWRSZWdpb24pIHsNCiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TmFtZSh7DQogICAgICAgICAgbmFtZVJ1OiBzZWxlY3RlZFJlZ2lvbi5uYW1lUnUsDQogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZFJlZ2lvbi5uYW1lTHQsDQogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZFJlZ2lvbi5uYW1lVXosDQogICAgICAgIH0pDQogICAgICAgIH1gDQogICAgICB9DQogICAgICByZXR1cm4gYGA7DQogICAgfSwNCiAgICBjdXN0b21MYWJlbEZvcm1PZk93bmVyc2hpcChvcHQpIHsNCiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuZm9ybU9mT3duZXJzaGlwcy5maW5kKGUgPT4gZS5pZCA9PSBvcHQpOw0KICAgICAgaWYgKHNlbGVjdGVkKSB7DQogICAgICAgIHJldHVybiBgJHt0aGlzLmdldE5hbWUoew0KICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LA0KICAgICAgICAgIG5hbWVMdDogc2VsZWN0ZWQubmFtZUx0LA0KICAgICAgICAgIG5hbWVVejogc2VsZWN0ZWQubmFtZVV6LA0KICAgICAgICB9KQ0KICAgICAgICB9YA0KICAgICAgfQ0KICAgICAgcmV0dXJuIGBgOw0KICAgIH0sDQogICAgYXN5bmMgc2F2ZSgpIHsNCiAgICAgIGxldCBpc0lublZhbGlkID0gYXdhaXQgdGhpcy52YWxpZGF0ZUlubigpDQogICAgICBpZiAoIWlzSW5uVmFsaWQpIHsNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmNvbXB1dGVkT2JzZXJ2ZXIudmFsaWRhdGUoKS50aGVuKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zKSB7DQogICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcyA9IHRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zLmZpbHRlcihlbCA9PiB7DQogICAgICAgICAgICAgIHJldHVybiBlbC5mb3VuZGVyTmFtZSAmJiBlbC5mb3VuZGVyTmFtZS50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggJiYgZWwucGVyY2VudGFnZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKCF0aGlzLmlzTW9kZUNyZWF0ZSkgew0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5pZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZC50b1N0cmluZygpDQogICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLnVwZGF0ZShNQUlOX0FQSV9VUkwsIHRoaXMuZWRpdGluZ0l0ZW0sIG51bGwsIHRydWUpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnJlc2V0KCkNCiAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHthZGRyZXNzRHRvOiB7fX0pOw0KICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLnNhdmVkX3N1Y2Nlc3NmdWxseScpLCB7dHlwZTogJ3N1Y2Nlc3MnfSk7DQogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NhdmVkJywgcmVzLmRhdGEpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmNyZWF0ZShNQUlOX0FQSV9VUkwsIHRoaXMuZWRpdGluZ0l0ZW0sIG51bGwsIHRydWUpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5jb21wdXRlZE9ic2VydmVyLnJlc2V0KCkNCiAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHthZGRyZXNzRHRvOiB7fX0pOw0KICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5zYXZlZF9zdWNjZXNzZnVsbHknKSwge3R5cGU6ICdzdWNjZXNzJ30pOw0KICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzYXZlZCcsIHJlcy5kYXRhKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kdG9hc3QodGhpcy4kdCgnbWVzc2FnZXMuZmlsbF9yZXF1aXJlZF9maWVsZHMnKSwge3R5cGU6ICdlcnJvcid9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KICAvKiogQ1JFQVRFRCAqLw0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIC8vIEZPUiBDT05UUkFDVE9SIFNFTEVDVF9BTkRfQUREDQogICAgdGhpcy5jb250cmFjdG9yU2VhcmNoUGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQpDQogICAgdGhpcy5mZXRjaENvbnRyYWN0b3JzKCkNCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gNTAwDQogICAgaWYgKHRoaXMuaXNNb2RlQ3JlYXRlKSB7DQogICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLmdldEVtcHR5KE1BSU5fQVBJX1VSTCwgbnVsbCwgdHJ1ZSkNCiAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHJlcy5kYXRhKQ0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5pc1l1ciA9IHRydWU7DQogICAgICAgICAgICAvKiBpZiAoIXRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zIHx8ICF0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdJdGVtLmZvdW5kZXJzRHRvcyA9IFtdDQogICAgICAgICAgICAgICAgbGV0IHRtcEZvdW5kZXIgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRGb3VuZGVyKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zLnB1c2godG1wRm91bmRlcikNCiAgICAgICAgICAgIH0gKi8NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpDQogICAgICAgICAgfSkNCiAgICB9IGVsc2Ugew0KICAgICAgYXdhaXQgY3J1ZEFuZExpc3RzU2VydmljZS5nZXRCeUlkKE1BSU5fQVBJX1VSTCwgdGhpcy4kcm91dGUucGFyYW1zLmlkLCB0cnVlKQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmRhdGEuaXNZdXIgPT09IG51bGwpIHsNCiAgICAgICAgICAgICAgcmVzLmRhdGEuaXNZdXIgPSBCb29sZWFuKCFyZXMuZGF0YS5waW5mbCAmJiByZXMuZGF0YS5pbm4pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHJlcy5kYXRhKQ0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5lZGl0aW5nSXRlbS5pbm4sIHRoaXMuZWRpdGluZ0l0ZW0pDQogICAgICAgICAgICB0aGlzLm9yaWdpbmFsSW5uID0gdGhpcy5lZGl0aW5nSXRlbS5pbm4NCiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxQaW5mbCA9IHRoaXMuZWRpdGluZ0l0ZW0ucGluZmwNCiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxEdG8gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhKSkNCiAgICAgICAgICAgIC8qIGlmICghdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MgfHwgIXRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0uZm91bmRlcnNEdG9zID0gW10NCiAgICAgICAgICAgICAgICBsZXQgdG1wRm91bmRlciA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEZvdW5kZXIpDQogICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nSXRlbS5mb3VuZGVyc0R0b3MucHVzaCh0bXBGb3VuZGVyKQ0KICAgICAgICAgICAgfSAqLw0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0l0ZW0ucGFyZW50SWQpIHsNCiAgICAgICAgICAgICAgbGV0IHBhcmVudElkeCA9IHRoaXMuY29udHJhY3RvcnMuZmluZEluZGV4KGVsID0+IGVsLmlkID09IHRoaXMuZWRpdGluZ0l0ZW0ucGFyZW50SWQpDQogICAgICAgICAgICAgIGlmIChwYXJlbnRJZHggPCAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb250cmFjdG9ycy5wdXNoKHRoaXMuZWRpdGluZ0l0ZW0ucGFyZW50KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICAgIH0pDQogICAgfQ0KICAgIC8vIEdFVCBTVEFUVVNFUw0KICAgIGhlbHBlclNlcnZpY2UuZ2V0UmVmQnlDb2RlKCdzdGF0dXMnLCB0cnVlKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuc3RhdHVzZXMgPSByZXMuZGF0YS5jaGlsZHJlbg0KICAgICAgICAgIGlmICh0aGlzLmlzTW9kZUNyZWF0ZSkgew0KICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0QWN0aXZlU3RhdHVzKCkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICB9KQ0KICAgIC8vIEdFVCBSRUdJT05TDQogICAgaGVscGVyU2VydmljZS5mZXRjaFJlZ2lvbnModHJ1ZSkNCiAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLnJlZ2lvbnMgPSByZXMuZGF0YQ0KICAgICAgICAgIHRoaXMucmVnaW9uU2VsZWN0ZWQodGhpcy5lZGl0aW5nSXRlbS5hZGRyZXNzRHRvLnJlZ2lvbklkLCB0cnVlKQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgfSkNCiAgICAvLyBHRVQgRk9STV9PRl9PV05FUlNISVANCiAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlDQogICAgICAgIC5zZWFyY2hMaXN0KCdkaXJlY3RvcnkvZm9ybS1vZi1vd25lcnNoaXBzJywgdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCwgbnVsbCwgdHJ1ZSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMuZm9ybU9mT3duZXJzaGlwcyA9IHJlcy5kYXRhLmxpc3Q7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgICB9KQ0KICB9LA0KICB3YXRjaDogew0KICAgICdlZGl0aW5nSXRlbS5pc1l1cic6IHsNCiAgICAgIGhhbmRsZXIobmV3VmFsLCBvbGRWYWwpew0KICAgICAgICBjb25zb2xlLmxvZyhuZXdWYWwsIG9sZFZhbCkNCiAgICAgICAgaWYgKCBuZXdWYWwgIT09IG9sZFZhbCkgew0KICAgICAgICAgIHRoaXMuZWRpdGluZ0l0ZW0gPSB7DQogICAgICAgICAgICBpc1l1cjogbmV3VmFsLA0KICAgICAgICAgICAgYWRkcmVzc0R0bzoge30sDQogICAgICAgICAgICBmb3VuZGVyc0R0b3M6IFtdDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZQ0KICAgIH0NCiAgfSwNCn0NCg=="},null]}