{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\projects\\file-controller.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\projects\\file-controller.vue","mtime":1678335773040},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcHJvamVjdFNlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvcHJvamVjdFNlcnZpY2UiOw0KaW1wb3J0IHNpbXBsZWJhciBmcm9tICJzaW1wbGViYXItdnVlIjsNCmltcG9ydCB7Z2V0RmlsZVNpemUsIHN1Y2Nlc3NTYXZlZERvY30gZnJvbSAiQC9oZWxwZXIiOw0KaW1wb3J0IERvY3NXaXRoSWNvbnMgZnJvbSAiLi9kb2NzV2l0aEljb25zIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIHByb2plY3Q6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIHNpbXBsZWJhciwNCiAgICBEb2NzV2l0aEljb25zLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBwYXJhbXM6IHsNCiAgICAgICAgcGFnZTogMCwNCiAgICAgICAgaXRlbXNQZXJQYWdlOiAyMCwNCiAgICAgIH0sDQogICAgICBkb2NzOiBbXSwNCiAgICAgIGZpbGVQYWdlOiAwLA0KICAgICAgZ2V0RmlsZVNpemU6IGdldEZpbGVTaXplLA0KICAgICAgbW9kYWw6IHsNCiAgICAgICAgaXNEb2NDb250cm9sTW9kYWw6IGZhbHNlLA0KICAgICAgICB0eXBlOiAnJywNCiAgICAgIH0sDQogICAgICBsb2FkZXJEb2M6IGZhbHNlLA0KICAgICAgZmlsZVVwbG9hZFBhdGg6IG51bGwsDQogICAgICB2aWV3RmlsZU1vZGFsOiBmYWxzZSwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5saXN0RG9jcygpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgdmlld0ZpbGUodXBsb2FkUGF0aCkgew0KICAgICAgaWYgKHRoaXMuZ2V0RXh0KHVwbG9hZFBhdGgpID09PSAicGRmIikgew0KICAgICAgICB0aGlzLmZpbGVVcGxvYWRQYXRoID0gdXBsb2FkUGF0aDsNCiAgICAgICAgdGhpcy52aWV3RmlsZU1vZGFsID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVVwbG9hZFRvUmV0dXJuKHJldHVyblR5cGUpIHsNCiAgICAgIHRoaXMubW9kYWwudHlwZSA9IHJldHVyblR5cGU7DQogICAgICB0aGlzLm1vZGFsLmlzRG9jQ29udHJvbE1vZGFsID0gdHJ1ZTsNCiAgICB9LA0KICAgIHNhdmVEb2NzKCkgew0KICAgICAgbGV0IHt0eXBlLCBmaWxlfSA9IHRoaXMuJHJlZnMuZG9jc1dpdGhJY29uc1JlZjsNCiAgICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOw0KICAgICAgbGV0IGRvY3VtZW50TmFtZTsNCiAgICAgIGxldCBzYXZlVXJsOw0KICAgICAgc3dpdGNoICh0eXBlKSB7DQogICAgICAgIGNhc2UgIk5PVElDRSI6DQogICAgICAgICAgZG9jdW1lbnROYW1lID0gdGhpcy4kdCgnc3VibW9kdWxlcy5jb21taXNzaW9uLm5vdGljZScpOw0KICAgICAgICAgIHNhdmVVcmwgPSBgL3Byb2plY3QvdXBsb2FkLXRvLXJldHVybi8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIkxFVFRFUiI6DQogICAgICAgICAgZG9jdW1lbnROYW1lID0gdGhpcy4kdCgnc3VibW9kdWxlcy5hcHBsaWNhdGlvbl9iZWZvcmVfY29tbWlzc2lvbi5sZXR0ZXInKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIlBST1RPQ09MIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdjb2x1bW4ucHJvdG9jb2wnKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIkRFQ0lTSU9OIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdzdWJtb2R1bGVzLmFwcGxpY2F0aW9uX2JlZm9yZV9jb21taXNzaW9uLmRyYWZ0X2RlY2lzaW9uJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQvJHtpZH1gOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJSRUZFUkVOQ0UiOg0KICAgICAgICAgIGRvY3VtZW50TmFtZSA9IHRoaXMuJHQoJ3N1Ym1vZHVsZXMuYXBwbGljYXRpb25fYmVmb3JlX2NvbW1pc3Npb24ucmVmZXJlbmNlJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQtdG8tcmV0dXJuLyR7aWR9YDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiT0ZGRVJfTk9USUNFIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSAnVGFrbGlmIGJpbGRpcmlzaCc7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQvJHtpZH1gOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJQUk9UT0NPTF9EWEEiOg0KICAgICAgICAgIGRvY3VtZW50TmFtZSA9IHRoaXMuJHQoJ3N1Ym1vZHVsZXMuYXBwbGljYXRpb25fYmVmb3JlX2NvbW1pc3Npb24ucHJvdG9jb2wnKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIk5PVElDRV9SRUdJT04iOg0KICAgICAgICAgIGRvY3VtZW50TmFtZSA9IHRoaXMuJHQoJ3N1Ym1vZHVsZXMuY29tbWlzc2lvbi5ub3RpY2UnKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC10by1yZXR1cm4vJHtpZH1gOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJMRVRURVJfUkVHSU9OIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdzdWJtb2R1bGVzLmFwcGxpY2F0aW9uX2JlZm9yZV9jb21taXNzaW9uLmxldHRlcicpOw0KICAgICAgICAgIHNhdmVVcmwgPSBgL3Byb2plY3QvdXBsb2FkLXRvLXJldHVybi8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIkxFVFRFUl9JTlZPS0UiOg0KICAgICAgICAgIGRvY3VtZW50TmFtZSA9IHRoaXMuJHQoJ3N1Ym1vZHVsZXMuY29tbWlzc2lvbi5kb2NfYnV0dG9uLmludm9rZV9sZXR0ZXInKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC1pbnZva2UtbGV0dGVyLyR7aWR9YDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiTEVUVEVSX0ZJTklTSCI6DQogICAgICAgICAgZG9jdW1lbnROYW1lID0gdGhpcy4kdCgnc3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19idXR0b24ubGV0dGVyJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvbGV0dGVyL3VwbG9hZC1maW5pc2gtbGV0dGVyLyR7dGhpcy5wcm9qZWN0LmFwcGxpY2F0aW9uRHRvLmlkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIlBST1RPQ09MX0RFTEFZIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdzdWJtb2R1bGVzLmNvbW1pc3Npb24uZG9jX2J1dHRvbi5wcm90b2NvbCcpOw0KICAgICAgICAgIHNhdmVVcmwgPSBgL3Byb2plY3QvdXBsb2FkLXRvLXJldHVybi8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIlBST1RPQ09MX1JFU1VNRSI6DQogICAgICAgICAgZG9jdW1lbnROYW1lID0gdGhpcy4kdCgnc3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19idXR0b24ucHJvdG9jb2wnKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC10by1yZXR1cm4vJHtpZH1gOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJQUk9UT0NPTF9TVVNQRU5EIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdzdWJtb2R1bGVzLmNvbW1pc3Npb24uZG9jX2J1dHRvbi5wcm90b2NvbCcpOw0KICAgICAgICAgIHNhdmVVcmwgPSBgL3Byb2plY3QvdXBsb2FkLXRvLXJldHVybi8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIk5PVElDRV9OT1RfQkVMT05HIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdzdWJtb2R1bGVzLmNvbW1pc3Npb24ubm90aWNlJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQtdG8tcmV0dXJuLyR7aWR9YDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiTEVUVEVSX05PVF9CRUxPTkciOg0KICAgICAgICAgIGRvY3VtZW50TmFtZSA9IHRoaXMuJHQoJ3N1Ym1vZHVsZXMuYXBwbGljYXRpb25fYmVmb3JlX2NvbW1pc3Npb24ubGV0dGVyJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQtdG8tcmV0dXJuLyR7aWR9YDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiUFJPVE9DT0xfQ09NTUlTU0lPTiI6DQogICAgICAgICAgZG9jdW1lbnROYW1lID0gdGhpcy4kdCgnc3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19idXR0b24ucHJvdG9jb2wnKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC10by1yZXR1cm4vJHtpZH1gOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJERUNJU0lPTl9DT01NSVNTSU9OIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdzdWJtb2R1bGVzLmNvbW1pc3Npb24uZG9jX2J1dHRvbi5kZWNpc2lvbicpOw0KICAgICAgICAgIHNhdmVVcmwgPSBgL3Byb2plY3QvdXBsb2FkLXRvLXJldHVybi8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIkNPTVBST01JU0VfREVDSVNJT04iOg0KICAgICAgICAgIGRvY3VtZW50TmFtZSA9IHRoaXMuJHQoJ3N1Ym1vZHVsZXMuY29tbWlzc2lvbi5jb21wcm9taXNlX2RlY2lzaW9uJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQtdG8tcmV0dXJuLyR7aWR9YDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiTk9USUNFX05PVF9DT01QTEVURUQiOg0KICAgICAgICAgIGRvY3VtZW50TmFtZSA9IHRoaXMuJHQoJ3N1Ym1vZHVsZXMuY29tbWlzc2lvbi5ub3RpY2UnKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC10by1yZXR1cm4vJHtpZH1gOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJMRVRURVJfTk9UX0NPTVBMRVRFRCI6DQogICAgICAgICAgZG9jdW1lbnROYW1lID0gdGhpcy4kdCgnc3VibW9kdWxlcy5hcHBsaWNhdGlvbl9iZWZvcmVfY29tbWlzc2lvbi5sZXR0ZXInKTsNCiAgICAgICAgICBzYXZlVXJsID0gYC9wcm9qZWN0L3VwbG9hZC10by1yZXR1cm4vJHtpZH1gOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJQUkVTQ1JJUFRJT05fQ09NTUlTU0lPTiI6DQogICAgICAgICAgZG9jdW1lbnROYW1lID0gdGhpcy4kdCgnc3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19idXR0b24ucHJlc2NyaXB0aW9uJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQtdG8tcmV0dXJuLyR7aWR9YDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiQ09NUFJPTUlTRV9ERUNJU0lPTl9ERUxBWSI6DQogICAgICAgICAgZG9jdW1lbnROYW1lID0gdGhpcy4kdCgnc3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19idXR0b24uY29tcHJvbWlzZScpOw0KICAgICAgICAgIHNhdmVVcmwgPSBgL3Byb2plY3QvdXBsb2FkLXRvLXJldHVybi8ke2lkfWA7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIkNPTVBST01JU0VfREVDSVNJT05fUkVTVU1FIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdzdWJtb2R1bGVzLmNvbW1pc3Npb24uZG9jX2J1dHRvbi5jb21wcm9taXNlJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQtdG8tcmV0dXJuLyR7aWR9YDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiQ09NUFJPTUlTRV9ERUNJU0lPTl9TVVNQRU5EIjoNCiAgICAgICAgICBkb2N1bWVudE5hbWUgPSB0aGlzLiR0KCdzdWJtb2R1bGVzLmNvbW1pc3Npb24uZG9jX2J1dHRvbi5jb21wcm9taXNlJyk7DQogICAgICAgICAgc2F2ZVVybCA9IGAvcHJvamVjdC91cGxvYWQtdG8tcmV0dXJuLyR7aWR9YDsNCiAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICAgIGlmICh0eXBlICYmIGlkICYmIHNhdmVVcmwpIHsNCiAgICAgICAgdGhpcy5sb2FkZXJEb2MgPSB0cnVlOw0KICAgICAgICBwcm9qZWN0U2VydmljZQ0KICAgICAgICAgICAgLnNhdmVEb2Moc2F2ZVVybCwgJ2RvY3gnLCBmaWxlLCB0eXBlLCBkb2N1bWVudE5hbWUpDQogICAgICAgICAgICAudGhlbigocnMpID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJzLmRhdGEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmxpc3REb2NzKCk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ2V0LXByb2plY3QtYnktaWQnKTsNCiAgICAgICAgICAgICAgICB0aGlzLm1vZGFsLmlzRG9jQ29udHJvbE1vZGFsID0gZmFsc2U7DQogICAgICAgICAgICAgICAgc3VjY2Vzc1NhdmVkRG9jKCk7DQogICAgICAgICAgICAgICAgbGV0IHJvdXRlRGF0YSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsNCiAgICAgICAgICAgICAgICAgIG5hbWU6ICJPZmZpY2UtRE9DVU1FTlQtY29tbWlzc2lvbiIsDQogICAgICAgICAgICAgICAgICBxdWVyeToge2lkOiBycy5kYXRhLmlkLCBwYWdlOiAiR0VUIn0sDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgLy8gPyBPcmdhbmlzaGltIGtlcmFrDQogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4ocm91dGVEYXRhLmhyZWYsICJfYmxhbmsiKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gew0KICAgICAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGUpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5sb2FkZXJEb2MgPSBmYWxzZTsNCiAgICAgICAgICAgICAgfSwgNTAwKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2F2ZUZpbGUobXNnLCBmaWxlKSB7DQogICAgICB0aGlzLmxlYXZlRmlsZShtc2csIGZpbGUpOw0KICAgIH0sDQogICAgY2xpY2tVcGxvYWQoKSB7DQogICAgICB0aGlzLm1vZGFsLmlzRG9jQ29udHJvbE1vZGFsID0gdHJ1ZTsNCiAgICAgIHRoaXMubW9kYWwudHlwZSA9ICdPRkZFUl9OT1RJQ0UnOw0KICAgICAgLy8gICB0aGlzLiRyZWZzLmZpbGUudXBsZCgpOw0KICAgIH0sDQogICAgbGVhdmVGaWxlKG1zZywgY210KSB7DQogICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsNCiAgICAgIGlmIChpZCkgew0KICAgICAgICBwcm9qZWN0U2VydmljZQ0KICAgICAgICAgICAgLmxlYXZlRmlsZShpZCwgbXNnLCBjbXQpDQogICAgICAgICAgICAudGhlbigocnMpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5maWxlID0gbnVsbDsNCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5saXN0RG9jcygpOw0KICAgICAgICAgICAgICB9LCAzMDApOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgIC8vIHRoaXMuY2F0Y2hFcnIoZXJyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGxpc3REb2NzKCkgew0KICAgICAgbGV0IGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7DQogICAgICBpZiAoaWQpIHsNCiAgICAgICAgcHJvamVjdFNlcnZpY2UNCiAgICAgICAgICAgIC5saXN0RG9jc1dpdGhTaWduYXRvcnlTZXJ2aWNlKGlkLCB0aGlzLnBhcmFtcykNCiAgICAgICAgICAgIC50aGVuKChycykgPT4gew0KICAgICAgICAgICAgICB0aGlzLmRvY3MgPSBycy5kYXRhOw0KICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbCgpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgIC8vIHRoaXMuY2F0Y2hFcnIoZXJyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGxvYWRNb3JlRG9jcyhwYWdlKSB7DQogICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsNCiAgICAgIGlmIChpZCkgew0KICAgICAgICBwcm9qZWN0U2VydmljZQ0KICAgICAgICAgICAgLmxpc3REb2NzU2VydmljZShpZCwgew0KICAgICAgICAgICAgICBwYWdlOiBwYWdlLA0KICAgICAgICAgICAgICBpdGVtc1BlclBhZ2U6IDIwLA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKGFzeW5jICh7ZGF0YX0pID0+IHsNCiAgICAgICAgICAgICAgaWYgKGRhdGEubGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5kb2NzID0gdGhpcy5kb2NzLmNvbmNhdChkYXRhLmxpc3QpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuZmlsZVBhZ2UgKyAtMTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOw0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlU2Nyb2xsKCkgew0KICAgICAgaWYgKHRoaXMuJHJlZnMuZG9jc1JlZi4kZWwpIHsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy4kcmVmcy5kb2NzUmVmLlNpbXBsZUJhci5nZXRTY3JvbGxFbGVtZW50KCkuc2Nyb2xsVG9wID0gMDsNCiAgICAgICAgfSwgNTAwKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGNvbnN0IGNvbnRhaW5lcjMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKA0KICAgICAgICAiI2RvYy1saXN0IC5zaW1wbGViYXItY29udGVudC13cmFwcGVyIg0KICAgICk7DQogICAgaWYgKGNvbnRhaW5lcjMpIHsNCiAgICAgIGNvbnRhaW5lcjMuc2Nyb2xsVG8oe3RvcDogNTAwLCBiZWhhdmlvcjogInNtb290aCJ9KTsNCiAgICB9DQogICAgLy8gQ29udGFjdCBsaXN0IGFjdGlvbnMNCiAgICB0aGlzLiRyZWZzLmRvY3NSZWYuU2ltcGxlQmFyLmdldFNjcm9sbEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKA0KICAgICAgICAic2Nyb2xsIiwNCiAgICAgICAgKGUpID0+IHsNCiAgICAgICAgICBsZXQge3Njcm9sbFRvcCwgc2Nyb2xsSGVpZ2h0LCBjbGllbnRIZWlnaHR9ID0gZXZlbnQudGFyZ2V0Ow0KICAgICAgICAgIGNvbnN0IG9mZnNldEZvclRyaWdnZXIgPSAxOw0KICAgICAgICAgIGlmIChzY3JvbGxIZWlnaHQgLSBjbGllbnRIZWlnaHQgLSBvZmZzZXRGb3JUcmlnZ2VyIDwgc2Nyb2xsVG9wKSB7DQogICAgICAgICAgICAvLyB0aGlzLmxvYWRNb3JlRG9jcygodGhpcy5maWxlUGFnZSArPSAxKSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgKTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBpc0NvbW1pc3Npb24oKSB7DQogICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gJ0NvbW1pc3Npb25Qcm9qZWN0cycNCiAgICB9LA0KICAgIGlzUmV2aXNpb24oKSB7DQogICAgICByZXR1cm4gdGhpcy5wcm9qZWN0LnN0YXR1cyA9PT0gJ1JFVklTSU9OJw0KICAgIH0sDQogICAgbm90UGRmRG9jRmlsZXNDb3VudCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmRvY3MuZmlsdGVyKGQgPT4gZC5sZXR0ZXIuZmlsZVR5cGUudG9Mb3dlckNhc2UoKSAhPT0gJ3BkZicpLmxlbmd0aA0KICAgIH0sDQogICAgZG9jc1dpdGhvdXRJbnZva2VMYXR0ZXIoKSB7DQogICAgICByZXR1cm4gdGhpcy5kb2NzLmZpbHRlcihkID0+IGQubGV0dGVyLmxldHRlclR5cGUgIT09ICdMRVRURVJfSU5WT0tFJyAmJiBkLmxldHRlci5maWxlVHlwZS50b0xvd2VyQ2FzZSgpICE9PSAncGRmJykubGVuZ3RoDQogICAgfSwNCiAgICBjYW5DcmVhdGVEb2MoKSB7DQogICAgICBpZiAodGhpcy5wcm9qZWN0LmFwcGxpY2F0aW9uVHlwZSA9PT0gIkZST01fRFhBIikgew0KICAgICAgICBzd2l0Y2ggKHRoaXMucHJvamVjdC5zdGF0dXMpIHsNCiAgICAgICAgICBjYXNlICdDUkVBVEVEJzoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3NXaXRob3V0SW52b2tlTGF0dGVyIDwgMzsNCiAgICAgICAgICBjYXNlICdSRVZJU0lPTl9BRlRFUl9DT01NSVNTSU9OJzoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdFBkZkRvY0ZpbGVzQ291bnQgPCAzOw0KICAgICAgICAgIGNhc2UgJ0NPTU1JU1NJT05fUkVWSVNJT04nOg0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90UGRmRG9jRmlsZXNDb3VudCA8IDI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnByb2plY3QuYXBwbGljYXRpb25UeXBlID09PSAnSU5ORVInKSB7DQogICAgICAgIGlmICh0aGlzLmlzQ29tbWlzc2lvbiAmJiAhdGhpcy5pc1JldmlzaW9uKSB7DQogICAgICAgICAgc3dpdGNoICh0aGlzLnByb2plY3QucmV0dXJuVHlwZSkgew0KICAgICAgICAgICAgY2FzZSAnRk9SX1BST0NFU1MnOg0KICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb2NzV2l0aG91dEludm9rZUxhdHRlciA8IDM7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5pc0NvbW1pc3Npb24gJiYgIXRoaXMuaXNSZXZpc2lvbikgew0KICAgICAgICBzd2l0Y2ggKHRoaXMucHJvamVjdC5yZXR1cm5UeXBlKSB7DQogICAgICAgICAgY2FzZSAnRk9SX0ZJTklTSF9XT1JLJzoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3NXaXRob3V0SW52b2tlTGF0dGVyIDwgMzsNCiAgICAgICAgICBjYXNlICdGT1JfU1VTUEVORF9XT1JLJzoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3NXaXRob3V0SW52b2tlTGF0dGVyIDwgMjsNCiAgICAgICAgICBjYXNlICdGT1JfREVMQVlfV09SSyc6DQogICAgICAgICAgICByZXR1cm4gdGhpcy5kb2NzV2l0aG91dEludm9rZUxhdHRlciA8IDI7DQogICAgICAgICAgY2FzZSAnRk9SX1JFU1VNRV9XT1JLJzoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3NXaXRob3V0SW52b2tlTGF0dGVyIDwgMjsNCiAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9jc1dpdGhvdXRJbnZva2VMYXR0ZXIgPCAxOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5wcm9qZWN0LnN0YXR1cyA9PT0gIlRFTVBPUkFSSUxZX0NMT1NFRCIgJiYgdGhpcy5wcm9qZWN0LmFwcGxpY2F0aW9uVHlwZSA9PT0gIklOTkVSIikgew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5pc0NvbW1pc3Npb24gJiYgIXRoaXMuaXNSZXZpc2lvbikgew0KICAgICAgICBzd2l0Y2ggKHRoaXMucHJvamVjdC5yZXR1cm5UeXBlKSB7DQogICAgICAgICAgY2FzZSAnRk9SX0NPTU1JU1NJT04nOg0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90UGRmRG9jRmlsZXNDb3VudCA8IDM7DQogICAgICAgICAgY2FzZSAnRk9SX05PVF9DT01QTEVURUQnOg0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90UGRmRG9jRmlsZXNDb3VudCA8IDI7DQogICAgICAgICAgY2FzZSAnRk9SX05PVF9CRUxPTkcnOg0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90UGRmRG9jRmlsZXNDb3VudCA8IDI7DQogICAgICAgICAgY2FzZSAnRk9SX1JFR0lPTic6DQogICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RQZGZEb2NGaWxlc0NvdW50IDwgMjsNCiAgICAgICAgICBjYXNlICdGT1JfUFJPQ0VTUyc6DQogICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RQZGZEb2NGaWxlc0NvdW50IDwgMzsNCiAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9jcy5sZW5ndGggPCAyOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoIXRoaXMuaXNDb21taXNzaW9uICYmIHRoaXMuaXNSZXZpc2lvbiAmJiB0aGlzLnByb2plY3Quc3RhdHVzID09PSAnUkVWSVNJT04nKSB7DQogICAgICAgIHJldHVybiB0aGlzLm5vdFBkZkRvY0ZpbGVzQ291bnQgPCAzDQogICAgICB9DQogICAgICBpZiAoIXRoaXMuaXNDb21taXNzaW9uICYmIHRoaXMuaXNSZXZpc2lvbikgew0KICAgICAgICByZXR1cm4gdGhpcy5ub3RQZGZEb2NGaWxlc0NvdW50IDwgMg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuaXNDb21taXNzaW9uICYmIHRoaXMuaXNSZXZpc2lvbikgew0KICAgICAgICByZXR1cm4gdGhpcy5ub3RQZGZEb2NGaWxlc0NvdW50IDwgMQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["file-controller.vue"],"names":[],"mappings":";AAuTA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"file-controller.vue","sourceRoot":"src/modules/projects","sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-body\">\r\n<!--      <div>status: {{ project.status }}</div>-->\r\n<!--      <div>returnType: {{ project.returnType }}</div>-->\r\n<!--      <div>projectType: {{ project.projectType }}</div>-->\r\n<!--      <div>applicationType: {{ project.applicationType }}</div>-->\r\n      <h4 class=\"card-title mb-4\">{{ $t(\"documents\") }}</h4>\r\n      <simplebar\r\n          id=\"doc-list\"\r\n          ref=\"docsRef\"\r\n          style=\"max-height: 300px\"\r\n      >\r\n        <div class=\"table-responsive mb-0\">\r\n          <table style=\"table-layout: fixed; width: 100%\" class=\"table table-centered table-hover\">\r\n            <tbody>\r\n            <tr v-for=\"(doc, index) in docs\" :key=\"index\">\r\n              <td style=\"width: 32px\">\r\n                <a\r\n                    @click=\"viewFile(doc.letter.url)\"\r\n                    :download=\"getExt(doc.letter.url) === 'pdf' ? false : doc.letter.url\"\r\n                    :href=\"getExt(doc.letter.url) === 'pdf' ? `#` : `${baseUrl}/${doc.letter.url}`\"\r\n                >\r\n                  <FileView class=\"my-card-hovered\" :uploadPath=\"doc.letter.url\"/>\r\n                </a>\r\n              </td>\r\n              <td style=\"width: 60%\">\r\n                <h5 class=\"font-size-14 m-0\">\r\n                  <div class=\"text-dark m-0 pre\">{{ doc.letter.fileName }}</div>\r\n                </h5>\r\n                <small>\r\n                  <span class=\"mr-1 text-muted\">{{ $t(\"column.created_date\") }}:</span>\r\n                  <span class=\"text-dark\">{{ doc.letter.created }}</span>\r\n                </small>\r\n                <small\r\n                    class=\"d-block text-muted\"\r\n                    v-if=\"\r\n                      !_empty(doc.letter.employeeLastName) &&\r\n                      !_empty(doc.letter.employeeFirstName) &&\r\n                      !_empty(doc.letter.employeeParentName)\r\n                    \"\r\n                >\r\n                  <span class=\"mr-1\">{{ $t(\"byCreated\") }}:</span>\r\n                  <span class=\"text-dark\">\r\n                    {{\r\n                      `${doc.letter.employeeLastName} ${doc.letter.employeeFirstName} ${doc.letter.employeeParentName}`\r\n                    }}\r\n                  </span>\r\n                </small>\r\n              </td>\r\n              <td style=\"width: 45px\">\r\n                <div\r\n                    class=\"text-center\"\r\n                    v-if=\"project.status !== 'FINISHED' && (doc.letter.fileType && doc.letter.fileType.toLowerCase() !== 'pdf')\"\r\n                >\r\n                  <router-link\r\n                      :to=\"{ name: 'Office-DOCUMENT-commission', query: { id: doc.letter.id, page: 'GET' }, }\"\r\n                      class=\"text-dark\"\r\n                      target=\"_blank\"\r\n                  >\r\n                    <i class=\"bx bx-edit h3 m-0\"></i>\r\n                  </router-link>\r\n                </div>\r\n                <b-button\r\n                    v-if=\"doc.signatory?.length > 0 && doc.letter.willBeSigned && doc.letter.isThisEmployeeSigned === false && ['LETTER_INVOKE'].indexOf(doc.letter.letterType) === -1\"\r\n                    v-b-tooltip.hover\r\n                    class=\"text-center cursor-pointer p-1\"\r\n                    title=\"Imzolash uchun\"\r\n                    variant=\"light\"\r\n                    size=\"sm\"\r\n                    @click=\"$router.push(`/projects/sign/${doc.letter.id}`)\"\r\n                >\r\n                  <i class=\"fas fa-file-signature m-2\"></i>\r\n                </b-button>\r\n                <div\r\n                    v-if=\"project.isAdmin &&\r\n                          !['TO_INVOKE_SIGNED', 'SEND_SIGN_FINISH'].includes(doc.letter.status) &&\r\n                          !['TEMPORARILY_CLOSED', 'COMMISSION_REVISION'].includes(project.status) &&\r\n                          doc.letter.letterType === 'LETTER_INVOKE'\"\r\n                    class=\"text-center cursor-pointer\"\r\n                    @click=\"$router.push(`/projects/invoke-letter-sign/${project.id}/${doc.letter.id}`)\"\r\n                    v-b-tooltip.hover.right=\"$t('forSignature')\"\r\n                >\r\n                  <i class=\"fas fa-signature h3 m-0\"></i>\r\n                </div>\r\n                <b-button\r\n                    v-if=\"doc.signatory.length\"\r\n                    v-b-tooltip.hover=\"$t('messages.view_signatories')\"\r\n                    :id=\"`doc-signatory-${index}`\"\r\n                    variant=\"light\"\r\n                    size=\"sm\"\r\n                    class=\"cursor-pointe p-1\"\r\n                >\r\n                  <i class=\"fas fa-eye m-2\"></i>\r\n                  <b-popover\r\n                      :target=\"`doc-signatory-${index}`\"\r\n                      triggers=\"hover focus\"\r\n                      placement=\"bottom\"\r\n                  >\r\n                    <table class=\"table\">\r\n                      <tbody>\r\n                      <tr v-for=\"(signatoryEmployee, signatoryIndex) in doc.signatory\" :key=\"signatoryIndex\">\r\n                        <td>{{ signatoryIndex + 1 }}</td>\r\n                        <td>{{ signatoryEmployee.employeeLastName }} {{ signatoryEmployee.employeeFirstName }}\r\n                          {{ signatoryEmployee.employeeMiddleName }}\r\n                          <br>\r\n                          <span v-if=\"signatoryEmployee.signatoryDate !== null\">\r\n                            <div\r\n                                class=\"font-weight-bold\">{{\r\n                                $t('messages.signatory_time') + ':'\r\n                              }}</div>{{ signatoryEmployee.signatoryDate }}\r\n                          </span>\r\n                        </td>\r\n                        <td>\r\n                          <i class=\"fa p-2 text-white\"\r\n                             :class=\"signatoryEmployee.isSigned ? 'fa-check bg-success' : 'fa-times bg-danger'\"/>\r\n                        </td>\r\n                      </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </b-popover>\r\n                </b-button>\r\n              </td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </simplebar>\r\n    </div>\r\n    <b-modal\r\n        scrollable\r\n        v-model=\"viewFileModal\"\r\n        size=\"xl\"\r\n        :title=\"$t('actions.view')\"\r\n    >\r\n      <div style=\"height: 700px\" v-if=\"fileUploadPath\">\r\n        <embed\r\n            width=\"100%\"\r\n            height=\"800\"\r\n            :src=\"`${baseUrl}/${fileUploadPath}`\"\r\n            type=\"application/pdf\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewFileModal = false\">{{ $t(\"actions.close\") }}</b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal v-model=\"modal.isDocControlModal\" size=\"md\" :title=\"`${$t('documents')}`\">\r\n      <DocsWithIcons\r\n          ref=\"docsWithIconsRef\"\r\n          :modal=\"modal\"\r\n          :projectStatus=\"project.status\"\r\n          :applicationType=\"project.applicationType\"\r\n      />\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-overlay :opacity=\"0.1\" :show=\"loaderDoc\" rounded=\"sm\" size=\"sm\">\r\n          <b-button variant=\"success\" @click=\"saveDocs\">{{ $t(\"actions.save\") }}</b-button>\r\n        </b-overlay>\r\n      </template>\r\n    </b-modal>\r\n    <div\r\n        class=\"p-3\"\r\n        v-if=\"(['FINISHED', 'REVIEW_FINISHED','TEMPORARILY_CLOSED'].indexOf(project.status)  === -1)\r\n           || (project.applicationType === 'FROM_DXA' && project.status !== 'REVIEW_FINISHED')\r\n           || (project.projectType === 'COMMISSION' && project.status === 'FINISHED' && project.applicationDto.applicationStatus === 'COMMISSION_SEEN')\"\r\n    >\r\n      <form>\r\n        <div v-if=\"project.applicationType === 'FROM_DXA'\">\r\n          <div v-if=\"canCreateDoc && project.projectType === 'COMMISSION'\">\r\n            <b-button\r\n                @click.prevent=\"clickUpload\" variant=\"primary\" block\r\n                v-if=\"(['COMMISSION_REVISION'].indexOf(project.status) !== -1)\"\r\n            >\r\n              <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n              {{ $t(\"actions.create_new_document\") }}\r\n            </b-button>\r\n          </div>\r\n          <div v-else-if=\"canCreateDoc && project.projectType === 'BEFORE_COMMISSION'\">\r\n            <b-button\r\n                @click.prevent=\"clickUpload\" variant=\"primary\" block\r\n                v-if=\"(['REVISION_AFTER_COMMISSION', 'CREATED'].indexOf(project.status) !== -1)\"\r\n            >\r\n              <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n              {{ $t(\"actions.create_new_document\") }}\r\n            </b-button>\r\n          </div>\r\n          <div v-else-if=\"canCreateDoc\">\r\n            <b-button\r\n                @click.prevent=\"clickUpload\" variant=\"primary\" block\r\n                v-if=\"(['FOR_PROCESS', 'FOR_COMMISSION'].indexOf(project.returnType) !== -1)\"\r\n            >\r\n              <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n              {{ $t(\"actions.create_new_document\") }}\r\n            </b-button>\r\n          </div>\r\n        </div>\r\n        <div v-else-if=\"project.applicationType === 'INNER'\">\r\n          <div v-if=\"isCommission\">\r\n            <b-button-group class=\"btn-block\">\r\n              <b-button\r\n                  @click.prevent=\"handleUploadToReturn('LETTER_FINISH');\"\r\n                  variant=\"primary\"\r\n                  v-if=\"['FOR_FINISH_WORK'].indexOf(project.returnType) !== -1 && project.applicationDto.applicationStatus === 'COMMISSION_SEEN'\"\r\n              >\r\n                <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n                {{ $t(\"submodules.commission.doc_button.create_letter\") }}\r\n              </b-button>\r\n              <!-- Ishni tugatish-->\r\n              <b-button\r\n                  @click.prevent=\"handleUploadToReturn('FOR_FINISH_WORK');\"\r\n                  variant=\"primary\"\r\n                  v-if=\"canCreateDoc && (['FOR_PROCESS', 'FOR_FINISH_WORK'].indexOf(project.returnType) !== -1)\"\r\n              >\r\n                <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n                {{ $t(\"submodules.commission.doc_button.finish_work\") }}\r\n              </b-button>\r\n              <!-- Chaqiruv xati -->\r\n              <b-button\r\n                  @click.prevent=\"handleUploadToReturn('LETTER_INVOKE');\"\r\n                  variant=\"success\"\r\n                  v-if=\"(['CREATED', 'CANCELLED_TO_DEFECT_FILES'].indexOf(project.status) !== -1)\"\r\n              >\r\n                <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n                {{ $t(\"submodules.commission.doc_button.invoke_letter\") }}\r\n              </b-button>\r\n            </b-button-group>\r\n            <b-button-group class=\"btn-block\">\r\n              <b-button\r\n                  @click.prevent=\"handleUploadToReturn('FOR_SUSPEND_WORK');\"\r\n                  variant=\"default\" style=\"background-color: #74788d; color: #fff;\"\r\n                  v-if=\"canCreateDoc && (['FOR_PROCESS', 'FOR_SUSPEND_WORK'].indexOf(project.returnType) !== -1)\"\r\n              >\r\n                <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n                {{ $t(\"submodules.commission.doc_button.suspend_work\") }}\r\n              </b-button>\r\n              <b-button\r\n                  @click.prevent=\"handleUploadToReturn('FOR_DELAY_WORK');\"\r\n                  variant=\"default\" style=\"background-color: #858da5; color: #fff;\"\r\n                  v-if=\"canCreateDoc && (['FOR_PROCESS', 'FOR_DELAY_WORK'].indexOf(project.returnType) !== -1)\"\r\n              >\r\n                <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n                {{ $t(\"submodules.commission.doc_button.delay_work\") }}\r\n              </b-button>\r\n              <b-button\r\n                  @click.prevent=\"handleUploadToReturn('FOR_RESUME_WORK');\"\r\n                  variant=\"default\" style=\"background-color: #9bb7dd; color: #fff;\"\r\n                  v-if=\"canCreateDoc && (['FOR_PROCESS', 'FOR_RESUME_WORK'].indexOf(project.returnType) !== -1)\"\r\n              >\r\n                <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n                {{ $t(\"submodules.commission.doc_button.resume_work\") }}\r\n              </b-button>\r\n            </b-button-group>\r\n          </div>\r\n          <div v-else>\r\n            <b-button\r\n                @click.prevent=\"handleUploadToReturn('FOR_COMMISSION');\"\r\n                variant=\"primary\"\r\n                block\r\n                v-if=\"(canCreateDoc && ['FOR_PROCESS', 'FOR_COMMISSION'].indexOf(project.returnType) !== -1) ||\r\n                      (canCreateDoc && ['TEMPORARILY_CLOSED'].indexOf(project.status) !== -1)\"\r\n            >\r\n              <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n              {{ $t(\"actions.create_new_document\") }}\r\n            </b-button>\r\n            <b-button-group class=\"btn-block\" v-if=\"project.status !== 'REVISION'\">\r\n              <b-button\r\n                  v-if=\"canCreateDoc && (['FOR_PROCESS', 'FOR_NOT_COMPLETED'].indexOf(project.returnType) !== -1)\"\r\n                  @click.prevent=\"handleUploadToReturn('FOR_NOT_COMPLETED');\"\r\n                  variant=\"outline-secondary\">{{ $t(\"submodules.commission.letter_not_complete\") }}\r\n              </b-button>\r\n              <div v-else-if=\"(['FOR_NOT_COMPLETED'].indexOf(project.returnType) !== -1)\"\r\n                   class=\"menu-title text-center w-100\">\r\n                {{ $t(\"submodules.commission.to_indicate_that_the_information_is_incomplete\") }}\r\n              </div>\r\n              <b-button\r\n                  v-if=\"canCreateDoc && (['FOR_PROCESS', 'FOR_NOT_BELONG'].indexOf(project.returnType) !== -1)\"\r\n                  @click.prevent=\"handleUploadToReturn('FOR_NOT_BELONG');\"\r\n                  variant=\"outline-info\">{{ $t(\"submodules.commission.letter_not_belong\") }}\r\n              </b-button>\r\n              <div v-else-if=\"(['FOR_NOT_BELONG'].indexOf(project.returnType) !== -1)\"\r\n                   class=\"menu-title text-center w-100\">\r\n                {{ $t(\"submodules.commission.to_determine_that_it_does_not_fall_under_the_authority\") }}\r\n              </div>\r\n              <b-button\r\n                  v-if=\"canCreateDoc && (['FOR_PROCESS', 'FOR_REGION'].indexOf(project.returnType) !== -1)\"\r\n                  @click.prevent=\"handleUploadToReturn('FOR_REGION');\"\r\n                  variant=\"outline-primary\">{{ $t(\"submodules.commission.sent_region\") }}\r\n              </b-button>\r\n              <div v-else-if=\"(['FOR_REGION'].indexOf(project.returnType) !== -1)\" class=\"menu-title text-center w-100\">\r\n                {{ $t(\"submodules.commission.to_sent_to_region\") }}\r\n              </div>\r\n            </b-button-group>\r\n          </div>\r\n        </div>\r\n        <div v-else>\r\n          <b-button\r\n              @click.prevent=\"clickUpload\" variant=\"primary\" block\r\n              v-if=\"(['FOR_PROCESS', 'FOR_COMMISSION'].indexOf(project.returnType) !== -1)\"\r\n          >\r\n            <i class=\"mdi mdi-file-document-outline d-block font-size-16\"></i>\r\n            {{ $t(\"actions.create_new_document\") }}\r\n          </b-button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <upload-file ref=\"file\" @sendFile=\"saveFile\" :cmt=\"true\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport projectService from \"@/shared/services/projectService\";\r\nimport simplebar from \"simplebar-vue\";\r\nimport {getFileSize, successSavedDoc} from \"@/helper\";\r\nimport DocsWithIcons from \"./docsWithIcons\";\r\n\r\nexport default {\r\n  props: {\r\n    project: {\r\n      type: Object,\r\n      default: () => {\r\n      },\r\n    },\r\n  },\r\n  components: {\r\n    simplebar,\r\n    DocsWithIcons,\r\n  },\r\n  data() {\r\n    return {\r\n      params: {\r\n        page: 0,\r\n        itemsPerPage: 20,\r\n      },\r\n      docs: [],\r\n      filePage: 0,\r\n      getFileSize: getFileSize,\r\n      modal: {\r\n        isDocControlModal: false,\r\n        type: '',\r\n      },\r\n      loaderDoc: false,\r\n      fileUploadPath: null,\r\n      viewFileModal: false,\r\n    }\r\n  },\r\n  created() {\r\n    this.listDocs();\r\n  },\r\n  methods: {\r\n    viewFile(uploadPath) {\r\n      if (this.getExt(uploadPath) === \"pdf\") {\r\n        this.fileUploadPath = uploadPath;\r\n        this.viewFileModal = true;\r\n      }\r\n    },\r\n    handleUploadToReturn(returnType) {\r\n      this.modal.type = returnType;\r\n      this.modal.isDocControlModal = true;\r\n    },\r\n    saveDocs() {\r\n      let {type, file} = this.$refs.docsWithIconsRef;\r\n      let id = this.$route.query.id;\r\n      let documentName;\r\n      let saveUrl;\r\n      switch (type) {\r\n        case \"NOTICE\":\r\n          documentName = this.$t('submodules.commission.notice');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"LETTER\":\r\n          documentName = this.$t('submodules.application_before_commission.letter');\r\n          saveUrl = `/project/upload/${id}`;\r\n          break;\r\n        case \"PROTOCOL\":\r\n          documentName = this.$t('column.protocol');\r\n          saveUrl = `/project/upload/${id}`;\r\n          break;\r\n        case \"DECISION\":\r\n          documentName = this.$t('submodules.application_before_commission.draft_decision');\r\n          saveUrl = `/project/upload/${id}`;\r\n          break;\r\n        case \"REFERENCE\":\r\n          documentName = this.$t('submodules.application_before_commission.reference');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"OFFER_NOTICE\":\r\n          documentName = 'Taklif bildirish';\r\n          saveUrl = `/project/upload/${id}`;\r\n          break;\r\n        case \"PROTOCOL_DXA\":\r\n          documentName = this.$t('submodules.application_before_commission.protocol');\r\n          saveUrl = `/project/upload/${id}`;\r\n          break;\r\n        case \"NOTICE_REGION\":\r\n          documentName = this.$t('submodules.commission.notice');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"LETTER_REGION\":\r\n          documentName = this.$t('submodules.application_before_commission.letter');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"LETTER_INVOKE\":\r\n          documentName = this.$t('submodules.commission.doc_button.invoke_letter');\r\n          saveUrl = `/project/upload-invoke-letter/${id}`;\r\n          break;\r\n        case \"LETTER_FINISH\":\r\n          documentName = this.$t('submodules.commission.doc_button.letter');\r\n          saveUrl = `/letter/upload-finish-letter/${this.project.applicationDto.id}`;\r\n          break;\r\n        case \"PROTOCOL_DELAY\":\r\n          documentName = this.$t('submodules.commission.doc_button.protocol');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"PROTOCOL_RESUME\":\r\n          documentName = this.$t('submodules.commission.doc_button.protocol');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"PROTOCOL_SUSPEND\":\r\n          documentName = this.$t('submodules.commission.doc_button.protocol');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"NOTICE_NOT_BELONG\":\r\n          documentName = this.$t('submodules.commission.notice');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"LETTER_NOT_BELONG\":\r\n          documentName = this.$t('submodules.application_before_commission.letter');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"PROTOCOL_COMMISSION\":\r\n          documentName = this.$t('submodules.commission.doc_button.protocol');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"DECISION_COMMISSION\":\r\n          documentName = this.$t('submodules.commission.doc_button.decision');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"COMPROMISE_DECISION\":\r\n          documentName = this.$t('submodules.commission.compromise_decision');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"NOTICE_NOT_COMPLETED\":\r\n          documentName = this.$t('submodules.commission.notice');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"LETTER_NOT_COMPLETED\":\r\n          documentName = this.$t('submodules.application_before_commission.letter');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"PRESCRIPTION_COMMISSION\":\r\n          documentName = this.$t('submodules.commission.doc_button.prescription');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"COMPROMISE_DECISION_DELAY\":\r\n          documentName = this.$t('submodules.commission.doc_button.compromise');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"COMPROMISE_DECISION_RESUME\":\r\n          documentName = this.$t('submodules.commission.doc_button.compromise');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n        case \"COMPROMISE_DECISION_SUSPEND\":\r\n          documentName = this.$t('submodules.commission.doc_button.compromise');\r\n          saveUrl = `/project/upload-to-return/${id}`;\r\n          break;\r\n      }\r\n      if (type && id && saveUrl) {\r\n        this.loaderDoc = true;\r\n        projectService\r\n            .saveDoc(saveUrl, 'docx', file, type, documentName)\r\n            .then((rs) => {\r\n              if (rs.data) {\r\n                this.listDocs();\r\n                this.$emit('get-project-by-id');\r\n                this.modal.isDocControlModal = false;\r\n                successSavedDoc();\r\n                let routeData = this.$router.resolve({\r\n                  name: \"Office-DOCUMENT-commission\",\r\n                  query: {id: rs.data.id, page: \"GET\"},\r\n                });\r\n                // ? Organishim kerak\r\n                window.open(routeData.href, \"_blank\");\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              // this.catchErr(e);\r\n            })\r\n            .finally(() => {\r\n              setTimeout(() => {\r\n                this.loaderDoc = false;\r\n              }, 500);\r\n            });\r\n      }\r\n    },\r\n    saveFile(msg, file) {\r\n      this.leaveFile(msg, file);\r\n    },\r\n    clickUpload() {\r\n      this.modal.isDocControlModal = true;\r\n      this.modal.type = 'OFFER_NOTICE';\r\n      //   this.$refs.file.upld();\r\n    },\r\n    leaveFile(msg, cmt) {\r\n      let id = this.$route.query.id;\r\n      if (id) {\r\n        projectService\r\n            .leaveFile(id, msg, cmt)\r\n            .then((rs) => {\r\n              this.file = null;\r\n              setTimeout(() => {\r\n                this.listDocs();\r\n              }, 300);\r\n            })\r\n            .catch((err) => {\r\n              // this.catchErr(err);\r\n            });\r\n      } else {\r\n        this.$router.go(-1);\r\n      }\r\n    },\r\n    listDocs() {\r\n      let id = this.$route.query.id;\r\n      if (id) {\r\n        projectService\r\n            .listDocsWithSignatoryService(id, this.params)\r\n            .then((rs) => {\r\n              this.docs = rs.data;\r\n              this.handleScroll();\r\n            })\r\n            .catch((err) => {\r\n              // this.catchErr(err);\r\n            });\r\n      } else {\r\n        this.$router.go(-1);\r\n      }\r\n    },\r\n    loadMoreDocs(page) {\r\n      let id = this.$route.query.id;\r\n      if (id) {\r\n        projectService\r\n            .listDocsService(id, {\r\n              page: page,\r\n              itemsPerPage: 20,\r\n            })\r\n            .then(async ({data}) => {\r\n              if (data.list.length > 0) {\r\n                this.docs = this.docs.concat(data.list);\r\n              } else {\r\n                this.filePage + -1;\r\n              }\r\n            });\r\n      } else {\r\n        this.$router.go(-1);\r\n      }\r\n    },\r\n    handleScroll() {\r\n      if (this.$refs.docsRef.$el) {\r\n        setTimeout(() => {\r\n          this.$refs.docsRef.SimpleBar.getScrollElement().scrollTop = 0;\r\n        }, 500);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    const container3 = document.querySelector(\r\n        \"#doc-list .simplebar-content-wrapper\"\r\n    );\r\n    if (container3) {\r\n      container3.scrollTo({top: 500, behavior: \"smooth\"});\r\n    }\r\n    // Contact list actions\r\n    this.$refs.docsRef.SimpleBar.getScrollElement().addEventListener(\r\n        \"scroll\",\r\n        (e) => {\r\n          let {scrollTop, scrollHeight, clientHeight} = event.target;\r\n          const offsetForTrigger = 1;\r\n          if (scrollHeight - clientHeight - offsetForTrigger < scrollTop) {\r\n            // this.loadMoreDocs((this.filePage += 1));\r\n          }\r\n        }\r\n    );\r\n  },\r\n  computed: {\r\n    isCommission() {\r\n      return this.$route.name === 'CommissionProjects'\r\n    },\r\n    isRevision() {\r\n      return this.project.status === 'REVISION'\r\n    },\r\n    notPdfDocFilesCount() {\r\n      return this.docs.filter(d => d.letter.fileType.toLowerCase() !== 'pdf').length\r\n    },\r\n    docsWithoutInvokeLatter() {\r\n      return this.docs.filter(d => d.letter.letterType !== 'LETTER_INVOKE' && d.letter.fileType.toLowerCase() !== 'pdf').length\r\n    },\r\n    canCreateDoc() {\r\n      if (this.project.applicationType === \"FROM_DXA\") {\r\n        switch (this.project.status) {\r\n          case 'CREATED':\r\n            return this.docsWithoutInvokeLatter < 3;\r\n          case 'REVISION_AFTER_COMMISSION':\r\n            return this.notPdfDocFilesCount < 3;\r\n          case 'COMMISSION_REVISION':\r\n            return this.notPdfDocFilesCount < 2;\r\n        }\r\n      }\r\n      if (this.project.applicationType === 'INNER') {\r\n        if (this.isCommission && !this.isRevision) {\r\n          switch (this.project.returnType) {\r\n            case 'FOR_PROCESS':\r\n              return this.docsWithoutInvokeLatter < 3;\r\n          }\r\n        }\r\n      }\r\n      if (this.isCommission && !this.isRevision) {\r\n        switch (this.project.returnType) {\r\n          case 'FOR_FINISH_WORK':\r\n            return this.docsWithoutInvokeLatter < 3;\r\n          case 'FOR_SUSPEND_WORK':\r\n            return this.docsWithoutInvokeLatter < 2;\r\n          case 'FOR_DELAY_WORK':\r\n            return this.docsWithoutInvokeLatter < 2;\r\n          case 'FOR_RESUME_WORK':\r\n            return this.docsWithoutInvokeLatter < 2;\r\n          default:\r\n            return this.docsWithoutInvokeLatter < 1;\r\n        }\r\n      }\r\n      if (this.project.status === \"TEMPORARILY_CLOSED\" && this.project.applicationType === \"INNER\") {\r\n        return true;\r\n      }\r\n      if (!this.isCommission && !this.isRevision) {\r\n        switch (this.project.returnType) {\r\n          case 'FOR_COMMISSION':\r\n            return this.notPdfDocFilesCount < 3;\r\n          case 'FOR_NOT_COMPLETED':\r\n            return this.notPdfDocFilesCount < 2;\r\n          case 'FOR_NOT_BELONG':\r\n            return this.notPdfDocFilesCount < 2;\r\n          case 'FOR_REGION':\r\n            return this.notPdfDocFilesCount < 2;\r\n          case 'FOR_PROCESS':\r\n            return this.notPdfDocFilesCount < 3;\r\n          default:\r\n            return this.docs.length < 2;\r\n        }\r\n      }\r\n      if (!this.isCommission && this.isRevision && this.project.status === 'REVISION') {\r\n        return this.notPdfDocFilesCount < 3\r\n      }\r\n      if (!this.isCommission && this.isRevision) {\r\n        return this.notPdfDocFilesCount < 2\r\n      }\r\n      if (this.isCommission && this.isRevision) {\r\n        return this.notPdfDocFilesCount < 1\r\n      }\r\n      return false\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}