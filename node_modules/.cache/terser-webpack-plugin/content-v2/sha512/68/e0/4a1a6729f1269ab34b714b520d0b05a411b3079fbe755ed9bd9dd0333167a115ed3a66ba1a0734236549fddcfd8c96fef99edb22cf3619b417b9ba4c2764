{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3e9cde26\",\"chunk-b7ba9632\"],{\"014a\":function(e,t,a){\"use strict\";a.r(t);var n=a(\"8468\"),o=(a(\"d81d\"),function(){var e=this,t=e._self._c;return t(\"ValidationObserver\",{ref:\"observer\",scopedSlots:e._u([{key:\"default\",fn:function(a){return Object(n[\"a\"])(a),[t(\"b-card\",{staticClass:\"mt-3\",attrs:{\"no-body\":\"\"}},[t(\"b-card-header\",{staticClass:\"text-center\"},[t(\"b\",{staticStyle:{\"font-size\":\"14px\"}},[e._v(\" \"+e._s(e.$t(\"submodules.doc.applicant\")))])]),t(\"div\",{staticClass:\"p-4\"},[t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseMultiselectWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",\"has-next-page\":e.hasNextPageContractors,searchable:!0,\"allow-empty\":!1,\"preserve-search\":\"\",\"clear-on-select\":!1,loading:e.isLoadingContractors,\"internal-search\":!1,options:e.contractors.map((function(e){return e.id})),label:e.$t(\"column.business_entity\"),placeholder:e.$t(\"submodules.doc.contractor\"),\"custom-label\":e.customLabelContractor,\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1,\"with-create-addition\":\"\"},on:{reachedEndOfList:e.contractorReachedEndOfList,\"search-change\":e.debounceSearchContractors},scopedSlots:e._u([{key:\"append-slot\",fn:function(){return[t(\"b-button\",{staticStyle:{padding:\"2.5px 10px\",\"font-size\":\"1.2rem\"},attrs:{variant:\"outline-primary\"},on:{click:function(t){e.contractorCreateModal=!0}}},[t(\"i\",{staticClass:\"mdi mdi-plus-circle\"})])]},proxy:!0}],null,!0),model:{value:e.editingItem.senderId,callback:function(t){e.$set(e.editingItem,\"senderId\",t)},expression:\"editingItem.senderId\"}}),t(\"BaseModalForCreate\",{attrs:{\"without-list-search\":\"\",\"use-component-save-fn\":\"\",mainApiUrl:\"contractor\",createFormName:\"CreateFormContractor\"},on:{\"new-ref-created-without-list-search\":e.newRefCreated},model:{value:e.contractorCreateModal,callback:function(t){e.contractorCreateModal=t},expression:\"contractorCreateModal\"}})],1),t(\"b-col\",{staticClass:\"float-left\",attrs:{sm:\"12\",md:\"6\"}},[t(\"b-button\",{attrs:{id:\"popover-3\",variant:\"primary\"}},[e._v(e._s(e.$t(\"auth.organisation_data\")))]),t(\"b-popover\",{attrs:{target:\"popover-3\",triggers:\"hover focus\"}},[e.currentPetitionSenderId?t(\"div\",{staticStyle:{\"font-size\":\"14px\"}},[t(\"b\",[e._v(e._s(e.$t(\"column.name\"))+\": \")]),t(\"span\",[e._v(e._s(e.currentPetitionSenderId.fullName))]),e._v(\" \"),t(\"br\"),t(\"br\"),t(\"b\",[e._v(e._s(e.$t(\"column.address\"))+\": \")]),t(\"span\",[e._v(e._s(e.currentPetitionSenderId.address))]),t(\"br\"),t(\"br\"),t(\"b\",[e._v(e._s(e.$t(\"column.director\"))+\": \")]),t(\"span\",[e._v(e._s(e.currentPetitionSenderId.director))]),t(\"br\"),t(\"br\"),t(\"b\",[e._v(e._s(e.$t(\"column.phone_number\"))+\": \")]),t(\"span\",[e._v(e._s(e.currentPetitionSenderId.phoneNumber))])]):t(\"div\",[e._v(\" \"+e._s(e.$t(\"messages.please_select_contractor\"))+\" \")])])],1)],1),t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseInputWithValidation\",{attrs:{\"not-required\":\"\",label:e.$t(\"submodules.doc.entered_number_legal\"),placeholder:e.$t(\"submodules.doc.entered_number_legal\")},model:{value:e.editingItem.numberOfOutgoingDocument,callback:function(t){e.$set(e.editingItem,\"numberOfOutgoingDocument\",t)},expression:\"editingItem.numberOfOutgoingDocument\"}})],1),t(\"b-col\",{staticClass:\"float-left\",attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseDatePickerWithValidation\",{attrs:{\"not-required\":\"\",\"disable-after\":\"\",\"custom-styles\":\"grid-template-columns: 25% 75%;\",label:e.$t(\"submodules.doc.entered_date_legal\"),lang:\"ru\"},model:{value:e.editingItem.dateOfOutgoingDocument,callback:function(t){e.$set(e.editingItem,\"dateOfOutgoingDocument\",t)},expression:\"editingItem.dateOfOutgoingDocument\"}})],1)],1),t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseInputWithValidation\",{attrs:{\"not-required\":\"\",label:e.$t(\"submodules.doc.create_entered_number_legal\"),placeholder:e.$t(\"submodules.doc.create_entered_number_legal\")},model:{value:e.editingItem.numberOfIncomingDocument,callback:function(t){e.$set(e.editingItem,\"numberOfIncomingDocument\",t)},expression:\"editingItem.numberOfIncomingDocument\"}})],1),t(\"b-col\",{staticClass:\"float-left\",attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseDatePickerWithValidation\",{attrs:{\"not-required\":\"\",\"disable-after\":\"\",\"custom-styles\":\"grid-template-columns: 25% 75%;\",label:e.$t(\"submodules.doc.create_entered_date_legal\"),lang:\"ru\"},model:{value:e.editingItem.dateOfIncomingDocument,callback:function(t){e.$set(e.editingItem,\"dateOfIncomingDocument\",t)},expression:\"editingItem.dateOfIncomingDocument\"}})],1)],1),t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseInputWithValidation\",{attrs:{\"not-required\":\"\",label:e.$t(\"submodules.doc.other_contragent\")},model:{value:e.editingItem.nameOfOrganizationWasSent,callback:function(t){e.$set(e.editingItem,\"nameOfOrganizationWasSent\",t)},expression:\"editingItem.nameOfOrganizationWasSent\"}})],1),t(\"b-col\",{staticClass:\"float-left\",attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseDatePickerWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",\"disable-before\":\"\",\"custom-styles\":\"grid-template-columns: 25% 75%;\",label:e.$t(\"submodules.doc.completionTime\"),lang:\"ru\"},model:{value:e.editingItem.completionTime,callback:function(t){e.$set(e.editingItem,\"completionTime\",t)},expression:\"editingItem.completionTime\"}})],1)],1),t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseMultiselectWithValidation\",{attrs:{\"not-required\":\"\",options:e.reception_method.map((function(e){return e.id})),label:e.$t(\"submodules.doc.method_of_reception\"),\"custom-label\":e.customLabelReceptionMethod,placeholder:e.$t(\"submodules.doc.method_of_reception\"),\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},model:{value:e.editingItem.receptionMethodId,callback:function(t){e.$set(e.editingItem,\"receptionMethodId\",t)},expression:\"editingItem.receptionMethodId\"}})],1),t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseMultiselectWithValidation\",{attrs:{\"not-required\":\"\",options:e.appeal_type.map((function(e){return e.id})),label:e.$t(\"submodules.commission.appeal_type.title\"),\"custom-label\":e.customLabelAppealType,placeholder:e.$t(\"submodules.commission.appeal_type.title\"),\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},model:{value:e.editingItem.appealTypeId,callback:function(t){e.$set(e.editingItem,\"appealTypeId\",t)},expression:\"editingItem.appealTypeId\"}})],1)],1),t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseMultiselectWithValidation\",{attrs:{\"not-required\":\"\",options:e.document_status.map((function(e){return e.id})),label:e.$t(\"submodules.commission.document_status.title\"),\"custom-label\":e.customLabelDocumentStatus,placeholder:e.$t(\"submodules.commission.document_status.title\"),\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},model:{value:e.editingItem.documentStatusId,callback:function(t){e.$set(e.editingItem,\"documentStatusId\",t)},expression:\"editingItem.documentStatusId\"}})],1)],1),t(\"from-to-employees\",{ref:\"fromToEmployeesRef\",on:{assignmentChanged:e.assignmentsChanged}}),t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseTextareaWithValidation\",{attrs:{\"not-required\":\"\",\"max-rows\":\"8\",label:e.$t(\"submodules.doc.summary\"),placeholder:e.$t(\"submodules.doc.summary\")},model:{value:e.editingItem.summary,callback:function(t){e.$set(e.editingItem,\"summary\",t)},expression:\"editingItem.summary\"}})],1),t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}})],1),t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"ValidationProvider\",{attrs:{name:\"supplementDoc\",mode:\"passive\"},scopedSlots:e._u([{key:\"default\",fn:function(){return[t(\"BaseFileUploaderWithValidation\",{ref:\"supplementDocUploader\",attrs:{\"not-required\":\"\",\"data-vv-name\":\"supplementDocFile\",\"data-vv-as\":\"SupplementDocFile\",\"max-files\":null,\"max-fileSize\":null,\"label-on-top\":!1,label:e.$t(\"submodules.doc.application_file\")},model:{value:e.editingItem.applicationFiles,callback:function(t){e.$set(e.editingItem,\"applicationFiles\",t)},expression:\"editingItem.applicationFiles\"}})]},proxy:!0}],null,!0)})],1)],1)],1)],1)]}}])})}),s=[],i=a(\"2909\"),r=a(\"c7eb\"),c=a(\"1da1\"),l=(a(\"7db0\"),a(\"14d9\"),a(\"b0c0\"),a(\"e9c4\"),a(\"b64b\"),a(\"d3b7\"),a(\"9992\")),m=a(\"03f4\"),d=\"before-commission/application\",u={name:\"CreateApplicationByLegal\",props:{customIsModeCreate:{type:Boolean,default:!1}},components:{FromToEmployees:l[\"default\"]},data:function(){return{hasNextPageContractors:!1,contractors:[],document_status:[],appeal_type:[],reception_method:[],isLoadingContractors:!1,contractorSearchPayload:{},contractorCreateModal:!1,addContractorModal:!1,currentPetitionSenderId:null,editingItem:{},statuses:[]}},computed:{isModeCreate:function(){return this.customIsModeCreate?this.customIsModeCreate:\"CreateApplicationByLegal\"===this.$route.name},computedObserver:function(){return this.$refs.observer}},methods:{assignmentsChanged:function(){this.editingItem.assignments=JSON.parse(JSON.stringify(this.$refs.fromToEmployeesRef.assignment))},customLabelReceptionMethod:function(e){var t=this.reception_method.find((function(t){return t.id==e}));return t?\"\".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):\"\"},customLabelAppealType:function(e){var t=this.appeal_type.find((function(t){return t.id==e}));return t?\"\".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):\"\"},customLabelDocumentStatus:function(e){var t=this.document_status.find((function(t){return t.id==e}));return t?\"\".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):\"\"},debounceSearchContractors:function(e){var t=this;return Object(c[\"a\"])(Object(r[\"a\"])().mark((function a(){return Object(r[\"a\"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:clearTimeout(t.debounce),t.debounce=setTimeout(Object(c[\"a\"])(Object(r[\"a\"])().mark((function a(){return Object(r[\"a\"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.fetchContractorsWithKeyword(e);case 2:case\"end\":return a.stop()}}),a)}))),1e3);case 2:case\"end\":return a.stop()}}),a)})))()},contractorReachedEndOfList:function(e){e&&!this.isLoadingContractors&&this.fetchContractors()},fetchContractorsWithKeyword:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.contractors=[],this.contractorSearchPayload.page=1,this.contractorSearchPayload.keyword=e||\"\",this.fetchContractors(t)},fetchContractors:function(e){var t=this;return Object(c[\"a\"])(Object(r[\"a\"])().mark((function a(){return Object(r[\"a\"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.contractorSearchPayload.sortBy=[],t.contractorSearchPayload.sortBy.push(\"created\"),t.contractorSearchPayload.sortDesc=[],t.contractorSearchPayload.sortDesc.push(!0),t.isLoadingContractors=!0,a.next=7,m[\"a\"].searchListWithKeyword(\"contractor\",t.contractorSearchPayload,\"by-contractor\").then((function(a){var n;if((n=t.contractors).push.apply(n,Object(i[\"a\"])(a.data.list)),t.hasNextPageContractors=a.data.total/t.contractorSearchPayload.itemsPerPage>t.contractorSearchPayload.page,t.contractorSearchPayload.page+=1,e&&(t.editingItem.contractorId=t.contractors.length?t.contractors[0].id:null),!t.isModeCreate&&t.editingItem.contractorId){var o=t.contractors.find((function(e){return e.id==t.editingItem.contractorId}));!o&&t.editingItem.contractorDto&&t.contractors.push(t.editingItem.contractorDto)}})).catch((function(e){console.log(e),t.contractors=[]})).finally((function(){t.isLoadingContractors=!1}));case 7:case\"end\":return a.stop()}}),a)})))()},customLabelAdContractor:function(e){var t=this.contractors.find((function(t){return t.id==(e.id?e.id:e)}));return t?\"\".concat(t.fullName):\"\"},customLabelContractor:function(e){var t=this.contractors.find((function(t){return t.id==e}));return t?\"\".concat(t.fullName):\"\"},newRefCreated:function(e,t,a){\"CreateFormContractor\"==a?(this.contractors=e,this.editingItem.contractorId=t):\"CreateFormProcess\"==a?this.processes=e:\"CreateFormMailingPurpose\"==a&&(this.mailingPurposes=e)},treeClosed:function(e){this.computedObserver.refs[e].validate()},normalizer:function(e){return e.children&&0!==e.children.length?{id:e.id,label:e.name,children:e.children&&e.children.length>0?e.children:[]}:(delete e.children,{id:e.id,label:e.name})},save:function(){var e=this;this.computedObserver.validate().then((function(t){t?e.editingItem.id?m[\"a\"].update(d,e.editingItem).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t(\"messages.saved_successfully\"),{type:\"success\"})})):m[\"a\"].create(d,e.editingItem).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t(\"messages.saved_successfully\"),{type:\"success\"})})):e.$toast(e.$t(\"messages.fill_required_fields\"),{type:\"error\"})}))}},watch:{\"editingItem.senderId\":{handler:function(e,t){var a=this;this.contractors.map((function(t){return t.id==e?(a.currentPetitionSenderId=t,t):t}))}}},created:function(){var e=this;return Object(c[\"a\"])(Object(r[\"a\"])().mark((function t(){return Object(r[\"a\"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.contractorSearchPayload=Object.assign({},e.var_default_search_payload),e.var_default_search_payload.itemsPerPage=500,!e.isModeCreate){t.next=15;break}return t.next=5,m[\"a\"].getEmpty(d).then((function(t){e.editingItem=t.data})).catch((function(e){console.log(e)}));case 5:return t.next=7,e.fetchContractors();case 7:return t.next=9,m[\"a\"].searchList(\"directory/application/appeal-type\",e.var_default_search_payload,null,!0).then((function(t){e.appeal_type=t.data.list})).catch((function(e){console.log(e)}));case 9:return t.next=11,m[\"a\"].searchList(\"directory/application/document-status\",e.var_default_search_payload,null,!0).then((function(t){e.document_status=t.data.list})).catch((function(e){console.log(e)}));case 11:return t.next=13,m[\"a\"].searchList(\"directory/application/reception-method\",e.var_default_search_payload,null,!0).then((function(t){e.reception_method=t.data.list})).catch((function(e){console.log(e)}));case 13:t.next=17;break;case 15:return t.next=17,m[\"a\"].getById(d,e.$route.params.id,!1).then((function(t){e.editingItem=t.data})).catch((function(e){console.log(e)}));case 17:case\"end\":return t.stop()}}),t)})))()}},p=u,f=(a(\"c983\"),a(\"2877\")),b=Object(f[\"a\"])(p,o,s,!1,null,\"06f92a67\",null);t[\"default\"]=b.exports},\"7db0\":function(e,t,a){\"use strict\";var n=a(\"23e7\"),o=a(\"b727\").find,s=a(\"44d2\"),i=\"find\",r=!0;i in[]&&Array(1)[i]((function(){r=!1})),n({target:\"Array\",proto:!0,forced:r},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},8468:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return n}));a(\"d9e2\");function n(e){if(null==e)throw new TypeError(\"Cannot destructure \"+e)}},9992:function(e,t,a){\"use strict\";a.r(t);a(\"d81d\"),a(\"a434\");var n=function(){var e=this,t=e._self._c;return t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{cols:\"12\"}},[t(\"h5\",{staticClass:\"m-0 text-center\"},[e._v(\" \"+e._s(e.$t(\"submodules.employees.see_doc_chronology\"))+\" \")]),t(\"hr\",{staticClass:\"my-2\"})]),e._l(e.assignment,(function(a,n){return t(\"b-col\",{key:\"from-to-employees-\".concat(n),attrs:{cols:\"12\"}},[t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"4\"}},[t(\"BaseDatePickerWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",\"disable-after\":\"\",label:e.$t(\"column.send_date\"),\"label-on-top\":\"\",\"custom-styles\":\"grid-template-columns: 0 100% 0 !important;\",lang:\"ru\"},model:{value:a.dateOfCreated,callback:function(t){e.$set(a,\"dateOfCreated\",t)},expression:\"member.dateOfCreated\"}})],1),t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseMultiselectWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",options:0==n?e.employees:e.filteredFromEmployees,label:e.$t(\"column.from_whom\"),\"label-on-top\":\"\",\"custom-label\":e.customLabelEmployees,placeholder:\"\",\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},on:{select:e.employeeSelected},scopedSlots:e._u([{key:\"singleLabel\",fn:function(a){return[t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[t(\"strong\",[e._v(e._s(a.option.employeeFullName))])])]),e._v(\" \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:a.option.departmentParentNameUz,nameLt:a.option.departmentParentNameLt,nameRu:a.option.departmentParentNameRu})))])]),e._v(\" / \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:a.option.departmentNameUz,nameLt:a.option.departmentNameLt,nameRu:a.option.departmentNameRu})))])]),t(\"div\",[t(\"span\",{staticClass:\"option__small\"},[t(\"i\",[e._v(e._s(e.getName({nameUz:a.option.positionNameUz,nameLt:a.option.positionNameLt,nameRu:a.option.positionNameRu})))])])])]}},{key:\"option\",fn:function(a){return[t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[t(\"strong\",[e._v(e._s(a.option.employeeFullName))])])]),e._v(\" \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:a.option.departmentParentNameUz,nameLt:a.option.departmentParentNameLt,nameRu:a.option.departmentParentNameRu})))])]),e._v(\" / \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:a.option.departmentNameUz,nameLt:a.option.departmentNameLt,nameRu:a.option.departmentNameRu})))])]),t(\"div\",[t(\"span\",{staticClass:\"option__small\"},[t(\"i\",[e._v(e._s(e.getName({nameUz:a.option.positionNameUz,nameLt:a.option.positionNameLt,nameRu:a.option.positionNameRu})))])])])]}}],null,!0),model:{value:a.fromEmployee,callback:function(t){e.$set(a,\"fromEmployee\",t)},expression:\"member.fromEmployee\"}})],1),t(\"b-col\",{staticClass:\"d-flex align-items-end justify-content-end\",attrs:{sm:\"12\",md:\"2\"}},[n==e.assignment.length-1?t(\"b-btn\",{staticClass:\"mr-2\",attrs:{variant:\"success\",size:\"sm\"},on:{click:e.addMember}},[t(\"i\",{staticClass:\"mdi mdi-plus\"})]):e._e(),e.assignment.length>1&&0!=n?t(\"b-btn\",{attrs:{variant:\"danger\",size:\"sm\"},on:{click:function(t){return e.assignment.splice(n,1)}}},[t(\"i\",{staticClass:\"mdi mdi-trash-can\"})]):e._e()],1)],1),e._l(a.toEmployees,(function(o,s){return t(\"b-row\",{key:\"\".concat(s,\"-toEmployee\")},[t(\"b-col\",{attrs:{sm:\"12\",md:\"4\"}},[t(\"BaseMultiselectWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",options:e.employees,label:e.$t(\"column.to_whom\"),\"label-on-top\":\"\",\"custom-label\":e.customLabelEmployees,placeholder:\"\",\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},on:{select:e.employeeSelected},scopedSlots:e._u([{key:\"singleLabel\",fn:function(a){return[t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[t(\"strong\",[e._v(e._s(a.option.employeeFullName))])])]),e._v(\" \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:a.option.departmentParentNameUz,nameLt:a.option.departmentParentNameLt,nameRu:a.option.departmentParentNameRu})))])]),e._v(\" / \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:a.option.departmentNameUz,nameLt:a.option.departmentNameLt,nameRu:a.option.departmentNameRu})))])]),t(\"div\",[t(\"span\",{staticClass:\"option__small\"},[t(\"i\",[e._v(e._s(e.getName({nameUz:a.option.positionNameUz,nameLt:a.option.positionNameLt,nameRu:a.option.positionNameRu})))])])])]}},{key:\"option\",fn:function(a){return[t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[t(\"strong\",[e._v(e._s(a.option.employeeFullName))])])]),e._v(\" \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:a.option.departmentParentNameUz,nameLt:a.option.departmentParentNameLt,nameRu:a.option.departmentParentNameRu})))])]),e._v(\" / \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:a.option.departmentNameUz,nameLt:a.option.departmentNameLt,nameRu:a.option.departmentNameRu})))])]),t(\"div\",[t(\"span\",{staticClass:\"option__small\"},[t(\"i\",[e._v(e._s(e.getName({nameUz:a.option.positionNameUz,nameLt:a.option.positionNameLt,nameRu:a.option.positionNameRu})))])])])]}}],null,!0),model:{value:o.toEmployee,callback:function(t){e.$set(o,\"toEmployee\",t)},expression:\"toMember.toEmployee\"}})],1),t(\"b-col\",{attrs:{sm:\"12\",md:\"3\"}},[t(\"BaseMultiselectWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",options:e.mailingPurposes.map((function(e){return e.id})),label:e.$t(\"submodules.mailing_purpose.title\"),\"label-on-top\":\"\",placeholder:\"\",\"custom-label\":e.customLabelMailingPurpose,\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},model:{value:o.mailingPurposeId,callback:function(t){e.$set(o,\"mailingPurposeId\",t)},expression:\"toMember.mailingPurposeId\"}})],1),t(\"b-col\",{attrs:{sm:\"12\",md:\"5\"}},[t(\"b-row\",{staticClass:\"align-items-end h-100\"},[n==e.assignment.length-1?t(\"b-col\",{attrs:{sm:\"12\",md:\"7\"}},[t(\"b-form-checkbox\",{attrs:{id:\"isProjectOwner-\".concat(s),name:\"project-owner-checkbox\"},on:{change:function(t){return e.isProjectOwnerChanged(t,n,s)}},model:{value:o.isProjectOwner,callback:function(t){e.$set(o,\"isProjectOwner\",t)},expression:\"toMember.isProjectOwner\"}},[t(\"strong\",[e._v(e._s(e.$t(\"column.is_project_owner\")))]),e._v(\" \"),t(\"span\",{staticStyle:{color:\"red\"}},[e._v(\" *\")])])],1):e._e(),t(\"b-col\",{attrs:{sm:\"12\",md:\"5\"}},[s==a.toEmployees.length-1&&0!=n?t(\"b-btn\",{staticClass:\"mr-2\",attrs:{variant:\"success\",size:\"sm\"},on:{click:function(t){return e.addMemberEmployee(n)}}},[t(\"i\",{staticClass:\"mdi mdi-plus\"})]):e._e(),a.toEmployees.length>1&&0!==n?t(\"b-btn\",{attrs:{variant:\"danger\",size:\"sm\"},on:{click:function(e){return a.toEmployees.splice(s,1)}}},[t(\"i\",{staticClass:\"mdi mdi-trash-can\"})]):e._e()],1)],1)],1)],1)})),t(\"hr\",{staticClass:\"my-2\"})],2)}))],2)},o=[],s=a(\"c7eb\"),i=a(\"1da1\"),r=(a(\"99af\"),a(\"7db0\"),a(\"c740\"),a(\"14d9\"),a(\"d3b7\"),a(\"159b\"),a(\"03f4\")),c={name:\"FromToEmployees\",data:function(){return{mailingPurposeModal:!1,mailingPurposes:[],processModal:!1,processes:[],employees:[],assignment:[{id:null,employeeId:null,toEmployees:[{}]}],filteredFromEmployees:[]}},methods:{isProjectOwnerChanged:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.assignment=this.assignment.map((function(o,s){return a.$set(o,\"toEmployees\",o.toEmployees.map((function(o,i){return t==s&&n==i?a.$set(o,\"isProjectOwner\",e):a.$set(o,\"isProjectOwner\",!1),o}))),o}))},employeeSelected:function(){},addMemberEmployee:function(e){this.assignment[e].toEmployees.push({})},addMember:function(){this.assignment.push({id:this.assignment.length+1,employeeId:null,toEmployees:[{}]}),this.isProjectOwnerChanged(!1)},deleteMember:function(e){0!==e&&this.assignment.splice(e,1)},customLabelMailingPurpose:function(e){var t=this.mailingPurposes.find((function(t){return t.id==e}));return t?\"\".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):\"\"},customLabelProcess:function(e){var t=this.processes.find((function(t){return t.id==e}));return t?\"\".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):\"\"},customLabelEmployees:function(e){var t=this.employees.find((function(t){return t.id==e.id}));return t?\"\".concat(t.employeeFullName,\" (\").concat(this.getName({nameUz:t.departmentParentNameUz,nameLt:t.departmentParentNameLt,nameRu:t.departmentParentNameRu}),\")\"):\"\"}},watch:{assignment:{deep:!0,handler:function(e,t){var a=this;this.$emit(\"assignmentChanged\"),this.filteredFromEmployees=[],e.forEach((function(t){t.toEmployees&&t.toEmployees.length&&t.toEmployees.forEach((function(t){if(t.toEmployee){var n=a.filteredFromEmployees.findIndex((function(e){return e.employeeId==t.toEmployee.employeeId}));if(n<0&&t.toEmployee.employeeId){var o=e.findIndex((function(e){return!(!e.fromEmployee||!e.fromEmployee.employeeId)&&e.fromEmployee.employeeId==t.toEmployee.employeeId}));if(o<0)a.filteredFromEmployees.push(t.toEmployee);else{var s=a.filteredFromEmployees.findIndex((function(e){return e.employeeId==t.toEmployee.employeeId}));s>-1&&a.filteredFromEmployees.splice(s,1)}}}}))}))}}},created:function(){var e=this;return Object(i[\"a\"])(Object(s[\"a\"])().mark((function t(){return Object(s[\"a\"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.var_default_search_payload.itemsPerPage=500,t.next=3,r[\"a\"].searchListWithKeyword(\"user\",e.var_default_search_payload,\"inner\",!0).then((function(t){e.employees=t.data.list})).catch((function(e){console.log(e)}));case 3:return t.next=5,r[\"a\"].searchList(\"before-commission/directory/mailing-purpose\",e.var_default_search_payload,null,!0).then((function(t){e.mailingPurposes=t.data.list})).catch((function(e){console.log(e)}));case 5:case\"end\":return t.stop()}}),t)})))()}},l=c,m=a(\"2877\"),d=Object(m[\"a\"])(l,n,o,!1,null,null,null);t[\"default\"]=d.exports},c333:function(e,t,a){},c983:function(e,t,a){\"use strict\";a(\"c333\")}}]);","extractedComments":[]}