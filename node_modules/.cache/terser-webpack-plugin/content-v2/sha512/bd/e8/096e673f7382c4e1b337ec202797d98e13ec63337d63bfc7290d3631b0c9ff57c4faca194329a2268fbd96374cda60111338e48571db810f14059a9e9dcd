{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-10fb2a66\"],{\"0e70\":function(t,e,a){\"use strict\";a.r(e);var r=a(\"8468\"),n=(a(\"d81d\"),a(\"b0c0\"),function(){var t=this,e=t._self._c;return e(\"ValidationObserver\",{ref:\"observer\",scopedSlots:t._u([{key:\"default\",fn:function(a){return Object(r[\"a\"])(a),[e(\"b-row\",{staticClass:\"mb-3\"},[e(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[e(\"BaseInputWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",label:t.$t(\"column.name\")},model:{value:t.editingItem.name,callback:function(e){t.$set(t.editingItem,\"name\",e)},expression:\"editingItem.name\"}})],1),e(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[e(\"BaseMultiselectWithValidation\",{attrs:{\"not-required\":\"\",\"has-next-page\":t.hasNextPageContractors,searchable:!0,\"preserve-search\":\"\",\"clear-on-select\":!1,loading:t.isLoadingContractors,\"internal-search\":!1,options:t.contractors.map((function(t){return t.inn})),label:t.$t(\"column.inn\"),placeholder:t.$t(\"column.inn\"),\"custom-label\":t.customLabelContractor,\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1,\"with-create-addition\":\"\"},on:{reachedEndOfList:t.contractorReachedEndOfList,\"search-change\":t.debounceSearchContractors},scopedSlots:t._u([{key:\"append-slot\",fn:function(){return[e(\"b-button\",{staticStyle:{padding:\"2.5px 10px\",\"font-size\":\"1.2rem\"},attrs:{variant:\"outline-primary\"},on:{click:function(e){t.contractorCreateModal=!0}}},[e(\"i\",{staticClass:\"mdi mdi-plus-circle\"})])]},proxy:!0}],null,!0),model:{value:t.editingItem.inn,callback:function(e){t.$set(t.editingItem,\"inn\",e)},expression:\"editingItem.inn\"}}),e(\"BaseModalForCreate\",{attrs:{\"without-list-search\":\"\",\"use-component-save-fn\":\"\",mainApiUrl:\"contractor\",createFormName:\"CreateFormContractor\"},on:{\"new-ref-created-without-list-search\":t.newRefCreated},model:{value:t.contractorCreateModal,callback:function(e){t.contractorCreateModal=e},expression:\"contractorCreateModal\"}})],1)],1),e(\"b-row\",{staticClass:\"mb-3\"},[e(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}}),e(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[e(\"BaseInputWithValidation\",{attrs:{rules:\"positiveNotZero\",label:t.$t(\"column.share_percentage\")},model:{value:t.editingItem.percentage,callback:function(e){t.$set(t.editingItem,\"percentage\",e)},expression:\"editingItem.percentage\"}})],1)],1)]}}])})}),o=[],c=a(\"2909\"),s=a(\"c7eb\"),i=a(\"1da1\"),u=(a(\"99af\"),a(\"7db0\"),a(\"14d9\"),a(\"d3b7\"),a(\"03f4\")),d=\"reestr/group-of-individuals\",l={name:\"CreateFormGroupOfIndividuals\",props:{customIsModeCreate:{type:Boolean,default:!1}},components:{},data:function(){return{editingItem:{},hasNextPageContractors:!1,contractors:[],debounce:null,isLoadingContractors:!1,contractorCreateModal:!1,contractorSearchPayload:{}}},computed:{isModeCreate:function(){return this.customIsModeCreate?this.customIsModeCreate:\"CreateGroupOfIndividuals\"===this.$route.name},computedObserver:function(){return this.$refs.observer}},methods:{contractorReachedEndOfList:function(t){t&&!this.isLoadingContractors&&this.fetchContractors()},debounceSearchContractors:function(t){var e=this;return Object(i[\"a\"])(Object(s[\"a\"])().mark((function a(){return Object(s[\"a\"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:clearTimeout(e.debounce),e.debounce=setTimeout(Object(i[\"a\"])(Object(s[\"a\"])().mark((function a(){return Object(s[\"a\"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.fetchContractorsWithKeyword(t);case 2:case\"end\":return a.stop()}}),a)}))),1e3);case 2:case\"end\":return a.stop()}}),a)})))()},customLabelContractor:function(t){var e=this.contractors.find((function(e){return e.inn==t}));return e?\"\".concat(e.inn,\" - \").concat(e.fullName):\"\"},fetchContractorsWithKeyword:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.contractors=[],this.contractorSearchPayload.page=1,this.contractorSearchPayload.keyword=t||\"\",this.fetchContractors(e)},fetchContractors:function(t){var e=this;return Object(i[\"a\"])(Object(s[\"a\"])().mark((function a(){return Object(s[\"a\"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.contractorSearchPayload.sortBy=[],e.contractorSearchPayload.sortBy.push(\"created\"),e.contractorSearchPayload.sortDesc=[],e.contractorSearchPayload.sortDesc.push(!0),e.isLoadingContractors=!0,a.next=7,u[\"a\"].searchListWithKeyword(\"contractor\",e.contractorSearchPayload,\"by-contractor\").then((function(a){var r;(r=e.contractors).push.apply(r,Object(c[\"a\"])(a.data.list)),e.hasNextPageContractors=a.data.total/e.contractorSearchPayload.itemsPerPage>e.contractorSearchPayload.page,e.contractorSearchPayload.page+=1,t&&(e.editingItem.parentId=e.contractors.length?e.contractors[0].id:null)})).catch((function(t){console.log(t),e.contractors=[]})).finally((function(){e.isLoadingContractors=!1}));case 7:case\"end\":return a.stop()}}),a)})))()},newRefCreated:function(t){\"CreateFormContractor\"==t&&this.fetchContractorsWithKeyword(\"\",!0)},save:function(){var t=this;this.computedObserver.validate().then((function(e){e?t.editingItem.id?u[\"a\"].update(d,t.editingItem).then((function(e){t.computedObserver.reset(),t.editingItem=Object.assign({},{}),t.$router.go(-1),t.$toast(t.$t(\"messages.saved_successfully\"),{type:\"success\"})})):u[\"a\"].create(d,t.editingItem).then((function(e){t.computedObserver.reset(),t.editingItem=Object.assign({},{}),t.$router.go(-1),t.$toast(t.$t(\"messages.saved_successfully\"),{type:\"success\"})})):t.$toast(t.$t(\"messages.fill_required_fields\"),{type:\"error\"})}))}},created:function(){var t=this;return Object(i[\"a\"])(Object(s[\"a\"])().mark((function e(){return Object(s[\"a\"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.contractorSearchPayload=Object.assign({},t.var_default_search_payload),e.next=3,t.fetchContractors();case 3:if(t.var_default_search_payload.itemsPerPage=500,!t.isModeCreate){e.next=9;break}return e.next=7,u[\"a\"].getEmpty(d).then((function(e){t.editingItem=e.data})).catch((function(t){console.log(t)}));case 7:e.next=11;break;case 9:return e.next=11,u[\"a\"].getById(d,t.$route.params.id,!1).then((function(e){t.editingItem=e.data})).catch((function(t){console.log(t)}));case 11:case\"end\":return e.stop()}}),e)})))()}},h=l,f=(a(\"33f0\"),a(\"2877\")),m=Object(f[\"a\"])(h,n,o,!1,null,\"3003a55a\",null);e[\"default\"]=m.exports},\"33f0\":function(t,e,a){\"use strict\";a(\"eb40\")},\"7db0\":function(t,e,a){\"use strict\";var r=a(\"23e7\"),n=a(\"b727\").find,o=a(\"44d2\"),c=\"find\",s=!0;c in[]&&Array(1)[c]((function(){s=!1})),r({target:\"Array\",proto:!0,forced:s},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},8468:function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return r}));a(\"d9e2\");function r(t){if(null==t)throw new TypeError(\"Cannot destructure \"+t)}},eb40:function(t,e,a){}}]);","extractedComments":[]}