{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-b7ba9632\"],{\"7db0\":function(e,t,n){\"use strict\";var o=n(\"23e7\"),a=n(\"b727\").find,s=n(\"44d2\"),i=\"find\",m=!0;i in[]&&Array(1)[i]((function(){m=!1})),o({target:\"Array\",proto:!0,forced:m},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},9992:function(e,t,n){\"use strict\";n.r(t);n(\"d81d\"),n(\"a434\");var o=function(){var e=this,t=e._self._c;return t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{cols:\"12\"}},[t(\"h5\",{staticClass:\"m-0 text-center\"},[e._v(\" \"+e._s(e.$t(\"submodules.employees.see_doc_chronology\"))+\" \")]),t(\"hr\",{staticClass:\"my-2\"})]),e._l(e.assignment,(function(n,o){return t(\"b-col\",{key:\"from-to-employees-\".concat(o),attrs:{cols:\"12\"}},[t(\"b-row\",{staticClass:\"mb-3\"},[t(\"b-col\",{attrs:{sm:\"12\",md:\"4\"}},[t(\"BaseDatePickerWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",\"disable-after\":\"\",label:e.$t(\"column.send_date\"),\"label-on-top\":\"\",\"custom-styles\":\"grid-template-columns: 0 100% 0 !important;\",lang:\"ru\"},model:{value:n.dateOfCreated,callback:function(t){e.$set(n,\"dateOfCreated\",t)},expression:\"member.dateOfCreated\"}})],1),t(\"b-col\",{attrs:{sm:\"12\",md:\"6\"}},[t(\"BaseMultiselectWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",options:0==o?e.employees:e.filteredFromEmployees,label:e.$t(\"column.from_whom\"),\"label-on-top\":\"\",\"custom-label\":e.customLabelEmployees,placeholder:\"\",\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},on:{select:e.employeeSelected},scopedSlots:e._u([{key:\"singleLabel\",fn:function(n){return[t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[t(\"strong\",[e._v(e._s(n.option.employeeFullName))])])]),e._v(\" \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:n.option.departmentParentNameUz,nameLt:n.option.departmentParentNameLt,nameRu:n.option.departmentParentNameRu})))])]),e._v(\" / \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:n.option.departmentNameUz,nameLt:n.option.departmentNameLt,nameRu:n.option.departmentNameRu})))])]),t(\"div\",[t(\"span\",{staticClass:\"option__small\"},[t(\"i\",[e._v(e._s(e.getName({nameUz:n.option.positionNameUz,nameLt:n.option.positionNameLt,nameRu:n.option.positionNameRu})))])])])]}},{key:\"option\",fn:function(n){return[t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[t(\"strong\",[e._v(e._s(n.option.employeeFullName))])])]),e._v(\" \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:n.option.departmentParentNameUz,nameLt:n.option.departmentParentNameLt,nameRu:n.option.departmentParentNameRu})))])]),e._v(\" / \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:n.option.departmentNameUz,nameLt:n.option.departmentNameLt,nameRu:n.option.departmentNameRu})))])]),t(\"div\",[t(\"span\",{staticClass:\"option__small\"},[t(\"i\",[e._v(e._s(e.getName({nameUz:n.option.positionNameUz,nameLt:n.option.positionNameLt,nameRu:n.option.positionNameRu})))])])])]}}],null,!0),model:{value:n.fromEmployee,callback:function(t){e.$set(n,\"fromEmployee\",t)},expression:\"member.fromEmployee\"}})],1),t(\"b-col\",{staticClass:\"d-flex align-items-end justify-content-end\",attrs:{sm:\"12\",md:\"2\"}},[o==e.assignment.length-1?t(\"b-btn\",{staticClass:\"mr-2\",attrs:{variant:\"success\",size:\"sm\"},on:{click:e.addMember}},[t(\"i\",{staticClass:\"mdi mdi-plus\"})]):e._e(),e.assignment.length>1&&0!=o?t(\"b-btn\",{attrs:{variant:\"danger\",size:\"sm\"},on:{click:function(t){return e.assignment.splice(o,1)}}},[t(\"i\",{staticClass:\"mdi mdi-trash-can\"})]):e._e()],1)],1),e._l(n.toEmployees,(function(a,s){return t(\"b-row\",{key:\"\".concat(s,\"-toEmployee\")},[t(\"b-col\",{attrs:{sm:\"12\",md:\"4\"}},[t(\"BaseMultiselectWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",options:e.employees,label:e.$t(\"column.to_whom\"),\"label-on-top\":\"\",\"custom-label\":e.customLabelEmployees,placeholder:\"\",\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},on:{select:e.employeeSelected},scopedSlots:e._u([{key:\"singleLabel\",fn:function(n){return[t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[t(\"strong\",[e._v(e._s(n.option.employeeFullName))])])]),e._v(\" \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:n.option.departmentParentNameUz,nameLt:n.option.departmentParentNameLt,nameRu:n.option.departmentParentNameRu})))])]),e._v(\" / \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:n.option.departmentNameUz,nameLt:n.option.departmentNameLt,nameRu:n.option.departmentNameRu})))])]),t(\"div\",[t(\"span\",{staticClass:\"option__small\"},[t(\"i\",[e._v(e._s(e.getName({nameUz:n.option.positionNameUz,nameLt:n.option.positionNameLt,nameRu:n.option.positionNameRu})))])])])]}},{key:\"option\",fn:function(n){return[t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[t(\"strong\",[e._v(e._s(n.option.employeeFullName))])])]),e._v(\" \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:n.option.departmentParentNameUz,nameLt:n.option.departmentParentNameLt,nameRu:n.option.departmentParentNameRu})))])]),e._v(\" / \"),t(\"br\"),t(\"span\",{staticClass:\"option__desc\"},[t(\"span\",{staticClass:\"option__title\"},[e._v(e._s(e.getName({nameUz:n.option.departmentNameUz,nameLt:n.option.departmentNameLt,nameRu:n.option.departmentNameRu})))])]),t(\"div\",[t(\"span\",{staticClass:\"option__small\"},[t(\"i\",[e._v(e._s(e.getName({nameUz:n.option.positionNameUz,nameLt:n.option.positionNameLt,nameRu:n.option.positionNameRu})))])])])]}}],null,!0),model:{value:a.toEmployee,callback:function(t){e.$set(a,\"toEmployee\",t)},expression:\"toMember.toEmployee\"}})],1),t(\"b-col\",{attrs:{sm:\"12\",md:\"3\"}},[t(\"BaseMultiselectWithValidation\",{staticClass:\"required\",attrs:{rules:\"required\",options:e.mailingPurposes.map((function(e){return e.id})),label:e.$t(\"submodules.mailing_purpose.title\"),\"label-on-top\":\"\",placeholder:\"\",\"custom-label\":e.customLabelMailingPurpose,\"open-direction\":\"bottom\",\"max-height\":600,\"show-labels\":!1},model:{value:a.mailingPurposeId,callback:function(t){e.$set(a,\"mailingPurposeId\",t)},expression:\"toMember.mailingPurposeId\"}})],1),t(\"b-col\",{attrs:{sm:\"12\",md:\"5\"}},[t(\"b-row\",{staticClass:\"align-items-end h-100\"},[o==e.assignment.length-1?t(\"b-col\",{attrs:{sm:\"12\",md:\"7\"}},[t(\"b-form-checkbox\",{attrs:{id:\"isProjectOwner-\".concat(s),name:\"project-owner-checkbox\"},on:{change:function(t){return e.isProjectOwnerChanged(t,o,s)}},model:{value:a.isProjectOwner,callback:function(t){e.$set(a,\"isProjectOwner\",t)},expression:\"toMember.isProjectOwner\"}},[t(\"strong\",[e._v(e._s(e.$t(\"column.is_project_owner\")))]),e._v(\" \"),t(\"span\",{staticStyle:{color:\"red\"}},[e._v(\" *\")])])],1):e._e(),t(\"b-col\",{attrs:{sm:\"12\",md:\"5\"}},[s==n.toEmployees.length-1&&0!=o?t(\"b-btn\",{staticClass:\"mr-2\",attrs:{variant:\"success\",size:\"sm\"},on:{click:function(t){return e.addMemberEmployee(o)}}},[t(\"i\",{staticClass:\"mdi mdi-plus\"})]):e._e(),n.toEmployees.length>1&&0!==o?t(\"b-btn\",{attrs:{variant:\"danger\",size:\"sm\"},on:{click:function(e){return n.toEmployees.splice(s,1)}}},[t(\"i\",{staticClass:\"mdi mdi-trash-can\"})]):e._e()],1)],1)],1)],1)})),t(\"hr\",{staticClass:\"my-2\"})],2)}))],2)},a=[],s=n(\"c7eb\"),i=n(\"1da1\"),m=(n(\"99af\"),n(\"7db0\"),n(\"c740\"),n(\"14d9\"),n(\"d3b7\"),n(\"159b\"),n(\"03f4\")),l={name:\"FromToEmployees\",data:function(){return{mailingPurposeModal:!1,mailingPurposes:[],processModal:!1,processes:[],employees:[],assignment:[{id:null,employeeId:null,toEmployees:[{}]}],filteredFromEmployees:[]}},methods:{isProjectOwnerChanged:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.assignment=this.assignment.map((function(a,s){return n.$set(a,\"toEmployees\",a.toEmployees.map((function(a,i){return t==s&&o==i?n.$set(a,\"isProjectOwner\",e):n.$set(a,\"isProjectOwner\",!1),a}))),a}))},employeeSelected:function(){},addMemberEmployee:function(e){this.assignment[e].toEmployees.push({})},addMember:function(){this.assignment.push({id:this.assignment.length+1,employeeId:null,toEmployees:[{}]}),this.isProjectOwnerChanged(!1)},deleteMember:function(e){0!==e&&this.assignment.splice(e,1)},customLabelMailingPurpose:function(e){var t=this.mailingPurposes.find((function(t){return t.id==e}));return t?\"\".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):\"\"},customLabelProcess:function(e){var t=this.processes.find((function(t){return t.id==e}));return t?\"\".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):\"\"},customLabelEmployees:function(e){var t=this.employees.find((function(t){return t.id==e.id}));return t?\"\".concat(t.employeeFullName,\" (\").concat(this.getName({nameUz:t.departmentParentNameUz,nameLt:t.departmentParentNameLt,nameRu:t.departmentParentNameRu}),\")\"):\"\"}},watch:{assignment:{deep:!0,handler:function(e,t){var n=this;this.$emit(\"assignmentChanged\"),this.filteredFromEmployees=[],e.forEach((function(t){t.toEmployees&&t.toEmployees.length&&t.toEmployees.forEach((function(t){if(t.toEmployee){var o=n.filteredFromEmployees.findIndex((function(e){return e.employeeId==t.toEmployee.employeeId}));if(o<0&&t.toEmployee.employeeId){var a=e.findIndex((function(e){return!(!e.fromEmployee||!e.fromEmployee.employeeId)&&e.fromEmployee.employeeId==t.toEmployee.employeeId}));if(a<0)n.filteredFromEmployees.push(t.toEmployee);else{var s=n.filteredFromEmployees.findIndex((function(e){return e.employeeId==t.toEmployee.employeeId}));s>-1&&n.filteredFromEmployees.splice(s,1)}}}}))}))}}},created:function(){var e=this;return Object(i[\"a\"])(Object(s[\"a\"])().mark((function t(){return Object(s[\"a\"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.var_default_search_payload.itemsPerPage=500,t.next=3,m[\"a\"].searchListWithKeyword(\"user\",e.var_default_search_payload,\"inner\",!0).then((function(t){e.employees=t.data.list})).catch((function(e){console.log(e)}));case 3:return t.next=5,m[\"a\"].searchList(\"before-commission/directory/mailing-purpose\",e.var_default_search_payload,null,!0).then((function(t){e.mailingPurposes=t.data.list})).catch((function(e){console.log(e)}));case 5:case\"end\":return t.stop()}}),t)})))()}},r=l,p=n(\"2877\"),c=Object(p[\"a\"])(r,o,a,!1,null,null,null);t[\"default\"]=c.exports}}]);","extractedComments":[]}