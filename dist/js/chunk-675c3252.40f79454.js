(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-675c3252","chunk-23307924"],{"0616":function(e,t,r){},"0e70":function(e,t,r){"use strict";r.r(t);var a=r("8468"),n=(r("b0c0"),r("d81d"),function(){var e=this,t=e._self._c;return t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(r){return Object(a["a"])(r),[t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",label:e.$t("column.name")},model:{value:e.editingItem.name,callback:function(t){e.$set(e.editingItem,"name",t)},expression:"editingItem.name"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{attrs:{"not-required":"","has-next-page":e.hasNextPageContractors,searchable:!0,"preserve-search":"","clear-on-select":!1,loading:e.isLoadingContractors,"internal-search":!1,options:e.contractors.map((function(e){return e.inn})),label:e.$t("column.inn"),placeholder:e.$t("column.inn"),"custom-label":e.customLabelContractor,"open-direction":"bottom","max-height":600,"show-labels":!1,"with-create-addition":""},on:{reachedEndOfList:e.contractorReachedEndOfList,"search-change":e.debounceSearchContractors},scopedSlots:e._u([{key:"append-slot",fn:function(){return[t("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary"},on:{click:function(t){e.contractorCreateModal=!0}}},[t("i",{staticClass:"mdi mdi-plus-circle"})])]},proxy:!0}],null,!0),model:{value:e.editingItem.inn,callback:function(t){e.$set(e.editingItem,"inn",t)},expression:"editingItem.inn"}}),t("BaseModalForCreate",{attrs:{"without-list-search":"","use-component-save-fn":"",mainApiUrl:"contractor",createFormName:"CreateFormContractor"},on:{"new-ref-created-without-list-search":e.newRefCreated},model:{value:e.contractorCreateModal,callback:function(t){e.contractorCreateModal=t},expression:"contractorCreateModal"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}}),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{rules:"positiveNotZero",label:e.$t("column.share_percentage")},model:{value:e.editingItem.percentage,callback:function(t){e.$set(e.editingItem,"percentage",t)},expression:"editingItem.percentage"}})],1)],1)]}}])})}),o=[],c=r("2909"),s=r("c7eb"),i=r("1da1"),u=(r("7db0"),r("d3b7"),r("99af"),r("14d9"),r("03f4")),d="reestr/group-of-individuals",l={name:"CreateFormGroupOfIndividuals",props:{customIsModeCreate:{type:Boolean,default:!1}},components:{},data:function(){return{editingItem:{},hasNextPageContractors:!1,contractors:[],debounce:null,isLoadingContractors:!1,contractorCreateModal:!1,contractorSearchPayload:{}}},computed:{isModeCreate:function(){return this.customIsModeCreate?this.customIsModeCreate:"CreateGroupOfIndividuals"===this.$route.name},computedObserver:function(){return this.$refs.observer}},methods:{contractorReachedEndOfList:function(e){e&&!this.isLoadingContractors&&this.fetchContractors()},debounceSearchContractors:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:clearTimeout(t.debounce),t.debounce=setTimeout(Object(i["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.fetchContractorsWithKeyword(e);case 2:case"end":return r.stop()}}),r)}))),1e3);case 2:case"end":return r.stop()}}),r)})))()},customLabelContractor:function(e){var t=this.contractors.find((function(t){return t.inn==e}));return t?"".concat(t.inn," - ").concat(t.fullName):""},fetchContractorsWithKeyword:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.contractors=[],this.contractorSearchPayload.page=1,this.contractorSearchPayload.keyword=e||"",this.fetchContractors(t)},fetchContractors:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.contractorSearchPayload.sortBy=[],t.contractorSearchPayload.sortBy.push("created"),t.contractorSearchPayload.sortDesc=[],t.contractorSearchPayload.sortDesc.push(!0),t.isLoadingContractors=!0,r.next=7,u["a"].searchListWithKeyword("contractor",t.contractorSearchPayload,"by-contractor").then((function(r){var a;(a=t.contractors).push.apply(a,Object(c["a"])(r.data.list)),t.hasNextPageContractors=r.data.total/t.contractorSearchPayload.itemsPerPage>t.contractorSearchPayload.page,t.contractorSearchPayload.page+=1,e&&(t.editingItem.parentId=t.contractors.length?t.contractors[0].id:null)})).catch((function(e){console.log(e),t.contractors=[]})).finally((function(){t.isLoadingContractors=!1}));case 7:case"end":return r.stop()}}),r)})))()},newRefCreated:function(e){"CreateFormContractor"==e&&this.fetchContractorsWithKeyword("",!0)},save:function(){var e=this;this.computedObserver.validate().then((function(t){t?e.editingItem.id?u["a"].update(d,e.editingItem).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})):u["a"].create(d,e.editingItem).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})):e.$toast(e.$t("messages.fill_required_fields"),{type:"error"})}))}},created:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.contractorSearchPayload=Object.assign({},e.var_default_search_payload),t.next=3,e.fetchContractors();case 3:if(e.var_default_search_payload.itemsPerPage=500,!e.isModeCreate){t.next=9;break}return t.next=7,u["a"].getEmpty(d).then((function(t){e.editingItem=t.data})).catch((function(e){console.log(e)}));case 7:t.next=11;break;case 9:return t.next=11,u["a"].getById(d,e.$route.params.id,!1).then((function(t){e.editingItem=t.data})).catch((function(e){console.log(e)}));case 11:case"end":return t.stop()}}),t)})))()}},f=l,h=(r("5231"),r("2877")),m=Object(h["a"])(f,n,o,!1,null,"3003a55a",null);t["default"]=m.exports},3288:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("base-create-or-update-wrapper",{attrs:{"has-save-suspend":"","custom-title":e.isModeCreate?e.$t("actions.create"):e.$t("actions.update")},on:{save:e.save}},[t("CreateFormGroupOfIndividuals",{ref:"formMain"})],1)},n=[],o=r("c7eb"),c=r("1da1"),s=(r("b0c0"),r("0e70")),i=r("03f4"),u="reestr/group-of-individuals",d={name:"CreateOrUpdate",components:{CreateFormGroupOfIndividuals:s["default"]},data:function(){return{}},computed:{isModeCreate:function(){return"CreateGroupOfIndividuals"===this.$route.name},computedObserver:function(){return this.$refs.formMain.$refs.observer}},methods:{treeClosed:function(e){this.computedObserver.refs[e].validate()},normalizer:function(e){return e.children&&0!==e.children.length?{id:e.id,label:e.name,children:e.children&&e.children.length>0?e.children:[]}:(delete e.children,{id:e.id,label:e.name})},save:function(){var e=this;this.computedObserver.validate().then((function(t){t?e.$refs.formMain.editingItem.id?i["a"].update(u,e.$refs.formMain.editingItem).then((function(t){e.computedObserver.reset(),e.$refs.formMain.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})):i["a"].create(u,e.$refs.formMain.editingItem).then((function(t){e.computedObserver.reset(),e.$refs.formMain.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})):e.$toast(e.$t("messages.fill_required_fields"),{type:"error"})}))}},created:function(){return Object(c["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},l=d,f=(r("6533"),r("2877")),h=Object(f["a"])(l,a,n,!1,null,"7e947e60",null);t["default"]=h.exports},5231:function(e,t,r){"use strict";r("0616")},6533:function(e,t,r){"use strict";r("ce9a")},"7db0":function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").find,o=r("44d2"),c="find",s=!0;c in[]&&Array(1)[c]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(c)},8468:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("d9e2");function a(e){if(null==e)throw new TypeError("Cannot destructure "+e)}},ce9a:function(e,t,r){}}]);