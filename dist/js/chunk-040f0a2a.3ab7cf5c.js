(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-040f0a2a"],{"0604":function(e,t,n){"use strict";n.r(t);var o=n("8468"),i=(n("d81d"),n("7db0"),n("d3b7"),n("a434"),function(){var e=this,t=e._self._c;return t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(n){return Object(o["a"])(n),[t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.name_lt"),placeholder:e.$t("column.name_lt")},on:{input:function(t){return e.editingItem.nameUz=e.toCyrill(t)}},model:{value:e.editingItem.nameLt,callback:function(t){e.$set(e.editingItem,"nameLt",t)},expression:"editingItem.nameLt"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",label:e.$t("column.name_uz"),placeholder:e.$t("column.name_uz")},on:{input:function(t){return e.editingItem.nameLt=e.toLatin(t)}},model:{value:e.editingItem.nameUz,callback:function(t){e.$set(e.editingItem,"nameUz",t)},expression:"editingItem.nameUz"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.name_ru"),placeholder:e.$t("column.name_ru")},model:{value:e.editingItem.nameRu,callback:function(t){e.$set(e.editingItem,"nameRu",t)},expression:"editingItem.nameRu"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{cols:"12"}},[t("h5",{staticClass:"m-0 text-center"},[e._v(" "+e._s(e.$t("column.commission_structure"))+" ")]),t("hr",{staticClass:"my-2"})]),e._l(e.editingItem.directoryCommissionEmployeeDto,(function(n,o){return t("b-col",{key:"from-to-employees-".concat(o),attrs:{cols:"12"}},[t("b",[e._v(e._s(o+1)+".")]),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{cols:"3"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.employees.map((function(e){return e.employeeId})),label:e.$t("column.employee"),"label-on-top":"","custom-label":e.customLabelEmployees,placeholder:"","max-height":600,"show-labels":!1},on:{select:function(t){return e.employeeSelected(t,o+1)}},scopedSlots:e._u([{key:"singleLabel",fn:function(n){return e.employees.find((function(e){return e.employeeId==n.option}))?[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[t("strong",[e._v(e._s(e.employees.find((function(e){return e.employeeId==n.option})).employeeFullName))])])]),e._v(" "),t("br"),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameRu})))])]),e._v(" / "),t("br"),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameRu})))])]),t("div",[t("span",{staticClass:"option__small"},[t("i",[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).positionNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).positionNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).positionNameRu})))])])])]:void 0}},{key:"option",fn:function(n){return e.employees.find((function(e){return e.employeeId==n.option}))?[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[t("strong",[e._v(e._s(e.employees.find((function(e){return e.employeeId==n.option})).employeeFullName))])])]),e._v(" "),t("br"),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameRu})))])]),e._v(" / "),t("br"),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameRu})))])]),t("div",[t("span",{staticClass:"option__small"},[t("i",[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).positionNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).positionNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).positionNameRu})))])])])]:void 0}}],null,!0),model:{value:n.employeeId,callback:function(t){e.$set(n,"employeeId",t)},expression:"emp.employeeId"}})],1),t("b-col",{attrs:{cols:"3"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.commissionPositions.map((function(e){return e.id})),label:e.$t("column.position"),"label-on-top":"",placeholder:"","custom-label":e.customLabelCommissionPositions,"open-direction":"bottom","max-height":600,"show-labels":!1},model:{value:n.commissionPositionId,callback:function(t){e.$set(n,"commissionPositionId",t)},expression:"emp.commissionPositionId"}})],1),t("b-col",{attrs:{cols:"3"}},[t("BaseMultiselectWithValidation",{attrs:{"not-required":"",options:e.employees.map((function(e){return e.employeeId})),label:e.$t("column.substitute"),"label-on-top":"","custom-label":e.customLabelEmployees,placeholder:"","open-direction":"bottom","max-height":600,"show-labels":!1},scopedSlots:e._u([{key:"singleLabel",fn:function(n){return e.employees.find((function(e){return e.employeeId==n.option}))?[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[t("strong",[e._v(e._s(e.employees.find((function(e){return e.employeeId==n.option})).employeeFullName))])])]),e._v(" "),t("br"),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameRu})))])]),e._v(" / "),t("br"),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameRu})))])]),t("div",[t("span",{staticClass:"option__small"},[t("i",[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).positionNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).positionNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).positionNameRu})))])])])]:void 0}},{key:"option",fn:function(n){return e.employees.find((function(e){return e.employeeId==n.option}))?[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[t("strong",[e._v(e._s(e.employees.find((function(e){return e.employeeId==n.option})).employeeFullName))])])]),e._v(" "),t("br"),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).departmentParentNameRu})))])]),e._v(" / "),t("br"),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).departmentNameRu})))])]),t("div",[t("span",{staticClass:"option__small"},[t("i",[e._v(e._s(e.getName({nameUz:e.employees.find((function(e){return e.employeeId==n.option})).positionNameUz,nameLt:e.employees.find((function(e){return e.employeeId==n.option})).positionNameLt,nameRu:e.employees.find((function(e){return e.employeeId==n.option})).positionNameRu})))])])])]:void 0}}],null,!0),model:{value:n.subEmployeeId,callback:function(t){e.$set(n,"subEmployeeId",t)},expression:"emp.subEmployeeId"}})],1),t("b-col",{attrs:{cols:"3"}},[t("b-row",{staticClass:"mt-4"},[t("b-col",{staticClass:"float-left",attrs:{cols:"6"}},[t("b-form-checkbox",{attrs:{id:"isAdmin-".concat(o),name:"project-owner-checkbox"},on:{change:function(t){return e.isAdminChanged(t,o)}},model:{value:n.isAdmin,callback:function(t){e.$set(n,"isAdmin",t)},expression:"emp.isAdmin"}},[t("strong",[e._v(e._s(e.$t("column.is_commission_chairman")))])])],1),t("b-col",{staticClass:"float-right",attrs:{cols:"6"}},[o==e.editingItem.directoryCommissionEmployeeDto.length-1?t("b-btn",{staticClass:"mr-2",attrs:{variant:"success",size:"sm"},on:{click:e.addMember}},[t("i",{staticClass:"mdi mdi-plus"})]):e._e(),e.editingItem.directoryCommissionEmployeeDto.length>1&&0!=o?t("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(t){return e.editingItem.directoryCommissionEmployeeDto.splice(o,1)}}},[t("i",{staticClass:"mdi mdi-trash-can"})]):e._e()],1)],1)],1)],1),t("hr",{staticClass:"my-2"})],1)}))],2)]}}])})}),s=[],a=n("c7eb"),m=n("1da1"),l=(n("b0c0"),n("14d9"),n("99af"),n("03f4")),r="directory/commission/commission-type",c={name:"CreatespecialCommissionType",props:{customIsModeCreate:{type:Boolean,default:!1}},components:{},data:function(){return{editingItem:{},statuses:[],employees:[],commissionPositions:[]}},computed:{isModeCreate:function(){return this.customIsModeCreate?this.customIsModeCreate:"CreatespecialCommissionType"===this.$route.name},computedObserver:function(){return this.$refs.observer}},methods:{isAdminChanged:function(e,t){var n=this;this.editingItem.directoryCommissionEmployeeDto=this.editingItem.directoryCommissionEmployeeDto.map((function(o,i){return t==i?n.$set(o,"isAdmin",e):n.$set(o,"isAdmin",!1),o}))},addMember:function(){this.editingItem.directoryCommissionEmployeeDto.push({commissionPositionId:null,employeeId:null,subEmployeeId:null,isAdmin:!1})},customLabelCommissionPositions:function(e){var t=this.commissionPositions.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelEmployees:function(e){var t=this.employees.find((function(t){return t.employeeId==e}));return t?"".concat(t.employeeFullName," (").concat(this.getName({nameUz:t.departmentParentNameUz,nameLt:t.departmentParentNameLt,nameRu:t.departmentParentNameRu}),")"):""},employeeSelected:function(e,t){this.editingItem.directoryCommissionEmployeeDto.map((function(n){n.id==t&&(n.employeeId=e.id)}))},save:function(){var e=this;this.computedObserver.validate().then((function(t){t?e.editingItem.id?l["a"].update(r,e.editingItem,null,!0).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})):l["a"].create(r,e.editingItem,null,!0).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})):e.$toast(e.$t("messages.fill_required_fields"),{type:"error"})}))},fetchCommissionPosition:function(){var e=this;l["a"].searchList("directory/commission/commission-position",this.var_default_search_payload,null,!0).then((function(t){e.commissionPositions=t.data.list})).catch((function(e){console.log(e)}))},fetchInnerEmployees:function(){var e=this;this.var_default_search_payload.itemsPerPage=1e3,l["a"].searchListWithKeyword("user",this.var_default_search_payload,"inner",!0).then((function(t){e.employees=t.data.list})).catch((function(e){console.log(e)}))}},created:function(){var e=this;return Object(m["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isModeCreate){t.next=5;break}return t.next=3,l["a"].getEmpty(r).then((function(t){e.editingItem=t.data,e.editingItem.directoryCommissionEmployeeDto=[{commissionPositionId:null,employeeId:null,subEmployeeId:null,isAdmin:!1}]})).catch((function(e){console.log(e)}));case 3:t.next=7;break;case 5:return t.next=7,l["a"].getById(r,e.$route.params.id,!1).then((function(t){e.editingItem=t.data,e.editingItem.directoryCommissionEmployeeDto.length||(e.editingItem.directoryCommissionEmployeeDto=[{commissionPositionId:null,employeeId:null,subEmployeeId:null,isAdmin:!1}])})).catch((function(e){console.log(e)}));case 7:return t.next=9,e.fetchInnerEmployees();case 9:return t.next=11,e.fetchCommissionPosition();case 11:case"end":return t.stop()}}),t)})))()}},p=c,u=(n("ad08"),n("2877")),d=Object(u["a"])(p,i,s,!1,null,"48b85f71",null);t["default"]=d.exports},"7db0":function(e,t,n){"use strict";var o=n("23e7"),i=n("b727").find,s=n("44d2"),a="find",m=!0;a in[]&&Array(1)[a]((function(){m=!1})),o({target:"Array",proto:!0,forced:m},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s(a)},8468:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("d9e2");function o(e){if(null==e)throw new TypeError("Cannot destructure "+e)}},ad08:function(e,t,n){"use strict";n("be5e")},be5e:function(e,t,n){}}]);