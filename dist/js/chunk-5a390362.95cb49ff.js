(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a390362"],{2532:function(t,e,i){"use strict";var s=i("23e7"),a=i("e330"),o=i("5a34"),n=i("1d80"),r=i("577e"),c=i("ab13"),l=a("".indexOf);s({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~l(r(n(this)),r(o(t)),arguments.length>1?arguments[1]:void 0)}})},2545:function(t,e,i){"use strict";i("99af");var s=i("f2db"),a={getStatisticInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s["a"].post("statistic-committee/deploy-information",t,e)},getStatisticInfoListWithFilter:function(t,e,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return s["a"].post("statistic-committee/list-with-filter?regionSoatos=".concat(t,"&districtSoatos=").concat(e,"&productCodes=").concat(i,"&issueDate=").concat(a),{},o)},getStatisticInfoProductCodes:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s["a"].get("statistic-committee/get-product-codes",t)},getRegionsWithSoato:function(){return s["a"].get("statistic-committee/get-regions-with-soato")},getDistrictsWithSoato:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e="statistic-committee/get-districts-with-soato";return t&&(e+="?regionIds="+t),s["a"].get(e)},getGeograficalRegionsWithSoatos:function(){return s["a"].get("geographical-region/get-region-soatos")},getGeograficalDistrictsWithSoatos:function(t){return s["a"].get("geographical-region/get-district-soatos?parentId=".concat(t))}};e["a"]=a},"7db0":function(t,e,i){"use strict";var s=i("23e7"),a=i("b727").find,o=i("44d2"),n="find",r=!0;n in[]&&Array(1)[n]((function(){r=!1})),s({target:"Array",proto:!0,forced:r},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o(n)},d8fd:function(t,e,i){"use strict";i.r(e);i("d81d");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"col-md-12 text-center"},[e("div",{staticClass:"h4 mb-4 d-inline-block"},[t._v(t._s(t.$t("submodules.integration.statistics_info.title")))])]),e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-md-3"},[e("base-multiselect-with-validation",{staticClass:"required",attrs:{multiple:"","label-on-top":"",placeholder:"","preserve-search":"","with-create-addition":"","open-direction":"bottom",label:t.$t("submodules.integration.statistics_info.saoto_name"),required:!0,"max-height":600,searchable:!0,"show-labels":!1,"clear-on-select":!1,"close-on-select":!1,"internal-search":!1,"custom-label":t.customLabelRegions,"custom-styles":{display:"block"},options:t.computedRegionOption},model:{value:t.params.regionSoatos,callback:function(e){t.$set(t.params,"regionSoatos",e)},expression:"params.regionSoatos"}})],1),e("div",{staticClass:"col-md-3"},[e("base-multiselect-with-validation",{attrs:{multiple:"","not-required":"","label-on-top":"",placeholder:"","preserve-search":"","with-create-addition":"","open-direction":"bottom",label:t.$t("submodules.integration.statistics_info.district_name"),disabled:!t.params.regionSoatos.length,"max-height":600,searchable:!0,"show-labels":!1,"clear-on-select":!1,"close-on-select":!1,"internal-search":!1,"custom-label":t.customLabelDistrict,"custom-styles":{display:"block"},options:t.computedDistrictOption},model:{value:t.params.districtSoatos,callback:function(e){t.$set(t.params,"districtSoatos",e)},expression:"params.districtSoatos"}})],1),e("div",{staticClass:"col-md-3"},[e("base-multiselect-with-validation",{attrs:{multiple:"","not-required":"","label-on-top":"",placeholder:"","preserve-search":"","with-create-addition":"","open-direction":"bottom",label:t.$t("submodules.integration.statistics_info.tovar"),"max-height":600,searchable:!0,"show-labels":!1,"clear-on-select":!1,"close-on-select":!1,"custom-label":t.customLabelProducts,"custom-styles":{display:"block"},options:t.productList.map((function(t){return t.productCode}))},model:{value:t.params.productCodes,callback:function(e){t.$set(t.params,"productCodes",e)},expression:"params.productCodes"}})],1),e("div",{staticClass:"col-md-3"},[t._v(" "+t._s(t.$t("submodules.integration.statistics_info.date_inter"))+" "),e("BaseDatePickerWithValidation",{attrs:{"only-form-element":"","not-required":""},model:{value:t.params.issueDate,callback:function(e){t.$set(t.params,"issueDate",e)},expression:"params.issueDate"}})],1),e("div",{staticClass:"col-md-12 text-right my-2"},[t.params.regionSoatos.length?t._e():e("span",{staticClass:"text-pink"},[t._v(t._s(t.$t("submodules.integration.statistics_info.select_a_province_and_search_for_information")))]),e("download-excel",{staticClass:"d-inline px-2",attrs:{data:t.json_data,fields:t.json_fields,header:t.$t("submodules.integration.statistics_info.title"),name:"".concat(t.$t("submodules.integration.statistics_info.title"),".xls"),worksheet:t.$t("submodules.integration.statistics_info.title")}},[e("b-btn",{staticClass:"btn bg-primary",attrs:{type:"button"},on:{click:t.downloadExcel}},[e("i",{staticClass:"mdi mdi-microsoft-excel me-1"}),t._v(" "+t._s(t.$t("actions.download"))+" ")])],1),e("b-btn",{attrs:{variant:"success"},on:{click:t.fetchTableItems}},[t._v(" "+t._s(t.$t("actions.search"))+" ")])],1)]),e("b-table",{staticClass:"custom-b-table",attrs:{id:"my-table",busy:t.loadingTableItems,fields:t.tableFields,items:t.tableItems,bordered:"",hover:"",responsive:"","show-empty":"",small:"",striped:""},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(" "+t._s(t.util_paginate(e.index,t.var_default_search_payload.page,t.totalItems))+" ")]}},{key:"cell(actions)",fn:function(i){return[e("div",{staticClass:"general-table__actions d-flex justify-content-center"},[e("b-btn",{staticClass:"text-decoration-none p-0",staticStyle:{"font-size":"1.2rem","margin-right":"1rem"},attrs:{variant:"link"}},[e("i",{staticClass:"mdi mdi-circle-edit-outline edit",on:{click:function(e){return t.confirmItem(i.item)}}})])],1)]}},{key:"cell(issueDate)",fn:function(e){return[t._v(" "+t._s(t.getDateFormat(e.item.issueDate))+" ")]}},{key:"empty",fn:function(){return[e("h4",{staticClass:"text-center"},[t._v(t._s(t.$t("messages.data_not_found")))])]},proxy:!0},{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center my-2"},[e("b-spinner",{staticClass:"align-middle",attrs:{variant:"primary"}})],1)]},proxy:!0}])})],1)])])])])])},a=[],o=i("2909"),n=i("ade3"),r=(i("99af"),i("fb6a"),i("4de4"),i("d3b7"),i("caad"),i("2532"),i("7db0"),i("14d9"),i("2545")),c={components:{},data:function(){var t;return{loadingTableItems:!1,json_fields:(t={},Object(n["a"])(t,this.$t("submodules.integration.statistics_info.saoto_name"),"regionName"),Object(n["a"])(t,this.$t("submodules.integration.statistics_info.district_name"),"districtName"),Object(n["a"])(t,this.$t("submodules.integration.statistics_info.tovar"),"productName"),Object(n["a"])(t,this.$t("submodules.integration.statistics_info.code_tovar"),"productCode"),Object(n["a"])(t,this.$t("submodules.integration.statistics_info.price"),"price"),Object(n["a"])(t,this.$t("submodules.integration.statistics_info.date_inter"),"issueDate"),t),json_data:[],json_meta:[[{key:"charset",value:"utf-8"}]],searchKeyword:"",optionsTable:[{value:20,text:20},{value:50,text:50},{value:100,text:100},{value:150,text:150},{value:200,text:200}],activeDep:{},tableItems:[],totalItems:0,tableFields:[{label:"#",thClass:"text-center",tdClass:"text-center",sortable:!1,key:"index"},{label:this.$t("submodules.integration.statistics_info.saoto_name"),key:"regionName"},{label:this.$t("submodules.integration.statistics_info.district_name"),key:"districtName"},{label:this.$t("submodules.integration.statistics_info.tovar"),key:"productName"},{label:this.$t("submodules.integration.statistics_info.code_tovar"),key:"productCode"},{label:this.$t("submodules.integration.statistics_info.price"),key:"price"},{label:this.$t("submodules.integration.statistics_info.date_inter"),key:"issueDate"}],searchInterval:null,regionsList:[],districtsList:[],productList:[],params:{page:1,size:100,productCodes:[],regionSoatos:[],districtSoatos:[],issueDate:null}}},computed:{numberOfPages:function(){return!this.totalItems||this.totalItems<=0||this.totalItems<this.var_default_search_payload.itemsPerPage?1:this.totalItems/this.var_default_search_payload.itemsPerPage},computedRegionOption:function(){return["--all"].concat(Object(o["a"])(this.regionsList.map((function(t){return t.regionId}))))},computedDistrictOption:function(){return["--all"].concat(Object(o["a"])(this.districtsList.map((function(t){return t.districtId}))))}},methods:{capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},downloadExcel:function(){this.json_data=this.tableItems},selectList:function(t){this.var_default_search_payload.itemsPerPage="all"===t?this.totalItems:t,this.fetchTableItems()},fetchTableItems:function(){var t=this;if(this.params.regionSoatos.length){this.loadingTableItems=!0;var e=this.regionsList.filter((function(e){var i,s=e.regionId;return null===(i=t.params.regionSoatos)||void 0===i?void 0:i.includes(s)})).map((function(t){var e=t.soato;return e})),i=this.districtsList.filter((function(e){var i,s=e.districtId;return null===(i=t.params.districtSoatos)||void 0===i?void 0:i.includes(s)})).map((function(t){var e=t.soato;return e}));r["a"].getStatisticInfoListWithFilter(e||"",i||"",this.params.productCodes||"",this.params.issueDate||"",!0).then((function(e){var i,s;e.data&&(t.tableItems=e.data.map((function(e){return{regionName:t.getName({nameUz:e.regionNameUz,nameRu:e.regionNameRu,nameEn:e.regionNameEn,nameLt:e.regionNameLt}),districtName:t.getName({nameUz:e.districtNameUz,nameRu:e.districtNameRu,nameEn:e.districtNameEn,nameLt:e.districtNameLt}),districtSoato:e.districtSoato,issueDate:e.issueDate,price:e.price,productCode:e.productCode,productName:e.productName,productUnit:e.productUnit,regionSoato:e.regionSoato}})),t.totalItems=null!==(i=null===(s=e.data)||void 0===s?void 0:s.length)&&void 0!==i?i:0)})).catch((function(e){t.tableItems=[],t.totalItems=0})).finally((function(){t.loadingTableItems=!1}))}},customLabelRegions:function(t){var e=this.regionsList.find((function(e){return e.regionId===t}));return e?(e[this.localeKey("regionName")]||e.regionNameUz||e.regionNameRu||e.regionNameLt)+" - ".concat(e.soato):"--all"===t?this.$t("column.all"):""},customLabelDistrict:function(t){var e=this.districtsList.find((function(e){return e.districtId===t}));return e?(e[this.localeKey("districtName")]||e.districtNameUz||e.districtNameRu||e.districtNameLt)+" - ".concat(e.soato):"--all"===t?this.$t("column.all"):""},customLabelProducts:function(t){var e=this.productList.find((function(e){return e.productCode===t}));return e?e.productName+" - "+e.productCode:""},changeSearchKeyword:function(){var t=this;this.searchInterval&&clearTimeout(this.searchInterval),this.searchInterval=setTimeout((function(){t.fetchTableItems()}),1e3)},confirmItem:function(t){this.$router.push({name:"IntegrationStatisticsInfoConfirm",params:{id:t.id}})},fetchDistricts:function(){var t=this;this.params.regionSoatos.length&&r["a"].getDistrictsWithSoato(this.params.regionSoatos).then((function(e){var i=e.data;t.districtsList=i||[]}))}},created:function(){var t=this;this.var_default_search_payload.itemsPerPage=100,r["a"].getRegionsWithSoato().then((function(e){var i=e.data;t.regionsList=i||[]})),r["a"].getStatisticInfoProductCodes().then((function(e){var i=e.data;t.productList=i||[]})),this.fetchDistricts()},watch:{"var_default_search_payload.page":{handler:function(){this.fetchTableItems()}},"params.regionSoatos":{handler:function(t){var e=t[t.length-1]||null;"--all"===e?this.params.regionSoatos=this.computedRegionOption.slice(1):this.fetchDistricts(),this.params.districtSoatos=[]}},"params.districtSoatos":{handler:function(t){var e=t[t.length-1]||null;"--all"===e&&(this.params.districtSoatos=this.computedDistrictOption.slice(1))}}}},l=c,d=i("2877"),u=Object(d["a"])(l,s,a,!1,null,"d8810f2c",null);e["default"]=u.exports}}]);