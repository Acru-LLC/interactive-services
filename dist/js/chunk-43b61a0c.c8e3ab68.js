(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43b61a0c"],{"365b":function(e,t,s){"use strict";s.r(t);s("caad");var a=function(){var e=this,t=e._self._c;return t("b-row",[t("b-col",{attrs:{cols:"12"}},[t("b-col",{staticClass:"text-center",attrs:{md:"12"}},[t("div",{staticClass:"h4 mb-4 d-inline-block"},[e._v(" "+e._s(e.$t("modules.management.project_lessons.title"))+" ")])]),t("b-card",[t("b-card-body",[t("b-row",{staticClass:"mb-2"},[t("div",{staticClass:"d-inline-block"},[t("div",{staticClass:"search-box me-4 mb-2 d-inline-block"},[t("div",{staticClass:"position-relative"},[t("b-input",{staticClass:"form-control",attrs:{type:"text",placeholder:e.$t("column.search")},on:{input:e.fetchTableItems},model:{value:e.searchKeyword,callback:function(t){e.searchKeyword=t},expression:"searchKeyword"}}),t("i",{staticClass:"bx bx-search-alt search-icon"})],1)])]),t("div",{staticClass:"d-inline-block float-right"},[e.$can("create","project lesson")?t("b-btn",{staticClass:"btn btn-success btn-rounded mb-2 me-2",attrs:{type:"button",to:{name:"ProjectLessonsCreate"}}},[t("i",{staticClass:"mdi mdi-plus me-1"}),e._v(" "+e._s(e.$t("actions.add"))+" ")]):e._e()],1)]),t("b-row",[t("div",{staticClass:"col-md-6"},[t("table",{staticClass:"table table-striped table-bordered table-sm table-hover"},[t("thead",[t("tr",[t("th",[e._v("#")]),t("th",[e._v(e._s(e.$t("column.name")))]),t("th")])]),t("tbody",e._l(e.tableItems,(function(s,a){return t("tr",{key:a,staticClass:"cursor-pointer",class:{"active-lesson":e.playVideo.key===a},on:{click:function(t){return e.handlePlayVideo(s,a)}}},[t("td",{staticStyle:{width:"50px"}},[e._v(" "+e._s(a+1)+" ")]),t("td",[e._v(" "+e._s(s.fileName)+" ")]),t("td",{staticClass:"text-center text-nowrap"},[t("a",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.bottom",value:{content:e.$t("actions.download")},expression:"{content: $t('actions.download')}",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn btn-link p-0 text-black-50 mx-1",attrs:{href:"/"+s.fileUrl,target:"_blank",download:""}},[t("i",{staticClass:"mdi mdi-download font-size-18"})]),e.$can("update","project lesson")?t("b-btn",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.bottom",value:{content:e.$t("actions.edit")},expression:"{content: $t('actions.edit')}",modifiers:{hover:!0,bottom:!0}}],staticClass:"text-decoration-none p-0 mx-1",attrs:{variant:"link"},on:{click:function(t){return e.editItem(s.id)}}},[t("i",{staticClass:"mdi mdi-circle-edit-outline font-size-18"})]):e._e(),e.$can("delete","project lesson")?t("b-btn",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.bottom",value:{content:e.$t("actions.delete")},expression:"{content: $t('actions.delete')}",modifiers:{hover:!0,bottom:!0}}],staticClass:"text-decoration-none text-danger p-0 mx-1",attrs:{variant:"link"},on:{click:function(t){return e.deleteItem(s.id)}}},[t("i",{staticClass:"mdi mdi-trash-can font-size-18"})]):e._e()],1)])})),0)])]),t("div",{staticClass:"col-md-6"},[e.playVideo.item?[["mp3"].includes(e.playVideo.extension)?t("div",{staticClass:"embed-responsive"},[t("audio",{staticClass:"embed-responsive-item",class:null!==e.playVideo.key?"d-block":"d-none",attrs:{controls:"",src:"/"+e.playVideo.item.fileUrl}})]):e._e(),["jpg","jpeg","png","gif","webm"].includes(e.playVideo.extension)?t("div",{staticClass:"embed-responsive"},[t("img",{staticClass:"w-100",class:null!==e.playVideo.key?"d-block":"d-none",attrs:{loading:"lazy",src:"/"+e.playVideo.item.fileUrl}})]):e._e(),["mp4","avi","mkv"].includes(e.playVideo.extension)?t("div",{staticClass:"embed-responsive embed-responsive-16by9"},[t("video",{ref:"video",staticClass:"embed-responsive-item",class:null!==e.playVideo.key?"d-block":"d-none",attrs:{controls:"",src:"/"+e.playVideo.item.fileUrl}})]):e._e(),["pdf"].includes(e.playVideo.extension)?t("div",{staticClass:"embed-responsive embed-responsive-16by9"},[t("iframe",{staticClass:"embed-responsive-item",class:null!==e.playVideo.key?"d-block":"d-none",attrs:{frameborder:"0",src:"/"+e.playVideo.item.fileUrl}})]):e._e()]:e._e()],2)])],1)],1)],1)],1)},i=[],o=(s("14d9"),s("d3b7"),s("03f4")),l="project-lesson",n={components:{},data:function(){return{loadingTableItems:!1,searchKeyword:"",selected:"all",optionsTable:[{value:20,text:20},{value:50,text:50},{value:100,text:100},{value:150,text:150},{value:200,text:200}],tableItems:[],playVideo:{item:null,key:null,extension:""}}},computed:{numberOfPages:function(){return!this.totalItems||this.totalItems<=0||this.totalItems<this.var_default_search_payload.itemsPerPage?1:this.totalItems/this.var_default_search_payload.itemsPerPage}},methods:{handlePlayVideo:function(e,t){var s;(console.log(e,t),this.playVideo.key===t)?(this.playVideo.item=null,this.playVideo.key=null,this.playVideo.extension=""):(this.playVideo.item=e,this.playVideo.key=t,this.playVideo.extension=this.getExt(null!==(s=null===e||void 0===e?void 0:e.fileModifiedName)&&void 0!==s?s:""))},fetchTableItems:function(){var e=this;this.loadingTableItems=!0,this.var_default_search_payload.keyword=this.searchKeyword,this.var_default_search_payload.sortDesc.push(!1),o["a"].searchListWithKeyword(l,this.var_default_search_payload).then((function(t){e.tableItems=t.data.list,e.totalItems=t.data.total,t.data.list.length>0&&t.data.list[0]&&setTimeout((function(){return e.handlePlayVideo(t.data.list[0],0)}),500)})).catch((function(){e.tableItems=[],e.totalItems=0})).finally((function(){e.loadingTableItems=!1}))},editItem:function(e){this.$can("update","project lesson")&&this.$router.push({name:"ProjectLessonsUpdate",params:{id:e}})},viewItem:function(e){this.$router.push({name:"ProjectLessonsView",params:{id:e}})},deleteItem:function(e){var t=this;this.$can("delete","project lesson")&&this.$bvModal.msgBoxConfirm(this.$t("messages.delete_title"),{okTitle:this.$t("actions.confirm"),cancelTitle:this.$t("actions.cancel")}).then((function(s){s&&o["a"].deleteById(l,e).then((function(){t.fetchTableItems()})).catch((function(e){console.log(e)}))})).catch((function(){}))}},created:function(){this.fetchTableItems()},watch:{"var_default_search_payload.page":{handler:function(){this.fetchTableItems()},deep:!0}}},c=n,d=(s("6193"),s("2877")),r=Object(d["a"])(c,a,i,!1,null,"1aba2f54",null);t["default"]=r.exports},6193:function(e,t,s){"use strict";s("71d2")},"71d2":function(e,t,s){}}]);