(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d5a1fc8"],{4325:function(e,t,n){"use strict";n.r(t);var i=n("8468"),r=(n("d81d"),n("99af"),n("fb6a"),function(){var e=this,t=e._self._c;return t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(n){return Object(i["a"])(n),[t("b-row",{staticClass:"mb-3"},[t("b-col",{staticClass:"mb-4 text-bold",attrs:{sm:"12",md:"6"}},[t("div",{staticClass:"base-input-wrapper base-form-input base-form-component"},[t("label",{staticClass:"base-form-component__label",class:{"font-weight-bold":!e.editingItem.isYur}},[e._v(" "+e._s(e.$t("column.yatt_contragent"))+" ")]),t("b-form-checkbox",{attrs:{switch:""},model:{value:e.editingItem.isYur,callback:function(t){e.$set(e.editingItem,"isYur",t)},expression:"editingItem.isYur"}},[t("span",{class:{"font-weight-bold":e.editingItem.isYur}},[e._v(" "+e._s(e.$t("column.legal_contragent"))+" ")])])],1)]),t("b-col",{attrs:{sm:"12",md:"6"}}),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{directives:[{name:"show",rawName:"v-show",value:e.editingItem.isYur,expression:"editingItem.isYur"}],staticClass:"required",attrs:{name:"INN",mask:"#########",placeholder:"123456789","with-input-append":"",rules:{required:e.editingItem.isYur,regex:/\b\d{9}\b/},label:e.$t("column.inn")},on:{blur:e.validateInn,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findContractorByInn.apply(null,arguments)}},scopedSlots:e._u([{key:"append-slot",fn:function(){return[t("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary",id:"contractorSearchButton"},on:{click:e.findContractorByInn}},[t("i",{staticClass:"mdi mdi-account-search"})])]},proxy:!0}],null,!0),model:{value:e.editingItem.inn,callback:function(t){e.$set(e.editingItem,"inn",t)},expression:"editingItem.inn"}}),t("BaseInputWithValidation",{directives:[{name:"show",rawName:"v-show",value:!e.editingItem.isYur,expression:"!editingItem.isYur"}],staticClass:"required",attrs:{name:"PINFL",mask:"##############",placeholder:"12345678901234","with-input-append":"",rules:{required:!e.editingItem.isYur,regex:/\b\d{14}\b/},label:e.$t("column.personal_number")},on:{blur:e.validatePinfl,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.findContractorByPinfl.apply(null,arguments)}},scopedSlots:e._u([{key:"append-slot",fn:function(){return[t("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary",id:"contractorSearchButton"},on:{click:e.findContractorByPinfl}},[t("i",{staticClass:"mdi mdi-account-search"})])]},proxy:!0}],null,!0),model:{value:e.editingItem.pinfl,callback:function(t){e.$set(e.editingItem,"pinfl",t)},expression:"editingItem.pinfl"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{attrs:{"not-required":"","has-next-page":e.hasNextPageContractors,searchable:!0,"preserve-search":"","clear-on-select":!1,loading:e.isLoadingContractors,"internal-search":!1,options:e.contractors.map((function(e){return e.id})),label:e.$t("column.superior_parent"),placeholder:e.$t("column.contractor"),"custom-label":e.customLabelContractor,"open-direction":"bottom","max-height":600,"show-labels":!1,"with-create-addition":""},on:{reachedEndOfList:e.contractorReachedEndOfList,"search-change":e.debounceSearchContractors},scopedSlots:e._u([{key:"append-slot",fn:function(){return[t("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary"},on:{click:function(t){e.contractorCreateModal=!0}}},[t("i",{staticClass:"mdi mdi-plus-circle"})])]},proxy:!0}],null,!0),model:{value:e.editingItem.parentId,callback:function(t){e.$set(e.editingItem,"parentId",t)},expression:"editingItem.parentId"}}),t("BaseModalForCreate",{attrs:{"without-list-search":"","use-component-save-fn":"",mainApiUrl:"contractor",createFormName:"CreateFormContractor"},on:{"new-ref-created-without-list-search":e.newRefCreated},model:{value:e.contractorCreateModal,callback:function(t){e.contractorCreateModal=t},expression:"contractorCreateModal"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",label:e.$t("column.full_name"),placeholder:e.$t("column.full_name")},model:{value:e.editingItem.fullName,callback:function(t){e.$set(e.editingItem,"fullName",t)},expression:"editingItem.fullName"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",label:e.$t("column.short_name"),placeholder:e.$t("column.short_name")},model:{value:e.editingItem.shortname,callback:function(t){e.$set(e.editingItem,"shortname",t)},expression:"editingItem.shortname"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",label:e.$t("column.director"),placeholder:e.$t("column.director")},model:{value:e.editingItem.director,callback:function(t){e.$set(e.editingItem,"director",t)},expression:"editingItem.director"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.accounter"),placeholder:e.$t("column.accounter")},model:{value:e.editingItem.accounter,callback:function(t){e.$set(e.editingItem,"accounter",t)},expression:"editingItem.accounter"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{rules:{required:!1,regex:/\b\d{5}\b/},mask:"#####",label:e.$t("column.oked"),placeholder:"12345"},model:{value:e.editingItem.oked,callback:function(t){e.$set(e.editingItem,"oked",t)},expression:"editingItem.oked"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.vat_code"),placeholder:e.$t("column.vat_code")},model:{value:e.editingItem.vatCode,callback:function(t){e.$set(e.editingItem,"vatCode",t)},expression:"editingItem.vatCode"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.regions.map((function(e){return e.id})),label:e.$t("column.region"),"custom-label":e.customLabelRegion,placeholder:e.$t("column.region"),"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:e.regionSelected},model:{value:e.editingItem.addressDto.regionId,callback:function(t){e.$set(e.editingItem.addressDto,"regionId",t)},expression:"editingItem.addressDto.regionId"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.districts.map((function(e){return e.id})),label:e.$t("column.district"),"custom-label":e.customLabelDistrict,placeholder:e.$t("column.district"),"open-direction":"bottom","max-height":600,"show-labels":!1},model:{value:e.editingItem.addressDto.districtId,callback:function(t){e.$set(e.editingItem.addressDto,"districtId",t)},expression:"editingItem.addressDto.districtId"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.address"),placeholder:e.$t("column.address")},model:{value:e.editingItem.address,callback:function(t){e.$set(e.editingItem,"address",t)},expression:"editingItem.address"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.mobile_number"),mask:"+998#########",placeholder:"+998#########"},model:{value:e.editingItem.mobileNumber,callback:function(t){e.$set(e.editingItem,"mobileNumber",t)},expression:"editingItem.mobileNumber"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{attrs:{"not-required":"",options:e.formOfOwnerships.map((function(e){return e.id})),label:e.$t("submodules.form_of_ownership.title"),"custom-label":e.customLabelFormOfOwnership,placeholder:"","open-direction":"bottom","max-height":600,"show-labels":!1},model:{value:e.editingItem.formOfOwnershipId,callback:function(t){e.$set(e.editingItem,"formOfOwnershipId",t)},expression:"editingItem.formOfOwnershipId"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.fax_number"),placeholder:e.$t("column.fax_number")},model:{value:e.editingItem.faxNumber,callback:function(t){e.$set(e.editingItem,"faxNumber",t)},expression:"editingItem.faxNumber"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.phone_number"),mask:"+998#########",placeholder:"+998#########"},model:{value:e.editingItem.phoneNumber,callback:function(t){e.$set(e.editingItem,"phoneNumber",t)},expression:"editingItem.phoneNumber"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{rules:"email",label:e.$t("column.mail"),placeholder:e.$t("column.mail")},model:{value:e.editingItem.email,callback:function(t){e.$set(e.editingItem,"email",t)},expression:"editingItem.email"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseSelectWithValidation",{staticClass:"required",attrs:{rules:"required",label:e.$t("column.status"),"value-field":"id"},scopedSlots:e._u([{key:"first",fn:function(){return[t("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v(e._s(e.$t("column.status")))]),e._l(e.statuses,(function(n,i){return t("b-form-select-option",{key:"".concat(n,"-").concat(i),attrs:{value:n.id}},[e._v(" "+e._s(e.getName({nameRu:n.nameRu,nameLt:n.nameLt,nameUz:n.nameUz}))+" ")])}))]},proxy:!0}],null,!0),model:{value:e.editingItem.statusId,callback:function(t){e.$set(e.editingItem,"statusId",t)},expression:"editingItem.statusId"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("div",{staticClass:"form-check form-check-right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editingItem.canRegister,expression:"editingItem.canRegister"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"formCheckIsLegal"},domProps:{checked:Array.isArray(e.editingItem.canRegister)?e._i(e.editingItem.canRegister,null)>-1:e.editingItem.canRegister},on:{change:function(t){var n=e.editingItem.canRegister,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=null,o=e._i(n,a);i.checked?o<0&&e.$set(e.editingItem,"canRegister",n.concat([a])):o>-1&&e.$set(e.editingItem,"canRegister",n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.editingItem,"canRegister",r)}}}),t("label",{staticClass:"form-check-label font-weight-normal",attrs:{for:"formCheckIsLegal"}},[e._v(" "+e._s(e.$t("column.can_login"))+" ")])])])],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{cols:"12"}},[t("h5",{staticClass:"m-0 text-center"},[e._v(" "+e._s(e.$t("column.founders"))+" ")]),t("hr",{staticClass:"my-2"}),t("b-table",{attrs:{items:e.computedFoundersDtos,fields:e.foundersFields,"sticky-header":"400px",bordered:"",small:"",hover:"","show-empty":"",striped:""},scopedSlots:e._u([{key:"cell(index)",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"cell(founderShareSum)",fn:function(t){return[e._v(" "+e._s(e._f("toCurrency")(t.item.founderShareSum))+" ")]}},{key:"cell(type)",fn:function(n){return[t("b-badge",{staticClass:"font-weight-bold",staticStyle:{"font-size":".7rem"},attrs:{variant:n.item.isLegal?"primary":"success"}},[e._v(e._s(n.item.isLegal?e.$t("column.legal_entity"):e.$t("column.individual"))+" ")])]}},{key:"empty",fn:function(){return[t("h4",{staticClass:"text-center"},[e._v(e._s(e.$t("messages.data_not_found")))])]},proxy:!0}],null,!0)})],1)],1)]}}])})}),a=[],o=n("2909"),s=n("c7eb"),d=n("1da1"),c=(n("b0c0"),n("7db0"),n("d3b7"),n("14d9"),n("4de4"),n("498a"),n("25f0"),n("e9c4"),n("c740"),n("03f4")),l=n("887a"),u="contractor",m={name:"CreateFormContractor",props:{customIsModeCreate:{type:Boolean,default:!1}},components:{},data:function(){return{foundersFields:[{label:"#",thClass:"text-center",tdClass:"text-center",sortable:!1,key:"index"},{key:"fullName",label:this.$t("column.name")},{key:"inn",label:this.$t("column.inn")},{key:"pnfl",label:this.$t("column.personal_number")},{key:"type",label:this.$t("column.type")},{key:"founderSharePercent",label:this.$t("column.share_percentage")},{key:"founderShareSum",label:this.$t("column.share_sum")}],originalDto:{addressDto:{},foundersDtos:[]},originalInn:null,originalPinfl:null,hasNextPageContractors:!1,contractors:[],debounce:null,isLoadingContractors:!1,contractorCreateModal:!1,contractorSearchPayload:{},formOfOwnerships:[],regions:[],districts:[],statuses:[],editingItem:{isYur:!0,addressDto:{},foundersDtos:[]},defaultFounder:{founderName:null,percentage:null}}},computed:{isModeCreate:function(){return this.customIsModeCreate?this.customIsModeCreate:"CreateContractor"===this.$route.name},computedObserver:function(){return this.$refs.observer},computedFoundersDtos:function(){var e,t;return(null===(e=this.editingItem.regContractorDto)||void 0===e||null===(t=e.founders)||void 0===t?void 0:t.length)>0?this.editingItem.regContractorDto.founders.map((function(e,t){var n,i,r,a,o,s,d,c,l,u,m,f,g,h;return e.founderIndividual?{index:t,fullName:"".concat(e.founderIndividual.lastName," ").concat(e.founderIndividual.firstName," ").concat(e.founderIndividual.middleName),inn:null!==(n=e.founderIndividual.tin)&&void 0!==n?n:null,pnfl:null!==(i=e.founderIndividual.pinfl)&&void 0!==i?i:null,type:null,isLegal:!1,founderSharePercent:null!==(r=null===(a=e.founderIndividual)||void 0===a?void 0:a.founderSharePercent)&&void 0!==r?r:null,founderShareSum:null!==(o=null===(s=e.founderIndividual)||void 0===s?void 0:s.founderShareSum)&&void 0!==o?o:null}:e.founderLegal?{index:t,fullName:null!==(d=null===(c=e.founderLegal)||void 0===c?void 0:c.name)&&void 0!==d?d:null,inn:null!==(l=null===(u=e.founderLegal)||void 0===u?void 0:u.tin)&&void 0!==l?l:null,pnfl:null,type:null,isLegal:!0,founderSharePercent:null!==(m=null===(f=e.founderLegal)||void 0===f?void 0:f.founderSharePercent)&&void 0!==m?m:null,founderShareSum:null!==(g=null===(h=e.founderLegal)||void 0===h?void 0:h.founderShareSum)&&void 0!==g?g:null}:void 0})):this.editingItem.foundersDtos}},methods:{contractorReachedEndOfList:function(e){e&&!this.isLoadingContractors&&this.fetchContractors()},debounceSearchContractors:function(e){var t=this;return Object(d["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:clearTimeout(t.debounce),t.debounce=setTimeout(Object(d["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.fetchContractorsWithKeyword(e);case 2:case"end":return n.stop()}}),n)}))),1e3);case 2:case"end":return n.stop()}}),n)})))()},customLabelContractor:function(e){var t=this.contractors.find((function(t){return t.id==e}));return t?"".concat(t.fullName):""},fetchContractorsWithKeyword:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.contractors=[],this.contractorSearchPayload.page=1,this.contractorSearchPayload.keyword=e||"",this.fetchContractors(t)},fetchContractors:function(e){var t=this;return Object(d["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.contractorSearchPayload.sortBy=[],t.contractorSearchPayload.sortBy.push("created"),t.contractorSearchPayload.sortDesc=[],t.contractorSearchPayload.sortDesc.push(!0),t.isLoadingContractors=!0,n.next=7,c["a"].searchListWithKeyword("contractor",t.contractorSearchPayload,"by-contractor",!t.customIsModeCreate).then((function(n){var i;(i=t.contractors).push.apply(i,Object(o["a"])(n.data.list)),t.hasNextPageContractors=n.data.total/t.contractorSearchPayload.itemsPerPage>t.contractorSearchPayload.page,t.contractorSearchPayload.page+=1,e&&(t.editingItem.parentId=t.contractors.length?t.contractors[0].id:null)})).catch((function(e){console.log(e),t.contractors=[]})).finally((function(){t.isLoadingContractors=!1}));case 7:case"end":return n.stop()}}),n)})))()},newRefCreated:function(e){"CreateFormContractor"===e&&this.fetchContractorsWithKeyword("",!0)},addFounderDto:function(){var e=Object.assign({},this.defaultFounder);this.editingItem.foundersDtos.push(e)},setDefaultActiveStatus:function(){var e=this.statuses.find((function(e){return"ACTIVE"===e.code}));e&&(this.editingItem.statusId=e.id)},regionSelected:function(e){var t=arguments,n=this;return Object(d["a"])(Object(s["a"])().mark((function i(){var r;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],r||(n.editingItem.addressDto.districtId=null),!e){i.next=5;break}return i.next=5,l["a"].getGeoLocationsByParentId(e).then((function(e){n.districts=e.data})).catch((function(e){console.log(e)}));case 5:case"end":return i.stop()}}),i)})))()},validateInn:function(){var e=this;return Object(d["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].validateInnFromApi(e.editingItem.inn);case 2:return n=t.sent,n.data||e.computedObserver.setErrors({INN:[e.$t("validator.inn")]}),t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))()},validatePinfl:function(){var e=this;return Object(d["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editingItem.pinfl||e.computedObserver.setErrors({pinfl:[e.$t("validator.required")]}),14!==e.editingItem.pinfl.length&&e.computedObserver.setErrors({pinfl:[e.$t("validator.regex")]});case 2:case"end":return t.stop()}}),t)})))()},setFoundersFromSoliq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){var t={contractorId:null,founderAddressId:null,founderContactId:null,founderIndividualId:null,founderLegalId:null,founderSharePercent:e.founderIndividual?e.founderIndividual.founderSharePercent:e.founderLegal?e.founderLegal.founderSharePercent:null,founderShareSum:e.founderIndividual?e.founderIndividual.founderShareSum:e.founderLegal?e.founderLegal.founderShareSum:null,fullName:e.founderLegal?e.founderLegal.name:e.founderIndividual?"".concat(e.founderIndividual.firstName," ").concat(e.founderIndividual.lastName," ").concat(e.founderIndividual.middleName?e.founderIndividual.middleName:""):null,id:null,inn:e.founderLegal?e.founderLegal.tin:e.founderIndividual?e.founderIndividual.tin:null,isLegal:!!e.founderLegal||!e.founderIndividual&&null,pnfl:e.founderIndividual?e.founderIndividual.pinfl:null};if(t.inn)return t}));this.$set(this.editingItem,"foundersDtos",t)},findContractorByInn:function(){var e=this;this.computedObserver.fields.INN.valid&&l["a"].validateInnFromApi(this.editingItem.inn,!0).then((function(t){if(t.data){var n=e.editingItem.isYur;e.editingItem.inn!=e.originalInn?l["a"].getContractorInfoByInnForCreate(e.editingItem.inn,e.editingItem.pinfl,e.editingItem.isYur,!0).then((function(t){e.editingItem=Object.assign({},t.data),e.editingItem.isYur=n,e.setDefaultActiveStatus(),e.regionSelected(e.editingItem.addressDto.regionId,!0),t.data.regContractorDto&&t.data.regContractorDto.founders?e.setFoundersFromSoliq(t.data.regContractorDto.founders):e.setFoundersFromSoliq()})).catch((function(e){})):l["a"].getContractorInfoByInnForUpdate(e.editingItem.inn,e.editingItem.pinfl,e.editingItem.isYur,!0).then((function(t){e.editingItem=Object.assign({},t.data),e.editingItem.isYur=n,e.$set(e.editingItem,"addressDto",e.originalDto.addressDto),e.$set(e.editingItem,"mobileNumber",e.originalDto.mobileNumber),e.$set(e.editingItem,"email",e.originalDto.email),e.$set(e.editingItem,"canRegister",e.originalDto.canRegister),e.setDefaultActiveStatus(),e.regionSelected(e.editingItem.addressDto.regionId,!0),t.data.regContractorDto&&t.data.regContractorDto.founders?e.setFoundersFromSoliq(t.data.regContractorDto.founders):e.setFoundersFromSoliq()})).catch((function(e){}))}else e.computedObserver.setErrors({INN:[e.$t("validator.inn")]})})).catch((function(e){console.log(e)}))},findContractorByPinfl:function(){var e=this;if(this.computedObserver.fields.PINFL.valid)if(this.editingItem.pinfl!==this.originalPinfl){var t=this.editingItem.isYur;l["a"].getContractorInfoByInnForCreate(this.editingItem.inn,this.editingItem.pinfl,this.editingItem.isYur,!0).then((function(n){var i=n.data;e.editingItem=Object.assign({},i),e.editingItem.isYur=t,e.setDefaultActiveStatus(),e.regionSelected(e.editingItem.addressDto.regionId,!0),i.regContractorDto&&i.regContractorDto.founders?e.setFoundersFromSoliq(i.regContractorDto.founders):e.setFoundersFromSoliq()})).catch((function(e){}))}else l["a"].getContractorInfoByInnForUpdate(this.editingItem.inn,this.editingItem.pinfl,this.editingItem.isYur,!0).then((function(t){e.editingItem=Object.assign({},t.data),e.editingItem.isYur=isYur,e.$set(e.editingItem,"addressDto",e.originalDto.addressDto),e.$set(e.editingItem,"mobileNumber",e.originalDto.mobileNumber),e.$set(e.editingItem,"email",e.originalDto.email),e.$set(e.editingItem,"canRegister",e.originalDto.canRegister),e.setDefaultActiveStatus(),e.regionSelected(e.editingItem.addressDto.regionId,!0),t.data.regContractorDto&&t.data.regContractorDto.founders?e.setFoundersFromSoliq(t.data.regContractorDto.founders):e.setFoundersFromSoliq()})).catch((function(e){}))},customLabelDistrict:function(e){var t=this.districts.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelRegion:function(e){var t=this.regions.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelFormOfOwnership:function(e){var t=this.formOfOwnerships.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},save:function(){var e=this;return Object(d["a"])(Object(s["a"])().mark((function t(){var n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateInn();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:e.computedObserver.validate().then((function(t){t?(e.editingItem.foundersDtos&&(e.editingItem.foundersDtos=e.editingItem.foundersDtos.filter((function(e){return e.founderName&&e.founderName.toString().trim().length&&e.percentage}))),e.isModeCreate?c["a"].create(u,e.editingItem,null,!0).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{addressDto:{}}),e.$toast(e.$t("messages.saved_successfully"),{type:"success"}),e.$emit("saved",t.data)})):(e.editingItem.id=e.$route.params.id.toString(),c["a"].update(u,e.editingItem,null,!0).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{addressDto:{}}),e.$toast(e.$t("messages.saved_successfully"),{type:"success"}),e.$emit("saved",t.data)})))):e.$toast(e.$t("messages.fill_required_fields"),{type:"error"})}));case 6:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(d["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.contractorSearchPayload=Object.assign({},e.var_default_search_payload),e.fetchContractors(),e.var_default_search_payload.itemsPerPage=500,!e.isModeCreate){t.next=7;break}c["a"].getEmpty(u,null,!0).then((function(t){e.editingItem=Object.assign({},t.data),e.editingItem.isYur=!0})).catch((function(e){console.log(e)})),t.next=9;break;case 7:return t.next=9,c["a"].getById(u,e.$route.params.id,!0).then((function(t){if(null===t.data.isYur&&(t.data.isYur=Boolean(!t.data.pinfl&&t.data.inn)),e.editingItem=Object.assign({},t.data),console.log(e.editingItem.inn,e.editingItem),e.originalInn=e.editingItem.inn,e.originalPinfl=e.editingItem.pinfl,e.originalDto=JSON.parse(JSON.stringify(t.data)),e.editingItem.parentId){var n=e.contractors.findIndex((function(t){return t.id==e.editingItem.parentId}));n<0&&e.contractors.push(e.editingItem.parent)}})).catch((function(e){console.log(e)}));case 9:l["a"].getRefByCode("status",!0).then((function(t){e.statuses=t.data.children,e.isModeCreate&&e.setDefaultActiveStatus()})).catch((function(e){console.log(e)})),l["a"].fetchRegions(!0).then((function(t){e.regions=t.data,e.regionSelected(e.editingItem.addressDto.regionId,!0)})).catch((function(e){console.log(e)})),c["a"].searchList("directory/form-of-ownerships",e.var_default_search_payload,null,!0).then((function(t){e.formOfOwnerships=t.data.list})).catch((function(e){console.log(e)}));case 12:case"end":return t.stop()}}),t)})))()},watch:{"editingItem.isYur":{handler:function(e,t){console.log(e,t),e!==t&&(this.editingItem={isYur:e,addressDto:{},foundersDtos:[]})},deep:!0}}},f=m,g=(n("d0dd"),n("2877")),h=Object(g["a"])(f,r,a,!1,null,"cf559528",null);t["default"]=h.exports},"498a":function(e,t,n){"use strict";var i=n("23e7"),r=n("58a8").trim,a=n("c8d2");i({target:"String",proto:!0,forced:a("trim")},{trim:function(){return r(this)}})},"81bb":function(e,t,n){},8468:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d9e2");function i(e){if(null==e)throw new TypeError("Cannot destructure "+e)}},c8d2:function(e,t,n){var i=n("5e77").PROPER,r=n("d039"),a=n("5899"),o="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||o[e]()!==o||i&&a[e].name!==e}))}},d0dd:function(e,t,n){"use strict";n("81bb")}}]);