(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e93452c"],{"2c48":function(t,e,a){"use strict";a.r(e);var s=a("8468"),n=(a("d81d"),function(){var t=this,e=t._self._c;return e("base-create-or-update-wrapper",{attrs:{"has-save-suspend":"","custom-title":t.isModeCreate?t.$t("actions.create"):t.$t("actions.update")},on:{save:t.save}},[e("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(a){return Object(s["a"])(a),[e("b-row",{staticClass:"mb-1"},[e("b-col",{attrs:{sm:"11"}},[e("b-row",{staticClass:"mb-1"},[e("b-col",{attrs:{sm:"4"}},[t._v(t._s(t.$t("column.connected_product")))]),e("b-col",{attrs:{sm:"8"}},[t._v(t._s(t.$t("submodules.integration.price_stock.product_name")))])],1)],1),e("b-col",{attrs:{sm:"1"}},[t.isModeCreate?e("b-btn",{attrs:{variant:"success"},on:{click:t.addNewLine}},[e("i",{staticClass:"fa fa-plus"})]):t._e()],1)],1),t._l(t.items,(function(a,s){return e("b-row",{key:s,staticClass:"mb-1"},[e("b-col",{attrs:{sm:"11"}},[e("b-row",{staticClass:"mb-1"},[e("b-col",{attrs:{sm:"4"}},[e("BaseInputWithValidation",{attrs:{rules:"required","label-on-top":"",label:"",placeholder:""},model:{value:a.spProductName,callback:function(e){t.$set(a,"spProductName",e)},expression:"item.spProductName"}})],1),e("b-col",{attrs:{sm:"8"}},[e("BaseMultiselectWithValidation",{attrs:{rules:"required",placeholder:"","label-on-top":"","open-direction":"bottom",label:"",options:t.productList.map((function(t){return t.id})),searchable:!0,"show-labels":!1,"custom-label":t.customLabelProductList},on:{"search-change":t.handleSearchProduct},model:{value:a.productId,callback:function(e){t.$set(a,"productId",e)},expression:"item.productId"}})],1)],1)],1),e("b-col",{attrs:{sm:"1"}},[t.isModeCreate?e("b-btn",{attrs:{variant:"danger"},on:{click:function(e){return t.removeLine(s)}}},[e("i",{staticClass:"fa fa-times"})]):t._e()],1)],1)}))]}}])})],1)}),c=[],r=a("c7eb"),o=a("1da1"),i=a("5530"),u=(a("b0c0"),a("7db0"),a("d3b7"),a("99af"),a("14d9"),a("a434"),a("03f4")),d="price/stock/product-name",l={data:function(){return{empty:{},items:[],productList:[]}},computed:{isModeCreate:function(){return"ReferencesPriceStockProductNameCreate"===this.$route.name},computedObserver:function(){return this.$refs.observer}},methods:{treeClosed:function(t){this.computedObserver.refs[t].validate()},customLabelProductList:function(t){var e=this.productList.find((function(e){return e.id===(t.id?t.id:t)}));return e?this.getName({nameRu:"".concat(e.nameRu," (").concat(e.unitNameRu,")"),nameLt:"".concat(e.nameLt," (").concat(e.unitNameLt,")"),nameUz:"".concat(e.nameUz," (").concat(e.unitNameUz,")")}):""},save:function(){var t=this;this.computedObserver.validate().then((function(e){e?t.items.id?u["a"].update(d,t.items).then((function(e){t.computedObserver.reset(),t.items=[],t.$router.go(-1),t.$toast(t.$t("messages.saved_successfully"),{type:"success"})})):u["a"].create(d,t.items).then((function(e){t.computedObserver.reset(),t.items=[],t.$router.go(-1),t.$toast(t.$t("messages.saved_successfully"),{type:"success"})})):t.$toast(t.$t("messages.fill_required_fields"),{type:"error"})}))},addNewLine:function(){this.items.push(Object(i["a"])({},this.empty))},removeLine:function(t){this.items.splice(t,1)},fetchProducts:function(){var t=this;u["a"].searchList("price/product",{page:1,itemsPerPage:100},"").then((function(e){t.productList=e.data.list})).catch((function(t){console.log(t)})).finally((function(){t.loadingTableItems=!1}))},handleSearchProduct:function(t,e,a){console.log(t,e,a)}},created:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.var_default_search_payload.itemsPerPage=500,e.next=3,u["a"].getEmpty(d).then((function(e){t.empty=e.data})).catch((function(t){console.log(t)}));case 3:if(!t.isModeCreate){e.next=7;break}t.addNewLine(),e.next=9;break;case 7:return e.next=9,u["a"].getById(d,t.$route.params.id,!1).then((function(e){var a=e.data;t.items=[a];var s=t.productList.find((function(t){return t.id===a.productId}));s||u["a"].getById("price/product",a.productId).then((function(e){var a=e.data;t.productList.push(a)}))})).catch((function(t){console.log(t)}));case 9:t.fetchProducts();case 10:case"end":return e.stop()}}),e)})))()}},f=l,m=(a("85af"),a("2877")),p=Object(m["a"])(f,n,c,!1,null,"0c667050",null);e["default"]=p.exports},"7db0":function(t,e,a){"use strict";var s=a("23e7"),n=a("b727").find,c=a("44d2"),r="find",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),s({target:"Array",proto:!0,forced:o},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),c(r)},8468:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("d9e2");function s(t){if(null==t)throw new TypeError("Cannot destructure "+t)}},"85af":function(t,e,a){"use strict";a("dfa4")},dfa4:function(t,e,a){}}]);