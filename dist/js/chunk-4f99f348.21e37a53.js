(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f99f348"],{"4c7d":function(t,e,a){},"5f9e":function(t,e,a){"use strict";a.r(e);a("99af"),a("d81d"),a("7db0"),a("d3b7"),a("b64b");var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"col-md-12 text-center"},[e("div",{staticClass:"h4 mb-4 d-inline-block"},[t._v(t._s(t.$t("submodules.commission.monitor")))])]),e("b-modal",{attrs:{scrollable:"",size:"xl",title:t.$t("actions.view")},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"secondary"},on:{click:function(e){t.viewIlovaModal=!1}}},[t._v(t._s(t.$t("actions.close"))+" ")])]},proxy:!0}]),model:{value:t.viewIlovaModal,callback:function(e){t.viewIlovaModal=e},expression:"viewIlovaModal"}},[t.ilovaUploadPath?e("div",{staticStyle:{height:"700px"}},[e("embed",{attrs:{width:"100%",height:"800",src:"".concat(t.baseUrl,"/").concat(t.ilovaUploadPath),type:"application/pdf"}})]):t._e()]),e("b-modal",{attrs:{scrollable:"",size:"xl",title:t.selectedTrItem.id?t.selectedTrItem.fileName:""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"secondary"},on:{click:function(e){t.viewModal=!1}}},[t._v(t._s(t.$t("actions.close"))+" ")])]},proxy:!0}]),model:{value:t.viewModal,callback:function(e){t.viewModal=e},expression:"viewModal"}},[t.selectedTrItem.url?e("div",{staticStyle:{height:"700px"}},[e("embed",{attrs:{width:"100%",height:"800",src:"".concat(t.baseUrl,"/").concat(t.selectedTrItem.url),type:"application/pdf"}})]):t._e()]),e("b-modal",{attrs:{scrollable:"",size:"xl","body-bg-variant":"light",title:t.selectedTrItem.id?t.selectedTrItem.fileName:""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"secondary"},on:{click:function(e){t.viewModalBeforeSigned=!1}}},[t._v(t._s(t.$t("actions.close"))+" ")])]},proxy:!0}]),model:{value:t.viewModalBeforeSigned,callback:function(e){t.viewModalBeforeSigned=e},expression:"viewModalBeforeSigned"}},[e("b-overlay",{attrs:{variant:"white",opacity:1,show:t.loaderPdf,rounded:"lg"}},[e("div",{staticStyle:{"min-height":"700px"}},[t.base64?e("embed",{staticStyle:{width:"100%"},style:"min-height:".concat(t.heightWindow-250,"px"),attrs:{src:"data:application/pdf;base64, ".concat(t.base64)}}):t._e()])])],1),e("b-modal",{staticStyle:{height:"600px"},attrs:{scrollable:"",size:"md",title:"".concat(t.$t("pharm.attachched_employee"))},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"success"},on:{click:t.openSignatureModalForAttachchedEmployees}},[e("b-overlay",{attrs:{opacity:.1,show:t.attachchedModalLoader,rounded:"sm"}},[t._v(" "+t._s(t.$t("actions.continue"))+" ")])],1)]},proxy:!0}]),model:{value:t.attachchedModal,callback:function(e){t.attachchedModal=e},expression:"attachchedModal"}},[e("div",[e("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:t.employeeAttachched.map((function(t){return t.id})),label:t.$t("assign_employee"),"label-on-top":"",placeholder:"","custom-label":t.customLabelAttachchedEmployees,"open-direction":"bottom","max-height":600,"show-labels":!1},model:{value:t.form1.employeeId,callback:function(e){t.$set(t.form1,"employeeId",e)},expression:"form1.employeeId"}})],1),e("b-form-textarea",{staticClass:"mt-3",attrs:{placeholder:t.$t("submodules.doc.summary"),rows:"5"},model:{value:t.form1.comment,callback:function(e){t.$set(t.form1,"comment",e)},expression:"form1.comment"}})],1),e("b-modal",{attrs:{scrollable:"",size:"md",title:"".concat(t.$t("submodules.reports.reasonRejected"))},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"danger"},on:{click:t.rejectConfirm}},[e("b-overlay",{attrs:{opacity:.1,show:t.rejectedLoader,rounded:"sm"}},[t._v(" "+t._s(t.$t("submodules.reports.rejected"))+" ")])],1)]},proxy:!0}]),model:{value:t.isRejectedModal,callback:function(e){t.isRejectedModal=e},expression:"isRejectedModal"}},[e("b-form-textarea",{attrs:{rows:"5"},model:{value:t.reasonRejected,callback:function(e){t.reasonRejected=e},expression:"reasonRejected"}})],1),e("b-modal",{attrs:{scrollable:"",size:"md",title:t.$t("submodules.dxa.no_permit_required")},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"danger"},on:{click:t.sendNoPermitRequired}},[e("b-overlay",{attrs:{opacity:.1,show:t.loader,rounded:"sm"}},[t._v(" "+t._s(t.$t("actions.send"))+" ")])],1)]},proxy:!0}]),model:{value:t.modalNoPermitRequired,callback:function(e){t.modalNoPermitRequired=e},expression:"modalNoPermitRequired"}},[e("div",[t._v(" "+t._s(t.$t("column.comment"))+" ")]),e("b-form-textarea",{attrs:{rows:"5"},model:{value:t.noPermitRequiredText,callback:function(e){t.noPermitRequiredText=e},expression:"noPermitRequiredText"}})],1),t.activeTab?e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-7"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 pr-1 pl-0 pt-1"},[e("div",{staticClass:"card card-body card-tabs p-2 mb-1",staticStyle:{"min-height":"35em"}},[e("div",{staticClass:"mb-2 overflow-auto"},[e("b-collapse",{staticClass:"mt-2",model:{value:t.applicationStatusDXAFilterCollapse,callback:function(e){t.applicationStatusDXAFilterCollapse=e},expression:"applicationStatusDXAFilterCollapse"}},[e("b-form-radio-group",{staticClass:"btn-custom mb-0",attrs:{"button-variant":"outline-primary",id:"application-statuses-for-filter",buttons:"",name:"application-statuses-for-filter"},model:{value:t.selectedAppStatus,callback:function(e){t.selectedAppStatus=e},expression:"selectedAppStatus"}},[t._l(t.statusCodesForDXAComputedFirst,(function(a,s){return[e("b-form-radio",{key:s,style:a.style,attrs:{value:s,"button-variant":"light"}},[e("span",[t._v(" "+t._s(t.$t(a.label)))]),t.chartDataForDXA.find((function(t){return t.status===s}))&&t.chartDataForDXA.find((function(t){return t.status===s})).count>0?e("b-badge",{staticClass:"ml-1",attrs:{variant:"primary"}},[t._v(t._s(t.chartDataForDXA.find((function(t){return t.status===s})).count)+" ")]):t._e()],1)]}))],2)],1),e("b-button",{staticClass:"my-1",attrs:{variant:"secondary"},on:{click:function(e){t.applicationStatusDXAFilterCollapse=!t.applicationStatusDXAFilterCollapse}}},[t._v(" "+t._s(t.applicationStatusDXAFilterCollapse?t.$t("actions.status_filter_close"):t.$t("actions.status_filter_open"))+" ")]),e("div",{staticClass:"d-inline-block mt-1 float-right"},[e("div",{staticClass:"search-box"},[e("div",{staticClass:"position-relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"form-control rounded bg-light border-light",staticStyle:{width:"300px"},attrs:{type:"text",placeholder:t.$t("actions.search")},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),e("i",{staticClass:"mdi mdi-magnify search-icon"})])])])],1),e("div",{staticClass:"card card-body",staticStyle:{"min-height":"70vh"}},[e("div",{staticClass:"table-responsive"},[e("b-overlay",{attrs:{opacity:.1,show:t.loading,rounded:"sm"}},[e("table",{staticClass:"table table-centered table-striped table-nowrap table-hover"},[e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{staticClass:"text-center",staticStyle:{width:"70px"},attrs:{scope:"col"}},[t._v(" â„– ")]),e("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("pharm.appeal_number"))+" ")]),e("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("pharm.appeal_fio"))+" ")]),e("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("pharm.appeal_date"))+" ")]),e("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("pharm.status"))+" ")])])]),e("tbody",[0===t.appealList.length?e("tr",{staticClass:"text-center"},[e("td",{staticStyle:{"vertical-align":"middle"},style:t.loading?"height:50px":"",attrs:{colspan:"9"}},[e("h5",[t._v(" "+t._s(t.$t("messages.data_not_found"))+" ")])])]):t._e(),t._l(t.appealList,(function(a,s){return e("tr",{key:s+"CREATE_DOC",staticClass:"p_cursor",class:t.selectedTrItem.id==a.id?"bg-soft-primary text-primary":"CANCELED"===a.status?"bg-soft-danger text-danger":"SIGNED"===a.status?"bg-soft-success text-dark":"bg-white text-dark font-weight-bold",on:{click:function(e){return e.preventDefault(),t.selectAppealRowTr(a)}}},[e("td",{staticClass:"text-center"},[e("strong",[t._v(t._s(t.paginate(s,t.limit,t.page-1)))])]),e("td",{staticClass:"text-center",class:s%2===1?"font-weight-bold":""},[t._v(" "+t._s(a.mnumber?a.mnumber:"")+" ")]),e("td",{staticClass:"text-center",class:s%2===1?"font-weight-bold":""},[t._v(" "+t._s(a.consumerLastName)+" "+t._s(a.consumerFirstName)+" "+t._s(a.consumerMiddleName)+" ")]),e("td",{staticClass:"text-center",class:s%2===1?"font-weight-bold":""},[e("p",{staticClass:"pre m-0"},[t._v(" "+t._s(new Date(a.createJson).ddmmyyyyhhmmss())+" ")])]),e("td",{staticClass:"text-center",class:s%2===1?"font-weight-bold":""},["CREATED"===a.status?e("b-badge",{staticClass:"p-1",attrs:{variant:"success"}},[t._v(" "+t._s(t.$t("submodules.commission.doc_status.doc_created"))+" ")]):t._e(),"SEND_TO_REGION"===a.status?e("b-badge",{staticClass:"p-1",attrs:{variant:"success"}},[t._v(" "+t._s(t.$t("pharm.send_to_region"))+" ")]):t._e(),"BEING_SEEN"===a.status?e("b-badge",{staticClass:"p-1",attrs:{variant:"primary"}},[t._v(" "+t._s(t.$t("submodules.commission.doc_status.doc_seen"))+" ")]):t._e()],1)])}))],2)])])],1),t.total>0?e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("b-pagination",{staticClass:"m-0",attrs:{size:"sm","total-rows":t.total,"per-page":t.limit},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)]):t._e()])])])])]),e("div",{staticClass:"col-5"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 pl-1 pr-1 pt-1"},[e("div",{staticClass:"card card-body card-tabs p-2 mb-1",staticStyle:{"min-height":"35em"}},[e("b-tabs",{attrs:{"content-class":"mt-3","no-fade":!0,fill:""},model:{value:t.currentAppDetailsTabIndex,callback:function(e){t.currentAppDetailsTabIndex=e},expression:"currentAppDetailsTabIndex"}},[e("b-tab",{attrs:{title:t.$t("submodules.doc.tab_doc")}},[e("b-overlay",{attrs:{opacity:.1,show:t.loadingById,rounded:"sm"}},[0!==Object.keys(this.selectedAppealTrItem).length?e("div",{staticStyle:{height:"72vh",overflow:"auto"}},[e("table",{staticClass:"table m-0"},[e("tbody",[e("tr",[e("td",{staticClass:"text-left"},[e("b",{staticClass:"mt-3"},[t._v(" "+t._s(t.$t("column.actions")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[e("b-button",{attrs:{variant:"primary"},on:{click:t.setAttachchedEmployees}},[t._v(t._s(t.$t("pharm.attachched_employee")))])],1)])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.appeal_number")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.mnumber)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.consumer")))]),t._v(" "),e("br")])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.consumerFirstName")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.consumerFirstName)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.consumerLastName")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.consumerLastName)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.consumerMiddleName")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.consumerMiddleName)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.consumerPhone")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.consumerPhone)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.consumerPinfl")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.consumerPinfl)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.createJson")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(new Date(t.selectedAppealTrItem.createJson).ddmmyyyyhhmmss())+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.updateJson")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(new Date(t.selectedAppealTrItem.updateJson).ddmmyyyyhhmmss())+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.founderSharePercent")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.founderSharePercent)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.founderShareSum")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.founderShareSum)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.medicationCheckNumber")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.medicationCheckNumber)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.medication")))]),t._v(" "),e("br")])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.medicationName")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.medicationName)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.medicationPaymentDate")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.medicationPaymentDate)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.medicationPaymentPrice")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[e("b-badge",{attrs:{variant:"primary"}},[e("b",{staticClass:"p-1"},[t._v(t._s(t.selectedAppealTrItem.medicationPaymentPrice))])])],1)])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.medicationReferentPrice")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[e("b-badge",{attrs:{variant:"success"}},[e("b",{staticClass:"p-1"},[t._v(t._s(t.selectedAppealTrItem.medicationReferentPrice))])])],1)])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.farq")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[e("b-button",{attrs:{variant:"danger"}},[e("b",{staticClass:"p-1"},[t._v(t._s(t.selectedAppealTrItem.medicationPaymentPrice-t.selectedAppealTrItem.medicationReferentPrice))])])],1)])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.pharmacy")))]),t._v(" "),e("br")])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.pharmacyAddress")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.pharmacyRegionName?t.selectedAppealTrItem.pharmacyRegionName:"")+" "+t._s(t.selectedAppealTrItem.pharmacyDistrictName?t.selectedAppealTrItem.pharmacyDistrictName:"")+" "+t._s(t.selectedAppealTrItem.pharmacyAddress?t.selectedAppealTrItem.pharmacyAddress:"")+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.pharmacyEmail")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.pharmacyEmail)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.pharmacyName")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.pharmacyName)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.pharmacySoato")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.pharmacySoato)+" ")])])]),e("tr",[e("td",{staticClass:"text-left"},[e("b",[t._v(" "+t._s(t.$t("pharm.pharmacyTin")))]),t._v(" "),e("br")]),e("td",{staticClass:"text-right"},[e("span",{staticClass:"text-right",staticStyle:{"font-size":"12px"}},[t._v(" "+t._s(t.selectedAppealTrItem.pharmacyTin)+" ")])])])])])]):0===Object.keys(this.selectedAppealTrItem).length?e("div",{staticClass:"card card-body card-tabs mt-1 text-center",staticStyle:{"min-height":"2em",width:"100%"}},[t._v(" "+t._s(t.$t("messages.data_not_found"))+" ")]):t._e()])],1),e("b-tab",{attrs:{title:t.$t("submodules.doc.tab_doc_tree"),lazy:""}},[e("b-overlay",{attrs:{opacity:.1,show:t.loadingById,rounded:"sm"}},[t.selectedApplicationItem?e("document-tree",{ref:"documentTreeRef",attrs:{"doc-id":t.selectedApplicationItem.id},on:{toggleLoading:t.toggleLoading}}):e("div",{staticClass:"text-center card mt-3"},[e("h5",{staticClass:"p-3",staticStyle:{opacity:"0.3"}},[t._v(" "+t._s(t.$t("submodules.doc.selected_doc"))+" ")])])],1)],1),e("b-tab",{attrs:{title:t.$t("submodules.doc.tab_doc_history"),lazy:""}},[e("b-overlay",{attrs:{opacity:.1,show:t.loadingById,rounded:"sm"}},[t.selectedApplicationItem?e("document-history",{ref:"documentHistoryRef",attrs:{"doc-id":t.selectedApplicationItem.id},on:{toggleLoading:t.toggleLoading}}):e("div",{staticClass:"text-center card mt-3"},[e("h5",{staticClass:"p-3",staticStyle:{opacity:"0.3"}},[t._v(" "+t._s(t.$t("submodules.doc.selected_doc"))+" ")])])],1)],1)],1)],1)])])])])])]):t._e(),e("b-sidebar",{staticClass:"sidebar-part",attrs:{right:"",shadow:"",width:"60%","sidebar-class":"p-0","no-header":!0},model:{value:t.isSidebarRegion,callback:function(e){t.isSidebarRegion=e},expression:"isSidebarRegion"}},[e("Regions",{on:{save:t.save,close:t.closeRegionSidebar}})],1)],1)},i=[],r=a("c7eb"),o=a("1da1"),n=(a("159b"),a("14d9"),a("25f0"),a("c740"),a("2b07")),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card mb-0"},[e("div",{staticClass:"card-body"},[e("b-row",[e("b-col",{staticClass:"font-weight-bold p-3 pl-5"},[t._v(" "+t._s(t.$t("choose_department"))+" ")]),e("b-col",{staticClass:"pr-5 text-sm-end"},[e("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){return t.$emit("close")}}},[e("i",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("actions.close"))+" ")]),t._v("Â  "),e("b-button",{attrs:{variant:"success"},on:{click:t.save}},[e("i",{staticClass:"fa fa-save"}),t._v(" "+t._s(t.$t("actions.save"))+" ")])],1)],1)],1),e("div",{staticClass:"px-4 pb-4"},[e("simplebar",{key:t.cmpKey+"ADS",ref:"contactsRef",style:"height:".concat(t.heightWindow-165,"px"),attrs:{id:"contact-list","data-simplebar-auto-hide":"false"}},[e("ul",{staticClass:"list-unstyled chat-list",attrs:{id:"il"}},t._l(t.regionList,(function(a,s){return e("li",{key:a.id+"EMPLOYEE"+s,attrs:{id:t.regionList[t.regionList.length-1].id==a.id?"lid":""},on:{click:function(e){return t.pushMember(a)}}},[e("a",{attrs:{href:"javascript: void(0);"}},[e("div",{staticClass:"media d-flex",staticStyle:{"align-items":"center"}},[e("div",{staticClass:"align-self-center mr-3"}),e("div",{staticClass:"avatar-sm align-self-center mr-3"},[e("span",{staticClass:"avatar-title rounded-circle bg-soft-primary text-white"})]),e("div",{staticClass:"media-body overflow-hidden"},[e("p",{staticClass:"m-0",class:t.check(a)},[t._v(" "+t._s(t.getName({nameLt:a.parentNameLt,nameRu:a.parentNameRu,nameUz:a.parentNameUz}))+" ")]),e("p",{staticClass:"m-0",class:t.check(a)},[t._v(" "+t._s(t.getName({nameLt:a.nameLt,nameRu:a.nameRu,nameUz:a.nameUz}))+" ")])]),t.check(a)?e("i",{staticClass:"fas fa-check font-size-18 text-primary"}):t._e()])])])})),0)])],1)])},l=[],d=a("8d3b"),u={props:{notIn:{type:Boolean,default:!1},async:{type:Boolean,default:!1}},components:{simplebar:d["a"]},data:function(){return{regionList:[],contactPage:0,members:[],objectMembers:{},groupModal:!1,searchValue:"",cmpKey:0}},methods:{reset:function(){var t=this;this.cmpKey+=1,setTimeout((function(){t.scrollActive()}),200)},scrollActive:function(){this.$refs.contactsRef.SimpleBar&&this.$refs.contactsRef.SimpleBar.getScrollElement().addEventListener("scroll",(function(t){var e=event.target;e.scrollTop,e.scrollHeight,e.clientHeight}))},save:function(){this.$emit("save",this.objectMembers),this.objectMembers={}},pushMember:function(t){t.id==this.objectMembers.id?this.objectMembers={}:this.objectMembers=t},check:function(t){return this.objectMembers.id==t.id&&["font-weight-bold","text-primary"]},getRegions:function(t){var e=this;n["a"].getRegions().then((function(t){e.$nextTick((function(){e.regionList=t.data}))}))}},mounted:function(){var t=document.querySelector("#contact-list .simplebar-content-wrapper");t&&t.scrollTo({top:500,behavior:"smooth"}),this.scrollActive()},created:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getRegions();case 2:case"end":return e.stop()}}),e)})))()},watch:{}},h=u,p=a("2877"),m=Object(p["a"])(h,c,l,!1,null,null,null),f=m.exports,b=(a("1321"),a("4d24")),v=a("2799"),g=a("6275"),_=a("03f4"),C={components:{DocumentTree:b["a"],DocumentHistory:v["a"],Regions:f},watch:{page:function(){this.getList()},searchValue:function(t){this.getList()},selectedAppStatus:{handler:function(){this.isTabDxa?this.getListDXAByStatus():this.getList()}}},data:function(){return{employeeAttachched:[],attachchedModal:!1,attachchedModalLoader:!1,form1:{employeeId:null,pharmId:null,comment:""},loadingMonthlyChartData:!1,loadingChartData:!1,loadingMonthlyChartDataForDXA:!1,loadingChartDataForDXA:!1,statusCodes:{CREATED:{label:this.$t("submodules.commission.doc_status.doc_created"),color:"#74788D"},BEING_SEEN:{label:this.$t("submodules.commission.doc_status.doc_seen"),color:"#F1B44C"},SEEN:{label:this.$t("submodules.commission.doc_status.seen"),color:"#50A5F1"},CANCELLED:{label:this.$t("docs_r.CANCELED"),color:"#F46A6A"},FOR_NOT_COMPLETED_FOR_DXA:{label:this.$t("messages.for_not_completed_dxa"),color:"#623CE8"}},statusCodesForDXA:{DESCENDED:{label:this.$t("submodules.commission.DESCENDED"),color:"#74788D",style:{border:"1px solid #74788D","margin-right":"1px",color:"#74788D"}},NOT_COMPLETED:{label:this.$t("submodules.dxa.not_complete"),color:"#50A5F1",style:{border:"1px solid #50A5F1","margin-right":"1px",color:"#50A5F1"}},RETURN_FOR_COMPLETE:{label:this.$t("messages.return_for_complete"),color:"#F46A6A",style:{border:"1px solid #F46A6A","margin-right":"1px",color:"#F46A6A"}},REJECTED:{label:this.$t("submodules.commission.REJECTED"),color:"#50A5F1",style:{border:"1px solid #50A5F1","margin-right":"1px",color:"#50A5F1"}},RETURN_AFTER_NOT_BELONG:{label:this.$t("submodules.commission.RETURN_AFTER_NOT_BELONG"),color:"#F46A6A",style:{border:"1px solid #F46A6A","margin-right":"1px",color:"#F46A6A"}},EXTENDED:{label:this.$t("submodules.dxa.extended"),color:"#F1B44C",style:{border:"1px solid #F1B44C","margin-right":"1px",color:"#F1B44C"}},FOR_NOT_COMPLETED_FOR_DXA:{label:this.$t("messages.for_not_completed_dxa"),color:"#623CE8",style:{border:"1px solid #623CE8","margin-right":"1px",color:"#623CE8"}},FOR_NOT_BELONG_DXA:{label:this.$t("messages.for_not_belong_dxa"),color:"#F1B44C",style:{border:"1px solid #F1B44C","margin-right":"1px",color:"#F1B44C"}},FOR_EXTENDED_DXA:{label:this.$t("messages.for_extended_dxa"),color:"#a80000",style:{border:"1px solid #a80000","margin-right":"1px",color:"#a80000"}},EXTEND_COMPLETED:{label:this.$t("submodules.commission.EXTEND_COMPLETED"),color:"#50A5F1",style:{border:"1px solid #50A5F1","margin-right":"1px",color:"#50A5F1"}},EXPIRED:{label:this.$t("submodules.commission.EXPIRED"),color:"#50A5F1",style:{border:"1px solid #50A5F1","margin-right":"1px",color:"#50A5F1"}},RETURN_FROM_REGION:{label:this.$t("messages.return_from_region"),color:"#F46A6A",style:{border:"1px solid #F46A6A","margin-right":"1px",color:"#F46A6A"}},RECEIVED:{label:this.$t("submodules.dxa.received"),color:"#F1B44C",style:{border:"1px solid #F1B44C","margin-right":"1px",color:"#F1B44C"}},FOR_REJECTED_DXA:{label:this.$t("messages.for_rejected_dxa"),color:"#b77308",style:{border:"1px solid #b77308","margin-right":"1px",color:"#b77308"}},RETURN_AFTER_REJECTED:{label:this.$t("messages.return_from_region"),color:"#F46A6A",style:{border:"1px solid #F46A6A","margin-right":"1px",color:"#F46A6A"}},FOR_ACCEPTED_DXA:{label:this.$t("messages.for_accepted_dxa"),color:"#ff7100",style:{border:"1px solid #ff7100","margin-right":"1px",color:"#ff7100"}},ACCEPTED:{label:this.$t("messages.accepted_message"),color:"#556EE6",style:{border:"1px solid #556EE6","margin-right":"1px",color:"#556EE6"}}},lineWithDataChart:{chartOptions:{chart:{height:210,type:"line",zoom:{enabled:!1},toolbar:{show:!1}},colors:[],dataLabels:{enabled:!0},stroke:{width:[3,3],curve:"straight"},grid:{row:{colors:["transparent","transparent"],opacity:.2},borderColor:"#f1f1f1"},markers:{style:"inverted",size:6},xaxis:{categories:[]},yaxis:{},responsive:[{breakpoint:600,options:{chart:{toolbar:{show:!1}},legend:{show:!1}}}]},series:[],year:null},lineWithDataChartForDXA:{chartOptions:{chart:{height:210,type:"line",zoom:{enabled:!1},toolbar:{show:!1}},colors:[],dataLabels:{enabled:!0},stroke:{width:[3,3],curve:"straight"},grid:{row:{colors:["transparent","transparent"],opacity:.2},borderColor:"#f1f1f1"},markers:{style:"inverted",size:6},xaxis:{categories:[]},yaxis:{},responsive:[{breakpoint:600,options:{chart:{toolbar:{show:!1}},legend:{show:!1}}}]},series:[],year:null},columnChart:{series:[{name:"",data:[]}],chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{columnWidth:"30%",distributed:!0}},dataLabels:{enabled:!1},legend:{show:!1},colors:[],xaxis:{categories:[],labels:{style:{colors:[],fontSize:"10px",fontWeight:"bold"}}},grid:{borderColor:"#f1f1f1"},fill:{opacity:1},tooltip:{y:{formatter:function(t){return"Soni: "+t+" ta"}}}}},columnChartForDXA:{series:[{name:"",data:[]}],chartOptions:{chart:{toolbar:{show:!1}},plotOptions:{bar:{columnWidth:"30%",distributed:!0}},dataLabels:{enabled:!1},legend:{show:!1},colors:[],xaxis:{categories:[],labels:{style:{colors:[],fontSize:"10px",fontWeight:"bold"}}},grid:{borderColor:"#f1f1f1"},fill:{opacity:1},tooltip:{y:{formatter:function(t){return"Soni: "+t+" ta"}}}}},donutChart:{series:[],chartOptions:{chart:{type:"donut"},labels:[],colors:[],legend:{show:!0,position:"left",horizontalAlign:"center",verticalAlign:"middle",floating:!1,fontSize:"14px",offsetX:0},responsive:[{breakpoint:600,options:{chart:{height:240},legend:{show:!0}}}],dataLabels:{formatter:function(t,e){return e.w.config.series[e.seriesIndex]}}}},donutChartForDXA:{series:[],chartOptions:{chart:{type:"donut"},labels:[],colors:[],legend:{show:!0,position:"left",horizontalAlign:"center",verticalAlign:"middle",floating:!1,fontSize:"14px",offsetX:0},responsive:[{breakpoint:600,options:{chart:{height:240},legend:{show:!0}}}],dataLabels:{formatter:function(t,e){return e.w.config.series[e.seriesIndex]}}}},yearlyChartData:[],chartData:[],yearlyChartDataForDXA:[],chartDataForDXA:[],selectedAppStatus:"CREATED",selectedAppByStatus:{},selectedApplicationItem:{},loadingById:!1,currentAppDetailsTabIndex:0,totalAppsByStatus:0,applicationsByStatus:[],activeTab:"inner",activeDXATab:"FOR_SALE",applicationStatusDXAFilterCollapse:!1,commissionTypeId:null,commissionComment:"",commissionModalLoader:!1,commissionTypes:[],isSidebar:!1,isSidebarRegion:!1,currentPage:1,src:null,selectedRegion:null,numPages:void 0,reasonRejected:"",selectedTrItem:{},selectedAppealTrItem:{},active:"",sendTypeList:[{label:this.$t("column.accept"),value:"SEND_REGION"}],title:this.$t("received"),list:[],appealList:[],searchValue:"",page:1,limit:20,loading:!1,total:1,isModal:!1,currentItem:{},signatureModal:!1,loaderButton:!1,isModalKeys:!1,agreementCount:0,signatureCount:0,reviewCount:0,loaderReceiver:!1,infoData:{},rejectedLoader:!1,isRejectedModal:!1,viewModal:!1,filesList:[],viewModalBeforeSigned:!1,loaderPdf:!1,ilovaUploadPath:null,viewIlovaModal:!1,base64:null,editModal:!1,loader:!1,modalNoPermitRequired:!1,noPermitRequiredApplicationId:null,noPermitRequiredText:"",contextText:""}},created:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getList();case 2:return e.next=4,t.getEmployeesByDepartment();case 4:case"end":return e.stop()}}),e)})))()},computed:{isTabDxa:function(){return"dxa"===this.activeTab},params:function(){return{params:{itemsPerPage:this.limit,page:this.page-1},search:this.searchValue}},statusCodesForDXAComputedFirst:function(){var t=Math.floor(Object.keys(this.statusCodesForDXA).length/2),e={},a=0;for(var s in this.statusCodesForDXA)if(e[s]=this.statusCodesForDXA[s],a++,a>=t)break;return e},statusCodesForDXAComputedSecond:function(){var t=Math.floor(Object.keys(this.statusCodesForDXA).length/2),e={},a=0;for(var s in this.statusCodesForDXA)a++,a<t||(e[s]=this.statusCodesForDXA[s]);return e}},methods:{openSignatureModalForAttachchedEmployees:function(){var t=this;this.attachchedModalLoader=!0,this.form1.employeeId?(this.form1.pharmId=this.selectedAppealTrItem.id,n["a"].setEmployeesAttachchedToAppeal(this.form1).then(function(){var e=Object(o["a"])(Object(r["a"])().mark((function e(a){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$toast(a.data,{type:"success"}),e.next=3,t.getList();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.catchErr(e)})).finally((function(){t.attachchedModalLoader=!1,t.attachchedModal=!1}))):(this.attachchedModalLoader=!1,this.attachchedModal=!0,this.$toast(this.$t("messages.fill_required_fields"),{type:"error"}))},setAttachchedEmployees:function(){this.attachchedModal=!0},getEmployeesByDepartment:function(){var t=this;n["a"].getEmployeesInnerDepartment(this.params).then((function(e){var a=e.data;t.employeeAttachched=a.list})).catch((function(t){})).finally((function(){t.loading=!1}))},fetchDataForChartForDXA:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].fetchChartDataCurrentApplicationStatusesForDXA().then((function(e){t.chartDataForDXA=e.data,t.donutChartForDXA.series=[],t.donutChartForDXA.chartOptions.labels=[];var a=[],s=[],i=[];t.chartDataForDXA.forEach((function(e){a.push(e.count),s.push(t.statusCodesForDXA[e.status]?t.statusCodesForDXA[e.status].label:e.status),i.push(t.statusCodesForDXA[e.status]?t.statusCodesForDXA[e.status].color:"#74788D")})),t.$set(t.donutChartForDXA.chartOptions,"colors",i),t.$set(t.donutChartForDXA.chartOptions,"labels",s),t.$set(t.donutChartForDXA,"series",a),t.$set(t.columnChartForDXA.chartOptions,"colors",i),t.$set(t.columnChartForDXA.chartOptions.xaxis.labels.style,"colors",i),t.$set(t.columnChartForDXA.chartOptions.xaxis,"categories",s),t.$set(t.columnChartForDXA.series[0],"data",a)})).catch((function(t){console.log(t)})).finally((function(){}));case 2:case"end":return e.stop()}}),e)})))()},fetchDataForMonthlyChartForDXA:function(){var t=arguments,e=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var s;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=!(t.length>0&&void 0!==t[0])||t[0],a.next=3,e.$set(e.lineWithDataChartForDXA,"year",(new Date).getFullYear().toString());case 3:return s&&(e.loadingMonthlyChartDataForDXA=!0),a.next=6,n["a"].fetchChartDataApplicationsByStatusesForYearForDXA(e.lineWithDataChartForDXA.year).then((function(t){e.yearlyChartDataForDXA=t.data,e.lineWithDataChartForDXA.series=[],e.lineWithDataChartForDXA.chartOptions.xaxis.categories=[],e.lineWithDataChartForDXA.chartOptions.colors=[];var a=[],s=[],i=[];for(var r in e.yearlyChartDataForDXA){var o=e.yearlyChartDataForDXA[r],n=function(t){var s=o.find((function(e){return e.status==t})),n=a.findIndex((function(e){return e.sCode==t}));n>-1?a[n].data.push(s?s.count:0):a.push({sCode:t,name:e.statusCodesForDXA[t].label,data:[s?s.count:0]}),1==r&&i.push(e.statusCodesForDXA[t]?e.statusCodesForDXA[t].color:"#74788D")};for(var c in e.statusCodesForDXA)n(c);s.push(e.$t("months.".concat(r)))}e.$set(e.lineWithDataChartForDXA.chartOptions,"colors",i),e.$set(e.lineWithDataChartForDXA.chartOptions.xaxis,"categories",s),e.$set(e.lineWithDataChartForDXA,"series",a)})).catch((function(t){console.log(t)})).finally((function(){s&&(e.loadingMonthlyChartData=!1)}));case 6:case"end":return a.stop()}}),a)})))()},fetchDataForChart:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].fetchChartDataCurrentApplicationStatuses().then((function(e){t.chartData=e.data,t.donutChart.series=[],t.donutChart.chartOptions.labels=[];var a=[],s=[],i=[];t.chartData.forEach((function(e){a.push(e.count),s.push(t.statusCodes[e.status]?t.statusCodes[e.status].label:e.status),i.push(t.statusCodes[e.status]?t.statusCodes[e.status].color:"#74788D")})),t.$set(t.donutChart.chartOptions,"colors",i),t.$set(t.donutChart.chartOptions,"labels",s),t.$set(t.donutChart,"series",a),t.$set(t.columnChart.chartOptions,"colors",i),t.$set(t.columnChart.chartOptions.xaxis.labels.style,"colors",i),t.$set(t.columnChart.chartOptions.xaxis,"categories",s),t.$set(t.columnChart.series[0],"data",a)})).catch((function(t){console.log(t)})).finally((function(){}));case 2:case"end":return e.stop()}}),e)})))()},fetchDataForMonthlyChart:function(){var t=arguments,e=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var s;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=!(t.length>0&&void 0!==t[0])||t[0],s&&(e.loadingMonthlyChartData=!0),a.next=4,n["a"].fetchChartDataApplicationsByStatusesForYear(e.lineWithDataChart.year).then((function(t){e.yearlyChartData=t.data,e.lineWithDataChart.series=[],e.lineWithDataChart.chartOptions.xaxis.categories=[],e.lineWithDataChart.chartOptions.colors=[];var a=[],s=[],i=[];for(var r in e.yearlyChartData){var o=e.yearlyChartData[r],n=function(t){var s=o.find((function(e){return e.status==t})),n=a.findIndex((function(e){return e.sCode==t}));n>-1?a[n].data.push(s?s.count:0):a.push({sCode:t,name:e.statusCodes[t].label,data:[s?s.count:0]}),1==r&&i.push(e.statusCodes[t]?e.statusCodes[t].color:"#74788D")};for(var c in e.statusCodes)n(c);s.push(e.$t("months.".concat(r)))}e.$set(e.lineWithDataChart.chartOptions,"colors",i),e.$set(e.lineWithDataChart.chartOptions.xaxis,"categories",s),e.$set(e.lineWithDataChart,"series",a)})).catch((function(t){console.log(t)})).finally((function(){s&&(e.loadingMonthlyChartData=!1)}));case 4:case"end":return a.stop()}}),a)})))()},getAppById:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loadingById=!0,a.next=3,_["a"].getById("before-commission/application",t.id,!1).then((function(t){e.selectedApplicationItem=t.data.ApplicationDto})).catch((function(t){console.log(t)})).finally((function(){e.loadingById=!1}));case 3:case"end":return a.stop()}}),a)})))()},toggleLoading:function(t){this.loadingById=t},activeTableInnerApplication:function(){this.selectedTrItem={},this.activeTab="inner",this.var_default_search_payload.page=1,this.getList()},activeTableDXAApplication:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.selectedTrItem={},t.activeTab="dxa",t.activeDXATab="FOR_SALE",t.var_default_search_payload.page=1,t.loadingChartDataForDXA=!0,e.next=7,t.fetchDataForChartForDXA();case 7:return e.next=9,t.fetchDataForMonthlyChartForDXA(!1);case 9:return t.loadingChartDataForDXA=!1,e.next=12,t.getList();case 12:case"end":return e.stop()}}),e)})))()},activeTableDXAApplicationFOR_ADD:function(){this.selectedTrItem={},this.activeTab="dxa",this.activeDXATab="FOR_ADD",this.var_default_search_payload.page=1,this.getList()},activeTableDXAApplicationFOR_SALE:function(){this.selectedTrItem={},this.activeTab="dxa",this.activeDXATab="FOR_SALE",this.var_default_search_payload.page=1,this.getList()},updateSidebar:function(){this.signatureModal=!1},openSignatureModalForCommission:function(){this.commissionTypeId?this.signatureModal=!0:this.$toast(this.$t("messages.fill_required_fields"),{type:"error"})},customLabelAttachchedEmployees:function(t){var e=this.employeeAttachched.find((function(e){return e.id==t}));return e?"".concat(e.fullName," (").concat(this.getName({nameUz:e.departmentNameUz,nameLt:e.departmentNameLt,nameRu:e.departmentNameRu}),")"):""},changeText:function(t){this.contextText=t},okModal:function(){var t=this,e=this.$refs.editorRef.text;this.$refs.editModalRef.loading(!0),n["a"].saveLetterBody(this.selectedTrItem.letterId,e).then((function(){var e=t.selectedTrItem;t.successEdited(),t.getList(),t.editModal=!1,setTimeout((function(){var a=t.list.find((function(t){return t.id==e.id}));t.selectedTrItem=a,t.$forceUpdate(),t.getReceivers(t.selectedTrItem)}),500)})).catch((function(t){})).finally((function(){t.$refs.editModalRef.loading(!1)}))},viewModalClick:function(){var t=this;this.$refs.editModalRef.loadingPdf(!0),this.viewModalBeforeSigned=!0,this.loaderPdf=!0,this.base64=null,n["a"].convert(this.contextText).then((function(e){setTimeout((function(){t.base64=e.data}),400)})).finally((function(){t.loaderPdf=!1,t.$refs.editModalRef.loadingPdf(!1)}))},viewIlova:function(t){"pdf"===this.getExt(t)&&(this.ilovaUploadPath=t,this.viewIlovaModal=!0)},convertToPdf:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(s,i){var r={url:"".concat(t.url),outputtype:".pdf",forSign:a,key:t.key};n["a"].convertToPdfByApi(r).then((function(t){t.data.uploadPath?(e.$nextTick((function(){e.src="".concat(e.baseUrl,"/").concat(t.data.uploadPath)})),s(t.data.uploadPath)):s(!1)})).catch((function(t){i(t)}))}))},getByIdLetter:function(){var t=this;n["a"].getByIdLetter(this.selectedTrItem.letterId).then((function(e){t.currentDoc=e.data,t.loaderPdf=!0,t.convertToPdf(e.data).then((function(a){a?t.loaderPdf=!1:setTimeout((function(){t.convertToPdf(e.data).then((function(){t.loaderPdf=!1})).catch((function(e){t.loaderPdf=!1}))}),4e3)}))})).catch((function(t){}))},viewLetter:function(){var t=this;this.viewModalBeforeSigned=!0,this.loaderPdf=!0,this.base64=null,n["a"].viewPdfByLetterId(this.selectedTrItem.letterId).then((function(e){setTimeout((function(){t.base64=e.data}),300)})).finally((function(){t.loaderPdf=!1}))},viewDocBeforeSigned:function(){this.viewLetter()},setCurrentPage:function(t){this.currentPage=t},getAttachedFilesById:function(t){var e=this;n["a"].getAttachedFilesById(t).then((function(t){e.filesList=t.data}))},saveRejected:function(t){var e=this;this.rejectedLoader=!0,n["a"].saveRejected(this.selectedTrItem.letterId,this.selectedTrItem.id,this.reasonRejected,t).then(Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isRejectedModal=!1,a=e.selectedTrItem,t.next=4,e.successSaved();case 4:return t.next=6,e.getList();case 6:return t.next=8,e.getIncomeTotalCount();case 8:setTimeout((function(){var t=e.list.find((function(t){return t.id==a.id}));e.selectedTrItem=t,e.$forceUpdate(),e.getReceivers(e.selectedTrItem)}),500);case 9:case"end":return t.stop()}}),t)})))).finally((function(){e.rejectedLoader=!1}))},showRejectedModal:function(){this.isRejectedModal=!0},viewDocSigned:function(){this.viewModal=!0},getIncomeTotalCount:function(){var t=this;n["a"].getIncomeTotalCount().then((function(e){t.agreementCount=e.data.agreement,t.reviewCount=e.data.review,t.signatureCount=e.data.signature}))},signSuccess:function(t){var e=this,a={signedContent:t.content,inn:t.inn,pnfl:t.pnfl};this.isRejectedModal?(this.isModalKeys=!1,this.signatureModal=!1,this.saveRejected(a)):"COMMISSION_SEND"===this.selectedTrItem.status?n["a"].onlyDocSign(a,this.selectedTrItem.id).then(Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isModalKeys=!1,e.signatureModal=!1,a=e.selectedTrItem,t.next=5,Object(g["w"])(e.$t("successDocSigned"));case 5:return t.next=7,e.getList();case 7:return t.next=9,e.getIncomeTotalCount();case 9:setTimeout((function(){var t=e.list.find((function(t){return t.id==a.id}));e.selectedTrItem=Object.assign({},t),e.$forceUpdate(),e.getReceivers(e.selectedTrItem)}),1e3);case 10:case"end":return t.stop()}}),t)})))).catch((function(t){})):n["a"].signDoc(a,this.selectedTrItem.id,this.commissionTypeId,this.commissionComment).then(Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isModalKeys=!1,e.signatureModal=!1,e.attachchedModal=!1,a=e.selectedTrItem,t.next=6,Object(g["w"])(e.$t("successDocSigned"));case 6:return t.next=8,e.getList();case 8:return t.next=10,e.getIncomeTotalCount();case 10:setTimeout((function(){var t=e.list.find((function(t){return t.id==a.id}));e.selectedTrItem=Object.assign({},t),e.$forceUpdate(),e.getReceivers(e.selectedTrItem)}),1e3);case 11:case"end":return t.stop()}}),t)})))).catch((function(t){}))},getReceivers:function(t){var e=this;this.loaderReceiver=!0,n["a"].getReceivers(t.letterId).then((function(t){e.infoData=t.data})).finally((function(){e.loaderReceiver=!1}))},clickTrItem:function(t){this.selectedTrItem.id==t.id?this.isTabDxa?(this.selectedTrItem={},this.infoData={}):this.selectedAppByStatus={}:this.isTabDxa?this.selectedTrItem=t:(this.selectedApplicationItem&&(this.$set(this.selectedApplicationItem,"id",t.id),this.selectedApplicationItem=Object.assign({},t)),this.selectedAppByStatus=t,0==this.currentTabIndex&&this.getAppById(t))},signatureItem:function(){this.isModalKeys=!0},selectAppealRowTr:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.selectedAppealTrItem.id==t.id&&(e.selectedAppealTrItem={}),e.selectedAppealTrItem=t;case 2:case"end":return a.stop()}}),a)})))()},selectSendTypeInTr:function(t,e){var a=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===Object.keys(a.selectedTrItem).length?a.$toast(a.$t("submodules.doc.selected_doc"),{type:"warning"}):(a.active==t?a.active="":a.active=t,a.selected());case 1:case"end":return e.stop()}}),e)})))()},selectSendType:function(t){0===Object.keys(this.selectedTrItem).length?this.$toast(this.$t("submodules.doc.selected_doc"),{type:"warning"}):(this.active==t?this.active="":this.active=t,this.selected())},noPermitRequired:function(t){this.modalNoPermitRequired=!0,this.noPermitRequiredApplicationId=t},sendNoPermitRequired:function(){var t=this;if(this.loading)return!1;this.loading=!0,n["a"].applicationReviewNoPermitRequired(this.noPermitRequiredApplicationId,this.noPermitRequiredText).finally((function(){t.getList(),t.modalNoPermitRequired=!1,t.noPermitRequiredApplicationId=null,t.noPermitRequiredText="",t.loading=!1,t.isSidebarRegion=!1,t.closeSidebar()}))},selected:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("VIEW"!==t.active){e.next=8;break}return t.isSidebar=!0,e.next=4,t.$refs.isSidebar_ref.getApplicationInfoById();case 4:return e.next=6,t.$refs.isSidebar_ref.getVisaInfoById();case 6:e.next=9;break;case 8:"ACCEPT"===t.active?t.$bvModal.msgBoxConfirm(t.$t("messages.accept_title"),{okTitle:t.$t("actions.confirm"),cancelTitle:t.$t("actions.cancel")}).then((function(e){e?n["a"].getByIdPharmAppeals(t.selectedTrItem.id,t.selectedRegion).then((function(e){t.$toast(t.$t("messages.accepted_message"),{type:"success"})})).catch((function(t){console.log(t)})).finally(Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getList();case 2:t.selectedTrItem={},t.active="";case 4:case"end":return e.stop()}}),e)})))):t.active=""})).catch((function(t){})):"SEND_REGION"===t.active&&(t.isSidebarRegion=!0);case 9:case"end":return e.stop()}}),e)})))()},makeAgree:function(t){var e=this;this.cnf().then((function(a){a.value&&n["a"].makeAgree(t.letterId).then(Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.selectedTrItem,t.next=3,e.successSaved();case 3:return t.next=5,e.getList();case 5:return t.next=7,e.getIncomeTotalCount();case 7:setTimeout((function(){var t=e.list.find((function(t){return t.id==a.id}));e.selectedTrItem=t,e.$forceUpdate(),e.getReceivers(e.selectedTrItem)}),500);case 8:case"end":return t.stop()}}),t)}))))}))},makeReview:function(t){var e=this;this.cnf().then((function(a){a.value&&n["a"].makeReview(t.letterId).then(Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.selectedTrItem,t.next=3,e.successSaved();case 3:return t.next=5,e.getList();case 5:return t.next=7,e.getIncomeTotalCount();case 7:setTimeout((function(){var t=e.list.find((function(t){return t.id==a.id}));e.selectedTrItem=t,e.$forceUpdate(),e.getReceivers(e.selectedTrItem)}),500);case 8:case"end":return t.stop()}}),t)}))))}))},rejectConfirm:function(){var t=this;Object(g["g"])(this.$t("messages.reject_title")).then((function(e){e.value&&(t.signatureModal=!0)}))},signItem:function(t){var e=this;"SIGNATURE"===t.action?(this.currentItem=t,"SEND_SIGN"===t.status||"SEND"===t.status||"COMMISSION_SEND"===t.status?this.$router.push("/letter/income/".concat(t.letterId,"/").concat(t.id)):Object(g["g"])(this.$t("docConfirm")).then((function(t){t.value&&(e.signatureModal=!0)}))):"AGREEMENT"===t.action?this.makeAgree(t):"REVIEW"===t.action&&this.makeReview(t)},closeSidebar:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.selectedTrItem={},t.isSidebar=!1,t.active="";case 3:case"end":return e.stop()}}),e)})))()},closeRegionSidebar:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isSidebarRegion=!1,t.active="";case 2:case"end":return e.stop()}}),e)})))()},save:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.id){a.next=6;break}return e.selectedRegion=t.id,a.next=4,n["a"].acceptSenderRegion(e.selectedTrItem.id,e.selectedRegion).then((function(t){e.isSidebarRegion=!1,e.$toast(e.$t("messages.accepted_message"),{type:"success"})})).catch((function(t){console.log(t)})).finally(Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:e.selectedTrItem={},e.active="",e.isSidebar=!1;case 5:case"end":return t.stop()}}),t)}))));case 4:a.next=6;break;case 6:case"end":return a.stop()}}),a)})))()},add:function(){this.isModal=!0},getList:function(){var t=this;this.loading=!0,n["a"].getListPharmMonitor(this.params).then((function(e){t.appealList=e.data.list,t.total=e.data.total})).catch((function(t){})).finally((function(){t.loading=!1}))},getListDXAByStatus:function(){var t=this;this.loading=!0,n["a"].listDXA_ApplicationsByStatus(this.var_default_search_payload,this.selectedAppStatus,this.searchValue,this.activeDXATab).then((function(e){t.list=e.data.list,t.total=e.data.total})).catch((function(e){t.list=[],t.total=0})).finally((function(){t.loading=!1}))}}},x=C,y=(a("cf30"),Object(p["a"])(x,s,i,!1,null,"eb38d814",null));e["default"]=y.exports},cf30:function(t,e,a){"use strict";a("4c7d")}}]);