(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71e44e33"],{3144:function(e,t,o){},8468:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));o("d9e2");function r(e){if(null==e)throw new TypeError("Cannot destructure "+e)}},e1be:function(e,t,o){"use strict";o.r(t);var r=o("8468"),n=function(){var e=this,t=e._self._c;return t("base-create-or-update-wrapper",{attrs:{"has-save-suspend":"","custom-title":e.isModeCreate?e.$t("actions.create"):e.$t("column.passport_number")+": "+e.editingItem.passportNumber},on:{save:e.save}},[t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(o){return Object(r["a"])(o),[t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("ValidationProvider",{attrs:{name:"architecDocFile",rules:"",mode:"passive"},scopedSlots:e._u([{key:"default",fn:function(){return[t("BaseFileUploaderWithValidation",{ref:"architectDocUploader",attrs:{"data-vv-name":"architecDocFile","data-vv-as":"ArchitecDocFile","max-files":5,"has-error":e.hasError("mandat"),error:e.collectErr("mandat"),label:e.$t("column.ad_construction_drawing")},model:{value:e.architectDocFile,callback:function(t){e.architectDocFile=t},expression:"architectDocFile"}})]},proxy:!0}],null,!0)})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[e.isByAgency?t("ValidationProvider",{attrs:{name:"photos",rules:""},scopedSlots:e._u([{key:"default",fn:function(){return[t("BaseFileUploaderWithValidation",{ref:"photosUploader",attrs:{"max-files":null,"max-fileSize":null,"data-vv-name":"photos","data-vv-as":"Photos","has-error":e.hasError("photos"),error:e.collectErr("photos"),label:e.$t("column.ad_construction_photo")},model:{value:e.photos,callback:function(t){e.photos=t},expression:"photos"}})]},proxy:!0}],null,!0)}):e._e()],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[e.isByAgency?t("ValidationProvider",{attrs:{name:"passportDocFile",rules:"",mode:"passive"},scopedSlots:e._u([{key:"default",fn:function(){return[t("BaseFileUploaderWithValidation",{ref:"passportDocUploader",attrs:{"max-files":1,"data-vv-name":"passportDocFile","data-vv-as":"PassportDocFile","has-error":e.hasError("passportDocFile"),error:e.collectErr("passportDocFile"),label:e.$t("column.ad_construction_passport_doc_file")},model:{value:e.passportDocFile,callback:function(t){e.passportDocFile=t},expression:"passportDocFile"}})]},proxy:!0}],null,!0)}):e._e()],1),t("b-col",{attrs:{sm:"12",md:"6"}},[e.isByAgency?t("ValidationProvider",{attrs:{name:"paymentDocFile",rules:"",mode:"passive"},scopedSlots:e._u([{key:"default",fn:function(){return[t("BaseFileUploaderWithValidation",{ref:"paymentDocUploader",attrs:{"max-files":1,"data-vv-name":"paymentDocFile","data-vv-as":"PaymentDocFile","has-error":e.hasError("paymentDocFile"),error:e.collectErr("paymentDocFile"),label:e.$t("column.ad_construction_monthly_income_doc_photo")},model:{value:e.paymentDocFile,callback:function(t){e.paymentDocFile=t},expression:"paymentDocFile"}})]},proxy:!0}],null,!0)}):e._e()],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[e.isByAgency?t("ValidationProvider",{attrs:{name:"passportPhoto",rules:""},scopedSlots:e._u([{key:"default",fn:function(){return[t("BaseFileUploaderWithValidation",{ref:"passportPhotoUploader",attrs:{"max-files":1,"data-vv-name":"passportPhoto","data-vv-as":"PassportPhoto","has-error":e.hasError("passportPhoto"),error:e.collectErr("passportPhoto"),label:e.$t("column.ad_construction_passport_photo")},model:{value:e.passportPhoto,callback:function(t){e.passportPhoto=t},expression:"passportPhoto"}})]},proxy:!0}],null,!0)}):e._e()],1),t("b-col",{attrs:{sm:"12",md:"6"}})],1)]}}])})],1)},a=[],s=o("c7eb"),i=o("1da1"),c=(o("b0c0"),o("ac1f"),o("5319"),o("d3b7"),o("25f0"),o("159b"),o("d81d"),o("03f4")),l="contractor-advertising-construction",p="first-agent-files",u="second-agent-files",d={name:"UpdateItemFiles",components:{},data:function(){return{publicPath:"/",editingItem:{addressDto:{}},errors:[],architectDocFile:[],photos:[],passportDocFile:[],passportPhoto:[],paymentDocFile:[]}},computed:{isModeCreate:function(){return"CreateAdPassportInfoByAgency"==this.$route.name||"CreateAdPassportInfoByGovernment"==this.$route.name},isByAgency:function(){return"UpdateAdPassportInfoFilesByAgency"==this.$route.name},isByGovernment:function(){return"UpdateAdPassportInfoFilesByGovernment"==this.$route.name},computedObserver:function(){return this.$refs.observer}},methods:{generateUUID:function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)}));return t},setFilesFromServer:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isByGovernment?e.editingItem.architectDocFileList.forEach((function(t){fetch(e.publicPath+t.url).then((function(e){return e.blob()})).then((function(o){o.name=t.name,o.lastModified=new Date;var r=new File([o],t.name,{type:o.type}),n=e.publicPath+t.url;e.$refs.architectDocUploader.$refs.dropzone.manuallyAddFile(r,n)})).catch((function(e){return console.log(e)}))})):e.isByAgency&&(e.editingItem.architectDocFileList.forEach((function(t,o){fetch(e.publicPath+t.url).then((function(e){return e.blob()})).then((function(o){o.name=t.name,o.lastModified=new Date;var r=new File([o],t.name,{type:o.type}),n=e.publicPath+t.url;e.$refs.architectDocUploader.$refs.dropzone.manuallyAddFile(r,n)})).catch((function(e){return console.log(e)}))})),e.editingItem.objectPhotoList.forEach((function(t){fetch(e.publicPath+t.url).then((function(e){return e.blob()})).then((function(o){o.name=t.name,o.lastModified=new Date;var r=new File([o],t.name,{type:o.type}),n=e.publicPath+t.url;e.$refs.photosUploader.$refs.dropzone.manuallyAddFile(r,n)})).catch((function(e){return console.log(e)}))})),e.editingItem.passportDocFileUrl&&fetch(e.publicPath+e.editingItem.passportDocFileUrl.url).then((function(e){return e.blob()})).then((function(t){t.name=e.editingItem.passportDocFileUrl.name,t.lastModified=new Date;var o=new File([t],e.editingItem.passportDocFileUrl.name,{type:t.type}),r=e.publicPath+e.editingItem.passportDocFileUrl.url;e.$refs.passportDocUploader.$refs.dropzone.manuallyAddFile(o,r)})).catch((function(e){return console.log(e)})),e.editingItem.passportPhotoUrl&&fetch(e.publicPath+e.editingItem.passportPhotoUrl.url).then((function(e){return e.blob()})).then((function(t){t.name=e.editingItem.passportPhotoUrl.name,t.lastModified=new Date;var o=new File([t],e.editingItem.passportPhotoUrl.name,{type:t.type}),r=e.publicPath+e.editingItem.passportPhotoUrl.url;e.$refs.passportPhotoUploader.$refs.dropzone.manuallyAddFile(o,r)})).catch((function(e){return console.log(e)})),e.editingItem.paymentDocFileUrl&&fetch(e.publicPath+e.editingItem.paymentDocFileUrl.url).then((function(e){return e.blob()})).then((function(t){t.name=e.editingItem.paymentDocFileUrl.name,t.lastModified=new Date;var o=new File([t],e.editingItem.paymentDocFileUrl.name,{type:t.type}),r=e.publicPath+e.editingItem.paymentDocFileUrl.url;e.$refs.paymentDocUploader.$refs.dropzone.manuallyAddFile(o,r)})).catch((function(e){return console.log(e)})));case 1:case"end":return t.stop()}}),t)})))()},collectErr:function(e){if(void 0!==this.errors[e])return this.errors[e]},hasError:function(e){return void 0!==this.errors[e]},makeAndReturnFormData:function(){var e=new FormData;return this.isByGovernment?this.architectDocFile.forEach((function(t){e.append("architectDocFiles",t.file)})):this.isByAgency&&(this.architectDocFile.forEach((function(t){e.append("architectDocFiles",t.file)})),this.photos.forEach((function(t){e.append("objectPhotos",t.file)})),this.passportDocFile.forEach((function(t){e.append("passportDocFile",t.file)})),this.passportPhoto.forEach((function(t){e.append("passportPhoto",t.file)})),this.paymentDocFile.forEach((function(t){e.append("paymentDocFile",t.file)}))),e},save:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.computedObserver.validate().then(function(){var t=Object(i["a"])(Object(s["a"])().mark((function t(o){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o){t.next=14;break}if((e.passportPhoto||e.passportDocFile)&&(e.passportPhoto&&e.passportPhoto.length||e.passportDocFile&&e.passportDocFile.length)){t.next=4;break}return e.$toast(e.$t("messages.fill_ad_passport_doc_or_photo"),{type:"error"}),t.abrupt("return");case 4:if(!e.isByAgency){t.next=9;break}return t.next=7,c["a"].saveFileEntity("second-agent-files/".concat(e.$route.params.id),e.makeAndReturnFormData()).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})).catch((function(e){return console.log(e)}));case 7:t.next=12;break;case 9:if(!e.isByGovernment){t.next=12;break}return t.next=12,c["a"].saveFileEntity("first-agent-files/".concat(e.$route.params.id),e.makeAndReturnFormData()).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})).catch((function(e){return console.log(e)}));case 12:t.next=15;break;case 14:e.$toast(e.$t("messages.fill_required_fields"),{type:"error"});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].getById(l,e.$route.params.id,!0,null,e.isByGovernment?p:!!e.isByAgency&&u).then(function(){var t=Object(i["a"])(Object(s["a"])().mark((function t(o){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.editingItem=o.data,t.next=3,e.setFilesFromServer();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)})).finally((function(){}));case 2:case"end":return t.stop()}}),t)})))()},watch:{veeErrors:{handler:function(e,t){this.errors=[],e.items.map((function(e){}))},deep:!0}}},f=d,h=(o("eda4"),o("2877")),m=Object(h["a"])(f,n,a,!1,null,"6c7b7103",null);t["default"]=m.exports},eda4:function(e,t,o){"use strict";o("3144")}}]);