(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23307924"],{"0616":function(t,e,r){},"0e70":function(t,e,r){"use strict";r.r(e);var a=r("8468"),n=(r("b0c0"),r("d81d"),function(){var t=this,e=t._self._c;return e("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(r){return Object(a["a"])(r),[e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",label:t.$t("column.name")},model:{value:t.editingItem.name,callback:function(e){t.$set(t.editingItem,"name",e)},expression:"editingItem.name"}})],1),e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseMultiselectWithValidation",{attrs:{"not-required":"","has-next-page":t.hasNextPageContractors,searchable:!0,"preserve-search":"","clear-on-select":!1,loading:t.isLoadingContractors,"internal-search":!1,options:t.contractors.map((function(t){return t.inn})),label:t.$t("column.inn"),placeholder:t.$t("column.inn"),"custom-label":t.customLabelContractor,"open-direction":"bottom","max-height":600,"show-labels":!1,"with-create-addition":""},on:{reachedEndOfList:t.contractorReachedEndOfList,"search-change":t.debounceSearchContractors},scopedSlots:t._u([{key:"append-slot",fn:function(){return[e("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary"},on:{click:function(e){t.contractorCreateModal=!0}}},[e("i",{staticClass:"mdi mdi-plus-circle"})])]},proxy:!0}],null,!0),model:{value:t.editingItem.inn,callback:function(e){t.$set(t.editingItem,"inn",e)},expression:"editingItem.inn"}}),e("BaseModalForCreate",{attrs:{"without-list-search":"","use-component-save-fn":"",mainApiUrl:"contractor",createFormName:"CreateFormContractor"},on:{"new-ref-created-without-list-search":t.newRefCreated},model:{value:t.contractorCreateModal,callback:function(e){t.contractorCreateModal=e},expression:"contractorCreateModal"}})],1)],1),e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{sm:"12",md:"6"}}),e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseInputWithValidation",{attrs:{rules:"positiveNotZero",label:t.$t("column.share_percentage")},model:{value:t.editingItem.percentage,callback:function(e){t.$set(t.editingItem,"percentage",e)},expression:"editingItem.percentage"}})],1)],1)]}}])})}),o=[],c=r("2909"),s=r("c7eb"),i=r("1da1"),u=(r("7db0"),r("d3b7"),r("99af"),r("14d9"),r("03f4")),d="reestr/group-of-individuals",l={name:"CreateFormGroupOfIndividuals",props:{customIsModeCreate:{type:Boolean,default:!1}},components:{},data:function(){return{editingItem:{},hasNextPageContractors:!1,contractors:[],debounce:null,isLoadingContractors:!1,contractorCreateModal:!1,contractorSearchPayload:{}}},computed:{isModeCreate:function(){return this.customIsModeCreate?this.customIsModeCreate:"CreateGroupOfIndividuals"===this.$route.name},computedObserver:function(){return this.$refs.observer}},methods:{contractorReachedEndOfList:function(t){t&&!this.isLoadingContractors&&this.fetchContractors()},debounceSearchContractors:function(t){var e=this;return Object(i["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:clearTimeout(e.debounce),e.debounce=setTimeout(Object(i["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.fetchContractorsWithKeyword(t);case 2:case"end":return r.stop()}}),r)}))),1e3);case 2:case"end":return r.stop()}}),r)})))()},customLabelContractor:function(t){var e=this.contractors.find((function(e){return e.inn==t}));return e?"".concat(e.inn," - ").concat(e.fullName):""},fetchContractorsWithKeyword:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.contractors=[],this.contractorSearchPayload.page=1,this.contractorSearchPayload.keyword=t||"",this.fetchContractors(e)},fetchContractors:function(t){var e=this;return Object(i["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.contractorSearchPayload.sortBy=[],e.contractorSearchPayload.sortBy.push("created"),e.contractorSearchPayload.sortDesc=[],e.contractorSearchPayload.sortDesc.push(!0),e.isLoadingContractors=!0,r.next=7,u["a"].searchListWithKeyword("contractor",e.contractorSearchPayload,"by-contractor").then((function(r){var a;(a=e.contractors).push.apply(a,Object(c["a"])(r.data.list)),e.hasNextPageContractors=r.data.total/e.contractorSearchPayload.itemsPerPage>e.contractorSearchPayload.page,e.contractorSearchPayload.page+=1,t&&(e.editingItem.parentId=e.contractors.length?e.contractors[0].id:null)})).catch((function(t){console.log(t),e.contractors=[]})).finally((function(){e.isLoadingContractors=!1}));case 7:case"end":return r.stop()}}),r)})))()},newRefCreated:function(t){"CreateFormContractor"==t&&this.fetchContractorsWithKeyword("",!0)},save:function(){var t=this;this.computedObserver.validate().then((function(e){e?t.editingItem.id?u["a"].update(d,t.editingItem).then((function(e){t.computedObserver.reset(),t.editingItem=Object.assign({},{}),t.$router.go(-1),t.$toast(t.$t("messages.saved_successfully"),{type:"success"})})):u["a"].create(d,t.editingItem).then((function(e){t.computedObserver.reset(),t.editingItem=Object.assign({},{}),t.$router.go(-1),t.$toast(t.$t("messages.saved_successfully"),{type:"success"})})):t.$toast(t.$t("messages.fill_required_fields"),{type:"error"})}))}},created:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.contractorSearchPayload=Object.assign({},t.var_default_search_payload),e.next=3,t.fetchContractors();case 3:if(t.var_default_search_payload.itemsPerPage=500,!t.isModeCreate){e.next=9;break}return e.next=7,u["a"].getEmpty(d).then((function(e){t.editingItem=e.data})).catch((function(t){console.log(t)}));case 7:e.next=11;break;case 9:return e.next=11,u["a"].getById(d,t.$route.params.id,!1).then((function(e){t.editingItem=e.data})).catch((function(t){console.log(t)}));case 11:case"end":return e.stop()}}),e)})))()}},h=l,f=(r("5231"),r("2877")),m=Object(f["a"])(h,n,o,!1,null,"3003a55a",null);e["default"]=m.exports},5231:function(t,e,r){"use strict";r("0616")},"7db0":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").find,o=r("44d2"),c="find",s=!0;c in[]&&Array(1)[c]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},8468:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("d9e2");function a(t){if(null==t)throw new TypeError("Cannot destructure "+t)}}}]);