(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a82a966"],{"172d":function(t,e,a){"use strict";a("9b09")},"558e":function(t,e,a){"use strict";a("c5aa")},5656:function(t,e,a){"use strict";a("b0c0"),a("a15b");var o=function(){var t=this,e=t._self._c;return e("tbody",{staticClass:"vertical-align-middle"},[e("tr",{staticClass:"bg-light-violet"},[e("th",[t._v(t._s(t.infoTypeKey+1))]),e("th",{attrs:{colspan:t.getTableMaxRows-1}},[t._v(t._s(t.infoType.name))])]),t._l(t.list,(function(a,o){return e("tr",{directives:[{name:"show",rawName:"v-show",value:a.infoType===t.infoType.code,expression:"childItem.infoType === infoType.code"}],key:o,class:a.isParent?"bg-light-orange":""},[e("td",[t._v(t._s(a.number))]),e("td",{staticStyle:{"max-width":"22vw"}},[e("div",{staticClass:"form-control",staticStyle:{height:"auto","min-height":"calc(1.5em + 0.5rem + 2px)"},on:{click:function(e){return t.openParentModal(!0,"info_name",t.infoTypeKey,a.parentIndex,a.childIndex)}}},[t._v(" "+t._s(t.getName({nameUz:a.nameUz,nameRu:a.nameRu,nameLt:a.nameLt})||"Matn kiriting ...")+" ")])]),e("td",[e("div",{staticClass:"form-control",staticStyle:{height:"auto","min-height":"calc(1.5em + 0.5rem + 2px)"},on:{click:function(e){return t.openParentModal(!0,"employee",t.infoTypeKey,a.parentIndex,a.childIndex)}}},[t._v(" "+t._s(a.employeeFullNames.join(", ")||"-")+" ")])]),e("td",[e("div",{staticClass:"form-control",staticStyle:{height:"auto","min-height":"calc(1.5em + 0.5rem + 2px)"},on:{click:function(e){return t.openParentModal(!0,"measurement_unit",t.infoTypeKey,a.parentIndex,a.childIndex)}}},[t._v(" "+t._s(a.measurementUnitId&&t.measurementUnitMap&&t.measurementUnitMap[a.measurementUnitId]?t.getName({nameUz:t.measurementUnitMap[a.measurementUnitId].nameUz,nameRu:t.measurementUnitMap[a.measurementUnitId].nameRu,nameLt:t.measurementUnitMap[a.measurementUnitId].nameLt}):"-")+" ")])]),t._l(t.quarterList,(function(o,i){return e("th",{key:i},[a.isParent?e("b-input-group",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.statisticReportInfoDto[a.parentIndex].quarterValueDtoList[i].plan,expression:"statisticReportInfoDto[childItem.parentIndex].quarterValueDtoList[quarterKey].plan"}],staticClass:"form-control",attrs:{step:"any",type:"number",disabled:t.statisticReportInfoDto[a.parentIndex].quarterValueDtoList[i].isPlanConfirmed},domProps:{value:t.statisticReportInfoDto[a.parentIndex].quarterValueDtoList[i].plan},on:{input:function(e){e.target.composing||t.$set(t.statisticReportInfoDto[a.parentIndex].quarterValueDtoList[i],"plan",e.target.value)}}}),!0!==t.statisticReportInfoDto[a.parentIndex].quarterValueDtoList[i].isPlanConfirmed?e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"bg-primary input-group-text text-white cursor-pointer",on:{click:function(e){return t.confirmValue(t.statisticReportInfoDto[a.parentIndex].quarterValueDtoList[i])}}},[e("i",{staticClass:"bx mdi mdi-check"})])]):t._e(),t.statisticReportInfoDto[a.parentIndex].quarterValueDtoList[i].isPlanConfirmed?e("div",{staticClass:"input-group-prepend"},[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"bg-success input-group-text text-white",attrs:{title:t.$t("column.confirmed")}},[e("i",{staticClass:"bx mdi mdi-check"})])]):t._e()]):e("b-input-group",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.statisticReportInfoDto[a.parentIndex].children[a.childIndex].quarterValueDtoList[i].plan,expression:"statisticReportInfoDto[childItem.parentIndex].children[childItem.childIndex].quarterValueDtoList[quarterKey].plan"}],staticClass:"form-control",attrs:{step:"any",type:"number",disabled:t.statisticReportInfoDto[a.parentIndex].children[a.childIndex].quarterValueDtoList[i].isPlanConfirmed},domProps:{value:t.statisticReportInfoDto[a.parentIndex].children[a.childIndex].quarterValueDtoList[i].plan},on:{input:function(e){e.target.composing||t.$set(t.statisticReportInfoDto[a.parentIndex].children[a.childIndex].quarterValueDtoList[i],"plan",e.target.value)}}}),!0!==t.statisticReportInfoDto[a.parentIndex].children[a.childIndex].quarterValueDtoList[i].isPlanConfirmed?e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"bg-primary input-group-text text-white cursor-pointer",on:{click:function(e){return t.confirmValue(t.statisticReportInfoDto[a.parentIndex].children[a.childIndex].quarterValueDtoList[i])}}},[e("i",{staticClass:"bx mdi mdi-check"})])]):t._e(),t.statisticReportInfoDto[a.parentIndex].children[a.childIndex].quarterValueDtoList[i].isPlanConfirmed?e("div",{staticClass:"input-group-prepend"},[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"bg-success input-group-text text-white",attrs:{title:t.$t("column.confirmed")}},[e("i",{staticClass:"bx mdi mdi-check"})])]):t._e()])],1)})),e("td",{staticClass:"text-center"},[e("div",{staticClass:"btn-group"},[e("i",{staticClass:"btn btn-sm btn-success bx mdi mdi-plus",on:{click:function(e){return t.addItem(a,o)}}}),a.isParent&&a.parentIndex>1||!a.isParent&&a.childIndex>=0?e("i",{staticClass:"btn btn-sm btn-danger bx mdi mdi-minus",on:{click:function(e){return t.removeItem(a,o)}}}):t._e()])])],2)}))],2)},i=[],r=(a("a9e3"),a("e9c4"),a("4de4"),a("d3b7"),a("14d9"),a("a434"),a("159b"),a("f2db")),n="statistic-report",s={name:"Info",props:{infoTypeKey:{type:Number,default:function(){return 1}},quarterList:{type:Array,default:function(){return[]}},measurementUnitList:{type:Array,default:function(){return[]}},infoType:{type:Object,default:function(){return{}}},statisticReportInfoDto:{type:Array,default:function(){return[]}},measurementUnitMap:{type:Object,default:function(){return{}}},getTableMaxRows:{type:Number,default:1}},data:function(){return{list:[],infoTypeIterator:{}}},created:function(){this.serializeItems()},methods:{addItem:function(t,e){var a=this,o=JSON.parse(JSON.stringify(t));if(o=this.clearItemValues(o),t.isParent){if(t.children.length>0){var i=this.clearItemValues(o.children[0]);i.number=1,o.children=[i]}o.number=this.statisticReportInfoDto.filter((function(t){return t.infoType===a.infoType.code})).length+1,this.statisticReportInfoDto.push(o)}else this.statisticReportInfoDto[t.parentIndex].children.push(o),this.serializeItems()},removeItem:function(t,e){t.id&&r["a"].post(n+"/delete-info-by-id/"+t.id).then((function(t){})),t.isParent?this.statisticReportInfoDto.splice(t.parentIndex,1):(this.statisticReportInfoDto[t.parentIndex].children.splice(t.childIndex,1),this.serializeItems())},clearItemValues:function(t){return t.employeeFullNames=[],t.employeeIds=[],t.id=null,t.measurementUnitId=null,t.measurementUnitNameLt=null,t.measurementUnitNameRu=null,t.measurementUnitNameUz=null,t.nameLt=null,t.nameRu=null,t.nameUz=null,t},serializeItems:function(){var t=[];this.statisticReportInfoDto.forEach((function(e,a){e.number=t.filter((function(t){return t.infoType===e.infoType&&!0===t.isParent})).length+1,e.isParent=!0,e.parentIndex=a,e.employeeFullNames=e.employeeFullNames||[],t.push(e),e.children.length>0&&e.children.forEach((function(o,i){o.number=i+1,o.isParent=!1,o.parentIndex=a,o.employeeFullNames=o.employeeFullNames||[],o.childIndex=i,o.infoType=e.infoType,t.push(o)}))})),this.list=t},openParentModal:function(t,e,a,o,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;this.serializeItems(),this.$emit("open-parent-modal",t,e,a,o,i,r)},editParentData:function(t,e,a,o,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;e?this.statisticReportInfoDto[o].quarterValueDtoList[r][a]=t.target.value:this.statisticReportInfoDto[o].children[i].quarterValueDtoList[r][a]=t.target.value},confirmValue:function(t){this.$emit("confirm-quarter-value",t)}},watch:{statisticReportInfoDto:function(){this.serializeItems()}}},l=s,m=(a("558e"),a("2877")),c=Object(m["a"])(l,o,i,!1,null,"164e678a",null);e["a"]=c.exports},"9b09":function(t,e,a){},af7f:function(t,e,a){"use strict";a.r(e);a("14d9"),a("d81d"),a("4de4"),a("d3b7");var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 text-center"},[e("div",{staticClass:"btn btn-outline-dark btn-secondary float-left",on:{click:function(e){return t.$router.push({name:"IndexFinalForecast"})}}},[t._v(" "+t._s(t.$t("actions.back"))+" ")]),e("div",{staticClass:"h5 mb-4 d-inline-block"},[t._v(t._s(t.$t("submodules.final_forecast.title")))]),e("div",{staticClass:"btn btn-success float-right",on:{click:t.save}},[t._v(t._s(t.$t("actions.save")))]),e("div",{staticClass:"btn btn-primary float-right"},[t._v(t._s(t.$t("actions.excel")))])]),e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("table",{staticClass:"table table-sm table-bordered table-condensed vertical-align-middle"},[e("thead",[e("tr",[e("th",{attrs:{colspan:t.getTableMaxRows}},[e("div",{staticClass:"form-control h-auto",on:{click:function(e){return t.openModal(!0,"decisionName")}}},[t._v(" "+t._s(t.form.StatisticReportHeaderDto?t.getName({nameUz:t.form.StatisticReportHeaderDto.decisionNameUz,nameRu:t.form.StatisticReportHeaderDto.decisionNameRu,nameLt:t.form.StatisticReportHeaderDto.decisionNameLt}):"")+" ")])])]),e("tr",{staticClass:"text-center"},[e("th",{attrs:{rowspan:"3"}},[t._v("â„–")]),e("th",{attrs:{rowspan:"3"}},[t._v(" "+t._s(t.$t("submodules.final_forecast.state_program_and_target_indicator"))+" ")]),e("th",{attrs:{rowspan:"3"}},[t._v(t._s(t.$t("column.employee")))]),e("th",{attrs:{rowspan:"3"}},[t._v(t._s(t.$t("column.unit")))]),e("th",{attrs:{colspan:t.quarterList.length||1}},[e("div",{staticClass:"form-control",on:{click:function(e){return t.openModal(!0,"year")}}},[t._v(" "+t._s(t.$t("submodules.final_forecast.year_plan",{year:t.form.StatisticReportHeaderDto?t.form.StatisticReportHeaderDto.year:""}))+" ")])])]),e("tr",t._l(t.quarterList,(function(a,o){return e("th",{key:o,staticClass:"text-center"},[t._v(" "+t._s(t.getName({nameUz:a.nameUz,nameRu:a.nameRu,nameLt:a.nameLt}))+" ")])})),0),e("tr",[e("th",{staticClass:"text-center",attrs:{colspan:t.quarterList.length||1}},[t._v(t._s(t.$t("submodules.final_forecast.plan")))])]),e("tr",{staticClass:"text-center"},[e("th",{attrs:{colspan:"3"}},[e("div",{staticClass:"form-control h-auto",on:{click:function(e){return t.openModal(!0,"organizationName")}}},[t._v(" "+t._s(t.form.StatisticReportHeaderDto?t.getName({nameUz:t.form.StatisticReportHeaderDto.organizationNameUz,nameRu:t.form.StatisticReportHeaderDto.organizationNameRu,nameLt:t.form.StatisticReportHeaderDto.organizationNameLt}):"")+" ")])]),e("th",[e("div",{staticClass:"form-control form-control-sm",staticStyle:{height:"auto","min-height":"calc(1.5em + 0.5rem + 2px)"},on:{click:function(e){return t.openModal(!0,"header_measurement_unit")}}},[t._v(" "+t._s(t.form.StatisticReportHeaderDto&&t.measurementUnitMap&&t.measurementUnitMap[t.form.StatisticReportHeaderDto.measurementUnitId]?t.getName({nameUz:t.measurementUnitMap[t.form.StatisticReportHeaderDto.measurementUnitId].nameUz,nameRu:t.measurementUnitMap[t.form.StatisticReportHeaderDto.measurementUnitId].nameRu,nameLt:t.measurementUnitMap[t.form.StatisticReportHeaderDto.measurementUnitId].nameLt}):"-")+" ")])]),e("th",{attrs:{colspan:t.quarterList.length||1}},[e("div",{staticClass:"form-control",on:{click:function(e){return t.openModal(!0,"value")}}},[t._v(" "+t._s(t.form.StatisticReportHeaderDto?t.form.StatisticReportHeaderDto.value:"")+" ")])])]),e("tr",{staticClass:"text-center"},[e("td"),e("th",{attrs:{colspan:t.getTableMaxRows-1}},[e("div",{staticClass:"form-control h-auto",on:{click:function(e){return t.openModal(!0,"strategicPurpose")}}},[t._v(" "+t._s(t.form.StatisticReportHeaderDto?t.getName({nameUz:t.form.StatisticReportHeaderDto.strategicPurposeUz,nameRu:t.form.StatisticReportHeaderDto.strategicPurposeRu,nameLt:t.form.StatisticReportHeaderDto.strategicPurposeLt}):"")+" ")])])])]),t._l(t.infoTypeList,(function(a,o){return e("Info",{key:o,ref:"infoType",refInFor:!0,attrs:{infoTypeKey:o,infoType:a,statisticReportInfoDto:t.form.StatisticReportInfoDto,getTableMaxRows:t.getTableMaxRows,quarterList:t.quarterList,measurementUnitList:t.measurementUnitList,measurementUnitMap:t.measurementUnitMap},on:{"open-parent-modal":t.openModal,"confirm-quarter-value":t.confirmQuarterValue}})}))],2)])])])])]),e("b-modal",{attrs:{id:"modal-1",title:t.modal.title},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.modal.show=!1}}},[t._v(t._s(t.$t("actions.save")))])]},proxy:!0}]),model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},["decisionName"===t.modal.step?e("div",[e("h5",[t._v(t._s(t.$t("submodules.final_forecast.decision_name")))]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Uz"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.decisionNameUz,expression:"form.StatisticReportHeaderDto.decisionNameUz"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.decisionNameUz},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"decisionNameUz",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Lt"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.decisionNameLt,expression:"form.StatisticReportHeaderDto.decisionNameLt"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.decisionNameLt},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"decisionNameLt",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Ru"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.decisionNameRu,expression:"form.StatisticReportHeaderDto.decisionNameRu"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.decisionNameRu},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"decisionNameRu",e.target.value)}}})])]):"organizationName"===t.modal.step?e("div",[e("h5",[t._v(t._s(t.$t("submodules.final_forecast.organization_name")))]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Uz"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.organizationNameUz,expression:"form.StatisticReportHeaderDto.organizationNameUz"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.organizationNameUz},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"organizationNameUz",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Lt"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.organizationNameLt,expression:"form.StatisticReportHeaderDto.organizationNameLt"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.organizationNameLt},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"organizationNameLt",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Ru"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.organizationNameRu,expression:"form.StatisticReportHeaderDto.organizationNameRu"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.organizationNameRu},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"organizationNameRu",e.target.value)}}})])]):"strategicPurpose"===t.modal.step?e("div",[e("h5",[t._v(t._s(t.$t("submodules.final_forecast.strategic_purpose")))]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Uz"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.strategicPurposeUz,expression:"form.StatisticReportHeaderDto.strategicPurposeUz"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.strategicPurposeUz},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"strategicPurposeUz",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Lt"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.strategicPurposeLt,expression:"form.StatisticReportHeaderDto.strategicPurposeLt"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.strategicPurposeLt},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"strategicPurposeLt",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Ru"))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.strategicPurposeRu,expression:"form.StatisticReportHeaderDto.strategicPurposeRu"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.StatisticReportHeaderDto.strategicPurposeRu},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"strategicPurposeRu",e.target.value)}}})])]):"year"===t.modal.step?e("div",[e("h5",[t._v(t._s(t.$t("submodules.final_forecast.year")))]),e("div",{staticClass:"form-group"},[e("date-picker",{staticClass:"d-block w-100",attrs:{type:"year",format:"YYYY","first-day-of-week":1},model:{value:t.form.StatisticReportHeaderDto.year,callback:function(e){t.$set(t.form.StatisticReportHeaderDto,"year",e)},expression:"form.StatisticReportHeaderDto.year"}})],1)]):"value"===t.modal.step?e("div",[e("h5",[t._v(t._s(t.$t("submodules.final_forecast.value")))]),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.value,expression:"form.StatisticReportHeaderDto.value"}],staticClass:"form-control",attrs:{type:"number",step:"any"},domProps:{value:t.form.StatisticReportHeaderDto.value},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportHeaderDto,"value",e.target.value)}}})])]):"header_measurement_unit"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("submodules.measurement_unit.title")))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportHeaderDto.measurementUnitId,expression:"form.StatisticReportHeaderDto.measurementUnitId"}],staticClass:"form-control form-control-sm",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form.StatisticReportHeaderDto,"measurementUnitId",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"",readonly:""}}),t._l(t.measurementUnitList,(function(a,o){return e("option",{key:o,domProps:{value:a.id}},[t._v(" "+t._s(t.getName({nameUz:a.nameUz,nameRu:a.nameRu,nameLt:a.nameLt}))+" ")])}))],2)])]):"measurement_unit"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("submodules.measurement_unit.title")))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].measurementUnitId,expression:"form.StatisticReportInfoDto[modal.parentIndex].measurementUnitId"}],staticClass:"form-control form-control-sm",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex],"measurementUnitId",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"",readonly:""}}),t._l(t.measurementUnitList,(function(a,o){return e("option",{key:o,domProps:{value:a.id}},[t._v(" "+t._s(t.getName({nameUz:a.nameUz,nameRu:a.nameRu,nameLt:a.nameLt}))+" ")])}))],2)])]):"measurement_unit_child"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("submodules.measurement_unit.title")))]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].measurementUnitId,expression:"form.StatisticReportInfoDto[modal.parentIndex].children[modal.childIndex].measurementUnitId"}],staticClass:"form-control form-control-sm",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex],"measurementUnitId",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"",readonly:""}}),t._l(t.measurementUnitList,(function(a,o){return e("option",{key:o,domProps:{value:a.id}},[t._v(" "+t._s(t.getName({nameUz:a.nameUz,nameRu:a.nameRu,nameLt:a.nameLt}))+" ")])}))],2)])]):"info_name"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Uz"))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].nameUz,expression:"form.StatisticReportInfoDto[modal.parentIndex].nameUz"}],staticClass:"form-control",domProps:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].nameUz},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex],"nameUz",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Lt"))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].nameLt,expression:"form.StatisticReportInfoDto[modal.parentIndex].nameLt"}],staticClass:"form-control",domProps:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].nameLt},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex],"nameLt",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Ru"))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].nameRu,expression:"form.StatisticReportInfoDto[modal.parentIndex].nameRu"}],staticClass:"form-control",domProps:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].nameRu},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex],"nameRu",e.target.value)}}})])]):"info_name_child"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Uz"))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].nameUz,expression:"form.StatisticReportInfoDto[modal.parentIndex].children[modal.childIndex].nameUz"}],staticClass:"form-control",domProps:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].nameUz},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex],"nameUz",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Lt"))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].nameLt,expression:"form.StatisticReportInfoDto[modal.parentIndex].children[modal.childIndex].nameLt"}],staticClass:"form-control",domProps:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].nameLt},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex],"nameLt",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s("Ru"))]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].nameRu,expression:"form.StatisticReportInfoDto[modal.parentIndex].children[modal.childIndex].nameRu"}],staticClass:"form-control",domProps:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].nameRu},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex],"nameRu",e.target.value)}}})])]):"employee"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("assign_employee")))]),e("BaseMultiselectWithValidation",{staticStyle:{width:"100%"},attrs:{"not-required":"",multiple:"",options:t.employeeIdList,"hide-selected":!0,"close-on-select":!1,placeholder:t.$t("assign_employee"),"custom-label":t.customLabelAdDesignType,"open-direction":"bottom","max-height":600,"show-labels":!1,"only-form-element":!0},on:{input:t.onEmployeeChange,"search-change":t.onEmployeeKeyUp},model:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].employeeIds,callback:function(e){t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex],"employeeIds",e)},expression:"form.StatisticReportInfoDto[modal.parentIndex].employeeIds"}})],1)]):"employee_child"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("assign_employee")))]),e("BaseMultiselectWithValidation",{staticStyle:{width:"100%"},attrs:{"not-required":"",multiple:"",options:t.employeeIdList,"hide-selected":!0,"close-on-select":!1,placeholder:t.$t("assign_employee"),"custom-label":t.customLabelAdDesignType,"open-direction":"bottom","max-height":600,"show-labels":!1,"only-form-element":!0},on:{input:t.onEmployeeChange,"search-change":t.onEmployeeKeyUp},model:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].employeeIds,callback:function(e){t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex],"employeeIds",e)},expression:"form.StatisticReportInfoDto[modal.parentIndex].children[modal.childIndex].employeeIds"}})],1)]):"quarter_plan"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("column.value")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].quarterValueDtoList[t.modal.quarterKey].plan,expression:"form.StatisticReportInfoDto[modal.parentIndex].quarterValueDtoList[modal.quarterKey].plan"}],staticClass:"form-control",attrs:{type:"number",step:"any"},domProps:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].quarterValueDtoList[t.modal.quarterKey].plan},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex].quarterValueDtoList[t.modal.quarterKey],"plan",e.target.value)}}})])]):"quarter_plan_child"===t.modal.step?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("column.value")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].quarterValueDtoList[t.modal.quarterKey].plan,expression:"form.StatisticReportInfoDto[modal.parentIndex].children[modal.childIndex].quarterValueDtoList[modal.quarterKey].plan"}],staticClass:"form-control",attrs:{type:"number",step:"any"},domProps:{value:t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].quarterValueDtoList[t.modal.quarterKey].plan},on:{input:function(e){e.target.composing||t.$set(t.form.StatisticReportInfoDto[t.modal.parentIndex].children[t.modal.childIndex].quarterValueDtoList[t.modal.quarterKey],"plan",e.target.value)}}})])]):t._e()])],1)},i=[],r=a("c7eb"),n=a("1da1"),s=(a("a4d3"),a("e01a"),a("159b"),a("b64b"),a("ac1f"),a("5319"),a("e9c4"),a("9225")),l=a("ec45"),m=a("5656"),c=a("c2a4"),d=a("f2db"),p="statistic-report",u={create:p+"/create",update:p+"/update/",get:p+"/get-by-id/",quarter:p+"/directory/quarter/list-search",measurementUnit:p+"/directory/measurement-unit/list-search",innerEmployee:"/employee/list-search/inner",getByIdEmployee:"/employee/get/",confirmQuarterValue:"/statistic-report/confirm-quarter-plan/"},f={page:{title:s["default"].t("submodules.final_forecast.title"),meta:[{name:"description",content:c.description}]},components:{DatePicker:l["default"],Info:m["a"]},data:function(){return{form:{},modal:{show:!1,step:"",title:"",infoTypeKey:"",parentIndex:0,childIndex:void 0,quarterKey:void 0},infoTypeList:[{code:"FINAL",name:s["default"].t("submodules.final_forecast.info_type_final")},{code:"DIRECTLY",name:s["default"].t("submodules.final_forecast.info_type_directly")}],quarterList:[],measurementUnitList:[],measurementUnitMap:{},employeeListMap:{},employeeIdList:[],saveLoading:!1}},methods:{getEmployeeInnerList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";d["a"].post(u.innerEmployee+"?keyword="+encodeURIComponent(e),{itemsPerPage:10,page:0}).then((function(e){e.data.list.forEach((function(e){t.employeeListMap[e.id]=e})),t.employeeIdList=Object.keys(t.employeeListMap)}))},serializeMeasurementUnit:function(){var t=this;this.measurementUnitMap={},this.measurementUnitList.forEach((function(e){t.measurementUnitMap[e.id]=e}))},openModal:function(t,e,a,o,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;void 0!==o&&void 0!==i&&(e+="_child"),this.modal.show=t,this.modal.step=e,this.modal.infoTypeKey=a,this.modal.parentIndex=o,this.modal.childIndex=i,this.modal.quarterKey=r},customLabelAdDesignType:function(t){var e=this.employeeListMap[t];return e?e.fullName:""},customLabelMeasurementUnitList:function(t){var e=this.measurementUnitList[t];return e?this.getName({}):""},onEmployeeChange:function(t){var e=this;console.log(t),"employee_child"===this.modal.step?this.form.StatisticReportInfoDto[this.modal.parentIndex].children[this.modal.childIndex].employeeFullNames=t.map((function(t){return e.employeeListMap[t].lastName+" "+e.employeeNameFirstChar(e.employeeListMap[t].firstName)+" "+e.employeeNameFirstChar(e.employeeListMap[t].middleName)})):"employee"===this.modal.step&&(this.form.StatisticReportInfoDto[this.modal.parentIndex].employeeFullNames=t.map((function(t){return e.employeeListMap[t].lastName+" "+e.employeeNameFirstChar(e.employeeListMap[t].firstName)+" "+e.employeeNameFirstChar(e.employeeListMap[t].middleName)}))),this.$refs["infoType"][this.modal.infoTypeKey].serializeItems()},onEmployeeKeyUp:function(t){this.getEmployeeInnerList(t)},employeeNameFirstChar:function(t){var e=t.charAt(0)+t.charAt(1);return-1!==["sh","ch","o'","g'"].indexOf(e.toLowerCase().replace("`","'"))?e:t.charAt(0)},save:function(){var t=this;if(!this.saveLoading){this.saveLoading=!0;var e=this.form.StatisticReportHeaderDto;e.allInfos=this.form.StatisticReportInfoDto,d["a"].post(u.update+this.$route.params.id,e).then((function(e){t.$toast(t.$t("messages.saved_successfully"),{type:"success"}),t.serializeMeasurementUnit(),t.saveLoading=!1,t.$router.push({name:"IndexFinalForecast"})})).catch((function(e){t.saveLoading=!1}))}},serializeEmployeeIds:function(t){var e=this;return t.map((function(t){return t.employeeIds=t.attachedEmployeeDtos.map((function(t){return"undefined"===typeof e.employeeListMap[t.employeeId]&&(e.employeeListMap[t.employeeId]={},d["a"].get(u.getByIdEmployee+t.employeeId).then((function(a){var o=a.data,i=o.id,r=o.lastName,n=o.firstName,s=o.fullName,l=o.middleName;e.employeeListMap[t.employeeId]={id:i,lastName:r,firstName:n,fullName:s,middleName:l}}))),t.employeeId})),e.employeeIdList=Object.keys(e.employeeListMap),t.employeeFullNames=t.attachedEmployeeDtos.map((function(t){return t.employeeLastName+" "+t.employeeFirstName+" "+t.employeeMiddleName})),t.children&&(t.children=e.serializeEmployeeIds(t.children)),t}))},confirmQuarterValue:function(t){var e=this,a=t.id;this.cnf().then((function(t){var o=t.value;o&&d["a"].post(u.confirmQuarterValue+a,{},!0).then(function(){var t=Object(n["a"])(Object(r["a"])().mark((function t(a){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleCreated();case 2:return t.next=4,e.$toast(e.$t("success"),{type:"success"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){}))}))},handleCreated:function(){var t=this;this.getEmployeeInnerList(),d["a"].post(u.get+this.$route.params.id).then((function(e){var a={StatisticReportHeaderDto:e.data.header,StatisticReportInfoDto:e.data.infoList};a.StatisticReportInfoDto=t.serializeEmployeeIds(a.StatisticReportInfoDto),1===a.StatisticReportInfoDto.length&&null===a.StatisticReportInfoDto[0].infoType&&t.infoTypeList.forEach((function(t,e){a.StatisticReportInfoDto[e]=JSON.parse(JSON.stringify(a.StatisticReportInfoDto[0])),a.StatisticReportInfoDto[e].infoType=t.code})),t.form=a})),d["a"].post(u.quarter,{itemsPerPage:100,page:0}).then((function(e){t.quarterList=e.data.list})),d["a"].post(u.measurementUnit,{itemsPerPage:100,page:0}).then((function(e){t.measurementUnitList=e.data.list}))}},created:function(){this.handleCreated()},computed:{getTableMaxRows:function(){return 4+this.quarterList.length}},watch:{measurementUnitList:function(){this.serializeMeasurementUnit()}}},v=f,h=(a("172d"),a("2877")),I=Object(h["a"])(v,o,i,!1,null,"277b6d01",null);e["default"]=I.exports},c5aa:function(t,e,a){}}]);