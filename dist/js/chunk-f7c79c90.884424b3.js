(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7c79c90"],{"0c03":function(t,e,n){"use strict";n("d6eb")},7756:function(t,e,n){"use strict";n.r(e);var a=n("8468"),i=(n("d81d"),n("b0c0"),n("a4d3"),n("e01a"),function(){var t=this,e=t._self._c;return e("base-create-or-update-wrapper",{attrs:{"has-save-suspend":"","custom-title":t.$t("submodules.ad_passport_info.title")+" - "+t.isModeCreate?t.$t("actions.create"):t.$t("actions.update")},on:{save:t.save}},[e("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(n){return Object(a["a"])(n),[e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseInputWithValidation",{staticClass:"required",attrs:{rules:{required:!0,regex:/\b\d{9}\b/},name:"INN",mask:"#########",label:t.$t("submodules.bakery_stations.bakery_station_owner_inn"),"with-input-append":""},on:{blur:t.validateInn,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getSingleContractorByInn.apply(null,arguments)}},scopedSlots:t._u([{key:"append-slot",fn:function(){return[t.contractorNotFound?e("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-info",id:"contractorSearchButton"},on:{click:function(e){t.contractorCreateModal=!0}}},[e("i",{staticClass:"mdi mdi-plus-circle"})]):e("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary",id:"contractorSearchButton"},on:{click:t.getSingleContractorByInn}},[e("i",{staticClass:"mdi mdi-account-search"})])]},proxy:!0}],null,!0),model:{value:t.editingItem.inn,callback:function(e){t.$set(t.editingItem,"inn",e)},expression:"editingItem.inn"}})],1),e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required","has-next-page":t.hasNextPageContractors,searchable:!0,"allow-empty":!1,"preserve-search":"","clear-on-select":!1,loading:t.isLoadingContractors,"internal-search":!1,options:t.contractors.map((function(t){return t.id})),label:t.$t("submodules.bakery_stations.bakery_station_owner"),placeholder:"","custom-label":t.customLabelContractor,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:t.contractorSelected,reachedEndOfList:t.contractorReachedEndOfList,"search-change":t.debounceSearchContractors},model:{value:t.editingItem.contractorId,callback:function(e){t.$set(t.editingItem,"contractorId",e)},expression:"editingItem.contractorId"}})],1)],1),e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseInputWithValidation",{attrs:{"not-required":"",disabled:"",label:t.$t("submodules.bakery_stations.bakery_station_owner_phone_number"),mask:"+998#########"},model:{value:t.editingItem.contractorPhoneNumber,callback:function(e){t.$set(t.editingItem,"contractorPhoneNumber",e)},expression:"editingItem.contractorPhoneNumber"}})],1),e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseTextareaWithValidation",{attrs:{"not-required":"",disabled:"","max-rows":"2",label:t.$t("submodules.bakery_stations.bakery_station_owner_address")},model:{value:t.editingItem.contractorAddress,callback:function(e){t.$set(t.editingItem,"contractorAddress",e)},expression:"editingItem.contractorAddress"}})],1)],1),e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{cols:"12"}},[e("h5",{staticClass:"m-0 text-center"},[t._v(" "+t._s(t.$t("submodules.bakery_stations.bakery_station_exact_address"))+" ")]),e("hr")]),e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:t.regions.map((function(t){return t.regionId})),label:t.$t("column.region"),placeholder:"","custom-label":t.customLabelRegion,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:t.regionSelected},model:{value:t.editingItem.addressDto.regionId,callback:function(e){t.$set(t.editingItem.addressDto,"regionId",e)},expression:"editingItem.addressDto.regionId"}})],1),e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:t.districts.map((function(t){return t.id})),label:t.$t("column.district"),placeholder:"","custom-label":t.customLabelDistrict,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:t.districtSelected},model:{value:t.editingItem.addressDto.districtId,callback:function(e){t.$set(t.editingItem.addressDto,"districtId",e)},expression:"editingItem.addressDto.districtId"}})],1)],1),e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseMultiselectWithValidation",{attrs:{"not-required":"",options:t.quarters.map((function(t){return t.id})),label:t.$t("column.quarter"),placeholder:"","custom-label":t.customLabelQuarter,"open-direction":"bottom","max-height":600,"show-labels":!1,withCreateAddition:""},scopedSlots:t._u([{key:"append-slot",fn:function(){return[e("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary"},on:{click:function(e){t.quartersModal=!0}}},[e("i",{staticClass:"mdi mdi-plus-circle"})])]},proxy:!0}],null,!0),model:{value:t.editingItem.addressDto.quarterId,callback:function(e){t.$set(t.editingItem.addressDto,"quarterId",e)},expression:"editingItem.addressDto.quarterId"}}),e("BaseModalForCreate",{attrs:{mainApiUrl:"directory/quarter-names","additional-params":{regionId:t.editingItem.addressDto.regionId,districtId:t.editingItem.addressDto.districtId},createFormName:"CreateFormGeoRegionQuarters"},on:{"new-ref-created":t.newRefCreated},model:{value:t.quartersModal,callback:function(e){t.quartersModal=e},expression:"quartersModal"}})],1),e("b-col",{attrs:{sm:"12",md:"6"}},[e("b-row",[e("b-col",{attrs:{cols:"6"}},[e("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required|positiveNotZero",disabled:!0,"custom-styles":"grid-template-columns: 51% 43%;",name:"addressLocation",label:t.$t("column.location_address"),placeholder:t.$t("column.latitude")},model:{value:t.editingItem.latNumber,callback:function(e){t.$set(t.editingItem,"latNumber",e)},expression:"editingItem.latNumber"}})],1),e("b-col",{attrs:{cols:"3"}},[e("BaseInputWithValidation",{attrs:{rules:"required|positiveNotZero","only-form-element":"",disabled:!0,"custom-styles":"grid-template-columns: unset;",placeholder:t.$t("column.longitude")},model:{value:t.editingItem.lngNumber,callback:function(e){t.$set(t.editingItem,"lngNumber",e)},expression:"editingItem.lngNumber"}})],1),e("b-col",{attrs:{cols:"3"}},[e("b-button",{attrs:{variant:"primary",size:"sm",pill:""},on:{click:t.openMapModal}},[e("i",{staticClass:"mdi mdi-map-marker font-size-16 align-middle"}),t._v(" "+t._s(t.$t("column.map"))+" ")])],1)],1)],1)],1),e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseInputWithValidation",{attrs:{"not-required":"",name:"additionalAddress",label:t.$t("column.orienter")},model:{value:t.editingItem.addressDto.additional,callback:function(e){t.$set(t.editingItem.addressDto,"additional",e)},expression:"editingItem.addressDto.additional"}})],1)],1),e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{cols:"12"}},[e("hr")]),e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",label:t.$t("column.name")},model:{value:t.editingItem.name,callback:function(e){t.$set(t.editingItem,"name",e)},expression:"editingItem.name"}})],1),e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseTextareaWithValidation",{attrs:{"not-required":"","max-rows":"8",label:t.$t("column.comment"),placeholder:t.$t("column.comment")},model:{value:t.editingItem.description,callback:function(e){t.$set(t.editingItem,"description",e)},expression:"editingItem.description"}})],1)],1),e("b-row",{staticClass:"mb-3"},[e("b-col",{attrs:{sm:"12",md:"6"}},[e("BaseDatePickerWithValidation",{attrs:{"not-required":"",disableAfter:"",label:t.$t("column.created_date"),lang:"ru"},model:{value:t.editingItem.constructDate,callback:function(e){t.$set(t.editingItem,"constructDate",e)},expression:"editingItem.constructDate"}})],1)],1)]}}])}),e("b-modal",{attrs:{id:"create-multiple-min-collections-modal-id",size:"xl",title:t.$t("column.contractor"),"title-class":"font-18","ok-title":t.$t("actions.save"),"ok-variant":"success","cancel-title":t.$t("actions.cancel"),"cancel-variant":"danger","no-close-on-backdrop":"","no-close-on-esc":""},on:{ok:t.createContractor,cancel:function(e){return t.fetchContractorsWithKeyword("",!1,!0)}},model:{value:t.contractorCreateModal,callback:function(e){t.contractorCreateModal=e},expression:"contractorCreateModal"}},[e("CreateFormContractor",{ref:"createFormContractor",attrs:{"custom-is-mode-create":!0},on:{saved:t.contractorSaved}})],1),e("MapInModal",{attrs:{visible:t.mapModal,event:{lat:t.editingItem.latNumber,lng:t.editingItem.lngNumber}},on:{saveLocation:t.saveLocation,close:function(e){t.mapModal=!1}}})],1)}),r=[],o=n("2909"),s=n("c7eb"),c=n("1da1"),d=(n("d3b7"),n("159b"),n("7db0"),n("b680"),n("14d9"),n("99af"),n("03f4")),l=n("887a"),u=function(){var t=this,e=t._self._c;return e("div",[e("b-modal",{attrs:{size:"xl",visible:t.visible,title:t.$t("column.map"),"title-class":"font-18","ok-title":t.$t("actions.save"),"ok-variant":"success","cancel-title":t.$t("actions.cancel"),"cancel-variant":"danger","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{hidden:function(e){return t.$emit("clear")},shown:t.modalShown,ok:t.saveLocation,cancel:function(e){return t.$emit("close")}}},[e("b-container",{staticClass:"text-left"},[e("div",{staticClass:"map-wrapper"},[e("l-map",{ref:"mymap",attrs:{center:t.center,zoom:6},on:{click:t.addMarker}},[e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),e("v-locatecontrol")],1)],1)])],1)],1)},m=[],h=n("2699"),p=n("a40a"),g=n("e11e"),f=n.n(g),b=n("33d1"),I=n("e977"),v=n.n(I),y=f.a.Icon.extend({options:{shadowUrl:null,iconAnchor:new f.a.Point(12,12),iconSize:new f.a.Point(24,30),iconUrl:n("4fad0")}}),w={data:function(){return{center:f.a.latLng(41.381166,64.5735819),marker:null,lat:null,lng:null,url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},props:{visible:{type:Boolean},event:{required:!0,type:Object}},methods:{addMarker:function(t){this.marker&&this.map.removeLayer(this.marker),this.lat=t.latlng.lat,this.lng=t.latlng.lng,this.marker=new f.a.Marker(t.latlng,{icon:new y}).addTo(this.map)},drawCreated:function(t){var e=t.layerType,n=t.layer;"marker"===e&&(this.lat=t.layer._latlng.lat,this.lng=t.layer._latlng.lng,this.featureGroup.addLayer(n))},saveLocation:function(t){t.preventDefault(),this.marker&&this.lat&&this.lng&&this.$emit("saveLocation",{lat:this.lat,lng:this.lng})},deleteEventLocal:function(t){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("refresh"),e.$emit("clear");case 2:case"end":return t.stop()}}),t)})))()},modalShown:function(){var t=this;setTimeout((function(){t.$refs.mymap.mapObject.invalidateSize(),t.map=t.$refs.mymap.mapObject,t.marker&&t.map.removeLayer(t.marker),t.event.lat&&t.event.lng?(t.lat=t.event.lat,t.lng=t.event.lng,t.marker=new f.a.Marker(t.event,{icon:new y}).addTo(t.map),t.map.setView(t.event,17)):(t.lat=null,t.lng=null);var e=new b["geosearch"]({providers:[b["arcgisOnlineProvider"]({apikey:"AAPK9acf37860a924037b15132e490ddc20eOLJx7XB1eMCSpCz9GHsYDLeibbVI0Fzzh31h1N9b_cN7OIAYryLzBxkJ5NBwI03l"})],useMapBounds:!1,placeholder:t.$t("column.search")}).addTo(t.map),n=t;e.on("results",(function(t){t.results[0]&&n.addMarker(t.results[0])}))}),100)}},components:{LMap:h["a"],LTileLayer:p["a"],"v-locatecontrol":v.a}},k=w,C=(n("ff6d"),n("2877")),x=Object(C["a"])(k,u,m,!1,null,"05f1a4d7",null),L=x.exports,N=n("4325"),S="bakery",D={name:"CreateOrUpdate",components:{MapInModal:L,CreateFormContractor:N["default"]},data:function(){return{notFormattedMonthlyPayment:null,adSideValue:null,districtModal:!1,quartersModal:!1,streetsModal:!1,mapModal:!1,editingItem:{addressDto:{}},hasNextPageContractors:!1,contractors:[],debounce:null,isLoadingContractors:!1,districts:[],quarters:[],streets:[],adTypes:[],adGroups:[],adZones:[],adSides:[],adVolumeTypes:[],localPassportExpireDate:[],contractorCreateModal:!1,minCollectionValue:null,coefficientValue:null,contractorNotFound:!1,contractorSearchPayload:{},checkPassportNumberLoading:!1,dbPassportNumber:"",isPassportNumberInvalid:!1,minimumCollections:[],createMultipleMinimumCollectionsModal:!1,singleMinimumCollectionUpdateModal:!1,statuses:[],regions:[],units:[],adLocationTypes:[],adDesignTypes:[],adObjectStates:[],dropzoneOptions:{url:"https://httpbin.org/post",dictDefaultMessage:"ファイルをドロップしてください.",thumbnailWidth:150,maxFilesize:1,addRemoveLinks:!0,dictRemoveFile:"x",maxFiles:3},architectDocFile:{},photo:{},passportDocFile:{},passportPhoto:{},paymentDocFile:{}}},computed:{inputMinValue:function(t){return t.editingItem.passportGivenDate},inputMaxValue:function(t){return t.editingItem.passportExpireDate},isModeCreate:function(){return"CreateBakeryStation"==this.$route.name},computedObserver:function(){return this.$refs.observer}},methods:{findAndSetAdVolumeType:function(){var t=this;this.editingItem.directoryAdvertisementVolumeTypeId=null,this.editingItem.volume&&this.adVolumeTypes.forEach((function(e){parseFloat(t.editingItem.volume)>=e.minBorder&&parseFloat(t.editingItem.volume)<=e.maxBorder&&(t.editingItem.directoryAdvertisementVolumeTypeId=e.id)})),this.adVolumeTypeSelected(this.editingItem.directoryAdvertisementVolumeTypeId)},adSideSelected:function(t){var e=this.adSides.find((function(e){return e.id==t}));this.adSideValue=e?e.code:null,this.calculateAndSetMonthlyPayment()},adVolumeTypeSelected:function(t){this.getMinCollectionValue(this.editingItem.addressDto.regionId,this.editingItem.addressDto.districtId,this.editingItem.directoryAdvertisementLocationTypeId,this.editingItem.directoryAdvertisementDesignTypeId,t)},calculateAndSetMonthlyPayment:function(){if(this.$set(this.editingItem,"monthlyPayment",null),this.notFormattedMonthlyPayment=null,this.minCollectionValue&&this.coefficientValue&&this.editingItem.designTypePrivilegeCoefficient&&this.editingItem.volume&&this.adSideValue){var t=(parseFloat(this.minCollectionValue)*parseFloat(this.coefficientValue)*parseFloat(this.editingItem.designTypePrivilegeCoefficient)*parseFloat(this.editingItem.volume)*parseFloat(this.adSideValue)).toFixed(2);this.notFormattedMonthlyPayment=t;var e=this.getNumberFormat(t);this.$set(this.editingItem,"monthlyPayment",e)}else this.$set(this.editingItem,"monthlyPayment",null),this.notFormattedMonthlyPayment=null},getPrivilegeCoefficientValueByAdDesignTypeId:function(t){var e=this;t&&l["a"].getPrivilegeCoefficientValueByAdDesignTypeId(t).then((function(t){e.editingItem.designTypePrivilegeCoefficient=t.data,e.calculateAndSetMonthlyPayment()})).catch((function(t){return console.log(t)}))},newRefCreated:function(t,e,n){"CreateFormGeoRegionQuarters"==n?(this.quarters=t,this.editingItem.addressDto.quarterId=e):"CreateFormGeoRegionStreets"==n&&(this.streets=t,this.editingItem.addressDto.streetId=e)},onBlurPassportNumberInput:function(t){var e=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.isPassportNumberInvalid){n.next=3;break}return n.next=3,e.checkAdPassportNumber(t,!0);case 3:case"end":return n.stop()}}),n)})))()},debounceCheckPassportNumber:function(t){var e=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:clearTimeout(e.debounce),e.debounce=setTimeout(Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.checkAdPassportNumber(t);case 2:case"end":return n.stop()}}),n)}))),1e3);case 2:case"end":return n.stop()}}),n)})))()},checkAdPassportNumber:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.editingItem.addressDto.regionId&&e&&!this.checkPassportNumberLoading&&(this.isModeCreate||this.editingItem.passportNumber!=this.dbPassportNumber)&&(this.checkPassportNumberLoading=!0,l["a"].checkAdPassportNumberByRegion(e,this.editingItem.addressDto.regionId).then((function(e){t.isPassportNumberInvalid=e.data,t.isPassportNumberInvalid&&t.computedObserver.setErrors({PassportNumber:[t.$t("validator.ad_passport_number_already_in_use")]})})).catch((function(t){console.log(t)})).finally((function(){if(t.checkPassportNumberLoading=!1,!n){var e=t.$refs.passportNumber.$el.querySelector("input");setTimeout((function(){e.focus()}),50)}})))},saveLocation:function(t){this.$set(this.editingItem,"latNumber",t.lat),this.$set(this.editingItem,"lngNumber",t.lng),this.mapModal=!1},drawCreated:function(t){var e=t.layerType,n=t.layer;"marker"===e&&n.bindPopup("A popup!"),this.featureGroup.addLayer(n)},openMapModal:function(){this.mapModal=!0},contractorSaved:function(t){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.contractorCreateModal=!1,e.contractorNotFound=!1,t.next=4,e.fetchContractorsWithKeyword("",!0);case 4:case"end":return t.stop()}}),t)})))()},createContractor:function(t){t.preventDefault(),this.$refs.createFormContractor.save()},validateInn:function(){var t=this;l["a"].validateInnFromApi(this.editingItem.inn).then((function(e){e.data||(t.computedObserver.setErrors({INN:[t.$t("validator.inn")]}),t.contractorSelected(null,!0))})).catch((function(t){console.log(t)}))},getSingleContractorByInn:function(){var t=this;this.computedObserver.fields.INN.valid&&l["a"].validateInnFromApi(this.editingItem.inn).then((function(e){e.data?l["a"].getSingleContractorByInn(t.editingItem.inn).then((function(e){t.contractorNotFound=!1,t.contractorSelected(e.data,!1,!0)})).catch((function(e){t.contractorNotFound=!0})):(t.computedObserver.setErrors({INN:[t.$t("validator.inn")]}),t.contractorSelected(null,!0))})).catch((function(t){console.log(t)}))},handleWidthLengthInput:function(t){if(this.editingItem.width&&this.editingItem.length)try{this.editingItem.volume=parseFloat(this.editingItem.width)*parseFloat(this.editingItem.length),this.findAndSetAdVolumeType(),this.calculateAndSetMonthlyPayment()}catch(e){this.editingItem.volume=null,this.calculateAndSetMonthlyPayment(),this.findAndSetAdVolumeType()}else this.editingItem.volume=null,this.calculateAndSetMonthlyPayment(),this.findAndSetAdVolumeType()},addPassportDateChanged:function(t){t[0]?(this.editingItem.passportGivenDate=t[0],this.editingItem.passportExpireDate=t[1]):(this.editingItem.passportGivenDate=null,this.editingItem.passportExpireDate=null)},customLabelAdSide:function(t){var e=this.adSides.find((function(e){return e.id==t}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelAdVolumeType:function(t){var e=this.adVolumeTypes.find((function(e){return e.id==t}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelAdZone:function(t){var e=this.adZones.find((function(e){return e.id==t}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelAdRegionGroup:function(t){var e=this.adGroups.find((function(e){return e.id==t}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelAdType:function(t){var e=this.adTypes.find((function(e){return e.id==t}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelStreet:function(t){var e=this.streets.find((function(e){return e.id==t}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelQuarter:function(t){var e=this.quarters.find((function(e){return e.id==t}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelDistrict:function(t){var e=this.districts.find((function(e){return e.id==t}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},regionSelected:function(t){var e=arguments,n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){var i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e.length>1&&void 0!==e[1]&&e[1],i||(n.editingItem.addressDto.districtId=null),!t){a.next=5;break}return a.next=5,l["a"].getGeoLocationsByParentId(t).then((function(t){n.districts=t.data,i&&n.districtSelected(n.editingItem.addressDto.districtId,!0)})).catch((function(t){console.log(t)}));case 5:case"end":return a.stop()}}),a)})))()},getCoefficientValue:function(t,e){var n=this;t&&e&&this.isByAgency&&l["a"].getCoefficientValueByZoneAndDistrictIds(t,e).then((function(t){n.coefficientValue=t.data?t.data.coefficient:null,n.minCollectionValue&&n.calculateAndSetMonthlyPayment()})).catch((function(t){console.log(t),n.coefficientValue=null,n.calculateAndSetMonthlyPayment()}))},getMinCollectionValue:function(t,e,n,a,i){var r=this;t&&e&&n&&a&&this.isByAgency&&!this.editingItem.isUzAvtoYul?l["a"].getMinCollectionValueByRegionAndDistrictIds(t,e,n,a,i).then((function(t){r.minCollectionValue=t.data?t.data.cost:null,r.coefficientValue&&r.calculateAndSetMonthlyPayment()})).catch((function(t){console.log(t),r.minCollectionValue=null,r.calculateAndSetMonthlyPayment()})):this.minCollectionValue=null},districtSelected:function(t){var e=arguments,n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){var i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e.length>1&&void 0!==e[1]&&e[1],i||(n.editingItem.addressDto.quarterId=null,n.editingItem.directoryAdvertisementZoneId=null),!t){a.next=7;break}return a.next=5,d["a"].searchListWithKeyword("directory/quarter-names",n.var_default_search_payload,"get-by-districtId/".concat(t)).then((function(t){n.quarters=t.data.list})).catch((function(t){console.log(t),n.quarters=[]}));case 5:a.next=8;break;case 7:n.quarters=[];case 8:case"end":return a.stop()}}),a)})))()},adDesignTypeSelected:function(t){var e=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.getMinCollectionValue(e.editingItem.addressDto.regionId,e.editingItem.addressDto.districtId,e.editingItem.directoryAdvertisementLocationTypeId,t,e.editingItem.directoryAdvertisementVolumeTypeId),e.getPrivilegeCoefficientValueByAdDesignTypeId(t);case 2:case"end":return n.stop()}}),n)})))()},adZoneSelected:function(t){var e=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.getCoefficientValue(e.editingItem.addressDto.districtId,t);case 1:case"end":return n.stop()}}),n)})))()},customObjectState:function(t){var e=this.adObjectStates.find((function(e){return e.id==(t.id?t.id:t)}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelContractor:function(t){var e=this.contractors.find((function(e){return e.id==t}));return e?"".concat(e.fullName):""},contractorReachedEndOfList:function(t){t&&this.fetchContractors()},contractorSelected:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n?this.contractors.find((function(e){return e.id==t.id})):this.contractors.find((function(e){return e.id==t}));n&&t&&!a&&(this.contractors.push(t),a=t),a?(this.editingItem.contractorId=n?t.id:t,this.editingItem.inn=a.inn,this.editingItem.contractorPhoneNumber=null,this.editingItem.contractorPhoneNumber=a.mobileNumber,this.$set(this.editingItem,"contractorAddress","".concat(a.addressDto.regionNameUz,", ").concat(a.addressDto.districtNameUz," ").concat(a.addressDto.additional?","+a.addressDto.additional:"")),this.contractorNotFound=!1):(e||(this.editingItem.inn=null),this.editingItem.contractorId=null,this.editingItem.contractorPhoneNumber=null,this.editingItem.contractorAddress=null)},debounceSearchContractors:function(t){var e=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:clearTimeout(e.debounce),e.debounce=setTimeout(Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.fetchContractorsWithKeyword(t);case 2:case"end":return n.stop()}}),n)}))),1e3);case 2:case"end":return n.stop()}}),n)})))()},fetchContractorsWithKeyword:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.contractors=[],this.contractorSearchPayload.page=1,this.contractorSearchPayload.keyword=t||"",this.fetchContractors(e,n)},fetchContractors:function(t,e){var n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.isLoadingContractors=!0,a.next=3,d["a"].searchListWithKeyword("contractor",n.contractorSearchPayload,"by-contractor").then((function(a){var i;if((i=n.contractors).push.apply(i,Object(o["a"])(a.data.list)),t||e){var r=n.contractors.find((function(t){return t.inn==n.editingItem.inn}));r&&n.contractorSelected(r.id)}n.hasNextPageContractors=a.data.total/n.contractorSearchPayload.itemsPerPage>n.contractorSearchPayload.page,n.contractorSearchPayload.page+=1})).catch((function(t){console.log(t),n.contractors=[]})).finally((function(){n.isLoadingContractors=!1}));case 3:case"end":return a.stop()}}),a)})))()},adLocationTypeSelected:function(t){var e=arguments,n=this;return Object(c["a"])(Object(s["a"])().mark((function a(){var i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e.length>1&&void 0!==e[1]&&e[1],i||(n.editingItem.directoryAdvertisementDesignTypeId=null,n.editingItem.directoryAdvertisementVolumeTypeId=null),t?(n.getMinCollectionValue(n.editingItem.addressDto.regionId,n.editingItem.addressDto.districtId,t.id?t.id:t,n.editingItem.directoryAdvertisementDesignTypeId,n.editingItem.directoryAdvertisementVolumeTypeId),l["a"].getAdVolumeTypesByAdLocationTypeId(t.id?t.id:t).then((function(t){n.adVolumeTypes=t.data,n.findAndSetAdVolumeType()})).catch((function(t){console.log(t)})),n.editingItem.addressDto.regionId?l["a"].getAdDesignTypesByAdLocationTypeId(t.id?t.id:t,n.editingItem.addressDto.regionId).then((function(t){n.adDesignTypes=t.data})).catch((function(t){console.log(t),n.adDesignTypes=[]})):n.adDesignTypes=[]):(n.adDesignTypes=[],n.adVolumeTypes=[]);case 3:case"end":return a.stop()}}),a)})))()},customLabelAdLocationType:function(t){var e=this.adLocationTypes.find((function(e){return e.id==(t.id?t.id:t)}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelAdDesignType:function(t){var e=this.adDesignTypes.find((function(e){return e.id==(t.id?t.id:t)}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},customLabelRegion:function(t){var e=this.regions.find((function(e){return e.regionId==(t.regionId?t.regionId:t)}));return e?"".concat(this.getName({nameRu:e.regionNameRu,nameLt:e.regionNameLt,nameUz:e.regionNameUz})):""},customLabelUnit:function(t){var e=this.units.find((function(e){return e.id==(t.id?t.id:t)}));return e?"".concat(this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})):""},treeClosed:function(t){this.computedObserver.refs[t].validate()},normalizer:function(t){return t.children&&0!==t.children.length?{id:t.id,label:this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz}),children:t.children&&t.children.length>0?t.children:[]}:(delete t.children,{id:t.id,label:this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})})},save:function(){var t=this;this.computedObserver.validate().then((function(e){e?t.editingItem.id||t.$route.params.id?d["a"].update(S,t.editingItem,!1,!0).then((function(e){t.computedObserver.reset(),t.editingItem=Object.assign({},{addressDto:{}}),t.$router.go(-1),t.$toast(t.$t("messages.saved_successfully"),{type:"success"})})):d["a"].create(S,t.editingItem,!1,!0).then((function(e){t.computedObserver.reset(),t.editingItem=Object.assign({},{addressDto:{}}),t.$router.go(-1),t.$toast(t.$t("messages.saved_successfully"),{type:"success"})})):t.$toast(t.$t("messages.fill_required_fields"),{type:"error"})}))}},created:function(){var t=this;return Object(c["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.var_default_search_payload.itemsPerPage=500,t.contractorSearchPayload=Object.assign({},t.var_default_search_payload),!t.isModeCreate){e.next=7;break}return e.next=5,d["a"].getEmpty(S).then((function(e){t.editingItem=e.data})).catch((function(t){console.log(t)}));case 5:e.next=9;break;case 7:return e.next=9,d["a"].getById(S,t.$route.params.id,!0,null).then((function(e){t.editingItem=e.data})).catch((function(t){console.log(t)}));case 9:return e.next=11,l["a"].fetchRegionsForBakeryByCurrentUserId().then((function(e){t.regions=e.data,t.regionSelected(t.editingItem.addressDto?t.editingItem.addressDto.regionId:null,!0)})).catch((function(t){console.log(t)}));case 11:return e.next=13,t.fetchContractors();case 13:t.isModeCreate||t.contractorSelected(t.editingItem.contractorId);case 14:case"end":return e.stop()}}),e)})))()}},O=D,M=(n("0c03"),Object(C["a"])(O,i,r,!1,null,"0357d3d8",null));e["default"]=M.exports},b680:function(t,e,n){"use strict";var a=n("23e7"),i=n("e330"),r=n("5926"),o=n("408a"),s=n("1148"),c=n("d039"),d=RangeError,l=String,u=Math.floor,m=i(s),h=i("".slice),p=i(1..toFixed),g=function(t,e,n){return 0===e?n:e%2===1?g(t,e-1,n*t):g(t*t,e/2,n)},f=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},b=function(t,e,n){var a=-1,i=n;while(++a<6)i+=e*t[a],t[a]=i%1e7,i=u(i/1e7)},I=function(t,e){var n=6,a=0;while(--n>=0)a+=t[n],t[n]=u(a/e),a=a%e*1e7},v=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var a=l(t[e]);n=""===n?a:n+m("0",7-a.length)+a}return n},y=c((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!c((function(){p({})}));a({target:"Number",proto:!0,forced:y},{toFixed:function(t){var e,n,a,i,s=o(this),c=r(t),u=[0,0,0,0,0,0],p="",y="0";if(c<0||c>20)throw d("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(p="-",s=-s),s>1e-21)if(e=f(s*g(2,69,1))-69,n=e<0?s*g(2,-e,1):s/g(2,e,1),n*=4503599627370496,e=52-e,e>0){b(u,0,n),a=c;while(a>=7)b(u,1e7,0),a-=7;b(u,g(10,a,1),0),a=e-1;while(a>=23)I(u,1<<23),a-=23;I(u,1<<a),b(u,1,1),I(u,2),y=v(u)}else b(u,0,n),b(u,1<<-e,0),y=v(u)+m("0",c);return c>0?(i=y.length,y=p+(i<=c?"0."+m("0",c-i)+y:h(y,0,i-c)+"."+h(y,i-c))):y=p+y,y}})},b904:function(t,e,n){},d6eb:function(t,e,n){},ff6d:function(t,e,n){"use strict";n("b904")}}]);