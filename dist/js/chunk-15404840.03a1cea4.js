(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15404840"],{"039e":function(e,t,n){"use strict";n("5049")},"4be8":function(e,t,n){"use strict";n("7330")},5049:function(e,t,n){},7330:function(e,t,n){},b680:function(e,t,n){"use strict";var i=n("23e7"),a=n("e330"),o=n("5926"),r=n("408a"),s=n("1148"),c=n("d039"),d=RangeError,l=String,u=Math.floor,m=a(s),p=a("".slice),g=a(1..toFixed),h=function(e,t,n){return 0===t?n:t%2===1?h(e,t-1,n*e):h(e*e,t/2,n)},b=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},f=function(e,t,n){var i=-1,a=n;while(++i<6)a+=t*e[i],e[i]=a%1e7,a=u(a/1e7)},I=function(e,t){var n=6,i=0;while(--n>=0)i+=e[n],e[n]=u(i/t),i=i%t*1e7},y=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var i=l(e[t]);n=""===n?i:n+m("0",7-i.length)+i}return n},v=c((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!c((function(){g({})}));i({target:"Number",proto:!0,forced:v},{toFixed:function(e){var t,n,i,a,s=r(this),c=o(e),u=[0,0,0,0,0,0],g="",v="0";if(c<0||c>20)throw d("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(g="-",s=-s),s>1e-21)if(t=b(s*h(2,69,1))-69,n=t<0?s*h(2,-t,1):s/h(2,t,1),n*=4503599627370496,t=52-t,t>0){f(u,0,n),i=c;while(i>=7)f(u,1e7,0),i-=7;f(u,h(10,i,1),0),i=t-1;while(i>=23)I(u,1<<23),i-=23;I(u,1<<i),f(u,1,1),I(u,2),v=y(u)}else f(u,0,n),f(u,1<<-t,0),v=y(u)+m("0",c);return c>0?(a=v.length,v=g+(a<=c?"0."+m("0",c-a)+v:p(v,0,a-c)+"."+p(v,a-c))):v=g+v,v}})},f62b:function(e,t,n){"use strict";n.r(t);var i=n("8468"),a=(n("d81d"),n("a4d3"),n("e01a"),function(){var e=this,t=e._self._c;return t("base-create-or-update-wrapper",{attrs:{"has-save-suspend":"","custom-title":e.$t("submodules.ad_passport_info.title")+" - "+e.isModeCreate?e.$t("actions.create"):e.$t("actions.update")},on:{save:e.save}},[t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(n){return Object(i["a"])(n),[t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:{required:!0,regex:/\b\d{9}\b/},name:"INN",mask:"#########",label:e.$t("column.ad_construction_owner_inn"),"with-input-append":""},on:{blur:e.validateInn,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSingleContractorByInn.apply(null,arguments)}},scopedSlots:e._u([{key:"append-slot",fn:function(){return[e.contractorNotFound?t("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-info",id:"contractorSearchButton"},on:{click:function(t){e.contractorCreateModal=!0}}},[t("i",{staticClass:"mdi mdi-plus-circle"})]):t("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary",id:"contractorSearchButton"},on:{click:e.getSingleContractorByInn}},[t("i",{staticClass:"mdi mdi-account-search"})])]},proxy:!0}],null,!0),model:{value:e.editingItem.inn,callback:function(t){e.$set(e.editingItem,"inn",t)},expression:"editingItem.inn"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required","has-next-page":e.hasNextPageContractors,searchable:!0,"allow-empty":!1,"preserve-search":"","clear-on-select":!1,loading:e.isLoadingContractors,"internal-search":!1,options:e.contractors.map((function(e){return e.id})),label:e.$t("column.ad_construction_owner"),placeholder:"","custom-label":e.customLabelContractor,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:e.contractorSelected,reachedEndOfList:e.contractorReachedEndOfList,"search-change":e.debounceSearchContractors},model:{value:e.editingItem.contractorId,callback:function(t){e.$set(e.editingItem,"contractorId",t)},expression:"editingItem.contractorId"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",disabled:"",label:e.$t("column.ad_construction_owner_phone_number"),mask:"+998#########"},model:{value:e.editingItem.contractorPhoneNumber,callback:function(t){e.$set(e.editingItem,"contractorPhoneNumber",t)},expression:"editingItem.contractorPhoneNumber"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseTextareaWithValidation",{attrs:{"not-required":"",disabled:"","max-rows":"2",label:e.$t("column.ad_construction_owner_address")},model:{value:e.editingItem.contractorAddress,callback:function(t){e.$set(e.editingItem,"contractorAddress",t)},expression:"editingItem.contractorAddress"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{staticClass:"text-right",attrs:{sm:"12",md:"6"}},[t("b-form-checkbox",{staticStyle:{"font-size":"medium"},attrs:{id:"uzavtoyol",name:"uzavtoyol-checkbox"},model:{value:e.editingItem.isUzAvtoYul,callback:function(t){e.$set(e.editingItem,"isUzAvtoYul",t)},expression:"editingItem.isUzAvtoYul"}},[t("strong",[e._v(e._s(e.$t("column.uzavtoyul")))])])],1),t("b-col",{attrs:{sm:"12",md:"6"}})],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{cols:"12"}},[t("h5",{staticClass:"m-0 text-center"},[e._v(" "+e._s(e.$t("column.ad_construction_exact_address"))+" ")]),t("hr")]),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.regions.map((function(e){return e.regionId})),label:e.$t("column.region"),placeholder:"","custom-label":e.customLabelRegion,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:e.regionSelected},model:{value:e.editingItem.addressDto.regionId,callback:function(t){e.$set(e.editingItem.addressDto,"regionId",t)},expression:"editingItem.addressDto.regionId"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.districts.map((function(e){return e.id})),label:e.$t("column.district"),placeholder:"","custom-label":e.customLabelDistrict,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:e.districtSelected},model:{value:e.editingItem.addressDto.districtId,callback:function(t){e.$set(e.editingItem.addressDto,"districtId",t)},expression:"editingItem.addressDto.districtId"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.quarters.map((function(e){return e.id})),label:e.$t("column.quarter"),placeholder:"","custom-label":e.customLabelQuarter,"open-direction":"bottom","max-height":600,"show-labels":!1,withCreateAddition:""},on:{select:e.quarterSelected},scopedSlots:e._u([{key:"append-slot",fn:function(){return[t("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary"},on:{click:function(t){e.quartersModal=!0}}},[t("i",{staticClass:"mdi mdi-plus-circle"})])]},proxy:!0}],null,!0),model:{value:e.editingItem.addressDto.quarterId,callback:function(t){e.$set(e.editingItem.addressDto,"quarterId",t)},expression:"editingItem.addressDto.quarterId"}}),t("BaseModalForCreate",{attrs:{mainApiUrl:"directory/quarter-names","additional-params":{regionId:e.editingItem.addressDto.regionId,districtId:e.editingItem.addressDto.districtId},createFormName:"CreateFormGeoRegionQuarters"},on:{"new-ref-created":e.newRefCreated},model:{value:e.quartersModal,callback:function(t){e.quartersModal=t},expression:"quartersModal"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{attrs:{"not-required":"",options:e.streets.map((function(e){return e.id})),label:e.$t("column.street"),placeholder:"","custom-label":e.customLabelStreet,"open-direction":"bottom","max-height":600,"show-labels":!1,withCreateAddition:""},scopedSlots:e._u([{key:"append-slot",fn:function(){return[t("b-button",{staticStyle:{padding:"2.5px 10px","font-size":"1.2rem"},attrs:{variant:"outline-primary"},on:{click:function(t){e.streetsModal=!0}}},[t("i",{staticClass:"mdi mdi-plus-circle"})])]},proxy:!0}],null,!0),model:{value:e.editingItem.addressDto.streetId,callback:function(t){e.$set(e.editingItem.addressDto,"streetId",t)},expression:"editingItem.addressDto.streetId"}}),t("BaseModalForCreate",{attrs:{mainApiUrl:"directory/street-names","additional-params":{regionId:e.editingItem.addressDto.regionId,districtId:e.editingItem.addressDto.districtId,quarterId:e.editingItem.addressDto.quarterId},createFormName:"CreateFormGeoRegionStreets"},on:{"new-ref-created":e.newRefCreated},model:{value:e.streetsModal,callback:function(t){e.streetsModal=t},expression:"streetsModal"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",name:"additionalAddress",label:e.$t("column.orienter")},model:{value:e.editingItem.addressDto.additional,callback:function(t){e.$set(e.editingItem.addressDto,"additional",t)},expression:"editingItem.addressDto.additional"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("b-row",[t("b-col",{attrs:{cols:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required|positiveNotZero",disabled:!0,"custom-styles":"grid-template-columns: 51% 43%;",name:"addressLocation",label:e.$t("column.location_address"),placeholder:e.$t("column.latitude")},model:{value:e.editingItem.latNumber,callback:function(t){e.$set(e.editingItem,"latNumber",t)},expression:"editingItem.latNumber"}})],1),t("b-col",{attrs:{cols:"3"}},[t("BaseInputWithValidation",{attrs:{rules:"required|positiveNotZero","only-form-element":"",disabled:!0,"custom-styles":"grid-template-columns: unset;",placeholder:e.$t("column.longitude")},model:{value:e.editingItem.lngNumber,callback:function(t){e.$set(e.editingItem,"lngNumber",t)},expression:"editingItem.lngNumber"}})],1),t("b-col",{attrs:{cols:"3"}},[t("b-button",{attrs:{variant:"primary",size:"sm",pill:""},on:{click:e.openMapModal}},[t("i",{staticClass:"mdi mdi-map-marker font-size-16 align-middle"}),e._v(" "+e._s(e.$t("column.map"))+" ")])],1)],1)],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[e.editingItem.isUzAvtoYul?e._e():t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.adZones.map((function(e){return e.id})),label:e.$t("column.ad_construction_zone"),placeholder:"","custom-label":e.customLabelAdZone,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:e.adZoneSelected},model:{value:e.editingItem.directoryAdvertisementZoneId,callback:function(t){e.$set(e.editingItem,"directoryAdvertisementZoneId",t)},expression:"editingItem.directoryAdvertisementZoneId"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[e.editingItem.isUzAvtoYul?e._e():t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",disabled:"",options:e.adGroups.map((function(e){return e.id})),label:e.$t("column.ad_construction_region_group"),placeholder:"","custom-label":e.customLabelAdRegionGroup,"open-direction":"bottom","max-height":600,"show-labels":!1},model:{value:e.editingItem.directoryAdvertisementGroupId,callback:function(t){e.$set(e.editingItem,"directoryAdvertisementGroupId",t)},expression:"editingItem.directoryAdvertisementGroupId"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[e.editingItem.isUzAvtoYul?e._e():t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required",disabled:"",label:e.$t("column.coefficient")},model:{value:e.coefficientValue,callback:function(t){e.coefficientValue=t},expression:"coefficientValue"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",label:e.$t("column.code")},model:{value:e.editingItem.passportCode,callback:function(t){e.$set(e.editingItem,"passportCode",t)},expression:"editingItem.passportCode"}})],1),t("b-col",{attrs:{cols:"12"}},[t("hr")])],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{ref:"passportNumber",staticClass:"required",attrs:{rules:"required",name:"PassportNumber",label:e.$t("column.ad_construction_passport_number")},on:{input:e.debounceCheckPassportNumber,blur:function(t){return e.onBlurPassportNumberInput(t.target.value)}},model:{value:e.editingItem.passportNumber,callback:function(t){e.$set(e.editingItem,"passportNumber",t)},expression:"editingItem.passportNumber"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("b-row",[t("b-col",{attrs:{cols:"8"}},[t("BaseDatePickerWithValidation",{attrs:{"not-required":"",type:"month",format:"MM-YYYY","custom-styles":"grid-template-columns: 50% 50%",label:e.$t("column.ad_construction_passport_expire_date"),placeholder:e.$t("column.from"),minValue:e.inputMinValue,lang:"ru"},model:{value:e.editingItem.passportGivenDate,callback:function(t){e.$set(e.editingItem,"passportGivenDate",t)},expression:"editingItem.passportGivenDate"}})],1),t("b-col",{attrs:{cols:"4"}},[t("BaseDatePickerWithValidation",{attrs:{"not-required":"",type:"month",format:"MM-YYYY","custom-styles":"grid-template-columns: 99% 1%","only-form-element":"",placeholder:e.$t("column.to"),maxValue:e.inputMaxValue,lang:"ru"},model:{value:e.editingItem.passportExpireDate,callback:function(t){e.$set(e.editingItem,"passportExpireDate",t)},expression:"editingItem.passportExpireDate"}})],1)],1)],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.adLocationTypes.map((function(e){return e.id})),label:e.$t("column.ad_location_type"),placeholder:"","custom-label":e.customLabelAdLocationType,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:e.adLocationTypeSelected},model:{value:e.editingItem.directoryAdvertisementLocationTypeId,callback:function(t){e.$set(e.editingItem,"directoryAdvertisementLocationTypeId",t)},expression:"editingItem.directoryAdvertisementLocationTypeId"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.adDesignTypes.map((function(e){return e.id})),label:e.$t("column.ad_design_type"),placeholder:"","custom-label":e.customLabelAdDesignType,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{select:e.adDesignTypeSelected},model:{value:e.editingItem.directoryAdvertisementDesignTypeId,callback:function(t){e.$set(e.editingItem,"directoryAdvertisementDesignTypeId",t)},expression:"editingItem.directoryAdvertisementDesignTypeId"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.adSides.map((function(e){return e.id})),label:e.$t("column.ad_construction_side"),placeholder:"","custom-label":e.customLabelAdSide,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{input:e.adSideSelected},model:{value:e.editingItem.directoryTypeOfOutdoorAdvertisingToolId,callback:function(t){e.$set(e.editingItem,"directoryTypeOfOutdoorAdvertisingToolId",t)},expression:"editingItem.directoryTypeOfOutdoorAdvertisingToolId"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[1!=e.editingItem.designTypePrivilegeCoefficient||e.editingItem.isUzAvtoYul?e.editingItem.isUzAvtoYul?e._e():t("BaseInputWithValidation",{attrs:{"not-required":"",disabled:"",label:e.$t("column.coefficient_by_collection_amount")},model:{value:e.editingItem.designTypePrivilegeCoefficient,callback:function(t){e.$set(e.editingItem,"designTypePrivilegeCoefficient",t)},expression:"editingItem.designTypePrivilegeCoefficient"}}):t("BaseInputWithValidation",{attrs:{"not-required":"",disabled:"",label:e.$t("column.coefficient_by_collection_amount")}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.adTypes.map((function(e){return e.id})),label:e.$t("column.ad_construction_type"),placeholder:"","custom-label":e.customLabelAdType,"open-direction":"bottom","max-height":600,"show-labels":!1},model:{value:e.editingItem.directoryAdvertisementTypeId,callback:function(t){e.$set(e.editingItem,"directoryAdvertisementTypeId",t)},expression:"editingItem.directoryAdvertisementTypeId"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("b-row",[t("b-col",{attrs:{cols:"6"}},[t("BaseInputWithValidation",{staticClass:"required",attrs:{rules:"required|positiveNotZero","custom-styles":"grid-template-columns: 51% 43%;",label:e.$t("column.ad_construction_volume"),placeholder:e.$t("column.width")},on:{input:e.handleWidthLengthInput},model:{value:e.editingItem.width,callback:function(t){e.$set(e.editingItem,"width",t)},expression:"editingItem.width"}})],1),t("b-col",{attrs:{cols:"3"}},[t("BaseInputWithValidation",{attrs:{rules:"required|positiveNotZero","only-form-element":"","custom-styles":"grid-template-columns: unset;",placeholder:e.$t("column.length")},on:{input:e.handleWidthLengthInput},model:{value:e.editingItem.length,callback:function(t){e.$set(e.editingItem,"length",t)},expression:"editingItem.length"}})],1),t("b-col",{attrs:{cols:"3"}},[t("BaseInputWithValidation",{ref:"adVolume",attrs:{rules:"required|positiveNotZero","only-form-element":"","custom-styles":"grid-template-columns: unset;",disabled:"",placeholder:e.$t("column.volume")},model:{value:e.editingItem.volume,callback:function(t){e.$set(e.editingItem,"volume",t)},expression:"editingItem.volume"}})],1)],1)],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("b-row",[t("b-col",{attrs:{cols:"7"}},[e.isByAgency?t("BaseMultiselectWithValidation",{staticClass:"required",attrs:{rules:"required",options:e.adObjectStates.map((function(e){return e.id})),label:e.$t("column.status"),placeholder:"","custom-styles":"grid-template-columns: 44% 56%;","custom-label":e.customObjectState,"open-direction":"bottom","max-height":600,"show-labels":!1},model:{value:e.editingItem.directoryAdvertisementObjectStateId,callback:function(t){e.$set(e.editingItem,"directoryAdvertisementObjectStateId",t)},expression:"editingItem.directoryAdvertisementObjectStateId"}}):e._e()],1),t("b-col",{attrs:{cols:"5"}},[e.isByAgency?t("BaseDatePickerWithValidation",{attrs:{"not-required":"",disableAfter:"","custom-styles":"grid-template-columns: 40% 60%;",label:e.$t("column.created_date"),lang:"ru"},model:{value:e.editingItem.constructDate,callback:function(t){e.$set(e.editingItem,"constructDate",t)},expression:"editingItem.constructDate"}}):e._e()],1)],1)],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseMultiselectWithValidation",{attrs:{"not-required":"",disabled:"",options:e.adVolumeTypes.map((function(e){return e.id})),label:e.$t("submodules.ad_volume_types.title"),placeholder:"","custom-label":e.customLabelAdVolumeType,"open-direction":"bottom","max-height":600,"show-labels":!1},on:{input:e.adVolumeTypeSelected},model:{value:e.editingItem.directoryAdvertisementVolumeTypeId,callback:function(t){e.$set(e.editingItem,"directoryAdvertisementVolumeTypeId",t)},expression:"editingItem.directoryAdvertisementVolumeTypeId"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[e.isByAgency&&!e.editingItem.isUzAvtoYul?t("BaseInputWithValidation",{attrs:{"not-required":"",disabled:"",label:e.$t("column.monthly_income")},model:{value:e.editingItem.monthlyPayment,callback:function(t){e.$set(e.editingItem,"monthlyPayment",t)},expression:"editingItem.monthlyPayment"}}):e._e()],1),t("b-col",{attrs:{sm:"12",md:"6"}},[e.isByAgency?t("BaseTextareaWithValidation",{attrs:{"not-required":"","max-rows":"8",label:e.$t("column.comment"),placeholder:e.$t("column.comment")},model:{value:e.editingItem.description,callback:function(t){e.$set(e.editingItem,"description",t)},expression:"editingItem.description"}}):e._e()],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{cols:"12"}},[t("h5",{staticClass:"m-0 text-center"},[e._v(" "+e._s(e.$t("column.ad_construction_organisations_list"))+" ")]),t("hr")]),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",name:"".concat(e.$t("column.ad_construction_organisation"),"-1"),label:e.$t("column.ad_construction_organisation")},model:{value:e.editingItem.organizationNameOne,callback:function(t){e.$set(e.editingItem,"organizationNameOne",t)},expression:"editingItem.organizationNameOne"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",name:"".concat(e.$t("column.ad_construction_organisation"),"-2"),label:e.$t("column.ad_construction_organisation")},model:{value:e.editingItem.organizationNameTwo,callback:function(t){e.$set(e.editingItem,"organizationNameTwo",t)},expression:"editingItem.organizationNameTwo"}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",name:"".concat(e.$t("column.ad_construction_organisation"),"-3"),label:e.$t("column.ad_construction_organisation")},model:{value:e.editingItem.organizationNameThree,callback:function(t){e.$set(e.editingItem,"organizationNameThree",t)},expression:"editingItem.organizationNameThree"}})],1),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{"not-required":"",name:"".concat(e.$t("column.ad_construction_organisation"),"-4"),label:e.$t("column.ad_construction_organisation")},model:{value:e.editingItem.organizationNameFour,callback:function(t){e.$set(e.editingItem,"organizationNameFour",t)},expression:"editingItem.organizationNameFour"}})],1)],1),t("br"),e.isModeCreate?e._e():t("b-row",{staticClass:"mb-3"},[t("b-col",{attrs:{sm:"12",md:"3"}}),t("b-col",{attrs:{sm:"12",md:"6"}},[t("BaseInputWithValidation",{attrs:{disabled:"",label:e.$t("column.created_by")},model:{value:e.editingItem.createdByEmployeeFullName,callback:function(t){e.$set(e.editingItem,"createdByEmployeeFullName",t)},expression:"editingItem.createdByEmployeeFullName"}})],1)],1)]}}])}),t("b-modal",{attrs:{id:"create-multiple-min-collections-modal-id",size:"xl",title:e.$t("column.contractor"),"title-class":"font-18","ok-title":e.$t("actions.save"),"ok-variant":"success","cancel-title":e.$t("actions.cancel"),"cancel-variant":"danger","no-close-on-backdrop":"","no-close-on-esc":""},on:{ok:e.createContractor,cancel:function(t){return e.fetchContractorsWithKeyword("",!1,!0)}},model:{value:e.contractorCreateModal,callback:function(t){e.contractorCreateModal=t},expression:"contractorCreateModal"}},[t("CreateFormContractor",{ref:"createFormContractor",attrs:{"custom-is-mode-create":!0},on:{saved:e.contractorSaved}})],1),t("MapInModal",{attrs:{visible:e.mapModal,event:{lat:e.editingItem.latNumber,lng:e.editingItem.lngNumber}},on:{saveLocation:e.saveLocation,close:function(t){e.mapModal=!1}}})],1)}),o=[],r=n("2909"),s=n("c7eb"),c=n("1da1"),d=(n("b0c0"),n("d3b7"),n("159b"),n("7db0"),n("b680"),n("14d9"),n("99af"),n("03f4")),l=n("887a"),u=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{attrs:{size:"xl",visible:e.visible,title:e.$t("column.map"),"title-class":"font-18","ok-title":e.$t("actions.save"),"ok-variant":"success","cancel-title":e.$t("actions.cancel"),"cancel-variant":"danger","no-close-on-backdrop":"","no-close-on-esc":"","hide-header-close":""},on:{hidden:function(t){return e.$emit("clear")},shown:e.modalShown,ok:e.saveLocation,cancel:function(t){return e.$emit("close")}}},[t("b-container",{staticClass:"text-left"},[t("div",{staticClass:"map-wrapper"},[t("l-map",{ref:"mymap",attrs:{center:e.center,zoom:6},on:{click:e.addMarker}},[t("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),t("v-locatecontrol")],1)],1)])],1)],1)},m=[],p=n("2699"),g=n("a40a"),h=n("e11e"),b=n.n(h),f=n("33d1"),I=n("e977"),y=n.n(I),v=b.a.Icon.extend({options:{shadowUrl:null,iconAnchor:new b.a.Point(12,12),iconSize:new b.a.Point(24,30),iconUrl:n("4fad0")}}),A={data:function(){return{center:b.a.latLng(41.381166,64.5735819),marker:null,lat:null,lng:null,url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},props:{visible:{type:Boolean},event:{required:!0,type:Object}},methods:{addMarker:function(e){this.marker&&this.map.removeLayer(this.marker),this.lat=e.latlng.lat,this.lng=e.latlng.lng,this.marker=new b.a.Marker(e.latlng,{icon:new v}).addTo(this.map)},drawCreated:function(e){var t=e.layerType,n=e.layer;"marker"===t&&(this.lat=e.layer._latlng.lat,this.lng=e.layer._latlng.lng,this.featureGroup.addLayer(n))},saveLocation:function(e){e.preventDefault(),this.marker&&this.lat&&this.lng&&this.$emit("saveLocation",{lat:this.lat,lng:this.lng})},deleteEventLocal:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("refresh"),t.$emit("clear");case 2:case"end":return e.stop()}}),e)})))()},modalShown:function(){var e=this;setTimeout((function(){e.$refs.mymap.mapObject.invalidateSize(),e.map=e.$refs.mymap.mapObject,e.marker&&e.map.removeLayer(e.marker),e.event.lat&&e.event.lng?(e.lat=e.event.lat,e.lng=e.event.lng,e.marker=new b.a.Marker(e.event,{icon:new v}).addTo(e.map),e.map.setView(e.event,17)):(e.lat=null,e.lng=null);var t=new f["geosearch"]({providers:[f["arcgisOnlineProvider"]({apikey:"AAPK9acf37860a924037b15132e490ddc20eOLJx7XB1eMCSpCz9GHsYDLeibbVI0Fzzh31h1N9b_cN7OIAYryLzBxkJ5NBwI03l"})],useMapBounds:!1,placeholder:e.$t("column.search")}).addTo(e.map),n=e;t.on("results",(function(e){e.results[0]&&n.addMarker(e.results[0])}))}),100)}},components:{LMap:p["a"],LTileLayer:g["a"],"v-locatecontrol":y.a}},C=A,x=(n("4be8"),n("2877")),w=Object(x["a"])(C,u,m,!1,null,"0de2db4c",null),_=w.exports,$=n("4325"),k="contractor-advertising-construction",L="by-first-agent",T={name:"CreateOrUpdateByGovernment",components:{MapInModal:_,CreateFormContractor:$["default"]},data:function(){return{notFormattedMonthlyPayment:null,adSideValue:null,districtModal:!1,quartersModal:!1,streetsModal:!1,mapModal:!1,editingItem:{addressDto:{}},editingItem1:{addressDto:{}},hasNextPageContractors:!1,contractors:[],debounce:null,isLoadingContractors:!1,districts:[],quarters:[],streets:[],adTypes:[],adGroups:[],adZones:[],adSides:[],adVolumeTypes:[],localPassportExpireDate:[],contractorCreateModal:!1,minCollectionValue:null,coefficientValue:null,contractorNotFound:!1,contractorSearchPayload:{},checkPassportNumberLoading:!1,dbPassportNumber:"",isPassportNumberInvalid:!1,minimumCollections:[],createMultipleMinimumCollectionsModal:!1,singleMinimumCollectionUpdateModal:!1,statuses:[],regions:[],units:[],adLocationTypes:[],adDesignTypes:[],adObjectStates:[],dropzoneOptions:{url:"https://httpbin.org/post",dictDefaultMessage:"ファイルをドロップしてください.",thumbnailWidth:150,maxFilesize:1,addRemoveLinks:!0,dictRemoveFile:"x",maxFiles:3},architectDocFile:{},photo:{},passportDocFile:{},passportPhoto:{},paymentDocFile:{}}},computed:{inputMinValue:function(e){return e.editingItem.passportGivenDate},inputMaxValue:function(e){return e.editingItem.passportExpireDate},isModeCreate:function(){return"CreateAdPassportInfoByAgency"==this.$route.name||"CreateAdPassportInfoByGovernment"==this.$route.name},isByAgency:function(){return"CreateAdPassportInfoByAgency"==this.$route.name||"UpdateAdPassportInfoByAgency"==this.$route.name},isByGovernment:function(){return"CreateAdPassportInfoByGovernment"==this.$route.name||"UpdateAdPassportInfoByGovernment"==this.$route.name},computedObserver:function(){return this.$refs.observer},multipleMinimumCollectionsComputedObserver:function(){return this.$refs["multiple-minimum-collections-observer"]},singleMinimumCollectionUpdateComputedObserver:function(){return this.$refs["single-minimum-collection-update-observer"]}},methods:{findAndSetAdVolumeType:function(){var e=this;this.editingItem.directoryAdvertisementVolumeTypeId=null,this.editingItem.volume&&this.adVolumeTypes.forEach((function(t){parseFloat(e.editingItem.volume)>=t.minBorder&&parseFloat(e.editingItem.volume)<=t.maxBorder&&(e.editingItem.directoryAdvertisementVolumeTypeId=t.id)})),this.adVolumeTypeSelected(this.editingItem.directoryAdvertisementVolumeTypeId)},adSideSelected:function(e){var t=this.adSides.find((function(t){return t.id==e}));this.adSideValue=t?t.code:null,this.calculateAndSetMonthlyPayment()},adVolumeTypeSelected:function(e){this.getMinCollectionValue(this.editingItem.addressDto.regionId,this.editingItem.addressDto.districtId,this.editingItem.directoryAdvertisementLocationTypeId,this.editingItem.directoryAdvertisementDesignTypeId,e)},calculateAndSetMonthlyPayment:function(){if(this.$set(this.editingItem,"monthlyPayment",null),this.notFormattedMonthlyPayment=null,this.minCollectionValue&&this.coefficientValue&&this.editingItem.designTypePrivilegeCoefficient&&this.editingItem.volume&&this.adSideValue){var e=(parseFloat(this.minCollectionValue)*parseFloat(this.coefficientValue)*parseFloat(this.editingItem.designTypePrivilegeCoefficient)*parseFloat(this.editingItem.volume)*parseFloat(this.adSideValue)).toFixed(2);this.notFormattedMonthlyPayment=e;var t=this.getNumberFormat(e);this.$set(this.editingItem,"monthlyPayment",t)}else this.$set(this.editingItem,"monthlyPayment",null),this.notFormattedMonthlyPayment=null},getPrivilegeCoefficientValueByAdDesignTypeId:function(e){var t=this;e&&l["a"].getPrivilegeCoefficientValueByAdDesignTypeId(e).then((function(e){t.editingItem.designTypePrivilegeCoefficient=e.data,t.calculateAndSetMonthlyPayment()})).catch((function(e){return console.log(e)}))},newRefCreated:function(e,t,n){"CreateFormGeoRegionQuarters"==n?(this.quarters=e,this.editingItem.addressDto.quarterId=t):"CreateFormGeoRegionStreets"==n&&(this.streets=e,this.editingItem.addressDto.streetId=t)},onBlurPassportNumberInput:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.isPassportNumberInvalid){n.next=3;break}return n.next=3,t.checkAdPassportNumber(e,!0);case 3:case"end":return n.stop()}}),n)})))()},debounceCheckPassportNumber:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:clearTimeout(t.debounce),t.debounce=setTimeout(Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.checkAdPassportNumber(e);case 2:case"end":return n.stop()}}),n)}))),1e3);case 2:case"end":return n.stop()}}),n)})))()},checkAdPassportNumber:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.editingItem.addressDto.regionId&&t&&!this.checkPassportNumberLoading&&(this.isModeCreate||this.editingItem.passportNumber!=this.dbPassportNumber)&&(this.checkPassportNumberLoading=!0,l["a"].checkAdPassportNumberByRegion(t,this.editingItem.addressDto.regionId).then((function(t){e.isPassportNumberInvalid=t.data,e.isPassportNumberInvalid&&e.computedObserver.setErrors({PassportNumber:[e.$t("validator.ad_passport_number_already_in_use")]})})).catch((function(e){console.log(e)})).finally((function(){if(e.checkPassportNumberLoading=!1,!n){var t=e.$refs.passportNumber.$el.querySelector("input");setTimeout((function(){t.focus()}),50)}})))},saveLocation:function(e){this.$set(this.editingItem,"latNumber",e.lat),this.$set(this.editingItem,"lngNumber",e.lng),this.mapModal=!1},drawCreated:function(e){var t=e.layerType,n=e.layer;"marker"===t&&n.bindPopup("A popup!"),this.featureGroup.addLayer(n)},openMapModal:function(){this.mapModal=!0},contractorSaved:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.contractorCreateModal=!1,t.contractorNotFound=!1,e.next=4,t.fetchContractorsWithKeyword("",!0);case 4:case"end":return e.stop()}}),e)})))()},createContractor:function(e){e.preventDefault(),this.$refs.createFormContractor.save()},validateInn:function(){var e=this;l["a"].validateInnFromApi(this.editingItem.inn).then((function(t){t.data||(e.computedObserver.setErrors({INN:[e.$t("validator.inn")]}),e.contractorSelected(null,!0))})).catch((function(e){console.log(e)}))},getSingleContractorByInn:function(){var e=this;this.computedObserver.fields.INN.valid&&l["a"].validateInnFromApi(this.editingItem.inn).then((function(t){t.data?l["a"].getSingleContractorByInn(e.editingItem.inn).then((function(t){e.contractorNotFound=!1,e.contractorSelected(t.data,!1,!0)})).catch((function(t){e.contractorNotFound=!0})):(e.computedObserver.setErrors({INN:[e.$t("validator.inn")]}),e.contractorSelected(null,!0))})).catch((function(e){console.log(e)}))},handleWidthLengthInput:function(e){if(this.editingItem.width&&this.editingItem.length)try{this.editingItem.volume=parseFloat(this.editingItem.width)*parseFloat(this.editingItem.length),this.findAndSetAdVolumeType(),this.calculateAndSetMonthlyPayment()}catch(t){this.editingItem.volume=null,this.calculateAndSetMonthlyPayment(),this.findAndSetAdVolumeType()}else this.editingItem.volume=null,this.calculateAndSetMonthlyPayment(),this.findAndSetAdVolumeType()},addPassportDateChanged:function(e){e[0]?(this.editingItem.passportGivenDate=e[0],this.editingItem.passportExpireDate=e[1]):(this.editingItem.passportGivenDate=null,this.editingItem.passportExpireDate=null)},customLabelAdSide:function(e){var t=this.adSides.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelAdVolumeType:function(e){var t=this.adVolumeTypes.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelAdZone:function(e){var t=this.adZones.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelAdRegionGroup:function(e){var t=this.adGroups.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelAdType:function(e){var t=this.adTypes.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelStreet:function(e){var t=this.streets.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelQuarter:function(e){var t=this.quarters.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelDistrict:function(e){var t=this.districts.find((function(t){return t.id==e}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},regionSelected:function(e){var t=arguments,n=this;return Object(c["a"])(Object(s["a"])().mark((function i(){var a;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>1&&void 0!==t[1]&&t[1],a||(n.editingItem.addressDto.districtId=null,n.editingItem.directoryAdvertisementGroupId=null),!e){i.next=9;break}return i.next=5,l["a"].getGeoLocationsByParentId(e).then((function(e){n.districts=e.data,a&&n.districtSelected(n.editingItem.addressDto.districtId,!0)})).catch((function(e){console.log(e)}));case 5:if(n.editingItem.isUzAvtoYul){i.next=8;break}return i.next=8,l["a"].getGroupOfRegion(e).then((function(e){n.$set(n.editingItem,"directoryAdvertisementGroupId",e.data.id)})).catch((function(e){console.log(e)}));case 8:n.editingItem.directoryAdvertisementLocationTypeId?l["a"].getAdDesignTypesByAdLocationTypeId(n.editingItem.directoryAdvertisementLocationTypeId,e).then((function(e){n.adDesignTypes=e.data})).catch((function(e){console.log(e),n.adDesignTypes=[]})):n.adDesignTypes=[];case 9:n.checkAdPassportNumber(n.editingItem.passportNumber);case 10:case"end":return i.stop()}}),i)})))()},getCoefficientValue:function(e,t){var n=this;e&&t&&this.isByAgency&&l["a"].getCoefficientValueByZoneAndDistrictIds(e,t).then((function(e){n.coefficientValue=e.data?e.data.coefficient:null,n.minCollectionValue&&n.calculateAndSetMonthlyPayment()})).catch((function(e){console.log(e),n.coefficientValue=null,n.calculateAndSetMonthlyPayment()}))},getMinCollectionValue:function(e,t,n,i,a){var o=this;e&&t&&n&&i&&this.isByAgency&&!this.editingItem.isUzAvtoYul?l["a"].getMinCollectionValueByRegionAndDistrictIds(e,t,n,i,a).then((function(e){o.minCollectionValue=e.data?e.data.cost:null,o.coefficientValue&&o.calculateAndSetMonthlyPayment()})).catch((function(e){console.log(e),o.minCollectionValue=null,o.calculateAndSetMonthlyPayment()})):this.minCollectionValue=null},districtSelected:function(e){var t=arguments,n=this;return Object(c["a"])(Object(s["a"])().mark((function i(){var a;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>1&&void 0!==t[1]&&t[1],a||(n.editingItem.addressDto.quarterId=null,n.editingItem.directoryAdvertisementZoneId=null),n.getMinCollectionValue(n.editingItem.addressDto.regionId,e,n.editingItem.directoryAdvertisementLocationTypeId,n.editingItem.directoryAdvertisementDesignTypeId,n.editingItem.directoryAdvertisementVolumeTypeId),n.getCoefficientValue(e,n.editingItem.directoryAdvertisementZoneId),!e){i.next=12;break}return i.next=7,d["a"].searchListWithKeyword("directory/quarter-names",n.var_default_search_payload,"get-by-districtId/".concat(e)).then((function(e){n.quarters=e.data.list,a&&n.quarterSelected(n.editingItem.addressDto.quarterId,!0)})).catch((function(e){console.log(e),n.quarters=[]}));case 7:if(n.editingItem.isUzAvtoYul){i.next=10;break}return i.next=10,l["a"].getAdZonesByDistrictId(e).then((function(e){n.adZones=e.data})).catch((function(e){console.log(e),n.adZones=[]}));case 10:i.next=16;break;case 12:n.quarters=[],n.adZones=[],n.minCollectionValue=null,n.coefficientValue=null;case 16:case"end":return i.stop()}}),i)})))()},adDesignTypeSelected:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.getMinCollectionValue(t.editingItem.addressDto.regionId,t.editingItem.addressDto.districtId,t.editingItem.directoryAdvertisementLocationTypeId,e,t.editingItem.directoryAdvertisementVolumeTypeId),t.getPrivilegeCoefficientValueByAdDesignTypeId(e);case 2:case"end":return n.stop()}}),n)})))()},adZoneSelected:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.getCoefficientValue(t.editingItem.addressDto.districtId,e);case 1:case"end":return n.stop()}}),n)})))()},quarterSelected:function(e){var t=arguments,n=this;return Object(c["a"])(Object(s["a"])().mark((function i(){var a;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>1&&void 0!==t[1]&&t[1],a||(n.editingItem.addressDto.streetId=null),!e){i.next=7;break}return i.next=5,d["a"].searchListWithKeyword("directory/street-names",n.var_default_search_payload,"get-by-quarterId/".concat(e)).then((function(e){n.streets=e.data.list})).catch((function(e){console.log(e),n.streets=[]}));case 5:i.next=8;break;case 7:n.streets=[];case 8:case"end":return i.stop()}}),i)})))()},customObjectState:function(e){var t=this.adObjectStates.find((function(t){return t.id==(e.id?e.id:e)}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelContractor:function(e){var t=this.contractors.find((function(t){return t.id==e}));return t?"".concat(t.fullName):""},contractorReachedEndOfList:function(e){e&&this.fetchContractors()},contractorSelected:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?this.contractors.find((function(t){return t.id==e.id})):this.contractors.find((function(t){return t.id==e}));n&&e&&!i&&(this.contractors.push(e),i=e),i?(this.editingItem.contractorId=n?e.id:e,this.editingItem.inn=i.inn,this.editingItem.contractorPhoneNumber=null,this.editingItem.contractorPhoneNumber=i.mobileNumber,this.editingItem.contractorAddress="".concat(i.addressDto.regionNameUz,", ").concat(i.addressDto.districtNameUz," ").concat(i.addressDto.additional?","+i.addressDto.additional:""),this.contractorNotFound=!1):(t||(this.editingItem.inn=null),this.editingItem.contractorId=null,this.editingItem.contractorPhoneNumber=null,this.editingItem.contractorAddress=null)},debounceSearchContractors:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:clearTimeout(t.debounce),t.debounce=setTimeout(Object(c["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.fetchContractorsWithKeyword(e);case 2:case"end":return n.stop()}}),n)}))),1e3);case 2:case"end":return n.stop()}}),n)})))()},fetchContractorsWithKeyword:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.contractors=[],this.contractorSearchPayload.page=1,this.contractorSearchPayload.keyword=e||"",this.fetchContractors(t,n)},fetchContractors:function(e,t){var n=this;return Object(c["a"])(Object(s["a"])().mark((function i(){return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n.isLoadingContractors=!0,i.next=3,d["a"].searchListWithKeyword("contractor",n.contractorSearchPayload,"by-contractor").then((function(i){var a;if((a=n.contractors).push.apply(a,Object(r["a"])(i.data.list)),e||t){var o=n.contractors.find((function(e){return e.inn==n.editingItem.inn}));o&&n.contractorSelected(o.id)}n.hasNextPageContractors=i.data.total/n.contractorSearchPayload.itemsPerPage>n.contractorSearchPayload.page,n.contractorSearchPayload.page+=1})).catch((function(e){console.log(e),n.contractors=[]})).finally((function(){n.isLoadingContractors=!1}));case 3:case"end":return i.stop()}}),i)})))()},adLocationTypeSelected:function(e){var t=arguments,n=this;return Object(c["a"])(Object(s["a"])().mark((function i(){var a;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=t.length>1&&void 0!==t[1]&&t[1],a||(n.editingItem.directoryAdvertisementDesignTypeId=null,n.editingItem.directoryAdvertisementVolumeTypeId=null),e?(n.getMinCollectionValue(n.editingItem.addressDto.regionId,n.editingItem.addressDto.districtId,e.id?e.id:e,n.editingItem.directoryAdvertisementDesignTypeId,n.editingItem.directoryAdvertisementVolumeTypeId),l["a"].getAdVolumeTypesByAdLocationTypeId(e.id?e.id:e).then((function(e){n.adVolumeTypes=e.data,n.findAndSetAdVolumeType()})).catch((function(e){console.log(e)})),n.editingItem.addressDto.regionId?l["a"].getAdDesignTypesByAdLocationTypeId(e.id?e.id:e,n.editingItem.addressDto.regionId).then((function(e){n.adDesignTypes=e.data})).catch((function(e){console.log(e),n.adDesignTypes=[]})):n.adDesignTypes=[]):(n.adDesignTypes=[],n.adVolumeTypes=[]);case 3:case"end":return i.stop()}}),i)})))()},customLabelAdLocationType:function(e){var t=this.adLocationTypes.find((function(t){return t.id==(e.id?e.id:e)}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelAdDesignType:function(e){var t=this.adDesignTypes.find((function(t){return t.id==(e.id?e.id:e)}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},customLabelRegion:function(e){var t=this.regions.find((function(t){return t.regionId==(e.regionId?e.regionId:e)}));return t?"".concat(this.getName({nameRu:t.regionNameRu,nameLt:t.regionNameLt,nameUz:t.regionNameUz})):""},customLabelUnit:function(e){var t=this.units.find((function(t){return t.id==(e.id?e.id:e)}));return t?"".concat(this.getName({nameRu:t.nameRu,nameLt:t.nameLt,nameUz:t.nameUz})):""},treeClosed:function(e){this.computedObserver.refs[e].validate()},normalizer:function(e){return e.children&&0!==e.children.length?{id:e.id,label:this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz}),children:e.children&&e.children.length>0?e.children:[]}:(delete e.children,{id:e.id,label:this.getName({nameRu:e.nameRu,nameLt:e.nameLt,nameUz:e.nameUz})})},save:function(){var e=this;this.computedObserver.validate().then((function(t){t?(e.$set(e.editingItem,"monthlyPayment",e.notFormattedMonthlyPayment),e.editingItem.id||e.$route.params.id?d["a"].update(k,e.isByGovernment?e.editingItem:{contractorAdvertisingConstructionForSecondAgentDto:e.editingItem,id:e.editingItem.id},!!e.isByGovernment&&L,!0).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{addressDto:{}}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})})):d["a"].create(k,e.isByGovernment?e.editingItem:{contractorAdvertisingConstructionForSecondAgentDto:e.editingItem},!!e.isByGovernment&&L,!0).then((function(t){e.computedObserver.reset(),e.editingItem=Object.assign({},{addressDto:{}}),e.$router.go(-1),e.$toast(e.$t("messages.saved_successfully"),{type:"success"})}))):e.$toast(e.$t("messages.fill_required_fields"),{type:"error"})}))}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.var_default_search_payload.itemsPerPage=500,e.contractorSearchPayload=Object.assign({},e.var_default_search_payload),!e.isModeCreate){t.next=7;break}return t.next=5,d["a"].getEmpty(k,!!e.isByGovernment&&L).then((function(t){e.editingItem=e.isByGovernment?t.data:t.data.contractorAdvertisingConstructionForFirstAgentDto,e.editingItem1=e.isByGovernment?{addressDto:{}}:t.data.contractorAdvertisingConstructionForSecondAgentDto})).catch((function(e){console.log(e)}));case 5:t.next=9;break;case 7:return t.next=9,d["a"].getById(k,e.$route.params.id,!0,null,!!e.isByGovernment&&L).then((function(t){e.editingItem=e.isByGovernment?t.data:t.data.contractorAdvertisingConstructionForSecondAgentDto,e.dbPassportNumber=e.editingItem.passportNumber})).catch((function(e){console.log(e)}));case 9:return t.next=11,l["a"].fetchRegionsForAdvertisementByCurrentUserId().then((function(t){e.regions=t.data,e.regionSelected(e.editingItem.addressDto?e.editingItem.addressDto.regionId:null,!0)})).catch((function(e){console.log(e)}));case 11:return d["a"].searchList("directory/type-of-outdoor-advertising-tools",e.var_default_search_payload).then((function(t){e.adSides=t.data.list})).catch((function(e){console.log(e)})),e.editingItem.isUzAvtoYul||d["a"].searchList("directory/advertisement-group",e.var_default_search_payload).then((function(t){e.adGroups=t.data.list})).catch((function(e){console.log(e)})),d["a"].searchList("directory/advertisement-location-types",e.var_default_search_payload).then((function(t){e.adLocationTypes=t.data.list,e.adLocationTypeSelected(e.editingItem.directoryAdvertisementLocationTypeId,!0)})).catch((function(e){console.log(e)})),d["a"].searchList("directory/advertisement-type",e.var_default_search_payload).then((function(t){e.adTypes=t.data.list})).catch((function(e){console.log(e)})),t.next=17,e.fetchContractors();case 17:e.isByAgency&&d["a"].searchListWithKeyword("directory/advertisement-object-state",e.var_default_search_payload).then((function(t){e.adObjectStates=t.data.list})).catch((function(e){console.log(e)})),e.isModeCreate||(e.contractorSelected(e.editingItem.contractorId),e.findAndSetAdVolumeType(),e.getCoefficientValue(e.editingItem.addressDto.districtId,e.editingItem.directoryAdvertisementZoneId),e.adSideSelected(e.editingItem.directoryTypeOfOutdoorAdvertisingToolId));case 19:case"end":return t.stop()}}),t)})))()}},D=T,N=(n("039e"),Object(x["a"])(D,a,o,!1,null,"38b255d2",null));t["default"]=N.exports}}]);