(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-427a6280"],{"129b":function(t,e,a){"use strict";a.r(e);a("99af");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"col-md-12 text-center"},[e("div",{staticClass:"h4 mb-4 d-inline-block"},[t._v(t._s(t.$t("submodules.users.all_users")))])]),e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"search-box me-2 mb-2 d-inline-block"},[e("div",{staticClass:"position-relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKeyword,expression:"searchKeyword"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("column.search")},domProps:{value:t.searchKeyword},on:{input:[function(e){e.target.composing||(t.searchKeyword=e.target.value)},t.fetchTableItems]}}),e("i",{staticClass:"bx bx-search-alt search-icon"})])])]),e("div",{staticClass:"col-sm-6"},[e("span",[t._v(t._s(t.$t("column.select.text1")))]),e("div",{staticClass:"col-3 me-2 mx-2 d-inline-block"},[e("div",{staticClass:"position-relative"},[e("b-form-select",{staticClass:"form-select",attrs:{options:t.optionsTable},on:{change:t.selectList},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)]),e("span",[t._v(t._s(t.$t("column.select.text2")))])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"text-sm-end"},[e("b-row",[e("b-col",{staticClass:"d-flex justify-content-end",attrs:{cols:"6"}},[e("download-excel",{staticStyle:{width:"fit-content"},attrs:{data:t.json_data,fields:t.json_fields,header:t.$t("submodules.users.all_users"),worksheet:"My Worksheet",name:"Барча_фойдаланувчилар.xls"}},[e("b-btn",{staticClass:"btn btn-rounded bg-primary mb-2",attrs:{type:"button"},on:{click:t.downloadExcel}},[e("i",{staticClass:"mdi mdi-microsoft-excel me-1"}),t._v(" "+t._s(t.$t("actions.download"))+" ")])],1)],1),e("b-col",{attrs:{cols:"6"}},[e("b-btn",{staticClass:"btn btn-success btn-rounded mb-2 me-2",attrs:{type:"button",to:{name:"CreateUser"}}},[e("i",{staticClass:"mdi mdi-plus me-1"}),t._v(" "+t._s(t.$t("actions.add"))+" ")])],1)],1)],1)])]),e("b-table",{staticClass:"custom-b-table max-height-70",attrs:{items:t.tableItems,fields:t.tableFields,busy:t.loadingTableItems,"sticky-header":"sticky-header",id:"my-table",responsive:"",striped:"",bordered:"",small:"",hover:"","show-empty":""},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(" "+t._s(t.util_paginate(e.index,t.var_default_search_payload.page,t.var_default_search_payload.itemsPerPage))+" ")]}},{key:"cell(roleNames)",fn:function(a){return[e("div",{staticClass:"d-flex justify-content-between"},t._l(a.item.roleNames,(function(a,s){return e("p",{key:"".concat(a,"-").concat(s),staticClass:"mb-0",staticStyle:{"flex-basis":"0","flex-grow":"1","font-size":".95rem"}},[e("span",{staticClass:"badge bg-primary badge-pill"},[t._v(t._s(a))])])})),0)]}},{key:"cell(status)",fn:function(a){return[e("p",{staticClass:"mb-0",staticStyle:{"font-size":".95rem"}},[e("span",{class:["badge","ACTIVE"==a.item.statusUz?"bg-success":"DELETED"==a.item.statusUz?"bg-danger":"bg-info"]},[t._v(t._s(t.getName({nameRu:a.item.statusRu,nameLt:a.item.statusLt,nameUz:a.item.statusUz})))])])]}},{key:"cell(yurDep)",fn:function(a){return[e("p",{staticStyle:{color:"#6f42c1"}},[t._v(t._s(t.getName({nameRu:a.item.yurDepNameRu,nameLt:a.item.yurDepNameLt,nameUz:a.item.yurDepNameUz})))])]}},{key:"cell(department)",fn:function(a){return[e("p",[t._v(t._s(t.getName({nameRu:a.item.departmentParentNameRu,nameLt:a.item.departmentParentNameLt,nameUz:a.item.departmentParentNameUz})))]),e("p",{staticStyle:{color:"#6f42c1"}},[t._v(t._s(t.getName({nameRu:a.item.departmentNameRu,nameLt:a.item.departmentNameLt,nameUz:a.item.departmentNameUz})))])]}},{key:"cell(position)",fn:function(a){return[e("p",[t._v(t._s(t.getName({nameRu:a.item.positionNameRu,nameLt:a.item.positionNameLt,nameUz:a.item.positionNameUz})))])]}},{key:"cell(employeeType)",fn:function(a){return[null!=a.item.departmentTypeId?e("p",[t._v(t._s(t.$t("submodules.employees.type_inner")))]):e("p",[t._v(t._s(t.$t("submodules.employees.type_outer")))])]}},{key:"cell(actions)",fn:function(a){return[e("div",{staticClass:"general-table__actions d-flex justify-content-center"},["DELETED"!=a.item.statusUz?e("b-btn",{staticClass:"text-decoration-none p-0",staticStyle:{"font-size":"1.2rem","margin-right":"1rem"},attrs:{variant:"link"}},[e("i",{staticClass:"mdi mdi-circle-edit-outline edit",on:{click:function(e){return t.editItem(a.item.id,"users")}}})]):t._e(),"DELETED"!=a.item.statusUz?e("b-btn",{staticClass:"text-decoration-none p-0 text-danger",staticStyle:{"font-size":"1.2rem"},attrs:{variant:"link"}},[e("i",{staticClass:"mdi mdi-trash-can delete",on:{click:function(e){return t.deleteItem(a.item.id,"users")}}})]):t._e()],1)]}},{key:"empty",fn:function(){return[e("h4",{staticClass:"text-center"},[t._v(t._s(t.$t("messages.data_not_found")))])]},proxy:!0},{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center my-2"},[e("b-spinner",{staticClass:"align-middle",attrs:{variant:"primary"}})],1)]},proxy:!0}])}),e("b-pagination",{staticClass:"justify-content-end",attrs:{"total-rows":t.totalItems,"per-page":t.var_default_search_payload.itemsPerPage,"aria-controls":"my-table"},model:{value:t.var_default_search_payload.page,callback:function(e){t.$set(t.var_default_search_payload,"page",e)},expression:"var_default_search_payload.page"}})],1)])])])},i=[],l=a("ade3"),n=(a("d3b7"),a("159b"),a("14d9"),a("9225"),a("03f4")),o="user",c={name:"Index",data:function(){var t;return{activeDep:{},selected:20,optionsTable:[{value:20,text:20},{value:50,text:50},{value:100,text:100},{value:150,text:150},{value:200,text:200}],tableItems:[],totalItems:0,loadingTableItems:!1,tableFields:[{label:"#",thClass:"text-center",tdClass:"text-center",sortable:!1,key:"index"},{label:this.$t("column.employee"),key:"employeeFullName"},{label:this.$t("auth.username"),key:"username"},{label:this.$t("territorial_administration"),key:"yurDep"},{label:this.$t("column.department"),key:"department"},{label:this.$t("column.position"),key:"position"},{label:this.$t("submodules.employees.type"),key:"employeeType"},{label:this.$t("column.lastUse"),key:"lastUse"},{label:this.$t("submodules.roles.title"),key:"roleNames"},{label:this.$t("column.status"),key:"status"}],searchKeyword:"",json_data:[],json_fields:(t={},Object(l["a"])(t,this.$t("column.employee"),"employeeFullName"),Object(l["a"])(t,this.$t("auth.username"),"username"),Object(l["a"])(t,this.$t("territorial_administration"),"yurDepNameUz"),Object(l["a"])(t,this.$t("column.department"),"department"),Object(l["a"])(t,this.$t("column.position"),"position"),Object(l["a"])(t,this.$t("column.lastUse"),"lastUse"),Object(l["a"])(t,this.$t("submodules.roles.title"),"roleNames"),Object(l["a"])(t,this.$t("column.status"),"status"),t)}},computed:{numberOfPages:function(){return!this.totalItems||this.totalItems<=0||this.totalItems<this.var_default_search_payload.itemsPerPage?1:this.totalItems/this.var_default_search_payload.itemsPerPage}},methods:{downloadExcel:function(){var t=this;this.json_data=[],this.tableItems.forEach((function(e){var a={};a.employeeFullName=e.employeeFullName,a.username=e.username,a.yurDepNameUz=e.yurDepNameUz,a.department=e.departmentNameUz,a.phoneNumber=e.phoneNumber,a.position=e.positionNameUz,a.lastUse=e.lastUse,a.roleNames=e.roleNames,a.status=e.statusUz,t.json_data.push(a)}))},selectList:function(t){this.var_default_search_payload.itemsPerPage="all"==t?this.totalItems:t,this.fetchTableItems()},fetchTableItems:function(){var t=this;this.loadingTableItems=!0,this.var_default_search_payload.keyword=this.searchKeyword,n["a"].searchListWithKeyword(o,this.var_default_search_payload,"inner").then((function(e){t.tableItems=e.data.list,t.totalItems=e.data.total})).catch((function(e){t.tableItems=[],t.totalItems=0})).finally((function(){t.loadingTableItems=!1}))},editItem:function(t){this.$router.push({name:"UpdateUser",params:{id:t}})},deleteItem:function(t){var e=this;this.$bvModal.msgBoxConfirm(this.$t("messages.delete_title"),{okTitle:this.$t("actions.confirm"),cancelTitle:this.$t("actions.cancel")}).then((function(a){a&&n["a"].deleteById(o,t).then((function(t){e.fetchTableItems()})).catch((function(t){console.log(t)}))})).catch((function(t){}))}},created:function(){this.fetchTableItems()},watch:{"var_default_search_payload.page":{handler:function(){this.fetchTableItems()}}}},r=c,m=(a("5dec"),a("2877")),d=Object(m["a"])(r,s,i,!1,null,"0424bfb2",null);e["default"]=d.exports},"377a":function(t,e,a){},"5dec":function(t,e,a){"use strict";a("377a")}}]);