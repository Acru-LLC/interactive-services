<template>
  <b-card>
    <div class="table-responsive">
      <table cellspacing="0" border="0" class="table-nowrap">
        <colgroup width="92"></colgroup>
        <colgroup width="109"></colgroup>
        <colgroup width="564"></colgroup>
        <colgroup width="248"></colgroup>
        <colgroup width="282"></colgroup>
        <colgroup width="192"></colgroup>
        <colgroup width="144"></colgroup>
        <colgroup width="191"></colgroup>
        <colgroup width="129"></colgroup>
        <colgroup width="229"></colgroup>
        <colgroup span="2" width="210"></colgroup>
        <colgroup width="165"></colgroup>
        <colgroup width="261"></colgroup>
        <colgroup width="231"></colgroup>
        <tr>
          <td colspan="15" align="center" valign="middle">
            <b
              ><font size="4"
                >Жисмоний шахслар ва юридик шахслар вакилларини шахсий қабул
                қилиш тўғрисида</font
              ></b
            >
          </td>
        </tr>
        <tr>
          <td colspan="15" align="center" valign="middle">
            <b><font size="4"> СТАТИСТИК ҲИСОБОТ</font></b>
          </td>
        </tr>
        <!-- <tr>
          <td colspan="15" align="center" valign="middle">
            <font size="3">2021 йил 1 июль ҳолатига</font>
          </td>
        </tr> -->
        <tr>
          <td colspan="15" align="center" valign="middle">
            <font size="3"
              >(1-қатор 2-4-қаторлар йиғиндисига, 5-қатор 6-12 қаторлар
              йиғиндисига, 1 ва 2-устунлар йиғиндиси 4, 8, 9, 12-устунлар
              йиғиндисига, 4-устун 5, 6, 7-устунлар йиғиндисига тенг)</font
            >
          </td>
        </tr>
        <tr>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="center" valign="middle"></td>
          <td align="left" valign="bottom">
            <font><br /></font>
          </td>
        </tr>
        <tr>
          <td align="left" valign="bottom"></td>
          <td align="left" valign="bottom"></td>
          <td align="left" valign="bottom"></td>
          <td align="left" valign="bottom"></td>
          <td align="left" valign="bottom"></td>
          <td align="left" valign="bottom"></td>
          <td align="left" valign="bottom"></td>
          <td align="left" valign="bottom"></td>
          <td align="left" valign="bottom"></td>
          <td colspan="6" align="right" valign="middle">
            <b><font size="3">2&#1042;-&#1096;&#1072;&#1082;&#1083;</font></b>
          </td>
        </tr>
        <tr>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            rowspan="3"
            align="center"
            valign="middle"
          >
            <b><font size="3">қатор</font></b>
          </td>
          <td
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            colspan="2"
            rowspan="3"
            align="center"
            valign="middle"
          >
            <b><font size="3">Жисмоний шахслар қабули</font></b>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            rowspan="2"
            align="center"
            valign="middle"
          >
            <b
              ><font size="3">
                Ҳисобот даври бошидаги қолдиқ мурожаатлар
              </font></b
            >
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            rowspan="2"
            align="center"
            valign="middle"
          >
            <b
              ><font size="3"
                >Шахсий қабул вақтида келиб тушган мурожаатлар сони</font
              ></b
            >
          </td>
          <td
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <b><font size="3">Шундан</font></b>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            rowspan="2"
            align="center"
            valign="middle"
          >
            <b><font size="3">Ҳал этилди</font></b>
          </td>
          <td
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            colspan="3"
            align="center"
            valign="middle"
          >
            <b><font size="3">Шундан (ҳал этилган мурожаатлардан)</font></b>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            rowspan="2"
            align="center"
            valign="middle"
          >
            <b
              ><font size="3"
                >Ҳал этиш учун тааллуқли-лиги бўйича юборилга</font
              ></b
            >
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            rowspan="2"
            align="center"
            valign="middle"
          >
            <b><font size="3">Кўрмасдан қолдирилган мурожаатлар</font></b>
          </td>
          <td
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            colspan="2"
            align="center"
            valign="middle"
          >
            <b><font size="3">Шундан</font></b>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            rowspan="2"
            align="center"
            valign="middle"
          >
            <b
              ><font size="3"
                >Ҳисобот даврининг охирига қолдиқ бўлиб ўтган мурожаатлар</font
              ></b
            >
          </td>
        </tr>
        <tr>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <font size="3">сайёр қабулларда</font>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <font size="3">Қаноталан-тирилди</font>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <font size="3">Рад этилди</font>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <font size="3">Тушунтириш берилди</font>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <font size="3">аноним</font>
          </td>
          <td
            class="text-rotate"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <font size="3"
              >ваколтини тасдиқловчи ҳужжатлари бўлмаганлиги учун</font
            >
          </td>
        </tr>

        <tr>
          <td
            v-for="(el, columnIndex) in columns"
            :key="columnIndex + '111'"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
            sdval="1"
            sdnum="1033;"
            :class="
              checkboxDataB.indexOf(el.id) > -1
                ? ['bg-primary', 'text-white']
                : checkboxDataA.indexOf(el.id) > -1
                ? ['bg-success', 'text-white']
                : checkboxDataC.indexOf(el.id) > -1
                ? ['bg-soft-warning', 'text-dark']
                : checkboxDataD.indexOf(el.id) > -1
                ? ['bg-light', 'text-dark']
                : ''
            "
          >
            <b
              ><font size="3">{{ columnIndex + 1 }}</font></b
            >
          </td>
        </tr>

        <tr v-if="isHiddenCheckboxA">
          <td
            v-for="index in 3"
            :key="index + 'fff'"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
          ></td>

          <td
            v-for="(column, columnIndex) in columns"
            :key="columnIndex + 'Column2'"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <div class="check">
              <Checkbox
                :value="column.id"
                id="mycheck1"
                v-model="checkboxDataA"
                :disabled="checkboxDataB.indexOf(column.id) > -1"
              />
            </div>
          </td>
        </tr>

        <tr v-if="isHiddenCheckboxB">
          <td
            v-for="index in 3"
            :key="index + 'fff'"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
          ></td>

          <td
            v-for="(column, columnIndex) in columns"
            :key="columnIndex + 'Column2'"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
          >
            <div class="check">
              <Checkbox
                :disabled="checkboxDataA.indexOf(column.id) > -1"
                :color="`#0070ff`"
                :value="column.id"
                id="mycheck2"
                v-model="checkboxDataB"
              />
            </div>
          </td>
        </tr>

        <tr class="tr-text-center bg-soft-warning" v-if="hiddenSumRadio">
          <td
            v-for="index in 3"
            :key="index + 'fff'"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
          ></td>
          <td
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            v-for="(item, index) of columns"
            :key="index + 'B-1'"
            @click="
              checkboxDataD.indexOf(item.id) > -1
                ? null
                : pushCheckboxDataC(item.id)
            "
          >
            <div class="check">
              <Checkbox
                :disabled="checkboxDataD.indexOf(item.id) > -1"
                :checked="checkboxDataC.indexOf(item.id) > -1"
                :color="`rgba(241, 180, 76, 0.25)`"
                :value="item.id"
                id="mycheck3"
              />
            </div>
          </td>
        </tr>
        <tr class="tr-text-center bg-light" v-if="hiddenSumRadio3">
          <td
            v-for="index in 3"
            :key="index + 'fff'"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
          ></td>
          <td
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            v-for="(item, index) of columns"
            :key="index + 'B-1'"
          >
            <div class="check">
              <Checkbox
                :disabled="checkboxDataC.indexOf(item.id) > -1"
                :color="`#a6b0cf`"
                :value="item.id"
                id="mycheck4"
                v-model="checkboxDataD"
              />
            </div>
          </td>
        </tr>

        <!-- 1-qator -->
        <tr
          v-for="(row, rowIndex) in rows"
          :key="rowIndex + 'indexrow'"
          class="table-nowrap"
        >
          <td
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="center"
            valign="middle"
            sdval="1"
            sdnum="1033;"
          >
            <font size="3">{{ rowIndex + 1 }}</font>
          </td>
          <td
            v-if="row.child"
            class="text-rotate-row"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            :rowspan="row.rowspan"
            align="left"
            valign="middle"
          >
            <font size="3">1-қатордан</font>
          </td>
          <td
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            :colspan="row.change ? 1 : 2"
            align="left"
            valign="middle"
          >
            <b v-if="!row.change"
              ><font size="3"> {{ getName(row) }}</font></b
            >
            <font v-else size="3"> {{ getName(row) }}</font>
          </td>
          <td
            v-for="(column, columnIndex) in columns"
            :key="columnIndex + 'Column'"
            style="
              border-top: 1px solid #000000;
              border-bottom: 1px solid #000000;
              border-left: 1px solid #000000;
              border-right: 1px solid #000000;
            "
            align="left"
            valign="middle"
            bgcolor="#FFFFFF"
          >
            <p
              type="number"
              class="custom_input"
              :id="
                JSON.stringify({
                  rowId: row.id,
                  columnId: column.id,
                })
              "
            ></p>
          </td>
        </tr>
      </table>
    </div>

    <b-row>
      <b-col>
        <div class="d-flex align-items-center justify-content-center mb-5">
          <b-form-radio-group buttons v-model="selected">
            <b-form-radio value="A" button-variant="outline-success"
              >A</b-form-radio
            >
          </b-form-radio-group>

          <span style="font-size: 20px" class="ml-2 mr-2">==</span>

          <b-form-radio-group buttons v-model="selected">
            <b-form-radio button-variant="outline-primary" value="B"
              >B</b-form-radio
            >
          </b-form-radio-group>

          <b-button-group>
            <b-button
              @click="cancelF"
              :disabled="!isHiddenCheckboxA && !isHiddenCheckboxB"
              variant="danger"
              class="ml-4"
            >
              {{ $t("actions.cancel") }}
              <i class="fa fa-times"></i>
            </b-button>
            <b-button
              :disabled="!checkboxDataB.length > 0 || !checkboxDataA.length > 0"
              variant="success"
              @click.prevent="saveFormula"
            >
              <b-overlay :opacity="0.1" :show="loader" rounded="sm">
                <div class="d-flex align-items-center justify-content-center">
                  <i class="bx bx-save font-size-18 mr-2"></i>
                  {{ $t("actions.save") }}
                </div>
              </b-overlay>
            </b-button>
          </b-button-group>

          
        </div>
         <div class="row" >
                      <div class="col-lg-12">
                        <h5 class="mb-4">{{ $t("conditionTable") }}</h5>
                      
                        <div class="d-flex align-items-center">
                          <div>
                          <p
                          v-for="(formula, index) in formulas"
                          :key="index + 'f-1-f-2'"
                        >
                    

                        <ul class="list-unstyled">
                          <li class="mb-1 hov-li-formula" >
                         <div class="d-flex align-items-center">
                            <div>
                      
                           <span class="pre text-success ">
                                {{formula.f1Cols.map(e => e[g_label('nameLt', 'nameRu')]).join(" , ")}}
                           </span>
                          </div>
                                    <strong class="mr-3 ml-3">
                                       == 
                                    </strong>

                              <div>
                            
                                <span class="pre text-primary">
                                 {{formula.f2Cols.map(e => e[g_label('nameLt', 'nameRu')]).join(" , ")}}
                           </span>


                              
                              </div>
                              <div>
                                  <b-button
                                  @click="deleteFormula(formula.id, 'left')"
                        size="sm"
                        class="mr-3 ml-3 trashFormulaCss"
                        variant="light"
                      >
                        <i class="bx bx-trash"></i>
                      </b-button>
                              </div>
                         </div>
                          </li>
                        </ul>
                          <!-- {{ formula }} -->
                        </p>
                        </div>
          


                        </div>
                      </div>
                    </div>
      </b-col>
      <b-col>
        <div class="d-flex align-items-center justify-content-center mb-5">
          <b-button-group>
            <b-button @click="selectSumColumn" class="ml-4 bg-soft-warning">
              <span class="text-dark">
                {{ $t("selectSumColumn") }}
              </span>
            </b-button>

            <b-button @click="selectSumColumns" class="bg-light">
              <span class="text-dark">
                {{ $t("selectSumColumns") }}
              </span>
            </b-button>
          </b-button-group>
          <b-button-group class="ml-4">
            <b-button
              @click="removeR"
              :disabled="!hiddenSumRadio && !hiddenSumRadio3"
              variant="danger"
            >
              {{ $t("actions.cancel") }}
              <i class="fa fa-times"></i>
            </b-button>

            <b-button
              @click="saveRFormula"
              :disabled="!checkboxDataC.length > 0 || !checkboxDataD.length > 0"
              variant="success"
            >
              <b-overlay :show="loaderR" opacity="0.1">
                <i class="fa fa-save"></i> {{ $t("actions.save") }}</b-overlay
              >
            </b-button>
          </b-button-group>
        </div>

        <hr>
        <div class="row">
          <div class="col-lg-12">
            <h5 class="mb-4">{{ $t("selectSumColumnsLabel") }}</h5>
          
            <div class="d-flex align-items-center">
              <div >
              <p
              v-for="(formula, index) in formulas_2"
              :key="index + 'f-1-f-2'"
            >
        
            <ul class="list-unstyled">
              <li class="mb-1  hov-li-formula_2" >
                
              <div class="d-flex align-items-center">
                  <span class="pre text-warning">
                    {{formula.f1Cols.map(e => e[g_label('nameLt', 'nameRu')]).join(" , ")}} =
                </span>

                <span>
                  {{formula.f2Cols.map(e => e[g_label('nameLt', 'nameRu')]).join(" + ")}}
                </span>


                  <div>
                    <b-button
                      @click="deleteFormula(formula.id, 'right')"
                    size="sm"
                    class="mr-3 ml-3 trashFormulaCss_2"
                    variant="light"
                  >
                    <i class="bx bx-trash"></i>
                  </b-button>
              </div>
                  </div>
              </li>
            </ul>
            </p>
            </div>

            </div>
          </div>
        </div>
      </b-col>
    </b-row>
     <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-lg-4">
                  <h5>{{ $t("template_departments") }}</h5>
                  <!-- <Back :to="'/report/templates'" /> -->
                </div>
                <div class="col-lg-8">
                  <div class="text-sm-right">
                  
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12">
                  <ol class="mt-2 pl-3">
                    <li
                      class="p-2 lidep"
                      v-for="(item, index) in listDepartments"
                      :key="index + 'Departments'"
                    >
                      {{ getName({nameRu:item.nameRu, nameLt:item.nameLt}) }}
                      <!-- <b-button
                        @click="openConf"
                        class="li-hide ml-2"
                        size="sm"
                        variant="light"
                      >
                        <i class="bx bx-trash"></i>
                      </b-button> -->
                    </li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </b-card>
</template>

<script>
import { g_label, dec } from "@/helper";
import Checkbox from "vue-material-checkbox";
import Service from "../../reportService";
export default {
  components: {
    Checkbox,
  },
  watch: {
    selected: {
      handler(v) {
        if (v == "A") {
          this.toggleFormulaA(true);
        } else if (v == "B") {
          this.toggleFormulaB(true);
        }
      },
    },
  },
  data() {
    return {
      listDepartments: [],
      loader: false,
      selected: "",
      isHiddenCheckboxB: false,
      isHiddenCheckboxA: false,
      checkboxDataA: [],
      checkboxDataB: [],
      // getName: getName,
      g_label: g_label,
      columns: [
        {
          id: 1139,
          name: "Ҳисобот даври бошидаги қолдиқ мурожаатлар",
        },
        {
          id: 1140,
          name: "Шахсий қабул вақтида келиб тушган мурожаатлар сони",
        },
        {
          id: 1141,
          name: "сайёр қабулларда",
        },
        {
          id: 1142,
          name: "Ҳал этилд",
        },
        {
          id: 1143,
          name: "Қаноталан-тирилди",
        },
        {
          id: 1144,
          name: "Рад этилди",
        },
        {
          id: 1145,
          name: "Тушунтириш берилди",
        },
        {
          id: 1146,
          name: "Ҳал этиш учун тааллуқли-лиги бўйича юборилган",
        },
        {
          id: 1147,
          name: "Кўрмасдан қолдирилган мурожаатлар",
        },
        {
          id: 1148,
          name: "аноним",
        },
        {
          id: 1149,
          name: "ваколтини тасдиқловчи ҳужжатлари бўлмаганлиги учун",
        },
        {
          id: 1150,
          name: "Ҳисобот даврининг охирига қолдиқ бўлиб ўтган мурожаатлар",
        },
      ],

      rows: [
        {
          id: 79,
          nameLt:
            "Адлия бўлими ходимлари томонидан қабул қилинган жисмоний шахслар ва юридик шахслар вакиллари",
          nameRu:
            "Адлия бўлими ходимлари томонидан қабул қилинган жисмоний шахслар ва юридик шахслар вакиллари",
        },
        {
          id: 80,
          child: true,
          rowspan: 3,
          change: true,
          nameLt:
            "Бошқарма бошлиғи томонидан қабул қилинган жисмоний шахслар ва юридик шахслар вакиллари",
          nameRu:
            "Бошқарма бошлиғи томонидан қабул қилинган жисмоний шахслар ва юридик шахслар вакиллари",
        },
        {
          id: 81,
          nameLt:
            "Бошқарма бошлиғи ўринбосарлари томонидан қабул қилинган жисмоний шахслар ва юридик шахслар вакиллари",
          nameRu:
            "Бошқарма бошлиғи ўринбосарлари томонидан қабул қилинган жисмоний шахслар ва юридик шахслар вакиллари",
          change: true,
        },
        {
          id: 82,
          nameLt:
            "Бошқарма ходимлари томонидан қабул қилинган жисмоний шахслар ва юридик шахслар вакиллари",
          nameRu:
            "Бошқарма ходимлари томонидан қабул қилинган жисмоний шахслар ва юридик шахслар вакиллари",
          change: true,
        },
        {
          id: 90,
          nameLt: "Мурожаат мазмуни",
          nameRu: "Мурожаат мазмуни",
        },
        {
          id: 83,
          nameLt: "Ижтимоий-иқтисодий соҳада ҳуқуқни қўллаш амалиётига оид",
          nameRu: "Ижтимоий-иқтисодий соҳада ҳуқуқни қўллаш амалиётига оид",
          child: true,
          rowspan: 7,
          change: true,
        },

        {
          id: 84,
          nameLt: "Инсон ҳуқуқларини ҳимоя қилишга оид",
          nameRu: "Инсон ҳуқуқларини ҳимоя қилишга оид",
          change: true,
        },

        {
          id: 85,
          nameLt: "Нотариат ва адвокатурага оид",
          nameRu: "Нотариат ва адвокатурага оид",
          change: true,
        },

        {
          id: 86,
          nameLt: "Юридик хизматлар фаолиятига оид",
          nameRu: "Юридик хизматлар фаолиятига оид",
          change: true,
        },

        {
          id: 87,
          nameLt: "Нодавлат нотижорат ташкилотлари фаолиятига оид",
          nameRu: "Нодавлат нотижорат ташкилотлари фаолиятига оид",
          change: true,
        },

        {
          id: 88,
          nameLt: "Давлат хизматларини кўрсатишга оид",
          nameRu: "Давлат хизматларини кўрсатишга оид",
          change: true,
        },

        {
          id: 89,
          nameLt: "Бошқа соҳалар бўйича",
          nameRu: "Бошқа соҳалар бўйича",
          change: true,
        },
      ],
      inputs: [],
      hiddenSumRadio: false,
      hiddenSumRadio3: false,
      checkboxDataC: [],
      loaderR: false,
      checkboxDataD: [],
      formulas_2: [],
      formulas: [],
    };
  },
  mounted() {
    this.getInputs();
    this.formulasByTableId_2();
    this.formulasByTableId();
    this.getByDepartments();
  },
  methods: {
    getByDepartments() {
      Service.getByDepartments(dec(this.$route.params.id)).then((res) => {
        this.listDepartments = res.data;
      });
    },
    formulasByTableId() {
      Service.formulasByTableId(dec(this.$route.params.id))
        .then((rs) => {
          this.formulas = rs.data;
        })
        .catch((e) => {});
    },
    deleteFormula(id, type) {
      this.cnf().then((res) => {
        if (res.value) {
          Service.deleteFormula(id).then((res) => {
            this.deleteSuccess();
            if (type == "left") {
              this.formulasByTableId();
            } else {
              this.formulasByTableId_2();
            }
          });
        }
      });
    },
    formulasByTableId_2() {
      Service.formulasByTableId_2(dec(this.$route.params.id))
        .then((rs) => {
          this.formulas_2 = rs.data;
        })
        .catch((e) => {});
    },
    saveRFormula() {
      this.loaderR = true;
      let payload = {
        f1: this.checkboxDataC,
        f2: this.checkboxDataD,
      };
      Service.saveFormulaRight(payload, dec(this.$route.params.id))
        .then((rs) => {
          if (rs.data) {
            this.formulasByTableId_2()
            this.successSaved();
            this.checkboxDataC = [];
            this.checkboxDataD = [];
          }
        })
        .catch((e) => {})
        .finally(() => (this.loaderR = false));
    },

    selectSumColumns() {
      this.cancelF();
      this.hiddenSumRadio3 = true;
    },
    selectSumColumn() {
      this.cancelF();
      this.hiddenSumRadio = true;
    },
    pushCheckboxDataC(id) {
      this.checkboxDataC = [id];
    },
    reset() {
      this.checkboxDataB = [];
      this.checkboxDataA = [];
    },
    saveFormula() {
      this.loader = true;
      let payload = {
        f1: this.checkboxDataA,
        f2: this.checkboxDataB,
      };
      Service.saveFormula(payload, dec(this.$route.params.id))
        .then((rs) => {
          if (rs.data) {
            this.successSaved();
            this.reset();
            this.formulasByTableId()
          }
        })
        .catch((e) => {})
        .finally(() => (this.loader = false));
    },
    cancelF() {
      this.toggleFormulaA(false);
      this.toggleFormulaB(false);
      this.selected = "";
      this.checkboxDataB = [];
      this.checkboxDataA = [];
    },
    removeR() {
      this.hiddenSumRadio = false;
      this.hiddenSumRadio3 = false;
      this.checkboxDataC = [];
      this.checkboxDataD = [];
    },
    toggleFormulaA(v) {
      this.isHiddenCheckboxA = v;
      if (v) {
        this.removeR();
      }
    },
    toggleFormulaB(v) {
      this.isHiddenCheckboxB = v;
      if (v) {
        this.removeR();
      }
    },
    getInputs() {
      this.inputs = document.getElementsByClassName("custom_input");
    },
    keyUpEventsDisable(e) {
      if (e.which === 38 || e.which === 40) {
        e.preventDefault();
      }
    },
    keydownEvt(e) {
      this.keyUpEventsDisable(e);

      if (e.keyCode == 40) {
        //down
      } else if (e.keyCode == 38) {
        //up
      } else if (e.keyCode == 37) {
        //left
      } else if (e.keyCode == 39) {
        //right
      }
    },
    focusVal(evt) {
      this.inputs.forEach((el) => {
        el.classList.remove("borderInput");
      });
      evt.target.classList.add("borderInput");
    },
  },
};
</script>


<style scoped>
.custom_input {
  font-size: 15px;
  min-width: 70px;
}
.text-rotate {
  writing-mode: vertical-lr;
  -webkit-writing-mode: vertical-lr;
  -ms-writing-mode: vertical-lr;
  -webkit-transform: rotate(-180deg);
  -moz-transform: rotate(-180deg);
  -o-transform: rotate(-180deg);
  transform: rotate(-180deg);
  margin: auto;
  padding: 20px 0px;
}
.text-rotate-row {
  writing-mode: vertical-lr;
  -webkit-writing-mode: vertical-lr;
  -ms-writing-mode: vertical-lr;
  -webkit-transform: rotate(-180deg);
  -moz-transform: rotate(-180deg);
  -o-transform: rotate(-180deg);
  transform: rotate(-180deg);
}
/* Chrome, Safari, Edge, Opera */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Firefox */
input[type="number"] {
  -moz-appearance: textfield;
}
.borderInput {
  border: 2px solid green !important;
}
</style>
<style lang="scss">
.check {
  margin-top: 5px;
  .m-chckbox--container {
    margin: 0px !important;
    width: 22px !important;
  }
  label {
    margin: 0;
    display: none;
  }
}
</style>